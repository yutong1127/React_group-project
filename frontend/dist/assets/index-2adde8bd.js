function M7(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var hn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function N7(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var S={},F7={get exports(){return S},set exports(t){S=t}},Pv={},P={},$7={get exports(){return P},set exports(t){P=t}},pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp=Symbol.for("react.element"),L7=Symbol.for("react.portal"),B7=Symbol.for("react.fragment"),j7=Symbol.for("react.strict_mode"),q7=Symbol.for("react.profiler"),z7=Symbol.for("react.provider"),H7=Symbol.for("react.context"),U7=Symbol.for("react.forward_ref"),V7=Symbol.for("react.suspense"),W7=Symbol.for("react.memo"),G7=Symbol.for("react.lazy"),vP=Symbol.iterator;function K7(t){return t===null||typeof t!="object"?null:(t=vP&&t[vP]||t["@@iterator"],typeof t=="function"?t:null)}var mI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gI=Object.assign,vI={};function $d(t,e,n){this.props=t,this.context=e,this.refs=vI,this.updater=n||mI}$d.prototype.isReactComponent={};$d.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$d.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yI(){}yI.prototype=$d.prototype;function O2(t,e,n){this.props=t,this.context=e,this.refs=vI,this.updater=n||mI}var D2=O2.prototype=new yI;D2.constructor=O2;gI(D2,$d.prototype);D2.isPureReactComponent=!0;var yP=Array.isArray,bI=Object.prototype.hasOwnProperty,I2={current:null},SI={key:!0,ref:!0,__self:!0,__source:!0};function xI(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)bI.call(e,r)&&!SI.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Mp,type:t,key:s,ref:a,props:i,_owner:I2.current}}function Y7(t,e){return{$$typeof:Mp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function M2(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mp}function J7(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bP=/\/+/g;function x1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?J7(""+t.key):e.toString(36)}function gg(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Mp:case L7:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+x1(a,0):r,yP(i)?(n="",t!=null&&(n=t.replace(bP,"$&/")+"/"),gg(i,e,n,"",function(c){return c})):i!=null&&(M2(i)&&(i=Y7(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(bP,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",yP(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+x1(s,o);a+=gg(s,e,n,l,i)}else if(l=K7(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+x1(s,o++),a+=gg(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function bm(t,e,n){if(t==null)return t;var r=[],i=0;return gg(t,r,"","",function(s){return e.call(n,s,i++)}),r}function X7(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vr={current:null},vg={transition:null},Q7={ReactCurrentDispatcher:Vr,ReactCurrentBatchConfig:vg,ReactCurrentOwner:I2};pt.Children={map:bm,forEach:function(t,e,n){bm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bm(t,function(){e++}),e},toArray:function(t){return bm(t,function(e){return e})||[]},only:function(t){if(!M2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pt.Component=$d;pt.Fragment=B7;pt.Profiler=q7;pt.PureComponent=O2;pt.StrictMode=j7;pt.Suspense=V7;pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q7;pt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gI({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=I2.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)bI.call(e,l)&&!SI.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:Mp,type:t.type,key:i,ref:s,props:r,_owner:a}};pt.createContext=function(t){return t={$$typeof:H7,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:z7,_context:t},t.Consumer=t};pt.createElement=xI;pt.createFactory=function(t){var e=xI.bind(null,t);return e.type=t,e};pt.createRef=function(){return{current:null}};pt.forwardRef=function(t){return{$$typeof:U7,render:t}};pt.isValidElement=M2;pt.lazy=function(t){return{$$typeof:G7,_payload:{_status:-1,_result:t},_init:X7}};pt.memo=function(t,e){return{$$typeof:W7,type:t,compare:e===void 0?null:e}};pt.startTransition=function(t){var e=vg.transition;vg.transition={};try{t()}finally{vg.transition=e}};pt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};pt.useCallback=function(t,e){return Vr.current.useCallback(t,e)};pt.useContext=function(t){return Vr.current.useContext(t)};pt.useDebugValue=function(){};pt.useDeferredValue=function(t){return Vr.current.useDeferredValue(t)};pt.useEffect=function(t,e){return Vr.current.useEffect(t,e)};pt.useId=function(){return Vr.current.useId()};pt.useImperativeHandle=function(t,e,n){return Vr.current.useImperativeHandle(t,e,n)};pt.useInsertionEffect=function(t,e){return Vr.current.useInsertionEffect(t,e)};pt.useLayoutEffect=function(t,e){return Vr.current.useLayoutEffect(t,e)};pt.useMemo=function(t,e){return Vr.current.useMemo(t,e)};pt.useReducer=function(t,e,n){return Vr.current.useReducer(t,e,n)};pt.useRef=function(t){return Vr.current.useRef(t)};pt.useState=function(t){return Vr.current.useState(t)};pt.useSyncExternalStore=function(t,e,n){return Vr.current.useSyncExternalStore(t,e,n)};pt.useTransition=function(){return Vr.current.useTransition()};pt.version="18.2.0";(function(t){t.exports=pt})($7);const En=kv(P),rd=M7({__proto__:null,default:En},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z7=P,eq=Symbol.for("react.element"),tq=Symbol.for("react.fragment"),nq=Object.prototype.hasOwnProperty,rq=Z7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iq={key:!0,ref:!0,__self:!0,__source:!0};function wI(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)nq.call(e,r)&&!iq.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:eq,type:t,key:s,ref:a,props:i,_owner:rq.current}}Pv.Fragment=tq;Pv.jsx=wI;Pv.jsxs=wI;(function(t){t.exports=Pv})(F7);var Bx={},tc={},sq={get exports(){return tc},set exports(t){tc=t}},Fi={},jx={},aq={get exports(){return jx},set exports(t){jx=t}},CI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,j){var q=B.length;B.push(j);e:for(;0<q;){var V=q-1>>>1,U=B[V];if(0<i(U,j))B[V]=j,B[q]=U,q=V;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var j=B[0],q=B.pop();if(q!==j){B[0]=q;e:for(var V=0,U=B.length,ne=U>>>1;V<ne;){var W=2*(V+1)-1,J=B[W],K=W+1,Q=B[K];if(0>i(J,q))K<U&&0>i(Q,J)?(B[V]=Q,B[K]=q,V=K):(B[V]=J,B[W]=q,V=W);else if(K<U&&0>i(Q,q))B[V]=Q,B[K]=q,V=K;else break e}}return j}function i(B,j){var q=B.sortIndex-j.sortIndex;return q!==0?q:B.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,p=!1,f=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var j=n(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=B)r(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function C(B){if(m=!1,b(B),!f)if(n(l)!==null)f=!0,L(R);else{var j=n(c);j!==null&&F(C,j.startTime-B)}}function R(B,j){f=!1,m&&(m=!1,v(k),k=-1),p=!0;var q=h;try{for(b(j),d=n(l);d!==null&&(!(d.expirationTime>j)||B&&!D());){var V=d.callback;if(typeof V=="function"){d.callback=null,h=d.priorityLevel;var U=V(d.expirationTime<=j);j=t.unstable_now(),typeof U=="function"?d.callback=U:d===n(l)&&r(l),b(j)}else r(l);d=n(l)}if(d!==null)var ne=!0;else{var W=n(c);W!==null&&F(C,W.startTime-j),ne=!1}return ne}finally{d=null,h=q,p=!1}}var w=!1,E=null,k=-1,T=5,_=-1;function D(){return!(t.unstable_now()-_<T)}function I(){if(E!==null){var B=t.unstable_now();_=B;var j=!0;try{j=E(!0,B)}finally{j?M():(w=!1,E=null)}}else w=!1}var M;if(typeof y=="function")M=function(){y(I)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,O=A.port2;A.port1.onmessage=I,M=function(){O.postMessage(null)}}else M=function(){g(I,0)};function L(B){E=B,w||(w=!0,M())}function F(B,j){k=g(function(){B(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,L(R))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var q=h;h=j;try{return B()}finally{h=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,j){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var q=h;h=B;try{return j()}finally{h=q}},t.unstable_scheduleCallback=function(B,j,q){var V=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?V+q:V):q=V,B){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=q+U,B={id:u++,callback:j,priorityLevel:B,startTime:q,expirationTime:U,sortIndex:-1},q>V?(B.sortIndex=q,e(c,B),n(l)===null&&B===n(c)&&(m?(v(k),k=-1):m=!0,F(C,q-V))):(B.sortIndex=U,e(l,B),f||p||(f=!0,L(R))),B},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(B){var j=h;return function(){var q=h;h=j;try{return B.apply(this,arguments)}finally{h=q}}}})(CI);(function(t){t.exports=CI})(aq);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EI=P,Ii=jx;function we(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TI=new Set,If={};function Dc(t,e){id(t,e),id(t+"Capture",e)}function id(t,e){for(If[t]=e,t=0;t<e.length;t++)TI.add(e[t])}var to=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qx=Object.prototype.hasOwnProperty,oq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,SP={},xP={};function lq(t){return qx.call(xP,t)?!0:qx.call(SP,t)?!1:oq.test(t)?xP[t]=!0:(SP[t]=!0,!1)}function cq(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uq(t,e,n,r){if(e===null||typeof e>"u"||cq(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wr(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var br={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){br[t]=new Wr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];br[e]=new Wr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){br[t]=new Wr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){br[t]=new Wr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){br[t]=new Wr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){br[t]=new Wr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){br[t]=new Wr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){br[t]=new Wr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){br[t]=new Wr(t,5,!1,t.toLowerCase(),null,!1,!1)});var N2=/[\-:]([a-z])/g;function F2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(N2,F2);br[e]=new Wr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(N2,F2);br[e]=new Wr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(N2,F2);br[e]=new Wr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){br[t]=new Wr(t,1,!1,t.toLowerCase(),null,!1,!1)});br.xlinkHref=new Wr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){br[t]=new Wr(t,1,!1,t.toLowerCase(),null,!0,!0)});function $2(t,e,n,r){var i=br.hasOwnProperty(e)?br[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uq(e,n,i,r)&&(n=null),r||i===null?lq(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var oo=EI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sm=Symbol.for("react.element"),bu=Symbol.for("react.portal"),Su=Symbol.for("react.fragment"),L2=Symbol.for("react.strict_mode"),zx=Symbol.for("react.profiler"),RI=Symbol.for("react.provider"),kI=Symbol.for("react.context"),B2=Symbol.for("react.forward_ref"),Hx=Symbol.for("react.suspense"),Ux=Symbol.for("react.suspense_list"),j2=Symbol.for("react.memo"),bo=Symbol.for("react.lazy"),PI=Symbol.for("react.offscreen"),wP=Symbol.iterator;function fh(t){return t===null||typeof t!="object"?null:(t=wP&&t[wP]||t["@@iterator"],typeof t=="function"?t:null)}var mn=Object.assign,w1;function Kh(t){if(w1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);w1=e&&e[1]||""}return`
`+w1+t}var C1=!1;function E1(t,e){if(!t||C1)return"";C1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{C1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Kh(t):""}function dq(t){switch(t.tag){case 5:return Kh(t.type);case 16:return Kh("Lazy");case 13:return Kh("Suspense");case 19:return Kh("SuspenseList");case 0:case 2:case 15:return t=E1(t.type,!1),t;case 11:return t=E1(t.type.render,!1),t;case 1:return t=E1(t.type,!0),t;default:return""}}function Vx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Su:return"Fragment";case bu:return"Portal";case zx:return"Profiler";case L2:return"StrictMode";case Hx:return"Suspense";case Ux:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kI:return(t.displayName||"Context")+".Consumer";case RI:return(t._context.displayName||"Context")+".Provider";case B2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j2:return e=t.displayName||null,e!==null?e:Vx(t.type)||"Memo";case bo:e=t._payload,t=t._init;try{return Vx(t(e))}catch{}}return null}function hq(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vx(e);case 8:return e===L2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _I(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fq(t){var e=_I(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xm(t){t._valueTracker||(t._valueTracker=fq(t))}function AI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_I(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function t0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wx(t,e){var n=e.checked;return mn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function CP(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function OI(t,e){e=e.checked,e!=null&&$2(t,"checked",e,!1)}function Gx(t,e){OI(t,e);var n=Zo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Kx(t,e.type,n):e.hasOwnProperty("defaultValue")&&Kx(t,e.type,Zo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function EP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Kx(t,e,n){(e!=="number"||t0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yh=Array.isArray;function $u(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Yx(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(we(91));return mn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function TP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(we(92));if(Yh(n)){if(1<n.length)throw Error(we(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zo(n)}}function DI(t,e){var n=Zo(e.value),r=Zo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function RP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function II(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?II(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wm,MI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wm=wm||document.createElement("div"),wm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Mf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pq=["Webkit","ms","Moz","O"];Object.keys(nf).forEach(function(t){pq.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nf[e]=nf[t]})});function NI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nf.hasOwnProperty(t)&&nf[t]?(""+e).trim():e+"px"}function FI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=NI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var mq=mn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xx(t,e){if(e){if(mq[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(we(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(we(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(we(61))}if(e.style!=null&&typeof e.style!="object")throw Error(we(62))}}function Qx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zx=null;function q2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ew=null,Lu=null,Bu=null;function kP(t){if(t=$p(t)){if(typeof ew!="function")throw Error(we(280));var e=t.stateNode;e&&(e=Iv(e),ew(t.stateNode,t.type,e))}}function $I(t){Lu?Bu?Bu.push(t):Bu=[t]:Lu=t}function LI(){if(Lu){var t=Lu,e=Bu;if(Bu=Lu=null,kP(t),e)for(t=0;t<e.length;t++)kP(e[t])}}function BI(t,e){return t(e)}function jI(){}var T1=!1;function qI(t,e,n){if(T1)return t(e,n);T1=!0;try{return BI(t,e,n)}finally{T1=!1,(Lu!==null||Bu!==null)&&(jI(),LI())}}function Nf(t,e){var n=t.stateNode;if(n===null)return null;var r=Iv(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(we(231,e,typeof n));return n}var tw=!1;if(to)try{var ph={};Object.defineProperty(ph,"passive",{get:function(){tw=!0}}),window.addEventListener("test",ph,ph),window.removeEventListener("test",ph,ph)}catch{tw=!1}function gq(t,e,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var rf=!1,n0=null,r0=!1,nw=null,vq={onError:function(t){rf=!0,n0=t}};function yq(t,e,n,r,i,s,a,o,l){rf=!1,n0=null,gq.apply(vq,arguments)}function bq(t,e,n,r,i,s,a,o,l){if(yq.apply(this,arguments),rf){if(rf){var c=n0;rf=!1,n0=null}else throw Error(we(198));r0||(r0=!0,nw=c)}}function Ic(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function PP(t){if(Ic(t)!==t)throw Error(we(188))}function Sq(t){var e=t.alternate;if(!e){if(e=Ic(t),e===null)throw Error(we(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return PP(i),t;if(s===r)return PP(i),e;s=s.sibling}throw Error(we(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(we(189))}}if(n.alternate!==r)throw Error(we(190))}if(n.tag!==3)throw Error(we(188));return n.stateNode.current===n?t:e}function HI(t){return t=Sq(t),t!==null?UI(t):null}function UI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=UI(t);if(e!==null)return e;t=t.sibling}return null}var VI=Ii.unstable_scheduleCallback,_P=Ii.unstable_cancelCallback,xq=Ii.unstable_shouldYield,wq=Ii.unstable_requestPaint,kn=Ii.unstable_now,Cq=Ii.unstable_getCurrentPriorityLevel,z2=Ii.unstable_ImmediatePriority,WI=Ii.unstable_UserBlockingPriority,i0=Ii.unstable_NormalPriority,Eq=Ii.unstable_LowPriority,GI=Ii.unstable_IdlePriority,_v=null,sa=null;function Tq(t){if(sa&&typeof sa.onCommitFiberRoot=="function")try{sa.onCommitFiberRoot(_v,t,void 0,(t.current.flags&128)===128)}catch{}}var Ps=Math.clz32?Math.clz32:Pq,Rq=Math.log,kq=Math.LN2;function Pq(t){return t>>>=0,t===0?32:31-(Rq(t)/kq|0)|0}var Cm=64,Em=4194304;function Jh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function s0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Jh(o):(s&=a,s!==0&&(r=Jh(s)))}else a=n&~i,a!==0?r=Jh(a):s!==0&&(r=Jh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ps(e),i=1<<n,r|=t[n],e&=~i;return r}function _q(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Aq(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Ps(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=_q(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function rw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function KI(){var t=Cm;return Cm<<=1,!(Cm&4194240)&&(Cm=64),t}function R1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Np(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ps(e),t[e]=n}function Oq(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ps(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function H2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ps(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Nt=0;function YI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var JI,U2,XI,QI,ZI,iw=!1,Tm=[],Mo=null,No=null,Fo=null,Ff=new Map,$f=new Map,xo=[],Dq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function AP(t,e){switch(t){case"focusin":case"focusout":Mo=null;break;case"dragenter":case"dragleave":No=null;break;case"mouseover":case"mouseout":Fo=null;break;case"pointerover":case"pointerout":Ff.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$f.delete(e.pointerId)}}function mh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=$p(e),e!==null&&U2(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Iq(t,e,n,r,i){switch(e){case"focusin":return Mo=mh(Mo,t,e,n,r,i),!0;case"dragenter":return No=mh(No,t,e,n,r,i),!0;case"mouseover":return Fo=mh(Fo,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ff.set(s,mh(Ff.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,$f.set(s,mh($f.get(s)||null,t,e,n,r,i)),!0}return!1}function eM(t){var e=Ml(t.target);if(e!==null){var n=Ic(e);if(n!==null){if(e=n.tag,e===13){if(e=zI(n),e!==null){t.blockedOn=e,ZI(t.priority,function(){XI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zx=r,n.target.dispatchEvent(r),Zx=null}else return e=$p(n),e!==null&&U2(e),t.blockedOn=n,!1;e.shift()}return!0}function OP(t,e,n){yg(t)&&n.delete(e)}function Mq(){iw=!1,Mo!==null&&yg(Mo)&&(Mo=null),No!==null&&yg(No)&&(No=null),Fo!==null&&yg(Fo)&&(Fo=null),Ff.forEach(OP),$f.forEach(OP)}function gh(t,e){t.blockedOn===e&&(t.blockedOn=null,iw||(iw=!0,Ii.unstable_scheduleCallback(Ii.unstable_NormalPriority,Mq)))}function Lf(t){function e(i){return gh(i,t)}if(0<Tm.length){gh(Tm[0],t);for(var n=1;n<Tm.length;n++){var r=Tm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Mo!==null&&gh(Mo,t),No!==null&&gh(No,t),Fo!==null&&gh(Fo,t),Ff.forEach(e),$f.forEach(e),n=0;n<xo.length;n++)r=xo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xo.length&&(n=xo[0],n.blockedOn===null);)eM(n),n.blockedOn===null&&xo.shift()}var ju=oo.ReactCurrentBatchConfig,a0=!0;function Nq(t,e,n,r){var i=Nt,s=ju.transition;ju.transition=null;try{Nt=1,V2(t,e,n,r)}finally{Nt=i,ju.transition=s}}function Fq(t,e,n,r){var i=Nt,s=ju.transition;ju.transition=null;try{Nt=4,V2(t,e,n,r)}finally{Nt=i,ju.transition=s}}function V2(t,e,n,r){if(a0){var i=sw(t,e,n,r);if(i===null)F1(t,e,r,o0,n),AP(t,r);else if(Iq(i,t,e,n,r))r.stopPropagation();else if(AP(t,r),e&4&&-1<Dq.indexOf(t)){for(;i!==null;){var s=$p(i);if(s!==null&&JI(s),s=sw(t,e,n,r),s===null&&F1(t,e,r,o0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else F1(t,e,r,null,n)}}var o0=null;function sw(t,e,n,r){if(o0=null,t=q2(r),t=Ml(t),t!==null)if(e=Ic(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return o0=t,null}function tM(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cq()){case z2:return 1;case WI:return 4;case i0:case Eq:return 16;case GI:return 536870912;default:return 16}default:return 16}}var Co=null,W2=null,bg=null;function nM(){if(bg)return bg;var t,e=W2,n=e.length,r,i="value"in Co?Co.value:Co.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return bg=i.slice(t,1<r?1-r:void 0)}function Sg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rm(){return!0}function DP(){return!1}function $i(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Rm:DP,this.isPropagationStopped=DP,this}return mn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rm)},persist:function(){},isPersistent:Rm}),e}var Ld={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},G2=$i(Ld),Fp=mn({},Ld,{view:0,detail:0}),$q=$i(Fp),k1,P1,vh,Av=mn({},Fp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:K2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vh&&(vh&&t.type==="mousemove"?(k1=t.screenX-vh.screenX,P1=t.screenY-vh.screenY):P1=k1=0,vh=t),k1)},movementY:function(t){return"movementY"in t?t.movementY:P1}}),IP=$i(Av),Lq=mn({},Av,{dataTransfer:0}),Bq=$i(Lq),jq=mn({},Fp,{relatedTarget:0}),_1=$i(jq),qq=mn({},Ld,{animationName:0,elapsedTime:0,pseudoElement:0}),zq=$i(qq),Hq=mn({},Ld,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Uq=$i(Hq),Vq=mn({},Ld,{data:0}),MP=$i(Vq),Wq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yq(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Kq[t])?!!e[t]:!1}function K2(){return Yq}var Jq=mn({},Fp,{key:function(t){if(t.key){var e=Wq[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gq[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:K2,charCode:function(t){return t.type==="keypress"?Sg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Xq=$i(Jq),Qq=mn({},Av,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),NP=$i(Qq),Zq=mn({},Fp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:K2}),ez=$i(Zq),tz=mn({},Ld,{propertyName:0,elapsedTime:0,pseudoElement:0}),nz=$i(tz),rz=mn({},Av,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iz=$i(rz),sz=[9,13,27,32],Y2=to&&"CompositionEvent"in window,sf=null;to&&"documentMode"in document&&(sf=document.documentMode);var az=to&&"TextEvent"in window&&!sf,rM=to&&(!Y2||sf&&8<sf&&11>=sf),FP=String.fromCharCode(32),$P=!1;function iM(t,e){switch(t){case"keyup":return sz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sM(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xu=!1;function oz(t,e){switch(t){case"compositionend":return sM(e);case"keypress":return e.which!==32?null:($P=!0,FP);case"textInput":return t=e.data,t===FP&&$P?null:t;default:return null}}function lz(t,e){if(xu)return t==="compositionend"||!Y2&&iM(t,e)?(t=nM(),bg=W2=Co=null,xu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rM&&e.locale!=="ko"?null:e.data;default:return null}}var cz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cz[t.type]:e==="textarea"}function aM(t,e,n,r){$I(r),e=l0(e,"onChange"),0<e.length&&(n=new G2("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var af=null,Bf=null;function uz(t){vM(t,0)}function Ov(t){var e=Eu(t);if(AI(e))return t}function dz(t,e){if(t==="change")return e}var oM=!1;if(to){var A1;if(to){var O1="oninput"in document;if(!O1){var BP=document.createElement("div");BP.setAttribute("oninput","return;"),O1=typeof BP.oninput=="function"}A1=O1}else A1=!1;oM=A1&&(!document.documentMode||9<document.documentMode)}function jP(){af&&(af.detachEvent("onpropertychange",lM),Bf=af=null)}function lM(t){if(t.propertyName==="value"&&Ov(Bf)){var e=[];aM(e,Bf,t,q2(t)),qI(uz,e)}}function hz(t,e,n){t==="focusin"?(jP(),af=e,Bf=n,af.attachEvent("onpropertychange",lM)):t==="focusout"&&jP()}function fz(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ov(Bf)}function pz(t,e){if(t==="click")return Ov(e)}function mz(t,e){if(t==="input"||t==="change")return Ov(e)}function gz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ds=typeof Object.is=="function"?Object.is:gz;function jf(t,e){if(Ds(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!qx.call(e,i)||!Ds(t[i],e[i]))return!1}return!0}function qP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zP(t,e){var n=qP(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qP(n)}}function cM(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cM(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uM(){for(var t=window,e=t0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=t0(t.document)}return e}function J2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vz(t){var e=uM(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cM(n.ownerDocument.documentElement,n)){if(r!==null&&J2(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=zP(n,s);var a=zP(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yz=to&&"documentMode"in document&&11>=document.documentMode,wu=null,aw=null,of=null,ow=!1;function HP(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ow||wu==null||wu!==t0(r)||(r=wu,"selectionStart"in r&&J2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),of&&jf(of,r)||(of=r,r=l0(aw,"onSelect"),0<r.length&&(e=new G2("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wu)))}function km(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Cu={animationend:km("Animation","AnimationEnd"),animationiteration:km("Animation","AnimationIteration"),animationstart:km("Animation","AnimationStart"),transitionend:km("Transition","TransitionEnd")},D1={},dM={};to&&(dM=document.createElement("div").style,"AnimationEvent"in window||(delete Cu.animationend.animation,delete Cu.animationiteration.animation,delete Cu.animationstart.animation),"TransitionEvent"in window||delete Cu.transitionend.transition);function Dv(t){if(D1[t])return D1[t];if(!Cu[t])return t;var e=Cu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dM)return D1[t]=e[n];return t}var hM=Dv("animationend"),fM=Dv("animationiteration"),pM=Dv("animationstart"),mM=Dv("transitionend"),gM=new Map,UP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ll(t,e){gM.set(t,e),Dc(e,[t])}for(var I1=0;I1<UP.length;I1++){var M1=UP[I1],bz=M1.toLowerCase(),Sz=M1[0].toUpperCase()+M1.slice(1);ll(bz,"on"+Sz)}ll(hM,"onAnimationEnd");ll(fM,"onAnimationIteration");ll(pM,"onAnimationStart");ll("dblclick","onDoubleClick");ll("focusin","onFocus");ll("focusout","onBlur");ll(mM,"onTransitionEnd");id("onMouseEnter",["mouseout","mouseover"]);id("onMouseLeave",["mouseout","mouseover"]);id("onPointerEnter",["pointerout","pointerover"]);id("onPointerLeave",["pointerout","pointerover"]);Dc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xz=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xh));function VP(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,bq(r,e,void 0,t),t.currentTarget=null}function vM(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;VP(i,o,c),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;VP(i,o,c),s=l}}}if(r0)throw t=nw,r0=!1,nw=null,t}function Kt(t,e){var n=e[hw];n===void 0&&(n=e[hw]=new Set);var r=t+"__bubble";n.has(r)||(yM(e,t,2,!1),n.add(r))}function N1(t,e,n){var r=0;e&&(r|=4),yM(n,t,r,e)}var Pm="_reactListening"+Math.random().toString(36).slice(2);function qf(t){if(!t[Pm]){t[Pm]=!0,TI.forEach(function(n){n!=="selectionchange"&&(xz.has(n)||N1(n,!1,t),N1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pm]||(e[Pm]=!0,N1("selectionchange",!1,e))}}function yM(t,e,n,r){switch(tM(e)){case 1:var i=Nq;break;case 4:i=Fq;break;default:i=V2}n=i.bind(null,e,n,t),i=void 0,!tw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function F1(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Ml(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}qI(function(){var c=s,u=q2(n),d=[];e:{var h=gM.get(t);if(h!==void 0){var p=G2,f=t;switch(t){case"keypress":if(Sg(n)===0)break e;case"keydown":case"keyup":p=Xq;break;case"focusin":f="focus",p=_1;break;case"focusout":f="blur",p=_1;break;case"beforeblur":case"afterblur":p=_1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=IP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Bq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=ez;break;case hM:case fM:case pM:p=zq;break;case mM:p=nz;break;case"scroll":p=$q;break;case"wheel":p=iz;break;case"copy":case"cut":case"paste":p=Uq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=NP}var m=(e&4)!==0,g=!m&&t==="scroll",v=m?h!==null?h+"Capture":null:h;m=[];for(var y=c,b;y!==null;){b=y;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,v!==null&&(C=Nf(y,v),C!=null&&m.push(zf(y,C,b)))),g)break;y=y.return}0<m.length&&(h=new p(h,f,null,n,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==Zx&&(f=n.relatedTarget||n.fromElement)&&(Ml(f)||f[no]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(f=n.relatedTarget||n.toElement,p=c,f=f?Ml(f):null,f!==null&&(g=Ic(f),f!==g||f.tag!==5&&f.tag!==6)&&(f=null)):(p=null,f=c),p!==f)){if(m=IP,C="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=NP,C="onPointerLeave",v="onPointerEnter",y="pointer"),g=p==null?h:Eu(p),b=f==null?h:Eu(f),h=new m(C,y+"leave",p,n,u),h.target=g,h.relatedTarget=b,C=null,Ml(u)===c&&(m=new m(v,y+"enter",f,n,u),m.target=b,m.relatedTarget=g,C=m),g=C,p&&f)t:{for(m=p,v=f,y=0,b=m;b;b=Kc(b))y++;for(b=0,C=v;C;C=Kc(C))b++;for(;0<y-b;)m=Kc(m),y--;for(;0<b-y;)v=Kc(v),b--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=Kc(m),v=Kc(v)}m=null}else m=null;p!==null&&WP(d,h,p,m,!1),f!==null&&g!==null&&WP(d,g,f,m,!0)}}e:{if(h=c?Eu(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var R=dz;else if(LP(h))if(oM)R=mz;else{R=fz;var w=hz}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(R=pz);if(R&&(R=R(t,c))){aM(d,R,n,u);break e}w&&w(t,h,c),t==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&Kx(h,"number",h.value)}switch(w=c?Eu(c):window,t){case"focusin":(LP(w)||w.contentEditable==="true")&&(wu=w,aw=c,of=null);break;case"focusout":of=aw=wu=null;break;case"mousedown":ow=!0;break;case"contextmenu":case"mouseup":case"dragend":ow=!1,HP(d,n,u);break;case"selectionchange":if(yz)break;case"keydown":case"keyup":HP(d,n,u)}var E;if(Y2)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else xu?iM(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(rM&&n.locale!=="ko"&&(xu||k!=="onCompositionStart"?k==="onCompositionEnd"&&xu&&(E=nM()):(Co=u,W2="value"in Co?Co.value:Co.textContent,xu=!0)),w=l0(c,k),0<w.length&&(k=new MP(k,t,null,n,u),d.push({event:k,listeners:w}),E?k.data=E:(E=sM(n),E!==null&&(k.data=E)))),(E=az?oz(t,n):lz(t,n))&&(c=l0(c,"onBeforeInput"),0<c.length&&(u=new MP("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}vM(d,e)})}function zf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function l0(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Nf(t,n),s!=null&&r.unshift(zf(t,s,i)),s=Nf(t,e),s!=null&&r.push(zf(t,s,i))),t=t.return}return r}function Kc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function WP(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,i?(l=Nf(n,s),l!=null&&a.unshift(zf(n,l,o))):i||(l=Nf(n,s),l!=null&&a.push(zf(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var wz=/\r\n?/g,Cz=/\u0000|\uFFFD/g;function GP(t){return(typeof t=="string"?t:""+t).replace(wz,`
`).replace(Cz,"")}function _m(t,e,n){if(e=GP(e),GP(t)!==e&&n)throw Error(we(425))}function c0(){}var lw=null,cw=null;function uw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dw=typeof setTimeout=="function"?setTimeout:void 0,Ez=typeof clearTimeout=="function"?clearTimeout:void 0,KP=typeof Promise=="function"?Promise:void 0,Tz=typeof queueMicrotask=="function"?queueMicrotask:typeof KP<"u"?function(t){return KP.resolve(null).then(t).catch(Rz)}:dw;function Rz(t){setTimeout(function(){throw t})}function $1(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Lf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Lf(e)}function $o(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function YP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Bd=Math.random().toString(36).slice(2),Js="__reactFiber$"+Bd,Hf="__reactProps$"+Bd,no="__reactContainer$"+Bd,hw="__reactEvents$"+Bd,kz="__reactListeners$"+Bd,Pz="__reactHandles$"+Bd;function Ml(t){var e=t[Js];if(e)return e;for(var n=t.parentNode;n;){if(e=n[no]||n[Js]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=YP(t);t!==null;){if(n=t[Js])return n;t=YP(t)}return e}t=n,n=t.parentNode}return null}function $p(t){return t=t[Js]||t[no],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Eu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(we(33))}function Iv(t){return t[Hf]||null}var fw=[],Tu=-1;function cl(t){return{current:t}}function Jt(t){0>Tu||(t.current=fw[Tu],fw[Tu]=null,Tu--)}function Wt(t,e){Tu++,fw[Tu]=t.current,t.current=e}var el={},_r=cl(el),si=cl(!1),nc=el;function sd(t,e){var n=t.type.contextTypes;if(!n)return el;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ai(t){return t=t.childContextTypes,t!=null}function u0(){Jt(si),Jt(_r)}function JP(t,e,n){if(_r.current!==el)throw Error(we(168));Wt(_r,e),Wt(si,n)}function bM(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(we(108,hq(t)||"Unknown",i));return mn({},n,r)}function d0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||el,nc=_r.current,Wt(_r,t),Wt(si,si.current),!0}function XP(t,e,n){var r=t.stateNode;if(!r)throw Error(we(169));n?(t=bM(t,e,nc),r.__reactInternalMemoizedMergedChildContext=t,Jt(si),Jt(_r),Wt(_r,t)):Jt(si),Wt(si,n)}var qa=null,Mv=!1,L1=!1;function SM(t){qa===null?qa=[t]:qa.push(t)}function _z(t){Mv=!0,SM(t)}function ul(){if(!L1&&qa!==null){L1=!0;var t=0,e=Nt;try{var n=qa;for(Nt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qa=null,Mv=!1}catch(i){throw qa!==null&&(qa=qa.slice(t+1)),VI(z2,ul),i}finally{Nt=e,L1=!1}}return null}var Ru=[],ku=0,h0=null,f0=0,Vi=[],Wi=0,rc=null,Ha=1,Ua="";function Cl(t,e){Ru[ku++]=f0,Ru[ku++]=h0,h0=t,f0=e}function xM(t,e,n){Vi[Wi++]=Ha,Vi[Wi++]=Ua,Vi[Wi++]=rc,rc=t;var r=Ha;t=Ua;var i=32-Ps(r)-1;r&=~(1<<i),n+=1;var s=32-Ps(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ha=1<<32-Ps(e)+i|n<<i|r,Ua=s+t}else Ha=1<<s|n<<i|r,Ua=t}function X2(t){t.return!==null&&(Cl(t,1),xM(t,1,0))}function Q2(t){for(;t===h0;)h0=Ru[--ku],Ru[ku]=null,f0=Ru[--ku],Ru[ku]=null;for(;t===rc;)rc=Vi[--Wi],Vi[Wi]=null,Ua=Vi[--Wi],Vi[Wi]=null,Ha=Vi[--Wi],Vi[Wi]=null}var Oi=null,Ai=null,rn=!1,xs=null;function wM(t,e){var n=Ji(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function QP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Oi=t,Ai=$o(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Oi=t,Ai=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=rc!==null?{id:Ha,overflow:Ua}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ji(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Oi=t,Ai=null,!0):!1;default:return!1}}function pw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mw(t){if(rn){var e=Ai;if(e){var n=e;if(!QP(t,e)){if(pw(t))throw Error(we(418));e=$o(n.nextSibling);var r=Oi;e&&QP(t,e)?wM(r,n):(t.flags=t.flags&-4097|2,rn=!1,Oi=t)}}else{if(pw(t))throw Error(we(418));t.flags=t.flags&-4097|2,rn=!1,Oi=t}}}function ZP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Oi=t}function Am(t){if(t!==Oi)return!1;if(!rn)return ZP(t),rn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!uw(t.type,t.memoizedProps)),e&&(e=Ai)){if(pw(t))throw CM(),Error(we(418));for(;e;)wM(t,e),e=$o(e.nextSibling)}if(ZP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(we(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ai=$o(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ai=null}}else Ai=Oi?$o(t.stateNode.nextSibling):null;return!0}function CM(){for(var t=Ai;t;)t=$o(t.nextSibling)}function ad(){Ai=Oi=null,rn=!1}function Z2(t){xs===null?xs=[t]:xs.push(t)}var Az=oo.ReactCurrentBatchConfig;function ys(t,e){if(t&&t.defaultProps){e=mn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var p0=cl(null),m0=null,Pu=null,eE=null;function tE(){eE=Pu=m0=null}function nE(t){var e=p0.current;Jt(p0),t._currentValue=e}function gw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qu(t,e){m0=t,eE=Pu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ri=!0),t.firstContext=null)}function is(t){var e=t._currentValue;if(eE!==t)if(t={context:t,memoizedValue:e,next:null},Pu===null){if(m0===null)throw Error(we(308));Pu=t,m0.dependencies={lanes:0,firstContext:t}}else Pu=Pu.next=t;return e}var Nl=null;function rE(t){Nl===null?Nl=[t]:Nl.push(t)}function EM(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,rE(e)):(n.next=i.next,i.next=n),e.interleaved=n,ro(t,r)}function ro(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var So=!1;function iE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TM(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ja(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,St&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ro(t,n)}return i=r.interleaved,i===null?(e.next=e,rE(r)):(e.next=i.next,i.next=e),r.interleaved=e,ro(t,n)}function xg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,H2(t,n)}}function e4(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function g0(t,e,n,r){var i=t.updateQueue;So=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,u=c=l=null,o=s;do{var h=o.lane,p=o.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=t,m=o;switch(h=e,p=n,m.tag){case 1:if(f=m.payload,typeof f=="function"){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=m.payload,h=typeof f=="function"?f.call(p,d,h):f,h==null)break e;d=mn({},d,h);break e;case 2:So=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);sc|=a,t.lanes=a,t.memoizedState=d}}function t4(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(we(191,i));i.call(r)}}}var RM=new EI.Component().refs;function vw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:mn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Nv={isMounted:function(t){return(t=t._reactInternals)?Ic(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ur(),i=jo(t),s=Ja(r,i);s.payload=e,n!=null&&(s.callback=n),e=Lo(t,s,i),e!==null&&(_s(e,t,i,r),xg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ur(),i=jo(t),s=Ja(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Lo(t,s,i),e!==null&&(_s(e,t,i,r),xg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ur(),r=jo(t),i=Ja(n,r);i.tag=2,e!=null&&(i.callback=e),e=Lo(t,i,r),e!==null&&(_s(e,t,r,n),xg(e,t,r))}};function n4(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!jf(n,r)||!jf(i,s):!0}function kM(t,e,n){var r=!1,i=el,s=e.contextType;return typeof s=="object"&&s!==null?s=is(s):(i=ai(e)?nc:_r.current,r=e.contextTypes,s=(r=r!=null)?sd(t,i):el),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Nv,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function r4(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Nv.enqueueReplaceState(e,e.state,null)}function yw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=RM,iE(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=is(s):(s=ai(e)?nc:_r.current,i.context=sd(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(vw(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Nv.enqueueReplaceState(i,i.state,null),g0(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function yh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(we(309));var r=n.stateNode}if(!r)throw Error(we(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;o===RM&&(o=i.refs={}),a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(we(284));if(!n._owner)throw Error(we(290,t))}return t}function Om(t,e){throw t=Object.prototype.toString.call(e),Error(we(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function i4(t){var e=t._init;return e(t._payload)}function PM(t){function e(v,y){if(t){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=qo(v,y),v.index=0,v.sibling=null,v}function s(v,y,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,y,b,C){return y===null||y.tag!==6?(y=V1(b,v.mode,C),y.return=v,y):(y=i(y,b),y.return=v,y)}function l(v,y,b,C){var R=b.type;return R===Su?u(v,y,b.props.children,C,b.key):y!==null&&(y.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===bo&&i4(R)===y.type)?(C=i(y,b.props),C.ref=yh(v,y,b),C.return=v,C):(C=kg(b.type,b.key,b.props,null,v.mode,C),C.ref=yh(v,y,b),C.return=v,C)}function c(v,y,b,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=W1(b,v.mode,C),y.return=v,y):(y=i(y,b.children||[]),y.return=v,y)}function u(v,y,b,C,R){return y===null||y.tag!==7?(y=Wl(b,v.mode,C,R),y.return=v,y):(y=i(y,b),y.return=v,y)}function d(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=V1(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Sm:return b=kg(y.type,y.key,y.props,null,v.mode,b),b.ref=yh(v,null,y),b.return=v,b;case bu:return y=W1(y,v.mode,b),y.return=v,y;case bo:var C=y._init;return d(v,C(y._payload),b)}if(Yh(y)||fh(y))return y=Wl(y,v.mode,b,null),y.return=v,y;Om(v,y)}return null}function h(v,y,b,C){var R=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return R!==null?null:o(v,y,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Sm:return b.key===R?l(v,y,b,C):null;case bu:return b.key===R?c(v,y,b,C):null;case bo:return R=b._init,h(v,y,R(b._payload),C)}if(Yh(b)||fh(b))return R!==null?null:u(v,y,b,C,null);Om(v,b)}return null}function p(v,y,b,C,R){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(b)||null,o(y,v,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Sm:return v=v.get(C.key===null?b:C.key)||null,l(y,v,C,R);case bu:return v=v.get(C.key===null?b:C.key)||null,c(y,v,C,R);case bo:var w=C._init;return p(v,y,b,w(C._payload),R)}if(Yh(C)||fh(C))return v=v.get(b)||null,u(y,v,C,R,null);Om(y,C)}return null}function f(v,y,b,C){for(var R=null,w=null,E=y,k=y=0,T=null;E!==null&&k<b.length;k++){E.index>k?(T=E,E=null):T=E.sibling;var _=h(v,E,b[k],C);if(_===null){E===null&&(E=T);break}t&&E&&_.alternate===null&&e(v,E),y=s(_,y,k),w===null?R=_:w.sibling=_,w=_,E=T}if(k===b.length)return n(v,E),rn&&Cl(v,k),R;if(E===null){for(;k<b.length;k++)E=d(v,b[k],C),E!==null&&(y=s(E,y,k),w===null?R=E:w.sibling=E,w=E);return rn&&Cl(v,k),R}for(E=r(v,E);k<b.length;k++)T=p(E,v,k,b[k],C),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?k:T.key),y=s(T,y,k),w===null?R=T:w.sibling=T,w=T);return t&&E.forEach(function(D){return e(v,D)}),rn&&Cl(v,k),R}function m(v,y,b,C){var R=fh(b);if(typeof R!="function")throw Error(we(150));if(b=R.call(b),b==null)throw Error(we(151));for(var w=R=null,E=y,k=y=0,T=null,_=b.next();E!==null&&!_.done;k++,_=b.next()){E.index>k?(T=E,E=null):T=E.sibling;var D=h(v,E,_.value,C);if(D===null){E===null&&(E=T);break}t&&E&&D.alternate===null&&e(v,E),y=s(D,y,k),w===null?R=D:w.sibling=D,w=D,E=T}if(_.done)return n(v,E),rn&&Cl(v,k),R;if(E===null){for(;!_.done;k++,_=b.next())_=d(v,_.value,C),_!==null&&(y=s(_,y,k),w===null?R=_:w.sibling=_,w=_);return rn&&Cl(v,k),R}for(E=r(v,E);!_.done;k++,_=b.next())_=p(E,v,k,_.value,C),_!==null&&(t&&_.alternate!==null&&E.delete(_.key===null?k:_.key),y=s(_,y,k),w===null?R=_:w.sibling=_,w=_);return t&&E.forEach(function(I){return e(v,I)}),rn&&Cl(v,k),R}function g(v,y,b,C){if(typeof b=="object"&&b!==null&&b.type===Su&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Sm:e:{for(var R=b.key,w=y;w!==null;){if(w.key===R){if(R=b.type,R===Su){if(w.tag===7){n(v,w.sibling),y=i(w,b.props.children),y.return=v,v=y;break e}}else if(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===bo&&i4(R)===w.type){n(v,w.sibling),y=i(w,b.props),y.ref=yh(v,w,b),y.return=v,v=y;break e}n(v,w);break}else e(v,w);w=w.sibling}b.type===Su?(y=Wl(b.props.children,v.mode,C,b.key),y.return=v,v=y):(C=kg(b.type,b.key,b.props,null,v.mode,C),C.ref=yh(v,y,b),C.return=v,v=C)}return a(v);case bu:e:{for(w=b.key;y!==null;){if(y.key===w)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(v,y.sibling),y=i(y,b.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=W1(b,v.mode,C),y.return=v,v=y}return a(v);case bo:return w=b._init,g(v,y,w(b._payload),C)}if(Yh(b))return f(v,y,b,C);if(fh(b))return m(v,y,b,C);Om(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,b),y.return=v,v=y):(n(v,y),y=V1(b,v.mode,C),y.return=v,v=y),a(v)):n(v,y)}return g}var od=PM(!0),_M=PM(!1),Lp={},aa=cl(Lp),Uf=cl(Lp),Vf=cl(Lp);function Fl(t){if(t===Lp)throw Error(we(174));return t}function sE(t,e){switch(Wt(Vf,e),Wt(Uf,t),Wt(aa,Lp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Jx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Jx(e,t)}Jt(aa),Wt(aa,e)}function ld(){Jt(aa),Jt(Uf),Jt(Vf)}function AM(t){Fl(Vf.current);var e=Fl(aa.current),n=Jx(e,t.type);e!==n&&(Wt(Uf,t),Wt(aa,n))}function aE(t){Uf.current===t&&(Jt(aa),Jt(Uf))}var cn=cl(0);function v0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var B1=[];function oE(){for(var t=0;t<B1.length;t++)B1[t]._workInProgressVersionPrimary=null;B1.length=0}var wg=oo.ReactCurrentDispatcher,j1=oo.ReactCurrentBatchConfig,ic=0,pn=null,jn=null,Xn=null,y0=!1,lf=!1,Wf=0,Oz=0;function Sr(){throw Error(we(321))}function lE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ds(t[n],e[n]))return!1;return!0}function cE(t,e,n,r,i,s){if(ic=s,pn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wg.current=t===null||t.memoizedState===null?Nz:Fz,t=n(r,i),lf){s=0;do{if(lf=!1,Wf=0,25<=s)throw Error(we(301));s+=1,Xn=jn=null,e.updateQueue=null,wg.current=$z,t=n(r,i)}while(lf)}if(wg.current=b0,e=jn!==null&&jn.next!==null,ic=0,Xn=jn=pn=null,y0=!1,e)throw Error(we(300));return t}function uE(){var t=Wf!==0;return Wf=0,t}function Us(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xn===null?pn.memoizedState=Xn=t:Xn=Xn.next=t,Xn}function ss(){if(jn===null){var t=pn.alternate;t=t!==null?t.memoizedState:null}else t=jn.next;var e=Xn===null?pn.memoizedState:Xn.next;if(e!==null)Xn=e,jn=t;else{if(t===null)throw Error(we(310));jn=t,t={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},Xn===null?pn.memoizedState=Xn=t:Xn=Xn.next=t}return Xn}function Gf(t,e){return typeof e=="function"?e(t):e}function q1(t){var e=ss(),n=e.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=t;var r=jn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,c=s;do{var u=c.lane;if((ic&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=r):l=l.next=d,pn.lanes|=u,sc|=u}c=c.next}while(c!==null&&c!==s);l===null?a=r:l.next=o,Ds(r,e.memoizedState)||(ri=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,pn.lanes|=s,sc|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function z1(t){var e=ss(),n=e.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Ds(s,e.memoizedState)||(ri=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function OM(){}function DM(t,e){var n=pn,r=ss(),i=e(),s=!Ds(r.memoizedState,i);if(s&&(r.memoizedState=i,ri=!0),r=r.queue,dE(NM.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Xn!==null&&Xn.memoizedState.tag&1){if(n.flags|=2048,Kf(9,MM.bind(null,n,r,i,e),void 0,null),er===null)throw Error(we(349));ic&30||IM(n,e,i)}return i}function IM(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pn.updateQueue,e===null?(e={lastEffect:null,stores:null},pn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function MM(t,e,n,r){e.value=n,e.getSnapshot=r,FM(e)&&$M(t)}function NM(t,e,n){return n(function(){FM(e)&&$M(t)})}function FM(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ds(t,n)}catch{return!0}}function $M(t){var e=ro(t,1);e!==null&&_s(e,t,1,-1)}function s4(t){var e=Us();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gf,lastRenderedState:t},e.queue=t,t=t.dispatch=Mz.bind(null,pn,t),[e.memoizedState,t]}function Kf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=pn.updateQueue,e===null?(e={lastEffect:null,stores:null},pn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function LM(){return ss().memoizedState}function Cg(t,e,n,r){var i=Us();pn.flags|=t,i.memoizedState=Kf(1|e,n,void 0,r===void 0?null:r)}function Fv(t,e,n,r){var i=ss();r=r===void 0?null:r;var s=void 0;if(jn!==null){var a=jn.memoizedState;if(s=a.destroy,r!==null&&lE(r,a.deps)){i.memoizedState=Kf(e,n,s,r);return}}pn.flags|=t,i.memoizedState=Kf(1|e,n,s,r)}function a4(t,e){return Cg(8390656,8,t,e)}function dE(t,e){return Fv(2048,8,t,e)}function BM(t,e){return Fv(4,2,t,e)}function jM(t,e){return Fv(4,4,t,e)}function qM(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zM(t,e,n){return n=n!=null?n.concat([t]):null,Fv(4,4,qM.bind(null,e,t),n)}function hE(){}function HM(t,e){var n=ss();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function UM(t,e){var n=ss();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function VM(t,e,n){return ic&21?(Ds(n,e)||(n=KI(),pn.lanes|=n,sc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ri=!0),t.memoizedState=n)}function Dz(t,e){var n=Nt;Nt=n!==0&&4>n?n:4,t(!0);var r=j1.transition;j1.transition={};try{t(!1),e()}finally{Nt=n,j1.transition=r}}function WM(){return ss().memoizedState}function Iz(t,e,n){var r=jo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},GM(t))KM(e,n);else if(n=EM(t,e,n,r),n!==null){var i=Ur();_s(n,t,r,i),YM(n,e,r)}}function Mz(t,e,n){var r=jo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(GM(t))KM(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Ds(o,a)){var l=e.interleaved;l===null?(i.next=i,rE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=EM(t,e,i,r),n!==null&&(i=Ur(),_s(n,t,r,i),YM(n,e,r))}}function GM(t){var e=t.alternate;return t===pn||e!==null&&e===pn}function KM(t,e){lf=y0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function YM(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,H2(t,n)}}var b0={readContext:is,useCallback:Sr,useContext:Sr,useEffect:Sr,useImperativeHandle:Sr,useInsertionEffect:Sr,useLayoutEffect:Sr,useMemo:Sr,useReducer:Sr,useRef:Sr,useState:Sr,useDebugValue:Sr,useDeferredValue:Sr,useTransition:Sr,useMutableSource:Sr,useSyncExternalStore:Sr,useId:Sr,unstable_isNewReconciler:!1},Nz={readContext:is,useCallback:function(t,e){return Us().memoizedState=[t,e===void 0?null:e],t},useContext:is,useEffect:a4,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cg(4194308,4,qM.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cg(4,2,t,e)},useMemo:function(t,e){var n=Us();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Us();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Iz.bind(null,pn,t),[r.memoizedState,t]},useRef:function(t){var e=Us();return t={current:t},e.memoizedState=t},useState:s4,useDebugValue:hE,useDeferredValue:function(t){return Us().memoizedState=t},useTransition:function(){var t=s4(!1),e=t[0];return t=Dz.bind(null,t[1]),Us().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=pn,i=Us();if(rn){if(n===void 0)throw Error(we(407));n=n()}else{if(n=e(),er===null)throw Error(we(349));ic&30||IM(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,a4(NM.bind(null,r,s,t),[t]),r.flags|=2048,Kf(9,MM.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Us(),e=er.identifierPrefix;if(rn){var n=Ua,r=Ha;n=(r&~(1<<32-Ps(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Oz++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Fz={readContext:is,useCallback:HM,useContext:is,useEffect:dE,useImperativeHandle:zM,useInsertionEffect:BM,useLayoutEffect:jM,useMemo:UM,useReducer:q1,useRef:LM,useState:function(){return q1(Gf)},useDebugValue:hE,useDeferredValue:function(t){var e=ss();return VM(e,jn.memoizedState,t)},useTransition:function(){var t=q1(Gf)[0],e=ss().memoizedState;return[t,e]},useMutableSource:OM,useSyncExternalStore:DM,useId:WM,unstable_isNewReconciler:!1},$z={readContext:is,useCallback:HM,useContext:is,useEffect:dE,useImperativeHandle:zM,useInsertionEffect:BM,useLayoutEffect:jM,useMemo:UM,useReducer:z1,useRef:LM,useState:function(){return z1(Gf)},useDebugValue:hE,useDeferredValue:function(t){var e=ss();return jn===null?e.memoizedState=t:VM(e,jn.memoizedState,t)},useTransition:function(){var t=z1(Gf)[0],e=ss().memoizedState;return[t,e]},useMutableSource:OM,useSyncExternalStore:DM,useId:WM,unstable_isNewReconciler:!1};function cd(t,e){try{var n="",r=e;do n+=dq(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function H1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Lz=typeof WeakMap=="function"?WeakMap:Map;function JM(t,e,n){n=Ja(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){x0||(x0=!0,_w=r),bw(t,e)},n}function XM(t,e,n){n=Ja(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){bw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){bw(t,e),typeof r!="function"&&(Bo===null?Bo=new Set([this]):Bo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function o4(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Lz;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Qz.bind(null,t,e,n),e.then(t,t))}function l4(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function c4(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ja(-1,1),e.tag=2,Lo(n,e,1))),n.lanes|=1),t)}var Bz=oo.ReactCurrentOwner,ri=!1;function Nr(t,e,n,r){e.child=t===null?_M(e,null,n,r):od(e,t.child,n,r)}function u4(t,e,n,r,i){n=n.render;var s=e.ref;return qu(e,i),r=cE(t,e,n,r,s,i),n=uE(),t!==null&&!ri?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,io(t,e,i)):(rn&&n&&X2(e),e.flags|=1,Nr(t,e,r,i),e.child)}function d4(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!SE(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,QM(t,e,s,r,i)):(t=kg(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:jf,n(a,r)&&t.ref===e.ref)return io(t,e,i)}return e.flags|=1,t=qo(s,r),t.ref=e.ref,t.return=e,e.child=t}function QM(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(jf(s,r)&&t.ref===e.ref)if(ri=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ri=!0);else return e.lanes=t.lanes,io(t,e,i)}return Sw(t,e,n,r,i)}function ZM(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wt(Au,Ci),Ci|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Wt(Au,Ci),Ci|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Wt(Au,Ci),Ci|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Wt(Au,Ci),Ci|=r;return Nr(t,e,i,n),e.child}function e6(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sw(t,e,n,r,i){var s=ai(n)?nc:_r.current;return s=sd(e,s),qu(e,i),n=cE(t,e,n,r,s,i),r=uE(),t!==null&&!ri?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,io(t,e,i)):(rn&&r&&X2(e),e.flags|=1,Nr(t,e,n,i),e.child)}function h4(t,e,n,r,i){if(ai(n)){var s=!0;d0(e)}else s=!1;if(qu(e,i),e.stateNode===null)Eg(t,e),kM(e,n,r),yw(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=is(c):(c=ai(n)?nc:_r.current,c=sd(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&r4(e,a,r,c),So=!1;var h=e.memoizedState;a.state=h,g0(e,r,a,i),l=e.memoizedState,o!==r||h!==l||si.current||So?(typeof u=="function"&&(vw(e,n,u,r),l=e.memoizedState),(o=So||n4(e,n,o,r,h,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,TM(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:ys(e.type,o),a.props=c,d=e.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=is(l):(l=ai(n)?nc:_r.current,l=sd(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||h!==l)&&r4(e,a,r,l),So=!1,h=e.memoizedState,a.state=h,g0(e,r,a,i);var f=e.memoizedState;o!==d||h!==f||si.current||So?(typeof p=="function"&&(vw(e,n,p,r),f=e.memoizedState),(c=So||n4(e,n,c,r,h,f,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,f,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,f,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return xw(t,e,n,r,s,i)}function xw(t,e,n,r,i,s){e6(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&XP(e,n,!1),io(t,e,s);r=e.stateNode,Bz.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=od(e,t.child,null,s),e.child=od(e,null,o,s)):Nr(t,e,o,s),e.memoizedState=r.state,i&&XP(e,n,!0),e.child}function t6(t){var e=t.stateNode;e.pendingContext?JP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&JP(t,e.context,!1),sE(t,e.containerInfo)}function f4(t,e,n,r,i){return ad(),Z2(i),e.flags|=256,Nr(t,e,n,r),e.child}var ww={dehydrated:null,treeContext:null,retryLane:0};function Cw(t){return{baseLanes:t,cachePool:null,transitions:null}}function n6(t,e,n){var r=e.pendingProps,i=cn.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Wt(cn,i&1),t===null)return mw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Bv(a,r,0,null),t=Wl(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Cw(n),e.memoizedState=ww,t):fE(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return jz(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=qo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=qo(o,s):(s=Wl(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?Cw(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=ww,r}return s=t.child,t=s.sibling,r=qo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fE(t,e){return e=Bv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dm(t,e,n,r){return r!==null&&Z2(r),od(e,t.child,null,n),t=fE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jz(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=H1(Error(we(422))),Dm(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Bv({mode:"visible",children:r.children},i,0,null),s=Wl(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&od(e,t.child,null,a),e.child.memoizedState=Cw(a),e.memoizedState=ww,s);if(!(e.mode&1))return Dm(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(we(419)),r=H1(s,r,void 0),Dm(t,e,a,r)}if(o=(a&t.childLanes)!==0,ri||o){if(r=er,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ro(t,i),_s(r,t,i,-1))}return bE(),r=H1(Error(we(421))),Dm(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Zz.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ai=$o(i.nextSibling),Oi=e,rn=!0,xs=null,t!==null&&(Vi[Wi++]=Ha,Vi[Wi++]=Ua,Vi[Wi++]=rc,Ha=t.id,Ua=t.overflow,rc=e),e=fE(e,r.children),e.flags|=4096,e)}function p4(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gw(t.return,e,n)}function U1(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function r6(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Nr(t,e,r.children,n),r=cn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&p4(t,n,e);else if(t.tag===19)p4(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Wt(cn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&v0(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),U1(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&v0(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}U1(e,!0,n,null,s);break;case"together":U1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Eg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function io(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),sc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(we(153));if(e.child!==null){for(t=e.child,n=qo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qz(t,e,n){switch(e.tag){case 3:t6(e),ad();break;case 5:AM(e);break;case 1:ai(e.type)&&d0(e);break;case 4:sE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Wt(p0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Wt(cn,cn.current&1),e.flags|=128,null):n&e.child.childLanes?n6(t,e,n):(Wt(cn,cn.current&1),t=io(t,e,n),t!==null?t.sibling:null);Wt(cn,cn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return r6(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Wt(cn,cn.current),r)break;return null;case 22:case 23:return e.lanes=0,ZM(t,e,n)}return io(t,e,n)}var i6,Ew,s6,a6;i6=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ew=function(){};s6=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fl(aa.current);var s=null;switch(n){case"input":i=Wx(t,i),r=Wx(t,r),s=[];break;case"select":i=mn({},i,{value:void 0}),r=mn({},r,{value:void 0}),s=[];break;case"textarea":i=Yx(t,i),r=Yx(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=c0)}Xx(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(If.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(o=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(If.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Kt("scroll",t),s||o===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};a6=function(t,e,n,r){n!==r&&(e.flags|=4)};function bh(t,e){if(!rn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function zz(t,e,n){var r=e.pendingProps;switch(Q2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xr(e),null;case 1:return ai(e.type)&&u0(),xr(e),null;case 3:return r=e.stateNode,ld(),Jt(si),Jt(_r),oE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Am(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xs!==null&&(Dw(xs),xs=null))),Ew(t,e),xr(e),null;case 5:aE(e);var i=Fl(Vf.current);if(n=e.type,t!==null&&e.stateNode!=null)s6(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(we(166));return xr(e),null}if(t=Fl(aa.current),Am(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Js]=e,r[Hf]=s,t=(e.mode&1)!==0,n){case"dialog":Kt("cancel",r),Kt("close",r);break;case"iframe":case"object":case"embed":Kt("load",r);break;case"video":case"audio":for(i=0;i<Xh.length;i++)Kt(Xh[i],r);break;case"source":Kt("error",r);break;case"img":case"image":case"link":Kt("error",r),Kt("load",r);break;case"details":Kt("toggle",r);break;case"input":CP(r,s),Kt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Kt("invalid",r);break;case"textarea":TP(r,s),Kt("invalid",r)}Xx(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&_m(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&_m(r.textContent,o,t),i=["children",""+o]):If.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Kt("scroll",r)}switch(n){case"input":xm(r),EP(r,s,!0);break;case"textarea":xm(r),RP(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=c0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=II(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Js]=e,t[Hf]=r,i6(t,e,!1,!1),e.stateNode=t;e:{switch(a=Qx(n,r),n){case"dialog":Kt("cancel",t),Kt("close",t),i=r;break;case"iframe":case"object":case"embed":Kt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Xh.length;i++)Kt(Xh[i],t);i=r;break;case"source":Kt("error",t),i=r;break;case"img":case"image":case"link":Kt("error",t),Kt("load",t),i=r;break;case"details":Kt("toggle",t),i=r;break;case"input":CP(t,r),i=Wx(t,r),Kt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=mn({},r,{value:void 0}),Kt("invalid",t);break;case"textarea":TP(t,r),i=Yx(t,r),Kt("invalid",t);break;default:i=r}Xx(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?FI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&MI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Mf(t,l):typeof l=="number"&&Mf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(If.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Kt("scroll",t):l!=null&&$2(t,s,l,a))}switch(n){case"input":xm(t),EP(t,r,!1);break;case"textarea":xm(t),RP(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?$u(t,!!r.multiple,s,!1):r.defaultValue!=null&&$u(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=c0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xr(e),null;case 6:if(t&&e.stateNode!=null)a6(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(we(166));if(n=Fl(Vf.current),Fl(aa.current),Am(e)){if(r=e.stateNode,n=e.memoizedProps,r[Js]=e,(s=r.nodeValue!==n)&&(t=Oi,t!==null))switch(t.tag){case 3:_m(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_m(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Js]=e,e.stateNode=r}return xr(e),null;case 13:if(Jt(cn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rn&&Ai!==null&&e.mode&1&&!(e.flags&128))CM(),ad(),e.flags|=98560,s=!1;else if(s=Am(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(we(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(we(317));s[Js]=e}else ad(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xr(e),s=!1}else xs!==null&&(Dw(xs),xs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||cn.current&1?Hn===0&&(Hn=3):bE())),e.updateQueue!==null&&(e.flags|=4),xr(e),null);case 4:return ld(),Ew(t,e),t===null&&qf(e.stateNode.containerInfo),xr(e),null;case 10:return nE(e.type._context),xr(e),null;case 17:return ai(e.type)&&u0(),xr(e),null;case 19:if(Jt(cn),s=e.memoizedState,s===null)return xr(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)bh(s,!1);else{if(Hn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=v0(t),a!==null){for(e.flags|=128,bh(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Wt(cn,cn.current&1|2),e.child}t=t.sibling}s.tail!==null&&kn()>ud&&(e.flags|=128,r=!0,bh(s,!1),e.lanes=4194304)}else{if(!r)if(t=v0(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!rn)return xr(e),null}else 2*kn()-s.renderingStartTime>ud&&n!==1073741824&&(e.flags|=128,r=!0,bh(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=kn(),e.sibling=null,n=cn.current,Wt(cn,r?n&1|2:n&1),e):(xr(e),null);case 22:case 23:return yE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ci&1073741824&&(xr(e),e.subtreeFlags&6&&(e.flags|=8192)):xr(e),null;case 24:return null;case 25:return null}throw Error(we(156,e.tag))}function Hz(t,e){switch(Q2(e),e.tag){case 1:return ai(e.type)&&u0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ld(),Jt(si),Jt(_r),oE(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return aE(e),null;case 13:if(Jt(cn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(we(340));ad()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Jt(cn),null;case 4:return ld(),null;case 10:return nE(e.type._context),null;case 22:case 23:return yE(),null;case 24:return null;default:return null}}var Im=!1,kr=!1,Uz=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function _u(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Sn(t,e,r)}else n.current=null}function Tw(t,e,n){try{n()}catch(r){Sn(t,e,r)}}var m4=!1;function Vz(t,e){if(lw=a0,t=uM(),J2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(o=a+i),d!==s||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===t)break t;if(h===n&&++c===i&&(o=a),h===s&&++u===r&&(l=a),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(cw={focusedElem:t,selectionRange:n},a0=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var f=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var m=f.memoizedProps,g=f.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:ys(e.type,m),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(C){Sn(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return f=m4,m4=!1,f}function cf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Tw(e,n,s)}i=i.next}while(i!==r)}}function $v(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Rw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function o6(t){var e=t.alternate;e!==null&&(t.alternate=null,o6(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Js],delete e[Hf],delete e[hw],delete e[kz],delete e[Pz])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function l6(t){return t.tag===5||t.tag===3||t.tag===4}function g4(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||l6(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=c0));else if(r!==4&&(t=t.child,t!==null))for(kw(t,e,n),t=t.sibling;t!==null;)kw(t,e,n),t=t.sibling}function Pw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Pw(t,e,n),t=t.sibling;t!==null;)Pw(t,e,n),t=t.sibling}var hr=null,bs=!1;function po(t,e,n){for(n=n.child;n!==null;)c6(t,e,n),n=n.sibling}function c6(t,e,n){if(sa&&typeof sa.onCommitFiberUnmount=="function")try{sa.onCommitFiberUnmount(_v,n)}catch{}switch(n.tag){case 5:kr||_u(n,e);case 6:var r=hr,i=bs;hr=null,po(t,e,n),hr=r,bs=i,hr!==null&&(bs?(t=hr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):hr.removeChild(n.stateNode));break;case 18:hr!==null&&(bs?(t=hr,n=n.stateNode,t.nodeType===8?$1(t.parentNode,n):t.nodeType===1&&$1(t,n),Lf(t)):$1(hr,n.stateNode));break;case 4:r=hr,i=bs,hr=n.stateNode.containerInfo,bs=!0,po(t,e,n),hr=r,bs=i;break;case 0:case 11:case 14:case 15:if(!kr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Tw(n,e,a),i=i.next}while(i!==r)}po(t,e,n);break;case 1:if(!kr&&(_u(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Sn(n,e,o)}po(t,e,n);break;case 21:po(t,e,n);break;case 22:n.mode&1?(kr=(r=kr)||n.memoizedState!==null,po(t,e,n),kr=r):po(t,e,n);break;default:po(t,e,n)}}function v4(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Uz),e.forEach(function(r){var i=eH.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function gs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:hr=o.stateNode,bs=!1;break e;case 3:hr=o.stateNode.containerInfo,bs=!0;break e;case 4:hr=o.stateNode.containerInfo,bs=!0;break e}o=o.return}if(hr===null)throw Error(we(160));c6(s,a,i),hr=null,bs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Sn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)u6(e,t),e=e.sibling}function u6(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gs(e,t),js(t),r&4){try{cf(3,t,t.return),$v(3,t)}catch(m){Sn(t,t.return,m)}try{cf(5,t,t.return)}catch(m){Sn(t,t.return,m)}}break;case 1:gs(e,t),js(t),r&512&&n!==null&&_u(n,n.return);break;case 5:if(gs(e,t),js(t),r&512&&n!==null&&_u(n,n.return),t.flags&32){var i=t.stateNode;try{Mf(i,"")}catch(m){Sn(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&OI(i,s),Qx(o,a);var c=Qx(o,s);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];u==="style"?FI(i,d):u==="dangerouslySetInnerHTML"?MI(i,d):u==="children"?Mf(i,d):$2(i,u,d,c)}switch(o){case"input":Gx(i,s);break;case"textarea":DI(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?$u(i,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?$u(i,!!s.multiple,s.defaultValue,!0):$u(i,!!s.multiple,s.multiple?[]:"",!1))}i[Hf]=s}catch(m){Sn(t,t.return,m)}}break;case 6:if(gs(e,t),js(t),r&4){if(t.stateNode===null)throw Error(we(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Sn(t,t.return,m)}}break;case 3:if(gs(e,t),js(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lf(e.containerInfo)}catch(m){Sn(t,t.return,m)}break;case 4:gs(e,t),js(t);break;case 13:gs(e,t),js(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(gE=kn())),r&4&&v4(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(kr=(c=kr)||u,gs(e,t),kr=c):gs(e,t),js(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ie=t,u=t.child;u!==null;){for(d=Ie=u;Ie!==null;){switch(h=Ie,p=h.child,h.tag){case 0:case 11:case 14:case 15:cf(4,h,h.return);break;case 1:_u(h,h.return);var f=h.stateNode;if(typeof f.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,f.props=e.memoizedProps,f.state=e.memoizedState,f.componentWillUnmount()}catch(m){Sn(r,n,m)}}break;case 5:_u(h,h.return);break;case 22:if(h.memoizedState!==null){b4(d);continue}}p!==null?(p.return=h,Ie=p):b4(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=NI("display",a))}catch(m){Sn(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Sn(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gs(e,t),js(t),r&4&&v4(t);break;case 21:break;default:gs(e,t),js(t)}}function js(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(l6(n)){var r=n;break e}n=n.return}throw Error(we(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Mf(i,""),r.flags&=-33);var s=g4(t);Pw(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=g4(t);kw(t,o,a);break;default:throw Error(we(161))}}catch(l){Sn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Wz(t,e,n){Ie=t,d6(t)}function d6(t,e,n){for(var r=(t.mode&1)!==0;Ie!==null;){var i=Ie,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Im;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||kr;o=Im;var c=kr;if(Im=a,(kr=l)&&!c)for(Ie=i;Ie!==null;)a=Ie,l=a.child,a.tag===22&&a.memoizedState!==null?S4(i):l!==null?(l.return=a,Ie=l):S4(i);for(;s!==null;)Ie=s,d6(s),s=s.sibling;Ie=i,Im=o,kr=c}y4(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ie=s):y4(t)}}function y4(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kr||$v(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!kr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ys(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&t4(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}t4(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Lf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}kr||e.flags&512&&Rw(e)}catch(h){Sn(e,e.return,h)}}if(e===t){Ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function b4(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function S4(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$v(4,e)}catch(l){Sn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Sn(e,i,l)}}var s=e.return;try{Rw(e)}catch(l){Sn(e,s,l)}break;case 5:var a=e.return;try{Rw(e)}catch(l){Sn(e,a,l)}}}catch(l){Sn(e,e.return,l)}if(e===t){Ie=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Ie=o;break}Ie=e.return}}var Gz=Math.ceil,S0=oo.ReactCurrentDispatcher,pE=oo.ReactCurrentOwner,Zi=oo.ReactCurrentBatchConfig,St=0,er=null,Nn=null,vr=0,Ci=0,Au=cl(0),Hn=0,Yf=null,sc=0,Lv=0,mE=0,uf=null,ni=null,gE=0,ud=1/0,Na=null,x0=!1,_w=null,Bo=null,Mm=!1,Eo=null,w0=0,df=0,Aw=null,Tg=-1,Rg=0;function Ur(){return St&6?kn():Tg!==-1?Tg:Tg=kn()}function jo(t){return t.mode&1?St&2&&vr!==0?vr&-vr:Az.transition!==null?(Rg===0&&(Rg=KI()),Rg):(t=Nt,t!==0||(t=window.event,t=t===void 0?16:tM(t.type)),t):1}function _s(t,e,n,r){if(50<df)throw df=0,Aw=null,Error(we(185));Np(t,n,r),(!(St&2)||t!==er)&&(t===er&&(!(St&2)&&(Lv|=n),Hn===4&&wo(t,vr)),oi(t,r),n===1&&St===0&&!(e.mode&1)&&(ud=kn()+500,Mv&&ul()))}function oi(t,e){var n=t.callbackNode;Aq(t,e);var r=s0(t,t===er?vr:0);if(r===0)n!==null&&_P(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&_P(n),e===1)t.tag===0?_z(x4.bind(null,t)):SM(x4.bind(null,t)),Tz(function(){!(St&6)&&ul()}),n=null;else{switch(YI(r)){case 1:n=z2;break;case 4:n=WI;break;case 16:n=i0;break;case 536870912:n=GI;break;default:n=i0}n=b6(n,h6.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function h6(t,e){if(Tg=-1,Rg=0,St&6)throw Error(we(327));var n=t.callbackNode;if(zu()&&t.callbackNode!==n)return null;var r=s0(t,t===er?vr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=C0(t,r);else{e=r;var i=St;St|=2;var s=p6();(er!==t||vr!==e)&&(Na=null,ud=kn()+500,Vl(t,e));do try{Jz();break}catch(o){f6(t,o)}while(1);tE(),S0.current=s,St=i,Nn!==null?e=0:(er=null,vr=0,e=Hn)}if(e!==0){if(e===2&&(i=rw(t),i!==0&&(r=i,e=Ow(t,i))),e===1)throw n=Yf,Vl(t,0),wo(t,r),oi(t,kn()),n;if(e===6)wo(t,r);else{if(i=t.current.alternate,!(r&30)&&!Kz(i)&&(e=C0(t,r),e===2&&(s=rw(t),s!==0&&(r=s,e=Ow(t,s))),e===1))throw n=Yf,Vl(t,0),wo(t,r),oi(t,kn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(we(345));case 2:El(t,ni,Na);break;case 3:if(wo(t,r),(r&130023424)===r&&(e=gE+500-kn(),10<e)){if(s0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ur(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=dw(El.bind(null,t,ni,Na),e);break}El(t,ni,Na);break;case 4:if(wo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Ps(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=kn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Gz(r/1960))-r,10<r){t.timeoutHandle=dw(El.bind(null,t,ni,Na),r);break}El(t,ni,Na);break;case 5:El(t,ni,Na);break;default:throw Error(we(329))}}}return oi(t,kn()),t.callbackNode===n?h6.bind(null,t):null}function Ow(t,e){var n=uf;return t.current.memoizedState.isDehydrated&&(Vl(t,e).flags|=256),t=C0(t,e),t!==2&&(e=ni,ni=n,e!==null&&Dw(e)),t}function Dw(t){ni===null?ni=t:ni.push.apply(ni,t)}function Kz(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ds(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wo(t,e){for(e&=~mE,e&=~Lv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ps(e),r=1<<n;t[n]=-1,e&=~r}}function x4(t){if(St&6)throw Error(we(327));zu();var e=s0(t,0);if(!(e&1))return oi(t,kn()),null;var n=C0(t,e);if(t.tag!==0&&n===2){var r=rw(t);r!==0&&(e=r,n=Ow(t,r))}if(n===1)throw n=Yf,Vl(t,0),wo(t,e),oi(t,kn()),n;if(n===6)throw Error(we(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,El(t,ni,Na),oi(t,kn()),null}function vE(t,e){var n=St;St|=1;try{return t(e)}finally{St=n,St===0&&(ud=kn()+500,Mv&&ul())}}function ac(t){Eo!==null&&Eo.tag===0&&!(St&6)&&zu();var e=St;St|=1;var n=Zi.transition,r=Nt;try{if(Zi.transition=null,Nt=1,t)return t()}finally{Nt=r,Zi.transition=n,St=e,!(St&6)&&ul()}}function yE(){Ci=Au.current,Jt(Au)}function Vl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ez(n)),Nn!==null)for(n=Nn.return;n!==null;){var r=n;switch(Q2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&u0();break;case 3:ld(),Jt(si),Jt(_r),oE();break;case 5:aE(r);break;case 4:ld();break;case 13:Jt(cn);break;case 19:Jt(cn);break;case 10:nE(r.type._context);break;case 22:case 23:yE()}n=n.return}if(er=t,Nn=t=qo(t.current,null),vr=Ci=e,Hn=0,Yf=null,mE=Lv=sc=0,ni=uf=null,Nl!==null){for(e=0;e<Nl.length;e++)if(n=Nl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Nl=null}return t}function f6(t,e){do{var n=Nn;try{if(tE(),wg.current=b0,y0){for(var r=pn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}y0=!1}if(ic=0,Xn=jn=pn=null,lf=!1,Wf=0,pE.current=null,n===null||n.return===null){Hn=1,Yf=e,Nn=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=vr,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=l4(a);if(p!==null){p.flags&=-257,c4(p,a,o,s,e),p.mode&1&&o4(s,c,e),e=p,l=c;var f=e.updateQueue;if(f===null){var m=new Set;m.add(l),e.updateQueue=m}else f.add(l);break e}else{if(!(e&1)){o4(s,c,e),bE();break e}l=Error(we(426))}}else if(rn&&o.mode&1){var g=l4(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),c4(g,a,o,s,e),Z2(cd(l,o));break e}}s=l=cd(l,o),Hn!==4&&(Hn=2),uf===null?uf=[s]:uf.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=JM(s,l,e);e4(s,v);break e;case 1:o=l;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Bo===null||!Bo.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=XM(s,o,e);e4(s,C);break e}}s=s.return}while(s!==null)}g6(n)}catch(R){e=R,Nn===n&&n!==null&&(Nn=n=n.return);continue}break}while(1)}function p6(){var t=S0.current;return S0.current=b0,t===null?b0:t}function bE(){(Hn===0||Hn===3||Hn===2)&&(Hn=4),er===null||!(sc&268435455)&&!(Lv&268435455)||wo(er,vr)}function C0(t,e){var n=St;St|=2;var r=p6();(er!==t||vr!==e)&&(Na=null,Vl(t,e));do try{Yz();break}catch(i){f6(t,i)}while(1);if(tE(),St=n,S0.current=r,Nn!==null)throw Error(we(261));return er=null,vr=0,Hn}function Yz(){for(;Nn!==null;)m6(Nn)}function Jz(){for(;Nn!==null&&!xq();)m6(Nn)}function m6(t){var e=y6(t.alternate,t,Ci);t.memoizedProps=t.pendingProps,e===null?g6(t):Nn=e,pE.current=null}function g6(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Hz(n,e),n!==null){n.flags&=32767,Nn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Hn=6,Nn=null;return}}else if(n=zz(n,e,Ci),n!==null){Nn=n;return}if(e=e.sibling,e!==null){Nn=e;return}Nn=e=t}while(e!==null);Hn===0&&(Hn=5)}function El(t,e,n){var r=Nt,i=Zi.transition;try{Zi.transition=null,Nt=1,Xz(t,e,n,r)}finally{Zi.transition=i,Nt=r}return null}function Xz(t,e,n,r){do zu();while(Eo!==null);if(St&6)throw Error(we(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(we(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Oq(t,s),t===er&&(Nn=er=null,vr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Mm||(Mm=!0,b6(i0,function(){return zu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zi.transition,Zi.transition=null;var a=Nt;Nt=1;var o=St;St|=4,pE.current=null,Vz(t,n),u6(n,t),vz(cw),a0=!!lw,cw=lw=null,t.current=n,Wz(n),wq(),St=o,Nt=a,Zi.transition=s}else t.current=n;if(Mm&&(Mm=!1,Eo=t,w0=i),s=t.pendingLanes,s===0&&(Bo=null),Tq(n.stateNode),oi(t,kn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(x0)throw x0=!1,t=_w,_w=null,t;return w0&1&&t.tag!==0&&zu(),s=t.pendingLanes,s&1?t===Aw?df++:(df=0,Aw=t):df=0,ul(),null}function zu(){if(Eo!==null){var t=YI(w0),e=Zi.transition,n=Nt;try{if(Zi.transition=null,Nt=16>t?16:t,Eo===null)var r=!1;else{if(t=Eo,Eo=null,w0=0,St&6)throw Error(we(331));var i=St;for(St|=4,Ie=t.current;Ie!==null;){var s=Ie,a=s.child;if(Ie.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(Ie=c;Ie!==null;){var u=Ie;switch(u.tag){case 0:case 11:case 15:cf(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ie=d;else for(;Ie!==null;){u=Ie;var h=u.sibling,p=u.return;if(o6(u),u===c){Ie=null;break}if(h!==null){h.return=p,Ie=h;break}Ie=p}}}var f=s.alternate;if(f!==null){var m=f.child;if(m!==null){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Ie=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Ie=a;else e:for(;Ie!==null;){if(s=Ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:cf(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Ie=v;break e}Ie=s.return}}var y=t.current;for(Ie=y;Ie!==null;){a=Ie;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,Ie=b;else e:for(a=y;Ie!==null;){if(o=Ie,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:$v(9,o)}}catch(R){Sn(o,o.return,R)}if(o===a){Ie=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,Ie=C;break e}Ie=o.return}}if(St=i,ul(),sa&&typeof sa.onPostCommitFiberRoot=="function")try{sa.onPostCommitFiberRoot(_v,t)}catch{}r=!0}return r}finally{Nt=n,Zi.transition=e}}return!1}function w4(t,e,n){e=cd(n,e),e=JM(t,e,1),t=Lo(t,e,1),e=Ur(),t!==null&&(Np(t,1,e),oi(t,e))}function Sn(t,e,n){if(t.tag===3)w4(t,t,n);else for(;e!==null;){if(e.tag===3){w4(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bo===null||!Bo.has(r))){t=cd(n,t),t=XM(e,t,1),e=Lo(e,t,1),t=Ur(),e!==null&&(Np(e,1,t),oi(e,t));break}}e=e.return}}function Qz(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ur(),t.pingedLanes|=t.suspendedLanes&n,er===t&&(vr&n)===n&&(Hn===4||Hn===3&&(vr&130023424)===vr&&500>kn()-gE?Vl(t,0):mE|=n),oi(t,e)}function v6(t,e){e===0&&(t.mode&1?(e=Em,Em<<=1,!(Em&130023424)&&(Em=4194304)):e=1);var n=Ur();t=ro(t,e),t!==null&&(Np(t,e,n),oi(t,n))}function Zz(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),v6(t,n)}function eH(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(we(314))}r!==null&&r.delete(e),v6(t,n)}var y6;y6=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||si.current)ri=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ri=!1,qz(t,e,n);ri=!!(t.flags&131072)}else ri=!1,rn&&e.flags&1048576&&xM(e,f0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Eg(t,e),t=e.pendingProps;var i=sd(e,_r.current);qu(e,n),i=cE(null,e,r,t,i,n);var s=uE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ai(r)?(s=!0,d0(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,iE(e),i.updater=Nv,e.stateNode=i,i._reactInternals=e,yw(e,r,t,n),e=xw(null,e,r,!0,s,n)):(e.tag=0,rn&&s&&X2(e),Nr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Eg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=nH(r),t=ys(r,t),i){case 0:e=Sw(null,e,r,t,n);break e;case 1:e=h4(null,e,r,t,n);break e;case 11:e=u4(null,e,r,t,n);break e;case 14:e=d4(null,e,r,ys(r.type,t),n);break e}throw Error(we(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ys(r,i),Sw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ys(r,i),h4(t,e,r,i,n);case 3:e:{if(t6(e),t===null)throw Error(we(387));r=e.pendingProps,s=e.memoizedState,i=s.element,TM(t,e),g0(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=cd(Error(we(423)),e),e=f4(t,e,r,n,i);break e}else if(r!==i){i=cd(Error(we(424)),e),e=f4(t,e,r,n,i);break e}else for(Ai=$o(e.stateNode.containerInfo.firstChild),Oi=e,rn=!0,xs=null,n=_M(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ad(),r===i){e=io(t,e,n);break e}Nr(t,e,r,n)}e=e.child}return e;case 5:return AM(e),t===null&&mw(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,uw(r,i)?a=null:s!==null&&uw(r,s)&&(e.flags|=32),e6(t,e),Nr(t,e,a,n),e.child;case 6:return t===null&&mw(e),null;case 13:return n6(t,e,n);case 4:return sE(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=od(e,null,r,n):Nr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ys(r,i),u4(t,e,r,i,n);case 7:return Nr(t,e,e.pendingProps,n),e.child;case 8:return Nr(t,e,e.pendingProps.children,n),e.child;case 12:return Nr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Wt(p0,r._currentValue),r._currentValue=a,s!==null)if(Ds(s.value,a)){if(s.children===i.children&&!si.current){e=io(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ja(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),gw(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(we(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),gw(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Nr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,qu(e,n),i=is(i),r=r(i),e.flags|=1,Nr(t,e,r,n),e.child;case 14:return r=e.type,i=ys(r,e.pendingProps),i=ys(r.type,i),d4(t,e,r,i,n);case 15:return QM(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ys(r,i),Eg(t,e),e.tag=1,ai(r)?(t=!0,d0(e)):t=!1,qu(e,n),kM(e,r,i),yw(e,r,i,n),xw(null,e,r,!0,t,n);case 19:return r6(t,e,n);case 22:return ZM(t,e,n)}throw Error(we(156,e.tag))};function b6(t,e){return VI(t,e)}function tH(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(t,e,n,r){return new tH(t,e,n,r)}function SE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nH(t){if(typeof t=="function")return SE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===B2)return 11;if(t===j2)return 14}return 2}function qo(t,e){var n=t.alternate;return n===null?(n=Ji(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function kg(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")SE(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Su:return Wl(n.children,i,s,e);case L2:a=8,i|=8;break;case zx:return t=Ji(12,n,e,i|2),t.elementType=zx,t.lanes=s,t;case Hx:return t=Ji(13,n,e,i),t.elementType=Hx,t.lanes=s,t;case Ux:return t=Ji(19,n,e,i),t.elementType=Ux,t.lanes=s,t;case PI:return Bv(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case RI:a=10;break e;case kI:a=9;break e;case B2:a=11;break e;case j2:a=14;break e;case bo:a=16,r=null;break e}throw Error(we(130,t==null?t:typeof t,""))}return e=Ji(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Wl(t,e,n,r){return t=Ji(7,t,r,e),t.lanes=n,t}function Bv(t,e,n,r){return t=Ji(22,t,r,e),t.elementType=PI,t.lanes=n,t.stateNode={isHidden:!1},t}function V1(t,e,n){return t=Ji(6,t,null,e),t.lanes=n,t}function W1(t,e,n){return e=Ji(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function rH(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=R1(0),this.expirationTimes=R1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=R1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xE(t,e,n,r,i,s,a,o,l){return t=new rH(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ji(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},iE(s),t}function iH(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function S6(t){if(!t)return el;t=t._reactInternals;e:{if(Ic(t)!==t||t.tag!==1)throw Error(we(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ai(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(we(171))}if(t.tag===1){var n=t.type;if(ai(n))return bM(t,n,e)}return e}function x6(t,e,n,r,i,s,a,o,l){return t=xE(n,r,!0,t,i,s,a,o,l),t.context=S6(null),n=t.current,r=Ur(),i=jo(n),s=Ja(r,i),s.callback=e??null,Lo(n,s,i),t.current.lanes=i,Np(t,i,r),oi(t,r),t}function jv(t,e,n,r){var i=e.current,s=Ur(),a=jo(i);return n=S6(n),e.context===null?e.context=n:e.pendingContext=n,e=Ja(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lo(i,e,a),t!==null&&(_s(t,i,a,s),xg(t,i,a)),a}function E0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function C4(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wE(t,e){C4(t,e),(t=t.alternate)&&C4(t,e)}function sH(){return null}var w6=typeof reportError=="function"?reportError:function(t){console.error(t)};function CE(t){this._internalRoot=t}qv.prototype.render=CE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(we(409));jv(t,e,null,null)};qv.prototype.unmount=CE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ac(function(){jv(null,t,null,null)}),e[no]=null}};function qv(t){this._internalRoot=t}qv.prototype.unstable_scheduleHydration=function(t){if(t){var e=QI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xo.length&&e!==0&&e<xo[n].priority;n++);xo.splice(n,0,t),n===0&&eM(t)}};function EE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function E4(){}function aH(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=E0(a);s.call(c)}}var a=x6(e,r,t,0,null,!1,!1,"",E4);return t._reactRootContainer=a,t[no]=a.current,qf(t.nodeType===8?t.parentNode:t),ac(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var c=E0(l);o.call(c)}}var l=xE(t,0,!1,null,null,!1,!1,"",E4);return t._reactRootContainer=l,t[no]=l.current,qf(t.nodeType===8?t.parentNode:t),ac(function(){jv(e,l,n,r)}),l}function Hv(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=E0(a);o.call(l)}}jv(e,a,t,i)}else a=aH(n,e,t,i,r);return E0(a)}JI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Jh(e.pendingLanes);n!==0&&(H2(e,n|1),oi(e,kn()),!(St&6)&&(ud=kn()+500,ul()))}break;case 13:ac(function(){var r=ro(t,1);if(r!==null){var i=Ur();_s(r,t,1,i)}}),wE(t,1)}};U2=function(t){if(t.tag===13){var e=ro(t,134217728);if(e!==null){var n=Ur();_s(e,t,134217728,n)}wE(t,134217728)}};XI=function(t){if(t.tag===13){var e=jo(t),n=ro(t,e);if(n!==null){var r=Ur();_s(n,t,e,r)}wE(t,e)}};QI=function(){return Nt};ZI=function(t,e){var n=Nt;try{return Nt=t,e()}finally{Nt=n}};ew=function(t,e,n){switch(e){case"input":if(Gx(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Iv(r);if(!i)throw Error(we(90));AI(r),Gx(r,i)}}}break;case"textarea":DI(t,n);break;case"select":e=n.value,e!=null&&$u(t,!!n.multiple,e,!1)}};BI=vE;jI=ac;var oH={usingClientEntryPoint:!1,Events:[$p,Eu,Iv,$I,LI,vE]},Sh={findFiberByHostInstance:Ml,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},lH={bundleType:Sh.bundleType,version:Sh.version,rendererPackageName:Sh.rendererPackageName,rendererConfig:Sh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=HI(t),t===null?null:t.stateNode},findFiberByHostInstance:Sh.findFiberByHostInstance||sH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nm.isDisabled&&Nm.supportsFiber)try{_v=Nm.inject(lH),sa=Nm}catch{}}Fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oH;Fi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!EE(e))throw Error(we(200));return iH(t,e,null,n)};Fi.createRoot=function(t,e){if(!EE(t))throw Error(we(299));var n=!1,r="",i=w6;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=xE(t,1,!1,null,null,n,!1,r,i),t[no]=e.current,qf(t.nodeType===8?t.parentNode:t),new CE(e)};Fi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(we(188)):(t=Object.keys(t).join(","),Error(we(268,t)));return t=HI(e),t=t===null?null:t.stateNode,t};Fi.flushSync=function(t){return ac(t)};Fi.hydrate=function(t,e,n){if(!zv(e))throw Error(we(200));return Hv(null,t,e,!0,n)};Fi.hydrateRoot=function(t,e,n){if(!EE(t))throw Error(we(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=w6;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=x6(e,null,t,1,n??null,i,!1,s,a),t[no]=e.current,qf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new qv(e)};Fi.render=function(t,e,n){if(!zv(e))throw Error(we(200));return Hv(null,t,e,!1,n)};Fi.unmountComponentAtNode=function(t){if(!zv(t))throw Error(we(40));return t._reactRootContainer?(ac(function(){Hv(null,null,t,!1,function(){t._reactRootContainer=null,t[no]=null})}),!0):!1};Fi.unstable_batchedUpdates=vE;Fi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zv(n))throw Error(we(200));if(t==null||t._reactInternals===void 0)throw Error(we(38));return Hv(t,e,n,!1,r)};Fi.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=Fi})(sq);const Fm=kv(tc);var T4=tc;Bx.createRoot=T4.createRoot,Bx.hydrateRoot=T4.hydrateRoot;/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jf(){return Jf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jf.apply(this,arguments)}var To;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(To||(To={}));const R4="popstate";function cH(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return Iw("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:T0(i)}return dH(e,n,null,t)}function $n(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function TE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uH(){return Math.random().toString(36).substr(2,8)}function k4(t,e){return{usr:t.state,key:t.key,idx:e}}function Iw(t,e,n,r){return n===void 0&&(n=null),Jf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?jd(e):e,{state:n,key:e&&e.key||r||uH()})}function T0(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function jd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function dH(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=To.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(Jf({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){o=To.Pop;let g=u(),v=g==null?null:g-c;c=g,l&&l({action:o,location:m.location,delta:v})}function h(g,v){o=To.Push;let y=Iw(m.location,g,v);n&&n(y,g),c=u()+1;let b=k4(y,c),C=m.createHref(y);try{a.pushState(b,"",C)}catch{i.location.assign(C)}s&&l&&l({action:o,location:m.location,delta:1})}function p(g,v){o=To.Replace;let y=Iw(m.location,g,v);n&&n(y,g),c=u();let b=k4(y,c),C=m.createHref(y);a.replaceState(b,"",C),s&&l&&l({action:o,location:m.location,delta:0})}function f(g){let v=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof g=="string"?g:T0(g);return $n(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let m={get action(){return o},get location(){return t(i,a)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(R4,d),l=g,()=>{i.removeEventListener(R4,d),l=null}},createHref(g){return e(i,g)},createURL:f,encodeLocation(g){let v=f(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(g){return a.go(g)}};return m}var P4;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(P4||(P4={}));function hH(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?jd(e):e,i=RE(r.pathname||"/",n);if(i==null)return null;let s=C6(t);fH(s);let a=null;for(let o=0;a==null&&o<s.length;++o)a=wH(s[o],TH(i));return a}function C6(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&($n(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=zo([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&($n(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),C6(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:SH(c,s.index),routesMeta:u})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of E6(s.path))i(s,a,l)}),e}function E6(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=E6(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function fH(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:xH(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const pH=/^:\w+$/,mH=3,gH=2,vH=1,yH=10,bH=-2,_4=t=>t==="*";function SH(t,e){let n=t.split("/"),r=n.length;return n.some(_4)&&(r+=bH),e&&(r+=gH),n.filter(i=>!_4(i)).reduce((i,s)=>i+(pH.test(s)?mH:s===""?vH:yH),r)}function xH(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function wH(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let a=0;a<n.length;++a){let o=n[a],l=a===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=CH({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=o.route;s.push({params:r,pathname:zo([i,u.pathname]),pathnameBase:_H(zo([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=zo([i,u.pathnameBase]))}return s}function CH(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=EH(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((c,u,d)=>{if(u==="*"){let h=o[d]||"";a=s.slice(0,s.length-h.length).replace(/(.)\/+$/,"$1")}return c[u]=RH(o[d]||"",u),c},{}),pathname:s,pathnameBase:a,pattern:t}}function EH(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),TE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,o)=>(r.push(o),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function TH(t){try{return decodeURI(t)}catch(e){return TE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function RH(t,e){try{return decodeURIComponent(t)}catch(n){return TE(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function RE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function kH(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?jd(t):t;return{pathname:n?n.startsWith("/")?n:PH(n,e):e,search:AH(r),hash:OH(i)}}function PH(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function G1(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function T6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function R6(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=jd(t):(i=Jf({},t),$n(!i.pathname||!i.pathname.includes("?"),G1("?","pathname","search",i)),$n(!i.pathname||!i.pathname.includes("#"),G1("#","pathname","hash",i)),$n(!i.search||!i.search.includes("#"),G1("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(r||a==null)o=n;else{let d=e.length-1;if(a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}o=d>=0?e[d]:"/"}let l=kH(i,o),c=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const zo=t=>t.join("/").replace(/\/\/+/g,"/"),_H=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),AH=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,OH=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function DH(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}/**
 * React Router v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function IH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const MH=typeof Object.is=="function"?Object.is:IH,{useState:NH,useEffect:FH,useLayoutEffect:$H,useDebugValue:LH}=rd;function BH(t,e,n){const r=e(),[{inst:i},s]=NH({inst:{value:r,getSnapshot:e}});return $H(()=>{i.value=r,i.getSnapshot=e,K1(i)&&s({inst:i})},[t,r,e]),FH(()=>(K1(i)&&s({inst:i}),t(()=>{K1(i)&&s({inst:i})})),[t]),LH(r),r}function K1(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!MH(n,r)}catch{return!0}}function jH(t,e,n){return e()}const qH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zH=!qH,HH=zH?jH:BH;"useSyncExternalStore"in rd&&(t=>t.useSyncExternalStore)(rd);const k6=P.createContext(null),Uv=P.createContext(null),qd=P.createContext(null),Vv=P.createContext(null),dl=P.createContext({outlet:null,matches:[]}),P6=P.createContext(null);function Mw(){return Mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mw.apply(this,arguments)}function UH(t,e){let{relative:n}=e===void 0?{}:e;zd()||$n(!1);let{basename:r,navigator:i}=P.useContext(qd),{hash:s,pathname:a,search:o}=kE(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:zo([r,a])),i.createHref({pathname:l,search:o,hash:s})}function zd(){return P.useContext(Vv)!=null}function Hd(){return zd()||$n(!1),P.useContext(Vv).location}function Mc(){zd()||$n(!1);let{basename:t,navigator:e}=P.useContext(qd),{matches:n}=P.useContext(dl),{pathname:r}=Hd(),i=JSON.stringify(T6(n).map(o=>o.pathnameBase)),s=P.useRef(!1);return P.useEffect(()=>{s.current=!0}),P.useCallback(function(o,l){if(l===void 0&&(l={}),!s.current)return;if(typeof o=="number"){e.go(o);return}let c=R6(o,JSON.parse(i),r,l.relative==="path");t!=="/"&&(c.pathname=c.pathname==="/"?t:zo([t,c.pathname])),(l.replace?e.replace:e.push)(c,l.state,l)},[t,e,i,r])}const VH=P.createContext(null);function WH(t){let e=P.useContext(dl).outlet;return e&&P.createElement(VH.Provider,{value:t},e)}function Wv(){let{matches:t}=P.useContext(dl),e=t[t.length-1];return e?e.params:{}}function kE(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=P.useContext(dl),{pathname:i}=Hd(),s=JSON.stringify(T6(r).map(a=>a.pathnameBase));return P.useMemo(()=>R6(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function GH(t,e){zd()||$n(!1);let{navigator:n}=P.useContext(qd),r=P.useContext(Uv),{matches:i}=P.useContext(dl),s=i[i.length-1],a=s?s.params:{};s&&s.pathname;let o=s?s.pathnameBase:"/";s&&s.route;let l=Hd(),c;if(e){var u;let m=typeof e=="string"?jd(e):e;o==="/"||(u=m.pathname)!=null&&u.startsWith(o)||$n(!1),c=m}else c=l;let d=c.pathname||"/",h=o==="/"?d:d.slice(o.length)||"/",p=hH(t,{pathname:h}),f=XH(p&&p.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:zo([o,n.encodeLocation?n.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?o:zo([o,n.encodeLocation?n.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,r||void 0);return e&&f?P.createElement(Vv.Provider,{value:{location:Mw({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:To.Pop}},f):f}function KH(){let t=tU(),e=DH(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:i},n):null,s)}class YH extends P.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location?{error:e.error,location:e.location}:{error:e.error||n.error,location:n.location}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?P.createElement(dl.Provider,{value:this.props.routeContext},P.createElement(P6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JH(t){let{routeContext:e,match:n,children:r}=t,i=P.useContext(k6);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(dl.Provider,{value:e},r)}function XH(t,e,n){if(e===void 0&&(e=[]),t==null)if(n!=null&&n.errors)t=n.matches;else return null;let r=t,i=n==null?void 0:n.errors;if(i!=null){let s=r.findIndex(a=>a.route.id&&(i==null?void 0:i[a.route.id]));s>=0||$n(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,a,o)=>{let l=a.route.id?i==null?void 0:i[a.route.id]:null,c=null;n&&(a.route.ErrorBoundary?c=P.createElement(a.route.ErrorBoundary,null):a.route.errorElement?c=a.route.errorElement:c=P.createElement(KH,null));let u=e.concat(r.slice(0,o+1)),d=()=>{let h=s;return l?h=c:a.route.Component?h=P.createElement(a.route.Component,null):a.route.element&&(h=a.route.element),P.createElement(JH,{match:a,routeContext:{outlet:s,matches:u},children:h})};return n&&(a.route.ErrorBoundary||a.route.errorElement||o===0)?P.createElement(YH,{location:n.location,component:c,error:l,children:d(),routeContext:{outlet:null,matches:u}}):d()},null)}var A4;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator"})(A4||(A4={}));var R0;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"})(R0||(R0={}));function QH(t){let e=P.useContext(Uv);return e||$n(!1),e}function ZH(t){let e=P.useContext(dl);return e||$n(!1),e}function eU(t){let e=ZH(),n=e.matches[e.matches.length-1];return n.route.id||$n(!1),n.route.id}function tU(){var t;let e=P.useContext(P6),n=QH(R0.UseRouteError),r=eU(R0.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function nU(t){let{to:e,replace:n,state:r,relative:i}=t;zd()||$n(!1);let s=P.useContext(Uv),a=Mc();return P.useEffect(()=>{s&&s.navigation.state!=="idle"||a(e,{replace:n,state:r,relative:i})}),null}function rU(t){return WH(t.context)}function Hs(t){$n(!1)}function iU(t){let{basename:e="/",children:n=null,location:r,navigationType:i=To.Pop,navigator:s,static:a=!1}=t;zd()&&$n(!1);let o=e.replace(/^\/*/,"/"),l=P.useMemo(()=>({basename:o,navigator:s,static:a}),[o,s,a]);typeof r=="string"&&(r=jd(r));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:p="default"}=r,f=P.useMemo(()=>{let m=RE(c,o);return m==null?null:{location:{pathname:m,search:u,hash:d,state:h,key:p},navigationType:i}},[o,c,u,d,h,p,i]);return f==null?null:P.createElement(qd.Provider,{value:l},P.createElement(Vv.Provider,{children:n,value:f}))}function sU(t){let{children:e,location:n}=t,r=P.useContext(k6),i=r&&!e?r.router.routes:Nw(e);return GH(i,n)}var O4;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(O4||(O4={}));new Promise(()=>{});function Nw(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(r,i)=>{if(!P.isValidElement(r))return;let s=[...e,i];if(r.type===P.Fragment){n.push.apply(n,Nw(r.props.children,s));return}r.type!==Hs&&$n(!1),!r.props.index||!r.props.children||$n(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Nw(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function k0(){return k0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k0.apply(this,arguments)}function _6(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function aU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function oU(t,e){return t.button===0&&(!e||e==="_self")&&!aU(t)}const lU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],cU=["aria-current","caseSensitive","className","end","style","to","children"];function uU(t){let{basename:e,children:n,window:r}=t,i=P.useRef();i.current==null&&(i.current=cH({window:r,v5Compat:!0}));let s=i.current,[a,o]=P.useState({action:s.action,location:s.location});return P.useLayoutEffect(()=>s.listen(o),[s]),P.createElement(iU,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:s})}const dU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,A6=P.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u}=e,d=_6(e,lU),{basename:h}=P.useContext(qd),p,f=!1;if(typeof c=="string"&&hU.test(c)&&(p=c,dU)){let y=new URL(window.location.href),b=c.startsWith("//")?new URL(y.protocol+c):new URL(c),C=RE(b.pathname,h);b.origin===y.origin&&C!=null?c=C+b.search+b.hash:f=!0}let m=UH(c,{relative:i}),g=fU(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:i});function v(y){r&&r(y),y.defaultPrevented||g(y)}return P.createElement("a",k0({},d,{href:p||m,onClick:f||s?r:v,ref:n,target:l}))}),O6=P.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:o,to:l,children:c}=e,u=_6(e,cU),d=kE(l,{relative:u.relative}),h=Hd(),p=P.useContext(Uv),{navigator:f}=P.useContext(qd),m=f.encodeLocation?f.encodeLocation(d).pathname:d.pathname,g=h.pathname,v=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;i||(g=g.toLowerCase(),v=v?v.toLowerCase():null,m=m.toLowerCase());let y=g===m||!a&&g.startsWith(m)&&g.charAt(m.length)==="/",b=v!=null&&(v===m||!a&&v.startsWith(m)&&v.charAt(m.length)==="/"),C=y?r:void 0,R;typeof s=="function"?R=s({isActive:y,isPending:b}):R=[s,y?"active":null,b?"pending":null].filter(Boolean).join(" ");let w=typeof o=="function"?o({isActive:y,isPending:b}):o;return P.createElement(A6,k0({},u,{"aria-current":C,className:R,ref:n,style:w,to:l}),typeof c=="function"?c({isActive:y,isPending:b}):c)});var D4;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(D4||(D4={}));var I4;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(I4||(I4={}));function fU(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a}=e===void 0?{}:e,o=Mc(),l=Hd(),c=kE(t,{relative:a});return P.useCallback(u=>{if(oU(u,n)){u.preventDefault();let d=r!==void 0?r:T0(l)===T0(c);o(t,{replace:d,state:i,preventScrollReset:s,relative:a})}},[l,o,c,r,i,n,t,s,a])}const pU={black:"#000",white:"#fff"},Xf=pU,mU={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Yc=mU,gU={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Jc=gU,vU={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Xc=vU,yU={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Qc=yU,bU={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Zc=bU,SU={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},xh=SU,xU={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},wU=xU;function $(){return $=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$.apply(this,arguments)}function Al(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function D6(t){if(!Al(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=D6(t[n])}),e}function li(t,e,n={clone:!0}){const r=n.clone?$({},t):t;return Al(t)&&Al(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(Al(e[i])&&i in t&&Al(t[i])?r[i]=li(t[i],e[i],n):n.clone?r[i]=Al(e[i])?D6(e[i]):e[i]:r[i]=e[i])}),r}var z={},CU={get exports(){return z},set exports(t){z=t}},EU="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",TU=EU,RU=TU;function I6(){}function M6(){}M6.resetWarningCache=I6;var kU=function(){function t(r,i,s,a,o,l){if(l!==RU){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:M6,resetWarningCache:I6};return n.PropTypes=n,n};CU.exports=kU();function tl(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}var M4={},PU={get exports(){return M4},set exports(t){M4=t}},Ft={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE=Symbol.for("react.element"),_E=Symbol.for("react.portal"),Gv=Symbol.for("react.fragment"),Kv=Symbol.for("react.strict_mode"),Yv=Symbol.for("react.profiler"),Jv=Symbol.for("react.provider"),Xv=Symbol.for("react.context"),_U=Symbol.for("react.server_context"),Qv=Symbol.for("react.forward_ref"),Zv=Symbol.for("react.suspense"),ey=Symbol.for("react.suspense_list"),ty=Symbol.for("react.memo"),ny=Symbol.for("react.lazy"),AU=Symbol.for("react.offscreen"),N6;N6=Symbol.for("react.module.reference");function ds(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case PE:switch(t=t.type,t){case Gv:case Yv:case Kv:case Zv:case ey:return t;default:switch(t=t&&t.$$typeof,t){case _U:case Xv:case Qv:case ny:case ty:case Jv:return t;default:return e}}case _E:return e}}}Ft.ContextConsumer=Xv;Ft.ContextProvider=Jv;Ft.Element=PE;Ft.ForwardRef=Qv;Ft.Fragment=Gv;Ft.Lazy=ny;Ft.Memo=ty;Ft.Portal=_E;Ft.Profiler=Yv;Ft.StrictMode=Kv;Ft.Suspense=Zv;Ft.SuspenseList=ey;Ft.isAsyncMode=function(){return!1};Ft.isConcurrentMode=function(){return!1};Ft.isContextConsumer=function(t){return ds(t)===Xv};Ft.isContextProvider=function(t){return ds(t)===Jv};Ft.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===PE};Ft.isForwardRef=function(t){return ds(t)===Qv};Ft.isFragment=function(t){return ds(t)===Gv};Ft.isLazy=function(t){return ds(t)===ny};Ft.isMemo=function(t){return ds(t)===ty};Ft.isPortal=function(t){return ds(t)===_E};Ft.isProfiler=function(t){return ds(t)===Yv};Ft.isStrictMode=function(t){return ds(t)===Kv};Ft.isSuspense=function(t){return ds(t)===Zv};Ft.isSuspenseList=function(t){return ds(t)===ey};Ft.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Gv||t===Yv||t===Kv||t===Zv||t===ey||t===AU||typeof t=="object"&&t!==null&&(t.$$typeof===ny||t.$$typeof===ty||t.$$typeof===Jv||t.$$typeof===Xv||t.$$typeof===Qv||t.$$typeof===N6||t.getModuleId!==void 0)};Ft.typeOf=ds;(function(t){t.exports=Ft})(PU);function ye(t){if(typeof t!="string")throw new Error(tl(7));return t.charAt(0).toUpperCase()+t.slice(1)}function P0(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function oc(t,e=166){let n;function r(...i){const s=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(s,e)}return r.clear=()=>{clearTimeout(n)},r}function OU(t,e){return()=>null}function hf(t,e){return P.isValidElement(t)&&e.indexOf(t.type.muiName)!==-1}function yr(t){return t&&t.ownerDocument||document}function as(t){return yr(t).defaultView||window}function DU(t,e){return()=>null}function _0(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const IU=typeof window<"u"?P.useLayoutEffect:P.useEffect,os=IU;let N4=0;function MU(t){const[e,n]=P.useState(t),r=t||e;return P.useEffect(()=>{e==null&&(N4+=1,n(`mui-${N4}`))},[e]),r}const F4=rd["useId"];function lc(t){if(F4!==void 0){const e=F4();return t??e}return MU(t)}function NU(t,e,n,r,i){return null}function dd({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=P.useRef(t!==void 0),[s,a]=P.useState(e),o=i?t:s,l=P.useCallback(c=>{i||a(c)},[]);return[o,l]}function Rs(t){const e=P.useRef(t);return os(()=>{e.current=t}),P.useCallback((...n)=>(0,e.current)(...n),[])}function gn(...t){return P.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{_0(n,e)})},t)}let ry=!0,Fw=!1,$4;const FU={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function $U(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&FU[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function LU(t){t.metaKey||t.altKey||t.ctrlKey||(ry=!0)}function Y1(){ry=!1}function BU(){this.visibilityState==="hidden"&&Fw&&(ry=!0)}function jU(t){t.addEventListener("keydown",LU,!0),t.addEventListener("mousedown",Y1,!0),t.addEventListener("pointerdown",Y1,!0),t.addEventListener("touchstart",Y1,!0),t.addEventListener("visibilitychange",BU,!0)}function qU(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return ry||$U(e)}function AE(){const t=P.useCallback(i=>{i!=null&&jU(i.ownerDocument)},[]),e=P.useRef(!1);function n(){return e.current?(Fw=!0,window.clearTimeout($4),$4=window.setTimeout(()=>{Fw=!1},100),e.current=!1,!0):!1}function r(i){return qU(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function F6(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}let eu;function $6(){if(eu)return eu;const t=document.createElement("div"),e=document.createElement("div");return e.style.width="10px",e.style.height="1px",t.appendChild(e),t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t),eu="reverse",t.scrollLeft>0?eu="default":(t.scrollLeft=1,t.scrollLeft===0&&(eu="negative")),document.body.removeChild(t),eu}function L4(t,e){const n=t.scrollLeft;if(e!=="rtl")return n;switch($6()){case"negative":return t.scrollWidth-t.clientWidth+n;case"reverse":return t.scrollWidth-t.clientWidth-n;default:return n}}const zU=t=>{const e=P.useRef({});return P.useEffect(()=>{e.current=t}),e.current},L6=zU,HU={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},UU=HU;function OE(t,e){const n=$({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=$({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=$({},s),Object.keys(i).forEach(a=>{n[r][a]=OE(i[a],s[a])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function Le(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,a)=>{if(a){const o=e(a);o!==""&&s.push(o),n&&n[a]&&s.push(n[a])}return s},[]).join(" ")}),r}const B4=t=>t,VU=()=>{let t=B4;return{configure(e){t=e},generate(e){return t(e)},reset(){t=B4}}},WU=VU(),DE=WU,GU={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function Fe(t,e,n="Mui"){const r=GU[e];return r?`${n}-${r}`:`${DE.generate(t)}-${e}`}function Be(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=Fe(t,i,n)}),r}const Bp="$$material";function pe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function B6(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var KU=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,YU=B6(function(t){return KU.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function JU(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function XU(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var QU=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(XU(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=JU(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Cr="-ms-",A0="-moz-",Et="-webkit-",j6="comm",IE="rule",ME="decl",ZU="@import",q6="@keyframes",eV=Math.abs,iy=String.fromCharCode,tV=Object.assign;function nV(t,e){return mr(t,0)^45?(((e<<2^mr(t,0))<<2^mr(t,1))<<2^mr(t,2))<<2^mr(t,3):0}function z6(t){return t.trim()}function rV(t,e){return(t=e.exec(t))?t[0]:t}function _t(t,e,n){return t.replace(e,n)}function $w(t,e){return t.indexOf(e)}function mr(t,e){return t.charCodeAt(e)|0}function Qf(t,e,n){return t.slice(e,n)}function Gs(t){return t.length}function NE(t){return t.length}function $m(t,e){return e.push(t),t}function iV(t,e){return t.map(e).join("")}var sy=1,hd=1,H6=0,hi=0,Mn=0,Ud="";function ay(t,e,n,r,i,s,a){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:sy,column:hd,length:a,return:""}}function wh(t,e){return tV(ay("",null,null,"",null,null,0),t,{length:-t.length},e)}function sV(){return Mn}function aV(){return Mn=hi>0?mr(Ud,--hi):0,hd--,Mn===10&&(hd=1,sy--),Mn}function Di(){return Mn=hi<H6?mr(Ud,hi++):0,hd++,Mn===10&&(hd=1,sy++),Mn}function oa(){return mr(Ud,hi)}function Pg(){return hi}function jp(t,e){return Qf(Ud,t,e)}function Zf(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function U6(t){return sy=hd=1,H6=Gs(Ud=t),hi=0,[]}function V6(t){return Ud="",t}function _g(t){return z6(jp(hi-1,Lw(t===91?t+2:t===40?t+1:t)))}function oV(t){for(;(Mn=oa())&&Mn<33;)Di();return Zf(t)>2||Zf(Mn)>3?"":" "}function lV(t,e){for(;--e&&Di()&&!(Mn<48||Mn>102||Mn>57&&Mn<65||Mn>70&&Mn<97););return jp(t,Pg()+(e<6&&oa()==32&&Di()==32))}function Lw(t){for(;Di();)switch(Mn){case t:return hi;case 34:case 39:t!==34&&t!==39&&Lw(Mn);break;case 40:t===41&&Lw(t);break;case 92:Di();break}return hi}function cV(t,e){for(;Di()&&t+Mn!==47+10;)if(t+Mn===42+42&&oa()===47)break;return"/*"+jp(e,hi-1)+"*"+iy(t===47?t:Di())}function uV(t){for(;!Zf(oa());)Di();return jp(t,hi)}function dV(t){return V6(Ag("",null,null,null,[""],t=U6(t),0,[0],t))}function Ag(t,e,n,r,i,s,a,o,l){for(var c=0,u=0,d=a,h=0,p=0,f=0,m=1,g=1,v=1,y=0,b="",C=i,R=s,w=r,E=b;g;)switch(f=y,y=Di()){case 40:if(f!=108&&mr(E,d-1)==58){$w(E+=_t(_g(y),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:E+=_g(y);break;case 9:case 10:case 13:case 32:E+=oV(f);break;case 92:E+=lV(Pg()-1,7);continue;case 47:switch(oa()){case 42:case 47:$m(hV(cV(Di(),Pg()),e,n),l);break;default:E+="/"}break;case 123*m:o[c++]=Gs(E)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:p>0&&Gs(E)-d&&$m(p>32?q4(E+";",r,n,d-1):q4(_t(E," ","")+";",r,n,d-2),l);break;case 59:E+=";";default:if($m(w=j4(E,e,n,c,u,i,o,b,C=[],R=[],d),s),y===123)if(u===0)Ag(E,e,w,w,C,s,d,o,R);else switch(h===99&&mr(E,3)===110?100:h){case 100:case 109:case 115:Ag(t,w,w,r&&$m(j4(t,w,w,0,0,i,o,b,i,C=[],d),R),i,R,d,o,r?C:R);break;default:Ag(E,w,w,w,[""],R,0,o,R)}}c=u=p=0,m=v=1,b=E="",d=a;break;case 58:d=1+Gs(E),p=f;default:if(m<1){if(y==123)--m;else if(y==125&&m++==0&&aV()==125)continue}switch(E+=iy(y),y*m){case 38:v=u>0?1:(E+="\f",-1);break;case 44:o[c++]=(Gs(E)-1)*v,v=1;break;case 64:oa()===45&&(E+=_g(Di())),h=oa(),u=d=Gs(b=E+=uV(Pg())),y++;break;case 45:f===45&&Gs(E)==2&&(m=0)}}return s}function j4(t,e,n,r,i,s,a,o,l,c,u){for(var d=i-1,h=i===0?s:[""],p=NE(h),f=0,m=0,g=0;f<r;++f)for(var v=0,y=Qf(t,d+1,d=eV(m=a[f])),b=t;v<p;++v)(b=z6(m>0?h[v]+" "+y:_t(y,/&\f/g,h[v])))&&(l[g++]=b);return ay(t,e,n,i===0?IE:o,l,c,u)}function hV(t,e,n){return ay(t,e,n,j6,iy(sV()),Qf(t,2,-2),0)}function q4(t,e,n,r){return ay(t,e,n,ME,Qf(t,0,r),Qf(t,r+1,-1),r)}function Hu(t,e){for(var n="",r=NE(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function fV(t,e,n,r){switch(t.type){case ZU:case ME:return t.return=t.return||t.value;case j6:return"";case q6:return t.return=t.value+"{"+Hu(t.children,r)+"}";case IE:t.value=t.props.join(",")}return Gs(n=Hu(t.children,r))?t.return=t.value+"{"+n+"}":""}function pV(t){var e=NE(t);return function(n,r,i,s){for(var a="",o=0;o<e;o++)a+=t[o](n,r,i,s)||"";return a}}function mV(t){return function(e){e.root||(e=e.return)&&t(e)}}var gV=function(e,n,r){for(var i=0,s=0;i=s,s=oa(),i===38&&s===12&&(n[r]=1),!Zf(s);)Di();return jp(e,hi)},vV=function(e,n){var r=-1,i=44;do switch(Zf(i)){case 0:i===38&&oa()===12&&(n[r]=1),e[r]+=gV(hi-1,n,r);break;case 2:e[r]+=_g(i);break;case 4:if(i===44){e[++r]=oa()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=iy(i)}while(i=Di());return e},yV=function(e,n){return V6(vV(U6(e),n))},z4=new WeakMap,bV=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!z4.get(r))&&!i){z4.set(e,!0);for(var s=[],a=yV(n,s),o=r.props,l=0,c=0;l<a.length;l++)for(var u=0;u<o.length;u++,c++)e.props[c]=s[l]?a[l].replace(/&\f/g,o[u]):o[u]+" "+a[l]}}},SV=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function W6(t,e){switch(nV(t,e)){case 5103:return Et+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Et+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Et+t+A0+t+Cr+t+t;case 6828:case 4268:return Et+t+Cr+t+t;case 6165:return Et+t+Cr+"flex-"+t+t;case 5187:return Et+t+_t(t,/(\w+).+(:[^]+)/,Et+"box-$1$2"+Cr+"flex-$1$2")+t;case 5443:return Et+t+Cr+"flex-item-"+_t(t,/flex-|-self/,"")+t;case 4675:return Et+t+Cr+"flex-line-pack"+_t(t,/align-content|flex-|-self/,"")+t;case 5548:return Et+t+Cr+_t(t,"shrink","negative")+t;case 5292:return Et+t+Cr+_t(t,"basis","preferred-size")+t;case 6060:return Et+"box-"+_t(t,"-grow","")+Et+t+Cr+_t(t,"grow","positive")+t;case 4554:return Et+_t(t,/([^-])(transform)/g,"$1"+Et+"$2")+t;case 6187:return _t(_t(_t(t,/(zoom-|grab)/,Et+"$1"),/(image-set)/,Et+"$1"),t,"")+t;case 5495:case 3959:return _t(t,/(image-set\([^]*)/,Et+"$1$`$1");case 4968:return _t(_t(t,/(.+:)(flex-)?(.*)/,Et+"box-pack:$3"+Cr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Et+t+t;case 4095:case 3583:case 4068:case 2532:return _t(t,/(.+)-inline(.+)/,Et+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Gs(t)-1-e>6)switch(mr(t,e+1)){case 109:if(mr(t,e+4)!==45)break;case 102:return _t(t,/(.+:)(.+)-([^]+)/,"$1"+Et+"$2-$3$1"+A0+(mr(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~$w(t,"stretch")?W6(_t(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(mr(t,e+1)!==115)break;case 6444:switch(mr(t,Gs(t)-3-(~$w(t,"!important")&&10))){case 107:return _t(t,":",":"+Et)+t;case 101:return _t(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Et+(mr(t,14)===45?"inline-":"")+"box$3$1"+Et+"$2$3$1"+Cr+"$2box$3")+t}break;case 5936:switch(mr(t,e+11)){case 114:return Et+t+Cr+_t(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Et+t+Cr+_t(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Et+t+Cr+_t(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Et+t+Cr+t+t}return t}var xV=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case ME:e.return=W6(e.value,e.length);break;case q6:return Hu([wh(e,{value:_t(e.value,"@","@"+Et)})],i);case IE:if(e.length)return iV(e.props,function(s){switch(rV(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Hu([wh(e,{props:[_t(s,/:(read-\w+)/,":"+A0+"$1")]})],i);case"::placeholder":return Hu([wh(e,{props:[_t(s,/:(plac\w+)/,":"+Et+"input-$1")]}),wh(e,{props:[_t(s,/:(plac\w+)/,":"+A0+"$1")]}),wh(e,{props:[_t(s,/:(plac\w+)/,Cr+"input-$1")]})],i)}return""})}},wV=[xV],CV=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=e.stylisPlugins||wV,s={},a,o=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),v=1;v<g.length;v++)s[g[v]]=!0;o.push(m)});var l,c=[bV,SV];{var u,d=[fV,mV(function(m){u.insert(m)})],h=pV(c.concat(i,d)),p=function(g){return Hu(dV(g),h)};l=function(g,v,y,b){u=y,p(g?g+"{"+v.styles+"}":v.styles),b&&(f.inserted[v.name]=!0)}}var f={key:n,sheet:new QU({key:n,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return f.sheet.hydrate(o),f},Bw={},EV={get exports(){return Bw},set exports(t){Bw=t}},$t={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ir=typeof Symbol=="function"&&Symbol.for,FE=ir?Symbol.for("react.element"):60103,$E=ir?Symbol.for("react.portal"):60106,oy=ir?Symbol.for("react.fragment"):60107,ly=ir?Symbol.for("react.strict_mode"):60108,cy=ir?Symbol.for("react.profiler"):60114,uy=ir?Symbol.for("react.provider"):60109,dy=ir?Symbol.for("react.context"):60110,LE=ir?Symbol.for("react.async_mode"):60111,hy=ir?Symbol.for("react.concurrent_mode"):60111,fy=ir?Symbol.for("react.forward_ref"):60112,py=ir?Symbol.for("react.suspense"):60113,TV=ir?Symbol.for("react.suspense_list"):60120,my=ir?Symbol.for("react.memo"):60115,gy=ir?Symbol.for("react.lazy"):60116,RV=ir?Symbol.for("react.block"):60121,kV=ir?Symbol.for("react.fundamental"):60117,PV=ir?Symbol.for("react.responder"):60118,_V=ir?Symbol.for("react.scope"):60119;function Li(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case FE:switch(t=t.type,t){case LE:case hy:case oy:case cy:case ly:case py:return t;default:switch(t=t&&t.$$typeof,t){case dy:case fy:case gy:case my:case uy:return t;default:return e}}case $E:return e}}}function G6(t){return Li(t)===hy}$t.AsyncMode=LE;$t.ConcurrentMode=hy;$t.ContextConsumer=dy;$t.ContextProvider=uy;$t.Element=FE;$t.ForwardRef=fy;$t.Fragment=oy;$t.Lazy=gy;$t.Memo=my;$t.Portal=$E;$t.Profiler=cy;$t.StrictMode=ly;$t.Suspense=py;$t.isAsyncMode=function(t){return G6(t)||Li(t)===LE};$t.isConcurrentMode=G6;$t.isContextConsumer=function(t){return Li(t)===dy};$t.isContextProvider=function(t){return Li(t)===uy};$t.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===FE};$t.isForwardRef=function(t){return Li(t)===fy};$t.isFragment=function(t){return Li(t)===oy};$t.isLazy=function(t){return Li(t)===gy};$t.isMemo=function(t){return Li(t)===my};$t.isPortal=function(t){return Li(t)===$E};$t.isProfiler=function(t){return Li(t)===cy};$t.isStrictMode=function(t){return Li(t)===ly};$t.isSuspense=function(t){return Li(t)===py};$t.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===oy||t===hy||t===cy||t===ly||t===py||t===TV||typeof t=="object"&&t!==null&&(t.$$typeof===gy||t.$$typeof===my||t.$$typeof===uy||t.$$typeof===dy||t.$$typeof===fy||t.$$typeof===kV||t.$$typeof===PV||t.$$typeof===_V||t.$$typeof===RV)};$t.typeOf=Li;(function(t){t.exports=$t})(EV);var K6=Bw,AV={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},OV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Y6={};Y6[K6.ForwardRef]=AV;Y6[K6.Memo]=OV;var DV=!0;function IV(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var J6=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||DV===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},X6=function(e,n,r){J6(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function MV(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var NV={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},FV=/[A-Z]|^ms/g,$V=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Q6=function(e){return e.charCodeAt(1)===45},H4=function(e){return e!=null&&typeof e!="boolean"},J1=B6(function(t){return Q6(t)?t:t.replace(FV,"-$&").toLowerCase()}),U4=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace($V,function(r,i,s){return Ks={name:i,styles:s,next:Ks},i})}return NV[e]!==1&&!Q6(e)&&typeof n=="number"&&n!==0?n+"px":n};function ep(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Ks={name:n.name,styles:n.styles,next:Ks},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Ks={name:r.name,styles:r.styles,next:Ks},r=r.next;var i=n.styles+";";return i}return LV(t,e,n)}case"function":{if(t!==void 0){var s=Ks,a=n(t);return Ks=s,ep(t,e,a)}break}}if(e==null)return n;var o=e[n];return o!==void 0?o:n}function LV(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=ep(t,e,n[i])+";";else for(var s in n){var a=n[s];if(typeof a!="object")e!=null&&e[a]!==void 0?r+=s+"{"+e[a]+"}":H4(a)&&(r+=J1(s)+":"+U4(s,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var o=0;o<a.length;o++)H4(a[o])&&(r+=J1(s)+":"+U4(s,a[o])+";");else{var l=ep(t,e,a);switch(s){case"animation":case"animationName":{r+=J1(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var V4=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ks,BE=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";Ks=void 0;var a=e[0];a==null||a.raw===void 0?(i=!1,s+=ep(r,n,a)):s+=a[0];for(var o=1;o<e.length;o++)s+=ep(r,n,e[o]),i&&(s+=a[o]);V4.lastIndex=0;for(var l="",c;(c=V4.exec(s))!==null;)l+="-"+c[1];var u=MV(s)+l;return{name:u,styles:s,next:Ks}},BV=function(e){return e()},Z6=rd["useInsertionEffect"]?rd["useInsertionEffect"]:!1,jV=Z6||BV,W4=Z6||P.useLayoutEffect,eN=P.createContext(typeof HTMLElement<"u"?CV({key:"css"}):null);eN.Provider;var tN=function(e){return P.forwardRef(function(n,r){var i=P.useContext(eN);return e(n,i,r)})},jE=P.createContext({}),qV=tN(function(t,e){var n=t.styles,r=BE([n],void 0,P.useContext(jE)),i=P.useRef();return W4(function(){var s=e.key+"-global",a=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),o=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(a.before=e.sheet.tags[0]),l!==null&&(o=!0,l.setAttribute("data-emotion",s),a.hydrate([l])),i.current=[a,o],function(){a.flush()}},[e]),W4(function(){var s=i.current,a=s[0],o=s[1];if(o){s[1]=!1;return}if(r.next!==void 0&&X6(e,r.next,!0),a.tags.length){var l=a.tags[a.tags.length-1].nextElementSibling;a.before=l,a.flush()}e.insert("",r,a,!1)},[e,r.name]),null});function zV(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return BE(e)}var qE=function(){var e=zV.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},HV=YU,UV=function(e){return e!=="theme"},G4=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?HV:UV},K4=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(a){return e.__emotion_forwardProp(a)&&s(a)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},VV=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return J6(n,r,i),jV(function(){return X6(n,r,i)}),null},WV=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,a;n!==void 0&&(s=n.label,a=n.target);var o=K4(e,n,r),l=o||G4(i),c=!l("as");return function(){var u=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{d.push(u[0][0]);for(var h=u.length,p=1;p<h;p++)d.push(u[p],u[0][p])}var f=tN(function(m,g,v){var y=c&&m.as||i,b="",C=[],R=m;if(m.theme==null){R={};for(var w in m)R[w]=m[w];R.theme=P.useContext(jE)}typeof m.className=="string"?b=IV(g.registered,C,m.className):m.className!=null&&(b=m.className+" ");var E=BE(d.concat(C),g.registered,R);b+=g.key+"-"+E.name,a!==void 0&&(b+=" "+a);var k=c&&o===void 0?G4(y):l,T={};for(var _ in m)c&&_==="as"||k(_)&&(T[_]=m[_]);return T.className=b,T.ref=v,P.createElement(P.Fragment,null,P.createElement(VV,{cache:g,serialized:E,isStringTag:typeof y=="string"}),P.createElement(y,T))});return f.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",f.defaultProps=e.defaultProps,f.__emotion_real=f,f.__emotion_base=i,f.__emotion_styles=d,f.__emotion_forwardProp=o,Object.defineProperty(f,"toString",{value:function(){return"."+a}}),f.withComponent=function(m,g){return t(m,$({},n,g,{shouldForwardProp:K4(f,g,!0)})).apply(void 0,d)},f}};const GV=WV;var KV=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],jw=GV.bind();KV.forEach(function(t){jw[t]=jw(t)});const YV=jw;function JV(t){return t==null||Object.keys(t).length===0}function XV(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(JV(i)?n:i):e;return S.jsx(qV,{styles:r})}/**
 * @mui/styled-engine v5.12.0
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function nN(t,e){return YV(t,e)}const QV=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},ZV=["values","unit","step"],eW=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>$({},n,{[r.key]:r.val}),{})};function tW(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=pe(t,ZV),s=eW(e),a=Object.keys(s);function o(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n})`}function l(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-r/100}${n})`}function c(h,p){const f=a.indexOf(p);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n}) and (max-width:${(f!==-1&&typeof e[a[f]]=="number"?e[a[f]]:p)-r/100}${n})`}function u(h){return a.indexOf(h)+1<a.length?c(h,a[a.indexOf(h)+1]):o(h)}function d(h){const p=a.indexOf(h);return p===0?o(a[1]):p===a.length-1?l(a[p]):c(h,a[a.indexOf(h)+1]).replace("@media","@media not all and")}return $({keys:a,values:s,up:o,down:l,between:c,only:u,not:d,unit:n},i)}const nW={borderRadius:4},rW=nW;function ff(t,e){return e?li(t,e,{clone:!1}):t}const zE={xs:0,sm:600,md:900,lg:1200,xl:1536},Y4={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${zE[t]}px)`};function fi(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||Y4;return e.reduce((a,o,l)=>(a[s.up(s.keys[l])]=n(e[l]),a),{})}if(typeof e=="object"){const s=r.breakpoints||Y4;return Object.keys(e).reduce((a,o)=>{if(Object.keys(s.values||zE).indexOf(o)!==-1){const l=s.up(o);a[l]=n(e[o],o)}else{const l=o;a[l]=e[l]}return a},{})}return n(e)}function rN(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function iN(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function iW(t,...e){const n=rN(t),r=[n,...e].reduce((i,s)=>li(i,s),{});return iN(Object.keys(n),r)}function sW(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((i,s)=>{s<t.length&&(n[i]=!0)}):r.forEach(i=>{t[i]!=null&&(n[i]=!0)}),n}function Gl({values:t,breakpoints:e,base:n}){const r=n||sW(t,e),i=Object.keys(r);if(i.length===0)return t;let s;return i.reduce((a,o,l)=>(Array.isArray(t)?(a[o]=t[l]!=null?t[l]:t[s],s=l):typeof t=="object"?(a[o]=t[o]!=null?t[o]:t[s],s=o):a[o]=t,a),{})}function vy(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function O0(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=vy(t,n)||r,e&&(i=e(i,r,t)),i}function Ot(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=a=>{if(a[e]==null)return null;const o=a[e],l=a.theme,c=vy(l,r)||{};return fi(a,o,d=>{let h=O0(c,i,d);return d===h&&typeof d=="string"&&(h=O0(c,i,`${e}${d==="default"?"":ye(d)}`,d)),n===!1?h:{[n]:h}})};return s.propTypes={},s.filterProps=[e],s}function aW(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const oW={m:"margin",p:"padding"},lW={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},J4={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},cW=aW(t=>{if(t.length>2)if(J4[t])t=J4[t];else return[t];const[e,n]=t.split(""),r=oW[e],i=lW[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),HE=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],UE=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...HE,...UE];function qp(t,e,n,r){var i;const s=(i=vy(t,e,!1))!=null?i:n;return typeof s=="number"?a=>typeof a=="string"?a:s*a:Array.isArray(s)?a=>typeof a=="string"?a:s[a]:typeof s=="function"?s:()=>{}}function VE(t){return qp(t,"spacing",8)}function cc(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function uW(t,e){return n=>t.reduce((r,i)=>(r[i]=cc(e,n),r),{})}function dW(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=cW(n),s=uW(i,r),a=t[n];return fi(t,a,s)}function sN(t,e){const n=VE(t.theme);return Object.keys(t).map(r=>dW(t,e,r,n)).reduce(ff,{})}function vn(t){return sN(t,HE)}vn.propTypes={};vn.filterProps=HE;function yn(t){return sN(t,UE)}yn.propTypes={};yn.filterProps=UE;function hW(t=8){if(t.mui)return t;const e=VE({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const a=e(s);return typeof a=="number"?`${a}px`:a}).join(" ");return n.mui=!0,n}function yy(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?ff(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Xs(t){return typeof t!="number"?t:`${t}px solid`}const fW=Ot({prop:"border",themeKey:"borders",transform:Xs}),pW=Ot({prop:"borderTop",themeKey:"borders",transform:Xs}),mW=Ot({prop:"borderRight",themeKey:"borders",transform:Xs}),gW=Ot({prop:"borderBottom",themeKey:"borders",transform:Xs}),vW=Ot({prop:"borderLeft",themeKey:"borders",transform:Xs}),yW=Ot({prop:"borderColor",themeKey:"palette"}),bW=Ot({prop:"borderTopColor",themeKey:"palette"}),SW=Ot({prop:"borderRightColor",themeKey:"palette"}),xW=Ot({prop:"borderBottomColor",themeKey:"palette"}),wW=Ot({prop:"borderLeftColor",themeKey:"palette"}),by=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=qp(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:cc(e,r)});return fi(t,t.borderRadius,n)}return null};by.propTypes={};by.filterProps=["borderRadius"];yy(fW,pW,mW,gW,vW,yW,bW,SW,xW,wW,by);const Sy=t=>{if(t.gap!==void 0&&t.gap!==null){const e=qp(t.theme,"spacing",8),n=r=>({gap:cc(e,r)});return fi(t,t.gap,n)}return null};Sy.propTypes={};Sy.filterProps=["gap"];const xy=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=qp(t.theme,"spacing",8),n=r=>({columnGap:cc(e,r)});return fi(t,t.columnGap,n)}return null};xy.propTypes={};xy.filterProps=["columnGap"];const wy=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=qp(t.theme,"spacing",8),n=r=>({rowGap:cc(e,r)});return fi(t,t.rowGap,n)}return null};wy.propTypes={};wy.filterProps=["rowGap"];const CW=Ot({prop:"gridColumn"}),EW=Ot({prop:"gridRow"}),TW=Ot({prop:"gridAutoFlow"}),RW=Ot({prop:"gridAutoColumns"}),kW=Ot({prop:"gridAutoRows"}),PW=Ot({prop:"gridTemplateColumns"}),_W=Ot({prop:"gridTemplateRows"}),AW=Ot({prop:"gridTemplateAreas"}),OW=Ot({prop:"gridArea"});yy(Sy,xy,wy,CW,EW,TW,RW,kW,PW,_W,AW,OW);function Uu(t,e){return e==="grey"?e:t}const DW=Ot({prop:"color",themeKey:"palette",transform:Uu}),IW=Ot({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Uu}),MW=Ot({prop:"backgroundColor",themeKey:"palette",transform:Uu});yy(DW,IW,MW);function ki(t){return t<=1&&t!==0?`${t*100}%`:t}const NW=Ot({prop:"width",transform:ki}),WE=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i,s;return{maxWidth:((r=t.theme)==null||(i=r.breakpoints)==null||(s=i.values)==null?void 0:s[n])||zE[n]||ki(n)}};return fi(t,t.maxWidth,e)}return null};WE.filterProps=["maxWidth"];const FW=Ot({prop:"minWidth",transform:ki}),$W=Ot({prop:"height",transform:ki}),LW=Ot({prop:"maxHeight",transform:ki}),BW=Ot({prop:"minHeight",transform:ki});Ot({prop:"size",cssProperty:"width",transform:ki});Ot({prop:"size",cssProperty:"height",transform:ki});const jW=Ot({prop:"boxSizing"});yy(NW,WE,FW,$W,LW,BW,jW);const qW={border:{themeKey:"borders",transform:Xs},borderTop:{themeKey:"borders",transform:Xs},borderRight:{themeKey:"borders",transform:Xs},borderBottom:{themeKey:"borders",transform:Xs},borderLeft:{themeKey:"borders",transform:Xs},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:by},color:{themeKey:"palette",transform:Uu},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Uu},backgroundColor:{themeKey:"palette",transform:Uu},p:{style:yn},pt:{style:yn},pr:{style:yn},pb:{style:yn},pl:{style:yn},px:{style:yn},py:{style:yn},padding:{style:yn},paddingTop:{style:yn},paddingRight:{style:yn},paddingBottom:{style:yn},paddingLeft:{style:yn},paddingX:{style:yn},paddingY:{style:yn},paddingInline:{style:yn},paddingInlineStart:{style:yn},paddingInlineEnd:{style:yn},paddingBlock:{style:yn},paddingBlockStart:{style:yn},paddingBlockEnd:{style:yn},m:{style:vn},mt:{style:vn},mr:{style:vn},mb:{style:vn},ml:{style:vn},mx:{style:vn},my:{style:vn},margin:{style:vn},marginTop:{style:vn},marginRight:{style:vn},marginBottom:{style:vn},marginLeft:{style:vn},marginX:{style:vn},marginY:{style:vn},marginInline:{style:vn},marginInlineStart:{style:vn},marginInlineEnd:{style:vn},marginBlock:{style:vn},marginBlockStart:{style:vn},marginBlockEnd:{style:vn},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Sy},rowGap:{style:wy},columnGap:{style:xy},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ki},maxWidth:{style:WE},minWidth:{transform:ki},height:{transform:ki},maxHeight:{transform:ki},minHeight:{transform:ki},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},Cy=qW;function zW(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function HW(t,e){return typeof t=="function"?t(e):t}function UW(){function t(n,r,i,s){const a={[n]:r,theme:i},o=s[n];if(!o)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:d}=o;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const h=vy(i,c)||{};return d?d(a):fi(a,r,f=>{let m=O0(h,u,f);return f===m&&typeof f=="string"&&(m=O0(h,u,`${n}${f==="default"?"":ye(f)}`,f)),l===!1?m:{[l]:m}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const a=(r=s.unstable_sxConfig)!=null?r:Cy;function o(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const u=rN(s.breakpoints),d=Object.keys(u);let h=u;return Object.keys(c).forEach(p=>{const f=HW(c[p],s);if(f!=null)if(typeof f=="object")if(a[p])h=ff(h,t(p,f,s,a));else{const m=fi({theme:s},f,g=>({[p]:g}));zW(m,f)?h[p]=e({sx:f,theme:s}):h=ff(h,m)}else h=ff(h,t(p,f,s,a))}),iN(d,h)}return Array.isArray(i)?i.map(o):o(i)}return e}const aN=UW();aN.filterProps=["sx"];const Ey=aN,VW=["breakpoints","palette","spacing","shape"];function zp(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,a=pe(t,VW),o=tW(n),l=hW(i);let c=li({breakpoints:o,direction:"ltr",components:{},palette:$({mode:"light"},r),spacing:l,shape:$({},rW,s)},a);return c=e.reduce((u,d)=>li(u,d),c),c.unstable_sxConfig=$({},Cy,a==null?void 0:a.unstable_sxConfig),c.unstable_sx=function(d){return Ey({sx:d,theme:this})},c}function WW(t){return Object.keys(t).length===0}function oN(t=null){const e=P.useContext(jE);return!e||WW(e)?t:e}const GW=zp();function Ty(t=GW){return oN(t)}function KW({styles:t,themeId:e,defaultTheme:n={}}){const r=Ty(n),i=typeof t=="function"?t(e&&r[e]||r):t;return S.jsx(XV,{styles:i})}const YW=["sx"],JW=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:Cy;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function Ry(t){const{sx:e}=t,n=pe(t,YW),{systemProps:r,otherProps:i}=JW(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...a)=>{const o=e(...a);return Al(o)?$({},r,o):r}:s=$({},r,e),$({},i,{sx:s})}function lN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=lN(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function ge(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=lN(t))&&(r&&(r+=" "),r+=e);return r}const XW=["className","component"];function QW(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,s=nN("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(Ey);return P.forwardRef(function(l,c){const u=Ty(n),d=Ry(l),{className:h,component:p="div"}=d,f=pe(d,XW);return S.jsx(s,$({as:p,ref:c,className:ge(h,i?i(r):r),theme:e&&u[e]||u},f))})}const ZW=["variant"];function X4(t){return t.length===0}function cN(t){const{variant:e}=t,n=pe(t,ZW);let r=e||"";return Object.keys(n).sort().forEach(i=>{i==="color"?r+=X4(r)?t[i]:ye(t[i]):r+=`${X4(r)?i:ye(i)}${ye(t[i].toString())}`}),r}const eG=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function tG(t){return Object.keys(t).length===0}function nG(t){return typeof t=="string"&&t.charCodeAt(0)>96}const rG=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,iG=(t,e)=>{let n=[];e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants);const r={};return n.forEach(i=>{const s=cN(i.props);r[s]=i.style}),r},sG=(t,e,n,r)=>{var i,s;const{ownerState:a={}}=t,o=[],l=n==null||(i=n.components)==null||(s=i[r])==null?void 0:s.variants;return l&&l.forEach(c=>{let u=!0;Object.keys(c.props).forEach(d=>{a[d]!==c.props[d]&&t[d]!==c.props[d]&&(u=!1)}),u&&o.push(e[cN(c.props)])}),o};function pf(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const aG=zp();function Ch({defaultTheme:t,theme:e,themeId:n}){return tG(e)?t:e[n]||e}function uN(t={}){const{themeId:e,defaultTheme:n=aG,rootShouldForwardProp:r=pf,slotShouldForwardProp:i=pf}=t,s=a=>Ey($({},a,{theme:Ch($({},a,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(a,o={})=>{QV(a,C=>C.filter(R=>!(R!=null&&R.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:u,skipSx:d,overridesResolver:h}=o,p=pe(o,eG),f=u!==void 0?u:c&&c!=="Root"||!1,m=d||!1;let g,v=pf;c==="Root"?v=r:c?v=i:nG(a)&&(v=void 0);const y=nN(a,$({shouldForwardProp:v,label:g},p)),b=(C,...R)=>{const w=R?R.map(_=>typeof _=="function"&&_.__emotion_real!==_?D=>_($({},D,{theme:Ch($({},D,{defaultTheme:n,themeId:e}))})):_):[];let E=C;l&&h&&w.push(_=>{const D=Ch($({},_,{defaultTheme:n,themeId:e})),I=rG(l,D);if(I){const M={};return Object.entries(I).forEach(([A,O])=>{M[A]=typeof O=="function"?O($({},_,{theme:D})):O}),h(_,M)}return null}),l&&!f&&w.push(_=>{const D=Ch($({},_,{defaultTheme:n,themeId:e}));return sG(_,iG(l,D),D,l)}),m||w.push(s);const k=w.length-R.length;if(Array.isArray(C)&&k>0){const _=new Array(k).fill("");E=[...C,..._],E.raw=[...C.raw,..._]}else typeof C=="function"&&C.__emotion_real!==C&&(E=_=>C($({},_,{theme:Ch($({},_,{defaultTheme:n,themeId:e}))})));return y(E,...w)};return y.withConfig&&(b.withConfig=y.withConfig),b}}const oG=uN(),dN=oG;function lG(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:OE(e.components[n].defaultProps,r)}function GE({props:t,name:e,defaultTheme:n,themeId:r}){let i=Ty(n);return r&&(i=i[r]||i),lG({theme:i,name:e,props:t})}function KE(t,e=0,n=1){return Math.min(Math.max(e,t),n)}function cG(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function uc(t){if(t.type)return t;if(t.charAt(0)==="#")return uc(cG(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(tl(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(tl(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}function ky(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function uG(t){t=uc(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),a=(c,u=(c+n/30)%12)=>i-s*Math.max(Math.min(u-3,9-u,1),-1);let o="rgb";const l=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return t.type==="hsla"&&(o+="a",l.push(e[3])),ky({type:o,values:l})}function Q4(t){t=uc(t);let e=t.type==="hsl"||t.type==="hsla"?uc(uG(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function dG(t,e){const n=Q4(t),r=Q4(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function xt(t,e){return t=uc(t),e=KE(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,ky(t)}function YE(t,e){if(t=uc(t),e=KE(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return ky(t)}function JE(t,e){if(t=uc(t),e=KE(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return ky(t)}const hG=["className","component","disableGutters","fixed","maxWidth","classes"],fG=zp(),pG=dN("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${ye(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),mG=t=>GE({props:t,name:"MuiContainer",defaultTheme:fG}),gG=(t,e)=>{const n=l=>Fe(e,l),{classes:r,fixed:i,disableGutters:s,maxWidth:a}=t,o={root:["root",a&&`maxWidth${ye(String(a))}`,i&&"fixed",s&&"disableGutters"]};return Le(o,n,r)};function vG(t={}){const{createStyledComponent:e=pG,useThemeProps:n=mG,componentName:r="MuiContainer"}=t,i=e(({theme:a,ownerState:o})=>$({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!o.disableGutters&&{paddingLeft:a.spacing(2),paddingRight:a.spacing(2),[a.breakpoints.up("sm")]:{paddingLeft:a.spacing(3),paddingRight:a.spacing(3)}}),({theme:a,ownerState:o})=>o.fixed&&Object.keys(a.breakpoints.values).reduce((l,c)=>{const u=c,d=a.breakpoints.values[u];return d!==0&&(l[a.breakpoints.up(u)]={maxWidth:`${d}${a.breakpoints.unit}`}),l},{}),({theme:a,ownerState:o})=>$({},o.maxWidth==="xs"&&{[a.breakpoints.up("xs")]:{maxWidth:Math.max(a.breakpoints.values.xs,444)}},o.maxWidth&&o.maxWidth!=="xs"&&{[a.breakpoints.up(o.maxWidth)]:{maxWidth:`${a.breakpoints.values[o.maxWidth]}${a.breakpoints.unit}`}}));return P.forwardRef(function(o,l){const c=n(o),{className:u,component:d="div",disableGutters:h=!1,fixed:p=!1,maxWidth:f="lg"}=c,m=pe(c,hG),g=$({},c,{component:d,disableGutters:h,fixed:p,maxWidth:f}),v=gG(g,r);return S.jsx(i,$({as:d,ownerState:g,className:ge(v.root,u),ref:l},m))})}const yG=["component","direction","spacing","divider","children","className","useFlexGap"],bG=zp(),SG=dN("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function xG(t){return GE({props:t,name:"MuiStack",defaultTheme:bG})}function wG(t,e){const n=P.Children.toArray(t).filter(Boolean);return n.reduce((r,i,s)=>(r.push(i),s<n.length-1&&r.push(P.cloneElement(e,{key:`separator-${s}`})),r),[])}const CG=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],EG=({ownerState:t,theme:e})=>{let n=$({display:"flex",flexDirection:"column"},fi({theme:e},Gl({values:t.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r})));if(t.spacing){const r=VE(e),i=Object.keys(e.breakpoints.values).reduce((l,c)=>((typeof t.spacing=="object"&&t.spacing[c]!=null||typeof t.direction=="object"&&t.direction[c]!=null)&&(l[c]=!0),l),{}),s=Gl({values:t.direction,base:i}),a=Gl({values:t.spacing,base:i});typeof s=="object"&&Object.keys(s).forEach((l,c,u)=>{if(!s[l]){const h=c>0?s[u[c-1]]:"column";s[l]=h}}),n=li(n,fi({theme:e},a,(l,c)=>t.useFlexGap?{gap:cc(r,l)}:{"& > :not(style) + :not(style)":{margin:0,[`margin${CG(c?s[c]:t.direction)}`]:cc(r,l)}}))}return n=iW(e.breakpoints,n),n};function TG(t={}){const{createStyledComponent:e=SG,useThemeProps:n=xG,componentName:r="MuiStack"}=t,i=()=>Le({root:["root"]},l=>Fe(r,l),{}),s=e(EG);return P.forwardRef(function(l,c){const u=n(l),d=Ry(u),{component:h="div",direction:p="column",spacing:f=0,divider:m,children:g,className:v,useFlexGap:y=!1}=d,b=pe(d,yG),C={direction:p,spacing:f,useFlexGap:y},R=i();return S.jsx(s,$({as:h,ownerState:C,ref:c,className:ge(R.root,v)},b,{children:m?wG(g,m):g}))})}function RG(t,e){return $({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const kG=["mode","contrastThreshold","tonalOffset"],Z4={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Xf.white,default:Xf.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},X1={text:{primary:Xf.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Xf.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function e_(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=JE(t.main,i):e==="dark"&&(t.dark=YE(t.main,s)))}function PG(t="light"){return t==="dark"?{main:Xc[200],light:Xc[50],dark:Xc[400]}:{main:Xc[700],light:Xc[400],dark:Xc[800]}}function _G(t="light"){return t==="dark"?{main:Jc[200],light:Jc[50],dark:Jc[400]}:{main:Jc[500],light:Jc[300],dark:Jc[700]}}function AG(t="light"){return t==="dark"?{main:Yc[500],light:Yc[300],dark:Yc[700]}:{main:Yc[700],light:Yc[400],dark:Yc[800]}}function OG(t="light"){return t==="dark"?{main:Qc[400],light:Qc[300],dark:Qc[700]}:{main:Qc[700],light:Qc[500],dark:Qc[900]}}function DG(t="light"){return t==="dark"?{main:Zc[400],light:Zc[300],dark:Zc[700]}:{main:Zc[800],light:Zc[500],dark:Zc[900]}}function IG(t="light"){return t==="dark"?{main:xh[400],light:xh[300],dark:xh[700]}:{main:"#ed6c02",light:xh[500],dark:xh[900]}}function MG(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=pe(t,kG),s=t.primary||PG(e),a=t.secondary||_G(e),o=t.error||AG(e),l=t.info||OG(e),c=t.success||DG(e),u=t.warning||IG(e);function d(m){return dG(m,X1.text.primary)>=n?X1.text.primary:Z4.text.primary}const h=({color:m,name:g,mainShade:v=500,lightShade:y=300,darkShade:b=700})=>{if(m=$({},m),!m.main&&m[v]&&(m.main=m[v]),!m.hasOwnProperty("main"))throw new Error(tl(11,g?` (${g})`:"",v));if(typeof m.main!="string")throw new Error(tl(12,g?` (${g})`:"",JSON.stringify(m.main)));return e_(m,"light",y,r),e_(m,"dark",b,r),m.contrastText||(m.contrastText=d(m.main)),m},p={dark:X1,light:Z4};return li($({common:$({},Xf),mode:e,primary:h({color:s,name:"primary"}),secondary:h({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:o,name:"error"}),warning:h({color:u,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:c,name:"success"}),grey:wU,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:r},p[e]),i)}const NG=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function FG(t){return Math.round(t*1e5)/1e5}const t_={textTransform:"uppercase"},n_='"Roboto", "Helvetica", "Arial", sans-serif';function $G(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=n_,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:a=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:d}=n,h=pe(n,NG),p=i/14,f=d||(v=>`${v/c*p}rem`),m=(v,y,b,C,R)=>$({fontFamily:r,fontWeight:v,fontSize:f(y),lineHeight:b},r===n_?{letterSpacing:`${FG(C/y)}em`}:{},R,u),g={h1:m(s,96,1.167,-1.5),h2:m(s,60,1.2,-.5),h3:m(a,48,1.167,0),h4:m(a,34,1.235,.25),h5:m(a,24,1.334,0),h6:m(o,20,1.6,.15),subtitle1:m(a,16,1.75,.15),subtitle2:m(o,14,1.57,.1),body1:m(a,16,1.5,.15),body2:m(a,14,1.43,.15),button:m(o,14,1.75,.4,t_),caption:m(a,12,1.66,.4),overline:m(a,12,2.66,1,t_),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return li($({htmlFontSize:c,pxToRem:f,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:a,fontWeightMedium:o,fontWeightBold:l},g),h,{clone:!1})}const LG=.2,BG=.14,jG=.12;function Qt(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${LG})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${BG})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${jG})`].join(",")}const qG=["none",Qt(0,2,1,-1,0,1,1,0,0,1,3,0),Qt(0,3,1,-2,0,2,2,0,0,1,5,0),Qt(0,3,3,-2,0,3,4,0,0,1,8,0),Qt(0,2,4,-1,0,4,5,0,0,1,10,0),Qt(0,3,5,-1,0,5,8,0,0,1,14,0),Qt(0,3,5,-1,0,6,10,0,0,1,18,0),Qt(0,4,5,-2,0,7,10,1,0,2,16,1),Qt(0,5,5,-3,0,8,10,1,0,3,14,2),Qt(0,5,6,-3,0,9,12,1,0,3,16,2),Qt(0,6,6,-3,0,10,14,1,0,4,18,3),Qt(0,6,7,-4,0,11,15,1,0,4,20,3),Qt(0,7,8,-4,0,12,17,2,0,5,22,4),Qt(0,7,8,-4,0,13,19,2,0,5,24,4),Qt(0,7,9,-4,0,14,21,2,0,5,26,4),Qt(0,8,9,-5,0,15,22,2,0,6,28,5),Qt(0,8,10,-5,0,16,24,2,0,6,30,5),Qt(0,8,11,-5,0,17,26,2,0,6,32,5),Qt(0,9,11,-5,0,18,28,2,0,7,34,6),Qt(0,9,12,-6,0,19,29,2,0,7,36,6),Qt(0,10,13,-6,0,20,31,3,0,8,38,7),Qt(0,10,13,-6,0,21,33,3,0,8,40,7),Qt(0,10,14,-6,0,22,35,3,0,8,42,7),Qt(0,11,14,-7,0,23,36,3,0,9,44,8),Qt(0,11,15,-7,0,24,38,3,0,9,46,8)],zG=qG,HG=["duration","easing","delay"],UG={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},VG={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function r_(t){return`${Math.round(t)}ms`}function WG(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function GG(t){const e=$({},UG,t.easing),n=$({},VG,t.duration);return $({getAutoHeightDuration:WG,create:(i=["all"],s={})=>{const{duration:a=n.standard,easing:o=e.easeInOut,delay:l=0}=s;return pe(s,HG),(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof a=="string"?a:r_(a)} ${o} ${typeof l=="string"?l:r_(l)}`).join(",")}},t,{easing:e,duration:n})}const KG={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},YG=KG,JG=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function hN(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,a=pe(t,JG);if(t.vars)throw new Error(tl(18));const o=MG(r),l=zp(t);let c=li(l,{mixins:RG(l.breakpoints,n),palette:o,shadows:zG.slice(),typography:$G(o,s),transitions:GG(i),zIndex:$({},YG)});return c=li(c,a),c=e.reduce((u,d)=>li(u,d),c),c.unstable_sxConfig=$({},Cy,a==null?void 0:a.unstable_sxConfig),c.unstable_sx=function(d){return Ey({sx:d,theme:this})},c}const XG=hN(),Py=XG;function Ar(){const t=Ty(Py);return t[Bp]||t}function $e({props:t,name:e}){return GE({props:t,name:e,defaultTheme:Py,themeId:Bp})}const Gr=t=>pf(t)&&t!=="classes",QG=pf,ZG=uN({themeId:Bp,defaultTheme:Py,rootShouldForwardProp:Gr}),de=ZG,eK=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)},i_=eK;function dc(t){return typeof t=="string"}function Qh(t,e,n){return t===void 0||dc(t)?e:$({},e,{ownerState:$({},e.ownerState,n)})}const tK={disableDefaultClasses:!1},nK=P.createContext(tK);function fN(t){const{disableDefaultClasses:e}=P.useContext(nK);return n=>e?"":t(n)}function rK(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function qw(t,e){return typeof t=="function"?t(e):t}function s_(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function iK(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const p=ge(i==null?void 0:i.className,r==null?void 0:r.className,s,n==null?void 0:n.className),f=$({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),m=$({},n,i,r);return p.length>0&&(m.className=p),Object.keys(f).length>0&&(m.style=f),{props:m,internalRef:void 0}}const a=rK($({},i,r)),o=s_(r),l=s_(i),c=e(a),u=ge(c==null?void 0:c.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),d=$({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),h=$({},c,n,l,o);return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}}const sK=["elementType","externalSlotProps","ownerState"];function va(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i}=t,s=pe(t,sK),a=qw(r,i),{props:o,internalRef:l}=iK($({},s,{externalSlotProps:a})),c=gn(l,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return Qh(n,$({},o,{ref:c}),i)}function aK(t){const{badgeContent:e,invisible:n=!1,max:r=99,showZero:i=!1}=t,s=L6({badgeContent:e,max:r});let a=n;n===!1&&e===0&&!i&&(a=!0);const{badgeContent:o,max:l=r}=a?s:t,c=o&&Number(o)>l?`${l}+`:o;return{badgeContent:o,invisible:a,max:l,displayValue:c}}const oK=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function lK(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function cK(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function uK(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||cK(t))}function dK(t){const e=[],n=[];return Array.from(t.querySelectorAll(oK)).forEach((r,i)=>{const s=lK(r);s===-1||!uK(r)||(s===0?e.push(r):n.push({documentOrder:i,tabIndex:s,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function hK(){return!0}function fK(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=dK,isEnabled:a=hK,open:o}=t,l=P.useRef(!1),c=P.useRef(null),u=P.useRef(null),d=P.useRef(null),h=P.useRef(null),p=P.useRef(!1),f=P.useRef(null),m=gn(e.ref,f),g=P.useRef(null);P.useEffect(()=>{!o||!f.current||(p.current=!n)},[n,o]),P.useEffect(()=>{if(!o||!f.current)return;const b=yr(f.current);return f.current.contains(b.activeElement)||(f.current.hasAttribute("tabIndex")||f.current.setAttribute("tabIndex","-1"),p.current&&f.current.focus()),()=>{i||(d.current&&d.current.focus&&(l.current=!0,d.current.focus()),d.current=null)}},[o]),P.useEffect(()=>{if(!o||!f.current)return;const b=yr(f.current),C=E=>{const{current:k}=f;if(k!==null){if(!b.hasFocus()||r||!a()||l.current){l.current=!1;return}if(!k.contains(b.activeElement)){if(E&&h.current!==E.target||b.activeElement!==h.current)h.current=null;else if(h.current!==null)return;if(!p.current)return;let D=[];if((b.activeElement===c.current||b.activeElement===u.current)&&(D=s(f.current)),D.length>0){var T,_;const I=!!((T=g.current)!=null&&T.shiftKey&&((_=g.current)==null?void 0:_.key)==="Tab"),M=D[0],A=D[D.length-1];typeof M!="string"&&typeof A!="string"&&(I?A.focus():M.focus())}else k.focus()}}},R=E=>{g.current=E,!(r||!a()||E.key!=="Tab")&&b.activeElement===f.current&&E.shiftKey&&(l.current=!0,u.current&&u.current.focus())};b.addEventListener("focusin",C),b.addEventListener("keydown",R,!0);const w=setInterval(()=>{b.activeElement&&b.activeElement.tagName==="BODY"&&C(null)},50);return()=>{clearInterval(w),b.removeEventListener("focusin",C),b.removeEventListener("keydown",R,!0)}},[n,r,i,a,o,s]);const v=b=>{d.current===null&&(d.current=b.relatedTarget),p.current=!0,h.current=b.target;const C=e.props.onFocus;C&&C(b)},y=b=>{d.current===null&&(d.current=b.relatedTarget),p.current=!0};return S.jsxs(P.Fragment,{children:[S.jsx("div",{tabIndex:o?0:-1,onFocus:y,ref:c,"data-testid":"sentinelStart"}),P.cloneElement(e,{ref:m,onFocus:v}),S.jsx("div",{tabIndex:o?0:-1,onFocus:y,ref:u,"data-testid":"sentinelEnd"})]})}var ci="top",ls="bottom",cs="right",ui="left",XE="auto",Hp=[ci,ls,cs,ui],fd="start",tp="end",pK="clippingParents",pN="viewport",Eh="popper",mK="reference",a_=Hp.reduce(function(t,e){return t.concat([e+"-"+fd,e+"-"+tp])},[]),mN=[].concat(Hp,[XE]).reduce(function(t,e){return t.concat([e,e+"-"+fd,e+"-"+tp])},[]),gK="beforeRead",vK="read",yK="afterRead",bK="beforeMain",SK="main",xK="afterMain",wK="beforeWrite",CK="write",EK="afterWrite",TK=[gK,vK,yK,bK,SK,xK,wK,CK,EK];function ya(t){return t?(t.nodeName||"").toLowerCase():null}function Mi(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function hc(t){var e=Mi(t).Element;return t instanceof e||t instanceof Element}function es(t){var e=Mi(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function QE(t){if(typeof ShadowRoot>"u")return!1;var e=Mi(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function RK(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!es(s)||!ya(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(a){var o=i[a];o===!1?s.removeAttribute(a):s.setAttribute(a,o===!0?"":o)}))})}function kK(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),o=a.reduce(function(l,c){return l[c]="",l},{});!es(i)||!ya(i)||(Object.assign(i.style,o),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const PK={name:"applyStyles",enabled:!0,phase:"write",fn:RK,effect:kK,requires:["computeStyles"]};function la(t){return t.split("-")[0]}var Kl=Math.max,D0=Math.min,pd=Math.round;function zw(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function gN(){return!/^((?!chrome|android).)*safari/i.test(zw())}function md(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&es(t)&&(i=t.offsetWidth>0&&pd(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&pd(r.height)/t.offsetHeight||1);var a=hc(t)?Mi(t):window,o=a.visualViewport,l=!gN()&&n,c=(r.left+(l&&o?o.offsetLeft:0))/i,u=(r.top+(l&&o?o.offsetTop:0))/s,d=r.width/i,h=r.height/s;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function ZE(t){var e=md(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function vN(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&QE(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function so(t){return Mi(t).getComputedStyle(t)}function _K(t){return["table","td","th"].indexOf(ya(t))>=0}function hl(t){return((hc(t)?t.ownerDocument:t.document)||window.document).documentElement}function _y(t){return ya(t)==="html"?t:t.assignedSlot||t.parentNode||(QE(t)?t.host:null)||hl(t)}function o_(t){return!es(t)||so(t).position==="fixed"?null:t.offsetParent}function AK(t){var e=/firefox/i.test(zw()),n=/Trident/i.test(zw());if(n&&es(t)){var r=so(t);if(r.position==="fixed")return null}var i=_y(t);for(QE(i)&&(i=i.host);es(i)&&["html","body"].indexOf(ya(i))<0;){var s=so(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Up(t){for(var e=Mi(t),n=o_(t);n&&_K(n)&&so(n).position==="static";)n=o_(n);return n&&(ya(n)==="html"||ya(n)==="body"&&so(n).position==="static")?e:n||AK(t)||e}function eT(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function mf(t,e,n){return Kl(t,D0(e,n))}function OK(t,e,n){var r=mf(t,e,n);return r>n?n:r}function yN(){return{top:0,right:0,bottom:0,left:0}}function bN(t){return Object.assign({},yN(),t)}function SN(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var DK=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,bN(typeof e!="number"?e:SN(e,Hp))};function IK(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,a=n.modifiersData.popperOffsets,o=la(n.placement),l=eT(o),c=[ui,cs].indexOf(o)>=0,u=c?"height":"width";if(!(!s||!a)){var d=DK(i.padding,n),h=ZE(s),p=l==="y"?ci:ui,f=l==="y"?ls:cs,m=n.rects.reference[u]+n.rects.reference[l]-a[l]-n.rects.popper[u],g=a[l]-n.rects.reference[l],v=Up(s),y=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,b=m/2-g/2,C=d[p],R=y-h[u]-d[f],w=y/2-h[u]/2+b,E=mf(C,w,R),k=l;n.modifiersData[r]=(e={},e[k]=E,e.centerOffset=E-w,e)}}function MK(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||vN(e.elements.popper,i)&&(e.elements.arrow=i))}const NK={name:"arrow",enabled:!0,phase:"main",fn:IK,effect:MK,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function gd(t){return t.split("-")[1]}var FK={top:"auto",right:"auto",bottom:"auto",left:"auto"};function $K(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:pd(n*i)/i||0,y:pd(r*i)/i||0}}function l_(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,a=t.offsets,o=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=a.x,p=h===void 0?0:h,f=a.y,m=f===void 0?0:f,g=typeof u=="function"?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),b=ui,C=ci,R=window;if(c){var w=Up(n),E="clientHeight",k="clientWidth";if(w===Mi(n)&&(w=hl(n),so(w).position!=="static"&&o==="absolute"&&(E="scrollHeight",k="scrollWidth")),w=w,i===ci||(i===ui||i===cs)&&s===tp){C=ls;var T=d&&w===R&&R.visualViewport?R.visualViewport.height:w[E];m-=T-r.height,m*=l?1:-1}if(i===ui||(i===ci||i===ls)&&s===tp){b=cs;var _=d&&w===R&&R.visualViewport?R.visualViewport.width:w[k];p-=_-r.width,p*=l?1:-1}}var D=Object.assign({position:o},c&&FK),I=u===!0?$K({x:p,y:m},Mi(n)):{x:p,y:m};if(p=I.x,m=I.y,l){var M;return Object.assign({},D,(M={},M[C]=y?"0":"",M[b]=v?"0":"",M.transform=(R.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",M))}return Object.assign({},D,(e={},e[C]=y?m+"px":"",e[b]=v?p+"px":"",e.transform="",e))}function LK(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,a=s===void 0?!0:s,o=n.roundOffsets,l=o===void 0?!0:o,c={placement:la(e.placement),variation:gd(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,l_(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,l_(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const BK={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:LK,data:{}};var Lm={passive:!0};function jK(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,a=r.resize,o=a===void 0?!0:a,l=Mi(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Lm)}),o&&l.addEventListener("resize",n.update,Lm),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Lm)}),o&&l.removeEventListener("resize",n.update,Lm)}}const qK={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:jK,data:{}};var zK={left:"right",right:"left",bottom:"top",top:"bottom"};function Og(t){return t.replace(/left|right|bottom|top/g,function(e){return zK[e]})}var HK={start:"end",end:"start"};function c_(t){return t.replace(/start|end/g,function(e){return HK[e]})}function tT(t){var e=Mi(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function nT(t){return md(hl(t)).left+tT(t).scrollLeft}function UK(t,e){var n=Mi(t),r=hl(t),i=n.visualViewport,s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;var c=gN();(c||!c&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o+nT(t),y:l}}function VK(t){var e,n=hl(t),r=tT(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Kl(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Kl(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-r.scrollLeft+nT(t),l=-r.scrollTop;return so(i||n).direction==="rtl"&&(o+=Kl(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:a,x:o,y:l}}function rT(t){var e=so(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function xN(t){return["html","body","#document"].indexOf(ya(t))>=0?t.ownerDocument.body:es(t)&&rT(t)?t:xN(_y(t))}function gf(t,e){var n;e===void 0&&(e=[]);var r=xN(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Mi(r),a=i?[s].concat(s.visualViewport||[],rT(r)?r:[]):r,o=e.concat(a);return i?o:o.concat(gf(_y(a)))}function Hw(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function WK(t,e){var n=md(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function u_(t,e,n){return e===pN?Hw(UK(t,n)):hc(e)?WK(e,n):Hw(VK(hl(t)))}function GK(t){var e=gf(_y(t)),n=["absolute","fixed"].indexOf(so(t).position)>=0,r=n&&es(t)?Up(t):t;return hc(r)?e.filter(function(i){return hc(i)&&vN(i,r)&&ya(i)!=="body"}):[]}function KK(t,e,n,r){var i=e==="clippingParents"?GK(t):[].concat(e),s=[].concat(i,[n]),a=s[0],o=s.reduce(function(l,c){var u=u_(t,c,r);return l.top=Kl(u.top,l.top),l.right=D0(u.right,l.right),l.bottom=D0(u.bottom,l.bottom),l.left=Kl(u.left,l.left),l},u_(t,a,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function wN(t){var e=t.reference,n=t.element,r=t.placement,i=r?la(r):null,s=r?gd(r):null,a=e.x+e.width/2-n.width/2,o=e.y+e.height/2-n.height/2,l;switch(i){case ci:l={x:a,y:e.y-n.height};break;case ls:l={x:a,y:e.y+e.height};break;case cs:l={x:e.x+e.width,y:o};break;case ui:l={x:e.x-n.width,y:o};break;default:l={x:e.x,y:e.y}}var c=i?eT(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case fd:l[c]=l[c]-(e[u]/2-n[u]/2);break;case tp:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function np(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,a=s===void 0?t.strategy:s,o=n.boundary,l=o===void 0?pK:o,c=n.rootBoundary,u=c===void 0?pN:c,d=n.elementContext,h=d===void 0?Eh:d,p=n.altBoundary,f=p===void 0?!1:p,m=n.padding,g=m===void 0?0:m,v=bN(typeof g!="number"?g:SN(g,Hp)),y=h===Eh?mK:Eh,b=t.rects.popper,C=t.elements[f?y:h],R=KK(hc(C)?C:C.contextElement||hl(t.elements.popper),l,u,a),w=md(t.elements.reference),E=wN({reference:w,element:b,strategy:"absolute",placement:i}),k=Hw(Object.assign({},b,E)),T=h===Eh?k:w,_={top:R.top-T.top+v.top,bottom:T.bottom-R.bottom+v.bottom,left:R.left-T.left+v.left,right:T.right-R.right+v.right},D=t.modifiersData.offset;if(h===Eh&&D){var I=D[i];Object.keys(_).forEach(function(M){var A=[cs,ls].indexOf(M)>=0?1:-1,O=[ci,ls].indexOf(M)>=0?"y":"x";_[M]+=I[O]*A})}return _}function YK(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,a=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?mN:l,u=gd(r),d=u?o?a_:a_.filter(function(f){return gd(f)===u}):Hp,h=d.filter(function(f){return c.indexOf(f)>=0});h.length===0&&(h=d);var p=h.reduce(function(f,m){return f[m]=np(t,{placement:m,boundary:i,rootBoundary:s,padding:a})[la(m)],f},{});return Object.keys(p).sort(function(f,m){return p[f]-p[m]})}function JK(t){if(la(t)===XE)return[];var e=Og(t);return[c_(t),e,c_(e)]}function XK(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,a=n.altAxis,o=a===void 0?!0:a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=p===void 0?!0:p,m=n.allowedAutoPlacements,g=e.options.placement,v=la(g),y=v===g,b=l||(y||!f?[Og(g)]:JK(g)),C=[g].concat(b).reduce(function(W,J){return W.concat(la(J)===XE?YK(e,{placement:J,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:m}):J)},[]),R=e.rects.reference,w=e.rects.popper,E=new Map,k=!0,T=C[0],_=0;_<C.length;_++){var D=C[_],I=la(D),M=gd(D)===fd,A=[ci,ls].indexOf(I)>=0,O=A?"width":"height",L=np(e,{placement:D,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),F=A?M?cs:ui:M?ls:ci;R[O]>w[O]&&(F=Og(F));var B=Og(F),j=[];if(s&&j.push(L[I]<=0),o&&j.push(L[F]<=0,L[B]<=0),j.every(function(W){return W})){T=D,k=!1;break}E.set(D,j)}if(k)for(var q=f?3:1,V=function(J){var K=C.find(function(Q){var re=E.get(Q);if(re)return re.slice(0,J).every(function(G){return G})});if(K)return T=K,"break"},U=q;U>0;U--){var ne=V(U);if(ne==="break")break}e.placement!==T&&(e.modifiersData[r]._skip=!0,e.placement=T,e.reset=!0)}}const QK={name:"flip",enabled:!0,phase:"main",fn:XK,requiresIfExists:["offset"],data:{_skip:!1}};function d_(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function h_(t){return[ci,cs,ls,ui].some(function(e){return t[e]>=0})}function ZK(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,a=np(e,{elementContext:"reference"}),o=np(e,{altBoundary:!0}),l=d_(a,r),c=d_(o,i,s),u=h_(l),d=h_(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const eY={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ZK};function tY(t,e,n){var r=la(t),i=[ui,ci].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=s[0],o=s[1];return a=a||0,o=(o||0)*i,[ui,cs].indexOf(r)>=0?{x:o,y:a}:{x:a,y:o}}function nY(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,a=mN.reduce(function(u,d){return u[d]=tY(d,e.rects,s),u},{}),o=a[e.placement],l=o.x,c=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=a}const rY={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:nY};function iY(t){var e=t.state,n=t.name;e.modifiersData[n]=wN({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const sY={name:"popperOffsets",enabled:!0,phase:"read",fn:iY,data:{}};function aY(t){return t==="x"?"y":"x"}function oY(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,a=n.altAxis,o=a===void 0?!1:a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,p=h===void 0?!0:h,f=n.tetherOffset,m=f===void 0?0:f,g=np(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=la(e.placement),y=gd(e.placement),b=!y,C=eT(v),R=aY(C),w=e.modifiersData.popperOffsets,E=e.rects.reference,k=e.rects.popper,T=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,_=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),D=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(w){if(s){var M,A=C==="y"?ci:ui,O=C==="y"?ls:cs,L=C==="y"?"height":"width",F=w[C],B=F+g[A],j=F-g[O],q=p?-k[L]/2:0,V=y===fd?E[L]:k[L],U=y===fd?-k[L]:-E[L],ne=e.elements.arrow,W=p&&ne?ZE(ne):{width:0,height:0},J=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:yN(),K=J[A],Q=J[O],re=mf(0,E[L],W[L]),G=b?E[L]/2-q-re-K-_.mainAxis:V-re-K-_.mainAxis,ie=b?-E[L]/2+q+re+Q+_.mainAxis:U+re+Q+_.mainAxis,te=e.elements.arrow&&Up(e.elements.arrow),Z=te?C==="y"?te.clientTop||0:te.clientLeft||0:0,oe=(M=D==null?void 0:D[C])!=null?M:0,ue=F+G-oe-Z,me=F+ie-oe,H=mf(p?D0(B,ue):B,F,p?Kl(j,me):j);w[C]=H,I[C]=H-F}if(o){var Y,X=C==="x"?ci:ui,le=C==="x"?ls:cs,se=w[R],ae=R==="y"?"height":"width",ve=se+g[X],ke=se-g[le],Ee=[ci,ui].indexOf(v)!==-1,Oe=(Y=D==null?void 0:D[R])!=null?Y:0,De=Ee?ve:se-E[ae]-k[ae]-Oe+_.altAxis,He=Ee?se+E[ae]+k[ae]-Oe-_.altAxis:ke,_e=p&&Ee?OK(De,se,He):mf(p?De:ve,se,p?He:ke);w[R]=_e,I[R]=_e-se}e.modifiersData[r]=I}}const lY={name:"preventOverflow",enabled:!0,phase:"main",fn:oY,requiresIfExists:["offset"]};function cY(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function uY(t){return t===Mi(t)||!es(t)?tT(t):cY(t)}function dY(t){var e=t.getBoundingClientRect(),n=pd(e.width)/t.offsetWidth||1,r=pd(e.height)/t.offsetHeight||1;return n!==1||r!==1}function hY(t,e,n){n===void 0&&(n=!1);var r=es(e),i=es(e)&&dY(e),s=hl(e),a=md(t,i,n),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((ya(e)!=="body"||rT(s))&&(o=uY(e)),es(e)?(l=md(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=nT(s))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function fY(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(o){if(!n.has(o)){var l=e.get(o);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function pY(t){var e=fY(t);return TK.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function mY(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function gY(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var f_={placement:"bottom",modifiers:[],strategy:"absolute"};function p_(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function vY(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?f_:i;return function(o,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},f_,s),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},d=[],h=!1,p={state:u,setOptions:function(v){var y=typeof v=="function"?v(u.options):v;m(),u.options=Object.assign({},s,u.options,y),u.scrollParents={reference:hc(o)?gf(o):o.contextElement?gf(o.contextElement):[],popper:gf(l)};var b=pY(gY([].concat(r,u.options.modifiers)));return u.orderedModifiers=b.filter(function(C){return C.enabled}),f(),p.update()},forceUpdate:function(){if(!h){var v=u.elements,y=v.reference,b=v.popper;if(p_(y,b)){u.rects={reference:hY(y,Up(b),u.options.strategy==="fixed"),popper:ZE(b)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(_){return u.modifiersData[_.name]=Object.assign({},_.data)});for(var C=0;C<u.orderedModifiers.length;C++){if(u.reset===!0){u.reset=!1,C=-1;continue}var R=u.orderedModifiers[C],w=R.fn,E=R.options,k=E===void 0?{}:E,T=R.name;typeof w=="function"&&(u=w({state:u,options:k,name:T,instance:p})||u)}}}},update:mY(function(){return new Promise(function(g){p.forceUpdate(),g(u)})}),destroy:function(){m(),h=!0}};if(!p_(o,l))return p;p.setOptions(c).then(function(g){!h&&c.onFirstUpdate&&c.onFirstUpdate(g)});function f(){u.orderedModifiers.forEach(function(g){var v=g.name,y=g.options,b=y===void 0?{}:y,C=g.effect;if(typeof C=="function"){var R=C({state:u,name:v,instance:p,options:b}),w=function(){};d.push(R||w)}})}function m(){d.forEach(function(g){return g()}),d=[]}return p}}var yY=[qK,sY,BK,PK,rY,QK,lY,NK,eY],bY=vY({defaultModifiers:yY});function SY(t){return typeof t=="function"?t():t}const xY=P.forwardRef(function(e,n){const{children:r,container:i,disablePortal:s=!1}=e,[a,o]=P.useState(null),l=gn(P.isValidElement(r)?r.ref:null,n);if(os(()=>{s||o(SY(i)||document.body)},[i,s]),os(()=>{if(a&&!s)return _0(n,a),()=>{_0(n,null)}},[n,a,s]),s){if(P.isValidElement(r)){const c={ref:l};return P.cloneElement(r,c)}return S.jsx(P.Fragment,{children:r})}return S.jsx(P.Fragment,{children:a&&tc.createPortal(r,a)})}),CN=xY;function wY(t){return Fe("MuiPopper",t)}Be("MuiPopper",["root"]);const CY=["anchorEl","children","component","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],EY=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function TY(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function Uw(t){return typeof t=="function"?t():t}function RY(t){return t.nodeType!==void 0}const kY=()=>Le({root:["root"]},fN(wY)),PY={},_Y=P.forwardRef(function(e,n){var r;const{anchorEl:i,children:s,component:a,direction:o,disablePortal:l,modifiers:c,open:u,placement:d,popperOptions:h,popperRef:p,slotProps:f={},slots:m={},TransitionProps:g}=e,v=pe(e,CY),y=P.useRef(null),b=gn(y,n),C=P.useRef(null),R=gn(C,p),w=P.useRef(R);os(()=>{w.current=R},[R]),P.useImperativeHandle(p,()=>C.current,[]);const E=TY(d,o),[k,T]=P.useState(E),[_,D]=P.useState(Uw(i));P.useEffect(()=>{C.current&&C.current.forceUpdate()}),P.useEffect(()=>{i&&D(Uw(i))},[i]),os(()=>{if(!_||!u)return;const L=j=>{T(j.placement)};let F=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:j})=>{L(j)}}];c!=null&&(F=F.concat(c)),h&&h.modifiers!=null&&(F=F.concat(h.modifiers));const B=bY(_,y.current,$({placement:E},h,{modifiers:F}));return w.current(B),()=>{B.destroy(),w.current(null)}},[_,l,c,u,h,E]);const I={placement:k};g!==null&&(I.TransitionProps=g);const M=kY(),A=(r=a??m.root)!=null?r:"div",O=va({elementType:A,externalSlotProps:f.root,externalForwardedProps:v,additionalProps:{role:"tooltip",ref:b},ownerState:e,className:M.root});return S.jsx(A,$({},O,{children:typeof s=="function"?s(I):s}))}),AY=P.forwardRef(function(e,n){const{anchorEl:r,children:i,container:s,direction:a="ltr",disablePortal:o=!1,keepMounted:l=!1,modifiers:c,open:u,placement:d="bottom",popperOptions:h=PY,popperRef:p,style:f,transition:m=!1,slotProps:g={},slots:v={}}=e,y=pe(e,EY),[b,C]=P.useState(!0),R=()=>{C(!1)},w=()=>{C(!0)};if(!l&&!u&&(!m||b))return null;let E;if(s)E=s;else if(r){const _=Uw(r);E=_&&RY(_)?yr(_).body:yr(null).body}const k=!u&&l&&(!m||b)?"none":void 0,T=m?{in:u,onEnter:R,onExited:w}:void 0;return S.jsx(CN,{disablePortal:o,container:E,children:S.jsx(_Y,$({anchorEl:r,direction:a,disablePortal:o,modifiers:c,ref:n,open:m?!b:u,placement:d,popperOptions:h,popperRef:p,slotProps:g,slots:v},y,{style:$({position:"fixed",top:0,left:0,display:k},f),TransitionProps:T,children:i}))})}),OY=AY;function DY(t){const e=yr(t);return e.body===t?as(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function vf(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function m_(t){return parseInt(as(t).getComputedStyle(t).paddingRight,10)||0}function IY(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName)!==-1,r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function g_(t,e,n,r,i){const s=[e,n,...r];[].forEach.call(t.children,a=>{const o=s.indexOf(a)===-1,l=!IY(a);o&&l&&vf(a,i)})}function Q1(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function MY(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(DY(r)){const a=F6(yr(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${m_(r)+a}px`;const o=yr(r).querySelectorAll(".mui-fixed");[].forEach.call(o,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${m_(l)+a}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=yr(r).body;else{const a=r.parentElement,o=as(r);s=(a==null?void 0:a.nodeName)==="HTML"&&o.getComputedStyle(a).overflowY==="scroll"?a:r}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:a,property:o})=>{s?a.style.setProperty(o,s):a.style.removeProperty(o)})}}function NY(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class FY{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&vf(e.modalRef,!1);const i=NY(n);g_(n,e.mount,e.modalRef,i,!0);const s=Q1(this.containers,a=>a.container===n);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=Q1(this.containers,s=>s.modals.indexOf(e)!==-1),i=this.containers[r];i.restore||(i.restore=MY(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=Q1(this.containers,a=>a.modals.indexOf(e)!==-1),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&vf(e.modalRef,n),g_(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const a=s.modals[s.modals.length-1];a.modalRef&&vf(a.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function $Y(t){return Fe("MuiModal",t)}Be("MuiModal",["root","hidden","backdrop"]);const LY=["children","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],BY=t=>{const{open:e,exited:n}=t;return Le({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},fN($Y))};function jY(t){return typeof t=="function"?t():t}function qY(t){return t?t.props.hasOwnProperty("in"):!1}const zY=new FY,HY=P.forwardRef(function(e,n){var r,i;const{children:s,closeAfterTransition:a=!1,component:o,container:l,disableAutoFocus:c=!1,disableEnforceFocus:u=!1,disableEscapeKeyDown:d=!1,disablePortal:h=!1,disableRestoreFocus:p=!1,disableScrollLock:f=!1,hideBackdrop:m=!1,keepMounted:g=!1,manager:v=zY,onBackdropClick:y,onClose:b,onKeyDown:C,open:R,onTransitionEnter:w,onTransitionExited:E,slotProps:k={},slots:T={}}=e,_=pe(e,LY),[D,I]=P.useState(!R),M=P.useRef({}),A=P.useRef(null),O=P.useRef(null),L=gn(O,n),F=qY(s),B=(r=e["aria-hidden"])!=null?r:!0,j=()=>yr(A.current),q=()=>(M.current.modalRef=O.current,M.current.mountNode=A.current,M.current),V=()=>{v.mount(q(),{disableScrollLock:f}),O.current&&(O.current.scrollTop=0)},U=Rs(()=>{const Y=jY(l)||j().body;v.add(q(),Y),O.current&&V()}),ne=P.useCallback(()=>v.isTopModal(q()),[v]),W=Rs(Y=>{A.current=Y,!(!Y||!O.current)&&(R&&ne()?V():vf(O.current,B))}),J=P.useCallback(()=>{v.remove(q(),B)},[v,B]);P.useEffect(()=>()=>{J()},[J]),P.useEffect(()=>{R?U():(!F||!a)&&J()},[R,J,F,a,U]);const K=$({},e,{closeAfterTransition:a,disableAutoFocus:c,disableEnforceFocus:u,disableEscapeKeyDown:d,disablePortal:h,disableRestoreFocus:p,disableScrollLock:f,exited:D,hideBackdrop:m,keepMounted:g}),Q=BY(K),re=()=>{I(!1),w&&w()},G=()=>{I(!0),E&&E(),a&&J()},ie=Y=>{Y.target===Y.currentTarget&&(y&&y(Y),b&&b(Y,"backdropClick"))},te=Y=>{C&&C(Y),!(Y.key!=="Escape"||!ne())&&(d||(Y.stopPropagation(),b&&b(Y,"escapeKeyDown")))},Z={};s.props.tabIndex===void 0&&(Z.tabIndex="-1"),F&&(Z.onEnter=P0(re,s.props.onEnter),Z.onExited=P0(G,s.props.onExited));const oe=(i=o??T.root)!=null?i:"div",ue=va({elementType:oe,externalSlotProps:k.root,externalForwardedProps:_,additionalProps:{ref:L,role:"presentation",onKeyDown:te},className:Q.root,ownerState:K}),me=T.backdrop,H=va({elementType:me,externalSlotProps:k.backdrop,additionalProps:{"aria-hidden":!0,onClick:ie,open:R},className:Q.backdrop,ownerState:K});return!g&&!R&&(!F||D)?null:S.jsx(CN,{ref:W,container:l,disablePortal:h,children:S.jsxs(oe,$({},ue,{children:[!m&&me?S.jsx(me,$({},H)):null,S.jsx(fK,{disableEnforceFocus:u,disableAutoFocus:c,disableRestoreFocus:p,isEnabled:ne,open:R,children:P.cloneElement(s,Z)})]}))})}),UY=HY,VY=["onChange","maxRows","minRows","style","value"];function Bm(t){return parseInt(t,10)||0}const WY={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function v_(t){return t==null||Object.keys(t).length===0||t.outerHeightStyle===0&&!t.overflow}const GY=P.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:s=1,style:a,value:o}=e,l=pe(e,VY),{current:c}=P.useRef(o!=null),u=P.useRef(null),d=gn(n,u),h=P.useRef(null),p=P.useRef(0),[f,m]=P.useState({outerHeightStyle:0}),g=P.useCallback(()=>{const R=u.current,E=as(R).getComputedStyle(R);if(E.width==="0px")return{outerHeightStyle:0};const k=h.current;k.style.width=E.width,k.value=R.value||e.placeholder||"x",k.value.slice(-1)===`
`&&(k.value+=" ");const T=E.boxSizing,_=Bm(E.paddingBottom)+Bm(E.paddingTop),D=Bm(E.borderBottomWidth)+Bm(E.borderTopWidth),I=k.scrollHeight;k.value="x";const M=k.scrollHeight;let A=I;s&&(A=Math.max(Number(s)*M,A)),i&&(A=Math.min(Number(i)*M,A)),A=Math.max(A,M);const O=A+(T==="border-box"?_+D:0),L=Math.abs(A-I)<=1;return{outerHeightStyle:O,overflow:L}},[i,s,e.placeholder]),v=(R,w)=>{const{outerHeightStyle:E,overflow:k}=w;return p.current<20&&(E>0&&Math.abs((R.outerHeightStyle||0)-E)>1||R.overflow!==k)?(p.current+=1,{overflow:k,outerHeightStyle:E}):R},y=P.useCallback(()=>{const R=g();v_(R)||m(w=>v(w,R))},[g]),b=()=>{const R=g();v_(R)||tc.flushSync(()=>{m(w=>v(w,R))})};P.useEffect(()=>{const R=oc(()=>{p.current=0,u.current&&b()});let w;const E=u.current,k=as(E);return k.addEventListener("resize",R),typeof ResizeObserver<"u"&&(w=new ResizeObserver(R),w.observe(E)),()=>{R.clear(),k.removeEventListener("resize",R),w&&w.disconnect()}}),os(()=>{y()}),P.useEffect(()=>{p.current=0},[o]);const C=R=>{p.current=0,c||y(),r&&r(R)};return S.jsxs(P.Fragment,{children:[S.jsx("textarea",$({value:o,onChange:C,ref:d,rows:s,style:$({height:f.outerHeightStyle,overflow:f.overflow?"hidden":void 0},a)},l)),S.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:h,tabIndex:-1,style:$({},WY.shadow,a,{padding:0})})]})}),EN=GY;function KY(t){return Fe("MuiSvgIcon",t)}Be("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const YY=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],JY=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${ye(e)}`,`fontSize${ye(n)}`]};return Le(i,KY,r)},XY=de("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${ye(n.color)}`],e[`fontSize${ye(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,s,a,o,l,c,u,d,h,p,f,m,g,v,y;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(s=i.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((a=t.typography)==null||(o=a.pxToRem)==null?void 0:o.call(a,20))||"1.25rem",medium:((l=t.typography)==null||(c=l.pxToRem)==null?void 0:c.call(l,24))||"1.5rem",large:((u=t.typography)==null||(d=u.pxToRem)==null?void 0:d.call(u,35))||"2.1875rem"}[e.fontSize],color:(h=(p=(t.vars||t).palette)==null||(f=p[e.color])==null?void 0:f.main)!=null?h:{action:(m=(t.vars||t).palette)==null||(g=m.action)==null?void 0:g.active,disabled:(v=(t.vars||t).palette)==null||(y=v.action)==null?void 0:y.disabled,inherit:void 0}[e.color]}}),TN=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:a="inherit",component:o="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:h="0 0 24 24"}=r,p=pe(r,YY),f=$({},r,{color:a,component:o,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:h}),m={};u||(m.viewBox=h);const g=JY(f);return S.jsxs(XY,$({as:o,className:ge(g.root,s),focusable:"false",color:c,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n},m,p,{ownerState:f,children:[i,d?S.jsx("title",{children:d}):null]}))});TN.muiName="SvgIcon";const y_=TN;function Bi(t,e){function n(r,i){return S.jsx(y_,$({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=y_.muiName,P.memo(P.forwardRef(n))}const QY={configure:t=>{DE.configure(t)}},ZY=Object.freeze(Object.defineProperty({__proto__:null,capitalize:ye,createChainedFunction:P0,createSvgIcon:Bi,debounce:oc,deprecatedPropType:OU,isMuiElement:hf,ownerDocument:yr,ownerWindow:as,requirePropFactory:DU,setRef:_0,unstable_ClassNameGenerator:QY,unstable_useEnhancedEffect:os,unstable_useId:lc,unsupportedProp:NU,useControlled:dd,useEventCallback:Rs,useForkRef:gn,useIsFocusVisible:AE},Symbol.toStringTag,{value:"Module"}));function Vw(t,e){return Vw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Vw(t,e)}function RN(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Vw(t,e)}const b_={disabled:!1},I0=En.createContext(null);var eJ=function(e){return e.scrollTop},Zh="unmounted",Tl="exited",Rl="entering",fu="entered",Ww="exiting",lo=function(t){RN(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var a=i,o=a&&!a.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?o?(l=Tl,s.appearStatus=Rl):l=fu:r.unmountOnExit||r.mountOnEnter?l=Zh:l=Tl,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var a=i.in;return a&&s.status===Zh?{status:Tl}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==Rl&&a!==fu&&(s=Rl):(a===Rl||a===fu)&&(s=Ww)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,a,o;return s=a=o=i,i!=null&&typeof i!="number"&&(s=i.exit,a=i.enter,o=i.appear!==void 0?i.appear:a),{exit:s,enter:a,appear:o}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Rl){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:Fm.findDOMNode(this);a&&eJ(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Tl&&this.setState({status:Zh})},n.performEnter=function(i){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:i,l=this.props.nodeRef?[o]:[Fm.findDOMNode(this),o],c=l[0],u=l[1],d=this.getTimeouts(),h=o?d.appear:d.enter;if(!i&&!a||b_.disabled){this.safeSetState({status:fu},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Rl},function(){s.props.onEntering(c,u),s.onTransitionEnd(h,function(){s.safeSetState({status:fu},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:Fm.findDOMNode(this);if(!s||b_.disabled){this.safeSetState({status:Tl},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:Ww},function(){i.props.onExiting(o),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:Tl},function(){i.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,i(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:Fm.findDOMNode(this),o=i==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Zh)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=pe(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return En.createElement(I0.Provider,{value:null},typeof a=="function"?a(i,o):En.cloneElement(En.Children.only(a),o))},e}(En.Component);lo.contextType=I0;lo.propTypes={};function tu(){}lo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:tu,onEntering:tu,onEntered:tu,onExit:tu,onExiting:tu,onExited:tu};lo.UNMOUNTED=Zh;lo.EXITED=Tl;lo.ENTERING=Rl;lo.ENTERED=fu;lo.EXITING=Ww;const iT=lo;function tJ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sT(t,e){var n=function(s){return e&&P.isValidElement(s)?e(s):s},r=Object.create(null);return t&&P.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function nJ(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var a,o={};for(var l in e){if(r[l])for(a=0;a<r[l].length;a++){var c=r[l][a];o[r[l][a]]=n(c)}o[l]=n(l)}for(a=0;a<i.length;a++)o[i[a]]=n(i[a]);return o}function $l(t,e,n){return n[e]!=null?n[e]:t.props[e]}function rJ(t,e){return sT(t.children,function(n){return P.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:$l(n,"appear",t),enter:$l(n,"enter",t),exit:$l(n,"exit",t)})})}function iJ(t,e,n){var r=sT(t.children),i=nJ(e,r);return Object.keys(i).forEach(function(s){var a=i[s];if(P.isValidElement(a)){var o=s in e,l=s in r,c=e[s],u=P.isValidElement(c)&&!c.props.in;l&&(!o||u)?i[s]=P.cloneElement(a,{onExited:n.bind(null,a),in:!0,exit:$l(a,"exit",t),enter:$l(a,"enter",t)}):!l&&o&&!u?i[s]=P.cloneElement(a,{in:!1}):l&&o&&P.isValidElement(c)&&(i[s]=P.cloneElement(a,{onExited:n.bind(null,a),in:c.props.in,exit:$l(a,"exit",t),enter:$l(a,"enter",t)}))}}),i}var sJ=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},aJ={component:"div",childFactory:function(e){return e}},aT=function(t){RN(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var a=s.handleExited.bind(tJ(s));return s.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var a=s.children,o=s.handleExited,l=s.firstRender;return{children:l?rJ(i,o):iJ(i,a,o),firstRender:!1}},n.handleExited=function(i,s){var a=sT(this.props.children);i.key in a||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(o){var l=$({},o.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,a=i.childFactory,o=pe(i,["component","childFactory"]),l=this.state.contextValue,c=sJ(this.state.children).map(a);return delete o.appear,delete o.enter,delete o.exit,s===null?En.createElement(I0.Provider,{value:l},c):En.createElement(I0.Provider,{value:l},En.createElement(s,o,c))},e}(En.Component);aT.propTypes={};aT.defaultProps=aJ;const oJ=aT,oT=t=>t.scrollTop;function vd(t,e){var n,r;const{timeout:i,easing:s,style:a={}}=t;return{duration:(n=a.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=a.transitionTimingFunction)!=null?r:typeof s=="object"?s[e.mode]:s,delay:a.transitionDelay}}function lJ(t){return Fe("MuiPaper",t)}Be("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const cJ=["className","component","elevation","square","variant"],uJ=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return Le(s,lJ,i)},dJ=de("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return $({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&$({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${xt("#fff",i_(e.elevation))}, ${xt("#fff",i_(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),hJ=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiPaper"}),{className:i,component:s="div",elevation:a=1,square:o=!1,variant:l="elevation"}=r,c=pe(r,cJ),u=$({},r,{component:s,elevation:a,square:o,variant:l}),d=uJ(u);return S.jsx(dJ,$({as:s,ownerState:u,className:ge(d.root,i),ref:n},c))}),hs=hJ;function fJ(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:a,in:o,onExited:l,timeout:c}=t,[u,d]=P.useState(!1),h=ge(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),p={width:a,height:a,top:-(a/2)+s,left:-(a/2)+i},f=ge(n.child,u&&n.childLeaving,r&&n.childPulsate);return!o&&!u&&d(!0),P.useEffect(()=>{if(!o&&l!=null){const m=setTimeout(l,c);return()=>{clearTimeout(m)}}},[l,o,c]),S.jsx("span",{className:h,style:p,children:S.jsx("span",{className:f})})}const pJ=Be("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Ui=pJ,mJ=["center","classes","className"];let Ay=t=>t,S_,x_,w_,C_;const Gw=550,gJ=80,vJ=qE(S_||(S_=Ay`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),yJ=qE(x_||(x_=Ay`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),bJ=qE(w_||(w_=Ay`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),SJ=de("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),xJ=de(fJ,{name:"MuiTouchRipple",slot:"Ripple"})(C_||(C_=Ay`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Ui.rippleVisible,vJ,Gw,({theme:t})=>t.transitions.easing.easeInOut,Ui.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,Ui.child,Ui.childLeaving,yJ,Gw,({theme:t})=>t.transitions.easing.easeInOut,Ui.childPulsate,bJ,({theme:t})=>t.transitions.easing.easeInOut),wJ=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:a}=r,o=pe(r,mJ),[l,c]=P.useState([]),u=P.useRef(0),d=P.useRef(null);P.useEffect(()=>{d.current&&(d.current(),d.current=null)},[l]);const h=P.useRef(!1),p=P.useRef(null),f=P.useRef(null),m=P.useRef(null);P.useEffect(()=>()=>{clearTimeout(p.current)},[]);const g=P.useCallback(C=>{const{pulsate:R,rippleX:w,rippleY:E,rippleSize:k,cb:T}=C;c(_=>[..._,S.jsx(xJ,{classes:{ripple:ge(s.ripple,Ui.ripple),rippleVisible:ge(s.rippleVisible,Ui.rippleVisible),ripplePulsate:ge(s.ripplePulsate,Ui.ripplePulsate),child:ge(s.child,Ui.child),childLeaving:ge(s.childLeaving,Ui.childLeaving),childPulsate:ge(s.childPulsate,Ui.childPulsate)},timeout:Gw,pulsate:R,rippleX:w,rippleY:E,rippleSize:k},u.current)]),u.current+=1,d.current=T},[s]),v=P.useCallback((C={},R={},w=()=>{})=>{const{pulsate:E=!1,center:k=i||R.pulsate,fakeElement:T=!1}=R;if((C==null?void 0:C.type)==="mousedown"&&h.current){h.current=!1;return}(C==null?void 0:C.type)==="touchstart"&&(h.current=!0);const _=T?null:m.current,D=_?_.getBoundingClientRect():{width:0,height:0,left:0,top:0};let I,M,A;if(k||C===void 0||C.clientX===0&&C.clientY===0||!C.clientX&&!C.touches)I=Math.round(D.width/2),M=Math.round(D.height/2);else{const{clientX:O,clientY:L}=C.touches&&C.touches.length>0?C.touches[0]:C;I=Math.round(O-D.left),M=Math.round(L-D.top)}if(k)A=Math.sqrt((2*D.width**2+D.height**2)/3),A%2===0&&(A+=1);else{const O=Math.max(Math.abs((_?_.clientWidth:0)-I),I)*2+2,L=Math.max(Math.abs((_?_.clientHeight:0)-M),M)*2+2;A=Math.sqrt(O**2+L**2)}C!=null&&C.touches?f.current===null&&(f.current=()=>{g({pulsate:E,rippleX:I,rippleY:M,rippleSize:A,cb:w})},p.current=setTimeout(()=>{f.current&&(f.current(),f.current=null)},gJ)):g({pulsate:E,rippleX:I,rippleY:M,rippleSize:A,cb:w})},[i,g]),y=P.useCallback(()=>{v({},{pulsate:!0})},[v]),b=P.useCallback((C,R)=>{if(clearTimeout(p.current),(C==null?void 0:C.type)==="touchend"&&f.current){f.current(),f.current=null,p.current=setTimeout(()=>{b(C,R)});return}f.current=null,c(w=>w.length>0?w.slice(1):w),d.current=R},[]);return P.useImperativeHandle(n,()=>({pulsate:y,start:v,stop:b}),[y,v,b]),S.jsx(SJ,$({className:ge(Ui.root,s.root,a),ref:m},o,{children:S.jsx(oJ,{component:null,exit:!0,children:l})}))}),CJ=wJ;function EJ(t){return Fe("MuiButtonBase",t)}const TJ=Be("MuiButtonBase",["root","disabled","focusVisible"]),RJ=TJ,kJ=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],PJ=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,a=Le({root:["root",e&&"disabled",n&&"focusVisible"]},EJ,i);return n&&r&&(a.root+=` ${r}`),a},_J=de("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${RJ.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),AJ=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:a,className:o,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,LinkComponent:p="a",onBlur:f,onClick:m,onContextMenu:g,onDragLeave:v,onFocus:y,onFocusVisible:b,onKeyDown:C,onKeyUp:R,onMouseDown:w,onMouseLeave:E,onMouseUp:k,onTouchEnd:T,onTouchMove:_,onTouchStart:D,tabIndex:I=0,TouchRippleProps:M,touchRippleRef:A,type:O}=r,L=pe(r,kJ),F=P.useRef(null),B=P.useRef(null),j=gn(B,A),{isFocusVisibleRef:q,onFocus:V,onBlur:U,ref:ne}=AE(),[W,J]=P.useState(!1);c&&W&&J(!1),P.useImperativeHandle(i,()=>({focusVisible:()=>{J(!0),F.current.focus()}}),[]);const[K,Q]=P.useState(!1);P.useEffect(()=>{Q(!0)},[]);const re=K&&!u&&!c;P.useEffect(()=>{W&&h&&!u&&K&&B.current.pulsate()},[u,h,W,K]);function G(Te,Ce,Ke=d){return Rs(fe=>(Ce&&Ce(fe),!Ke&&B.current&&B.current[Te](fe),!0))}const ie=G("start",w),te=G("stop",g),Z=G("stop",v),oe=G("stop",k),ue=G("stop",Te=>{W&&Te.preventDefault(),E&&E(Te)}),me=G("start",D),H=G("stop",T),Y=G("stop",_),X=G("stop",Te=>{U(Te),q.current===!1&&J(!1),f&&f(Te)},!1),le=Rs(Te=>{F.current||(F.current=Te.currentTarget),V(Te),q.current===!0&&(J(!0),b&&b(Te)),y&&y(Te)}),se=()=>{const Te=F.current;return l&&l!=="button"&&!(Te.tagName==="A"&&Te.href)},ae=P.useRef(!1),ve=Rs(Te=>{h&&!ae.current&&W&&B.current&&Te.key===" "&&(ae.current=!0,B.current.stop(Te,()=>{B.current.start(Te)})),Te.target===Te.currentTarget&&se()&&Te.key===" "&&Te.preventDefault(),C&&C(Te),Te.target===Te.currentTarget&&se()&&Te.key==="Enter"&&!c&&(Te.preventDefault(),m&&m(Te))}),ke=Rs(Te=>{h&&Te.key===" "&&B.current&&W&&!Te.defaultPrevented&&(ae.current=!1,B.current.stop(Te,()=>{B.current.pulsate(Te)})),R&&R(Te),m&&Te.target===Te.currentTarget&&se()&&Te.key===" "&&!Te.defaultPrevented&&m(Te)});let Ee=l;Ee==="button"&&(L.href||L.to)&&(Ee=p);const Oe={};Ee==="button"?(Oe.type=O===void 0?"button":O,Oe.disabled=c):(!L.href&&!L.to&&(Oe.role="button"),c&&(Oe["aria-disabled"]=c));const De=gn(n,ne,F),He=$({},r,{centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:I,focusVisible:W}),_e=PJ(He);return S.jsxs(_J,$({as:Ee,className:ge(_e.root,o),ownerState:He,onBlur:X,onClick:m,onContextMenu:te,onFocus:le,onKeyDown:ve,onKeyUp:ke,onMouseDown:ie,onMouseLeave:ue,onMouseUp:oe,onDragLeave:Z,onTouchEnd:H,onTouchMove:Y,onTouchStart:me,ref:De,tabIndex:c?-1:I,type:O},Oe,L,{children:[a,re?S.jsx(CJ,$({ref:j,center:s},M)):null]}))}),co=AJ;function OJ(t){return Fe("MuiIconButton",t)}const DJ=Be("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),IJ=DJ,MJ=["edge","children","className","color","disabled","disableFocusRipple","size"],NJ=t=>{const{classes:e,disabled:n,color:r,edge:i,size:s}=t,a={root:["root",n&&"disabled",r!=="default"&&`color${ye(r)}`,i&&`edge${ye(i)}`,`size${ye(s)}`]};return Le(a,OJ,e)},FJ=de(co,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${ye(n.color)}`],n.edge&&e[`edge${ye(n.edge)}`],e[`size${ye(n.size)}`]]}})(({theme:t,ownerState:e})=>$({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:xt(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var n;const r=(n=(t.vars||t).palette)==null?void 0:n[e.color];return $({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&$({color:r==null?void 0:r.main},!e.disableRipple&&{"&:hover":$({},r&&{backgroundColor:t.vars?`rgba(${r.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:xt(r.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${IJ.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),$J=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:a,color:o="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium"}=r,d=pe(r,MJ),h=$({},r,{edge:i,color:o,disabled:l,disableFocusRipple:c,size:u}),p=NJ(h);return S.jsx(FJ,$({className:ge(p.root,a),centerRipple:!0,focusRipple:!c,disabled:l,ref:n,ownerState:h},d,{children:s}))}),ii=$J;function LJ(t){return Fe("MuiTypography",t)}Be("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const BJ=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],jJ=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:a}=t,o={root:["root",s,t.align!=="inherit"&&`align${ye(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Le(o,LJ,a)},qJ=de("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${ye(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>$({margin:0},e.variant&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),E_={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},zJ={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},HJ=t=>zJ[t]||t,UJ=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiTypography"}),i=HJ(r.color),s=Ry($({},r,{color:i})),{align:a="inherit",className:o,component:l,gutterBottom:c=!1,noWrap:u=!1,paragraph:d=!1,variant:h="body1",variantMapping:p=E_}=s,f=pe(s,BJ),m=$({},s,{align:a,color:i,className:o,component:l,gutterBottom:c,noWrap:u,paragraph:d,variant:h,variantMapping:p}),g=l||(d?"p":p[h]||E_[h])||"span",v=jJ(m);return S.jsx(qJ,$({as:g,ref:n,ownerState:m,className:ge(v.root,o)},f))}),yt=UJ;function VJ(t){return Fe("MuiAppBar",t)}Be("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);const WJ=["className","color","enableColorOnDark","position"],GJ=t=>{const{color:e,position:n,classes:r}=t,i={root:["root",`color${ye(e)}`,`position${ye(n)}`]};return Le(i,VJ,r)},jm=(t,e)=>t?`${t==null?void 0:t.replace(")","")}, ${e})`:e,KJ=de(hs,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${ye(n.position)}`],e[`color${ye(n.color)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[900];return $({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},e.position==="fixed"&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},e.position==="absolute"&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="sticky"&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="static"&&{position:"static"},e.position==="relative"&&{position:"relative"},!t.vars&&$({},e.color==="default"&&{backgroundColor:n,color:t.palette.getContrastText(n)},e.color&&e.color!=="default"&&e.color!=="inherit"&&e.color!=="transparent"&&{backgroundColor:t.palette[e.color].main,color:t.palette[e.color].contrastText},e.color==="inherit"&&{color:"inherit"},t.palette.mode==="dark"&&!e.enableColorOnDark&&{backgroundColor:null,color:null},e.color==="transparent"&&$({backgroundColor:"transparent",color:"inherit"},t.palette.mode==="dark"&&{backgroundImage:"none"})),t.vars&&$({},e.color==="default"&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette.AppBar.defaultBg:jm(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":e.enableColorOnDark?t.vars.palette.text.primary:jm(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},e.color&&!e.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette[e.color].main:jm(t.vars.palette.AppBar.darkBg,t.vars.palette[e.color].main),"--AppBar-color":e.enableColorOnDark?t.vars.palette[e.color].contrastText:jm(t.vars.palette.AppBar.darkColor,t.vars.palette[e.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:e.color==="inherit"?"inherit":"var(--AppBar-color)"},e.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),YJ=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiAppBar"}),{className:i,color:s="primary",enableColorOnDark:a=!1,position:o="fixed"}=r,l=pe(r,WJ),c=$({},r,{color:s,position:o,enableColorOnDark:a}),u=GJ(c);return S.jsx(KJ,$({square:!0,component:"header",ownerState:c,elevation:4,className:ge(u.root,i,o==="fixed"&&"mui-fixed"),ref:n},l))}),JJ=YJ,XJ=["components","componentsProps","slots","slotProps"],QJ=de(OY,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),ZJ=P.forwardRef(function(e,n){var r;const i=oN(),s=$e({props:e,name:"MuiPopper"}),{components:a,componentsProps:o,slots:l,slotProps:c}=s,u=pe(s,XJ),d=(r=l==null?void 0:l.root)!=null?r:a==null?void 0:a.Root;return S.jsx(QJ,$({direction:i==null?void 0:i.direction,slots:{root:d},slotProps:c??o},u,{ref:n}))}),kN=ZJ;function fl({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const eX=P.createContext(void 0),Oy=eX;function ka(){return P.useContext(Oy)}function tX(t){return S.jsx(KW,$({},t,{defaultTheme:Py,themeId:Bp}))}function T_(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function lT(t,e=!1){return t&&(T_(t.value)&&t.value!==""||e&&T_(t.defaultValue)&&t.defaultValue!=="")}function nX(t){return t.startAdornment}function rX(t){return Fe("MuiInputBase",t)}const iX=Be("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),yd=iX,sX=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Dy=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${ye(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},Iy=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},aX=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:s,focused:a,formControl:o,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:p,type:f}=t,m={root:["root",`color${ye(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",o&&"formControl",h==="small"&&"sizeSmall",u&&"multiline",p&&"adornedStart",s&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled",f==="search"&&"inputTypeSearch",u&&"inputMultiline",h==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",s&&"inputAdornedEnd",d&&"readOnly"]};return Le(m,rX,e)},My=de("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Dy})(({theme:t,ownerState:e})=>$({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${yd.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},e.multiline&&$({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),Ny=de("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Iy})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light",r=$({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),i={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return $({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${yd.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${yd.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),oX=S.jsx(tX,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),lX=P.forwardRef(function(e,n){var r;const i=$e({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:a,autoFocus:o,className:l,components:c={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:p,endAdornment:f,fullWidth:m=!1,id:g,inputComponent:v="input",inputProps:y={},inputRef:b,maxRows:C,minRows:R,multiline:w=!1,name:E,onBlur:k,onChange:T,onClick:_,onFocus:D,onKeyDown:I,onKeyUp:M,placeholder:A,readOnly:O,renderSuffix:L,rows:F,slotProps:B={},slots:j={},startAdornment:q,type:V="text",value:U}=i,ne=pe(i,sX),W=y.value!=null?y.value:U,{current:J}=P.useRef(W!=null),K=P.useRef(),Q=P.useCallback(_e=>{},[]),re=gn(K,b,y.ref,Q),[G,ie]=P.useState(!1),te=ka(),Z=fl({props:i,muiFormControl:te,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Z.focused=te?te.focused:G,P.useEffect(()=>{!te&&h&&G&&(ie(!1),k&&k())},[te,h,G,k]);const oe=te&&te.onFilled,ue=te&&te.onEmpty,me=P.useCallback(_e=>{lT(_e)?oe&&oe():ue&&ue()},[oe,ue]);os(()=>{J&&me({value:W})},[W,me,J]);const H=_e=>{if(Z.disabled){_e.stopPropagation();return}D&&D(_e),y.onFocus&&y.onFocus(_e),te&&te.onFocus?te.onFocus(_e):ie(!0)},Y=_e=>{k&&k(_e),y.onBlur&&y.onBlur(_e),te&&te.onBlur?te.onBlur(_e):ie(!1)},X=(_e,...Te)=>{if(!J){const Ce=_e.target||K.current;if(Ce==null)throw new Error(tl(1));me({value:Ce.value})}y.onChange&&y.onChange(_e,...Te),T&&T(_e,...Te)};P.useEffect(()=>{me(K.current)},[]);const le=_e=>{K.current&&_e.currentTarget===_e.target&&K.current.focus(),_&&_(_e)};let se=v,ae=y;w&&se==="input"&&(F?ae=$({type:void 0,minRows:F,maxRows:F},ae):ae=$({type:void 0,maxRows:C,minRows:R},ae),se=EN);const ve=_e=>{me(_e.animationName==="mui-auto-fill-cancel"?K.current:{value:"x"})};P.useEffect(()=>{te&&te.setAdornedStart(!!q)},[te,q]);const ke=$({},i,{color:Z.color||"primary",disabled:Z.disabled,endAdornment:f,error:Z.error,focused:Z.focused,formControl:te,fullWidth:m,hiddenLabel:Z.hiddenLabel,multiline:w,size:Z.size,startAdornment:q,type:V}),Ee=aX(ke),Oe=j.root||c.Root||My,De=B.root||u.root||{},He=j.input||c.Input||Ny;return ae=$({},ae,(r=B.input)!=null?r:u.input),S.jsxs(P.Fragment,{children:[!p&&oX,S.jsxs(Oe,$({},De,!dc(Oe)&&{ownerState:$({},ke,De.ownerState)},{ref:n,onClick:le},ne,{className:ge(Ee.root,De.className,l,O&&"MuiInputBase-readOnly"),children:[q,S.jsx(Oy.Provider,{value:null,children:S.jsx(He,$({ownerState:ke,"aria-invalid":Z.error,"aria-describedby":s,autoComplete:a,autoFocus:o,defaultValue:d,disabled:Z.disabled,id:g,onAnimationStart:ve,name:E,placeholder:A,readOnly:O,required:Z.required,rows:F,value:W,onKeyDown:I,onKeyUp:M,type:V},ae,!dc(He)&&{as:se,ownerState:$({},ke,ae.ownerState)},{ref:re,className:ge(Ee.input,ae.className,O&&"MuiInputBase-readOnly"),onBlur:Y,onChange:X,onFocus:H}))}),f,L?L($({},Z,{startAdornment:q})):null]}))]})}),Fy=lX;function cX(t){return Fe("MuiInput",t)}const uX=$({},yd,Be("MuiInput",["root","underline","input"])),Th=uX;function dX(t){return Fe("MuiOutlinedInput",t)}const hX=$({},yd,Be("MuiOutlinedInput",["root","notchedOutline","input"])),mo=hX;function fX(t){return Fe("MuiFilledInput",t)}const pX=$({},yd,Be("MuiFilledInput",["root","underline","input"])),bl=pX,mX=Bi(S.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),gX=Bi(S.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function vX(t){return Fe("MuiAvatar",t)}Be("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const yX=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],bX=t=>{const{classes:e,variant:n,colorDefault:r}=t;return Le({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},vX,e)},SX=de("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],n.colorDefault&&e.colorDefault]}})(({theme:t,ownerState:e})=>$({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},e.variant==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius},e.variant==="square"&&{borderRadius:0},e.colorDefault&&$({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600]}))),xX=de("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(t,e)=>e.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),wX=de(gX,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(t,e)=>e.fallback})({width:"75%",height:"75%"});function CX({crossOrigin:t,referrerPolicy:e,src:n,srcSet:r}){const[i,s]=P.useState(!1);return P.useEffect(()=>{if(!n&&!r)return;s(!1);let a=!0;const o=new Image;return o.onload=()=>{a&&s("loaded")},o.onerror=()=>{a&&s("error")},o.crossOrigin=t,o.referrerPolicy=e,o.src=n,r&&(o.srcset=r),()=>{a=!1}},[t,e,n,r]),i}const EX=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiAvatar"}),{alt:i,children:s,className:a,component:o="div",imgProps:l,sizes:c,src:u,srcSet:d,variant:h="circular"}=r,p=pe(r,yX);let f=null;const m=CX($({},l,{src:u,srcSet:d})),g=u||d,v=g&&m!=="error",y=$({},r,{colorDefault:!v,component:o,variant:h}),b=bX(y);return v?f=S.jsx(xX,$({alt:i,src:u,srcSet:d,sizes:c,ownerState:y,className:b.img},l)):s!=null?f=s:g&&i?f=i[0]:f=S.jsx(wX,{ownerState:y,className:b.fallback}),S.jsx(SX,$({as:o,ownerState:y,className:ge(b.root,a),ref:n},p,{children:f}))}),Z1=EX,TX=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],RX={entering:{opacity:1},entered:{opacity:1}},kX=P.forwardRef(function(e,n){const r=Ar(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:a=!0,children:o,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:p,onExited:f,onExiting:m,style:g,timeout:v=i,TransitionComponent:y=iT}=e,b=pe(e,TX),C=P.useRef(null),R=gn(C,o.ref,n),w=A=>O=>{if(A){const L=C.current;O===void 0?A(L):A(L,O)}},E=w(h),k=w((A,O)=>{oT(A);const L=vd({style:g,timeout:v,easing:l},{mode:"enter"});A.style.webkitTransition=r.transitions.create("opacity",L),A.style.transition=r.transitions.create("opacity",L),u&&u(A,O)}),T=w(d),_=w(m),D=w(A=>{const O=vd({style:g,timeout:v,easing:l},{mode:"exit"});A.style.webkitTransition=r.transitions.create("opacity",O),A.style.transition=r.transitions.create("opacity",O),p&&p(A)}),I=w(f),M=A=>{s&&s(C.current,A)};return S.jsx(y,$({appear:a,in:c,nodeRef:C,onEnter:k,onEntered:T,onEntering:E,onExit:D,onExited:I,onExiting:_,addEndListener:M,timeout:v},b,{children:(A,O)=>P.cloneElement(o,$({style:$({opacity:0,visibility:A==="exited"&&!c?"hidden":void 0},RX[A],g,o.props.style),ref:R},O))}))}),PN=kX;function PX(t){return Fe("MuiBackdrop",t)}Be("MuiBackdrop",["root","invisible"]);const _X=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],AX=t=>{const{classes:e,invisible:n}=t;return Le({root:["root",n&&"invisible"]},PX,e)},OX=de("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>$({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),DX=P.forwardRef(function(e,n){var r,i,s;const a=$e({props:e,name:"MuiBackdrop"}),{children:o,className:l,component:c="div",components:u={},componentsProps:d={},invisible:h=!1,open:p,slotProps:f={},slots:m={},TransitionComponent:g=PN,transitionDuration:v}=a,y=pe(a,_X),b=$({},a,{component:c,invisible:h}),C=AX(b),R=(r=f.root)!=null?r:d.root;return S.jsx(g,$({in:p,timeout:v},y,{children:S.jsx(OX,$({"aria-hidden":!0},R,{as:(i=(s=m.root)!=null?s:u.Root)!=null?i:c,className:ge(C.root,l,R==null?void 0:R.className),ownerState:$({},b,R==null?void 0:R.ownerState),classes:C,ref:n,children:o}))}))}),_N=DX;function IX(t){return Fe("MuiBadge",t)}const MX=Be("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),go=MX,NX=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],eS=10,tS=4,FX=t=>{const{color:e,anchorOrigin:n,invisible:r,overlap:i,variant:s,classes:a={}}=t,o={root:["root"],badge:["badge",s,r&&"invisible",`anchorOrigin${ye(n.vertical)}${ye(n.horizontal)}`,`anchorOrigin${ye(n.vertical)}${ye(n.horizontal)}${ye(i)}`,`overlap${ye(i)}`,e!=="default"&&`color${ye(e)}`]};return Le(o,IX,a)},$X=de("span",{name:"MuiBadge",slot:"Root",overridesResolver:(t,e)=>e.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),LX=de("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.badge,e[n.variant],e[`anchorOrigin${ye(n.anchorOrigin.vertical)}${ye(n.anchorOrigin.horizontal)}${ye(n.overlap)}`],n.color!=="default"&&e[`color${ye(n.color)}`],n.invisible&&e.invisible]}})(({theme:t,ownerState:e})=>$({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:eS*2,lineHeight:1,padding:"0 6px",height:eS*2,borderRadius:eS,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen})},e.color!=="default"&&{backgroundColor:(t.vars||t).palette[e.color].main,color:(t.vars||t).palette[e.color].contrastText},e.variant==="dot"&&{borderRadius:tS,height:tS*2,minWidth:tS*2,padding:0},e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${go.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${go.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${go.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${go.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${go.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${go.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${go.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${go.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},e.invisible&&{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})})),BX=P.forwardRef(function(e,n){var r,i,s,a,o,l;const c=$e({props:e,name:"MuiBadge"}),{anchorOrigin:u={vertical:"top",horizontal:"right"},className:d,component:h,components:p={},componentsProps:f={},children:m,overlap:g="rectangular",color:v="default",invisible:y=!1,max:b=99,badgeContent:C,slots:R,slotProps:w,showZero:E=!1,variant:k="standard"}=c,T=pe(c,NX),{badgeContent:_,invisible:D,max:I,displayValue:M}=aK({max:b,invisible:y,badgeContent:C,showZero:E}),A=L6({anchorOrigin:u,color:v,overlap:g,variant:k,badgeContent:C}),O=D||_==null&&k!=="dot",{color:L=v,overlap:F=g,anchorOrigin:B=u,variant:j=k}=O?A:c,q=j!=="dot"?M:void 0,V=$({},c,{badgeContent:_,invisible:O,max:I,displayValue:q,showZero:E,anchorOrigin:B,color:L,overlap:F,variant:j}),U=FX(V),ne=(r=(i=R==null?void 0:R.root)!=null?i:p.Root)!=null?r:$X,W=(s=(a=R==null?void 0:R.badge)!=null?a:p.Badge)!=null?s:LX,J=(o=w==null?void 0:w.root)!=null?o:f.root,K=(l=w==null?void 0:w.badge)!=null?l:f.badge,Q=va({elementType:ne,externalSlotProps:J,externalForwardedProps:T,additionalProps:{ref:n,as:h},ownerState:V,className:ge(J==null?void 0:J.className,U.root,d)}),re=va({elementType:W,externalSlotProps:K,ownerState:V,className:ge(U.badge,K==null?void 0:K.className)});return S.jsxs(ne,$({},Q,{children:[m,S.jsx(W,$({},re,{children:q}))]}))}),jX=BX,qX=hN(),zX=QW({themeId:Bp,defaultTheme:qX,defaultClassName:"MuiBox-root",generateClassName:DE.generate}),ct=zX;function HX(t){return Fe("MuiButton",t)}const UX=Be("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),qm=UX,VX=P.createContext({}),WX=VX,GX=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],KX=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:s,classes:a}=t,o={root:["root",s,`${s}${ye(e)}`,`size${ye(i)}`,`${s}Size${ye(i)}`,e==="inherit"&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${ye(i)}`],endIcon:["endIcon",`iconSize${ye(i)}`]},l=Le(o,HX,a);return $({},a,l)},AN=t=>$({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),YX=de(co,{shouldForwardProp:t=>Gr(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${ye(n.color)}`],e[`size${ye(n.size)}`],e[`${n.variant}Size${ye(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;return $({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":$({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:xt(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:xt(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:xt(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:(t.vars||t).palette.grey.A100,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":$({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${qm.focusVisible}`]:$({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${qm.disabled}`]:$({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${xt(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${qm.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${qm.disabled}`]:{boxShadow:"none"}}),JX=de("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${ye(n.size)}`]]}})(({ownerState:t})=>$({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},AN(t))),XX=de("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${ye(n.size)}`]]}})(({ownerState:t})=>$({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},AN(t))),QX=P.forwardRef(function(e,n){const r=P.useContext(WX),i=OE(r,e),s=$e({props:i,name:"MuiButton"}),{children:a,color:o="primary",component:l="button",className:c,disabled:u=!1,disableElevation:d=!1,disableFocusRipple:h=!1,endIcon:p,focusVisibleClassName:f,fullWidth:m=!1,size:g="medium",startIcon:v,type:y,variant:b="text"}=s,C=pe(s,GX),R=$({},s,{color:o,component:l,disabled:u,disableElevation:d,disableFocusRipple:h,fullWidth:m,size:g,type:y,variant:b}),w=KX(R),E=v&&S.jsx(JX,{className:w.startIcon,ownerState:R,children:v}),k=p&&S.jsx(XX,{className:w.endIcon,ownerState:R,children:p});return S.jsxs(YX,$({ownerState:R,className:ge(r.className,w.root,c),component:l,disabled:u,focusRipple:!h,focusVisibleClassName:ge(w.focusVisible,f),ref:n,type:y},C,{classes:w,children:[E,a,k]}))}),ht=QX;function ZX(t){return Fe("MuiCard",t)}Be("MuiCard",["root"]);const eQ=["className","raised"],tQ=t=>{const{classes:e}=t;return Le({root:["root"]},ZX,e)},nQ=de(hs,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),rQ=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiCard"}),{className:i,raised:s=!1}=r,a=pe(r,eQ),o=$({},r,{raised:s}),l=tQ(o);return S.jsx(nQ,$({className:ge(l.root,i),elevation:s?8:void 0,ref:n,ownerState:o},a))}),Nc=rQ;function iQ(t){return Fe("MuiCardActions",t)}Be("MuiCardActions",["root","spacing"]);const sQ=["disableSpacing","className"],aQ=t=>{const{classes:e,disableSpacing:n}=t;return Le({root:["root",!n&&"spacing"]},iQ,e)},oQ=de("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>$({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),lQ=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:s}=r,a=pe(r,sQ),o=$({},r,{disableSpacing:i}),l=aQ(o);return S.jsx(oQ,$({className:ge(l.root,s),ownerState:o,ref:n},a))}),cQ=lQ;function uQ(t){return Fe("MuiCardContent",t)}Be("MuiCardContent",["root"]);const dQ=["className","component"],hQ=t=>{const{classes:e}=t;return Le({root:["root"]},uQ,e)},fQ=de("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),pQ=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiCardContent"}),{className:i,component:s="div"}=r,a=pe(r,dQ),o=$({},r,{component:s}),l=hQ(o);return S.jsx(fQ,$({as:s,className:ge(l.root,i),ownerState:o,ref:n},a))}),Fc=pQ;function mQ(t){return Fe("PrivateSwitchBase",t)}Be("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const gQ=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],vQ=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,s={root:["root",n&&"checked",r&&"disabled",i&&`edge${ye(i)}`],input:["input"]};return Le(s,mQ,e)},yQ=de(co)(({ownerState:t})=>$({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),bQ=de("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),SQ=P.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:s,className:a,defaultChecked:o,disabled:l,disableFocusRipple:c=!1,edge:u=!1,icon:d,id:h,inputProps:p,inputRef:f,name:m,onBlur:g,onChange:v,onFocus:y,readOnly:b,required:C=!1,tabIndex:R,type:w,value:E}=e,k=pe(e,gQ),[T,_]=dd({controlled:i,default:!!o,name:"SwitchBase",state:"checked"}),D=ka(),I=j=>{y&&y(j),D&&D.onFocus&&D.onFocus(j)},M=j=>{g&&g(j),D&&D.onBlur&&D.onBlur(j)},A=j=>{if(j.nativeEvent.defaultPrevented)return;const q=j.target.checked;_(q),v&&v(j,q)};let O=l;D&&typeof O>"u"&&(O=D.disabled);const L=w==="checkbox"||w==="radio",F=$({},e,{checked:T,disabled:O,disableFocusRipple:c,edge:u}),B=vQ(F);return S.jsxs(yQ,$({component:"span",className:ge(B.root,a),centerRipple:!0,focusRipple:!c,disabled:O,tabIndex:null,role:void 0,onFocus:I,onBlur:M,ownerState:F,ref:n},k,{children:[S.jsx(bQ,$({autoFocus:r,checked:i,defaultChecked:o,className:B.input,disabled:O,id:L?h:void 0,name:m,onChange:A,readOnly:b,ref:f,required:C,ownerState:F,tabIndex:R,type:w},w==="checkbox"&&E===void 0?{}:{value:E},p)),T?s:d]}))}),cT=SQ,xQ=Bi(S.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),wQ=Bi(S.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),CQ=Bi(S.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function EQ(t){return Fe("MuiCheckbox",t)}const TQ=Be("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),nS=TQ,RQ=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],kQ=t=>{const{classes:e,indeterminate:n,color:r}=t,i={root:["root",n&&"indeterminate",`color${ye(r)}`]},s=Le(i,EQ,e);return $({},e,s)},PQ=de(cT,{shouldForwardProp:t=>Gr(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.indeterminate&&e.indeterminate,n.color!=="default"&&e[`color${ye(n.color)}`]]}})(({theme:t,ownerState:e})=>$({color:(t.vars||t).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${e.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:xt(e.color==="default"?t.palette.action.active:t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${nS.checked}, &.${nS.indeterminate}`]:{color:(t.vars||t).palette[e.color].main},[`&.${nS.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),_Q=S.jsx(wQ,{}),AQ=S.jsx(xQ,{}),OQ=S.jsx(CQ,{}),DQ=P.forwardRef(function(e,n){var r,i;const s=$e({props:e,name:"MuiCheckbox"}),{checkedIcon:a=_Q,color:o="primary",icon:l=AQ,indeterminate:c=!1,indeterminateIcon:u=OQ,inputProps:d,size:h="medium",className:p}=s,f=pe(s,RQ),m=c?u:l,g=c?u:a,v=$({},s,{color:o,indeterminate:c,size:h}),y=kQ(v);return S.jsx(PQ,$({type:"checkbox",inputProps:$({"data-indeterminate":c},d),icon:P.cloneElement(m,{fontSize:(r=m.props.fontSize)!=null?r:h}),checkedIcon:P.cloneElement(g,{fontSize:(i=g.props.fontSize)!=null?i:h}),ownerState:v,ref:n,className:ge(y.root,p)},f,{classes:y}))}),M0=DQ,IQ=vG({createStyledComponent:de("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${ye(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:t=>$e({props:t,name:"MuiContainer"})}),uT=IQ,MQ=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],NQ=de("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>$({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),FQ=de(_N,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),$Q=P.forwardRef(function(e,n){var r,i,s,a,o,l;const c=$e({name:"MuiModal",props:e}),{BackdropComponent:u=FQ,BackdropProps:d,classes:h,className:p,closeAfterTransition:f=!1,children:m,component:g,components:v={},componentsProps:y={},disableAutoFocus:b=!1,disableEnforceFocus:C=!1,disableEscapeKeyDown:R=!1,disablePortal:w=!1,disableRestoreFocus:E=!1,disableScrollLock:k=!1,hideBackdrop:T=!1,keepMounted:_=!1,slotProps:D,slots:I,theme:M}=c,A=pe(c,MQ),[O,L]=P.useState(!0),F={closeAfterTransition:f,disableAutoFocus:b,disableEnforceFocus:C,disableEscapeKeyDown:R,disablePortal:w,disableRestoreFocus:E,disableScrollLock:k,hideBackdrop:T,keepMounted:_},B=$({},c,F,{exited:O}),j=(r=(i=I==null?void 0:I.root)!=null?i:v.Root)!=null?r:NQ,q=(s=(a=I==null?void 0:I.backdrop)!=null?a:v.Backdrop)!=null?s:u,V=(o=D==null?void 0:D.root)!=null?o:y.root,U=(l=D==null?void 0:D.backdrop)!=null?l:y.backdrop;return S.jsx(UY,$({slots:{root:j,backdrop:q},slotProps:{root:()=>$({},qw(V,B),!dc(j)&&{as:g,theme:M},{className:ge(p,V==null?void 0:V.className,h==null?void 0:h.root,!B.open&&B.exited&&(h==null?void 0:h.hidden))}),backdrop:()=>$({},d,qw(U,B),{className:ge(U==null?void 0:U.className,h==null?void 0:h.backdrop)})},onTransitionEnter:()=>L(!1),onTransitionExited:()=>L(!0),ref:n},A,F,{children:m}))}),Ro=$Q;function LQ(t){return Fe("MuiDialog",t)}const BQ=Be("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),rS=BQ,jQ=P.createContext({}),ON=jQ,qQ=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],zQ=de(_N,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),HQ=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:i,fullScreen:s}=t,a={root:["root"],container:["container",`scroll${ye(n)}`],paper:["paper",`paperScroll${ye(n)}`,`paperWidth${ye(String(r))}`,i&&"paperFullWidth",s&&"paperFullScreen"]};return Le(a,LQ,e)},UQ=de(Ro,{name:"MuiDialog",slot:"Root",overridesResolver:(t,e)=>e.root})({"@media print":{position:"absolute !important"}}),VQ=de("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e[`scroll${ye(n.scroll)}`]]}})(({ownerState:t})=>$({height:"100%","@media print":{height:"auto"},outline:0},t.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},t.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),WQ=de(hs,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`scrollPaper${ye(n.scroll)}`],e[`paperWidth${ye(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(({theme:t,ownerState:e})=>$({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`${t.breakpoints.values.xs}${t.breakpoints.unit}`,[`&.${rS.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${t.breakpoints.values[e.maxWidth]}${t.breakpoints.unit}`,[`&.${rS.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${rS.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),GQ=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiDialog"}),i=Ar(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":a,"aria-labelledby":o,BackdropComponent:l,BackdropProps:c,children:u,className:d,disableEscapeKeyDown:h=!1,fullScreen:p=!1,fullWidth:f=!1,maxWidth:m="sm",onBackdropClick:g,onClose:v,open:y,PaperComponent:b=hs,PaperProps:C={},scroll:R="paper",TransitionComponent:w=PN,transitionDuration:E=s,TransitionProps:k}=r,T=pe(r,qQ),_=$({},r,{disableEscapeKeyDown:h,fullScreen:p,fullWidth:f,maxWidth:m,scroll:R}),D=HQ(_),I=P.useRef(),M=F=>{I.current=F.target===F.currentTarget},A=F=>{I.current&&(I.current=null,g&&g(F),v&&v(F,"backdropClick"))},O=lc(o),L=P.useMemo(()=>({titleId:O}),[O]);return S.jsx(UQ,$({className:ge(D.root,d),closeAfterTransition:!0,components:{Backdrop:zQ},componentsProps:{backdrop:$({transitionDuration:E,as:l},c)},disableEscapeKeyDown:h,onClose:v,open:y,ref:n,onClick:A,ownerState:_},T,{children:S.jsx(w,$({appear:!0,in:y,timeout:E,role:"presentation"},k,{children:S.jsx(VQ,{className:ge(D.container),onMouseDown:M,ownerState:_,children:S.jsx(WQ,$({as:b,elevation:24,role:"dialog","aria-describedby":a,"aria-labelledby":O},C,{className:ge(D.paper,C.className),ownerState:_,children:S.jsx(ON.Provider,{value:L,children:u})}))})}))}))}),Kw=GQ;function KQ(t){return Fe("MuiDialogActions",t)}Be("MuiDialogActions",["root","spacing"]);const YQ=["className","disableSpacing"],JQ=t=>{const{classes:e,disableSpacing:n}=t;return Le({root:["root",!n&&"spacing"]},KQ,e)},XQ=de("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>$({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),QQ=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:s=!1}=r,a=pe(r,YQ),o=$({},r,{disableSpacing:s}),l=JQ(o);return S.jsx(XQ,$({className:ge(l.root,i),ownerState:o,ref:n},a))}),Yw=QQ;function ZQ(t){return Fe("MuiDialogContent",t)}Be("MuiDialogContent",["root","dividers"]);function eZ(t){return Fe("MuiDialogTitle",t)}const tZ=Be("MuiDialogTitle",["root"]),nZ=tZ,rZ=["className","dividers"],iZ=t=>{const{classes:e,dividers:n}=t;return Le({root:["root",n&&"dividers"]},ZQ,e)},sZ=de("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(({theme:t,ownerState:e})=>$({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},e.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${nZ.root} + &`]:{paddingTop:0}})),aZ=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiDialogContent"}),{className:i,dividers:s=!1}=r,a=pe(r,rZ),o=$({},r,{dividers:s}),l=iZ(o);return S.jsx(sZ,$({className:ge(l.root,i),ownerState:o,ref:n},a))}),Jw=aZ;function oZ(t){return Fe("MuiDialogContentText",t)}Be("MuiDialogContentText",["root"]);const lZ=["children","className"],cZ=t=>{const{classes:e}=t,r=Le({root:["root"]},oZ,e);return $({},e,r)},uZ=de(yt,{shouldForwardProp:t=>Gr(t)||t==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(t,e)=>e.root})({}),dZ=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiDialogContentText"}),{className:i}=r,s=pe(r,lZ),a=cZ(s);return S.jsx(uZ,$({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:s,className:ge(a.root,i)},r,{classes:a}))}),yf=dZ,hZ=["className","id"],fZ=t=>{const{classes:e}=t;return Le({root:["root"]},eZ,e)},pZ=de(yt,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),mZ=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiDialogTitle"}),{className:i,id:s}=r,a=pe(r,hZ),o=r,l=fZ(o),{titleId:c=s}=P.useContext(ON);return S.jsx(pZ,$({component:"h2",className:ge(l.root,i),ownerState:o,ref:n,variant:"h6",id:s??c},a))}),Xw=mZ;function gZ(t){return Fe("MuiDivider",t)}const vZ=Be("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),R_=vZ,yZ=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],bZ=t=>{const{absolute:e,children:n,classes:r,flexItem:i,light:s,orientation:a,textAlign:o,variant:l}=t;return Le({root:["root",e&&"absolute",l,s&&"light",a==="vertical"&&"vertical",i&&"flexItem",n&&"withChildren",n&&a==="vertical"&&"withChildrenVertical",o==="right"&&a!=="vertical"&&"textAlignRight",o==="left"&&a!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",a==="vertical"&&"wrapperVertical"]},gZ,r)},SZ=de("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,n.orientation==="vertical"&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&n.orientation==="vertical"&&e.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&e.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&e.textAlignLeft]}})(({theme:t,ownerState:e})=>$({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},e.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},e.light&&{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:xt(t.palette.divider,.08)},e.variant==="inset"&&{marginLeft:72},e.variant==="middle"&&e.orientation==="horizontal"&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},e.variant==="middle"&&e.orientation==="vertical"&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},e.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},e.flexItem&&{alignSelf:"stretch",height:"auto"}),({theme:t,ownerState:e})=>$({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,top:"50%",content:'""',transform:"translateY(50%)"}}),({theme:t,ownerState:e})=>$({},e.children&&e.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:`thin solid ${(t.vars||t).palette.divider}`,transform:"translateX(0%)"}}),({ownerState:t})=>$({},t.textAlign==="right"&&t.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},t.textAlign==="left"&&t.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),xZ=de("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,n.orientation==="vertical"&&e.wrapperVertical]}})(({theme:t,ownerState:e})=>$({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`},e.orientation==="vertical"&&{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`})),wZ=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiDivider"}),{absolute:i=!1,children:s,className:a,component:o=s?"div":"hr",flexItem:l=!1,light:c=!1,orientation:u="horizontal",role:d=o!=="hr"?"separator":void 0,textAlign:h="center",variant:p="fullWidth"}=r,f=pe(r,yZ),m=$({},r,{absolute:i,component:o,flexItem:l,light:c,orientation:u,role:d,textAlign:h,variant:p}),g=bZ(m);return S.jsx(SZ,$({as:o,className:ge(g.root,a),role:d,ref:n,ownerState:m},f,{children:s?S.jsx(xZ,{className:g.wrapper,ownerState:m,children:s}):null}))}),bd=wZ,CZ=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function EZ(t,e,n){const r=e.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),s=as(e);let a;if(e.fakeTransform)a=e.fakeTransform;else{const c=s.getComputedStyle(e);a=c.getPropertyValue("-webkit-transform")||c.getPropertyValue("transform")}let o=0,l=0;if(a&&a!=="none"&&typeof a=="string"){const c=a.split("(")[1].split(")")[0].split(",");o=parseInt(c[4],10),l=parseInt(c[5],10)}return t==="left"?i?`translateX(${i.right+o-r.left}px)`:`translateX(${s.innerWidth+o-r.left}px)`:t==="right"?i?`translateX(-${r.right-i.left-o}px)`:`translateX(-${r.left+r.width-o}px)`:t==="up"?i?`translateY(${i.bottom+l-r.top}px)`:`translateY(${s.innerHeight+l-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-l}px)`:`translateY(-${r.top+r.height-l}px)`}function TZ(t){return typeof t=="function"?t():t}function zm(t,e,n){const r=TZ(n),i=EZ(t,e,r);i&&(e.style.webkitTransform=i,e.style.transform=i)}const RZ=P.forwardRef(function(e,n){const r=Ar(),i={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:a,appear:o=!0,children:l,container:c,direction:u="down",easing:d=i,in:h,onEnter:p,onEntered:f,onEntering:m,onExit:g,onExited:v,onExiting:y,style:b,timeout:C=s,TransitionComponent:R=iT}=e,w=pe(e,CZ),E=P.useRef(null),k=gn(l.ref,E,n),T=B=>j=>{B&&(j===void 0?B(E.current):B(E.current,j))},_=T((B,j)=>{zm(u,B,c),oT(B),p&&p(B,j)}),D=T((B,j)=>{const q=vd({timeout:C,style:b,easing:d},{mode:"enter"});B.style.webkitTransition=r.transitions.create("-webkit-transform",$({},q)),B.style.transition=r.transitions.create("transform",$({},q)),B.style.webkitTransform="none",B.style.transform="none",m&&m(B,j)}),I=T(f),M=T(y),A=T(B=>{const j=vd({timeout:C,style:b,easing:d},{mode:"exit"});B.style.webkitTransition=r.transitions.create("-webkit-transform",j),B.style.transition=r.transitions.create("transform",j),zm(u,B,c),g&&g(B)}),O=T(B=>{B.style.webkitTransition="",B.style.transition="",v&&v(B)}),L=B=>{a&&a(E.current,B)},F=P.useCallback(()=>{E.current&&zm(u,E.current,c)},[u,c]);return P.useEffect(()=>{if(h||u==="down"||u==="right")return;const B=oc(()=>{E.current&&zm(u,E.current,c)}),j=as(E.current);return j.addEventListener("resize",B),()=>{B.clear(),j.removeEventListener("resize",B)}},[u,h,c]),P.useEffect(()=>{h||F()},[h,F]),S.jsx(R,$({nodeRef:E,onEnter:_,onEntered:I,onEntering:D,onExit:A,onExited:O,onExiting:M,addEndListener:L,appear:o,in:h,timeout:C},w,{children:(B,j)=>P.cloneElement(l,$({ref:k,style:$({visibility:B==="exited"&&!h?"hidden":void 0},b,l.props.style)},j))}))}),kZ=RZ;function PZ(t){return Fe("MuiDrawer",t)}Be("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const _Z=["BackdropProps"],AZ=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],DN=(t,e)=>{const{ownerState:n}=t;return[e.root,(n.variant==="permanent"||n.variant==="persistent")&&e.docked,e.modal]},OZ=t=>{const{classes:e,anchor:n,variant:r}=t,i={root:["root"],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${ye(n)}`,r!=="temporary"&&`paperAnchorDocked${ye(n)}`]};return Le(i,PZ,e)},DZ=de(Ro,{name:"MuiDrawer",slot:"Root",overridesResolver:DN})(({theme:t})=>({zIndex:(t.vars||t).zIndex.drawer})),k_=de("div",{shouldForwardProp:Gr,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:DN})({flex:"0 0 auto"}),IZ=de(hs,{name:"MuiDrawer",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`paperAnchor${ye(n.anchor)}`],n.variant!=="temporary"&&e[`paperAnchorDocked${ye(n.anchor)}`]]}})(({theme:t,ownerState:e})=>$({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},e.anchor==="left"&&{left:0},e.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="right"&&{right:0},e.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="left"&&e.variant!=="temporary"&&{borderRight:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="top"&&e.variant!=="temporary"&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="right"&&e.variant!=="temporary"&&{borderLeft:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="bottom"&&e.variant!=="temporary"&&{borderTop:`1px solid ${(t.vars||t).palette.divider}`})),IN={left:"right",right:"left",top:"down",bottom:"up"};function MZ(t){return["left","right"].indexOf(t)!==-1}function NZ(t,e){return t.direction==="rtl"&&MZ(e)?IN[e]:e}const FZ=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiDrawer"}),i=Ar(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:a="left",BackdropProps:o,children:l,className:c,elevation:u=16,hideBackdrop:d=!1,ModalProps:{BackdropProps:h}={},onClose:p,open:f=!1,PaperProps:m={},SlideProps:g,TransitionComponent:v=kZ,transitionDuration:y=s,variant:b="temporary"}=r,C=pe(r.ModalProps,_Z),R=pe(r,AZ),w=P.useRef(!1);P.useEffect(()=>{w.current=!0},[]);const E=NZ(i,a),T=$({},r,{anchor:a,elevation:u,open:f,variant:b},R),_=OZ(T),D=S.jsx(IZ,$({elevation:b==="temporary"?u:0,square:!0},m,{className:ge(_.paper,m.className),ownerState:T,children:l}));if(b==="permanent")return S.jsx(k_,$({className:ge(_.root,_.docked,c),ownerState:T,ref:n},R,{children:D}));const I=S.jsx(v,$({in:f,direction:IN[E],timeout:y,appear:w.current},g,{children:D}));return b==="persistent"?S.jsx(k_,$({className:ge(_.root,_.docked,c),ownerState:T,ref:n},R,{children:I})):S.jsx(DZ,$({BackdropProps:$({},o,h,{transitionDuration:y}),className:ge(_.root,_.modal,c),open:f,ownerState:T,onClose:p,hideBackdrop:d,ref:n},R,C,{children:I}))}),$Z=FZ,LZ=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],BZ=t=>{const{classes:e,disableUnderline:n}=t,i=Le({root:["root",!n&&"underline"],input:["input"]},fX,e);return $({},e,i)},jZ=de(My,{shouldForwardProp:t=>Gr(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Dy(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{var n;const r=t.palette.mode==="light",i=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return $({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},[`&.${bl.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},[`&.${bl.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:o}},!e.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(n=(t.vars||t).palette[e.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${bl.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${bl.error}`]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&:before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${bl.disabled}, .${bl.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${bl.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&$({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),qZ=de(Ny,{name:"MuiFilledInput",slot:"Input",overridesResolver:Iy})(({theme:t,ownerState:e})=>$({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9})),MN=P.forwardRef(function(e,n){var r,i,s,a;const o=$e({props:e,name:"MuiFilledInput"}),{components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:h=!1,slotProps:p,slots:f={},type:m="text"}=o,g=pe(o,LZ),v=$({},o,{fullWidth:u,inputComponent:d,multiline:h,type:m}),y=BZ(o),b={root:{ownerState:v},input:{ownerState:v}},C=p??c?li(p??c,b):b,R=(r=(i=f.root)!=null?i:l.Root)!=null?r:jZ,w=(s=(a=f.input)!=null?a:l.Input)!=null?s:qZ;return S.jsx(Fy,$({slots:{root:R,input:w},componentsProps:C,fullWidth:u,inputComponent:d,multiline:h,ref:n,type:m},g,{classes:y}))});MN.muiName="Input";const NN=MN;function zZ(t){return Fe("MuiFormControl",t)}Be("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const HZ=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],UZ=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${ye(n)}`,r&&"fullWidth"]};return Le(i,zZ,e)},VZ=de("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:t},e)=>$({},e.root,e[`margin${ye(t.margin)}`],t.fullWidth&&e.fullWidth)})(({ownerState:t})=>$({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},t.margin==="normal"&&{marginTop:16,marginBottom:8},t.margin==="dense"&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})),WZ=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiFormControl"}),{children:i,className:s,color:a="primary",component:o="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:p="none",required:f=!1,size:m="medium",variant:g="outlined"}=r,v=pe(r,HZ),y=$({},r,{color:a,component:o,disabled:l,error:c,fullWidth:d,hiddenLabel:h,margin:p,required:f,size:m,variant:g}),b=UZ(y),[C,R]=P.useState(()=>{let M=!1;return i&&P.Children.forEach(i,A=>{if(!hf(A,["Input","Select"]))return;const O=hf(A,["Select"])?A.props.input:A;O&&nX(O.props)&&(M=!0)}),M}),[w,E]=P.useState(()=>{let M=!1;return i&&P.Children.forEach(i,A=>{hf(A,["Input","Select"])&&lT(A.props,!0)&&(M=!0)}),M}),[k,T]=P.useState(!1);l&&k&&T(!1);const _=u!==void 0&&!l?u:k;let D;const I=P.useMemo(()=>({adornedStart:C,setAdornedStart:R,color:a,disabled:l,error:c,filled:w,focused:_,fullWidth:d,hiddenLabel:h,size:m,onBlur:()=>{T(!1)},onEmpty:()=>{E(!1)},onFilled:()=>{E(!0)},onFocus:()=>{T(!0)},registerEffect:D,required:f,variant:g}),[C,a,l,c,w,_,d,h,D,f,m,g]);return S.jsx(Oy.Provider,{value:I,children:S.jsx(VZ,$({as:o,ownerState:y,className:ge(b.root,s),ref:n},v,{children:i}))})}),Va=WZ;function GZ(t){return Fe("MuiFormControlLabel",t)}const KZ=Be("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),Hm=KZ,YZ=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","slotProps","value"],JZ=t=>{const{classes:e,disabled:n,labelPlacement:r,error:i}=t,s={root:["root",n&&"disabled",`labelPlacement${ye(r)}`,i&&"error"],label:["label",n&&"disabled"]};return Le(s,GZ,e)},XZ=de("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Hm.label}`]:e.label},e.root,e[`labelPlacement${ye(n.labelPlacement)}`]]}})(({theme:t,ownerState:e})=>$({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Hm.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Hm.label}`]:{[`&.${Hm.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),QZ=P.forwardRef(function(e,n){var r;const i=$e({props:e,name:"MuiFormControlLabel"}),{className:s,componentsProps:a={},control:o,disabled:l,disableTypography:c,label:u,labelPlacement:d="end",slotProps:h={}}=i,p=pe(i,YZ),f=ka();let m=l;typeof m>"u"&&typeof o.props.disabled<"u"&&(m=o.props.disabled),typeof m>"u"&&f&&(m=f.disabled);const g={disabled:m};["checked","name","onChange","value","inputRef"].forEach(w=>{typeof o.props[w]>"u"&&typeof i[w]<"u"&&(g[w]=i[w])});const v=fl({props:i,muiFormControl:f,states:["error"]}),y=$({},i,{disabled:m,labelPlacement:d,error:v.error}),b=JZ(y),C=(r=h.typography)!=null?r:a.typography;let R=u;return R!=null&&R.type!==yt&&!c&&(R=S.jsx(yt,$({component:"span"},C,{className:ge(b.label,C==null?void 0:C.className),children:R}))),S.jsxs(XZ,$({className:ge(b.root,s),ownerState:y,ref:n},p,{children:[P.cloneElement(o,g),R]}))}),Ou=QZ;function ZZ(t){return Fe("MuiFormGroup",t)}Be("MuiFormGroup",["root","row","error"]);const eee=["className","row"],tee=t=>{const{classes:e,row:n,error:r}=t;return Le({root:["root",n&&"row",r&&"error"]},ZZ,e)},nee=de("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.row&&e.row]}})(({ownerState:t})=>$({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})),ree=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiFormGroup"}),{className:i,row:s=!1}=r,a=pe(r,eee),o=ka(),l=fl({props:r,muiFormControl:o,states:["error"]}),c=$({},r,{row:s,error:l.error}),u=tee(c);return S.jsx(nee,$({className:ge(u.root,i),ownerState:c,ref:n},a))}),dT=ree;function iee(t){return Fe("MuiFormHelperText",t)}const see=Be("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),P_=see;var __;const aee=["children","className","component","disabled","error","filled","focused","margin","required","variant"],oee=t=>{const{classes:e,contained:n,size:r,disabled:i,error:s,filled:a,focused:o,required:l}=t,c={root:["root",i&&"disabled",s&&"error",r&&`size${ye(r)}`,n&&"contained",o&&"focused",a&&"filled",l&&"required"]};return Le(c,iee,e)},lee=de("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${ye(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(({theme:t,ownerState:e})=>$({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${P_.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${P_.error}`]:{color:(t.vars||t).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),cee=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiFormHelperText"}),{children:i,className:s,component:a="p"}=r,o=pe(r,aee),l=ka(),c=fl({props:r,muiFormControl:l,states:["variant","size","disabled","error","filled","focused","required"]}),u=$({},r,{component:a,contained:c.variant==="filled"||c.variant==="outlined",variant:c.variant,size:c.size,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),d=oee(u);return S.jsx(lee,$({as:a,ownerState:u,className:ge(d.root,s),ref:n},o,{children:i===" "?__||(__=S.jsx("span",{className:"notranslate",children:""})):i}))}),uee=cee;function dee(t){return Fe("MuiFormLabel",t)}const hee=Be("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),bf=hee,fee=["children","className","color","component","disabled","error","filled","focused","required"],pee=t=>{const{classes:e,color:n,focused:r,disabled:i,error:s,filled:a,required:o}=t,l={root:["root",`color${ye(n)}`,i&&"disabled",s&&"error",a&&"filled",r&&"focused",o&&"required"],asterisk:["asterisk",s&&"error"]};return Le(l,dee,e)},mee=de("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:t},e)=>$({},e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled)})(({theme:t,ownerState:e})=>$({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${bf.focused}`]:{color:(t.vars||t).palette[e.color].main},[`&.${bf.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${bf.error}`]:{color:(t.vars||t).palette.error.main}})),gee=de("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${bf.error}`]:{color:(t.vars||t).palette.error.main}})),vee=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiFormLabel"}),{children:i,className:s,component:a="label"}=r,o=pe(r,fee),l=ka(),c=fl({props:r,muiFormControl:l,states:["color","required","focused","disabled","error","filled"]}),u=$({},r,{color:c.color||"primary",component:a,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),d=pee(u);return S.jsxs(mee,$({as:a,ownerState:u,className:ge(d.root,s),ref:n},o,{children:[i,c.required&&S.jsxs(gee,{ownerState:u,"aria-hidden":!0,className:d.asterisk,children:["","*"]})]}))}),Qw=vee,yee=P.createContext(),A_=yee;function bee(t){return Fe("MuiGrid",t)}const See=[0,1,2,3,4,5,6,7,8,9,10],xee=["column-reverse","column","row-reverse","row"],wee=["nowrap","wrap-reverse","wrap"],Rh=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],rp=Be("MuiGrid",["root","container","item","zeroMinWidth",...See.map(t=>`spacing-xs-${t}`),...xee.map(t=>`direction-xs-${t}`),...wee.map(t=>`wrap-xs-${t}`),...Rh.map(t=>`grid-xs-${t}`),...Rh.map(t=>`grid-sm-${t}`),...Rh.map(t=>`grid-md-${t}`),...Rh.map(t=>`grid-lg-${t}`),...Rh.map(t=>`grid-xl-${t}`)]),Cee=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Vu(t){const e=parseFloat(t);return`${e}${String(t).replace(String(e),"")||"px"}`}function Eee({theme:t,ownerState:e}){let n;return t.breakpoints.keys.reduce((r,i)=>{let s={};if(e[i]&&(n=e[i]),!n)return r;if(n===!0)s={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const a=Gl({values:e.columns,breakpoints:t.breakpoints.values}),o=typeof a=="object"?a[i]:a;if(o==null)return r;const l=`${Math.round(n/o*1e8)/1e6}%`;let c={};if(e.container&&e.item&&e.columnSpacing!==0){const u=t.spacing(e.columnSpacing);if(u!=="0px"){const d=`calc(${l} + ${Vu(u)})`;c={flexBasis:d,maxWidth:d}}}s=$({flexBasis:l,flexGrow:0,maxWidth:l},c)}return t.breakpoints.values[i]===0?Object.assign(r,s):r[t.breakpoints.up(i)]=s,r},{})}function Tee({theme:t,ownerState:e}){const n=Gl({values:e.direction,breakpoints:t.breakpoints.values});return fi({theme:t},n,r=>{const i={flexDirection:r};return r.indexOf("column")===0&&(i[`& > .${rp.item}`]={maxWidth:"none"}),i})}function FN({breakpoints:t,values:e}){let n="";Object.keys(e).forEach(i=>{n===""&&e[i]!==0&&(n=i)});const r=Object.keys(t).sort((i,s)=>t[i]-t[s]);return r.slice(0,r.indexOf(n))}function Ree({theme:t,ownerState:e}){const{container:n,rowSpacing:r}=e;let i={};if(n&&r!==0){const s=Gl({values:r,breakpoints:t.breakpoints.values});let a;typeof s=="object"&&(a=FN({breakpoints:t.breakpoints.values,values:s})),i=fi({theme:t},s,(o,l)=>{var c;const u=t.spacing(o);return u!=="0px"?{marginTop:`-${Vu(u)}`,[`& > .${rp.item}`]:{paddingTop:Vu(u)}}:(c=a)!=null&&c.includes(l)?{}:{marginTop:0,[`& > .${rp.item}`]:{paddingTop:0}}})}return i}function kee({theme:t,ownerState:e}){const{container:n,columnSpacing:r}=e;let i={};if(n&&r!==0){const s=Gl({values:r,breakpoints:t.breakpoints.values});let a;typeof s=="object"&&(a=FN({breakpoints:t.breakpoints.values,values:s})),i=fi({theme:t},s,(o,l)=>{var c;const u=t.spacing(o);return u!=="0px"?{width:`calc(100% + ${Vu(u)})`,marginLeft:`-${Vu(u)}`,[`& > .${rp.item}`]:{paddingLeft:Vu(u)}}:(c=a)!=null&&c.includes(l)?{}:{width:"100%",marginLeft:0,[`& > .${rp.item}`]:{paddingLeft:0}}})}return i}function Pee(t,e,n={}){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[n[`spacing-xs-${String(t)}`]];const r=[];return e.forEach(i=>{const s=t[i];Number(s)>0&&r.push(n[`spacing-${i}-${String(s)}`])}),r}const _ee=de("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{container:r,direction:i,item:s,spacing:a,wrap:o,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=Pee(a,c,e));const d=[];return c.forEach(h=>{const p=n[h];p&&d.push(e[`grid-${h}-${String(p)}`])}),[e.root,r&&e.container,s&&e.item,l&&e.zeroMinWidth,...u,i!=="row"&&e[`direction-xs-${String(i)}`],o!=="wrap"&&e[`wrap-xs-${String(o)}`],...d]}})(({ownerState:t})=>$({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},t.wrap!=="wrap"&&{flexWrap:t.wrap}),Tee,Ree,kee,Eee);function Aee(t,e){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[`spacing-xs-${String(t)}`];const n=[];return e.forEach(r=>{const i=t[r];if(Number(i)>0){const s=`spacing-${r}-${String(i)}`;n.push(s)}}),n}const Oee=t=>{const{classes:e,container:n,direction:r,item:i,spacing:s,wrap:a,zeroMinWidth:o,breakpoints:l}=t;let c=[];n&&(c=Aee(s,l));const u=[];l.forEach(h=>{const p=t[h];p&&u.push(`grid-${h}-${String(p)}`)});const d={root:["root",n&&"container",i&&"item",o&&"zeroMinWidth",...c,r!=="row"&&`direction-xs-${String(r)}`,a!=="wrap"&&`wrap-xs-${String(a)}`,...u]};return Le(d,bee,e)},Dee=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiGrid"}),{breakpoints:i}=Ar(),s=Ry(r),{className:a,columns:o,columnSpacing:l,component:c="div",container:u=!1,direction:d="row",item:h=!1,rowSpacing:p,spacing:f=0,wrap:m="wrap",zeroMinWidth:g=!1}=s,v=pe(s,Cee),y=p||f,b=l||f,C=P.useContext(A_),R=u?o||12:C,w={},E=$({},v);i.keys.forEach(_=>{v[_]!=null&&(w[_]=v[_],delete E[_])});const k=$({},s,{columns:R,container:u,direction:d,item:h,rowSpacing:y,columnSpacing:b,wrap:m,zeroMinWidth:g,spacing:f},w,{breakpoints:i.keys}),T=Oee(k);return S.jsx(A_.Provider,{value:R,children:S.jsx(_ee,$({ownerState:k,className:ge(T.root,a),as:c,ref:n},E))})}),at=Dee,Iee=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Zw(t){return`scale(${t}, ${t**2})`}const Mee={entering:{opacity:1,transform:Zw(1)},entered:{opacity:1,transform:"none"}},iS=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),$N=P.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:a,in:o,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:h,onExiting:p,style:f,timeout:m="auto",TransitionComponent:g=iT}=e,v=pe(e,Iee),y=P.useRef(),b=P.useRef(),C=Ar(),R=P.useRef(null),w=gn(R,s.ref,n),E=O=>L=>{if(O){const F=R.current;L===void 0?O(F):O(F,L)}},k=E(u),T=E((O,L)=>{oT(O);const{duration:F,delay:B,easing:j}=vd({style:f,timeout:m,easing:a},{mode:"enter"});let q;m==="auto"?(q=C.transitions.getAutoHeightDuration(O.clientHeight),b.current=q):q=F,O.style.transition=[C.transitions.create("opacity",{duration:q,delay:B}),C.transitions.create("transform",{duration:iS?q:q*.666,delay:B,easing:j})].join(","),l&&l(O,L)}),_=E(c),D=E(p),I=E(O=>{const{duration:L,delay:F,easing:B}=vd({style:f,timeout:m,easing:a},{mode:"exit"});let j;m==="auto"?(j=C.transitions.getAutoHeightDuration(O.clientHeight),b.current=j):j=L,O.style.transition=[C.transitions.create("opacity",{duration:j,delay:F}),C.transitions.create("transform",{duration:iS?j:j*.666,delay:iS?F:F||j*.333,easing:B})].join(","),O.style.opacity=0,O.style.transform=Zw(.75),d&&d(O)}),M=E(h),A=O=>{m==="auto"&&(y.current=setTimeout(O,b.current||0)),r&&r(R.current,O)};return P.useEffect(()=>()=>{clearTimeout(y.current)},[]),S.jsx(g,$({appear:i,in:o,nodeRef:R,onEnter:T,onEntered:_,onEntering:k,onExit:I,onExited:M,onExiting:D,addEndListener:A,timeout:m==="auto"?null:m},v,{children:(O,L)=>P.cloneElement(s,$({style:$({opacity:0,transform:Zw(.75),visibility:O==="exited"&&!o?"hidden":void 0},Mee[O],f,s.props.style),ref:w},L))}))});$N.muiSupportAuto=!0;const eC=$N,Nee=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Fee=t=>{const{classes:e,disableUnderline:n}=t,i=Le({root:["root",!n&&"underline"],input:["input"]},cX,e);return $({},e,i)},$ee=de(My,{shouldForwardProp:t=>Gr(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Dy(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{let r=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),$({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(t.vars||t).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Th.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Th.error}`]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&:before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Th.disabled}, .${Th.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Th.disabled}:before`]:{borderBottomStyle:"dotted"}})}),Lee=de(Ny,{name:"MuiInput",slot:"Input",overridesResolver:Iy})({}),LN=P.forwardRef(function(e,n){var r,i,s,a;const o=$e({props:e,name:"MuiInput"}),{disableUnderline:l,components:c={},componentsProps:u,fullWidth:d=!1,inputComponent:h="input",multiline:p=!1,slotProps:f,slots:m={},type:g="text"}=o,v=pe(o,Nee),y=Fee(o),C={root:{ownerState:{disableUnderline:l}}},R=f??u?li(f??u,C):C,w=(r=(i=m.root)!=null?i:c.Root)!=null?r:$ee,E=(s=(a=m.input)!=null?a:c.Input)!=null?s:Lee;return S.jsx(Fy,$({slots:{root:w,input:E},slotProps:R,fullWidth:d,inputComponent:h,multiline:p,ref:n,type:g},v,{classes:y}))});LN.muiName="Input";const BN=LN;function Bee(t){return Fe("MuiInputAdornment",t)}const jee=Be("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),O_=jee;var D_;const qee=["children","className","component","disablePointerEvents","disableTypography","position","variant"],zee=(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${ye(n.position)}`],n.disablePointerEvents===!0&&e.disablePointerEvents,e[n.variant]]},Hee=t=>{const{classes:e,disablePointerEvents:n,hiddenLabel:r,position:i,size:s,variant:a}=t,o={root:["root",n&&"disablePointerEvents",i&&`position${ye(i)}`,a,r&&"hiddenLabel",s&&`size${ye(s)}`]};return Le(o,Bee,e)},Uee=de("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:zee})(({theme:t,ownerState:e})=>$({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},e.variant==="filled"&&{[`&.${O_.positionStart}&:not(.${O_.hiddenLabel})`]:{marginTop:16}},e.position==="start"&&{marginRight:8},e.position==="end"&&{marginLeft:8},e.disablePointerEvents===!0&&{pointerEvents:"none"})),Vee=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiInputAdornment"}),{children:i,className:s,component:a="div",disablePointerEvents:o=!1,disableTypography:l=!1,position:c,variant:u}=r,d=pe(r,qee),h=ka()||{};let p=u;u&&h.variant,h&&!p&&(p=h.variant);const f=$({},r,{hiddenLabel:h.hiddenLabel,size:h.size,disablePointerEvents:o,position:c,variant:p}),m=Hee(f);return S.jsx(Oy.Provider,{value:null,children:S.jsx(Uee,$({as:a,ownerState:f,className:ge(m.root,s),ref:n},d,{children:typeof i=="string"&&!l?S.jsx(yt,{color:"text.secondary",children:i}):S.jsxs(P.Fragment,{children:[c==="start"?D_||(D_=S.jsx("span",{className:"notranslate",children:""})):null,i]})}))})}),jN=Vee;function Wee(t){return Fe("MuiInputLabel",t)}Be("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Gee=["disableAnimation","margin","shrink","variant","className"],Kee=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:s,variant:a,required:o}=t,c=Le({root:["root",n&&"formControl",!s&&"animated",i&&"shrink",r==="small"&&"sizeSmall",a],asterisk:[o&&"asterisk"]},Wee,e);return $({},e,c)},Yee=de(Qw,{shouldForwardProp:t=>Gr(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${bf.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,e[n.variant]]}})(({theme:t,ownerState:e})=>$({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},e.variant==="filled"&&$({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&$({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&$({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),Jee=P.forwardRef(function(e,n){const r=$e({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,shrink:s,className:a}=r,o=pe(r,Gee),l=ka();let c=s;typeof c>"u"&&l&&(c=l.filled||l.focused||l.adornedStart);const u=fl({props:r,muiFormControl:l,states:["size","variant","required"]}),d=$({},r,{disableAnimation:i,formControl:l,shrink:c,size:u.size,variant:u.variant,required:u.required}),h=Kee(d);return S.jsx(Yee,$({"data-shrink":c,ownerState:d,ref:n,className:ge(h.root,a)},o,{classes:h}))}),Yl=Jee,Xee=P.createContext({}),ca=Xee;function Qee(t){return Fe("MuiList",t)}Be("MuiList",["root","padding","dense","subheader"]);const Zee=["children","className","component","dense","disablePadding","subheader"],ete=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return Le({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},Qee,e)},tte=de("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})(({ownerState:t})=>$({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),nte=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiList"}),{children:i,className:s,component:a="ul",dense:o=!1,disablePadding:l=!1,subheader:c}=r,u=pe(r,Zee),d=P.useMemo(()=>({dense:o}),[o]),h=$({},r,{component:a,dense:o,disablePadding:l}),p=ete(h);return S.jsx(ca.Provider,{value:d,children:S.jsxs(tte,$({as:a,className:ge(p.root,s),ref:n,ownerState:h},u,{children:[c,i]}))})}),pl=nte;function rte(t){return Fe("MuiListItem",t)}const ite=Be("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),pu=ite;function ste(t){return Fe("MuiListItemButton",t)}const ate=Be("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),mu=ate,ote=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],lte=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]},cte=t=>{const{alignItems:e,classes:n,dense:r,disabled:i,disableGutters:s,divider:a,selected:o}=t,c=Le({root:["root",r&&"dense",!s&&"gutters",a&&"divider",i&&"disabled",e==="flex-start"&&"alignItemsFlexStart",o&&"selected"]},ste,n);return $({},n,c)},ute=de(co,{shouldForwardProp:t=>Gr(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:lte})(({theme:t,ownerState:e})=>$({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${mu.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:xt(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${mu.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:xt(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${mu.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:xt(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:xt(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${mu.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${mu.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},e.alignItems==="flex-start"&&{alignItems:"flex-start"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.dense&&{paddingTop:4,paddingBottom:4})),dte=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:s=!1,component:a="div",children:o,dense:l=!1,disableGutters:c=!1,divider:u=!1,focusVisibleClassName:d,selected:h=!1,className:p}=r,f=pe(r,ote),m=P.useContext(ca),g=P.useMemo(()=>({dense:l||m.dense||!1,alignItems:i,disableGutters:c}),[i,m.dense,l,c]),v=P.useRef(null);os(()=>{s&&v.current&&v.current.focus()},[s]);const y=$({},r,{alignItems:i,dense:g.dense,disableGutters:c,divider:u,selected:h}),b=cte(y),C=gn(v,n);return S.jsx(ca.Provider,{value:g,children:S.jsx(ute,$({ref:C,href:f.href||f.to,component:(f.href||f.to)&&a==="div"?"button":a,focusVisibleClassName:ge(b.focusVisible,d),ownerState:y,className:ge(b.root,p)},f,{classes:b,children:o}))})}),hte=dte;function fte(t){return Fe("MuiListItemSecondaryAction",t)}Be("MuiListItemSecondaryAction",["root","disableGutters"]);const pte=["className"],mte=t=>{const{disableGutters:e,classes:n}=t;return Le({root:["root",e&&"disableGutters"]},fte,n)},gte=de("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})(({ownerState:t})=>$({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})),qN=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiListItemSecondaryAction"}),{className:i}=r,s=pe(r,pte),a=P.useContext(ca),o=$({},r,{disableGutters:a.disableGutters}),l=mte(o);return S.jsx(gte,$({className:ge(l.root,i),ownerState:o,ref:n},s))});qN.muiName="ListItemSecondaryAction";const vte=qN,yte=["className"],bte=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Ste=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.button&&e.button,n.hasSecondaryAction&&e.secondaryAction]},xte=t=>{const{alignItems:e,button:n,classes:r,dense:i,disabled:s,disableGutters:a,disablePadding:o,divider:l,hasSecondaryAction:c,selected:u}=t;return Le({root:["root",i&&"dense",!a&&"gutters",!o&&"padding",l&&"divider",s&&"disabled",n&&"button",e==="flex-start"&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]},rte,r)},wte=de("div",{name:"MuiListItem",slot:"Root",overridesResolver:Ste})(({theme:t,ownerState:e})=>$({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!e.disablePadding&&$({paddingTop:8,paddingBottom:8},e.dense&&{paddingTop:4,paddingBottom:4},!e.disableGutters&&{paddingLeft:16,paddingRight:16},!!e.secondaryAction&&{paddingRight:48}),!!e.secondaryAction&&{[`& > .${mu.root}`]:{paddingRight:48}},{[`&.${pu.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${pu.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:xt(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${pu.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:xt(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${pu.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.alignItems==="flex-start"&&{alignItems:"flex-start"},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},e.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${pu.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:xt(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:xt(t.palette.primary.main,t.palette.action.selectedOpacity)}}},e.hasSecondaryAction&&{paddingRight:48})),Cte=de("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),Ete=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiListItem"}),{alignItems:i="center",autoFocus:s=!1,button:a=!1,children:o,className:l,component:c,components:u={},componentsProps:d={},ContainerComponent:h="li",ContainerProps:{className:p}={},dense:f=!1,disabled:m=!1,disableGutters:g=!1,disablePadding:v=!1,divider:y=!1,focusVisibleClassName:b,secondaryAction:C,selected:R=!1,slotProps:w={},slots:E={}}=r,k=pe(r.ContainerProps,yte),T=pe(r,bte),_=P.useContext(ca),D=P.useMemo(()=>({dense:f||_.dense||!1,alignItems:i,disableGutters:g}),[i,_.dense,f,g]),I=P.useRef(null);os(()=>{s&&I.current&&I.current.focus()},[s]);const M=P.Children.toArray(o),A=M.length&&hf(M[M.length-1],["ListItemSecondaryAction"]),O=$({},r,{alignItems:i,autoFocus:s,button:a,dense:D.dense,disabled:m,disableGutters:g,disablePadding:v,divider:y,hasSecondaryAction:A,selected:R}),L=xte(O),F=gn(I,n),B=E.root||u.Root||wte,j=w.root||d.root||{},q=$({className:ge(L.root,j.className,l),disabled:m},T);let V=c||"li";return a&&(q.component=c||"div",q.focusVisibleClassName=ge(pu.focusVisible,b),V=co),A?(V=!q.component&&!c?"div":V,h==="li"&&(V==="li"?V="div":q.component==="li"&&(q.component="div")),S.jsx(ca.Provider,{value:D,children:S.jsxs(Cte,$({as:h,className:ge(L.container,p),ref:F,ownerState:O},k,{children:[S.jsx(B,$({},j,!dc(B)&&{as:V,ownerState:$({},O,j.ownerState)},q,{children:M})),M.pop()]}))})):S.jsx(ca.Provider,{value:D,children:S.jsxs(B,$({},j,{as:V,ref:F},!dc(B)&&{ownerState:$({},O,j.ownerState)},q,{children:[M,C&&S.jsx(vte,{children:C})]}))})}),qn=Ete,Tte=Be("MuiListItemIcon",["root","alignItemsFlexStart"]),I_=Tte;function Rte(t){return Fe("MuiListItemText",t)}const kte=Be("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),N0=kte,Pte=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],_te=t=>{const{classes:e,inset:n,primary:r,secondary:i,dense:s}=t;return Le({root:["root",n&&"inset",s&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Rte,e)},Ate=de("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${N0.primary}`]:e.primary},{[`& .${N0.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})(({ownerState:t})=>$({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})),Ote=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiListItemText"}),{children:i,className:s,disableTypography:a=!1,inset:o=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:d}=r,h=pe(r,Pte),{dense:p}=P.useContext(ca);let f=l??i,m=u;const g=$({},r,{disableTypography:a,inset:o,primary:!!f,secondary:!!m,dense:p}),v=_te(g);return f!=null&&f.type!==yt&&!a&&(f=S.jsx(yt,$({variant:p?"body2":"body1",className:v.primary,component:c!=null&&c.variant?void 0:"span",display:"block"},c,{children:f}))),m!=null&&m.type!==yt&&!a&&(m=S.jsx(yt,$({variant:"body2",className:v.secondary,color:"text.secondary",display:"block"},d,{children:m}))),S.jsxs(Ate,$({className:ge(v.root,s),ownerState:g,ref:n},h,{children:[f,m]}))}),Qn=Ote,Dte=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function sS(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function M_(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function zN(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}function kh(t,e,n,r,i,s){let a=!1,o=i(t,e,e?n:!1);for(;o;){if(o===t.firstChild){if(a)return!1;a=!0}const l=r?!1:o.disabled||o.getAttribute("aria-disabled")==="true";if(!o.hasAttribute("tabindex")||!zN(o,s)||l)o=i(t,o,n);else return o.focus(),!0}return!1}const Ite=P.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:a,className:o,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,h=pe(e,Dte),p=P.useRef(null),f=P.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});os(()=>{i&&p.current.focus()},[i]),P.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(b,C)=>{const R=!p.current.style.width;if(b.clientHeight<p.current.clientHeight&&R){const w=`${F6(yr(b))}px`;p.current.style[C.direction==="rtl"?"paddingLeft":"paddingRight"]=w,p.current.style.width=`calc(100% + ${w})`}return p.current}}),[]);const m=b=>{const C=p.current,R=b.key,w=yr(C).activeElement;if(R==="ArrowDown")b.preventDefault(),kh(C,w,c,l,sS);else if(R==="ArrowUp")b.preventDefault(),kh(C,w,c,l,M_);else if(R==="Home")b.preventDefault(),kh(C,null,c,l,sS);else if(R==="End")b.preventDefault(),kh(C,null,c,l,M_);else if(R.length===1){const E=f.current,k=R.toLowerCase(),T=performance.now();E.keys.length>0&&(T-E.lastTime>500?(E.keys=[],E.repeating=!0,E.previousKeyMatched=!0):E.repeating&&k!==E.keys[0]&&(E.repeating=!1)),E.lastTime=T,E.keys.push(k);const _=w&&!E.repeating&&zN(w,E);E.previousKeyMatched&&(_||kh(C,w,!1,l,sS,E))?b.preventDefault():E.previousKeyMatched=!1}u&&u(b)},g=gn(p,n);let v=-1;P.Children.forEach(a,(b,C)=>{P.isValidElement(b)&&(b.props.disabled||(d==="selectedMenu"&&b.props.selected||v===-1)&&(v=C),v===C&&(b.props.disabled||b.props.muiSkipListHighlight||b.type.muiSkipListHighlight)&&(v+=1,v>=a.length&&(v=-1)))});const y=P.Children.map(a,(b,C)=>{if(C===v){const R={};return s&&(R.autoFocus=!0),b.props.tabIndex===void 0&&d==="selectedMenu"&&(R.tabIndex=0),P.cloneElement(b,R)}return b});return S.jsx(pl,$({role:"menu",ref:g,className:o,onKeyDown:m,tabIndex:i?0:-1},h,{children:y}))}),Mte=Ite;function Nte(t){return Fe("MuiPopover",t)}Be("MuiPopover",["root","paper"]);const Fte=["onEntering"],$te=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function N_(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function F_(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function $_(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function aS(t){return typeof t=="function"?t():t}const Lte=t=>{const{classes:e}=t;return Le({root:["root"],paper:["paper"]},Nte,e)},Bte=de(Ro,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),jte=de(hs,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),qte=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiPopover"}),{action:i,anchorEl:s,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:o,anchorReference:l="anchorEl",children:c,className:u,container:d,elevation:h=8,marginThreshold:p=16,open:f,PaperProps:m={},transformOrigin:g={vertical:"top",horizontal:"left"},TransitionComponent:v=eC,transitionDuration:y="auto",TransitionProps:{onEntering:b}={}}=r,C=pe(r.TransitionProps,Fte),R=pe(r,$te),w=P.useRef(),E=gn(w,m.ref),k=$({},r,{anchorOrigin:a,anchorReference:l,elevation:h,marginThreshold:p,PaperProps:m,transformOrigin:g,TransitionComponent:v,transitionDuration:y,TransitionProps:C}),T=Lte(k),_=P.useCallback(()=>{if(l==="anchorPosition")return o;const q=aS(s),U=(q&&q.nodeType===1?q:yr(w.current).body).getBoundingClientRect();return{top:U.top+N_(U,a.vertical),left:U.left+F_(U,a.horizontal)}},[s,a.horizontal,a.vertical,o,l]),D=P.useCallback(q=>({vertical:N_(q,g.vertical),horizontal:F_(q,g.horizontal)}),[g.horizontal,g.vertical]),I=P.useCallback(q=>{const V={width:q.offsetWidth,height:q.offsetHeight},U=D(V);if(l==="none")return{top:null,left:null,transformOrigin:$_(U)};const ne=_();let W=ne.top-U.vertical,J=ne.left-U.horizontal;const K=W+V.height,Q=J+V.width,re=as(aS(s)),G=re.innerHeight-p,ie=re.innerWidth-p;if(W<p){const te=W-p;W-=te,U.vertical+=te}else if(K>G){const te=K-G;W-=te,U.vertical+=te}if(J<p){const te=J-p;J-=te,U.horizontal+=te}else if(Q>ie){const te=Q-ie;J-=te,U.horizontal+=te}return{top:`${Math.round(W)}px`,left:`${Math.round(J)}px`,transformOrigin:$_(U)}},[s,l,_,D,p]),[M,A]=P.useState(f),O=P.useCallback(()=>{const q=w.current;if(!q)return;const V=I(q);V.top!==null&&(q.style.top=V.top),V.left!==null&&(q.style.left=V.left),q.style.transformOrigin=V.transformOrigin,A(!0)},[I]),L=(q,V)=>{b&&b(q,V),O()},F=()=>{A(!1)};P.useEffect(()=>{f&&O()}),P.useImperativeHandle(i,()=>f?{updatePosition:()=>{O()}}:null,[f,O]),P.useEffect(()=>{if(!f)return;const q=oc(()=>{O()}),V=as(s);return V.addEventListener("resize",q),()=>{q.clear(),V.removeEventListener("resize",q)}},[s,f,O]);let B=y;y==="auto"&&!v.muiSupportAuto&&(B=void 0);const j=d||(s?yr(aS(s)).body:void 0);return S.jsx(Bte,$({BackdropProps:{invisible:!0},className:ge(T.root,u),container:j,open:f,ref:n,ownerState:k},R,{children:S.jsx(v,$({appear:!0,in:f,onEntering:L,onExited:F,timeout:B},C,{children:S.jsx(jte,$({elevation:h},m,{ref:E,className:ge(T.paper,m.className)},M?void 0:{style:$({},m.style,{opacity:0})},{ownerState:k,children:c}))}))}))}),zte=qte;function Hte(t){return Fe("MuiMenu",t)}Be("MuiMenu",["root","paper","list"]);const Ute=["onEntering"],Vte=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],Wte={vertical:"top",horizontal:"right"},Gte={vertical:"top",horizontal:"left"},Kte=t=>{const{classes:e}=t;return Le({root:["root"],paper:["paper"],list:["list"]},Hte,e)},Yte=de(zte,{shouldForwardProp:t=>Gr(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Jte=de(hs,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Xte=de(Mte,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),Qte=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiMenu"}),{autoFocus:i=!0,children:s,disableAutoFocusItem:a=!1,MenuListProps:o={},onClose:l,open:c,PaperProps:u={},PopoverClasses:d,transitionDuration:h="auto",TransitionProps:{onEntering:p}={},variant:f="selectedMenu"}=r,m=pe(r.TransitionProps,Ute),g=pe(r,Vte),v=Ar(),y=v.direction==="rtl",b=$({},r,{autoFocus:i,disableAutoFocusItem:a,MenuListProps:o,onEntering:p,PaperProps:u,transitionDuration:h,TransitionProps:m,variant:f}),C=Kte(b),R=i&&!a&&c,w=P.useRef(null),E=(_,D)=>{w.current&&w.current.adjustStyleForScrollbar(_,v),p&&p(_,D)},k=_=>{_.key==="Tab"&&(_.preventDefault(),l&&l(_,"tabKeyDown"))};let T=-1;return P.Children.map(s,(_,D)=>{P.isValidElement(_)&&(_.props.disabled||(f==="selectedMenu"&&_.props.selected||T===-1)&&(T=D))}),S.jsx(Yte,$({onClose:l,anchorOrigin:{vertical:"bottom",horizontal:y?"right":"left"},transformOrigin:y?Wte:Gte,PaperProps:$({as:Jte},u,{classes:$({},u.classes,{root:C.paper})}),className:C.root,open:c,ref:n,transitionDuration:h,TransitionProps:$({onEntering:E},m),ownerState:b},g,{classes:d,children:S.jsx(Xte,$({onKeyDown:k,actions:w,autoFocus:i&&(T===-1||a),autoFocusItem:R,variant:f},o,{className:ge(C.list,o.className),children:s}))}))}),hT=Qte;function Zte(t){return Fe("MuiMenuItem",t)}const ene=Be("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Ph=ene,tne=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],nne=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},rne=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:s,classes:a}=t,l=Le({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},Zte,a);return $({},a,l)},ine=de(co,{shouldForwardProp:t=>Gr(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:nne})(({theme:t,ownerState:e})=>$({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ph.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:xt(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${Ph.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:xt(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${Ph.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:xt(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:xt(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${Ph.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Ph.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${R_.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${R_.inset}`]:{marginLeft:52},[`& .${N0.root}`]:{marginTop:0,marginBottom:0},[`& .${N0.inset}`]:{paddingLeft:36},[`& .${I_.root}`]:{minWidth:36}},!e.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},e.dense&&$({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${I_.root} svg`]:{fontSize:"1.25rem"}}))),sne=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:a=!1,divider:o=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:h}=r,p=pe(r,tne),f=P.useContext(ca),m=P.useMemo(()=>({dense:a||f.dense||!1,disableGutters:l}),[f.dense,a,l]),g=P.useRef(null);os(()=>{i&&g.current&&g.current.focus()},[i]);const v=$({},r,{dense:m.dense,divider:o,disableGutters:l}),y=rne(r),b=gn(g,n);let C;return r.disabled||(C=d!==void 0?d:-1),S.jsx(ca.Provider,{value:m,children:S.jsx(ine,$({ref:b,role:u,tabIndex:C,component:s,focusVisibleClassName:ge(y.focusVisible,c),className:ge(y.root,h)},p,{ownerState:v,classes:y}))})}),Pn=sne;function ane(t){return Fe("MuiNativeSelect",t)}const one=Be("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),fT=one,lne=["className","disabled","error","IconComponent","inputRef","variant"],cne=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:a}=t,o={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${ye(n)}`,s&&"iconOpen",r&&"disabled"]};return Le(o,ane,e)},HN=({ownerState:t,theme:e})=>$({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":$({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${fT.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},t.variant==="filled"&&{"&&&":{paddingRight:32}},t.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),une=de("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Gr,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${fT.multiple}`]:e.multiple}]}})(HN),UN=({ownerState:t,theme:e})=>$({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${fT.disabled}`]:{color:(e.vars||e).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},t.variant==="filled"&&{right:7},t.variant==="outlined"&&{right:7}),dne=de("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${ye(n.variant)}`],n.open&&e.iconOpen]}})(UN),hne=P.forwardRef(function(e,n){const{className:r,disabled:i,error:s,IconComponent:a,inputRef:o,variant:l="standard"}=e,c=pe(e,lne),u=$({},e,{disabled:i,variant:l,error:s}),d=cne(u);return S.jsxs(P.Fragment,{children:[S.jsx(une,$({ownerState:u,className:ge(d.select,r),disabled:i,ref:o||n},c)),e.multiple?null:S.jsx(dne,{as:a,ownerState:u,className:d.icon})]})}),fne=hne;var L_;const pne=["children","classes","className","label","notched"],mne=de("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),gne=de("legend")(({ownerState:t,theme:e})=>$({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},t.withLabel&&$({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function vne(t){const{className:e,label:n,notched:r}=t,i=pe(t,pne),s=n!=null&&n!=="",a=$({},t,{notched:r,withLabel:s});return S.jsx(mne,$({"aria-hidden":!0,className:e,ownerState:a},i,{children:S.jsx(gne,{ownerState:a,children:s?S.jsx("span",{children:n}):L_||(L_=S.jsx("span",{className:"notranslate",children:""}))})}))}const yne=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],bne=t=>{const{classes:e}=t,r=Le({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},dX,e);return $({},e,r)},Sne=de(My,{shouldForwardProp:t=>Gr(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Dy})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return $({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${mo.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${mo.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${mo.focused} .${mo.notchedOutline}`]:{borderColor:(t.vars||t).palette[e.color].main,borderWidth:2},[`&.${mo.error} .${mo.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${mo.disabled} .${mo.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&$({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),xne=de(vne,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),wne=de(Ny,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Iy})(({theme:t,ownerState:e})=>$({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),VN=P.forwardRef(function(e,n){var r,i,s,a,o;const l=$e({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:h,multiline:p=!1,notched:f,slots:m={},type:g="text"}=l,v=pe(l,yne),y=bne(l),b=ka(),C=fl({props:l,muiFormControl:b,states:["required"]}),R=$({},l,{color:C.color||"primary",disabled:C.disabled,error:C.error,focused:C.focused,formControl:b,fullWidth:u,hiddenLabel:C.hiddenLabel,multiline:p,size:C.size,type:g}),w=(r=(i=m.root)!=null?i:c.Root)!=null?r:Sne,E=(s=(a=m.input)!=null?a:c.Input)!=null?s:wne;return S.jsx(Fy,$({slots:{root:w,input:E},renderSuffix:k=>S.jsx(xne,{ownerState:R,className:y.notchedOutline,label:h!=null&&h!==""&&C.required?o||(o=S.jsxs(P.Fragment,{children:[h,"","*"]})):h,notched:typeof f<"u"?f:!!(k.startAdornment||k.filled||k.focused)}),fullWidth:u,inputComponent:d,multiline:p,ref:n,type:g},v,{classes:$({},y,{notchedOutline:null})}))});VN.muiName="Input";const WN=VN,B_=Bi(S.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),j_=Bi(S.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Cne=Bi(S.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),Ene=Bi(S.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Tne=de("span")({position:"relative",display:"flex"}),Rne=de(Cne)({transform:"scale(1)"}),kne=de(Ene)(({theme:t,ownerState:e})=>$({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},e.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}));function GN(t){const{checked:e=!1,classes:n={},fontSize:r}=t,i=$({},t,{checked:e});return S.jsxs(Tne,{className:n.root,ownerState:i,children:[S.jsx(Rne,{fontSize:r,className:n.background,ownerState:i}),S.jsx(kne,{fontSize:r,className:n.dot,ownerState:i})]})}const Pne=P.createContext(void 0),KN=Pne;function _ne(){return P.useContext(KN)}function Ane(t){return Fe("MuiRadio",t)}const One=Be("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]),q_=One,Dne=["checked","checkedIcon","color","icon","name","onChange","size","className"],Ine=t=>{const{classes:e,color:n}=t,r={root:["root",`color${ye(n)}`]};return $({},e,Le(r,Ane,e))},Mne=de(cT,{shouldForwardProp:t=>Gr(t)||t==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${ye(n.color)}`]]}})(({theme:t,ownerState:e})=>$({color:(t.vars||t).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${e.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:xt(e.color==="default"?t.palette.action.active:t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${q_.checked}`]:{color:(t.vars||t).palette[e.color].main}},{[`&.${q_.disabled}`]:{color:(t.vars||t).palette.action.disabled}}));function Nne(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}const z_=S.jsx(GN,{checked:!0}),H_=S.jsx(GN,{}),Fne=P.forwardRef(function(e,n){var r,i;const s=$e({props:e,name:"MuiRadio"}),{checked:a,checkedIcon:o=z_,color:l="primary",icon:c=H_,name:u,onChange:d,size:h="medium",className:p}=s,f=pe(s,Dne),m=$({},s,{color:l,size:h}),g=Ine(m),v=_ne();let y=a;const b=P0(d,v&&v.onChange);let C=u;return v&&(typeof y>"u"&&(y=Nne(v.value,s.value)),typeof C>"u"&&(C=v.name)),S.jsx(Mne,$({type:"radio",icon:P.cloneElement(c,{fontSize:(r=H_.props.fontSize)!=null?r:h}),checkedIcon:P.cloneElement(o,{fontSize:(i=z_.props.fontSize)!=null?i:h}),ownerState:m,classes:g,name:C,checked:y,onChange:b,ref:n,className:ge(g.root,p)},f))}),$ne=Fne,Lne=["actions","children","defaultValue","name","onChange","value"],Bne=P.forwardRef(function(e,n){const{actions:r,children:i,defaultValue:s,name:a,onChange:o,value:l}=e,c=pe(e,Lne),u=P.useRef(null),[d,h]=dd({controlled:l,default:s,name:"RadioGroup"});P.useImperativeHandle(r,()=>({focus:()=>{let g=u.current.querySelector("input:not(:disabled):checked");g||(g=u.current.querySelector("input:not(:disabled)")),g&&g.focus()}}),[]);const p=gn(n,u),f=lc(a),m=P.useMemo(()=>({name:f,onChange(g){h(g.target.value),o&&o(g,g.target.value)},value:d}),[f,o,h,d]);return S.jsx(KN.Provider,{value:m,children:S.jsx(dT,$({role:"radiogroup",ref:p},c,{children:i}))})}),jne=Bne;function qne(t){return Fe("MuiSelect",t)}const zne=Be("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),_h=zne;var U_;const Hne=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Une=de("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${_h.select}`]:e.select},{[`&.${_h.select}`]:e[n.variant]},{[`&.${_h.error}`]:e.error},{[`&.${_h.multiple}`]:e.multiple}]}})(HN,{[`&.${_h.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Vne=de("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${ye(n.variant)}`],n.open&&e.iconOpen]}})(UN),Wne=de("input",{shouldForwardProp:t=>QG(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function V_(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function Gne(t){return t==null||typeof t=="string"&&!t.trim()}const Kne=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:a}=t,o={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${ye(n)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Le(o,qne,e)},Yne=P.forwardRef(function(e,n){const{"aria-describedby":r,"aria-label":i,autoFocus:s,autoWidth:a,children:o,className:l,defaultOpen:c,defaultValue:u,disabled:d,displayEmpty:h,error:p=!1,IconComponent:f,inputRef:m,labelId:g,MenuProps:v={},multiple:y,name:b,onBlur:C,onChange:R,onClose:w,onFocus:E,onOpen:k,open:T,readOnly:_,renderValue:D,SelectDisplayProps:I={},tabIndex:M,value:A,variant:O="standard"}=e,L=pe(e,Hne),[F,B]=dd({controlled:A,default:u,name:"Select"}),[j,q]=dd({controlled:T,default:c,name:"Select"}),V=P.useRef(null),U=P.useRef(null),[ne,W]=P.useState(null),{current:J}=P.useRef(T!=null),[K,Q]=P.useState(),re=gn(n,m),G=P.useCallback(Ce=>{U.current=Ce,Ce&&W(Ce)},[]),ie=ne==null?void 0:ne.parentNode;P.useImperativeHandle(re,()=>({focus:()=>{U.current.focus()},node:V.current,value:F}),[F]),P.useEffect(()=>{c&&j&&ne&&!J&&(Q(a?null:ie.clientWidth),U.current.focus())},[ne,a]),P.useEffect(()=>{s&&U.current.focus()},[s]),P.useEffect(()=>{if(!g)return;const Ce=yr(U.current).getElementById(g);if(Ce){const Ke=()=>{getSelection().isCollapsed&&U.current.focus()};return Ce.addEventListener("click",Ke),()=>{Ce.removeEventListener("click",Ke)}}},[g]);const te=(Ce,Ke)=>{Ce?k&&k(Ke):w&&w(Ke),J||(Q(a?null:ie.clientWidth),q(Ce))},Z=Ce=>{Ce.button===0&&(Ce.preventDefault(),U.current.focus(),te(!0,Ce))},oe=Ce=>{te(!1,Ce)},ue=P.Children.toArray(o),me=Ce=>{const Ke=ue.map(Re=>Re.props.value).indexOf(Ce.target.value);if(Ke===-1)return;const fe=ue[Ke];B(fe.props.value),R&&R(Ce,fe)},H=Ce=>Ke=>{let fe;if(Ke.currentTarget.hasAttribute("tabindex")){if(y){fe=Array.isArray(F)?F.slice():[];const Re=F.indexOf(Ce.props.value);Re===-1?fe.push(Ce.props.value):fe.splice(Re,1)}else fe=Ce.props.value;if(Ce.props.onClick&&Ce.props.onClick(Ke),F!==fe&&(B(fe),R)){const Re=Ke.nativeEvent||Ke,Ue=new Re.constructor(Re.type,Re);Object.defineProperty(Ue,"target",{writable:!0,value:{value:fe,name:b}}),R(Ue,Ce)}y||te(!1,Ke)}},Y=Ce=>{_||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Ce.key)!==-1&&(Ce.preventDefault(),te(!0,Ce))},X=ne!==null&&j,le=Ce=>{!X&&C&&(Object.defineProperty(Ce,"target",{writable:!0,value:{value:F,name:b}}),C(Ce))};delete L["aria-invalid"];let se,ae;const ve=[];let ke=!1;(lT({value:F})||h)&&(D?se=D(F):ke=!0);const Ee=ue.map(Ce=>{if(!P.isValidElement(Ce))return null;let Ke;if(y){if(!Array.isArray(F))throw new Error(tl(2));Ke=F.some(fe=>V_(fe,Ce.props.value)),Ke&&ke&&ve.push(Ce.props.children)}else Ke=V_(F,Ce.props.value),Ke&&ke&&(ae=Ce.props.children);return P.cloneElement(Ce,{"aria-selected":Ke?"true":"false",onClick:H(Ce),onKeyUp:fe=>{fe.key===" "&&fe.preventDefault(),Ce.props.onKeyUp&&Ce.props.onKeyUp(fe)},role:"option",selected:Ke,value:void 0,"data-value":Ce.props.value})});ke&&(y?ve.length===0?se=null:se=ve.reduce((Ce,Ke,fe)=>(Ce.push(Ke),fe<ve.length-1&&Ce.push(", "),Ce),[]):se=ae);let Oe=K;!a&&J&&ne&&(Oe=ie.clientWidth);let De;typeof M<"u"?De=M:De=d?null:0;const He=I.id||(b?`mui-component-select-${b}`:void 0),_e=$({},e,{variant:O,value:F,open:X,error:p}),Te=Kne(_e);return S.jsxs(P.Fragment,{children:[S.jsx(Une,$({ref:G,tabIndex:De,role:"button","aria-disabled":d?"true":void 0,"aria-expanded":X?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[g,He].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:Y,onMouseDown:d||_?null:Z,onBlur:le,onFocus:E},I,{ownerState:_e,className:ge(I.className,Te.select,l),id:He,children:Gne(se)?U_||(U_=S.jsx("span",{className:"notranslate",children:""})):se})),S.jsx(Wne,$({"aria-invalid":p,value:Array.isArray(F)?F.join(","):F,name:b,ref:V,"aria-hidden":!0,onChange:me,tabIndex:-1,disabled:d,className:Te.nativeInput,autoFocus:s,ownerState:_e},L)),S.jsx(Vne,{as:f,className:Te.icon,ownerState:_e}),S.jsx(hT,$({id:`menu-${b||""}`,anchorEl:ie,open:X,onClose:oe,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},v,{MenuListProps:$({"aria-labelledby":g,role:"listbox",disableListWrap:!0},v.MenuListProps),PaperProps:$({},v.PaperProps,{style:$({minWidth:Oe},v.PaperProps!=null?v.PaperProps.style:null)}),children:Ee}))]})}),Jne=Yne,Xne=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Qne=t=>{const{classes:e}=t;return e},pT={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>Gr(t)&&t!=="variant",slot:"Root"},Zne=de(BN,pT)(""),ere=de(WN,pT)(""),tre=de(NN,pT)(""),YN=P.forwardRef(function(e,n){const r=$e({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:a={},className:o,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=mX,id:d,input:h,inputProps:p,label:f,labelId:m,MenuProps:g,multiple:v=!1,native:y=!1,onClose:b,onOpen:C,open:R,renderValue:w,SelectDisplayProps:E,variant:k="outlined"}=r,T=pe(r,Xne),_=y?fne:Jne,D=ka(),I=fl({props:r,muiFormControl:D,states:["variant","error"]}),M=I.variant||k,A=$({},r,{variant:M,classes:a}),O=Qne(A),L=h||{standard:S.jsx(Zne,{ownerState:A}),outlined:S.jsx(ere,{label:f,ownerState:A}),filled:S.jsx(tre,{ownerState:A})}[M],F=gn(n,L.ref);return S.jsx(P.Fragment,{children:P.cloneElement(L,$({inputComponent:_,inputProps:$({children:s,error:I.error,IconComponent:u,variant:M,type:void 0,multiple:v},y?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:m,MenuProps:g,onClose:b,onOpen:C,open:R,renderValue:w,SelectDisplayProps:$({id:d},E)},p,{classes:p?li(O,p.classes):O},h?h.props.inputProps:{})},v&&y&&M==="outlined"?{notched:!0}:{},{ref:F,className:ge(L.props.className,o)},!h&&{variant:M},T))})});YN.muiName="Select";const Ho=YN;function nre(t){return Fe("MuiTooltip",t)}const rre=Be("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),ko=rre,ire=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function sre(t){return Math.round(t*1e5)/1e5}const are=t=>{const{classes:e,disableInteractive:n,arrow:r,touch:i,placement:s}=t,a={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${ye(s.split("-")[0])}`],arrow:["arrow"]};return Le(a,nre,e)},ore=de(kN,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(({theme:t,ownerState:e,open:n})=>$({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${ko.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${ko.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${ko.arrow}`]:$({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${ko.arrow}`]:$({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),lre=de("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${ye(n.placement.split("-")[0])}`]]}})(({theme:t,ownerState:e})=>$({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:xt(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${sre(16/14)}em`,fontWeight:t.typography.fontWeightRegular},{[`.${ko.popper}[data-popper-placement*="left"] &`]:$({transformOrigin:"right center"},e.isRtl?$({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):$({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${ko.popper}[data-popper-placement*="right"] &`]:$({transformOrigin:"left center"},e.isRtl?$({marginRight:"14px"},e.touch&&{marginRight:"24px"}):$({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${ko.popper}[data-popper-placement*="top"] &`]:$({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${ko.popper}[data-popper-placement*="bottom"] &`]:$({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),cre=de("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:xt(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let Um=!1,oS=null,Ah={x:0,y:0};function Vm(t,e){return n=>{e&&e(n),t(n)}}const ure=P.forwardRef(function(e,n){var r,i,s,a,o,l,c,u,d,h,p,f,m,g,v,y,b,C,R;const w=$e({props:e,name:"MuiTooltip"}),{arrow:E=!1,children:k,components:T={},componentsProps:_={},describeChild:D=!1,disableFocusListener:I=!1,disableHoverListener:M=!1,disableInteractive:A=!1,disableTouchListener:O=!1,enterDelay:L=100,enterNextDelay:F=0,enterTouchDelay:B=700,followCursor:j=!1,id:q,leaveDelay:V=0,leaveTouchDelay:U=1500,onClose:ne,onOpen:W,open:J,placement:K="bottom",PopperComponent:Q,PopperProps:re={},slotProps:G={},slots:ie={},title:te,TransitionComponent:Z=eC,TransitionProps:oe}=w,ue=pe(w,ire),me=Ar(),H=me.direction==="rtl",[Y,X]=P.useState(),[le,se]=P.useState(null),ae=P.useRef(!1),ve=A||j,ke=P.useRef(),Ee=P.useRef(),Oe=P.useRef(),De=P.useRef(),[He,_e]=dd({controlled:J,default:!1,name:"Tooltip",state:"open"});let Te=He;const Ce=lc(q),Ke=P.useRef(),fe=P.useCallback(()=>{Ke.current!==void 0&&(document.body.style.WebkitUserSelect=Ke.current,Ke.current=void 0),clearTimeout(De.current)},[]);P.useEffect(()=>()=>{clearTimeout(ke.current),clearTimeout(Ee.current),clearTimeout(Oe.current),fe()},[fe]);const Re=be=>{clearTimeout(oS),Um=!0,_e(!0),W&&!Te&&W(be)},Ue=Rs(be=>{clearTimeout(oS),oS=setTimeout(()=>{Um=!1},800+V),_e(!1),ne&&Te&&ne(be),clearTimeout(ke.current),ke.current=setTimeout(()=>{ae.current=!1},me.transitions.duration.shortest)}),Pe=be=>{ae.current&&be.type!=="touchstart"||(Y&&Y.removeAttribute("title"),clearTimeout(Ee.current),clearTimeout(Oe.current),L||Um&&F?Ee.current=setTimeout(()=>{Re(be)},Um?F:L):Re(be))},Ye=be=>{clearTimeout(Ee.current),clearTimeout(Oe.current),Oe.current=setTimeout(()=>{Ue(be)},V)},{isFocusVisibleRef:Lt,onBlur:Bn,onFocus:or,ref:fo}=AE(),[,Fs]=P.useState(!1),$s=be=>{Bn(be),Lt.current===!1&&(Fs(!1),Ye(be))},Oa=be=>{Y||X(be.currentTarget),or(be),Lt.current===!0&&(Fs(!0),Pe(be))},Kr=be=>{ae.current=!0;const ft=k.props;ft.onTouchStart&&ft.onTouchStart(be)},ji=Pe,Ls=Ye,qi=be=>{Kr(be),clearTimeout(Oe.current),clearTimeout(ke.current),fe(),Ke.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",De.current=setTimeout(()=>{document.body.style.WebkitUserSelect=Ke.current,Pe(be)},B)},lr=be=>{k.props.onTouchEnd&&k.props.onTouchEnd(be),fe(),clearTimeout(Oe.current),Oe.current=setTimeout(()=>{Ue(be)},U)};P.useEffect(()=>{if(!Te)return;function be(ft){(ft.key==="Escape"||ft.key==="Esc")&&Ue(ft)}return document.addEventListener("keydown",be),()=>{document.removeEventListener("keydown",be)}},[Ue,Te]);const Yr=gn(k.ref,fo,X,n);!te&&te!==0&&(Te=!1);const Xt=P.useRef(),fs=be=>{const ft=k.props;ft.onMouseMove&&ft.onMouseMove(be),Ah={x:be.clientX,y:be.clientY},Xt.current&&Xt.current.update()},ps={},Si=typeof te=="string";D?(ps.title=!Te&&Si&&!M?te:null,ps["aria-describedby"]=Te?Ce:null):(ps["aria-label"]=Si?te:null,ps["aria-labelledby"]=Te&&!Si?Ce:null);const Me=$({},ps,ue,k.props,{className:ge(ue.className,k.props.className),onTouchStart:Kr,ref:Yr},j?{onMouseMove:fs}:{}),Qe={};O||(Me.onTouchStart=qi,Me.onTouchEnd=lr),M||(Me.onMouseOver=Vm(ji,Me.onMouseOver),Me.onMouseLeave=Vm(Ls,Me.onMouseLeave),ve||(Qe.onMouseOver=ji,Qe.onMouseLeave=Ls)),I||(Me.onFocus=Vm(Oa,Me.onFocus),Me.onBlur=Vm($s,Me.onBlur),ve||(Qe.onFocus=Oa,Qe.onBlur=$s));const Ct=P.useMemo(()=>{var be;let ft=[{name:"arrow",enabled:!!le,options:{element:le,padding:4}}];return(be=re.popperOptions)!=null&&be.modifiers&&(ft=ft.concat(re.popperOptions.modifiers)),$({},re.popperOptions,{modifiers:ft})},[le,re]),dt=$({},w,{isRtl:H,arrow:E,disableInteractive:ve,placement:K,PopperComponentProp:Q,touch:ae.current}),lt=are(dt),cr=(r=(i=ie.popper)!=null?i:T.Popper)!=null?r:ore,on=(s=(a=(o=ie.transition)!=null?o:T.Transition)!=null?a:Z)!=null?s:eC,qt=(l=(c=ie.tooltip)!=null?c:T.Tooltip)!=null?l:lre,ms=(u=(d=ie.arrow)!=null?d:T.Arrow)!=null?u:cre,Bs=Qh(cr,$({},re,(h=G.popper)!=null?h:_.popper,{className:ge(lt.popper,re==null?void 0:re.className,(p=(f=G.popper)!=null?f:_.popper)==null?void 0:p.className)}),dt),Da=Qh(on,$({},oe,(m=G.transition)!=null?m:_.transition),dt),Jr=Qh(qt,$({},(g=G.tooltip)!=null?g:_.tooltip,{className:ge(lt.tooltip,(v=(y=G.tooltip)!=null?y:_.tooltip)==null?void 0:v.className)}),dt),yl=Qh(ms,$({},(b=G.arrow)!=null?b:_.arrow,{className:ge(lt.arrow,(C=(R=G.arrow)!=null?R:_.arrow)==null?void 0:C.className)}),dt);return S.jsxs(P.Fragment,{children:[P.cloneElement(k,Me),S.jsx(cr,$({as:Q??kN,placement:K,anchorEl:j?{getBoundingClientRect:()=>({top:Ah.y,left:Ah.x,right:Ah.x,bottom:Ah.y,width:0,height:0})}:Y,popperRef:Xt,open:Y?Te:!1,id:Ce,transition:!0},Qe,Bs,{popperOptions:Ct,children:({TransitionProps:be})=>S.jsx(on,$({timeout:me.transitions.duration.shorter},be,Da,{children:S.jsxs(qt,$({},Jr,{children:[te,E?S.jsx(ms,$({},yl,{ref:se})):null]}))}))}))]})}),lS=ure,dre=TG({createStyledComponent:de("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>$e({props:t,name:"MuiStack"})}),cS=dre;function hre(t){return Fe("MuiSwitch",t)}const fre=Be("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Dr=fre,pre=["className","color","edge","size","sx"],mre=t=>{const{classes:e,edge:n,size:r,color:i,checked:s,disabled:a}=t,o={root:["root",n&&`edge${ye(n)}`,`size${ye(r)}`],switchBase:["switchBase",`color${ye(i)}`,s&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=Le(o,hre,e);return $({},e,l)},gre=de("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.edge&&e[`edge${ye(n.edge)}`],e[`size${ye(n.size)}`]]}})(({ownerState:t})=>$({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},t.edge==="start"&&{marginLeft:-8},t.edge==="end"&&{marginRight:-8},t.size==="small"&&{width:40,height:24,padding:7,[`& .${Dr.thumb}`]:{width:16,height:16},[`& .${Dr.switchBase}`]:{padding:4,[`&.${Dr.checked}`]:{transform:"translateX(16px)"}}})),vre=de(cT,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.switchBase,{[`& .${Dr.input}`]:e.input},n.color!=="default"&&e[`color${ye(n.color)}`]]}})(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${Dr.checked}`]:{transform:"translateX(20px)"},[`&.${Dr.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${Dr.checked} + .${Dr.track}`]:{opacity:.5},[`&.${Dr.disabled} + .${Dr.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${Dr.input}`]:{left:"-100%",width:"300%"}}),({theme:t,ownerState:e})=>$({"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:xt(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${Dr.checked}`]:{color:(t.vars||t).palette[e.color].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:xt(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Dr.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${e.color}DisabledColor`]:`${t.palette.mode==="light"?JE(t.palette[e.color].main,.62):YE(t.palette[e.color].main,.55)}`}},[`&.${Dr.checked} + .${Dr.track}`]:{backgroundColor:(t.vars||t).palette[e.color].main}})),yre=de("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(t,e)=>e.track})(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`})),bre=de("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(t,e)=>e.thumb})(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),Sre=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiSwitch"}),{className:i,color:s="primary",edge:a=!1,size:o="medium",sx:l}=r,c=pe(r,pre),u=$({},r,{color:s,edge:a,size:o}),d=mre(u),h=S.jsx(bre,{className:d.thumb,ownerState:u});return S.jsxs(gre,{className:ge(d.root,i),sx:l,ownerState:u,children:[S.jsx(vre,$({type:"checkbox",icon:h,checkedIcon:h,ref:n,ownerState:u},c,{classes:$({},d,{root:d.switchBase})})),S.jsx(yre,{className:d.track,ownerState:u})]})}),JN=Sre;function xre(t){return Fe("MuiTab",t)}const wre=Be("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),Sl=wre,Cre=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],Ere=t=>{const{classes:e,textColor:n,fullWidth:r,wrapped:i,icon:s,label:a,selected:o,disabled:l}=t,c={root:["root",s&&a&&"labelIcon",`textColor${ye(n)}`,r&&"fullWidth",i&&"wrapped",o&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return Le(c,xre,e)},Tre=de(co,{name:"MuiTab",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.label&&n.icon&&e.labelIcon,e[`textColor${ye(n.textColor)}`],n.fullWidth&&e.fullWidth,n.wrapped&&e.wrapped]}})(({theme:t,ownerState:e})=>$({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},e.label&&{flexDirection:e.iconPosition==="top"||e.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},e.icon&&e.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${Sl.iconWrapper}`]:$({},e.iconPosition==="top"&&{marginBottom:6},e.iconPosition==="bottom"&&{marginTop:6},e.iconPosition==="start"&&{marginRight:t.spacing(1)},e.iconPosition==="end"&&{marginLeft:t.spacing(1)})},e.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${Sl.selected}`]:{opacity:1},[`&.${Sl.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.textColor==="primary"&&{color:(t.vars||t).palette.text.secondary,[`&.${Sl.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${Sl.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.textColor==="secondary"&&{color:(t.vars||t).palette.text.secondary,[`&.${Sl.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${Sl.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},e.wrapped&&{fontSize:t.typography.pxToRem(12)})),Rre=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiTab"}),{className:i,disabled:s=!1,disableFocusRipple:a=!1,fullWidth:o,icon:l,iconPosition:c="top",indicator:u,label:d,onChange:h,onClick:p,onFocus:f,selected:m,selectionFollowsFocus:g,textColor:v="inherit",value:y,wrapped:b=!1}=r,C=pe(r,Cre),R=$({},r,{disabled:s,disableFocusRipple:a,selected:m,icon:!!l,iconPosition:c,label:!!d,fullWidth:o,textColor:v,wrapped:b}),w=Ere(R),E=l&&d&&P.isValidElement(l)?P.cloneElement(l,{className:ge(w.iconWrapper,l.props.className)}):l,k=_=>{!m&&h&&h(_,y),p&&p(_)},T=_=>{g&&!m&&h&&h(_,y),f&&f(_)};return S.jsxs(Tre,$({focusRipple:!a,className:ge(w.root,i),ref:n,role:"tab","aria-selected":m,disabled:s,onClick:k,onFocus:T,ownerState:R,tabIndex:m?0:-1},C,{children:[c==="top"||c==="start"?S.jsxs(P.Fragment,{children:[E,d]}):S.jsxs(P.Fragment,{children:[d,E]}),u]}))}),uS=Rre,kre=P.createContext(),XN=kre;function Pre(t){return Fe("MuiTable",t)}Be("MuiTable",["root","stickyHeader"]);const _re=["className","component","padding","size","stickyHeader"],Are=t=>{const{classes:e,stickyHeader:n}=t;return Le({root:["root",n&&"stickyHeader"]},Pre,e)},Ore=de("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.stickyHeader&&e.stickyHeader]}})(({theme:t,ownerState:e})=>$({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":$({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},e.stickyHeader&&{borderCollapse:"separate"})),W_="table",Dre=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiTable"}),{className:i,component:s=W_,padding:a="normal",size:o="medium",stickyHeader:l=!1}=r,c=pe(r,_re),u=$({},r,{component:s,padding:a,size:o,stickyHeader:l}),d=Are(u),h=P.useMemo(()=>({padding:a,size:o,stickyHeader:l}),[a,o,l]);return S.jsx(XN.Provider,{value:h,children:S.jsx(Ore,$({as:s,role:s===W_?null:"table",ref:n,className:ge(d.root,i),ownerState:u},c))})}),mT=Dre,Ire=P.createContext(),$y=Ire;function Mre(t){return Fe("MuiTableBody",t)}Be("MuiTableBody",["root"]);const Nre=["className","component"],Fre=t=>{const{classes:e}=t;return Le({root:["root"]},Mre,e)},$re=de("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-row-group"}),Lre={variant:"body"},G_="tbody",Bre=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiTableBody"}),{className:i,component:s=G_}=r,a=pe(r,Nre),o=$({},r,{component:s}),l=Fre(o);return S.jsx($y.Provider,{value:Lre,children:S.jsx($re,$({className:ge(l.root,i),as:s,ref:n,role:s===G_?null:"rowgroup",ownerState:o},a))})}),gT=Bre;function jre(t){return Fe("MuiTableCell",t)}const qre=Be("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),zre=qre,Hre=["align","className","component","padding","scope","size","sortDirection","variant"],Ure=t=>{const{classes:e,variant:n,align:r,padding:i,size:s,stickyHeader:a}=t,o={root:["root",n,a&&"stickyHeader",r!=="inherit"&&`align${ye(r)}`,i!=="normal"&&`padding${ye(i)}`,`size${ye(s)}`]};return Le(o,jre,e)},Vre=de("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${ye(n.size)}`],n.padding!=="normal"&&e[`padding${ye(n.padding)}`],n.align!=="inherit"&&e[`align${ye(n.align)}`],n.stickyHeader&&e.stickyHeader]}})(({theme:t,ownerState:e})=>$({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?JE(xt(t.palette.divider,1),.88):YE(xt(t.palette.divider,1),.68)}`,textAlign:"left",padding:16},e.variant==="head"&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},e.variant==="body"&&{color:(t.vars||t).palette.text.primary},e.variant==="footer"&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},e.size==="small"&&{padding:"6px 16px",[`&.${zre.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},e.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},e.padding==="none"&&{padding:0},e.align==="left"&&{textAlign:"left"},e.align==="center"&&{textAlign:"center"},e.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},e.align==="justify"&&{textAlign:"justify"},e.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})),Wre=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiTableCell"}),{align:i="inherit",className:s,component:a,padding:o,scope:l,size:c,sortDirection:u,variant:d}=r,h=pe(r,Hre),p=P.useContext(XN),f=P.useContext($y),m=f&&f.variant==="head";let g;a?g=a:g=m?"th":"td";let v=l;g==="td"?v=void 0:!v&&m&&(v="col");const y=d||f&&f.variant,b=$({},r,{align:i,component:g,padding:o||(p&&p.padding?p.padding:"normal"),size:c||(p&&p.size?p.size:"medium"),sortDirection:u,stickyHeader:y==="head"&&p&&p.stickyHeader,variant:y}),C=Ure(b);let R=null;return u&&(R=u==="asc"?"ascending":"descending"),S.jsx(Vre,$({as:g,ref:n,className:ge(C.root,s),"aria-sort":R,scope:v,ownerState:b},h))}),It=Wre;function Gre(t){return Fe("MuiTableContainer",t)}Be("MuiTableContainer",["root"]);const Kre=["className","component"],Yre=t=>{const{classes:e}=t;return Le({root:["root"]},Gre,e)},Jre=de("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(t,e)=>e.root})({width:"100%",overflowX:"auto"}),Xre=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiTableContainer"}),{className:i,component:s="div"}=r,a=pe(r,Kre),o=$({},r,{component:s}),l=Yre(o);return S.jsx(Jre,$({ref:n,as:s,className:ge(l.root,i),ownerState:o},a))}),vT=Xre;function Qre(t){return Fe("MuiTableHead",t)}Be("MuiTableHead",["root"]);const Zre=["className","component"],eie=t=>{const{classes:e}=t;return Le({root:["root"]},Qre,e)},tie=de("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-header-group"}),nie={variant:"head"},K_="thead",rie=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiTableHead"}),{className:i,component:s=K_}=r,a=pe(r,Zre),o=$({},r,{component:s}),l=eie(o);return S.jsx($y.Provider,{value:nie,children:S.jsx(tie,$({as:s,className:ge(l.root,i),ref:n,role:s===K_?null:"rowgroup",ownerState:o},a))})}),QN=rie;function iie(t){return Fe("MuiToolbar",t)}Be("MuiToolbar",["root","gutters","regular","dense"]);const sie=["className","component","disableGutters","variant"],aie=t=>{const{classes:e,disableGutters:n,variant:r}=t;return Le({root:["root",!n&&"gutters",r]},iie,e)},oie=de("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(({theme:t,ownerState:e})=>$({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},e.variant==="dense"&&{minHeight:48}),({theme:t,ownerState:e})=>e.variant==="regular"&&t.mixins.toolbar),lie=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiToolbar"}),{className:i,component:s="div",disableGutters:a=!1,variant:o="regular"}=r,l=pe(r,sie),c=$({},r,{component:s,disableGutters:a,variant:o}),u=aie(c);return S.jsx(oie,$({as:s,className:ge(u.root,i),ref:n,ownerState:c},l))}),yT=lie,tC=Bi(S.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),nC=Bi(S.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");var Y_,J_,X_,Q_,Z_,e5,t5,n5;const cie=["backIconButtonProps","count","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton"],uie=P.forwardRef(function(e,n){const{backIconButtonProps:r,count:i,getItemAriaLabel:s,nextIconButtonProps:a,onPageChange:o,page:l,rowsPerPage:c,showFirstButton:u,showLastButton:d}=e,h=pe(e,cie),p=Ar(),f=y=>{o(y,0)},m=y=>{o(y,l-1)},g=y=>{o(y,l+1)},v=y=>{o(y,Math.max(0,Math.ceil(i/c)-1))};return S.jsxs("div",$({ref:n},h,{children:[u&&S.jsx(ii,{onClick:f,disabled:l===0,"aria-label":s("first",l),title:s("first",l),children:p.direction==="rtl"?Y_||(Y_=S.jsx(j_,{})):J_||(J_=S.jsx(B_,{}))}),S.jsx(ii,$({onClick:m,disabled:l===0,color:"inherit","aria-label":s("previous",l),title:s("previous",l)},r,{children:p.direction==="rtl"?X_||(X_=S.jsx(nC,{})):Q_||(Q_=S.jsx(tC,{}))})),S.jsx(ii,$({onClick:g,disabled:i!==-1?l>=Math.ceil(i/c)-1:!1,color:"inherit","aria-label":s("next",l),title:s("next",l)},a,{children:p.direction==="rtl"?Z_||(Z_=S.jsx(tC,{})):e5||(e5=S.jsx(nC,{}))})),d&&S.jsx(ii,{onClick:v,disabled:l>=Math.ceil(i/c)-1,"aria-label":s("last",l),title:s("last",l),children:p.direction==="rtl"?t5||(t5=S.jsx(B_,{})):n5||(n5=S.jsx(j_,{}))})]}))}),die=uie;function hie(t){return Fe("MuiTablePagination",t)}const fie=Be("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]),Sf=fie;var r5;const pie=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton"],mie=de(It,{name:"MuiTablePagination",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({overflow:"auto",color:(t.vars||t).palette.text.primary,fontSize:t.typography.pxToRem(14),"&:last-child":{padding:0}})),gie=de(yT,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(t,e)=>$({[`& .${Sf.actions}`]:e.actions},e.toolbar)})(({theme:t})=>({minHeight:52,paddingRight:2,[`${t.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[t.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${Sf.actions}`]:{flexShrink:0,marginLeft:20}})),vie=de("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(t,e)=>e.spacer})({flex:"1 1 100%"}),yie=de("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(t,e)=>e.selectLabel})(({theme:t})=>$({},t.typography.body2,{flexShrink:0})),bie=de(Ho,{name:"MuiTablePagination",slot:"Select",overridesResolver:(t,e)=>$({[`& .${Sf.selectIcon}`]:e.selectIcon,[`& .${Sf.select}`]:e.select},e.input,e.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${Sf.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),Sie=de(Pn,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(t,e)=>e.menuItem})({}),xie=de("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(t,e)=>e.displayedRows})(({theme:t})=>$({},t.typography.body2,{flexShrink:0}));function wie({from:t,to:e,count:n}){return`${t}${e} of ${n!==-1?n:`more than ${e}`}`}function Cie(t){return`Go to ${t} page`}const Eie=t=>{const{classes:e}=t;return Le({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},hie,e)},Tie=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiTablePagination"}),{ActionsComponent:i=die,backIconButtonProps:s,className:a,colSpan:o,component:l=It,count:c,getItemAriaLabel:u=Cie,labelDisplayedRows:d=wie,labelRowsPerPage:h="Rows per page:",nextIconButtonProps:p,onPageChange:f,onRowsPerPageChange:m,page:g,rowsPerPage:v,rowsPerPageOptions:y=[10,25,50,100],SelectProps:b={},showFirstButton:C=!1,showLastButton:R=!1}=r,w=pe(r,pie),E=r,k=Eie(E),T=b.native?"option":Sie;let _;(l===It||l==="td")&&(_=o||1e3);const D=lc(b.id),I=lc(b.labelId),M=()=>c===-1?(g+1)*v:v===-1?c:Math.min(c,(g+1)*v);return S.jsx(mie,$({colSpan:_,ref:n,as:l,ownerState:E,className:ge(k.root,a)},w,{children:S.jsxs(gie,{className:k.toolbar,children:[S.jsx(vie,{className:k.spacer}),y.length>1&&S.jsx(yie,{className:k.selectLabel,id:I,children:h}),y.length>1&&S.jsx(bie,$({variant:"standard"},!b.variant&&{input:r5||(r5=S.jsx(Fy,{}))},{value:v,onChange:m,id:D,labelId:I},b,{classes:$({},b.classes,{root:ge(k.input,k.selectRoot,(b.classes||{}).root),select:ge(k.select,(b.classes||{}).select),icon:ge(k.selectIcon,(b.classes||{}).icon)}),children:y.map(A=>P.createElement(T,$({},!dc(T)&&{ownerState:E},{className:k.menuItem,key:A.label?A.label:A,value:A.value?A.value:A}),A.label?A.label:A))})),S.jsx(xie,{className:k.displayedRows,children:d({from:c===0?0:g*v+1,to:M(),count:c===-1?-1:c,page:g})}),S.jsx(i,{className:k.actions,backIconButtonProps:s,count:c,nextIconButtonProps:p,onPageChange:f,page:g,rowsPerPage:v,showFirstButton:C,showLastButton:R,getItemAriaLabel:u})]})}))}),Rie=Tie;function kie(t){return Fe("MuiTableRow",t)}const Pie=Be("MuiTableRow",["root","selected","hover","head","footer"]),i5=Pie,_ie=["className","component","hover","selected"],Aie=t=>{const{classes:e,selected:n,hover:r,head:i,footer:s}=t;return Le({root:["root",n&&"selected",r&&"hover",i&&"head",s&&"footer"]},kie,e)},Oie=de("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.head&&e.head,n.footer&&e.footer]}})(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${i5.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${i5.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:xt(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:xt(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}})),s5="tr",Die=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiTableRow"}),{className:i,component:s=s5,hover:a=!1,selected:o=!1}=r,l=pe(r,_ie),c=P.useContext($y),u=$({},r,{component:s,hover:a,selected:o,head:c&&c.variant==="head",footer:c&&c.variant==="footer"}),d=Aie(u);return S.jsx(Oie,$({as:s,ref:n,className:ge(d.root,i),role:s===s5?null:"row",ownerState:u},l))}),Wa=Die,Iie=Bi(S.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");function Mie(t){return Fe("MuiTableSortLabel",t)}const Nie=Be("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),dS=Nie,Fie=["active","children","className","direction","hideSortIcon","IconComponent"],$ie=t=>{const{classes:e,direction:n,active:r}=t,i={root:["root",r&&"active"],icon:["icon",`iconDirection${ye(n)}`]};return Le(i,Mie,e)},Lie=de(co,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.active&&e.active]}})(({theme:t})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,[`& .${dS.icon}`]:{opacity:.5}},[`&.${dS.active}`]:{color:(t.vars||t).palette.text.primary,[`& .${dS.icon}`]:{opacity:1,color:(t.vars||t).palette.text.secondary}}})),Bie=de("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,e[`iconDirection${ye(n.direction)}`]]}})(({theme:t,ownerState:e})=>$({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none"},e.direction==="desc"&&{transform:"rotate(0deg)"},e.direction==="asc"&&{transform:"rotate(180deg)"})),jie=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiTableSortLabel"}),{active:i=!1,children:s,className:a,direction:o="asc",hideSortIcon:l=!1,IconComponent:c=Iie}=r,u=pe(r,Fie),d=$({},r,{active:i,direction:o,hideSortIcon:l,IconComponent:c}),h=$ie(d);return S.jsxs(Lie,$({className:ge(h.root,a),component:"span",disableRipple:!0,ownerState:d,ref:n},u,{children:[s,l&&!i?null:S.jsx(Bie,{as:c,className:ge(h.icon),ownerState:d})]}))}),qie=jie;function zie(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function Hie(t,e,n,r={},i=()=>{}){const{ease:s=zie,duration:a=300}=r;let o=null;const l=e[t];let c=!1;const u=()=>{c=!0},d=h=>{if(c){i(new Error("Animation cancelled"));return}o===null&&(o=h);const p=Math.min(1,(h-o)/a);if(e[t]=s(p)*(n-l)+l,p>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(d)};return l===n?(i(new Error("Element already at target position")),u):(requestAnimationFrame(d),u)}const Uie=["onChange"],Vie={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Wie(t){const{onChange:e}=t,n=pe(t,Uie),r=P.useRef(),i=P.useRef(null),s=()=>{r.current=i.current.offsetHeight-i.current.clientHeight};return P.useEffect(()=>{const a=oc(()=>{const l=r.current;s(),l!==r.current&&e(r.current)}),o=as(i.current);return o.addEventListener("resize",a),()=>{a.clear(),o.removeEventListener("resize",a)}},[e]),P.useEffect(()=>{s(),e(r.current)},[e]),S.jsx("div",$({style:Vie,ref:i},n))}function Gie(t){return Fe("MuiTabScrollButton",t)}const Kie=Be("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Yie=Kie,Jie=["className","slots","slotProps","direction","orientation","disabled"],Xie=t=>{const{classes:e,orientation:n,disabled:r}=t;return Le({root:["root",n,r&&"disabled"]},Gie,e)},Qie=de(co,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.orientation&&e[n.orientation]]}})(({ownerState:t})=>$({width:40,flexShrink:0,opacity:.8,[`&.${Yie.disabled}`]:{opacity:0}},t.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})),Zie=P.forwardRef(function(e,n){var r,i;const s=$e({props:e,name:"MuiTabScrollButton"}),{className:a,slots:o={},slotProps:l={},direction:c}=s,u=pe(s,Jie),h=Ar().direction==="rtl",p=$({isRtl:h},s),f=Xie(p),m=(r=o.StartScrollButtonIcon)!=null?r:tC,g=(i=o.EndScrollButtonIcon)!=null?i:nC,v=va({elementType:m,externalSlotProps:l.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:p}),y=va({elementType:g,externalSlotProps:l.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:p});return S.jsx(Qie,$({component:"div",className:ge(f.root,a),ref:n,role:null,ownerState:p,tabIndex:null},u,{children:c==="left"?S.jsx(m,$({},v)):S.jsx(g,$({},y))}))}),ese=Zie;function tse(t){return Fe("MuiTabs",t)}const nse=Be("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),hS=nse,rse=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],a5=(t,e)=>t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t.firstChild,o5=(t,e)=>t===e?t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t.lastChild,Wm=(t,e,n)=>{let r=!1,i=n(t,e);for(;i;){if(i===t.firstChild){if(r)return;r=!0}const s=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||s)i=n(t,i);else{i.focus();return}}},ise=t=>{const{vertical:e,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:s,centered:a,scrollButtonsHideMobile:o,classes:l}=t;return Le({root:["root",e&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",s&&"scrollableY"],flexContainer:["flexContainer",e&&"flexContainerVertical",a&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",o&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},tse,l)},sse=de("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${hS.scrollButtons}`]:e.scrollButtons},{[`& .${hS.scrollButtons}`]:n.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,n.vertical&&e.vertical]}})(({ownerState:t,theme:e})=>$({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${hS.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}})),ase=de("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.scroller,n.fixed&&e.fixed,n.hideScrollbar&&e.hideScrollbar,n.scrollableX&&e.scrollableX,n.scrollableY&&e.scrollableY]}})(({ownerState:t})=>$({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),ose=de("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.flexContainer,n.vertical&&e.flexContainerVertical,n.centered&&e.centered]}})(({ownerState:t})=>$({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})),lse=de("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(t,e)=>e.indicator})(({ownerState:t,theme:e})=>$({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create()},t.indicatorColor==="primary"&&{backgroundColor:(e.vars||e).palette.primary.main},t.indicatorColor==="secondary"&&{backgroundColor:(e.vars||e).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})),cse=de(Wie,{name:"MuiTabs",slot:"ScrollbarSize"})({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),l5={},use=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiTabs"}),i=Ar(),s=i.direction==="rtl",{"aria-label":a,"aria-labelledby":o,action:l,centered:c=!1,children:u,className:d,component:h="div",allowScrollButtonsMobile:p=!1,indicatorColor:f="primary",onChange:m,orientation:g="horizontal",ScrollButtonComponent:v=ese,scrollButtons:y="auto",selectionFollowsFocus:b,slots:C={},slotProps:R={},TabIndicatorProps:w={},TabScrollButtonProps:E={},textColor:k="primary",value:T,variant:_="standard",visibleScrollbar:D=!1}=r,I=pe(r,rse),M=_==="scrollable",A=g==="vertical",O=A?"scrollTop":"scrollLeft",L=A?"top":"left",F=A?"bottom":"right",B=A?"clientHeight":"clientWidth",j=A?"height":"width",q=$({},r,{component:h,allowScrollButtonsMobile:p,indicatorColor:f,orientation:g,vertical:A,scrollButtons:y,textColor:k,variant:_,visibleScrollbar:D,fixed:!M,hideScrollbar:M&&!D,scrollableX:M&&!A,scrollableY:M&&A,centered:c&&!M,scrollButtonsHideMobile:!p}),V=ise(q),U=va({elementType:C.StartScrollButtonIcon,externalSlotProps:R.startScrollButtonIcon,ownerState:q}),ne=va({elementType:C.EndScrollButtonIcon,externalSlotProps:R.endScrollButtonIcon,ownerState:q}),[W,J]=P.useState(!1),[K,Q]=P.useState(l5),[re,G]=P.useState({start:!1,end:!1}),[ie,te]=P.useState({overflow:"hidden",scrollbarWidth:0}),Z=new Map,oe=P.useRef(null),ue=P.useRef(null),me=()=>{const fe=oe.current;let Re;if(fe){const Pe=fe.getBoundingClientRect();Re={clientWidth:fe.clientWidth,scrollLeft:fe.scrollLeft,scrollTop:fe.scrollTop,scrollLeftNormalized:L4(fe,i.direction),scrollWidth:fe.scrollWidth,top:Pe.top,bottom:Pe.bottom,left:Pe.left,right:Pe.right}}let Ue;if(fe&&T!==!1){const Pe=ue.current.children;if(Pe.length>0){const Ye=Pe[Z.get(T)];Ue=Ye?Ye.getBoundingClientRect():null}}return{tabsMeta:Re,tabMeta:Ue}},H=Rs(()=>{const{tabsMeta:fe,tabMeta:Re}=me();let Ue=0,Pe;if(A)Pe="top",Re&&fe&&(Ue=Re.top-fe.top+fe.scrollTop);else if(Pe=s?"right":"left",Re&&fe){const Lt=s?fe.scrollLeftNormalized+fe.clientWidth-fe.scrollWidth:fe.scrollLeft;Ue=(s?-1:1)*(Re[Pe]-fe[Pe]+Lt)}const Ye={[Pe]:Ue,[j]:Re?Re[j]:0};if(isNaN(K[Pe])||isNaN(K[j]))Q(Ye);else{const Lt=Math.abs(K[Pe]-Ye[Pe]),Bn=Math.abs(K[j]-Ye[j]);(Lt>=1||Bn>=1)&&Q(Ye)}}),Y=(fe,{animation:Re=!0}={})=>{Re?Hie(O,oe.current,fe,{duration:i.transitions.duration.standard}):oe.current[O]=fe},X=fe=>{let Re=oe.current[O];A?Re+=fe:(Re+=fe*(s?-1:1),Re*=s&&$6()==="reverse"?-1:1),Y(Re)},le=()=>{const fe=oe.current[B];let Re=0;const Ue=Array.from(ue.current.children);for(let Pe=0;Pe<Ue.length;Pe+=1){const Ye=Ue[Pe];if(Re+Ye[B]>fe){Pe===0&&(Re=fe);break}Re+=Ye[B]}return Re},se=()=>{X(-1*le())},ae=()=>{X(le())},ve=P.useCallback(fe=>{te({overflow:null,scrollbarWidth:fe})},[]),ke=()=>{const fe={};fe.scrollbarSizeListener=M?S.jsx(cse,{onChange:ve,className:ge(V.scrollableX,V.hideScrollbar)}):null;const Re=re.start||re.end,Ue=M&&(y==="auto"&&Re||y===!0);return fe.scrollButtonStart=Ue?S.jsx(v,$({slots:{StartScrollButtonIcon:C.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:U},orientation:g,direction:s?"right":"left",onClick:se,disabled:!re.start},E,{className:ge(V.scrollButtons,E.className)})):null,fe.scrollButtonEnd=Ue?S.jsx(v,$({slots:{EndScrollButtonIcon:C.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:ne},orientation:g,direction:s?"left":"right",onClick:ae,disabled:!re.end},E,{className:ge(V.scrollButtons,E.className)})):null,fe},Ee=Rs(fe=>{const{tabsMeta:Re,tabMeta:Ue}=me();if(!(!Ue||!Re)){if(Ue[L]<Re[L]){const Pe=Re[O]+(Ue[L]-Re[L]);Y(Pe,{animation:fe})}else if(Ue[F]>Re[F]){const Pe=Re[O]+(Ue[F]-Re[F]);Y(Pe,{animation:fe})}}}),Oe=Rs(()=>{if(M&&y!==!1){const{scrollTop:fe,scrollHeight:Re,clientHeight:Ue,scrollWidth:Pe,clientWidth:Ye}=oe.current;let Lt,Bn;if(A)Lt=fe>1,Bn=fe<Re-Ue-1;else{const or=L4(oe.current,i.direction);Lt=s?or<Pe-Ye-1:or>1,Bn=s?or>1:or<Pe-Ye-1}(Lt!==re.start||Bn!==re.end)&&G({start:Lt,end:Bn})}});P.useEffect(()=>{const fe=oc(()=>{oe.current&&(H(),Oe())}),Re=as(oe.current);Re.addEventListener("resize",fe);let Ue;return typeof ResizeObserver<"u"&&(Ue=new ResizeObserver(fe),Array.from(ue.current.children).forEach(Pe=>{Ue.observe(Pe)})),()=>{fe.clear(),Re.removeEventListener("resize",fe),Ue&&Ue.disconnect()}},[H,Oe]);const De=P.useMemo(()=>oc(()=>{Oe()}),[Oe]);P.useEffect(()=>()=>{De.clear()},[De]),P.useEffect(()=>{J(!0)},[]),P.useEffect(()=>{H(),Oe()}),P.useEffect(()=>{Ee(l5!==K)},[Ee,K]),P.useImperativeHandle(l,()=>({updateIndicator:H,updateScrollButtons:Oe}),[H,Oe]);const He=S.jsx(lse,$({},w,{className:ge(V.indicator,w.className),ownerState:q,style:$({},K,w.style)}));let _e=0;const Te=P.Children.map(u,fe=>{if(!P.isValidElement(fe))return null;const Re=fe.props.value===void 0?_e:fe.props.value;Z.set(Re,_e);const Ue=Re===T;return _e+=1,P.cloneElement(fe,$({fullWidth:_==="fullWidth",indicator:Ue&&!W&&He,selected:Ue,selectionFollowsFocus:b,onChange:m,textColor:k,value:Re},_e===1&&T===!1&&!fe.props.tabIndex?{tabIndex:0}:{}))}),Ce=fe=>{const Re=ue.current,Ue=yr(Re).activeElement;if(Ue.getAttribute("role")!=="tab")return;let Ye=g==="horizontal"?"ArrowLeft":"ArrowUp",Lt=g==="horizontal"?"ArrowRight":"ArrowDown";switch(g==="horizontal"&&s&&(Ye="ArrowRight",Lt="ArrowLeft"),fe.key){case Ye:fe.preventDefault(),Wm(Re,Ue,o5);break;case Lt:fe.preventDefault(),Wm(Re,Ue,a5);break;case"Home":fe.preventDefault(),Wm(Re,null,a5);break;case"End":fe.preventDefault(),Wm(Re,null,o5);break}},Ke=ke();return S.jsxs(sse,$({className:ge(V.root,d),ownerState:q,ref:n,as:h},I,{children:[Ke.scrollButtonStart,Ke.scrollbarSizeListener,S.jsxs(ase,{className:V.scroller,ownerState:q,style:{overflow:ie.overflow,[A?`margin${s?"Left":"Right"}`:"marginBottom"]:D?void 0:-ie.scrollbarWidth},ref:oe,onScroll:De,children:[S.jsx(ose,{"aria-label":a,"aria-labelledby":o,"aria-orientation":g==="vertical"?"vertical":null,className:V.flexContainer,ownerState:q,onKeyDown:Ce,ref:ue,role:"tablist",children:Te}),W&&He]}),Ke.scrollButtonEnd]}))}),dse=use;function hse(t){return Fe("MuiTextField",t)}Be("MuiTextField",["root"]);const fse=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],pse={standard:BN,filled:NN,outlined:WN},mse=t=>{const{classes:e}=t;return Le({root:["root"]},hse,e)},gse=de(Va,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),vse=P.forwardRef(function(e,n){const r=$e({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:a,className:o,color:l="primary",defaultValue:c,disabled:u=!1,error:d=!1,FormHelperTextProps:h,fullWidth:p=!1,helperText:f,id:m,InputLabelProps:g,inputProps:v,InputProps:y,inputRef:b,label:C,maxRows:R,minRows:w,multiline:E=!1,name:k,onBlur:T,onChange:_,onFocus:D,placeholder:I,required:M=!1,rows:A,select:O=!1,SelectProps:L,type:F,value:B,variant:j="outlined"}=r,q=pe(r,fse),V=$({},r,{autoFocus:s,color:l,disabled:u,error:d,fullWidth:p,multiline:E,required:M,select:O,variant:j}),U=mse(V),ne={};j==="outlined"&&(g&&typeof g.shrink<"u"&&(ne.notched=g.shrink),ne.label=C),O&&((!L||!L.native)&&(ne.id=void 0),ne["aria-describedby"]=void 0);const W=lc(m),J=f&&W?`${W}-helper-text`:void 0,K=C&&W?`${W}-label`:void 0,Q=pse[j],re=S.jsx(Q,$({"aria-describedby":J,autoComplete:i,autoFocus:s,defaultValue:c,fullWidth:p,multiline:E,name:k,rows:A,maxRows:R,minRows:w,type:F,value:B,id:W,inputRef:b,onBlur:T,onChange:_,onFocus:D,placeholder:I,inputProps:v},ne,y));return S.jsxs(gse,$({className:ge(U.root,o),disabled:u,error:d,fullWidth:p,ref:n,required:M,color:l,variant:j,ownerState:V},q,{children:[C!=null&&C!==""&&S.jsx(Yl,$({htmlFor:W,id:K},g,{children:C})),O?S.jsx(Ho,$({"aria-describedby":J,id:W,labelId:K,value:B,input:re},L,{children:a})):re,f&&S.jsx(uee,$({id:J},h,{children:f}))]}))}),_n=vse,ZN="/assets/10132-a39caace.jpeg";function yse(){const t=Ar();return S.jsxs(ct,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",mx:"auto"},children:[S.jsx(ct,{sx:{width:500,height:300,position:"relative"},children:S.jsx("img",{src:ZN,alt:"left",style:{maxWidth:"100%",height:"auto",margin:"auto"}})}),S.jsx(yt,{variant:"h4",sx:{mt:1,textAlign:"center",color:t.palette.info.dark},children:"Patient List Manager"}),S.jsx(yt,{variant:"h6",sx:{mt:1,textAlign:"center",color:t.palette.info.dark},children:"Work together, anywhere"})]})}var bT={},nr={},bse={get exports(){return nr},set exports(t){nr=t}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(bse);var fS={};const Sse=N7(ZY);var c5;function gi(){return c5||(c5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=Sse}(fS)),fS}var xse=nr;Object.defineProperty(bT,"__esModule",{value:!0});var ST=bT.default=void 0,wse=xse(gi()),Cse=S,Ese=(0,wse.default)((0,Cse.jsx)("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7z"}),"VisibilityOutlined");ST=bT.default=Ese;var xT={},Tse=nr;Object.defineProperty(xT,"__esModule",{value:!0});var wT=xT.default=void 0,Rse=Tse(gi()),kse=S,Pse=(0,Rse.default)((0,kse.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");wT=xT.default=Pse;function e8(t,e){return function(){return t.apply(e,arguments)}}const{toString:t8}=Object.prototype,{getPrototypeOf:CT}=Object,ET=(t=>e=>{const n=t8.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),uo=t=>(t=t.toLowerCase(),e=>ET(e)===t),Ly=t=>e=>typeof e===t,{isArray:Vd}=Array,ip=Ly("undefined");function _se(t){return t!==null&&!ip(t)&&t.constructor!==null&&!ip(t.constructor)&&nl(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const n8=uo("ArrayBuffer");function Ase(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&n8(t.buffer),e}const Ose=Ly("string"),nl=Ly("function"),r8=Ly("number"),TT=t=>t!==null&&typeof t=="object",Dse=t=>t===!0||t===!1,Dg=t=>{if(ET(t)!=="object")return!1;const e=CT(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ise=uo("Date"),Mse=uo("File"),Nse=uo("Blob"),Fse=uo("FileList"),$se=t=>TT(t)&&nl(t.pipe),Lse=t=>{const e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||t8.call(t)===e||nl(t.toString)&&t.toString()===e)},Bse=uo("URLSearchParams"),jse=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vp(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Vd(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let o;for(r=0;r<a;r++)o=s[r],e.call(null,t[o],o,t)}}function i8(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const s8=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),a8=t=>!ip(t)&&t!==s8;function rC(){const{caseless:t}=a8(this)&&this||{},e={},n=(r,i)=>{const s=t&&i8(e,i)||i;Dg(e[s])&&Dg(r)?e[s]=rC(e[s],r):Dg(r)?e[s]=rC({},r):Vd(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Vp(arguments[r],n);return e}const qse=(t,e,n,{allOwnKeys:r}={})=>(Vp(e,(i,s)=>{n&&nl(i)?t[s]=e8(i,n):t[s]=i},{allOwnKeys:r}),t),zse=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Hse=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Use=(t,e,n,r)=>{let i,s,a;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!r||r(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=n!==!1&&CT(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Vse=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Wse=t=>{if(!t)return null;if(Vd(t))return t;let e=t.length;if(!r8(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Gse=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&CT(Uint8Array)),Kse=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},Yse=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Jse=uo("HTMLFormElement"),Xse=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),u5=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Qse=uo("RegExp"),o8=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Vp(n,(i,s)=>{e(i,s,t)!==!1&&(r[s]=i)}),Object.defineProperties(t,r)},Zse=t=>{o8(t,(e,n)=>{if(nl(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(nl(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},eae=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Vd(t)?r(t):r(String(t).split(e)),n},tae=()=>{},nae=(t,e)=>(t=+t,Number.isFinite(t)?t:e),pS="abcdefghijklmnopqrstuvwxyz",d5="0123456789",l8={DIGIT:d5,ALPHA:pS,ALPHA_DIGIT:pS+pS.toUpperCase()+d5},rae=(t=16,e=l8.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function iae(t){return!!(t&&nl(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const sae=t=>{const e=new Array(10),n=(r,i)=>{if(TT(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Vd(r)?[]:{};return Vp(r,(a,o)=>{const l=n(a,i+1);!ip(l)&&(s[o]=l)}),e[i]=void 0,s}}return r};return n(t,0)},he={isArray:Vd,isArrayBuffer:n8,isBuffer:_se,isFormData:Lse,isArrayBufferView:Ase,isString:Ose,isNumber:r8,isBoolean:Dse,isObject:TT,isPlainObject:Dg,isUndefined:ip,isDate:Ise,isFile:Mse,isBlob:Nse,isRegExp:Qse,isFunction:nl,isStream:$se,isURLSearchParams:Bse,isTypedArray:Gse,isFileList:Fse,forEach:Vp,merge:rC,extend:qse,trim:jse,stripBOM:zse,inherits:Hse,toFlatObject:Use,kindOf:ET,kindOfTest:uo,endsWith:Vse,toArray:Wse,forEachEntry:Kse,matchAll:Yse,isHTMLForm:Jse,hasOwnProperty:u5,hasOwnProp:u5,reduceDescriptors:o8,freezeMethods:Zse,toObjectSet:eae,toCamelCase:Xse,noop:tae,toFiniteNumber:nae,findKey:i8,global:s8,isContextDefined:a8,ALPHABET:l8,generateString:rae,isSpecCompliantForm:iae,toJSONObject:sae};function bt(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}he.inherits(bt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:he.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const c8=bt.prototype,u8={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{u8[t]={value:t}});Object.defineProperties(bt,u8);Object.defineProperty(c8,"isAxiosError",{value:!0});bt.from=(t,e,n,r,i,s)=>{const a=Object.create(c8);return he.toFlatObject(t,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),bt.call(a,t.message,e,n,r,i),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const aae=null;function iC(t){return he.isPlainObject(t)||he.isArray(t)}function d8(t){return he.endsWith(t,"[]")?t.slice(0,-2):t}function h5(t,e,n){return t?t.concat(e).map(function(i,s){return i=d8(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function oae(t){return he.isArray(t)&&!t.some(iC)}const lae=he.toFlatObject(he,{},null,function(e){return/^is[A-Z]/.test(e)});function By(t,e,n){if(!he.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=he.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!he.isUndefined(g[m])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,a=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&he.isSpecCompliantForm(e);if(!he.isFunction(i))throw new TypeError("visitor must be a function");function c(f){if(f===null)return"";if(he.isDate(f))return f.toISOString();if(!l&&he.isBlob(f))throw new bt("Blob is not supported. Use a Buffer instead.");return he.isArrayBuffer(f)||he.isTypedArray(f)?l&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function u(f,m,g){let v=f;if(f&&!g&&typeof f=="object"){if(he.endsWith(m,"{}"))m=r?m:m.slice(0,-2),f=JSON.stringify(f);else if(he.isArray(f)&&oae(f)||(he.isFileList(f)||he.endsWith(m,"[]"))&&(v=he.toArray(f)))return m=d8(m),v.forEach(function(b,C){!(he.isUndefined(b)||b===null)&&e.append(a===!0?h5([m],C,s):a===null?m:m+"[]",c(b))}),!1}return iC(f)?!0:(e.append(h5(g,m,s),c(f)),!1)}const d=[],h=Object.assign(lae,{defaultVisitor:u,convertValue:c,isVisitable:iC});function p(f,m){if(!he.isUndefined(f)){if(d.indexOf(f)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(f),he.forEach(f,function(v,y){(!(he.isUndefined(v)||v===null)&&i.call(e,v,he.isString(y)?y.trim():y,m,h))===!0&&p(v,m?m.concat(y):[y])}),d.pop()}}if(!he.isObject(t))throw new TypeError("data must be an object");return p(t),e}function f5(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function RT(t,e){this._pairs=[],t&&By(t,this,e)}const h8=RT.prototype;h8.append=function(e,n){this._pairs.push([e,n])};h8.toString=function(e){const n=e?function(r){return e.call(this,r,f5)}:f5;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function cae(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function f8(t,e,n){if(!e)return t;const r=n&&n.encode||cae,i=n&&n.serialize;let s;if(i?s=i(e,n):s=he.isURLSearchParams(e)?e.toString():new RT(e,n).toString(r),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}let uae=class{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){he.forEach(this.handlers,function(r){r!==null&&e(r)})}};const p5=uae,p8={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dae=typeof URLSearchParams<"u"?URLSearchParams:RT,hae=typeof FormData<"u"?FormData:null,fae=typeof Blob<"u"?Blob:null,pae=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),mae=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ta={isBrowser:!0,classes:{URLSearchParams:dae,FormData:hae,Blob:fae},isStandardBrowserEnv:pae,isStandardBrowserWebWorkerEnv:mae,protocols:["http","https","file","blob","url","data"]};function gae(t,e){return By(t,new ta.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return ta.isNode&&he.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function vae(t){return he.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function yae(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function m8(t){function e(n,r,i,s){let a=n[s++];const o=Number.isFinite(+a),l=s>=n.length;return a=!a&&he.isArray(i)?i.length:a,l?(he.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!o):((!i[a]||!he.isObject(i[a]))&&(i[a]=[]),e(n,r,i[a],s)&&he.isArray(i[a])&&(i[a]=yae(i[a])),!o)}if(he.isFormData(t)&&he.isFunction(t.entries)){const n={};return he.forEachEntry(t,(r,i)=>{e(vae(r),i,n,0)}),n}return null}const bae={"Content-Type":void 0};function Sae(t,e,n){if(he.isString(t))try{return(e||JSON.parse)(t),he.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const jy={transitional:p8,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=he.isObject(e);if(s&&he.isHTMLForm(e)&&(e=new FormData(e)),he.isFormData(e))return i&&i?JSON.stringify(m8(e)):e;if(he.isArrayBuffer(e)||he.isBuffer(e)||he.isStream(e)||he.isFile(e)||he.isBlob(e))return e;if(he.isArrayBufferView(e))return e.buffer;if(he.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return gae(e,this.formSerializer).toString();if((o=he.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return By(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),Sae(e)):e}],transformResponse:[function(e){const n=this.transitional||jy.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&he.isString(e)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?bt.from(o,bt.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ta.classes.FormData,Blob:ta.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};he.forEach(["delete","get","head"],function(e){jy.headers[e]={}});he.forEach(["post","put","patch"],function(e){jy.headers[e]=he.merge(bae)});const kT=jy,xae=he.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wae=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||e[n]&&xae[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},m5=Symbol("internals");function Oh(t){return t&&String(t).trim().toLowerCase()}function Ig(t){return t===!1||t==null?t:he.isArray(t)?t.map(Ig):String(t)}function Cae(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Eae=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function mS(t,e,n,r,i){if(he.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!he.isString(e)){if(he.isString(r))return e.indexOf(r)!==-1;if(he.isRegExp(r))return r.test(e)}}function Tae(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Rae(t,e){const n=he.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,a){return this[r].call(this,e,i,s,a)},configurable:!0})})}class qy{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(o,l,c){const u=Oh(l);if(!u)throw new Error("header name must be a non-empty string");const d=he.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=Ig(o))}const a=(o,l)=>he.forEach(o,(c,u)=>s(c,u,l));return he.isPlainObject(e)||e instanceof this.constructor?a(e,n):he.isString(e)&&(e=e.trim())&&!Eae(e)?a(wae(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=Oh(e),e){const r=he.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return Cae(i);if(he.isFunction(n))return n.call(this,i,r);if(he.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Oh(e),e){const r=he.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||mS(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(a){if(a=Oh(a),a){const o=he.findKey(r,a);o&&(!n||mS(r,r[o],o,n))&&(delete r[o],i=!0)}}return he.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||mS(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return he.forEach(this,(i,s)=>{const a=he.findKey(r,s);if(a){n[a]=Ig(i),delete n[s];return}const o=e?Tae(s):String(s).trim();o!==s&&delete n[s],n[o]=Ig(i),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return he.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&he.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[m5]=this[m5]={accessors:{}}).accessors,i=this.prototype;function s(a){const o=Oh(a);r[o]||(Rae(i,a),r[o]=!0)}return he.isArray(e)?e.forEach(s):s(e),this}}qy.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);he.freezeMethods(qy.prototype);he.freezeMethods(qy);const Xa=qy;function gS(t,e){const n=this||kT,r=e||n,i=Xa.from(r.headers);let s=r.data;return he.forEach(t,function(o){s=o.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function g8(t){return!!(t&&t.__CANCEL__)}function Wp(t,e,n){bt.call(this,t??"canceled",bt.ERR_CANCELED,e,n),this.name="CanceledError"}he.inherits(Wp,bt,{__CANCEL__:!0});function kae(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new bt("Request failed with status code "+n.status,[bt.ERR_BAD_REQUEST,bt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const Pae=ta.isStandardBrowserEnv?function(){return{write:function(n,r,i,s,a,o){const l=[];l.push(n+"="+encodeURIComponent(r)),he.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),he.isString(s)&&l.push("path="+s),he.isString(a)&&l.push("domain="+a),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function _ae(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Aae(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function v8(t,e){return t&&!_ae(e)?Aae(t,e):e}const Oae=ta.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let a=s;return e&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(a){const o=he.isString(a)?i(a):a;return o.protocol===r.protocol&&o.host===r.host}}():function(){return function(){return!0}}();function Dae(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Iae(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];a||(a=c),n[i]=l,r[i]=c;let d=s,h=0;for(;d!==i;)h+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-a<e)return;const p=u&&c-u;return p?Math.round(h*1e3/p):void 0}}function g5(t,e){let n=0;const r=Iae(50,250);return i=>{const s=i.loaded,a=i.lengthComputable?i.total:void 0,o=s-n,l=r(o),c=s<=a;n=s;const u={loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&c?(a-s)/l:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}const Mae=typeof XMLHttpRequest<"u",Nae=Mae&&function(t){return new Promise(function(n,r){let i=t.data;const s=Xa.from(t.headers).normalize(),a=t.responseType;let o;function l(){t.cancelToken&&t.cancelToken.unsubscribe(o),t.signal&&t.signal.removeEventListener("abort",o)}he.isFormData(i)&&(ta.isStandardBrowserEnv||ta.isStandardBrowserWebWorkerEnv)&&s.setContentType(!1);let c=new XMLHttpRequest;if(t.auth){const p=t.auth.username||"",f=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(p+":"+f))}const u=v8(t.baseURL,t.url);c.open(t.method.toUpperCase(),f8(u,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function d(){if(!c)return;const p=Xa.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),m={data:!a||a==="text"||a==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:p,config:t,request:c};kae(function(v){n(v),l()},function(v){r(v),l()},m),c=null}if("onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(d)},c.onabort=function(){c&&(r(new bt("Request aborted",bt.ECONNABORTED,t,c)),c=null)},c.onerror=function(){r(new bt("Network Error",bt.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let f=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const m=t.transitional||p8;t.timeoutErrorMessage&&(f=t.timeoutErrorMessage),r(new bt(f,m.clarifyTimeoutError?bt.ETIMEDOUT:bt.ECONNABORTED,t,c)),c=null},ta.isStandardBrowserEnv){const p=(t.withCredentials||Oae(u))&&t.xsrfCookieName&&Pae.read(t.xsrfCookieName);p&&s.set(t.xsrfHeaderName,p)}i===void 0&&s.setContentType(null),"setRequestHeader"in c&&he.forEach(s.toJSON(),function(f,m){c.setRequestHeader(m,f)}),he.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),a&&a!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",g5(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",g5(t.onUploadProgress)),(t.cancelToken||t.signal)&&(o=p=>{c&&(r(!p||p.type?new Wp(null,t,c):p),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(o),t.signal&&(t.signal.aborted?o():t.signal.addEventListener("abort",o)));const h=Dae(u);if(h&&ta.protocols.indexOf(h)===-1){r(new bt("Unsupported protocol "+h+":",bt.ERR_BAD_REQUEST,t));return}c.send(i||null)})},Mg={http:aae,xhr:Nae};he.forEach(Mg,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Fae={getAdapter:t=>{t=he.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let i=0;i<e&&(n=t[i],!(r=he.isString(n)?Mg[n.toLowerCase()]:n));i++);if(!r)throw r===!1?new bt(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(he.hasOwnProp(Mg,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!he.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:Mg};function vS(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Wp(null,t)}function v5(t){return vS(t),t.headers=Xa.from(t.headers),t.data=gS.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Fae.getAdapter(t.adapter||kT.adapter)(t).then(function(r){return vS(t),r.data=gS.call(t,t.transformResponse,r),r.headers=Xa.from(r.headers),r},function(r){return g8(r)||(vS(t),r&&r.response&&(r.response.data=gS.call(t,t.transformResponse,r.response),r.response.headers=Xa.from(r.response.headers))),Promise.reject(r)})}const y5=t=>t instanceof Xa?t.toJSON():t;function Sd(t,e){e=e||{};const n={};function r(c,u,d){return he.isPlainObject(c)&&he.isPlainObject(u)?he.merge.call({caseless:d},c,u):he.isPlainObject(u)?he.merge({},u):he.isArray(u)?u.slice():u}function i(c,u,d){if(he.isUndefined(u)){if(!he.isUndefined(c))return r(void 0,c,d)}else return r(c,u,d)}function s(c,u){if(!he.isUndefined(u))return r(void 0,u)}function a(c,u){if(he.isUndefined(u)){if(!he.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function o(c,u,d){if(d in e)return r(c,u);if(d in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(c,u)=>i(y5(c),y5(u),!0)};return he.forEach(Object.keys(t).concat(Object.keys(e)),function(u){const d=l[u]||i,h=d(t[u],e[u],u);he.isUndefined(h)&&d!==o||(n[u]=h)}),n}const y8="1.3.5",PT={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{PT[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const b5={};PT.transitional=function(e,n,r){function i(s,a){return"[Axios v"+y8+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,o)=>{if(e===!1)throw new bt(i(a," has been removed"+(n?" in "+n:"")),bt.ERR_DEPRECATED);return n&&!b5[a]&&(b5[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,a,o):!0}};function $ae(t,e,n){if(typeof t!="object")throw new bt("options must be an object",bt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],a=e[s];if(a){const o=t[s],l=o===void 0||a(o,s,t);if(l!==!0)throw new bt("option "+s+" must be "+l,bt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new bt("Unknown option "+s,bt.ERR_BAD_OPTION)}}const sC={assertOptions:$ae,validators:PT},vo=sC.validators;let F0=class{constructor(e){this.defaults=e,this.interceptors={request:new p5,response:new p5}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Sd(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&sC.assertOptions(r,{silentJSONParsing:vo.transitional(vo.boolean),forcedJSONParsing:vo.transitional(vo.boolean),clarifyTimeoutError:vo.transitional(vo.boolean)},!1),i!=null&&(he.isFunction(i)?n.paramsSerializer={serialize:i}:sC.assertOptions(i,{encode:vo.function,serialize:vo.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a;a=s&&he.merge(s.common,s[n.method]),a&&he.forEach(["delete","get","head","post","put","patch","common"],f=>{delete s[f]}),n.headers=Xa.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,o.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,d=0,h;if(!l){const f=[v5.bind(this),void 0];for(f.unshift.apply(f,o),f.push.apply(f,c),h=f.length,u=Promise.resolve(n);d<h;)u=u.then(f[d++],f[d++]);return u}h=o.length;let p=n;for(d=0;d<h;){const f=o[d++],m=o[d++];try{p=f(p)}catch(g){m.call(this,g);break}}try{u=v5.call(this,p)}catch(f){return Promise.reject(f)}for(d=0,h=c.length;d<h;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=Sd(this.defaults,e);const n=v8(e.baseURL,e.url);return f8(n,e.params,e.paramsSerializer)}};he.forEach(["delete","get","head","options"],function(e){F0.prototype[e]=function(n,r){return this.request(Sd(r||{},{method:e,url:n,data:(r||{}).data}))}});he.forEach(["post","put","patch"],function(e){function n(r){return function(s,a,o){return this.request(Sd(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}F0.prototype[e]=n(),F0.prototype[e+"Form"]=n(!0)});const Ng=F0;class _T{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(o=>{r.subscribe(o),s=o}).then(i);return a.cancel=function(){r.unsubscribe(s)},a},e(function(s,a,o){r.reason||(r.reason=new Wp(s,a,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new _T(function(i){e=i}),cancel:e}}}const Lae=_T;function Bae(t){return function(n){return t.apply(null,n)}}function jae(t){return he.isObject(t)&&t.isAxiosError===!0}const aC={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(aC).forEach(([t,e])=>{aC[e]=t});const qae=aC;function b8(t){const e=new Ng(t),n=e8(Ng.prototype.request,e);return he.extend(n,Ng.prototype,e,{allOwnKeys:!0}),he.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return b8(Sd(t,i))},n}const Un=b8(kT);Un.Axios=Ng;Un.CanceledError=Wp;Un.CancelToken=Lae;Un.isCancel=g8;Un.VERSION=y8;Un.toFormData=By;Un.AxiosError=bt;Un.Cancel=Un.CanceledError;Un.all=function(e){return Promise.all(e)};Un.spread=Bae;Un.isAxiosError=jae;Un.mergeConfig=Sd;Un.AxiosHeaders=Xa;Un.formToJSON=t=>m8(he.isHTMLForm(t)?new FormData(t):t);Un.HttpStatusCode=qae;Un.default=Un;const xn=Un,S8="";async function zae(t,e,n,r,i){try{const s=await xn.post(`${S8}/api/user/login`,{email:t,password:e},{withCredentials:!0});if(s.status===200){const a=s.data.user,o={_id:a._id,team:a.team};n(!0),r(o),sessionStorage.setItem("loggedInUser",JSON.stringify(a)),i(s.data.redirect)}else throw new Error(s.data.message)}catch(s){throw console.error("Error in loginUser:",s),s.response?new Error(s.response.data.message):new Error("Unable to connect to the server.")}}async function Hae(t,e,n=null){try{const r=await xn.post(`${S8}/api/user/logout`,null,{withCredentials:!0});return r.status===200&&(t(!1),e(null),sessionStorage.removeItem("loggedInUser"),n(r.data.redirect)),r}catch(r){return console.error("Error in logoutUser:",r),null}}function x8(t,e=null){const[n,r]=P.useState(e),[i,s]=P.useState(!1),[a,o]=P.useState(!1);P.useEffect(()=>{async function c(){s(!0);const u=await xn.get(t);r(u.data),s(!1)}c()},[t,a]);function l(){o(!a)}return{data:n,isLoading:i,refresh:l}}function Ia(t,e=null,n=[],r={}){const[i,s]=P.useState(e),[a,o]=P.useState(!0),[l,c]=P.useState(!1);P.useEffect(()=>{async function d(){if(!n[0]||!t||Array.isArray(n)&&n.slice(1).some(p=>!p))return;o(!0);const h=await xn.get(t,r);s(h.data),o(!1)}d()},[t,l].concat(n));function u(){c(!l)}return{data:i,isLoading:a,refresh:u}}function S5(t,e=[],n={}){const[r,i]=P.useState(!1);return{put:P.useCallback(async a=>{i(!0);try{if(!e[0]||!t||Array.isArray(e)&&e.slice(1).some(l=>!l))return;const o=await xn.put(t,a,n);return i(!1),o}catch(o){throw i(!1),o}},[t,n].concat(e)),isLoading:r}}const On="",Vn=En.createContext({patients:[],notifications:[],tasks:[],tasksCompleted:[],patientList:[],clinicianList:[],team:{},allTeams:[],userProfile:{},unreadNotification:[]});function Uae({children:t}){const[e,n]=P.useState(!1),[r,i]=P.useState(null),[s,a]=P.useState(null);P.useEffect(()=>{r&&a(r._id)},[r]),P.useEffect(()=>{const X=sessionStorage.getItem("loggedInUser");X&&(i(JSON.parse(X)),n(!0))},[]);const o=e?{withCredentials:!0}:{},{data:l,isLoading:c,refresh:u}=Ia(s?`${On}/api/notification/${s}`:null,[],[e],o),{data:d,isLoading:h,refresh:p}=Ia(s?`${On}/api/task`:null,[],[r],o),{data:f,isLoading:m,refresh:g}=Ia(s?`${On}/api/notification/unread/${s}`:null,[],[e],o),{data:v,isLoading:y,refresh:b}=Ia(s&&`${On}/api/patient`,[],[e],o);async function C(X){await xn.post(`${On}/api/task/createtask`,{name:X.name,type:X.type,patient:X.patient,clinician:X.clinician,priority:X.priority,status:X.status}),p(),u(),g()}const{data:R,isLoading:w,refresh:E}=Ia(s?`${On}/api/user_profile/${s}`:null,[],[e],o),{data:k,isLoading:T,refresh:_}=Ia(s?`${On}/api/task/completed/${s}`:null,[],[e],o),{put:D,isLoading:I}=S5(r?`${On}/api/user_profile/${r._id}`:null,[e],o),{put:M,isLoading:A}=S5(r?`${On}/api/user_profile/password/${r._id}`:null,[e],o);async function O(X,le){try{const se=await D(le);E()}catch(se){console.error(se)}}async function L(X,le){try{const se=await M({newPassword:le});E()}catch(se){console.error(se)}}async function F(X){for(let le=0;le<X.length;le++)await xn.delete(`${On}/api/task/${X[le]}`)}async function B(X){for(let le=0;le<X.length;le++)await xn.put(`${On}/api/task/updatetask/${X[le]}`,{clinician:s})}async function j(X){for(let le=0;le<X.length;le++)await xn.put(`${On}/api/task/updatetask/${X[le]}`,{status:2,finished_at:Date.now(),clinician:s})}async function q(X){try{const le=await xn.delete(s?`${On}/api/notification/${X}`:null)}catch(le){console.error(le)}u(),g()}const{data:V,isLoading:U,refresh:ne}=Ia(r&&`${On}/api/team/${r.team}/patient_list`,[]),{data:W,isLoading:J,refresh:K}=Ia(r&&`${On}/api/team/${r.team}`,[],[e],o),{data:Q,isLoading:re,refresh:G}=Ia(r&&`${On}/api/team`,[],[e],o);async function ie(X,le){await xn.put(`${On}/api/patient/${X}`,{container:le})}async function te(X){await xn.put(`${On}/api/notification/unread/${X}`),g(),u()}async function Z(X){const le=await xn.post(`${On}/api/patient/add`,X);if(X.quickAdd==="blood-test, radiology"){const se={name:"FBC",type:"blood-test",patient:le.data._id,priority:0,status:0},ae={name:"XR",type:"radiology",patient:le.data._id,priority:0,status:0};await C(se),await C(ae)}else if(X.quickAdd==="blood-test"){const se={name:"FBC",type:"blood-test",patient:le.data._id,priority:0,status:0};await C(se)}else if(X.quickAdd==="radiology"){const se={name:"XR",type:"radiology",patient:le.data._id,priority:0,status:0};await C(se)}u(),g(),location.reload()}const[oe,ue]=P.useState(!1),Y={notification:l,notificationsLoading:c,unreadNotification:f,unreadNotificationLoading:m,deleteNotification:q,readNotification:te,drawerOpen:oe,handleDrawerOpen:()=>{ue(!0)},handleDrawerClose:()=>{ue(!1)},teamPatients:v,tasks:d,tasksLoading:h,tasksCompleted:k,tasksCompletedLoading:T,patientList:V,patientListLoading:U,team:W,teamLoading:J,userProfile:R,userProfileLoading:w,updateUserProfile:O,loggedIn:e,setLoggedIn:n,createContainer:ie,createTask:C,deleteTask:F,claimTask:B,loggedInUser:r,setLoggedInUser:i,addPatientProvider:Z,completeTask:j,allTeams:Q,allTeamsLoading:re,options:o,refreshNotifications:u,refreshUnreadNotifications:g,refreshTeam:K,updateUserPassword:L};return S.jsx(Vn.Provider,{value:Y,children:t})}function Vae(){const t=Ar(),[e,n]=P.useState(""),[r,i]=P.useState(""),[s,a]=P.useState(""),[o,l]=P.useState(!1),{setLoggedIn:c,setLoggedInUser:u}=P.useContext(Vn),d=Mc(),h=async p=>{p.preventDefault();try{await zae(e,r,c,u,d)}catch(f){a(f.message)}};return S.jsx(ct,{sx:{height:"100vh",display:"flex",alignItems:"center"},children:S.jsxs(ct,{sx:{my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[S.jsx(yt,{component:"h1",variant:"h5",sx:{color:t.palette.info.dark},children:"Welcome!"}),S.jsx(ct,{component:"form",noValidate:!0,sx:{mt:1},children:S.jsxs(at,{container:!0,children:[S.jsx(at,{item:!0,xs:12,children:S.jsx(_n,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:e,onChange:p=>n(p.target.value)})}),S.jsx(at,{item:!0,xs:12,children:S.jsx(_n,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:o?"text":"password",id:"password",autoComplete:"current-password",value:r,onChange:p=>i(p.target.value),InputProps:{endAdornment:S.jsx(jN,{position:"end",children:S.jsx(ii,{onClick:()=>l(!o),onMouseDown:p=>p.preventDefault(),children:o?S.jsx(wT,{}):S.jsx(ST,{})})})}})}),S.jsx(at,{item:!0,xs:12,children:S.jsx(ct,{sx:{display:"flex",pl:"5px"}})}),S.jsxs(at,{item:!0,xs:12,children:[S.jsx("div",{style:{height:"10px"},children:s&&S.jsx(yt,{variant:"subtitle2",color:"error",sx:{display:"flex",pl:"5px"},children:s})}),S.jsx(ht,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:h,children:"Login"})]})]})})]})})}const Wae=En.memo(Vae);function Gae(){return S.jsxs(at,{container:!0,component:"main",sx:{height:"100vh"},children:[S.jsx(at,{item:!0,xs:12,md:8,sx:{display:"flex",backgroundColor:"#F8FCFD"},children:S.jsx(yse,{})}),S.jsx(at,{item:!0,xs:12,md:4,children:S.jsx(Wae,{})})]})}const Kae="/assets/DoctorAvatar-3e9954ff.jpeg",x5="/assets/DoctorAvatar1-6a7abb18.jpg",Yae="/assets/DoctorAvatar2-1edfb261.jpg",Jae="/assets/DoctorAvatar3-4420e30d.jpg",Xae="/assets/DoctorAvatar4-7d061ce1.jpg",Qae="/assets/DoctorAvatar5-f334f4e6.jpg",Dh=[{name:"DoctorAvatar1",src:x5},{name:"DoctorAvatar2",src:Yae},{name:"DoctorAvatar3",src:Jae},{name:"DoctorAvatar4",src:Xae},{name:"DoctorAvatar5",src:Qae},{name:"DoctorAvatar6",src:x5}];function AT({id:t,size:e}){for(let n=0;n<Dh.length;n++){if(t==Dh[n].name&&e=="big")return S.jsx(cS,{direction:"row",spacing:2,children:S.jsx(Z1,{alt:"`${avatars[i].name}`",src:Dh[n].src,sx:{width:120,height:120,mx:"auto"}})});if(t==Dh[n].name)return S.jsx(cS,{direction:"row",spacing:2,children:S.jsx(Z1,{alt:"`${avatars[i].name}`",src:Dh[n].src,sx:{mr:1}})})}return S.jsx(cS,{direction:"row",spacing:2,children:S.jsx(Z1,{alt:"`default avatar`",src:Kae,sx:{mr:1}})})}var Gp=t=>t.type==="checkbox",Du=t=>t instanceof Date,$r=t=>t==null;const w8=t=>typeof t=="object";var Wn=t=>!$r(t)&&!Array.isArray(t)&&w8(t)&&!Du(t),Zae=t=>Wn(t)&&t.target?Gp(t.target)?t.target.checked:t.target.value:t,eoe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,toe=(t,e)=>t.has(eoe(e)),noe=t=>{const e=t.constructor&&t.constructor.prototype;return Wn(e)&&e.hasOwnProperty("isPrototypeOf")},OT=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function kl(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(OT&&(t instanceof Blob||t instanceof FileList))&&(n||Wn(t)))if(e=n?[]:{},!Array.isArray(t)&&!noe(t))e=t;else for(const r in t)e[r]=kl(t[r]);else return t;return e}var Kp=t=>Array.isArray(t)?t.filter(Boolean):[],In=t=>t===void 0,je=(t,e,n)=>{if(!e||!Wn(t))return n;const r=Kp(e.split(/[,[\].]+?/)).reduce((i,s)=>$r(i)?i:i[s],t);return In(r)||r===t?In(t[e])?n:t[e]:r};const w5={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Cs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ma={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};En.createContext(null);var roe=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const a=s;return e._proxyFormState[a]!==Cs.all&&(e._proxyFormState[a]=!r||Cs.all),n&&(n[a]=!0),t[a]}});return i},Hi=t=>Wn(t)&&!Object.keys(t).length,ioe=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return Hi(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(a=>e[a]===(!r||Cs.all))},yS=t=>Array.isArray(t)?t:[t];function soe(t){const e=En.useRef(t);e.current=t,En.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var na=t=>typeof t=="string",aoe=(t,e,n,r,i)=>na(t)?(r&&e.watch.add(t),je(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),je(n,s))):(r&&(e.watchAll=!0),n),DT=t=>/^\w*$/.test(t),C8=t=>Kp(t.replace(/["|']|\]/g,"").split(/\.|\[/));function en(t,e,n){let r=-1;const i=DT(e)?[e]:C8(e),s=i.length,a=s-1;for(;++r<s;){const o=i[r];let l=n;if(r!==a){const c=t[o];l=Wn(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}t[o]=l,t=t[o]}return t}var ooe=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{};const oC=(t,e,n)=>{for(const r of n||Object.keys(t)){const i=je(t,r);if(i){const{_f:s,...a}=i;if(s&&e(s.name)){if(s.ref.focus){s.ref.focus();break}else if(s.refs&&s.refs[0].focus){s.refs[0].focus();break}}else Wn(a)&&oC(a,e)}}};var C5=t=>({isOnSubmit:!t||t===Cs.onSubmit,isOnBlur:t===Cs.onBlur,isOnChange:t===Cs.onChange,isOnAll:t===Cs.all,isOnTouch:t===Cs.onTouched}),E5=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length)))),loe=(t,e,n)=>{const r=Kp(je(t,n));return en(r,"root",e[n]),en(t,n,r),t},Wu=t=>typeof t=="boolean",IT=t=>t.type==="file",Po=t=>typeof t=="function",$0=t=>{if(!OT)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Fg=t=>na(t),MT=t=>t.type==="radio",L0=t=>t instanceof RegExp;const T5={value:!1,isValid:!1},R5={value:!0,isValid:!0};var E8=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!In(t[0].attributes.value)?In(t[0].value)||t[0].value===""?R5:{value:t[0].value,isValid:!0}:R5:T5}return T5};const k5={isValid:!1,value:null};var T8=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,k5):k5;function P5(t,e,n="validate"){if(Fg(t)||Array.isArray(t)&&t.every(Fg)||Wu(t)&&!t)return{type:n,message:Fg(t)?t:"",ref:e}}var nu=t=>Wn(t)&&!L0(t)?t:{value:t,message:""},_5=async(t,e,n,r,i)=>{const{ref:s,refs:a,required:o,maxLength:l,minLength:c,min:u,max:d,pattern:h,validate:p,name:f,valueAsNumber:m,mount:g,disabled:v}=t._f,y=je(e,f);if(!g||v)return{};const b=a?a[0]:s,C=I=>{r&&b.reportValidity&&(b.setCustomValidity(Wu(I)?"":I||""),b.reportValidity())},R={},w=MT(s),E=Gp(s),k=w||E,T=(m||IT(s))&&In(s.value)&&In(y)||$0(s)&&s.value===""||y===""||Array.isArray(y)&&!y.length,_=ooe.bind(null,f,n,R),D=(I,M,A,O=Ma.maxLength,L=Ma.minLength)=>{const F=I?M:A;R[f]={type:I?O:L,message:F,ref:s,..._(I?O:L,F)}};if(i?!Array.isArray(y)||!y.length:o&&(!k&&(T||$r(y))||Wu(y)&&!y||E&&!E8(a).isValid||w&&!T8(a).isValid)){const{value:I,message:M}=Fg(o)?{value:!!o,message:o}:nu(o);if(I&&(R[f]={type:Ma.required,message:M,ref:b,..._(Ma.required,M)},!n))return C(M),R}if(!T&&(!$r(u)||!$r(d))){let I,M;const A=nu(d),O=nu(u);if(!$r(y)&&!isNaN(y)){const L=s.valueAsNumber||y&&+y;$r(A.value)||(I=L>A.value),$r(O.value)||(M=L<O.value)}else{const L=s.valueAsDate||new Date(y),F=q=>new Date(new Date().toDateString()+" "+q),B=s.type=="time",j=s.type=="week";na(A.value)&&y&&(I=B?F(y)>F(A.value):j?y>A.value:L>new Date(A.value)),na(O.value)&&y&&(M=B?F(y)<F(O.value):j?y<O.value:L<new Date(O.value))}if((I||M)&&(D(!!I,A.message,O.message,Ma.max,Ma.min),!n))return C(R[f].message),R}if((l||c)&&!T&&(na(y)||i&&Array.isArray(y))){const I=nu(l),M=nu(c),A=!$r(I.value)&&y.length>+I.value,O=!$r(M.value)&&y.length<+M.value;if((A||O)&&(D(A,I.message,M.message),!n))return C(R[f].message),R}if(h&&!T&&na(y)){const{value:I,message:M}=nu(h);if(L0(I)&&!y.match(I)&&(R[f]={type:Ma.pattern,message:M,ref:s,..._(Ma.pattern,M)},!n))return C(M),R}if(p){if(Po(p)){const I=await p(y,e),M=P5(I,b);if(M&&(R[f]={...M,..._(Ma.validate,M.message)},!n))return C(M.message),R}else if(Wn(p)){let I={};for(const M in p){if(!Hi(I)&&!n)break;const A=P5(await p[M](y,e),b,M);A&&(I={...A,..._(M,A.message)},C(A.message),n&&(R[f]=I))}if(!Hi(I)&&(R[f]={ref:b,...I},!n))return R}}return C(!0),R};function coe(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=In(t)?r++:t[e[r++]];return t}function uoe(t){for(const e in t)if(!In(t[e]))return!1;return!0}function dr(t,e){const n=Array.isArray(e)?e:DT(e)?[e]:C8(e),r=n.length===1?t:coe(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Wn(r)&&Hi(r)||Array.isArray(r)&&uoe(r))&&dr(t,n.slice(0,-1)),t}function bS(){let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}}var B0=t=>$r(t)||!w8(t);function Ll(t,e){if(B0(t)||B0(e))return t===e;if(Du(t)&&Du(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const a=e[i];if(Du(s)&&Du(a)||Wn(s)&&Wn(a)||Array.isArray(s)&&Array.isArray(a)?!Ll(s,a):s!==a)return!1}}return!0}var R8=t=>t.type==="select-multiple",doe=t=>MT(t)||Gp(t),SS=t=>$0(t)&&t.isConnected,k8=t=>{for(const e in t)if(Po(t[e]))return!0;return!1};function j0(t,e={}){const n=Array.isArray(t);if(Wn(t)||n)for(const r in t)Array.isArray(t[r])||Wn(t[r])&&!k8(t[r])?(e[r]=Array.isArray(t[r])?[]:{},j0(t[r],e[r])):$r(t[r])||(e[r]=!0);return e}function P8(t,e,n){const r=Array.isArray(t);if(Wn(t)||r)for(const i in t)Array.isArray(t[i])||Wn(t[i])&&!k8(t[i])?In(e)||B0(n[i])?n[i]=Array.isArray(t[i])?j0(t[i],[]):{...j0(t[i])}:P8(t[i],$r(e)?{}:e[i],n[i]):n[i]=!Ll(t[i],e[i]);return n}var xS=(t,e)=>P8(t,e,j0(e)),_8=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>In(t)?t:e?t===""?NaN:t&&+t:n&&na(t)?new Date(t):r?r(t):t;function wS(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return IT(e)?e.files:MT(e)?T8(t.refs).value:R8(e)?[...e.selectedOptions].map(({value:n})=>n):Gp(e)?E8(t.refs).value:_8(In(e.value)?t.ref.value:e.value,t)}var hoe=(t,e,n,r)=>{const i={};for(const s of t){const a=je(e,s);a&&en(i,s,a._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Ih=t=>In(t)?t:L0(t)?t.source:Wn(t)?L0(t.value)?t.value.source:t.value:t,foe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function A5(t,e,n){const r=je(t,n);if(r||DT(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),a=je(e,s),o=je(t,s);if(a&&!Array.isArray(a)&&n!==s)return{name:n};if(o&&o.type)return{name:s,error:o};i.pop()}return{name:n}}var poe=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,moe=(t,e)=>!Kp(je(t,e)).length&&dr(t,e);const goe={mode:Cs.onSubmit,reValidateMode:Cs.onChange,shouldFocusError:!0};function voe(t={},e){let n={...goe,...t},r={submitCount:0,isDirty:!1,isLoading:Po(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},i={},s=Wn(n.defaultValues)||Wn(n.values)?kl(n.defaultValues||n.values)||{}:{},a=n.shouldUnregister?{}:kl(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:bS(),array:bS(),state:bS()},p=t.resetOptions&&t.resetOptions.keepDirtyValues,f=C5(n.mode),m=C5(n.reValidateMode),g=n.criteriaMode===Cs.all,v=H=>Y=>{clearTimeout(u),u=setTimeout(H,Y)},y=async H=>{if(d.isValid||H){const Y=n.resolver?Hi((await T()).errors):await D(i,!0);Y!==r.isValid&&h.state.next({isValid:Y})}},b=H=>d.isValidating&&h.state.next({isValidating:H}),C=(H,Y=[],X,le,se=!0,ae=!0)=>{if(le&&X){if(o.action=!0,ae&&Array.isArray(je(i,H))){const ve=X(je(i,H),le.argA,le.argB);se&&en(i,H,ve)}if(ae&&Array.isArray(je(r.errors,H))){const ve=X(je(r.errors,H),le.argA,le.argB);se&&en(r.errors,H,ve),moe(r.errors,H)}if(d.touchedFields&&ae&&Array.isArray(je(r.touchedFields,H))){const ve=X(je(r.touchedFields,H),le.argA,le.argB);se&&en(r.touchedFields,H,ve)}d.dirtyFields&&(r.dirtyFields=xS(s,a)),h.state.next({name:H,isDirty:M(H,Y),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else en(a,H,Y)},R=(H,Y)=>{en(r.errors,H,Y),h.state.next({errors:r.errors})},w=(H,Y,X,le)=>{const se=je(i,H);if(se){const ae=je(a,H,In(X)?je(s,H):X);In(ae)||le&&le.defaultChecked||Y?en(a,H,Y?ae:wS(se._f)):L(H,ae),o.mount&&y()}},E=(H,Y,X,le,se)=>{let ae=!1,ve=!1;const ke={name:H};if(!X||le){d.isDirty&&(ve=r.isDirty,r.isDirty=ke.isDirty=M(),ae=ve!==ke.isDirty);const Ee=Ll(je(s,H),Y);ve=je(r.dirtyFields,H),Ee?dr(r.dirtyFields,H):en(r.dirtyFields,H,!0),ke.dirtyFields=r.dirtyFields,ae=ae||d.dirtyFields&&ve!==!Ee}if(X){const Ee=je(r.touchedFields,H);Ee||(en(r.touchedFields,H,X),ke.touchedFields=r.touchedFields,ae=ae||d.touchedFields&&Ee!==X)}return ae&&se&&h.state.next(ke),ae?ke:{}},k=(H,Y,X,le)=>{const se=je(r.errors,H),ae=d.isValid&&Wu(Y)&&r.isValid!==Y;if(t.delayError&&X?(c=v(()=>R(H,X)),c(t.delayError)):(clearTimeout(u),c=null,X?en(r.errors,H,X):dr(r.errors,H)),(X?!Ll(se,X):se)||!Hi(le)||ae){const ve={...le,...ae&&Wu(Y)?{isValid:Y}:{},errors:r.errors,name:H};r={...r,...ve},h.state.next(ve)}b(!1)},T=async H=>n.resolver(a,n.context,hoe(H||l.mount,i,n.criteriaMode,n.shouldUseNativeValidation)),_=async H=>{const{errors:Y}=await T();if(H)for(const X of H){const le=je(Y,X);le?en(r.errors,X,le):dr(r.errors,X)}else r.errors=Y;return Y},D=async(H,Y,X={valid:!0})=>{for(const le in H){const se=H[le];if(se){const{_f:ae,...ve}=se;if(ae){const ke=l.array.has(ae.name),Ee=await _5(se,a,g,n.shouldUseNativeValidation&&!Y,ke);if(Ee[ae.name]&&(X.valid=!1,Y))break;!Y&&(je(Ee,ae.name)?ke?loe(r.errors,Ee,ae.name):en(r.errors,ae.name,Ee[ae.name]):dr(r.errors,ae.name))}ve&&await D(ve,Y,X)}}return X.valid},I=()=>{for(const H of l.unMount){const Y=je(i,H);Y&&(Y._f.refs?Y._f.refs.every(X=>!SS(X)):!SS(Y._f.ref))&&K(H)}l.unMount=new Set},M=(H,Y)=>(H&&Y&&en(a,H,Y),!Ll(V(),s)),A=(H,Y,X)=>aoe(H,l,{...o.mount?a:In(Y)?s:na(H)?{[H]:Y}:Y},X,Y),O=H=>Kp(je(o.mount?a:s,H,t.shouldUnregister?je(s,H,[]):[])),L=(H,Y,X={})=>{const le=je(i,H);let se=Y;if(le){const ae=le._f;ae&&(!ae.disabled&&en(a,H,_8(Y,ae)),se=$0(ae.ref)&&$r(Y)?"":Y,R8(ae.ref)?[...ae.ref.options].forEach(ve=>ve.selected=se.includes(ve.value)):ae.refs?Gp(ae.ref)?ae.refs.length>1?ae.refs.forEach(ve=>(!ve.defaultChecked||!ve.disabled)&&(ve.checked=Array.isArray(se)?!!se.find(ke=>ke===ve.value):se===ve.value)):ae.refs[0]&&(ae.refs[0].checked=!!se):ae.refs.forEach(ve=>ve.checked=ve.value===se):IT(ae.ref)?ae.ref.value="":(ae.ref.value=se,ae.ref.type||h.values.next({name:H,values:{...a}})))}(X.shouldDirty||X.shouldTouch)&&E(H,se,X.shouldTouch,X.shouldDirty,!0),X.shouldValidate&&q(H)},F=(H,Y,X)=>{for(const le in Y){const se=Y[le],ae=`${H}.${le}`,ve=je(i,ae);(l.array.has(H)||!B0(se)||ve&&!ve._f)&&!Du(se)?F(ae,se,X):L(ae,se,X)}},B=(H,Y,X={})=>{const le=je(i,H),se=l.array.has(H),ae=kl(Y);en(a,H,ae),se?(h.array.next({name:H,values:{...a}}),(d.isDirty||d.dirtyFields)&&X.shouldDirty&&h.state.next({name:H,dirtyFields:xS(s,a),isDirty:M(H,ae)})):le&&!le._f&&!$r(ae)?F(H,ae,X):L(H,ae,X),E5(H,l)&&h.state.next({...r}),h.values.next({name:H,values:{...a}}),!o.mount&&e()},j=async H=>{const Y=H.target;let X=Y.name,le=!0;const se=je(i,X),ae=()=>Y.type?wS(se._f):Zae(H);if(se){let ve,ke;const Ee=ae(),Oe=H.type===w5.BLUR||H.type===w5.FOCUS_OUT,De=!foe(se._f)&&!n.resolver&&!je(r.errors,X)&&!se._f.deps||poe(Oe,je(r.touchedFields,X),r.isSubmitted,m,f),He=E5(X,l,Oe);en(a,X,Ee),Oe?(se._f.onBlur&&se._f.onBlur(H),c&&c(0)):se._f.onChange&&se._f.onChange(H);const _e=E(X,Ee,Oe,!1),Te=!Hi(_e)||He;if(!Oe&&h.values.next({name:X,type:H.type,values:{...a}}),De)return d.isValid&&y(),Te&&h.state.next({name:X,...He?{}:_e});if(!Oe&&He&&h.state.next({...r}),b(!0),n.resolver){const{errors:Ce}=await T([X]),Ke=A5(r.errors,i,X),fe=A5(Ce,i,Ke.name||X);ve=fe.error,X=fe.name,ke=Hi(Ce)}else ve=(await _5(se,a,g,n.shouldUseNativeValidation))[X],le=isNaN(Ee)||Ee===je(a,X,Ee),le&&(ve?ke=!1:d.isValid&&(ke=await D(i,!0)));le&&(se._f.deps&&q(se._f.deps),k(X,ke,ve,_e))}},q=async(H,Y={})=>{let X,le;const se=yS(H);if(b(!0),n.resolver){const ae=await _(In(H)?H:se);X=Hi(ae),le=H?!se.some(ve=>je(ae,ve)):X}else H?(le=(await Promise.all(se.map(async ae=>{const ve=je(i,ae);return await D(ve&&ve._f?{[ae]:ve}:ve)}))).every(Boolean),!(!le&&!r.isValid)&&y()):le=X=await D(i);return h.state.next({...!na(H)||d.isValid&&X!==r.isValid?{}:{name:H},...n.resolver||!H?{isValid:X}:{},errors:r.errors,isValidating:!1}),Y.shouldFocus&&!le&&oC(i,ae=>ae&&je(r.errors,ae),H?se:l.mount),le},V=H=>{const Y={...s,...o.mount?a:{}};return In(H)?Y:na(H)?je(Y,H):H.map(X=>je(Y,X))},U=(H,Y)=>({invalid:!!je((Y||r).errors,H),isDirty:!!je((Y||r).dirtyFields,H),isTouched:!!je((Y||r).touchedFields,H),error:je((Y||r).errors,H)}),ne=H=>{H&&yS(H).forEach(Y=>dr(r.errors,Y)),h.state.next({errors:H?r.errors:{}})},W=(H,Y,X)=>{const le=(je(i,H,{_f:{}})._f||{}).ref;en(r.errors,H,{...Y,ref:le}),h.state.next({name:H,errors:r.errors,isValid:!1}),X&&X.shouldFocus&&le&&le.focus&&le.focus()},J=(H,Y)=>Po(H)?h.values.subscribe({next:X=>H(A(void 0,Y),X)}):A(H,Y,!0),K=(H,Y={})=>{for(const X of H?yS(H):l.mount)l.mount.delete(X),l.array.delete(X),Y.keepValue||(dr(i,X),dr(a,X)),!Y.keepError&&dr(r.errors,X),!Y.keepDirty&&dr(r.dirtyFields,X),!Y.keepTouched&&dr(r.touchedFields,X),!n.shouldUnregister&&!Y.keepDefaultValue&&dr(s,X);h.values.next({values:{...a}}),h.state.next({...r,...Y.keepDirty?{isDirty:M()}:{}}),!Y.keepIsValid&&y()},Q=(H,Y={})=>{let X=je(i,H);const le=Wu(Y.disabled);return en(i,H,{...X||{},_f:{...X&&X._f?X._f:{ref:{name:H}},name:H,mount:!0,...Y}}),l.mount.add(H),X?le&&en(a,H,Y.disabled?void 0:je(a,H,wS(X._f))):w(H,!0,Y.value),{...le?{disabled:Y.disabled}:{},...n.shouldUseNativeValidation?{required:!!Y.required,min:Ih(Y.min),max:Ih(Y.max),minLength:Ih(Y.minLength),maxLength:Ih(Y.maxLength),pattern:Ih(Y.pattern)}:{},name:H,onChange:j,onBlur:j,ref:se=>{if(se){Q(H,Y),X=je(i,H);const ae=In(se.value)&&se.querySelectorAll&&se.querySelectorAll("input,select,textarea")[0]||se,ve=doe(ae),ke=X._f.refs||[];if(ve?ke.find(Ee=>Ee===ae):ae===X._f.ref)return;en(i,H,{_f:{...X._f,...ve?{refs:[...ke.filter(SS),ae,...Array.isArray(je(s,H))?[{}]:[]],ref:{type:ae.type,name:H}}:{ref:ae}}}),w(H,!1,void 0,ae)}else X=je(i,H,{}),X._f&&(X._f.mount=!1),(n.shouldUnregister||Y.shouldUnregister)&&!(toe(l.array,H)&&o.action)&&l.unMount.add(H)}}},re=()=>n.shouldFocusError&&oC(i,H=>H&&je(r.errors,H),l.mount),G=(H,Y)=>async X=>{X&&(X.preventDefault&&X.preventDefault(),X.persist&&X.persist());let le=kl(a);if(h.state.next({isSubmitting:!0}),n.resolver){const{errors:se,values:ae}=await T();r.errors=se,le=ae}else await D(i);dr(r.errors,"root"),Hi(r.errors)?(h.state.next({errors:{}}),await H(le,X)):(Y&&await Y({...r.errors},X),re(),setTimeout(re)),h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Hi(r.errors),submitCount:r.submitCount+1,errors:r.errors})},ie=(H,Y={})=>{je(i,H)&&(In(Y.defaultValue)?B(H,je(s,H)):(B(H,Y.defaultValue),en(s,H,Y.defaultValue)),Y.keepTouched||dr(r.touchedFields,H),Y.keepDirty||(dr(r.dirtyFields,H),r.isDirty=Y.defaultValue?M(H,je(s,H)):M()),Y.keepError||(dr(r.errors,H),d.isValid&&y()),h.state.next({...r}))},te=(H,Y={})=>{const X=H||s,le=kl(X),se=H&&!Hi(H)?le:s;if(Y.keepDefaultValues||(s=X),!Y.keepValues){if(Y.keepDirtyValues||p)for(const ae of l.mount)je(r.dirtyFields,ae)?en(se,ae,je(a,ae)):B(ae,je(se,ae));else{if(OT&&In(H))for(const ae of l.mount){const ve=je(i,ae);if(ve&&ve._f){const ke=Array.isArray(ve._f.refs)?ve._f.refs[0]:ve._f.ref;if($0(ke)){const Ee=ke.closest("form");if(Ee){Ee.reset();break}}}}i={}}a=t.shouldUnregister?Y.keepDefaultValues?kl(s):{}:le,h.array.next({values:{...se}}),h.values.next({values:{...se}})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!o.mount&&e(),o.mount=!d.isValid||!!Y.keepIsValid,o.watch=!!t.shouldUnregister,h.state.next({submitCount:Y.keepSubmitCount?r.submitCount:0,isDirty:Y.keepDirty?r.isDirty:!!(Y.keepDefaultValues&&!Ll(H,s)),isSubmitted:Y.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Y.keepDirtyValues?r.dirtyFields:Y.keepDefaultValues&&H?xS(s,H):{},touchedFields:Y.keepTouched?r.touchedFields:{},errors:Y.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},Z=(H,Y)=>te(Po(H)?H(a):H,Y);return{control:{register:Q,unregister:K,getFieldState:U,_executeSchema:T,_getWatch:A,_getDirty:M,_updateValid:y,_removeUnmounted:I,_updateFieldArray:C,_getFieldArray:O,_reset:te,_resetDefaultValues:()=>Po(n.defaultValues)&&n.defaultValues().then(H=>{Z(H,n.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:H=>{r={...r,...H}},_subjects:h,_proxyFormState:d,get _fields(){return i},get _formValues(){return a},get _state(){return o},set _state(H){o=H},get _defaultValues(){return s},get _names(){return l},set _names(H){l=H},get _formState(){return r},set _formState(H){r=H},get _options(){return n},set _options(H){n={...n,...H}}},trigger:q,register:Q,handleSubmit:G,watch:J,setValue:B,getValues:V,reset:Z,resetField:ie,clearErrors:ne,unregister:K,setError:W,setFocus:(H,Y={})=>{const X=je(i,H),le=X&&X._f;if(le){const se=le.refs?le.refs[0]:le.ref;se.focus&&(se.focus(),Y.shouldSelect&&se.select())}},getFieldState:U}}function A8(t={}){const e=En.useRef(),[n,r]=En.useState({isDirty:!1,isValidating:!1,isLoading:Po(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Po(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...voe(t,()=>r(s=>({...s}))),formState:n});const i=e.current.control;return i._options=t,soe({subject:i._subjects.state,next:s=>{ioe(s,i._proxyFormState,i._updateFormState,!0)&&r({...i._formState})}}),En.useEffect(()=>{t.values&&!Ll(t.values,i._defaultValues)?i._reset(t.values,i._options.resetOptions):i._resetDefaultValues()},[t.values,i]),En.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=roe(n,i),e.current}const yoe="/assets/loading-20037617.png",boe="_loadingImage_2kgd2_1",Soe="_rotate_2kgd2_1",xoe={loadingImage:boe,rotate:Soe};function Yp(){return S.jsxs("div",{children:[S.jsx("h1",{children:"Loading"}),S.jsx("img",{alt:"loading",src:yoe,className:xoe.loadingImage})]})}const woe={width:"100%",maxWidth:360,bgcolor:"background.paper",margin:"auto"};function Coe(){const[t,e]=P.useState(!1),{userProfile:n,userProfileLoading:r,updateUserProfile:i}=P.useContext(Vn);return S.jsx("div",{children:r?S.jsx(Yp,{}):t?S.jsx(Toe,{userProfile:n,updateUserProfile:i,setEditOff:()=>e(!1)}):S.jsx(Eoe,{userProfile:n,setEditOn:()=>e(!0)})})}function Eoe({userProfile:t,setEditOn:e}){function n(){e()}return S.jsx("div",{children:S.jsxs(ct,{sx:{mx:"auto",px:5},children:[S.jsx(AT,{id:t.avatar,size:"big",sx:{width:56,height:56}}),S.jsxs(pl,{sx:woe,component:"nav","aria-label":"mailbox folders",children:[S.jsxs(yt,{gutterBottom:!0,variant:"h5",component:"div",textAlign:"center",children:["Dr. ",t.fname," ",t.lname]}),S.jsx(bd,{}),S.jsx(qn,{button:!0,children:S.jsx(Qn,{primary:"Role",secondary:t.role})}),S.jsx(qn,{button:!0,children:S.jsx(Qn,{primary:"Team",secondary:t.team.name})}),S.jsx(qn,{button:!0,children:S.jsx(Qn,{primary:"Contact Number",secondary:t.phone})}),S.jsx(qn,{button:!0,children:S.jsx(Qn,{primary:"Email",secondary:t.email})})]}),S.jsx(ht,{variant:"contained",onClick:n,children:"Edit My Details"})]})})}function Toe({userProfile:t,updateUserProfile:e,setEditOff:n}){var c,u,d;const{register:r,handleSubmit:i,formState:{errors:s},watch:a}=A8();function o(h){e(t._id,h),n()}const l=()=>{n()};return S.jsxs(uT,{children:[S.jsx(yt,{gutterBottom:!0,variant:"h5",component:"div",textAlign:"center",children:"Edit My Details"}),S.jsxs("form",{onSubmit:i(o),children:[S.jsxs(ct,{children:[S.jsx(_n,{margin:"dense",varient:"outlined",label:"First Name",fullWidth:!0,defaultValue:t.fname,...r("fname",{required:"Required field"}),error:!!(s!=null&&s.fname),helperText:(c=s.fname)==null?void 0:c.message}),S.jsx(_n,{margin:"dense",varient:"outlined",label:"Last Name",fullWidth:!0,defaultValue:t.lname,...r("lname",{required:"Required field"}),error:!!(s!=null&&s.lname),helperText:(u=s.lname)==null?void 0:u.message}),S.jsx(_n,{margin:"dense",varient:"outlined",label:"Phone Number",fullWidth:!0,defaultValue:t.phone,...r("phone",{required:"Required field"}),error:!!(s!=null&&s.phone),helperText:(d=s.phone)==null?void 0:d.message}),S.jsx(_n,{margin:"dense",varient:"outlined",label:"email",fullWidth:!0,defaultValue:t.email,...r("email",{required:"Required field",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),error:!!(s!=null&&s.email),helperText:s!=null&&s.email?s.email.message:null}),S.jsx(_n,{margin:"dense",varient:"outlined",label:"Role",fullWidth:!0,defaultValue:t.role,disabled:!0}),S.jsx(_n,{margin:"dense",varient:"outlined",label:"Team",fullWidth:!0,defaultValue:t.team.name,disabled:!0})]}),S.jsxs(ct,{sx:{display:"flex",flexDirection:"column",gap:"5px",paddingTop:"5px"},children:[S.jsx(ht,{type:"submit",variant:"contained",color:"primary",children:"Save"}),S.jsx(ht,{variant:"outlined",color:"inherit",onClick:l,sx:{borderColor:"primary.main",color:"primary.main"},children:"Cancel"})]})]})]})}const Roe="_bar_chart_1sznb_1",O8={bar_chart:Roe};let NT=Xp();const it=t=>Jp(t,NT);let FT=Xp();it.write=t=>Jp(t,FT);let zy=Xp();it.onStart=t=>Jp(t,zy);let $T=Xp();it.onFrame=t=>Jp(t,$T);let LT=Xp();it.onFinish=t=>Jp(t,LT);let Gu=[];it.setTimeout=(t,e)=>{let n=it.now()+e,r=()=>{let s=Gu.findIndex(a=>a.cancel==r);~s&&Gu.splice(s,1),Ao-=~s?1:0},i={time:n,handler:t,cancel:r};return Gu.splice(D8(n),0,i),Ao+=1,I8(),i};let D8=t=>~(~Gu.findIndex(e=>e.time>t)||~Gu.length);it.cancel=t=>{zy.delete(t),$T.delete(t),NT.delete(t),FT.delete(t),LT.delete(t)};it.sync=t=>{lC=!0,it.batchedUpdates(t),lC=!1};it.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,it.onStart(n)}return r.handler=t,r.cancel=()=>{zy.delete(n),e=null},r};let BT=typeof window<"u"?window.requestAnimationFrame:()=>{};it.use=t=>BT=t;it.now=typeof performance<"u"?()=>performance.now():Date.now;it.batchedUpdates=t=>t();it.catch=console.error;it.frameLoop="always";it.advance=()=>{it.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):N8()};let _o=-1,Ao=0,lC=!1;function Jp(t,e){lC?(e.delete(t),t(0)):(e.add(t),I8())}function I8(){_o<0&&(_o=0,it.frameLoop!=="demand"&&BT(M8))}function koe(){_o=-1}function M8(){~_o&&(BT(M8),it.batchedUpdates(N8))}function N8(){let t=_o;_o=it.now();let e=D8(_o);e&&(F8(Gu.splice(0,e),n=>n.handler()),Ao-=e),zy.flush(),NT.flush(t?Math.min(64,_o-t):16.667),$T.flush(),FT.flush(),LT.flush(),Ao||koe()}function Xp(){let t=new Set,e=t;return{add(n){Ao+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Ao-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Ao-=e.size,F8(e,r=>r(n)&&t.add(r)),Ao+=t.size,e=t)}}}function F8(t,e){t.forEach(n=>{try{e(n)}catch(r){it.catch(r)}})}function cC(){}const Poe=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Se={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Fa(t,e){if(Se.arr(t)){if(!Se.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}const tt=(t,e)=>t.forEach(e);function ba(t,e,n){if(Se.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}const zr=t=>Se.und(t)?[]:Se.arr(t)?t:[t];function xf(t,e){if(t.size){const n=Array.from(t);t.clear(),tt(n,e)}}const ef=(t,...e)=>xf(t,n=>n(...e)),$8=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let jT,L8,Uo=null,B8=!1,qT=cC;const _oe=t=>{t.to&&(L8=t.to),t.now&&(it.now=t.now),t.colors!==void 0&&(Uo=t.colors),t.skipAnimation!=null&&(B8=t.skipAnimation),t.createStringInterpolator&&(jT=t.createStringInterpolator),t.requestAnimationFrame&&it.use(t.requestAnimationFrame),t.batchedUpdates&&(it.batchedUpdates=t.batchedUpdates),t.willAdvance&&(qT=t.willAdvance),t.frameLoop&&(it.frameLoop=t.frameLoop)};var Sa=Object.freeze({__proto__:null,get createStringInterpolator(){return jT},get to(){return L8},get colors(){return Uo},get skipAnimation(){return B8},get willAdvance(){return qT},assign:_oe});const wf=new Set;let Yi=[],CS=[],q0=0;const Hy={get idle(){return!wf.size&&!Yi.length},start(t){q0>t.priority?(wf.add(t),it.onStart(Aoe)):(j8(t),it(uC))},advance:uC,sort(t){if(q0)it.onFrame(()=>Hy.sort(t));else{const e=Yi.indexOf(t);~e&&(Yi.splice(e,1),q8(t))}},clear(){Yi=[],wf.clear()}};function Aoe(){wf.forEach(j8),wf.clear(),it(uC)}function j8(t){Yi.includes(t)||q8(t)}function q8(t){Yi.splice(Ooe(Yi,e=>e.priority>t.priority),0,t)}function uC(t){const e=CS;for(let n=0;n<Yi.length;n++){const r=Yi[n];q0=r.priority,r.idle||(qT(r),r.advance(t),r.idle||e.push(r))}return q0=0,CS=Yi,CS.length=0,Yi=e,Yi.length>0}function Ooe(t,e){const n=t.findIndex(e);return n<0?t.length:n}const Doe={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ks="[-+]?\\d*\\.?\\d+",z0=ks+"%";function Uy(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}const Ioe=new RegExp("rgb"+Uy(ks,ks,ks)),Moe=new RegExp("rgba"+Uy(ks,ks,ks,ks)),Noe=new RegExp("hsl"+Uy(ks,z0,z0)),Foe=new RegExp("hsla"+Uy(ks,z0,z0,ks)),$oe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Loe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Boe=/^#([0-9a-fA-F]{6})$/,joe=/^#([0-9a-fA-F]{8})$/;function qoe(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Boe.exec(t))?parseInt(e[1]+"ff",16)>>>0:Uo&&Uo[t]!==void 0?Uo[t]:(e=Ioe.exec(t))?(ru(e[1])<<24|ru(e[2])<<16|ru(e[3])<<8|255)>>>0:(e=Moe.exec(t))?(ru(e[1])<<24|ru(e[2])<<16|ru(e[3])<<8|I5(e[4]))>>>0:(e=$oe.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=joe.exec(t))?parseInt(e[1],16)>>>0:(e=Loe.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Noe.exec(t))?(O5(D5(e[1]),Gm(e[2]),Gm(e[3]))|255)>>>0:(e=Foe.exec(t))?(O5(D5(e[1]),Gm(e[2]),Gm(e[3]))|I5(e[4]))>>>0:null}function ES(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function O5(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=ES(i,r,t+1/3),a=ES(i,r,t),o=ES(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(a*255)<<16|Math.round(o*255)<<8}function ru(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function D5(t){return(parseFloat(t)%360+360)%360/360}function I5(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Gm(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function M5(t){let e=qoe(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}const sp=(t,e,n)=>{if(Se.fun(t))return t;if(Se.arr(t))return sp({range:t,output:e,extrapolate:n});if(Se.str(t.output[0]))return jT(t);const r=t,i=r.output,s=r.range||[0,1],a=r.extrapolateLeft||r.extrapolate||"extend",o=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const u=Hoe(c,s);return zoe(c,s[u],s[u+1],i[u],i[u+1],l,a,o,r.map)}};function zoe(t,e,n,r,i,s,a,o,l){let c=l?l(t):t;if(c<e){if(a==="identity")return c;a==="clamp"&&(c=e)}if(c>n){if(o==="identity")return c;o==="clamp"&&(c=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:i===1/0?c=c+r:c=c*(i-r)+r,c)}function Hoe(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}function dC(){return dC=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dC.apply(this,arguments)}const xd=Symbol.for("FluidValue.get"),fc=Symbol.for("FluidValue.observers"),Gi=t=>!!(t&&t[xd]),Zr=t=>t&&t[xd]?t[xd]():t,N5=t=>t[fc]||null;function Uoe(t,e){t.eventObserved?t.eventObserved(e):t(e)}function ap(t,e){let n=t[fc];n&&n.forEach(r=>{Uoe(r,e)})}class z8{constructor(e){if(this[xd]=void 0,this[fc]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");Voe(this,e)}}const Voe=(t,e)=>H8(t,xd,e);function Wd(t,e){if(t[xd]){let n=t[fc];n||H8(t,fc,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function op(t,e){let n=t[fc];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[fc]=null,t.observerRemoved&&t.observerRemoved(r,e)}}const H8=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),$g=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Woe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,F5=new RegExp(`(${$g.source})(%|[a-z]+)`,"i"),Goe=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Vy=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,U8=t=>{const[e,n]=Koe(t);if(!e||$8())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||t}else{if(n&&Vy.test(n))return U8(n);if(n)return n}return t},Koe=t=>{const e=Vy.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]};let TS;const Yoe=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,V8=t=>{TS||(TS=Uo?new RegExp(`(${Object.keys(Uo).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Zr(s).replace(Vy,U8).replace(Woe,M5).replace(TS,M5)),n=e.map(s=>s.match($g).map(Number)),i=n[0].map((s,a)=>n.map(o=>{if(!(a in o))throw Error('The arity of each "output" value must be equal');return o[a]})).map(s=>sp(dC({},t,{output:s})));return s=>{var a;const o=!F5.test(e[0])&&((a=e.find(c=>F5.test(c)))==null?void 0:a.replace($g,""));let l=0;return e[0].replace($g,()=>`${i[l++](s)}${o||""}`).replace(Goe,Yoe)}},zT="react-spring: ",W8=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${zT}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},Joe=W8(console.warn);function Xoe(){Joe(`${zT}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const Qoe=W8(console.warn);function Zoe(){Qoe(`${zT}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Wy(t){return Se.str(t)&&(t[0]=="#"||/\d/.test(t)||!$8()&&Vy.test(t)||t in(Uo||{}))}const Bl=typeof window<"u"&&window.document&&window.document.createElement?P.useLayoutEffect:P.useEffect,ele=()=>{const t=P.useRef(!1);return Bl(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function HT(){const t=P.useState()[1],e=ele();return()=>{e.current&&t(Math.random())}}function tle(t,e){const[n]=P.useState(()=>({inputs:e,result:t()})),r=P.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&nle(e,s.inputs)||(s={inputs:e,result:t()}):s=n,P.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function nle(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const UT=t=>P.useEffect(t,rle),rle=[];function hC(t){const e=P.useRef();return P.useEffect(()=>{e.current=t}),e.current}const lp=Symbol.for("Animated:node"),ile=t=>!!t&&t[lp]===t,Ws=t=>t&&t[lp],VT=(t,e)=>Poe(t,lp,e),Gy=t=>t&&t[lp]&&t[lp].getPayload();class G8{constructor(){this.payload=void 0,VT(this,this)}getPayload(){return this.payload||[]}}class Gd extends G8{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,Se.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Gd(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,n){return Se.num(e)&&(this.lastPosition=e,n&&(e=Math.round(e/n)*n,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Se.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class wd extends Gd{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=sp({output:[e,e]})}static create(e){return new wd(e)}getValue(){let e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Se.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=sp({output:[this.getValue(),e]})),this._value=0,super.reset()}}const H0={dependencies:null};class Ky extends G8{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const n={};return ba(this.source,(r,i)=>{ile(r)?n[i]=r.getValue(e):Gi(r)?n[i]=Zr(r):e||(n[i]=r)}),n}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&tt(this.payload,e=>e.reset())}_makePayload(e){if(e){const n=new Set;return ba(e,this._addToPayload,n),Array.from(n)}}_addToPayload(e){H0.dependencies&&Gi(e)&&H0.dependencies.add(e);const n=Gy(e);n&&tt(n,r=>this.add(r))}}class WT extends Ky{constructor(e){super(e)}static create(e){return new WT(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const n=this.getPayload();return e.length==n.length?n.map((r,i)=>r.setValue(e[i])).some(Boolean):(super.setValue(e.map(sle)),!0)}}function sle(t){return(Wy(t)?wd:Gd).create(t)}function fC(t){const e=Ws(t);return e?e.constructor:Se.arr(t)?WT:Wy(t)?wd:Gd}function U0(){return U0=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U0.apply(this,arguments)}const $5=(t,e)=>{const n=!Se.fun(t)||t.prototype&&t.prototype.isReactComponent;return P.forwardRef((r,i)=>{const s=P.useRef(null),a=n&&P.useCallback(f=>{s.current=lle(i,f)},[i]),[o,l]=ole(r,e),c=HT(),u=()=>{const f=s.current;if(n&&!f)return;(f?e.applyAnimatedValues(f,o.getValue(!0)):!1)===!1&&c()},d=new ale(u,l),h=P.useRef();Bl(()=>(h.current=d,tt(l,f=>Wd(f,d)),()=>{h.current&&(tt(h.current.deps,f=>op(f,h.current)),it.cancel(h.current.update))})),P.useEffect(u,[]),UT(()=>()=>{const f=h.current;tt(f.deps,m=>op(m,f))});const p=e.getComponentProps(o.getValue());return P.createElement(t,U0({},p,{ref:a}))})};class ale{constructor(e,n){this.update=e,this.deps=n}eventObserved(e){e.type=="change"&&it.write(this.update)}}function ole(t,e){const n=new Set;return H0.dependencies=n,t.style&&(t=U0({},t,{style:e.createAnimatedStyle(t.style)})),t=new Ky(t),H0.dependencies=null,[t,n]}function lle(t,e){return t&&(Se.fun(t)?t(e):t.current=e),e}const L5=Symbol.for("AnimatedComponent"),cle=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new Ky(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=a=>{const o=B5(a)||"Anonymous";return Se.str(a)?a=s[a]||(s[a]=$5(a,i)):a=a[L5]||(a[L5]=$5(a,i)),a.displayName=`Animated(${o})`,a};return ba(t,(a,o)=>{Se.arr(t)&&(o=B5(a)),s[o]=s(a)}),{animated:s}},B5=t=>Se.str(t)?t:t&&Se.str(t.displayName)?t.displayName:Se.fun(t)&&t.name||null;function Tn(){return Tn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tn.apply(this,arguments)}function ei(t,...e){return Se.fun(t)?t(...e):t}const Cf=(t,e)=>t===!0||!!(e&&t&&(Se.fun(t)?t(e):zr(t).includes(e))),K8=(t,e)=>Se.obj(t)?e&&t[e]:t,Y8=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,ule=t=>t,Yy=(t,e=ule)=>{let n=dle;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const i of n){const s=e(t[i],i);Se.und(s)||(r[i]=s)}return r},dle=["config","onProps","onStart","onChange","onPause","onResume","onRest"],hle={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function fle(t){const e={};let n=0;if(ba(t,(r,i)=>{hle[i]||(e[i]=r,n++)}),n)return e}function GT(t){const e=fle(t);if(e){const n={to:e};return ba(t,(r,i)=>i in e||(n[i]=r)),n}return Tn({},t)}function cp(t){return t=Zr(t),Se.arr(t)?t.map(cp):Wy(t)?Sa.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function J8(t){for(const e in t)return!0;return!1}function pC(t){return Se.fun(t)||Se.arr(t)&&Se.obj(t[0])}function mC(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function X8(t,e){if(e&&t.ref!==e){var n;(n=t.ref)==null||n.delete(t),e.add(t),t.ref=e}}const KT={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},V0=1.70158,Km=V0*1.525,j5=V0+1,q5=2*Math.PI/3,z5=2*Math.PI/4.5,Ym=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,ple={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>j5*t*t*t-V0*t*t,easeOutBack:t=>1+j5*Math.pow(t-1,3)+V0*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Km+1)*2*t-Km)/2:(Math.pow(2*t-2,2)*((Km+1)*(t*2-2)+Km)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*q5),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*q5)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*z5))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*z5)/2+1,easeInBounce:t=>1-Ym(1-t),easeOutBounce:Ym,easeInOutBounce:t=>t<.5?(1-Ym(1-2*t))/2:(1+Ym(2*t-1))/2},gC=Tn({},KT.default,{mass:1,damping:1,easing:ple.linear,clamp:!1});class mle{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,gC)}}function gle(t,e,n){n&&(n=Tn({},n),H5(n,e),e=Tn({},n,e)),H5(t,e),Object.assign(t,e);for(const a in gC)t[a]==null&&(t[a]=gC[a]);let{mass:r,frequency:i,damping:s}=t;return Se.und(i)||(i<.01&&(i=.01),s<0&&(s=0),t.tension=Math.pow(2*Math.PI/i,2)*r,t.friction=4*Math.PI*s*r/i),t}function H5(t,e){if(!Se.und(e.decay))t.duration=void 0;else{const n=!Se.und(e.tension)||!Se.und(e.friction);(n||!Se.und(e.frequency)||!Se.und(e.damping)||!Se.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}const U5=[];class vle{constructor(){this.changed=!1,this.values=U5,this.toValues=null,this.fromValues=U5,this.to=void 0,this.from=void 0,this.config=new mle,this.immediate=!1}}function Q8(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((a,o)=>{var l;let c,u,d=Cf((l=n.cancel)!=null?l:r==null?void 0:r.cancel,e);if(d)f();else{Se.und(n.pause)||(i.paused=Cf(n.pause,e));let m=r==null?void 0:r.pause;m!==!0&&(m=i.paused||Cf(m,e)),c=ei(n.delay||0,e),m?(i.resumeQueue.add(p),s.pause()):(s.resume(),p())}function h(){i.resumeQueue.add(p),i.timeouts.delete(u),u.cancel(),c=u.time-it.now()}function p(){c>0&&!Sa.skipAnimation?(i.delayed=!0,u=it.setTimeout(f,c),i.pauseQueue.add(h),i.timeouts.add(u)):f()}function f(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(h),i.timeouts.delete(u),t<=(i.cancelId||0)&&(d=!0);try{s.start(Tn({},n,{callId:t,cancel:d}),a)}catch(m){o(m)}}})}const YT=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Ku(t.get()):e.every(n=>n.noop)?Z8(t.get()):ws(t.get(),e.every(n=>n.finished)),Z8=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),ws=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Ku=t=>({value:t,cancelled:!0,finished:!1});function eF(t,e,n,r){const{callId:i,parentId:s,onRest:a}=e,{asyncTo:o,promise:l}=n;return!s&&t===o&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;const c=Yy(e,(g,v)=>v==="onRest"?void 0:g);let u,d;const h=new Promise((g,v)=>(u=g,d=v)),p=g=>{const v=i<=(n.cancelId||0)&&Ku(r)||i!==n.asyncId&&ws(r,!1);if(v)throw g.result=v,d(g),g},f=(g,v)=>{const y=new V5,b=new W5;return(async()=>{if(Sa.skipAnimation)throw up(n),b.result=ws(r,!1),d(b),b;p(y);const C=Se.obj(g)?Tn({},g):Tn({},v,{to:g});C.parentId=i,ba(c,(w,E)=>{Se.und(C[E])&&(C[E]=w)});const R=await r.start(C);return p(y),n.paused&&await new Promise(w=>{n.resumeQueue.add(w)}),R})()};let m;if(Sa.skipAnimation)return up(n),ws(r,!1);try{let g;Se.arr(t)?g=(async v=>{for(const y of v)await f(y)})(t):g=Promise.resolve(t(f,r.stop.bind(r))),await Promise.all([g.then(u),h]),m=ws(r.get(),!0,!1)}catch(g){if(g instanceof V5)m=g.result;else if(g instanceof W5)m=g.result;else throw g}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?o:void 0,n.promise=s?l:void 0)}return Se.fun(a)&&it.batchedUpdates(()=>{a(m,r,r.item)}),m})()}function up(t,e){xf(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}class V5 extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class W5 extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const vC=t=>t instanceof JT;let yle=1;class JT extends z8{constructor(...e){super(...e),this.id=yle++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Ws(this);return e&&e.getValue()}to(...e){return Sa.to(this,e)}interpolate(...e){return Xoe(),Sa.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,n=!1){ap(this,{type:"change",parent:this,value:e,idle:n})}_onPriorityChange(e){this.idle||Hy.sort(this),ap(this,{type:"priority",parent:this,priority:e})}}const pc=Symbol.for("SpringPhase"),tF=1,yC=2,bC=4,RS=t=>(t[pc]&tF)>0,yo=t=>(t[pc]&yC)>0,Mh=t=>(t[pc]&bC)>0,G5=(t,e)=>e?t[pc]|=yC|tF:t[pc]&=~yC,K5=(t,e)=>e?t[pc]|=bC:t[pc]&=~bC;class ble extends JT{constructor(e,n){if(super(),this.key=void 0,this.animation=new vle,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Se.und(e)||!Se.und(n)){const r=Se.obj(e)?Tn({},e):Tn({},n,{from:e});Se.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(yo(this)||this._state.asyncTo)||Mh(this)}get goal(){return Zr(this.animation.to)}get velocity(){const e=Ws(this);return e instanceof Gd?e.lastVelocity||0:e.getPayload().map(n=>n.lastVelocity||0)}get hasAnimated(){return RS(this)}get isAnimating(){return yo(this)}get isPaused(){return Mh(this)}get isDelayed(){return this._state.delayed}advance(e){let n=!0,r=!1;const i=this.animation;let{config:s,toValues:a}=i;const o=Gy(i.to);!o&&Gi(i.to)&&(a=zr(Zr(i.to))),i.values.forEach((u,d)=>{if(u.done)return;const h=u.constructor==wd?1:o?o[d].lastPosition:a[d];let p=i.immediate,f=h;if(!p){if(f=u.lastPosition,s.tension<=0){u.done=!0;return}let m=u.elapsedTime+=e;const g=i.fromValues[d],v=u.v0!=null?u.v0:u.v0=Se.arr(s.velocity)?s.velocity[d]:s.velocity;let y;if(Se.und(s.duration))if(s.decay){const b=s.decay===!0?.998:s.decay,C=Math.exp(-(1-b)*m);f=g+v/(1-b)*(1-C),p=Math.abs(u.lastPosition-f)<.1,y=v*C}else{y=u.lastVelocity==null?v:u.lastVelocity;const b=s.precision||(g==h?.005:Math.min(1,Math.abs(h-g)*.001)),C=s.restVelocity||b/10,R=s.clamp?0:s.bounce,w=!Se.und(R),E=g==h?u.v0>0:g<h;let k,T=!1;const _=1,D=Math.ceil(e/_);for(let I=0;I<D&&(k=Math.abs(y)>C,!(!k&&(p=Math.abs(h-f)<=b,p)));++I){w&&(T=f==h||f>h==E,T&&(y=-y*R,f=h));const M=-s.tension*1e-6*(f-h),A=-s.friction*.001*y,O=(M+A)/s.mass;y=y+O*_,f=f+y*_}}else{let b=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,m=u.elapsedTime+=e)),b=(s.progress||0)+m/this._memoizedDuration,b=b>1?1:b<0?0:b,u.durationProgress=b),f=g+s.easing(b)*(h-g),y=(f-u.lastPosition)/e,p=b==1}u.lastVelocity=y,Number.isNaN(f)&&(console.warn("Got NaN while animating:",this),p=!0)}o&&!o[d].done&&(p=!1),p?u.done=!0:n=!1,u.setValue(f,s.round)&&(r=!0)});const l=Ws(this),c=l.getValue();if(n){const u=Zr(i.to);(c!==u||r)&&!s.decay?(l.setValue(u),this._onChange(u)):r&&s.decay&&this._onChange(c),this._stop()}else r&&this._onChange(c)}set(e){return it.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(yo(this)){const{to:e,config:n}=this.animation;it.batchedUpdates(()=>{this._onStart(),n.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,n){let r;return Se.und(e)?(r=this.queue||[],this.queue=[]):r=[Se.obj(e)?e:Tn({},n,{to:e})],Promise.all(r.map(i=>this._update(i))).then(i=>YT(this,i))}stop(e){const{to:n}=this.animation;return this._focus(this.get()),up(this._state,e&&this._lastCallId),it.batchedUpdates(()=>this._stop(n,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const n=this.key||"";let{to:r,from:i}=e;r=Se.obj(r)?r[n]:r,(r==null||pC(r))&&(r=void 0),i=Se.obj(i)?i[n]:i,i==null&&(i=void 0);const s={to:r,from:i};return RS(this)||(e.reverse&&([r,i]=[i,r]),i=Zr(i),Se.und(i)?Ws(this)||this._set(r):this._set(i)),s}_update(e,n){let r=Tn({},e);const{key:i,defaultProps:s}=this;r.default&&Object.assign(s,Yy(r,(l,c)=>/^on/.test(c)?K8(l,i):l)),J5(this,r,"onProps"),Fh(this,"onProps",r,this);const a=this._prepareNode(r);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const o=this._state;return Q8(++this._lastCallId,{key:i,props:r,defaultProps:s,state:o,actions:{pause:()=>{Mh(this)||(K5(this,!0),ef(o.pauseQueue),Fh(this,"onPause",ws(this,Nh(this,this.animation.to)),this))},resume:()=>{Mh(this)&&(K5(this,!1),yo(this)&&this._resume(),ef(o.resumeQueue),Fh(this,"onResume",ws(this,Nh(this,this.animation.to)),this))},start:this._merge.bind(this,a)}}).then(l=>{if(r.loop&&l.finished&&!(n&&l.noop)){const c=nF(r);if(c)return this._update(c,!0)}return l})}_merge(e,n,r){if(n.cancel)return this.stop(!0),r(Ku(this));const i=!Se.und(e.to),s=!Se.und(e.from);if(i||s)if(n.callId>this._lastToId)this._lastToId=n.callId;else return r(Ku(this));const{key:a,defaultProps:o,animation:l}=this,{to:c,from:u}=l;let{to:d=c,from:h=u}=e;s&&!i&&(!n.default||Se.und(d))&&(d=h),n.reverse&&([d,h]=[h,d]);const p=!Fa(h,u);p&&(l.from=h),h=Zr(h);const f=!Fa(d,c);f&&this._focus(d);const m=pC(n.to),{config:g}=l,{decay:v,velocity:y}=g;(i||s)&&(g.velocity=0),n.config&&!m&&gle(g,ei(n.config,a),n.config!==o.config?ei(o.config,a):void 0);let b=Ws(this);if(!b||Se.und(d))return r(ws(this,!0));const C=Se.und(n.reset)?s&&!n.default:!Se.und(h)&&Cf(n.reset,a),R=C?h:this.get(),w=cp(d),E=Se.num(w)||Se.arr(w)||Wy(w),k=!m&&(!E||Cf(o.immediate||n.immediate,a));if(f){const I=fC(d);if(I!==b.constructor)if(k)b=this._set(w);else throw Error(`Cannot animate between ${b.constructor.name} and ${I.name}, as the "to" prop suggests`)}const T=b.constructor;let _=Gi(d),D=!1;if(!_){const I=C||!RS(this)&&p;(f||I)&&(D=Fa(cp(R),w),_=!D),(!Fa(l.immediate,k)&&!k||!Fa(g.decay,v)||!Fa(g.velocity,y))&&(_=!0)}if(D&&yo(this)&&(l.changed&&!C?_=!0:_||this._stop(c)),!m&&((_||Gi(c))&&(l.values=b.getPayload(),l.toValues=Gi(d)?null:T==wd?[1]:zr(w)),l.immediate!=k&&(l.immediate=k,!k&&!C&&this._set(c)),_)){const{onRest:I}=l;tt(xle,A=>J5(this,n,A));const M=ws(this,Nh(this,c));ef(this._pendingCalls,M),this._pendingCalls.add(r),l.changed&&it.batchedUpdates(()=>{l.changed=!C,I==null||I(M,this),C?ei(o.onRest,M):l.onStart==null||l.onStart(M,this)})}C&&this._set(R),m?r(eF(n.to,n,this._state,this)):_?this._start():yo(this)&&!f?this._pendingCalls.add(r):r(Z8(R))}_focus(e){const n=this.animation;e!==n.to&&(N5(this)&&this._detach(),n.to=e,N5(this)&&this._attach())}_attach(){let e=0;const{to:n}=this.animation;Gi(n)&&(Wd(n,this),vC(n)&&(e=n.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Gi(e)&&op(e,this)}_set(e,n=!0){const r=Zr(e);if(!Se.und(r)){const i=Ws(this);if(!i||!Fa(r,i.getValue())){const s=fC(r);!i||i.constructor!=s?VT(this,s.create(r)):i.setValue(r),i&&it.batchedUpdates(()=>{this._onChange(r,n)})}}return Ws(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Fh(this,"onStart",ws(this,Nh(this,e.to)),this))}_onChange(e,n){n||(this._onStart(),ei(this.animation.onChange,e,this)),ei(this.defaultProps.onChange,e,this),super._onChange(e,n)}_start(){const e=this.animation;Ws(this).reset(Zr(e.to)),e.immediate||(e.fromValues=e.values.map(n=>n.lastPosition)),yo(this)||(G5(this,!0),Mh(this)||this._resume())}_resume(){Sa.skipAnimation?this.finish():Hy.start(this)}_stop(e,n){if(yo(this)){G5(this,!1);const r=this.animation;tt(r.values,s=>{s.done=!0}),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),ap(this,{type:"idle",parent:this});const i=n?Ku(this.get()):ws(this.get(),Nh(this,e??r.to));ef(this._pendingCalls,i),r.changed&&(r.changed=!1,Fh(this,"onRest",i,this))}}}function Nh(t,e){const n=cp(e),r=cp(t.get());return Fa(r,n)}function nF(t,e=t.loop,n=t.to){let r=ei(e);if(r){const i=r!==!0&&GT(r),s=(i||t).reverse,a=!i||i.reset;return dp(Tn({},t,{loop:e,default:!1,pause:void 0,to:!s||pC(n)?n:void 0,from:a?t.from:void 0,reset:a},i))}}function dp(t){const{to:e,from:n}=t=GT(t),r=new Set;return Se.obj(e)&&Y5(e,r),Se.obj(n)&&Y5(n,r),t.keys=r.size?Array.from(r):null,t}function Sle(t){const e=dp(t);return Se.und(e.default)&&(e.default=Yy(e)),e}function Y5(t,e){ba(t,(n,r)=>n!=null&&e.add(r))}const xle=["onStart","onRest","onChange","onPause","onResume"];function J5(t,e,n){t.animation[n]=e[n]!==Y8(e,n)?K8(e[n],t.key):void 0}function Fh(t,e,...n){var r,i,s,a;(r=(i=t.animation)[e])==null||r.call(i,...n),(s=(a=t.defaultProps)[e])==null||s.call(a,...n)}const wle=["onStart","onChange","onRest"];let Cle=1;class rF{constructor(e,n){this.id=Cle++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),e&&this.start(Tn({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((n,r)=>e[r]=n.get()),e}set(e){for(const n in e){const r=e[n];Se.und(r)||this.springs[n].set(r)}}update(e){return e&&this.queue.push(dp(e)),this}start(e){let{queue:n}=this;return e?n=zr(e).map(dp):this.queue=[],this._flush?this._flush(this,n):(lF(this,n),SC(this,n))}stop(e,n){if(e!==!!e&&(n=e),n){const r=this.springs;tt(zr(n),i=>r[i].stop(!!e))}else up(this._state,this._lastAsyncId),this.each(r=>r.stop(!!e));return this}pause(e){if(Se.und(e))this.start({pause:!0});else{const n=this.springs;tt(zr(e),r=>n[r].pause())}return this}resume(e){if(Se.und(e))this.start({pause:!1});else{const n=this.springs;tt(zr(e),r=>n[r].resume())}return this}each(e){ba(this.springs,e)}_onFrame(){const{onStart:e,onChange:n,onRest:r}=this._events,i=this._active.size>0,s=this._changed.size>0;(i&&!this._started||s&&!this._started)&&(this._started=!0,xf(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const a=!i&&this._started,o=s||a&&r.size?this.get():null;s&&n.size&&xf(n,([l,c])=>{c.value=o,l(c,this,this._item)}),a&&(this._started=!1,xf(r,([l,c])=>{c.value=o,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;it.onFrame(this._onFrame)}}function SC(t,e){return Promise.all(e.map(n=>iF(t,n))).then(n=>YT(t,n))}async function iF(t,e,n){const{keys:r,to:i,from:s,loop:a,onRest:o,onResolve:l}=e,c=Se.obj(e.default)&&e.default;a&&(e.loop=!1),i===!1&&(e.to=null),s===!1&&(e.from=null);const u=Se.arr(i)||Se.fun(i)?i:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):tt(wle,m=>{const g=e[m];if(Se.fun(g)){const v=t._events[m];e[m]=({finished:y,cancelled:b})=>{const C=v.get(g);C?(y||(C.finished=!1),b&&(C.cancelled=!0)):v.set(g,{value:null,finished:y||!1,cancelled:b||!1})},c&&(c[m]=e[m])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,ef(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const h=(r||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),p=e.cancel===!0||Y8(e,"cancel")===!0;(u||p&&d.asyncId)&&h.push(Q8(++t._lastAsyncId,{props:e,state:d,actions:{pause:cC,resume:cC,start(m,g){p?(up(d,t._lastAsyncId),g(Ku(t))):(m.onRest=o,g(eF(u,m,d,t)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const f=YT(t,await Promise.all(h));if(a&&f.finished&&!(n&&f.noop)){const m=nF(e,a,i);if(m)return lF(t,[m]),iF(t,m,!0)}return l&&it.batchedUpdates(()=>l(f,t,t.item)),f}function xC(t,e){const n=Tn({},t.springs);return e&&tt(zr(e),r=>{Se.und(r.keys)&&(r=dp(r)),Se.obj(r.to)||(r=Tn({},r,{to:void 0})),oF(n,r,i=>aF(i))}),sF(t,n),n}function sF(t,e){ba(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,Wd(n,t))})}function aF(t,e){const n=new ble;return n.key=t,e&&Wd(n,e),n}function oF(t,e,n){e.keys&&tt(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function lF(t,e){tt(e,n=>{oF(t.springs,n,r=>aF(r,t))})}function Ele(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const Tle=["children"],Qp=t=>{let{children:e}=t,n=Ele(t,Tle);const r=P.useContext(W0),i=n.pause||!!r.pause,s=n.immediate||!!r.immediate;n=tle(()=>({pause:i,immediate:s}),[i,s]);const{Provider:a}=W0;return P.createElement(a,{value:n},e)},W0=Rle(Qp,{});Qp.Provider=W0.Provider;Qp.Consumer=W0.Consumer;function Rle(t,e){return Object.assign(t,P.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}const cF=()=>{const t=[],e=function(i){Zoe();const s=[];return tt(t,(a,o)=>{if(Se.und(i))s.push(a.start());else{const l=n(i,a,o);l&&s.push(a.start(l))}}),s};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){const i=t.indexOf(r);~i&&t.splice(i,1)},e.pause=function(){return tt(t,r=>r.pause(...arguments)),this},e.resume=function(){return tt(t,r=>r.resume(...arguments)),this},e.set=function(r){tt(t,i=>i.set(r))},e.start=function(r){const i=[];return tt(t,(s,a)=>{if(Se.und(r))i.push(s.start());else{const o=this._getProps(r,s,a);o&&i.push(s.start(o))}}),i},e.stop=function(){return tt(t,r=>r.stop(...arguments)),this},e.update=function(r){return tt(t,(i,s)=>i.update(this._getProps(r,i,s))),this};const n=function(i,s,a){return Se.fun(i)?i(a,s):i};return e._getProps=n,e};function kle(t,e,n){const r=Se.fun(e)&&e;r&&!n&&(n=[]);const i=P.useMemo(()=>r||arguments.length==3?cF():void 0,[]),s=P.useRef(0),a=HT(),o=P.useMemo(()=>({ctrls:[],queue:[],flush(v,y){const b=xC(v,y);return s.current>0&&!o.queue.length&&!Object.keys(b).some(R=>!v.springs[R])?SC(v,y):new Promise(R=>{sF(v,b),o.queue.push(()=>{R(SC(v,y))}),a()})}}),[]),l=P.useRef([...o.ctrls]),c=[],u=hC(t)||0;P.useMemo(()=>{tt(l.current.slice(t,u),v=>{mC(v,i),v.stop(!0)}),l.current.length=t,d(u,t)},[t]),P.useMemo(()=>{d(0,Math.min(u,t))},n);function d(v,y){for(let b=v;b<y;b++){const C=l.current[b]||(l.current[b]=new rF(null,o.flush)),R=r?r(b,C):e[b];R&&(c[b]=Sle(R))}}const h=l.current.map((v,y)=>xC(v,c[y])),p=P.useContext(Qp),f=hC(p),m=p!==f&&J8(p);Bl(()=>{s.current++,o.ctrls=l.current;const{queue:v}=o;v.length&&(o.queue=[],tt(v,y=>y())),tt(l.current,(y,b)=>{i==null||i.add(y),m&&y.start({default:p});const C=c[b];C&&(X8(y,C.ref),y.ref?y.queue.push(C):y.start(C))})}),UT(()=>()=>{tt(o.ctrls,v=>v.stop(!0))});const g=h.map(v=>Tn({},v));return i?[g,i]:g}function ho(t,e){const n=Se.fun(t),[[r],i]=kle(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[r,i]:r}let Ir;(function(t){t.MOUNT="mount",t.ENTER="enter",t.UPDATE="update",t.LEAVE="leave"})(Ir||(Ir={}));function Kd(t,e,n){const r=Se.fun(e)&&e,{reset:i,sort:s,trail:a=0,expires:o=!0,exitBeforeEnter:l=!1,onDestroyed:c,ref:u,config:d}=r?r():e,h=P.useMemo(()=>r||arguments.length==3?cF():void 0,[]),p=zr(t),f=[],m=P.useRef(null),g=i?null:m.current;Bl(()=>{m.current=f}),UT(()=>(tt(m.current,A=>{var O;(O=A.ctrl.ref)==null||O.add(A.ctrl);const L=E.get(A);L&&A.ctrl.start(L.payload)}),()=>{tt(m.current,A=>{A.expired&&clearTimeout(A.expirationId),mC(A.ctrl,h),A.ctrl.stop(!0)})}));const v=_le(p,r?r():e,g),y=i&&m.current||[];Bl(()=>tt(y,({ctrl:A,item:O,key:L})=>{mC(A,h),ei(c,O,L)}));const b=[];if(g&&tt(g,(A,O)=>{A.expired?(clearTimeout(A.expirationId),y.push(A)):(O=b[O]=v.indexOf(A.key),~O&&(f[O]=A))}),tt(p,(A,O)=>{f[O]||(f[O]={key:v[O],item:A,phase:Ir.MOUNT,ctrl:new rF},f[O].ctrl.item=A)}),b.length){let A=-1;const{leave:O}=r?r():e;tt(b,(L,F)=>{const B=g[F];~L?(A=f.indexOf(B),f[A]=Tn({},B,{item:p[L]})):O&&f.splice(++A,0,B)})}Se.fun(s)&&f.sort((A,O)=>s(A.item,O.item));let C=-a;const R=HT(),w=Yy(e),E=new Map,k=P.useRef(new Map),T=P.useRef(!1);tt(f,(A,O)=>{const L=A.key,F=A.phase,B=r?r():e;let j,q,V=ei(B.delay||0,L);if(F==Ir.MOUNT)j=B.enter,q=Ir.ENTER;else{const J=v.indexOf(L)<0;if(F!=Ir.LEAVE)if(J)j=B.leave,q=Ir.LEAVE;else if(j=B.update)q=Ir.UPDATE;else return;else if(!J)j=B.enter,q=Ir.ENTER;else return}if(j=ei(j,A.item,O),j=Se.obj(j)?GT(j):{to:j},!j.config){const J=d||w.config;j.config=ei(J,A.item,O,q)}C+=a;const U=Tn({},w,{delay:V+C,ref:u,immediate:B.immediate,reset:!1},j);if(q==Ir.ENTER&&Se.und(U.from)){const J=r?r():e,K=Se.und(J.initial)||g?J.from:J.initial;U.from=ei(K,A.item,O)}const{onResolve:ne}=U;U.onResolve=J=>{ei(ne,J);const K=m.current,Q=K.find(re=>re.key===L);if(Q&&!(J.cancelled&&Q.phase!=Ir.UPDATE)&&Q.ctrl.idle){const re=K.every(G=>G.ctrl.idle);if(Q.phase==Ir.LEAVE){const G=ei(o,Q.item);if(G!==!1){const ie=G===!0?0:G;if(Q.expired=!0,!re&&ie>0){ie<=2147483647&&(Q.expirationId=setTimeout(R,ie));return}}}re&&K.some(G=>G.expired)&&(k.current.delete(Q),l&&(T.current=!0),R())}};const W=xC(A.ctrl,U);q===Ir.LEAVE&&l?k.current.set(A,{phase:q,springs:W,payload:U}):E.set(A,{phase:q,springs:W,payload:U})});const _=P.useContext(Qp),D=hC(_),I=_!==D&&J8(_);Bl(()=>{I&&tt(f,A=>{A.ctrl.start({default:_})})},[_]),tt(E,(A,O)=>{if(k.current.size){const L=f.findIndex(F=>F.key===O.key);f.splice(L,1)}}),Bl(()=>{tt(k.current.size?k.current:E,({phase:A,payload:O},L)=>{const{ctrl:F}=L;L.phase=A,h==null||h.add(F),I&&A==Ir.ENTER&&F.start({default:_}),O&&(X8(F,O.ref),F.ref&&!T.current?F.update(O):(F.start(O),T.current&&(T.current=!1)))})},i?void 0:n);const M=A=>P.createElement(P.Fragment,null,f.map((O,L)=>{const{springs:F}=E.get(O)||O.ctrl,B=A(Tn({},F),O.item,O,L);return B&&B.type?P.createElement(B.type,Tn({},B.props,{key:Se.str(O.key)||Se.num(O.key)?O.key:O.ctrl.id,ref:B.ref})):B}));return h?[M,h]:M}let Ple=1;function _le(t,{key:e,keys:n=e},r){if(n===null){const i=new Set;return t.map(s=>{const a=r&&r.find(o=>o.item===s&&o.phase!==Ir.LEAVE&&!i.has(o));return a?(i.add(a),a.key):Ple++})}return Se.und(n)?t:Se.fun(n)?t.map(n):zr(n)}class uF extends JT{constructor(e,n){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=sp(...n);const r=this._get(),i=fC(r);VT(this,i.create(r))}advance(e){const n=this._get(),r=this.get();Fa(n,r)||(Ws(this).setValue(n),this._onChange(n,this.idle)),!this.idle&&X5(this._active)&&kS(this)}_get(){const e=Se.arr(this.source)?this.source.map(Zr):zr(Zr(this.source));return this.calc(...e)}_start(){this.idle&&!X5(this._active)&&(this.idle=!1,tt(Gy(this),e=>{e.done=!1}),Sa.skipAnimation?(it.batchedUpdates(()=>this.advance()),kS(this)):Hy.start(this))}_attach(){let e=1;tt(zr(this.source),n=>{Gi(n)&&Wd(n,this),vC(n)&&(n.idle||this._active.add(n),e=Math.max(e,n.priority+1))}),this.priority=e,this._start()}_detach(){tt(zr(this.source),e=>{Gi(e)&&op(e,this)}),this._active.clear(),kS(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=zr(this.source).reduce((n,r)=>Math.max(n,(vC(r)?r.priority:0)+1),0))}}function Ale(t){return t.idle!==!1}function X5(t){return!t.size||Array.from(t).every(Ale)}function kS(t){t.idle||(t.idle=!0,tt(Gy(t),e=>{e.done=!0}),ap(t,{type:"idle",parent:t}))}const rl=(t,...e)=>new uF(t,e);Sa.assign({createStringInterpolator:V8,to:(t,e)=>new uF(t,e)});function XT(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const Ole=["style","children","scrollTop","scrollLeft"],dF=/^--/;function Dle(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!dF.test(t)&&!(Ef.hasOwnProperty(t)&&Ef[t])?e+"px":(""+e).trim()}const Q5={};function Ile(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",r=e,{style:i,children:s,scrollTop:a,scrollLeft:o}=r,l=XT(r,Ole),c=Object.values(l),u=Object.keys(l).map(d=>n||t.hasAttribute(d)?d:Q5[d]||(Q5[d]=d.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));s!==void 0&&(t.textContent=s);for(let d in i)if(i.hasOwnProperty(d)){const h=Dle(d,i[d]);dF.test(d)?t.style.setProperty(d,h):t.style[d]=h}u.forEach((d,h)=>{t.setAttribute(d,c[h])}),a!==void 0&&(t.scrollTop=a),o!==void 0&&(t.scrollLeft=o)}let Ef={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const Mle=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),Nle=["Webkit","Ms","Moz","O"];Ef=Object.keys(Ef).reduce((t,e)=>(Nle.forEach(n=>t[Mle(n,e)]=t[e]),t),Ef);const Fle=["x","y","z"],$le=/^(matrix|translate|scale|rotate|skew)/,Lle=/^(translate)/,Ble=/^(rotate|skew)/,PS=(t,e)=>Se.num(t)&&t!==0?t+e:t,Lg=(t,e)=>Se.arr(t)?t.every(n=>Lg(n,e)):Se.num(t)?t===e:parseFloat(t)===e;class jle extends Ky{constructor(e){let{x:n,y:r,z:i}=e,s=XT(e,Fle);const a=[],o=[];(n||r||i)&&(a.push([n||0,r||0,i||0]),o.push(l=>[`translate3d(${l.map(c=>PS(c,"px")).join(",")})`,Lg(l,0)])),ba(s,(l,c)=>{if(c==="transform")a.push([l||""]),o.push(u=>[u,u===""]);else if($le.test(c)){if(delete s[c],Se.und(l))return;const u=Lle.test(c)?"px":Ble.test(c)?"deg":"";a.push(zr(l)),o.push(c==="rotate3d"?([d,h,p,f])=>[`rotate3d(${d},${h},${p},${PS(f,u)})`,Lg(f,0)]:d=>[`${c}(${d.map(h=>PS(h,u)).join(",")})`,Lg(d,c.startsWith("scale")?1:0)])}}),a.length&&(s.transform=new qle(a,o)),super(s)}}class qle extends z8{constructor(e,n){super(),this._value=null,this.inputs=e,this.transforms=n}get(){return this._value||(this._value=this._get())}_get(){let e="",n=!0;return tt(this.inputs,(r,i)=>{const s=Zr(r[0]),[a,o]=this.transforms[i](Se.arr(s)?s:r.map(Zr));e+=" "+a,n=n&&o}),n?"none":e}observerAdded(e){e==1&&tt(this.inputs,n=>tt(n,r=>Gi(r)&&Wd(r,this)))}observerRemoved(e){e==0&&tt(this.inputs,n=>tt(n,r=>Gi(r)&&op(r,this)))}eventObserved(e){e.type=="change"&&(this._value=null),ap(this,e)}}const zle=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Hle=["scrollTop","scrollLeft"];Sa.assign({batchedUpdates:tc.unstable_batchedUpdates,createStringInterpolator:V8,colors:Doe});const Ule=cle(zle,{applyAnimatedValues:Ile,createAnimatedStyle:t=>new jle(t),getComponentProps:t=>XT(t,Hle)}),Gt=Ule.animated;function mc(){return mc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mc.apply(this,arguments)}var Vle={pointerEvents:"none",position:"absolute",zIndex:10,top:0,left:0},Z5=function(t,e){return"translate("+t+"px, "+e+"px)"},hF=P.memo(function(t){var e,n=t.position,r=t.anchor,i=t.children,s=an(),a=yi(),o=a.animate,l=a.config,c=$L(),u=c[0],d=c[1],h=P.useRef(!1),p=void 0,f=!1,m=d.width>0&&d.height>0,g=Math.round(n[0]),v=Math.round(n[1]);m&&(r==="top"?(g-=d.width/2,v-=d.height+14):r==="right"?(g+=14,v-=d.height/2):r==="bottom"?(g-=d.width/2,v+=14):r==="left"?(g-=d.width+14,v-=d.height/2):r==="center"&&(g-=d.width/2,v-=d.height/2),p={transform:Z5(g,v)},h.current||(f=!0),h.current=[g,v]);var y=ho({to:p,config:l,immediate:!o||f}),b=mc({},Vle,s.tooltip,{transform:(e=y.transform)!=null?e:Z5(g,v)});return S.jsx(Gt.div,{ref:u,style:b,children:i})});hF.displayName="TooltipWrapper";var Wle=P.memo(function(t){var e=t.size,n=e===void 0?12:e,r=t.color,i=t.style;return S.jsx("span",{style:mc({display:"block",width:n,height:n,background:r},i===void 0?{}:i)})}),fF=P.memo(function(t){var e,n=t.id,r=t.value,i=t.format,s=t.enableChip,a=s!==void 0&&s,o=t.color,l=t.renderContent,c=an(),u=zR(i);if(typeof l=="function")e=l();else{var d=r;u!==void 0&&d!==void 0&&(d=u(d)),e=S.jsxs("div",{style:c.tooltip.basic,children:[a&&S.jsx(Wle,{color:o,style:c.tooltip.chip}),d!==void 0?S.jsxs("span",{children:[n,": ",S.jsx("strong",{children:""+d})]}):n]})}return S.jsx("div",{style:c.tooltip.container,children:e})}),Gle={width:"100%",borderCollapse:"collapse"},Kle=P.memo(function(t){var e,n=t.title,r=t.rows,i=r===void 0?[]:r,s=t.renderContent,a=an();return i.length?(e=typeof s=="function"?s():S.jsxs("div",{children:[n&&n,S.jsx("table",{style:mc({},Gle,a.tooltip.table),children:S.jsx("tbody",{children:i.map(function(o,l){return S.jsx("tr",{children:o.map(function(c,u){return S.jsx("td",{style:a.tooltip.tableCell,children:c},u)})},l)})})})]}),S.jsx("div",{style:a.tooltip.container,children:e})):null});Kle.displayName="TableTooltip";var wC=P.memo(function(t){var e=t.x0,n=t.x1,r=t.y0,i=t.y1,s=an(),a=yi(),o=a.animate,l=a.config,c=P.useMemo(function(){return mc({},s.crosshair.line,{pointerEvents:"none"})},[s.crosshair.line]),u=ho({x1:e,x2:n,y1:r,y2:i,config:l,immediate:!o});return S.jsx(Gt.line,mc({},u,{fill:"none",style:c}))});wC.displayName="CrosshairLine";var Yle=P.memo(function(t){var e,n,r=t.width,i=t.height,s=t.type,a=t.x,o=t.y;return s==="cross"?(e={x0:a,x1:a,y0:0,y1:i},n={x0:0,x1:r,y0:o,y1:o}):s==="top-left"?(e={x0:a,x1:a,y0:0,y1:o},n={x0:0,x1:a,y0:o,y1:o}):s==="top"?e={x0:a,x1:a,y0:0,y1:o}:s==="top-right"?(e={x0:a,x1:a,y0:0,y1:o},n={x0:a,x1:r,y0:o,y1:o}):s==="right"?n={x0:a,x1:r,y0:o,y1:o}:s==="bottom-right"?(e={x0:a,x1:a,y0:o,y1:i},n={x0:a,x1:r,y0:o,y1:o}):s==="bottom"?e={x0:a,x1:a,y0:o,y1:i}:s==="bottom-left"?(e={x0:a,x1:a,y0:o,y1:i},n={x0:0,x1:a,y0:o,y1:o}):s==="left"?n={x0:0,x1:a,y0:o,y1:o}:s==="x"?e={x0:a,x1:a,y0:0,y1:i}:s==="y"&&(n={x0:0,x1:r,y0:o,y1:o}),S.jsxs(S.Fragment,{children:[e&&S.jsx(wC,{x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1}),n&&S.jsx(wC,{x0:n.x0,x1:n.x1,y0:n.y0,y1:n.y1})]})});Yle.displayName="Crosshair";var pF=P.createContext({showTooltipAt:function(){},showTooltipFromEvent:function(){},hideTooltip:function(){}}),CC={isVisible:!1,position:[null,null],content:null,anchor:null},mF=P.createContext(CC),Jle=function(t){var e=P.useState(CC),n=e[0],r=e[1],i=P.useCallback(function(o,l,c){var u=l[0],d=l[1];c===void 0&&(c="top"),r({isVisible:!0,position:[u,d],anchor:c,content:o})},[r]),s=P.useCallback(function(o,l,c){c===void 0&&(c="top");var u=t.current.getBoundingClientRect(),d=t.current.offsetWidth,h=d===u.width?1:d/u.width,p=(l.clientX-u.left)*h,f=(l.clientY-u.top)*h;c!=="left"&&c!=="right"||(c=p<u.width/2?"right":"left"),r({isVisible:!0,position:[p,f],anchor:c,content:o})},[t,r]),a=P.useCallback(function(){r(CC)},[r]);return{actions:P.useMemo(function(){return{showTooltipAt:i,showTooltipFromEvent:s,hideTooltip:a}},[i,s,a]),state:n}},QT=function(){var t=P.useContext(pF);if(t===void 0)throw new Error("useTooltip must be used within a TooltipProvider");return t},Xle=function(){var t=P.useContext(mF);if(t===void 0)throw new Error("useTooltipState must be used within a TooltipProvider");return t},Qle=function(t){return t.isVisible},Zle=function(){var t=Xle();return Qle(t)?S.jsx(hF,{position:t.position,anchor:t.anchor,children:t.content}):null},ece=function(t){var e=t.container,n=t.children,r=Jle(e),i=r.actions,s=r.state;return S.jsx(pF.Provider,{value:i,children:S.jsx(mF.Provider,{value:s,children:n})})};function tce(){this.__data__=[],this.size=0}var nce=tce;function rce(t,e){return t===e||t!==t&&e!==e}var Zp=rce,ice=Zp;function sce(t,e){for(var n=t.length;n--;)if(ice(t[n][0],e))return n;return-1}var Jy=sce,ace=Jy,oce=Array.prototype,lce=oce.splice;function cce(t){var e=this.__data__,n=ace(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():lce.call(e,n,1),--this.size,!0}var uce=cce,dce=Jy;function hce(t){var e=this.__data__,n=dce(e,t);return n<0?void 0:e[n][1]}var fce=hce,pce=Jy;function mce(t){return pce(this.__data__,t)>-1}var gce=mce,vce=Jy;function yce(t,e){var n=this.__data__,r=vce(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var bce=yce,Sce=nce,xce=uce,wce=fce,Cce=gce,Ece=bce;function Yd(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Yd.prototype.clear=Sce;Yd.prototype.delete=xce;Yd.prototype.get=wce;Yd.prototype.has=Cce;Yd.prototype.set=Ece;var Xy=Yd,Tce=Xy;function Rce(){this.__data__=new Tce,this.size=0}var kce=Rce;function Pce(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var _ce=Pce;function Ace(t){return this.__data__.get(t)}var Oce=Ace;function Dce(t){return this.__data__.has(t)}var Ice=Dce,Mce=typeof hn=="object"&&hn&&hn.Object===Object&&hn,gF=Mce,Nce=gF,Fce=typeof self=="object"&&self&&self.Object===Object&&self,$ce=Nce||Fce||Function("return this")(),Pa=$ce,Lce=Pa,Bce=Lce.Symbol,Jd=Bce,eA=Jd,vF=Object.prototype,jce=vF.hasOwnProperty,qce=vF.toString,$h=eA?eA.toStringTag:void 0;function zce(t){var e=jce.call(t,$h),n=t[$h];try{t[$h]=void 0;var r=!0}catch{}var i=qce.call(t);return r&&(e?t[$h]=n:delete t[$h]),i}var Hce=zce,Uce=Object.prototype,Vce=Uce.toString;function Wce(t){return Vce.call(t)}var Gce=Wce,tA=Jd,Kce=Hce,Yce=Gce,Jce="[object Null]",Xce="[object Undefined]",nA=tA?tA.toStringTag:void 0;function Qce(t){return t==null?t===void 0?Xce:Jce:nA&&nA in Object(t)?Kce(t):Yce(t)}var ml=Qce;function Zce(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var _a=Zce,eue=ml,tue=_a,nue="[object AsyncFunction]",rue="[object Function]",iue="[object GeneratorFunction]",sue="[object Proxy]";function aue(t){if(!tue(t))return!1;var e=eue(t);return e==rue||e==iue||e==nue||e==sue}var em=aue,oue=Pa,lue=oue["__core-js_shared__"],cue=lue,_S=cue,rA=function(){var t=/[^.]+$/.exec(_S&&_S.keys&&_S.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function uue(t){return!!rA&&rA in t}var due=uue,hue=Function.prototype,fue=hue.toString;function pue(t){if(t!=null){try{return fue.call(t)}catch{}try{return t+""}catch{}}return""}var yF=pue,mue=em,gue=due,vue=_a,yue=yF,bue=/[\\^$.*+?()[\]{}|]/g,Sue=/^\[object .+?Constructor\]$/,xue=Function.prototype,wue=Object.prototype,Cue=xue.toString,Eue=wue.hasOwnProperty,Tue=RegExp("^"+Cue.call(Eue).replace(bue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rue(t){if(!vue(t)||gue(t))return!1;var e=mue(t)?Tue:Sue;return e.test(yue(t))}var kue=Rue;function Pue(t,e){return t==null?void 0:t[e]}var _ue=Pue,Aue=kue,Oue=_ue;function Due(t,e){var n=Oue(t,e);return Aue(n)?n:void 0}var $c=Due,Iue=$c,Mue=Pa,Nue=Iue(Mue,"Map"),ZT=Nue,Fue=$c,$ue=Fue(Object,"create"),Qy=$ue,iA=Qy;function Lue(){this.__data__=iA?iA(null):{},this.size=0}var Bue=Lue;function jue(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var que=jue,zue=Qy,Hue="__lodash_hash_undefined__",Uue=Object.prototype,Vue=Uue.hasOwnProperty;function Wue(t){var e=this.__data__;if(zue){var n=e[t];return n===Hue?void 0:n}return Vue.call(e,t)?e[t]:void 0}var Gue=Wue,Kue=Qy,Yue=Object.prototype,Jue=Yue.hasOwnProperty;function Xue(t){var e=this.__data__;return Kue?e[t]!==void 0:Jue.call(e,t)}var Que=Xue,Zue=Qy,ede="__lodash_hash_undefined__";function tde(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Zue&&e===void 0?ede:e,this}var nde=tde,rde=Bue,ide=que,sde=Gue,ade=Que,ode=nde;function Xd(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Xd.prototype.clear=rde;Xd.prototype.delete=ide;Xd.prototype.get=sde;Xd.prototype.has=ade;Xd.prototype.set=ode;var lde=Xd,sA=lde,cde=Xy,ude=ZT;function dde(){this.size=0,this.__data__={hash:new sA,map:new(ude||cde),string:new sA}}var hde=dde;function fde(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var pde=fde,mde=pde;function gde(t,e){var n=t.__data__;return mde(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Zy=gde,vde=Zy;function yde(t){var e=vde(this,t).delete(t);return this.size-=e?1:0,e}var bde=yde,Sde=Zy;function xde(t){return Sde(this,t).get(t)}var wde=xde,Cde=Zy;function Ede(t){return Cde(this,t).has(t)}var Tde=Ede,Rde=Zy;function kde(t,e){var n=Rde(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Pde=kde,_de=hde,Ade=bde,Ode=wde,Dde=Tde,Ide=Pde;function Qd(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Qd.prototype.clear=_de;Qd.prototype.delete=Ade;Qd.prototype.get=Ode;Qd.prototype.has=Dde;Qd.prototype.set=Ide;var eR=Qd,Mde=Xy,Nde=ZT,Fde=eR,$de=200;function Lde(t,e){var n=this.__data__;if(n instanceof Mde){var r=n.__data__;if(!Nde||r.length<$de-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Fde(r)}return n.set(t,e),this.size=n.size,this}var Bde=Lde,jde=Xy,qde=kce,zde=_ce,Hde=Oce,Ude=Ice,Vde=Bde;function Zd(t){var e=this.__data__=new jde(t);this.size=e.size}Zd.prototype.clear=qde;Zd.prototype.delete=zde;Zd.prototype.get=Hde;Zd.prototype.has=Ude;Zd.prototype.set=Vde;var eb=Zd,Wde=$c,Gde=function(){try{var t=Wde(Object,"defineProperty");return t({},"",{}),t}catch{}}(),bF=Gde,aA=bF;function Kde(t,e,n){e=="__proto__"&&aA?aA(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var tR=Kde,Yde=tR,Jde=Zp;function Xde(t,e,n){(n!==void 0&&!Jde(t[e],n)||n===void 0&&!(e in t))&&Yde(t,e,n)}var SF=Xde;function Qde(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),o=a.length;o--;){var l=a[t?o:++i];if(n(s[l],l,s)===!1)break}return e}}var Zde=Qde,ehe=Zde,the=ehe(),xF=the,hp={},nhe={get exports(){return hp},set exports(t){hp=t}};(function(t,e){var n=Pa,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var d=c.length,h=o?o(d):new c.constructor(d);return c.copy(h),h}t.exports=l})(nhe,hp);var rhe=Pa,ihe=rhe.Uint8Array,wF=ihe,oA=wF;function she(t){var e=new t.constructor(t.byteLength);return new oA(e).set(new oA(t)),e}var nR=she,ahe=nR;function ohe(t,e){var n=e?ahe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var CF=ohe;function lhe(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var EF=lhe,che=_a,lA=Object.create,uhe=function(){function t(){}return function(e){if(!che(e))return{};if(lA)return lA(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),dhe=uhe;function hhe(t,e){return function(n){return t(e(n))}}var TF=hhe,fhe=TF,phe=fhe(Object.getPrototypeOf,Object),rR=phe,mhe=Object.prototype;function ghe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||mhe;return t===n}var iR=ghe,vhe=dhe,yhe=rR,bhe=iR;function She(t){return typeof t.constructor=="function"&&!bhe(t)?vhe(yhe(t)):{}}var RF=She;function xhe(t){return t!=null&&typeof t=="object"}var Ns=xhe,whe=ml,Che=Ns,Ehe="[object Arguments]";function The(t){return Che(t)&&whe(t)==Ehe}var Rhe=The,cA=Rhe,khe=Ns,kF=Object.prototype,Phe=kF.hasOwnProperty,_he=kF.propertyIsEnumerable,Ahe=cA(function(){return arguments}())?cA:function(t){return khe(t)&&Phe.call(t,"callee")&&!_he.call(t,"callee")},tb=Ahe,Ohe=Array.isArray,vi=Ohe,Dhe=9007199254740991;function Ihe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Dhe}var sR=Ihe,Mhe=em,Nhe=sR;function Fhe(t){return t!=null&&Nhe(t.length)&&!Mhe(t)}var eh=Fhe,$he=eh,Lhe=Ns;function Bhe(t){return Lhe(t)&&$he(t)}var PF=Bhe,gc={},jhe={get exports(){return gc},set exports(t){gc=t}};function qhe(){return!1}var zhe=qhe;(function(t,e){var n=Pa,r=zhe,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?n.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||r;t.exports=c})(jhe,gc);var Hhe=ml,Uhe=rR,Vhe=Ns,Whe="[object Object]",Ghe=Function.prototype,Khe=Object.prototype,_F=Ghe.toString,Yhe=Khe.hasOwnProperty,Jhe=_F.call(Object);function Xhe(t){if(!Vhe(t)||Hhe(t)!=Whe)return!1;var e=Uhe(t);if(e===null)return!0;var n=Yhe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&_F.call(n)==Jhe}var tm=Xhe,Qhe=ml,Zhe=sR,efe=Ns,tfe="[object Arguments]",nfe="[object Array]",rfe="[object Boolean]",ife="[object Date]",sfe="[object Error]",afe="[object Function]",ofe="[object Map]",lfe="[object Number]",cfe="[object Object]",ufe="[object RegExp]",dfe="[object Set]",hfe="[object String]",ffe="[object WeakMap]",pfe="[object ArrayBuffer]",mfe="[object DataView]",gfe="[object Float32Array]",vfe="[object Float64Array]",yfe="[object Int8Array]",bfe="[object Int16Array]",Sfe="[object Int32Array]",xfe="[object Uint8Array]",wfe="[object Uint8ClampedArray]",Cfe="[object Uint16Array]",Efe="[object Uint32Array]",Yt={};Yt[gfe]=Yt[vfe]=Yt[yfe]=Yt[bfe]=Yt[Sfe]=Yt[xfe]=Yt[wfe]=Yt[Cfe]=Yt[Efe]=!0;Yt[tfe]=Yt[nfe]=Yt[pfe]=Yt[rfe]=Yt[mfe]=Yt[ife]=Yt[sfe]=Yt[afe]=Yt[ofe]=Yt[lfe]=Yt[cfe]=Yt[ufe]=Yt[dfe]=Yt[hfe]=Yt[ffe]=!1;function Tfe(t){return efe(t)&&Zhe(t.length)&&!!Yt[Qhe(t)]}var Rfe=Tfe;function kfe(t){return function(e){return t(e)}}var nm=kfe,vc={},Pfe={get exports(){return vc},set exports(t){vc=t}};(function(t,e){var n=gF,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o})(Pfe,vc);var _fe=Rfe,Afe=nm,uA=vc,dA=uA&&uA.isTypedArray,Ofe=dA?Afe(dA):_fe,aR=Ofe;function Dfe(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var AF=Dfe,Ife=tR,Mfe=Zp,Nfe=Object.prototype,Ffe=Nfe.hasOwnProperty;function $fe(t,e,n){var r=t[e];(!(Ffe.call(t,e)&&Mfe(r,n))||n===void 0&&!(e in t))&&Ife(t,e,n)}var oR=$fe,Lfe=oR,Bfe=tR;function jfe(t,e,n,r){var i=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=r?r(n[o],t[o],o,n,t):void 0;l===void 0&&(l=t[o]),i?Bfe(n,o,l):Lfe(n,o,l)}return n}var th=jfe;function qfe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var zfe=qfe,Hfe=9007199254740991,Ufe=/^(?:0|[1-9]\d*)$/;function Vfe(t,e){var n=typeof t;return e=e??Hfe,!!e&&(n=="number"||n!="symbol"&&Ufe.test(t))&&t>-1&&t%1==0&&t<e}var nb=Vfe,Wfe=zfe,Gfe=tb,Kfe=vi,Yfe=gc,Jfe=nb,Xfe=aR,Qfe=Object.prototype,Zfe=Qfe.hasOwnProperty;function epe(t,e){var n=Kfe(t),r=!n&&Gfe(t),i=!n&&!r&&Yfe(t),s=!n&&!r&&!i&&Xfe(t),a=n||r||i||s,o=a?Wfe(t.length,String):[],l=o.length;for(var c in t)(e||Zfe.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Jfe(c,l)))&&o.push(c);return o}var OF=epe;function tpe(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var npe=tpe,rpe=_a,ipe=iR,spe=npe,ape=Object.prototype,ope=ape.hasOwnProperty;function lpe(t){if(!rpe(t))return spe(t);var e=ipe(t),n=[];for(var r in t)r=="constructor"&&(e||!ope.call(t,r))||n.push(r);return n}var cpe=lpe,upe=OF,dpe=cpe,hpe=eh;function fpe(t){return hpe(t)?upe(t,!0):dpe(t)}var rm=fpe,ppe=th,mpe=rm;function gpe(t){return ppe(t,mpe(t))}var vpe=gpe,hA=SF,ype=hp,bpe=CF,Spe=EF,xpe=RF,fA=tb,pA=vi,wpe=PF,Cpe=gc,Epe=em,Tpe=_a,Rpe=tm,kpe=aR,mA=AF,Ppe=vpe;function _pe(t,e,n,r,i,s,a){var o=mA(t,n),l=mA(e,n),c=a.get(l);if(c){hA(t,n,c);return}var u=s?s(o,l,n+"",t,e,a):void 0,d=u===void 0;if(d){var h=pA(l),p=!h&&Cpe(l),f=!h&&!p&&kpe(l);u=l,h||p||f?pA(o)?u=o:wpe(o)?u=Spe(o):p?(d=!1,u=ype(l,!0)):f?(d=!1,u=bpe(l,!0)):u=[]:Rpe(l)||fA(l)?(u=o,fA(o)?u=Ppe(o):(!Tpe(o)||Epe(o))&&(u=xpe(l))):d=!1}d&&(a.set(l,u),i(u,l,r,s,a),a.delete(l)),hA(t,n,u)}var Ape=_pe,Ope=eb,Dpe=SF,Ipe=xF,Mpe=Ape,Npe=_a,Fpe=rm,$pe=AF;function DF(t,e,n,r,i){t!==e&&Ipe(e,function(s,a){if(i||(i=new Ope),Npe(s))Mpe(t,e,a,n,DF,r,i);else{var o=r?r($pe(t,a),s,a+"",t,e,i):void 0;o===void 0&&(o=s),Dpe(t,a,o)}},Fpe)}var Lpe=DF;function Bpe(t){return t}var rb=Bpe;function jpe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var qpe=jpe,zpe=qpe,gA=Math.max;function Hpe(t,e,n){return e=gA(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=gA(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(a),zpe(t,this,o)}}var IF=Hpe;function Upe(t){return function(){return t}}var Vpe=Upe,Wpe=Vpe,vA=bF,Gpe=rb,Kpe=vA?function(t,e){return vA(t,"toString",{configurable:!0,enumerable:!1,value:Wpe(e),writable:!0})}:Gpe,Ype=Kpe,Jpe=800,Xpe=16,Qpe=Date.now;function Zpe(t){var e=0,n=0;return function(){var r=Qpe(),i=Xpe-(r-n);if(n=r,i>0){if(++e>=Jpe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var eme=Zpe,tme=Ype,nme=eme,rme=nme(tme),MF=rme,ime=rb,sme=IF,ame=MF;function ome(t,e){return ame(sme(t,e,ime),t+"")}var lR=ome,lme=Zp,cme=eh,ume=nb,dme=_a;function hme(t,e,n){if(!dme(n))return!1;var r=typeof e;return(r=="number"?cme(n)&&ume(e,n.length):r=="string"&&e in n)?lme(n[e],t):!1}var NF=hme,fme=lR,pme=NF;function mme(t){return fme(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,a&&pme(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var o=n[r];o&&t(e,o,r,s)}return e})}var gme=mme,vme=Lpe,yme=gme,bme=yme(function(t,e,n){vme(t,e,n)}),FF=bme,Sme=ml,xme=Ns,wme="[object Symbol]";function Cme(t){return typeof t=="symbol"||xme(t)&&Sme(t)==wme}var ib=Cme,Eme=vi,Tme=ib,Rme=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kme=/^\w*$/;function Pme(t,e){if(Eme(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Tme(t)?!0:kme.test(t)||!Rme.test(t)||e!=null&&t in Object(e)}var cR=Pme,$F=eR,_me="Expected a function";function uR(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(_me);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=t.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(uR.Cache||$F),n}uR.Cache=$F;var Ame=uR,Ome=Ame,Dme=500;function Ime(t){var e=Ome(t,function(r){return n.size===Dme&&n.clear(),r}),n=e.cache;return e}var Mme=Ime,Nme=Mme,Fme=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$me=/\\(\\)?/g,Lme=Nme(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Fme,function(n,r,i,s){e.push(i?s.replace($me,"$1"):r||n)}),e}),Bme=Lme;function jme(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var sb=jme,yA=Jd,qme=sb,zme=vi,Hme=ib,Ume=1/0,bA=yA?yA.prototype:void 0,SA=bA?bA.toString:void 0;function LF(t){if(typeof t=="string")return t;if(zme(t))return qme(t,LF)+"";if(Hme(t))return SA?SA.call(t):"";var e=t+"";return e=="0"&&1/t==-Ume?"-0":e}var Vme=LF,Wme=Vme;function Gme(t){return t==null?"":Wme(t)}var Kme=Gme,Yme=vi,Jme=cR,Xme=Bme,Qme=Kme;function Zme(t,e){return Yme(t)?t:Jme(t,e)?[t]:Xme(Qme(t))}var nh=Zme,ege=ib,tge=1/0;function nge(t){if(typeof t=="string"||ege(t))return t;var e=t+"";return e=="0"&&1/t==-tge?"-0":e}var rh=nge,rge=nh,ige=rh;function sge(t,e){e=rge(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[ige(e[n++])];return n&&n==r?t:void 0}var im=sge,age=im;function oge(t,e,n){var r=t==null?void 0:age(t,e);return r===void 0?n:r}var ts=oge,lge=oR,cge=nh,uge=nb,xA=_a,dge=rh;function hge(t,e,n,r){if(!xA(t))return t;e=cge(e,t);for(var i=-1,s=e.length,a=s-1,o=t;o!=null&&++i<s;){var l=dge(e[i]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(i!=a){var u=o[l];c=r?r(u,l,o):void 0,c===void 0&&(c=xA(u)?u:uge(e[i+1])?[]:{})}lge(o,l,c),o=o[l]}return t}var BF=hge,fge=BF;function pge(t,e,n){return t==null?t:fge(t,e,n)}var jl=pge;function ab(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function dR(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ih(){}var yc=.7,Cd=1/yc,Yu="\\s*([+-]?\\d+)\\s*",fp="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ua="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mge=/^#([0-9a-f]{3,8})$/,gge=new RegExp("^rgb\\("+[Yu,Yu,Yu]+"\\)$"),vge=new RegExp("^rgb\\("+[ua,ua,ua]+"\\)$"),yge=new RegExp("^rgba\\("+[Yu,Yu,Yu,fp]+"\\)$"),bge=new RegExp("^rgba\\("+[ua,ua,ua,fp]+"\\)$"),Sge=new RegExp("^hsl\\("+[fp,ua,ua]+"\\)$"),xge=new RegExp("^hsla\\("+[fp,ua,ua,fp]+"\\)$"),wA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ab(ih,pp,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:CA,formatHex:CA,formatHsl:wge,formatRgb:EA,toString:EA});function CA(){return this.rgb().formatHex()}function wge(){return qF(this).formatHsl()}function EA(){return this.rgb().formatRgb()}function pp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=mge.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?TA(e):n===3?new Hr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Jm(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Jm(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gge.exec(t))?new Hr(e[1],e[2],e[3],1):(e=vge.exec(t))?new Hr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=yge.exec(t))?Jm(e[1],e[2],e[3],e[4]):(e=bge.exec(t))?Jm(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Sge.exec(t))?PA(e[1],e[2]/100,e[3]/100,1):(e=xge.exec(t))?PA(e[1],e[2]/100,e[3]/100,e[4]):wA.hasOwnProperty(t)?TA(wA[t]):t==="transparent"?new Hr(NaN,NaN,NaN,0):null}function TA(t){return new Hr(t>>16&255,t>>8&255,t&255,1)}function Jm(t,e,n,r){return r<=0&&(t=e=n=NaN),new Hr(t,e,n,r)}function jF(t){return t instanceof ih||(t=pp(t)),t?(t=t.rgb(),new Hr(t.r,t.g,t.b,t.opacity)):new Hr}function Ed(t,e,n,r){return arguments.length===1?jF(t):new Hr(t,e,n,r??1)}function Hr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ab(Hr,Ed,dR(ih,{brighter:function(t){return t=t==null?Cd:Math.pow(Cd,t),new Hr(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?yc:Math.pow(yc,t),new Hr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:RA,formatHex:RA,formatRgb:kA,toString:kA}));function RA(){return"#"+AS(this.r)+AS(this.g)+AS(this.b)}function kA(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function AS(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function PA(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Qs(t,e,n,r)}function qF(t){if(t instanceof Qs)return new Qs(t.h,t.s,t.l,t.opacity);if(t instanceof ih||(t=pp(t)),!t)return new Qs;if(t instanceof Qs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new Qs(a,o,l,t.opacity)}function Cge(t,e,n,r){return arguments.length===1?qF(t):new Qs(t,e,n,r??1)}function Qs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ab(Qs,Cge,dR(ih,{brighter:function(t){return t=t==null?Cd:Math.pow(Cd,t),new Qs(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?yc:Math.pow(yc,t),new Qs(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Hr(OS(t>=240?t-240:t+120,i,r),OS(t,i,r),OS(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function OS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ege=Math.PI/180,Tge=180/Math.PI;var zF=-.14861,hR=1.78277,fR=-.29227,ob=-.90649,mp=1.97294,_A=mp*ob,AA=mp*hR,OA=hR*fR-ob*zF;function Rge(t){if(t instanceof Jl)return new Jl(t.h,t.s,t.l,t.opacity);t instanceof Hr||(t=jF(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(OA*r+_A*e-AA*n)/(OA+_A-AA),s=r-i,a=(mp*(n-i)-fR*s)/ob,o=Math.sqrt(a*a+s*s)/(mp*i*(1-i)),l=o?Math.atan2(a,s)*Tge-120:NaN;return new Jl(l<0?l+360:l,o,i,t.opacity)}function xa(t,e,n,r){return arguments.length===1?Rge(t):new Jl(t,e,n,r??1)}function Jl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ab(Jl,xa,dR(ih,{brighter:function(t){return t=t==null?Cd:Math.pow(Cd,t),new Jl(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?yc:Math.pow(yc,t),new Jl(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Ege,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Hr(255*(e+n*(zF*r+hR*i)),255*(e+n*(fR*r+ob*i)),255*(e+n*(mp*r)),this.opacity)}}));function kge(t,e,n,r,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*e+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*r+a*i)/6}function Pge(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],a=r>0?t[r-1]:2*i-s,o=r<e-1?t[r+2]:2*s-i;return kge((n-r/e)*e,a,i,s,o)}}const lb=t=>()=>t;function HF(t,e){return function(n){return t+n*e}}function _ge(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Age(t,e){var n=e-t;return n?HF(t,n>180||n<-180?n-360*Math.round(n/360):n):lb(isNaN(t)?e:t)}function Oge(t){return(t=+t)==1?Ju:function(e,n){return n-e?_ge(e,n,t):lb(isNaN(e)?n:e)}}function Ju(t,e){var n=e-t;return n?HF(t,n):lb(isNaN(t)?e:t)}const DA=function t(e){var n=Oge(e);function r(i,s){var a=n((i=Ed(i)).r,(s=Ed(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=Ju(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function Dge(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),s=new Array(n),a,o;for(a=0;a<n;++a)o=Ed(e[a]),r[a]=o.r||0,i[a]=o.g||0,s[a]=o.b||0;return r=t(r),i=t(i),s=t(s),o.opacity=1,function(l){return o.r=r(l),o.g=i(l),o.b=s(l),o+""}}}var Ige=Dge(Pge);function Mge(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Nge(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Fge(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=pR(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function $ge(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function G0(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Lge(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=pR(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var EC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,DS=new RegExp(EC.source,"g");function Bge(t){return function(){return t}}function jge(t){return function(e){return t(e)+""}}function UF(t,e){var n=EC.lastIndex=DS.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=EC.exec(t))&&(i=DS.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:G0(r,i)})),n=DS.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?jge(l[0].x):Bge(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)o[(d=l[u]).i]=d.x(c);return o.join("")})}function pR(t,e){var n=typeof e,r;return e==null||n==="boolean"?lb(e):(n==="number"?G0:n==="string"?(r=pp(e))?(e=r,DA):UF:e instanceof pp?DA:e instanceof Date?$ge:Nge(e)?Mge:Array.isArray(e)?Fge:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Lge:G0)(t,e)}function qge(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function VF(t){return function e(n){n=+n;function r(i,s){var a=t((i=xa(i)).h,(s=xa(s)).h),o=Ju(i.s,s.s),l=Ju(i.l,s.l),c=Ju(i.opacity,s.opacity);return function(u){return i.h=a(u),i.s=o(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=e,r}(1)}VF(Age);var mR=VF(Ju),zge=ml,Hge=vi,Uge=Ns,Vge="[object String]";function Wge(t){return typeof t=="string"||!Hge(t)&&Uge(t)&&zge(t)==Vge}var Gge=Wge;function Kge(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var qe=Kge;function WF(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function gR(t){let e=t,n=t;t.length===1&&(e=(a,o)=>t(a)-o,n=Yge(t));function r(a,o,l,c){for(l==null&&(l=0),c==null&&(c=a.length);l<c;){const u=l+c>>>1;n(a[u],o)<0?l=u+1:c=u}return l}function i(a,o,l,c){for(l==null&&(l=0),c==null&&(c=a.length);l<c;){const u=l+c>>>1;n(a[u],o)>0?c=u:l=u+1}return l}function s(a,o,l,c){l==null&&(l=0),c==null&&(c=a.length);const u=r(a,o,l,c-1);return u>l&&e(a[u-1],o)>-e(a[u],o)?u-1:u}return{left:r,center:s,right:i}}function Yge(t){return(e,n)=>WF(t(e),n)}function Jge(t){return t===null?NaN:+t}const Xge=gR(WF),Qge=Xge.right;gR(Jge).center;const Zge=Qge;var TC=Math.sqrt(50),RC=Math.sqrt(10),kC=Math.sqrt(2);function PC(t,e,n){var r,i=-1,s,a,o;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(s=t,t=e,e=s),(o=GF(t,e,n))===0||!isFinite(o))return[];if(o>0){let l=Math.round(t/o),c=Math.round(e/o);for(l*o<t&&++l,c*o>e&&--c,a=new Array(s=c-l+1);++i<s;)a[i]=(l+i)*o}else{o=-o;let l=Math.round(t*o),c=Math.round(e*o);for(l/o<t&&++l,c/o>e&&--c,a=new Array(s=c-l+1);++i<s;)a[i]=(l+i)/o}return r&&a.reverse(),a}function GF(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=TC?10:s>=RC?5:s>=kC?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=TC?10:s>=RC?5:s>=kC?2:1)}function _C(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=TC?i*=10:s>=RC?i*=5:s>=kC&&(i*=2),e<t?-i:i}function e0e(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Lc(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const IA=Symbol("implicit");function ql(){var t=new Map,e=[],n=[],r=IA;function i(s){var a=s+"",o=t.get(a);if(!o){if(r!==IA)return r;t.set(a,o=e.push(s))}return n[(o-1)%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Map;for(const a of s){const o=a+"";t.has(o)||t.set(o,e.push(a))}return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return ql(e,n).unknown(r)},Lc.apply(i,arguments),i}function vR(){var t=ql().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,o=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var h=e().length,p=i<r,f=p?i:r,m=p?r:i;s=(m-f)/Math.max(1,h-l+c*2),o&&(s=Math.floor(s)),f+=(m-f-s*(h-l))*u,a=s*(1-l),o&&(f=Math.round(f),a=Math.round(a));var g=e0e(h).map(function(v){return f+s*v});return n(p?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,o=!0,d()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(h){return arguments.length?(o=!!h,d()):o},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},t.copy=function(){return vR(e(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(u)},Lc.apply(d(),arguments)}function KF(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return KF(e())},t}function t0e(){return KF(vR.apply(null,arguments).paddingInner(1))}function n0e(t){return function(){return t}}function r0e(t){return+t}var MA=[0,1];function Iu(t){return t}function AC(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:n0e(isNaN(e)?NaN:.5)}function i0e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function s0e(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=AC(i,r),s=n(a,s)):(r=AC(r,i),s=n(s,a)),function(o){return s(r(o))}}function a0e(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=AC(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=Zge(t,o,1,r)-1;return s[l](i[l](o))}}function cb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function yR(){var t=MA,e=MA,n=pR,r,i,s,a=Iu,o,l,c;function u(){var h=Math.min(t.length,e.length);return a!==Iu&&(a=i0e(t[0],t[h-1])),o=h>2?a0e:s0e,l=c=null,d}function d(h){return h==null||isNaN(h=+h)?s:(l||(l=o(t.map(r),e,n)))(r(a(h)))}return d.invert=function(h){return a(i((c||(c=o(e,t.map(r),G0)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,r0e),u()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=qge,u()},d.clamp=function(h){return arguments.length?(a=h?!0:Iu,u()):a!==Iu},d.interpolate=function(h){return arguments.length?(n=h,u()):n},d.unknown=function(h){return arguments.length?(s=h,d):s},function(h,p){return r=h,i=p,u()}}function YF(){return yR()(Iu,Iu)}function o0e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function K0(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Td(t){return t=K0(Math.abs(t)),t?t[1]:NaN}function l0e(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function c0e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var u0e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Y0(t){if(!(e=u0e.exec(t)))throw new Error("invalid format: "+t);var e;return new bR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Y0.prototype=bR.prototype;function bR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}bR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function d0e(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var JF;function h0e(t,e){var n=K0(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(JF=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+K0(t,Math.max(0,e+s-1))[0]}function NA(t,e){var n=K0(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const FA={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:o0e,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return NA(t*100,e)},r:NA,s:h0e,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function $A(t){return t}var LA=Array.prototype.map,BA=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function f0e(t){var e=t.grouping===void 0||t.thousands===void 0?$A:l0e(LA.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?$A:c0e(LA.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"-":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Y0(d);var h=d.fill,p=d.align,f=d.sign,m=d.symbol,g=d.zero,v=d.width,y=d.comma,b=d.precision,C=d.trim,R=d.type;R==="n"?(y=!0,R="g"):FA[R]||(b===void 0&&(b=12),C=!0,R="g"),(g||h==="0"&&p==="=")&&(g=!0,h="0",p="=");var w=m==="$"?n:m==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",E=m==="$"?r:/[%p]/.test(R)?a:"",k=FA[R],T=/[defgprs%]/.test(R);b=b===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function _(D){var I=w,M=E,A,O,L;if(R==="c")M=k(D)+M,D="";else{D=+D;var F=D<0||1/D<0;if(D=isNaN(D)?l:k(Math.abs(D),b),C&&(D=d0e(D)),F&&+D==0&&f!=="+"&&(F=!1),I=(F?f==="("?f:o:f==="-"||f==="("?"":f)+I,M=(R==="s"?BA[8+JF/3]:"")+M+(F&&f==="("?")":""),T){for(A=-1,O=D.length;++A<O;)if(L=D.charCodeAt(A),48>L||L>57){M=(L===46?i+D.slice(A+1):D.slice(A))+M,D=D.slice(0,A);break}}}y&&!g&&(D=e(D,1/0));var B=I.length+D.length+M.length,j=B<v?new Array(v-B+1).join(h):"";switch(y&&g&&(D=e(j+D,j.length?v-M.length:1/0),j=""),p){case"<":D=I+D+M+j;break;case"=":D=I+j+D+M;break;case"^":D=j.slice(0,B=j.length>>1)+I+D+M+j.slice(B);break;default:D=j+I+D+M;break}return s(D)}return _.toString=function(){return d+""},_}function u(d,h){var p=c((d=Y0(d),d.type="f",d)),f=Math.max(-8,Math.min(8,Math.floor(Td(h)/3)))*3,m=Math.pow(10,-f),g=BA[8+f/3];return function(v){return p(m*v)+g}}return{format:c,formatPrefix:u}}var Xm,sm,XF;p0e({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function p0e(t){return Xm=f0e(t),sm=Xm.format,XF=Xm.formatPrefix,Xm}function m0e(t){return Math.max(0,-Td(Math.abs(t)))}function g0e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Td(e)/3)))*3-Td(Math.abs(t)))}function v0e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Td(e)-Td(t))+1}function y0e(t,e,n,r){var i=_C(t,e,n),s;switch(r=Y0(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=g0e(i,a))&&(r.precision=s),XF(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=v0e(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=m0e(i))&&(r.precision=s-(r.type==="%")*2);break}}return sm(r)}function QF(t){var e=t.domain;return t.ticks=function(n){var r=e();return PC(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return y0e(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,c,u=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);u-- >0;){if(c=GF(a,o,n),c===l)return r[i]=a,r[s]=o,e(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function ZF(){var t=YF();return t.copy=function(){return cb(t,ZF())},Lc.apply(t,arguments),QF(t)}function e$(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function jA(t){return Math.log(t)}function qA(t){return Math.exp(t)}function b0e(t){return-Math.log(-t)}function S0e(t){return-Math.exp(-t)}function x0e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function w0e(t){return t===10?x0e:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function C0e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function zA(t){return function(e){return-t(-e)}}function E0e(t){var e=t(jA,qA),n=e.domain,r=10,i,s;function a(){return i=C0e(r),s=w0e(r),n()[0]<0?(i=zA(i),s=zA(s),t(b0e,S0e)):t(jA,qA),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=function(o){var l=n(),c=l[0],u=l[l.length-1],d;(d=u<c)&&(h=c,c=u,u=h);var h=i(c),p=i(u),f,m,g,v=o==null?10:+o,y=[];if(!(r%1)&&p-h<v){if(h=Math.floor(h),p=Math.ceil(p),c>0){for(;h<=p;++h)for(m=1,f=s(h);m<r;++m)if(g=f*m,!(g<c)){if(g>u)break;y.push(g)}}else for(;h<=p;++h)for(m=r-1,f=s(h);m>=1;--m)if(g=f*m,!(g<c)){if(g>u)break;y.push(g)}y.length*2<v&&(y=PC(c,u,v))}else y=PC(h,p,Math.min(p-h,v)).map(s);return d?y.reverse():y},e.tickFormat=function(o,l){if(l==null&&(l=r===10?".0e":","),typeof l!="function"&&(l=sm(l)),o===1/0)return l;o==null&&(o=10);var c=Math.max(1,r*o/e.ticks().length);return function(u){var d=u/s(Math.round(i(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=function(){return n(e$(n(),{floor:function(o){return s(Math.floor(i(o)))},ceil:function(o){return s(Math.ceil(i(o)))}}))},e}function t$(){var t=E0e(yR()).domain([1,10]);return t.copy=function(){return cb(t,t$()).base(t.base())},Lc.apply(t,arguments),t}function HA(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function UA(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function T0e(t){var e=1,n=t(HA(e),UA(e));return n.constant=function(r){return arguments.length?t(HA(e=+r),UA(e)):e},QF(n)}function n$(){var t=T0e(yR());return t.copy=function(){return cb(t,n$()).constant(t.constant())},Lc.apply(t,arguments)}var IS=new Date,MS=new Date;function sr(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return t(s=new Date(+s)),s},i.ceil=function(s){return t(s=new Date(s-1)),e(s,1),t(s),s},i.round=function(s){var a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=function(s,a){return e(s=new Date(+s),a==null?1:Math.floor(a)),s},i.range=function(s,a,o){var l=[],c;if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;do l.push(c=new Date(+s)),e(s,o),t(s);while(c<s&&s<a);return l},i.filter=function(s){return sr(function(a){if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},function(a,o){if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););})},n&&(i.count=function(s,a){return IS.setTime(+s),MS.setTime(+a),t(IS),t(MS),Math.floor(n(IS,MS))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(a){return r(a)%s===0}:function(a){return i.count(0,a)%s===0}):i}),i}var J0=sr(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});J0.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?sr(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):J0};const R0e=J0;J0.range;const Ga=1e3,Xi=Ga*60,Ka=Xi*60,bc=Ka*24,SR=bc*7,VA=bc*30,NS=bc*365;var r$=sr(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*Ga)},function(t,e){return(e-t)/Ga},function(t){return t.getUTCSeconds()});const Mu=r$;r$.range;var i$=sr(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ga)},function(t,e){t.setTime(+t+e*Xi)},function(t,e){return(e-t)/Xi},function(t){return t.getMinutes()});const s$=i$;i$.range;var a$=sr(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ga-t.getMinutes()*Xi)},function(t,e){t.setTime(+t+e*Ka)},function(t,e){return(e-t)/Ka},function(t){return t.getHours()});const o$=a$;a$.range;var l$=sr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Xi)/bc,t=>t.getDate()-1);const c$=l$;l$.range;function Bc(t){return sr(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Xi)/SR})}var xR=Bc(0),k0e=Bc(1),P0e=Bc(2),_0e=Bc(3),A0e=Bc(4),O0e=Bc(5),D0e=Bc(6);xR.range;k0e.range;P0e.range;_0e.range;A0e.range;O0e.range;D0e.range;var u$=sr(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});const d$=u$;u$.range;var wR=sr(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});wR.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:sr(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};const h$=wR;wR.range;var f$=sr(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Xi)},function(t,e){return(e-t)/Xi},function(t){return t.getUTCMinutes()});const p$=f$;f$.range;var m$=sr(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Ka)},function(t,e){return(e-t)/Ka},function(t){return t.getUTCHours()});const g$=m$;m$.range;var v$=sr(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/bc},function(t){return t.getUTCDate()-1});const y$=v$;v$.range;function jc(t){return sr(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/SR})}var CR=jc(0),I0e=jc(1),M0e=jc(2),N0e=jc(3),F0e=jc(4),$0e=jc(5),L0e=jc(6);CR.range;I0e.range;M0e.range;N0e.range;F0e.range;$0e.range;L0e.range;var b$=sr(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});const S$=b$;b$.range;var ER=sr(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});ER.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:sr(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};const x$=ER;ER.range;function w$(t,e,n,r,i,s){const a=[[Mu,1,Ga],[Mu,5,5*Ga],[Mu,15,15*Ga],[Mu,30,30*Ga],[s,1,Xi],[s,5,5*Xi],[s,15,15*Xi],[s,30,30*Xi],[i,1,Ka],[i,3,3*Ka],[i,6,6*Ka],[i,12,12*Ka],[r,1,bc],[r,2,2*bc],[n,1,SR],[e,1,VA],[e,3,3*VA],[t,1,NS]];function o(c,u,d){const h=u<c;h&&([c,u]=[u,c]);const p=d&&typeof d.range=="function"?d:l(c,u,d),f=p?p.range(c,+u+1):[];return h?f.reverse():f}function l(c,u,d){const h=Math.abs(u-c)/d,p=gR(([,,g])=>g).right(a,h);if(p===a.length)return t.every(_C(c/NS,u/NS,d));if(p===0)return R0e.every(Math.max(_C(c,u,d),1));const[f,m]=a[h/a[p-1][2]<a[p][2]/h?p-1:p];return f.every(m)}return[o,l]}const[B0e,j0e]=w$(x$,S$,CR,y$,g$,p$),[q0e,z0e]=w$(h$,d$,xR,c$,o$,s$);var FS=new Date,$S=new Date;function Ln(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return t(s=new Date(+s)),s},i.ceil=function(s){return t(s=new Date(s-1)),e(s,1),t(s),s},i.round=function(s){var a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=function(s,a){return e(s=new Date(+s),a==null?1:Math.floor(a)),s},i.range=function(s,a,o){var l=[],c;if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;do l.push(c=new Date(+s)),e(s,o),t(s);while(c<s&&s<a);return l},i.filter=function(s){return Ln(function(a){if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},function(a,o){if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););})},n&&(i.count=function(s,a){return FS.setTime(+s),$S.setTime(+a),t(FS),t($S),Math.floor(n(FS,$S))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(a){return r(a)%s===0}:function(a){return i.count(0,a)%s===0}):i}),i}var X0=Ln(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});X0.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ln(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):X0};const WA=X0;X0.range;var Q0=1e3,Sc=6e4,Z0=36e5,C$=864e5,E$=6048e5,T$=Ln(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*Q0)},function(t,e){return(e-t)/Q0},function(t){return t.getUTCSeconds()});const GA=T$;T$.range;var R$=Ln(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Q0)},function(t,e){t.setTime(+t+e*Sc)},function(t,e){return(e-t)/Sc},function(t){return t.getMinutes()});const H0e=R$;R$.range;var k$=Ln(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Q0-t.getMinutes()*Sc)},function(t,e){t.setTime(+t+e*Z0)},function(t,e){return(e-t)/Z0},function(t){return t.getHours()});const U0e=k$;k$.range;var P$=Ln(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Sc)/C$},function(t){return t.getDate()-1});const _$=P$;P$.range;function qc(t){return Ln(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Sc)/E$})}var ev=qc(0),gp=qc(1),A$=qc(2),O$=qc(3),xc=qc(4),D$=qc(5),I$=qc(6);ev.range;gp.range;A$.range;O$.range;xc.range;D$.range;I$.range;var M$=Ln(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});const V0e=M$;M$.range;var TR=Ln(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});TR.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Ln(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};const Rd=TR;TR.range;var N$=Ln(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Sc)},function(t,e){return(e-t)/Sc},function(t){return t.getUTCMinutes()});const W0e=N$;N$.range;var F$=Ln(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Z0)},function(t,e){return(e-t)/Z0},function(t){return t.getUTCHours()});const G0e=F$;F$.range;var $$=Ln(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/C$},function(t){return t.getUTCDate()-1});const L$=$$;$$.range;function zc(t){return Ln(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/E$})}var tv=zc(0),vp=zc(1),B$=zc(2),j$=zc(3),wc=zc(4),q$=zc(5),z$=zc(6);tv.range;vp.range;B$.range;j$.range;wc.range;q$.range;z$.range;var H$=Ln(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});const K0e=H$;H$.range;var RR=Ln(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});RR.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Ln(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};const kd=RR;RR.range;function LS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function BS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Lh(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Y0e(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,c=Bh(i),u=jh(i),d=Bh(s),h=jh(s),p=Bh(a),f=jh(a),m=Bh(o),g=jh(o),v=Bh(l),y=jh(l),b={a:F,A:B,b:j,B:q,c:null,d:ZA,e:ZA,f:yve,g:Pve,G:Ave,H:mve,I:gve,j:vve,L:U$,m:bve,M:Sve,p:V,q:U,Q:n3,s:r3,S:xve,u:wve,U:Cve,V:Eve,w:Tve,W:Rve,x:null,X:null,y:kve,Y:_ve,Z:Ove,"%":t3},C={a:ne,A:W,b:J,B:K,c:null,d:e3,e:e3,f:Nve,g:Vve,G:Gve,H:Dve,I:Ive,j:Mve,L:W$,m:Fve,M:$ve,p:Q,q:re,Q:n3,s:r3,S:Lve,u:Bve,U:jve,V:qve,w:zve,W:Hve,x:null,X:null,y:Uve,Y:Wve,Z:Kve,"%":t3},R={a:_,A:D,b:I,B:M,c:A,d:XA,e:XA,f:dve,g:JA,G:YA,H:QA,I:QA,j:ove,L:uve,m:ave,M:lve,p:T,q:sve,Q:fve,s:pve,S:cve,u:eve,U:tve,V:nve,w:Z0e,W:rve,x:O,X:L,y:JA,Y:YA,Z:ive,"%":hve};b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),C.x=w(n,C),C.X=w(r,C),C.c=w(e,C);function w(G,ie){return function(te){var Z=[],oe=-1,ue=0,me=G.length,H,Y,X;for(te instanceof Date||(te=new Date(+te));++oe<me;)G.charCodeAt(oe)===37&&(Z.push(G.slice(ue,oe)),(Y=KA[H=G.charAt(++oe)])!=null?H=G.charAt(++oe):Y=H==="e"?" ":"0",(X=ie[H])&&(H=X(te,Y)),Z.push(H),ue=oe+1);return Z.push(G.slice(ue,oe)),Z.join("")}}function E(G,ie){return function(te){var Z=Lh(1900,void 0,1),oe=k(Z,G,te+="",0),ue,me;if(oe!=te.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(ie&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(ue=BS(Lh(Z.y,0,1)),me=ue.getUTCDay(),ue=me>4||me===0?vp.ceil(ue):vp(ue),ue=L$.offset(ue,(Z.V-1)*7),Z.y=ue.getUTCFullYear(),Z.m=ue.getUTCMonth(),Z.d=ue.getUTCDate()+(Z.w+6)%7):(ue=LS(Lh(Z.y,0,1)),me=ue.getDay(),ue=me>4||me===0?gp.ceil(ue):gp(ue),ue=_$.offset(ue,(Z.V-1)*7),Z.y=ue.getFullYear(),Z.m=ue.getMonth(),Z.d=ue.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),me="Z"in Z?BS(Lh(Z.y,0,1)).getUTCDay():LS(Lh(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(me+5)%7:Z.w+Z.U*7-(me+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,BS(Z)):LS(Z)}}function k(G,ie,te,Z){for(var oe=0,ue=ie.length,me=te.length,H,Y;oe<ue;){if(Z>=me)return-1;if(H=ie.charCodeAt(oe++),H===37){if(H=ie.charAt(oe++),Y=R[H in KA?ie.charAt(oe++):H],!Y||(Z=Y(G,te,Z))<0)return-1}else if(H!=te.charCodeAt(Z++))return-1}return Z}function T(G,ie,te){var Z=c.exec(ie.slice(te));return Z?(G.p=u.get(Z[0].toLowerCase()),te+Z[0].length):-1}function _(G,ie,te){var Z=p.exec(ie.slice(te));return Z?(G.w=f.get(Z[0].toLowerCase()),te+Z[0].length):-1}function D(G,ie,te){var Z=d.exec(ie.slice(te));return Z?(G.w=h.get(Z[0].toLowerCase()),te+Z[0].length):-1}function I(G,ie,te){var Z=v.exec(ie.slice(te));return Z?(G.m=y.get(Z[0].toLowerCase()),te+Z[0].length):-1}function M(G,ie,te){var Z=m.exec(ie.slice(te));return Z?(G.m=g.get(Z[0].toLowerCase()),te+Z[0].length):-1}function A(G,ie,te){return k(G,e,ie,te)}function O(G,ie,te){return k(G,n,ie,te)}function L(G,ie,te){return k(G,r,ie,te)}function F(G){return a[G.getDay()]}function B(G){return s[G.getDay()]}function j(G){return l[G.getMonth()]}function q(G){return o[G.getMonth()]}function V(G){return i[+(G.getHours()>=12)]}function U(G){return 1+~~(G.getMonth()/3)}function ne(G){return a[G.getUTCDay()]}function W(G){return s[G.getUTCDay()]}function J(G){return l[G.getUTCMonth()]}function K(G){return o[G.getUTCMonth()]}function Q(G){return i[+(G.getUTCHours()>=12)]}function re(G){return 1+~~(G.getUTCMonth()/3)}return{format:function(G){var ie=w(G+="",b);return ie.toString=function(){return G},ie},parse:function(G){var ie=E(G+="",!1);return ie.toString=function(){return G},ie},utcFormat:function(G){var ie=w(G+="",C);return ie.toString=function(){return G},ie},utcParse:function(G){var ie=E(G+="",!0);return ie.toString=function(){return G},ie}}}var KA={"-":"",_:" ",0:"0"},ar=/^\s*\d+/,J0e=/^%/,X0e=/[\\^$*+?|[\]().{}]/g;function wt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function Q0e(t){return t.replace(X0e,"\\$&")}function Bh(t){return new RegExp("^(?:"+t.map(Q0e).join("|")+")","i")}function jh(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Z0e(t,e,n){var r=ar.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function eve(t,e,n){var r=ar.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function tve(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function nve(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function rve(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function YA(t,e,n){var r=ar.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function JA(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ive(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function sve(t,e,n){var r=ar.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function ave(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function XA(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ove(t,e,n){var r=ar.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function QA(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function lve(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function cve(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function uve(t,e,n){var r=ar.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function dve(t,e,n){var r=ar.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function hve(t,e,n){var r=J0e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function fve(t,e,n){var r=ar.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function pve(t,e,n){var r=ar.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ZA(t,e){return wt(t.getDate(),e,2)}function mve(t,e){return wt(t.getHours(),e,2)}function gve(t,e){return wt(t.getHours()%12||12,e,2)}function vve(t,e){return wt(1+_$.count(Rd(t),t),e,3)}function U$(t,e){return wt(t.getMilliseconds(),e,3)}function yve(t,e){return U$(t,e)+"000"}function bve(t,e){return wt(t.getMonth()+1,e,2)}function Sve(t,e){return wt(t.getMinutes(),e,2)}function xve(t,e){return wt(t.getSeconds(),e,2)}function wve(t){var e=t.getDay();return e===0?7:e}function Cve(t,e){return wt(ev.count(Rd(t)-1,t),e,2)}function V$(t){var e=t.getDay();return e>=4||e===0?xc(t):xc.ceil(t)}function Eve(t,e){return t=V$(t),wt(xc.count(Rd(t),t)+(Rd(t).getDay()===4),e,2)}function Tve(t){return t.getDay()}function Rve(t,e){return wt(gp.count(Rd(t)-1,t),e,2)}function kve(t,e){return wt(t.getFullYear()%100,e,2)}function Pve(t,e){return t=V$(t),wt(t.getFullYear()%100,e,2)}function _ve(t,e){return wt(t.getFullYear()%1e4,e,4)}function Ave(t,e){var n=t.getDay();return t=n>=4||n===0?xc(t):xc.ceil(t),wt(t.getFullYear()%1e4,e,4)}function Ove(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+wt(e/60|0,"0",2)+wt(e%60,"0",2)}function e3(t,e){return wt(t.getUTCDate(),e,2)}function Dve(t,e){return wt(t.getUTCHours(),e,2)}function Ive(t,e){return wt(t.getUTCHours()%12||12,e,2)}function Mve(t,e){return wt(1+L$.count(kd(t),t),e,3)}function W$(t,e){return wt(t.getUTCMilliseconds(),e,3)}function Nve(t,e){return W$(t,e)+"000"}function Fve(t,e){return wt(t.getUTCMonth()+1,e,2)}function $ve(t,e){return wt(t.getUTCMinutes(),e,2)}function Lve(t,e){return wt(t.getUTCSeconds(),e,2)}function Bve(t){var e=t.getUTCDay();return e===0?7:e}function jve(t,e){return wt(tv.count(kd(t)-1,t),e,2)}function G$(t){var e=t.getUTCDay();return e>=4||e===0?wc(t):wc.ceil(t)}function qve(t,e){return t=G$(t),wt(wc.count(kd(t),t)+(kd(t).getUTCDay()===4),e,2)}function zve(t){return t.getUTCDay()}function Hve(t,e){return wt(vp.count(kd(t)-1,t),e,2)}function Uve(t,e){return wt(t.getUTCFullYear()%100,e,2)}function Vve(t,e){return t=G$(t),wt(t.getUTCFullYear()%100,e,2)}function Wve(t,e){return wt(t.getUTCFullYear()%1e4,e,4)}function Gve(t,e){var n=t.getUTCDay();return t=n>=4||n===0?wc(t):wc.ceil(t),wt(t.getUTCFullYear()%1e4,e,4)}function Kve(){return"+0000"}function t3(){return"%"}function n3(t){return+t}function r3(t){return Math.floor(+t/1e3)}var iu,ub,K$,Y$,J$;Yve({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Yve(t){return iu=Y0e(t),ub=iu.format,K$=iu.parse,Y$=iu.utcFormat,J$=iu.utcParse,iu}function Jve(t){return new Date(t)}function Xve(t){return t instanceof Date?+t:+new Date(+t)}function kR(t,e,n,r,i,s,a,o,l,c){var u=YF(),d=u.invert,h=u.domain,p=c(".%L"),f=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),b=c("%B"),C=c("%Y");function R(w){return(l(w)<w?p:o(w)<w?f:a(w)<w?m:s(w)<w?g:r(w)<w?i(w)<w?v:y:n(w)<w?b:C)(w)}return u.invert=function(w){return new Date(d(w))},u.domain=function(w){return arguments.length?h(Array.from(w,Xve)):h().map(Jve)},u.ticks=function(w){var E=h();return t(E[0],E[E.length-1],w??10)},u.tickFormat=function(w,E){return E==null?R:c(E)},u.nice=function(w){var E=h();return(!w||typeof w.range!="function")&&(w=e(E[0],E[E.length-1],w??10)),w?h(e$(E,w)):u},u.copy=function(){return cb(u,kR(t,e,n,r,i,s,a,o,l,c))},u}function Qve(){return Lc.apply(kR(q0e,z0e,h$,d$,xR,c$,o$,s$,Mu,ub).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Zve(){return Lc.apply(kR(B0e,j0e,x$,S$,CR,y$,g$,p$,Mu,Y$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ut(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const X$=ut("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Q$=ut("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Z$=ut("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),eL=ut("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),tL=ut("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),nL=ut("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),rL=ut("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),iL=ut("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),PR=ut("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),zt=t=>Ige(t[t.length-1]);var db=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ut);const eye=zt(db);var hb=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(ut);const tye=zt(hb);var fb=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(ut);const nye=zt(fb);var pb=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(ut);const rye=zt(pb);var mb=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(ut);const iye=zt(mb);var gb=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(ut);const sye=zt(gb);var vb=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ut);const aye=zt(vb);var yb=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ut);const oye=zt(yb);var bb=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ut);const lye=zt(bb);var Sb=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(ut);const cye=zt(Sb);var xb=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(ut);const uye=zt(xb);var wb=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(ut);const dye=zt(wb);var Cb=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(ut);const hye=zt(Cb);var Eb=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(ut);const fye=zt(Eb);var Tb=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(ut);const pye=zt(Tb);var Rb=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(ut);const mye=zt(Rb);var kb=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(ut);const gye=zt(kb);var Pb=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(ut);const vye=zt(Pb);var _b=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(ut);const yye=zt(_b);var Ab=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ut);const bye=zt(Ab);var Ob=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(ut);const Sye=zt(Ob);var Db=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ut);const xye=zt(Db);var Ib=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ut);const wye=zt(Ib);var Mb=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ut);const Cye=zt(Mb);var Nb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ut);const Eye=zt(Nb);var Fb=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ut);const Tye=zt(Fb);var $b=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ut);const Rye=zt($b);function kye(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const Pye=mR(xa(300,.5,0),xa(-240,.5,1));var _ye=mR(xa(-100,.75,.35),xa(80,1.5,.8)),Aye=mR(xa(260,.75,.35),xa(80,1.5,.8)),Qm=xa();function Oye(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Qm.h=360*t-100,Qm.s=1.5-1.5*e,Qm.l=.8-.9*e,Qm+""}var Zm=Ed(),Dye=Math.PI/3,Iye=Math.PI*2/3;function Mye(t){var e;return t=(.5-t)*Math.PI,Zm.r=255*(e=Math.sin(t))*e,Zm.g=255*(e=Math.sin(t+Dye))*e,Zm.b=255*(e=Math.sin(t+Iye))*e,Zm+""}function Nye(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function Lb(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const Fye=Lb(ut("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var $ye=Lb(ut("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Lye=Lb(ut("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Bye=Lb(ut("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),jye="__lodash_hash_undefined__";function qye(t){return this.__data__.set(t,jye),this}var zye=qye;function Hye(t){return this.__data__.has(t)}var Uye=Hye,Vye=eR,Wye=zye,Gye=Uye;function nv(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Vye;++e<n;)this.add(t[e])}nv.prototype.add=nv.prototype.push=Wye;nv.prototype.has=Gye;var _R=nv;function Kye(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var Yye=Kye;function Jye(t){return t!==t}var Xye=Jye;function Qye(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var Zye=Qye,ebe=Yye,tbe=Xye,nbe=Zye;function rbe(t,e,n){return e===e?nbe(t,e,n):ebe(t,tbe,n)}var ibe=rbe,sbe=ibe;function abe(t,e){var n=t==null?0:t.length;return!!n&&sbe(t,e,0)>-1}var sL=abe;function obe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var aL=obe;function lbe(t,e){return t.has(e)}var AR=lbe,cbe=_R,ube=sL,dbe=aL,hbe=sb,fbe=nm,pbe=AR,mbe=200;function gbe(t,e,n,r){var i=-1,s=ube,a=!0,o=t.length,l=[],c=e.length;if(!o)return l;n&&(e=hbe(e,fbe(n))),r?(s=dbe,a=!1):e.length>=mbe&&(s=pbe,a=!1,e=new cbe(e));e:for(;++i<o;){var u=t[i],d=n==null?u:n(u);if(u=r||u!==0?u:0,a&&d===d){for(var h=c;h--;)if(e[h]===d)continue e;l.push(u)}else s(e,d,r)||l.push(u)}return l}var vbe=gbe,ybe=vbe,bbe=lR,Sbe=PF,xbe=bbe(function(t,e){return Sbe(t)?ybe(t,e):[]}),oL=xbe,OC=Math.PI,DC=2*OC,Pl=1e-6,wbe=DC-Pl;function IC(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function OR(){return new IC}IC.prototype=OR.prototype={constructor:IC,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var s=this._x1,a=this._y1,o=n-t,l=r-e,c=s-t,u=a-e,d=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>Pl)if(!(Math.abs(u*o-l*c)>Pl)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var h=n-s,p=r-a,f=o*o+l*l,m=h*h+p*p,g=Math.sqrt(f),v=Math.sqrt(d),y=i*Math.tan((OC-Math.acos((f+d-m)/(2*g*v)))/2),b=y/v,C=y/g;Math.abs(b-1)>Pl&&(this._+="L"+(t+b*c)+","+(e+b*u)),this._+="A"+i+","+i+",0,0,"+ +(u*h>c*p)+","+(this._x1=t+C*o)+","+(this._y1=e+C*l)}},arc:function(t,e,n,r,i,s){t=+t,e=+e,n=+n,s=!!s;var a=n*Math.cos(r),o=n*Math.sin(r),l=t+a,c=e+o,u=1^s,d=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>Pl||Math.abs(this._y1-c)>Pl)&&(this._+="L"+l+","+c),n&&(d<0&&(d=d%DC+DC),d>wbe?this._+="A"+n+","+n+",0,1,"+u+","+(t-a)+","+(e-o)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):d>Pl&&(this._+="A"+n+","+n+",0,"+ +(d>=OC)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function un(t){return function(){return t}}var i3=Math.abs,wr=Math.atan2,xl=Math.cos,Cbe=Math.max,jS=Math.min,qs=Math.sin,Nu=Math.sqrt,Er=1e-12,yp=Math.PI,rv=yp/2,Bg=2*yp;function Ebe(t){return t>1?0:t<-1?yp:Math.acos(t)}function s3(t){return t>=1?rv:t<=-1?-rv:Math.asin(t)}function Tbe(t){return t.innerRadius}function Rbe(t){return t.outerRadius}function kbe(t){return t.startAngle}function Pbe(t){return t.endAngle}function _be(t){return t&&t.padAngle}function Abe(t,e,n,r,i,s,a,o){var l=n-t,c=r-e,u=a-i,d=o-s,h=d*l-u*c;if(!(h*h<Er))return h=(u*(e-s)-d*(t-i))/h,[t+h*l,e+h*c]}function eg(t,e,n,r,i,s,a){var o=t-n,l=e-r,c=(a?s:-s)/Nu(o*o+l*l),u=c*l,d=-c*o,h=t+u,p=e+d,f=n+u,m=r+d,g=(h+f)/2,v=(p+m)/2,y=f-h,b=m-p,C=y*y+b*b,R=i-s,w=h*m-f*p,E=(b<0?-1:1)*Nu(Cbe(0,R*R*C-w*w)),k=(w*b-y*E)/C,T=(-w*y-b*E)/C,_=(w*b+y*E)/C,D=(-w*y+b*E)/C,I=k-g,M=T-v,A=_-g,O=D-v;return I*I+M*M>A*A+O*O&&(k=_,T=D),{cx:k,cy:T,x01:-u,y01:-d,x11:k*(i/R-1),y11:T*(i/R-1)}}function Obe(){var t=Tbe,e=Rbe,n=un(0),r=null,i=kbe,s=Pbe,a=_be,o=null;function l(){var c,u,d=+t.apply(this,arguments),h=+e.apply(this,arguments),p=i.apply(this,arguments)-rv,f=s.apply(this,arguments)-rv,m=i3(f-p),g=f>p;if(o||(o=c=OR()),h<d&&(u=h,h=d,d=u),!(h>Er))o.moveTo(0,0);else if(m>Bg-Er)o.moveTo(h*xl(p),h*qs(p)),o.arc(0,0,h,p,f,!g),d>Er&&(o.moveTo(d*xl(f),d*qs(f)),o.arc(0,0,d,f,p,g));else{var v=p,y=f,b=p,C=f,R=m,w=m,E=a.apply(this,arguments)/2,k=E>Er&&(r?+r.apply(this,arguments):Nu(d*d+h*h)),T=jS(i3(h-d)/2,+n.apply(this,arguments)),_=T,D=T,I,M;if(k>Er){var A=s3(k/d*qs(E)),O=s3(k/h*qs(E));(R-=A*2)>Er?(A*=g?1:-1,b+=A,C-=A):(R=0,b=C=(p+f)/2),(w-=O*2)>Er?(O*=g?1:-1,v+=O,y-=O):(w=0,v=y=(p+f)/2)}var L=h*xl(v),F=h*qs(v),B=d*xl(C),j=d*qs(C);if(T>Er){var q=h*xl(y),V=h*qs(y),U=d*xl(b),ne=d*qs(b),W;if(m<yp&&(W=Abe(L,F,U,ne,q,V,B,j))){var J=L-W[0],K=F-W[1],Q=q-W[0],re=V-W[1],G=1/qs(Ebe((J*Q+K*re)/(Nu(J*J+K*K)*Nu(Q*Q+re*re)))/2),ie=Nu(W[0]*W[0]+W[1]*W[1]);_=jS(T,(d-ie)/(G-1)),D=jS(T,(h-ie)/(G+1))}}w>Er?D>Er?(I=eg(U,ne,L,F,h,D,g),M=eg(q,V,B,j,h,D,g),o.moveTo(I.cx+I.x01,I.cy+I.y01),D<T?o.arc(I.cx,I.cy,D,wr(I.y01,I.x01),wr(M.y01,M.x01),!g):(o.arc(I.cx,I.cy,D,wr(I.y01,I.x01),wr(I.y11,I.x11),!g),o.arc(0,0,h,wr(I.cy+I.y11,I.cx+I.x11),wr(M.cy+M.y11,M.cx+M.x11),!g),o.arc(M.cx,M.cy,D,wr(M.y11,M.x11),wr(M.y01,M.x01),!g))):(o.moveTo(L,F),o.arc(0,0,h,v,y,!g)):o.moveTo(L,F),!(d>Er)||!(R>Er)?o.lineTo(B,j):_>Er?(I=eg(B,j,q,V,d,-_,g),M=eg(L,F,U,ne,d,-_,g),o.lineTo(I.cx+I.x01,I.cy+I.y01),_<T?o.arc(I.cx,I.cy,_,wr(I.y01,I.x01),wr(M.y01,M.x01),!g):(o.arc(I.cx,I.cy,_,wr(I.y01,I.x01),wr(I.y11,I.x11),!g),o.arc(0,0,d,wr(I.cy+I.y11,I.cx+I.x11),wr(M.cy+M.y11,M.cx+M.x11),g),o.arc(M.cx,M.cy,_,wr(M.y11,M.x11),wr(M.y01,M.x01),!g))):o.arc(0,0,d,C,b,g)}if(o.closePath(),c)return o=null,c+""||null}return l.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,u=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-yp/2;return[xl(u)*c,qs(u)*c]},l.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:un(+c),l):t},l.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:un(+c),l):e},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:un(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:un(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:un(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:un(+c),l):s},l.padAngle=function(c){return arguments.length?(a=typeof c=="function"?c:un(+c),l):a},l.context=function(c){return arguments.length?(o=c??null,l):o},l}function lL(t){this._context=t}lL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function cL(t){return new lL(t)}function Dbe(t){return t[0]}function Ibe(t){return t[1]}function Mbe(){var t=Dbe,e=Ibe,n=un(!0),r=null,i=cL,s=null;function a(o){var l,c=o.length,u,d=!1,h;for(r==null&&(s=i(h=OR())),l=0;l<=c;++l)!(l<c&&n(u=o[l],l,o))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(u,l,o),+e(u,l,o));if(h)return s=null,h+""||null}return a.x=function(o){return arguments.length?(t=typeof o=="function"?o:un(+o),a):t},a.y=function(o){return arguments.length?(e=typeof o=="function"?o:un(+o),a):e},a.defined=function(o){return arguments.length?(n=typeof o=="function"?o:un(!!o),a):n},a.curve=function(o){return arguments.length?(i=o,r!=null&&(s=i(r)),a):i},a.context=function(o){return arguments.length?(o==null?r=s=null:s=i(r=o),a):r},a}function Nbe(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Fbe(t){return t}function $be(){var t=Fbe,e=Nbe,n=null,r=un(0),i=un(Bg),s=un(0);function a(o){var l,c=o.length,u,d,h=0,p=new Array(c),f=new Array(c),m=+r.apply(this,arguments),g=Math.min(Bg,Math.max(-Bg,i.apply(this,arguments)-m)),v,y=Math.min(Math.abs(g)/c,s.apply(this,arguments)),b=y*(g<0?-1:1),C;for(l=0;l<c;++l)(C=f[p[l]=l]=+t(o[l],l,o))>0&&(h+=C);for(e!=null?p.sort(function(R,w){return e(f[R],f[w])}):n!=null&&p.sort(function(R,w){return n(o[R],o[w])}),l=0,d=h?(g-c*b)/h:0;l<c;++l,m=v)u=p[l],C=f[u],v=m+(C>0?C*d:0)+b,f[u]={data:o[u],index:l,value:C,startAngle:m,endAngle:v,padAngle:y};return f}return a.value=function(o){return arguments.length?(t=typeof o=="function"?o:un(+o),a):t},a.sortValues=function(o){return arguments.length?(e=o,n=null,a):e},a.sort=function(o){return arguments.length?(n=o,e=null,a):n},a.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:un(+o),a):r},a.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:un(+o),a):i},a.padAngle=function(o){return arguments.length?(s=typeof o=="function"?o:un(+o),a):s},a}var a3=Array.prototype.slice;function il(){}function iv(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Bb(t){this._context=t}Bb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:iv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:iv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Lbe(t){return new Bb(t)}function uL(t){this._context=t}uL.prototype={areaStart:il,areaEnd:il,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:iv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Bbe(t){return new uL(t)}function dL(t){this._context=t}dL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:iv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function jbe(t){return new dL(t)}function hL(t,e){this._basis=new Bb(t),this._beta=e}hL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,a=e[n]-i,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*t[o]+(1-this._beta)*(r+l*s),this._beta*e[o]+(1-this._beta)*(i+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const qbe=function t(e){function n(r){return e===1?new Bb(r):new hL(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function sv(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function DR(t,e){this._context=t,this._k=(1-e)/6}DR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:sv(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:sv(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const zbe=function t(e){function n(r){return new DR(r,e)}return n.tension=function(r){return t(+r)},n}(0);function IR(t,e){this._context=t,this._k=(1-e)/6}IR.prototype={areaStart:il,areaEnd:il,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:sv(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Hbe=function t(e){function n(r){return new IR(r,e)}return n.tension=function(r){return t(+r)},n}(0);function MR(t,e){this._context=t,this._k=(1-e)/6}MR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:sv(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ube=function t(e){function n(r){return new MR(r,e)}return n.tension=function(r){return t(+r)},n}(0);function NR(t,e,n){var r=t._x1,i=t._y1,s=t._x2,a=t._y2;if(t._l01_a>Er){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Er){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,s,a,t._x2,t._y2)}function fL(t,e){this._context=t,this._alpha=e}fL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:NR(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Vbe=function t(e){function n(r){return e?new fL(r,e):new DR(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function pL(t,e){this._context=t,this._alpha=e}pL.prototype={areaStart:il,areaEnd:il,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:NR(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Wbe=function t(e){function n(r){return e?new pL(r,e):new IR(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function mL(t,e){this._context=t,this._alpha=e}mL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:NR(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Gbe=function t(e){function n(r){return e?new mL(r,e):new MR(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function gL(t){this._context=t}gL.prototype={areaStart:il,areaEnd:il,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Kbe(t){return new gL(t)}function o3(t){return t<0?-1:1}function l3(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(o3(s)+o3(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function c3(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function qS(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-r)/3;t._context.bezierCurveTo(r+o,i+o*e,s-o,a-o*n,s,a)}function av(t){this._context=t}av.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qS(this,this._t0,c3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,qS(this,c3(this,n=l3(this,t,e)),n);break;default:qS(this,this._t0,n=l3(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function vL(t){this._context=new yL(t)}(vL.prototype=Object.create(av.prototype)).point=function(t,e){av.prototype.point.call(this,e,t)};function yL(t){this._context=t}yL.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function Ybe(t){return new av(t)}function Jbe(t){return new vL(t)}function bL(t){this._context=t}bL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=u3(t),i=u3(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function u3(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Xbe(t){return new bL(t)}function jb(t,e){this._context=t,this._t=e}jb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Qbe(t){return new jb(t,.5)}function Zbe(t){return new jb(t,0)}function e1e(t){return new jb(t,1)}function Pd(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,o=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function _d(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function t1e(t,e){return t[e]}function n1e(){var t=un([]),e=_d,n=Pd,r=t1e;function i(s){var a=t.apply(this,arguments),o,l=s.length,c=a.length,u=new Array(c),d;for(o=0;o<c;++o){for(var h=a[o],p=u[o]=new Array(l),f=0,m;f<l;++f)p[f]=m=[0,+r(s[f],h,f,s)],m.data=s[f];p.key=h}for(o=0,d=e(u);o<c;++o)u[d[o]].index=o;return n(u,d),u}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:un(a3.call(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:un(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?_d:typeof s=="function"?s:un(a3.call(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Pd,i):n},i}function r1e(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}Pd(t,e)}}function SL(t,e){if((l=t.length)>0)for(var n,r=0,i,s,a,o,l,c=t[e[0]].length;r<c;++r)for(a=o=0,n=0;n<l;++n)(s=(i=t[e[n]][r])[1]-i[0])>0?(i[0]=a,i[1]=a+=s):s<0?(i[1]=o,i[0]=o+=s):(i[0]=0,i[1]=s)}function i1e(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var a=0,o=0;a<i;++a)o+=t[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}Pd(t,e)}}function s1e(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var o=0,l=0,c=0;o<a;++o){for(var u=t[e[o]],d=u[r][1]||0,h=u[r-1][1]||0,p=(d-h)/2,f=0;f<o;++f){var m=t[e[f]],g=m[r][1]||0,v=m[r-1][1]||0;p+=g-v}l+=d,c+=p*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,Pd(t,e)}}function a1e(t){var e=t.map(o1e);return _d(t).sort(function(n,r){return e[n]-e[r]})}function o1e(t){for(var e=-1,n=0,r=t.length,i,s=-1/0;++e<r;)(i=+t[e][1])>s&&(s=i,n=e);return n}function xL(t){var e=t.map(wL);return _d(t).sort(function(n,r){return e[n]-e[r]})}function wL(t){for(var e=0,n=-1,r=t.length,i;++n<r;)(i=+t[n][1])&&(e+=i);return e}function l1e(t){return xL(t).reverse()}function c1e(t){var e=t.length,n,r,i=t.map(wL),s=a1e(t),a=0,o=0,l=[],c=[];for(n=0;n<e;++n)r=s[n],a<o?(a+=i[r],l.push(r)):(o+=i[r],c.push(r));return c.reverse().concat(l)}function u1e(t){return _d(t).reverse()}function d1e(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var h1e=d1e,f1e=_R,p1e=h1e,m1e=AR,g1e=1,v1e=2;function y1e(t,e,n,r,i,s){var a=n&g1e,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var d=-1,h=!0,p=n&v1e?new f1e:void 0;for(s.set(t,e),s.set(e,t);++d<o;){var f=t[d],m=e[d];if(r)var g=a?r(m,f,d,e,t,s):r(f,m,d,t,e,s);if(g!==void 0){if(g)continue;h=!1;break}if(p){if(!p1e(e,function(v,y){if(!m1e(p,y)&&(f===v||i(f,v,n,r,s)))return p.push(y)})){h=!1;break}}else if(!(f===m||i(f,m,n,r,s))){h=!1;break}}return s.delete(t),s.delete(e),h}var CL=y1e;function b1e(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var S1e=b1e;function x1e(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var FR=x1e,d3=Jd,h3=wF,w1e=Zp,C1e=CL,E1e=S1e,T1e=FR,R1e=1,k1e=2,P1e="[object Boolean]",_1e="[object Date]",A1e="[object Error]",O1e="[object Map]",D1e="[object Number]",I1e="[object RegExp]",M1e="[object Set]",N1e="[object String]",F1e="[object Symbol]",$1e="[object ArrayBuffer]",L1e="[object DataView]",f3=d3?d3.prototype:void 0,zS=f3?f3.valueOf:void 0;function B1e(t,e,n,r,i,s,a){switch(n){case L1e:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case $1e:return!(t.byteLength!=e.byteLength||!s(new h3(t),new h3(e)));case P1e:case _1e:case D1e:return w1e(+t,+e);case A1e:return t.name==e.name&&t.message==e.message;case I1e:case N1e:return t==e+"";case O1e:var o=E1e;case M1e:var l=r&R1e;if(o||(o=T1e),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=k1e,a.set(t,e);var u=C1e(o(t),o(e),r,i,s,a);return a.delete(t),u;case F1e:if(zS)return zS.call(t)==zS.call(e)}return!1}var j1e=B1e;function q1e(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var $R=q1e,z1e=$R,H1e=vi;function U1e(t,e,n){var r=e(t);return H1e(t)?r:z1e(r,n(t))}var EL=U1e;function V1e(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}var TL=V1e;function W1e(){return[]}var RL=W1e,G1e=TL,K1e=RL,Y1e=Object.prototype,J1e=Y1e.propertyIsEnumerable,p3=Object.getOwnPropertySymbols,X1e=p3?function(t){return t==null?[]:(t=Object(t),G1e(p3(t),function(e){return J1e.call(t,e)}))}:K1e,LR=X1e,Q1e=TF,Z1e=Q1e(Object.keys,Object),eSe=Z1e,tSe=iR,nSe=eSe,rSe=Object.prototype,iSe=rSe.hasOwnProperty;function sSe(t){if(!tSe(t))return nSe(t);var e=[];for(var n in Object(t))iSe.call(t,n)&&n!="constructor"&&e.push(n);return e}var aSe=sSe,oSe=OF,lSe=aSe,cSe=eh;function uSe(t){return cSe(t)?oSe(t):lSe(t)}var am=uSe,dSe=EL,hSe=LR,fSe=am;function pSe(t){return dSe(t,fSe,hSe)}var kL=pSe,m3=kL,mSe=1,gSe=Object.prototype,vSe=gSe.hasOwnProperty;function ySe(t,e,n,r,i,s){var a=n&mSe,o=m3(t),l=o.length,c=m3(e),u=c.length;if(l!=u&&!a)return!1;for(var d=l;d--;){var h=o[d];if(!(a?h in e:vSe.call(e,h)))return!1}var p=s.get(t),f=s.get(e);if(p&&f)return p==e&&f==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=a;++d<l;){h=o[d];var v=t[h],y=e[h];if(r)var b=a?r(y,v,h,e,t,s):r(v,y,h,t,e,s);if(!(b===void 0?v===y||i(v,y,n,r,s):b)){m=!1;break}g||(g=h=="constructor")}if(m&&!g){var C=t.constructor,R=e.constructor;C!=R&&"constructor"in t&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof R=="function"&&R instanceof R)&&(m=!1)}return s.delete(t),s.delete(e),m}var bSe=ySe,SSe=$c,xSe=Pa,wSe=SSe(xSe,"DataView"),CSe=wSe,ESe=$c,TSe=Pa,RSe=ESe(TSe,"Promise"),kSe=RSe,PSe=$c,_Se=Pa,ASe=PSe(_Se,"Set"),PL=ASe,OSe=$c,DSe=Pa,ISe=OSe(DSe,"WeakMap"),MSe=ISe,MC=CSe,NC=ZT,FC=kSe,$C=PL,LC=MSe,_L=ml,sh=yF,g3="[object Map]",NSe="[object Object]",v3="[object Promise]",y3="[object Set]",b3="[object WeakMap]",S3="[object DataView]",FSe=sh(MC),$Se=sh(NC),LSe=sh(FC),BSe=sh($C),jSe=sh(LC),_l=_L;(MC&&_l(new MC(new ArrayBuffer(1)))!=S3||NC&&_l(new NC)!=g3||FC&&_l(FC.resolve())!=v3||$C&&_l(new $C)!=y3||LC&&_l(new LC)!=b3)&&(_l=function(t){var e=_L(t),n=e==NSe?t.constructor:void 0,r=n?sh(n):"";if(r)switch(r){case FSe:return S3;case $Se:return g3;case LSe:return v3;case BSe:return y3;case jSe:return b3}return e});var qb=_l,HS=eb,qSe=CL,zSe=j1e,HSe=bSe,x3=qb,w3=vi,C3=gc,USe=aR,VSe=1,E3="[object Arguments]",T3="[object Array]",tg="[object Object]",WSe=Object.prototype,R3=WSe.hasOwnProperty;function GSe(t,e,n,r,i,s){var a=w3(t),o=w3(e),l=a?T3:x3(t),c=o?T3:x3(e);l=l==E3?tg:l,c=c==E3?tg:c;var u=l==tg,d=c==tg,h=l==c;if(h&&C3(t)){if(!C3(e))return!1;a=!0,u=!1}if(h&&!u)return s||(s=new HS),a||USe(t)?qSe(t,e,n,r,i,s):zSe(t,e,l,n,r,i,s);if(!(n&VSe)){var p=u&&R3.call(t,"__wrapped__"),f=d&&R3.call(e,"__wrapped__");if(p||f){var m=p?t.value():t,g=f?e.value():e;return s||(s=new HS),i(m,g,n,r,s)}}return h?(s||(s=new HS),HSe(t,e,n,r,i,s)):!1}var KSe=GSe,YSe=KSe,k3=Ns;function AL(t,e,n,r,i){return t===e?!0:t==null||e==null||!k3(t)&&!k3(e)?t!==t&&e!==e:YSe(t,e,n,r,AL,i)}var BR=AL,JSe=BR;function XSe(t,e){return JSe(t,e)}var QSe=XSe,ZSe=im,exe=BF,txe=nh;function nxe(t,e,n){for(var r=-1,i=e.length,s={};++r<i;){var a=e[r],o=ZSe(t,a);n(o,a)&&exe(s,txe(a,t),o)}return s}var rxe=nxe;function ixe(t,e){return t!=null&&e in Object(t)}var sxe=ixe,axe=nh,oxe=tb,lxe=vi,cxe=nb,uxe=sR,dxe=rh;function hxe(t,e,n){e=axe(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=dxe(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&uxe(i)&&cxe(a,i)&&(lxe(t)||oxe(t)))}var fxe=hxe,pxe=sxe,mxe=fxe;function gxe(t,e){return t!=null&&mxe(t,e,pxe)}var OL=gxe,vxe=rxe,yxe=OL;function bxe(t,e){return vxe(t,e,function(n,r){return yxe(t,r)})}var Sxe=bxe,P3=Jd,xxe=tb,wxe=vi,_3=P3?P3.isConcatSpreadable:void 0;function Cxe(t){return wxe(t)||xxe(t)||!!(_3&&t&&t[_3])}var Exe=Cxe,Txe=$R,Rxe=Exe;function DL(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=Rxe),i||(i=[]);++s<a;){var o=t[s];e>0&&n(o)?e>1?DL(o,e-1,n,r,i):Txe(i,o):r||(i[i.length]=o)}return i}var IL=DL,kxe=IL;function Pxe(t){var e=t==null?0:t.length;return e?kxe(t,1):[]}var _xe=Pxe,Axe=_xe,Oxe=IF,Dxe=MF;function Ixe(t){return Dxe(Oxe(t,void 0,Axe),t+"")}var ML=Ixe,Mxe=Sxe,Nxe=ML,Fxe=Nxe(function(t,e){return t==null?{}:Mxe(t,e)}),$xe=Fxe;function tr(){return tr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tr.apply(this,arguments)}function NL(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var sl={fill:z.string,fontSize:z.number,fontFamily:z.string},Lxe=z.shape({domain:z.shape({line:z.shape({stroke:z.string.isRequired,strokeWidth:z.number.isRequired,strokeDasharray:z.string}).isRequired}).isRequired,ticks:z.shape({line:z.shape({stroke:z.string.isRequired,strokeWidth:z.number.isRequired,strokeDasharray:z.string}).isRequired,text:z.shape(tr({},sl)).isRequired}).isRequired,legend:z.shape({text:z.shape(tr({},sl)).isRequired}).isRequired}),Bxe=z.shape({line:z.shape({stroke:z.string.isRequired,strokeWidth:z.number.isRequired,strokeDasharray:z.string}).isRequired}),jxe=z.shape({hidden:z.shape({symbol:z.shape({fill:z.string.isRequired,opacity:z.number}).isRequired,text:z.shape(tr({},sl,{opacity:z.number})).isRequired}).isRequired,text:z.shape(tr({},sl)).isRequired}),qxe=z.shape({text:z.shape(tr({},sl)).isRequired}),zxe=z.shape({text:z.shape(tr({},sl)).isRequired}),Hxe=z.shape({text:z.shape(tr({},sl)).isRequired}),Uxe=z.shape({line:z.shape({stroke:z.string.isRequired,strokeWidth:z.number.isRequired,strokeDasharray:z.string}).isRequired}),Vxe=z.shape({text:z.shape(tr({},sl,{outlineWidth:z.number.isRequired,outlineColor:z.string.isRequired})).isRequired,link:z.shape({stroke:z.string.isRequired,strokeWidth:z.number.isRequired,outlineWidth:z.number.isRequired,outlineColor:z.string.isRequired}).isRequired,outline:z.shape({stroke:z.string.isRequired,strokeWidth:z.number.isRequired,outlineWidth:z.number.isRequired,outlineColor:z.string.isRequired}).isRequired,symbol:z.shape({fill:z.string.isRequired,outlineWidth:z.number.isRequired,outlineColor:z.string.isRequired}).isRequired});z.shape({background:z.string.isRequired,fontFamily:z.string.isRequired,fontSize:z.number.isRequired,textColor:z.string.isRequired,axis:Lxe.isRequired,grid:Bxe.isRequired,legends:jxe.isRequired,labels:qxe.isRequired,dots:zxe.isRequired,markers:Hxe,crosshair:Uxe.isRequired,annotations:Vxe.isRequired});var Wxe={background:"transparent",fontFamily:"sans-serif",fontSize:11,textColor:"#333333",axis:{domain:{line:{stroke:"transparent",strokeWidth:1}},ticks:{line:{stroke:"#777777",strokeWidth:1},text:{}},legend:{text:{fontSize:12}}},grid:{line:{stroke:"#dddddd",strokeWidth:1}},legends:{hidden:{symbol:{fill:"#333333",opacity:.6},text:{fill:"#333333",opacity:.6}},text:{},ticks:{line:{stroke:"#777777",strokeWidth:1},text:{fontSize:10}},title:{text:{}}},labels:{text:{}},markers:{lineColor:"#000000",lineStrokeWidth:1,text:{}},dots:{text:{}},tooltip:{container:{background:"white",color:"inherit",fontSize:"inherit",borderRadius:"2px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.25)",padding:"5px 9px"},basic:{whiteSpace:"pre",display:"flex",alignItems:"center"},chip:{marginRight:7},table:{},tableCell:{padding:"3px 5px"},tableCellValue:{fontWeight:"bold"}},crosshair:{line:{stroke:"#000000",strokeWidth:1,strokeOpacity:.75,strokeDasharray:"6 6"}},annotations:{text:{fontSize:13,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},link:{stroke:"#000000",strokeWidth:1,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},outline:{fill:"none",stroke:"#000000",strokeWidth:2,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},symbol:{fill:"#000000",outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1}}},Gxe=["axis.ticks.text","axis.legend.text","legends.title.text","legends.text","legends.ticks.text","legends.title.text","labels.text","dots.text","markers.text","annotations.text"],Kxe=function(t,e){var n=FF({},t,e);return Gxe.forEach(function(r){ts(n,r+".fontFamily")===void 0&&jl(n,r+".fontFamily",n.fontFamily),ts(n,r+".fontSize")===void 0&&jl(n,r+".fontSize",n.fontSize),ts(n,r+".fill")===void 0&&jl(n,r+".fill",n.textColor)}),n},FL=P.createContext(),jR=function(t){var e=t.children,n=t.animate,r=t.stiffness,i=t.damping,s=t.config,a=P.useMemo(function(){var o=Gge(s)?KT[s]:s;return{animate:n,springConfig:{stiffness:r,damping:i},config:o}},[n,r,i,s]);return S.jsx(FL.Provider,{value:a,children:e})},ng={animate:z.bool,motionStiffness:z.number,motionDamping:z.number,motionConfig:z.oneOfType([z.oneOf(Object.keys(KT)),z.shape({mass:z.number,tension:z.number,friction:z.number,clamp:z.bool,precision:z.number,velocity:z.number,duration:z.number,easing:z.func})])};jR.propTypes={children:z.node.isRequired,animate:ng.animate,stiffness:ng.motionStiffness,damping:ng.motionDamping,config:ng.motionConfig};var Yxe={animate:!0,stiffness:90,damping:15,config:"default"};jR.defaultProps=Yxe;var yi=function(){return P.useContext(FL)},Jxe=function(t){var e=yi(),n=e.animate,r=e.config,i=function(o){var l=P.useRef();return P.useEffect(function(){l.current=o},[o]),l.current}(t),s=P.useMemo(function(){return UF(i,t)},[i,t]),a=ho({from:{value:0},to:{value:1},reset:!0,config:r,immediate:!n}).value;return rl(a,s)},Xxe={nivo:["#d76445","#f47560","#e8c1a0","#97e3d5","#61cdbb","#00b0a7"],BrBG:qe(db),PRGn:qe(hb),PiYG:qe(fb),PuOr:qe(pb),RdBu:qe(mb),RdGy:qe(gb),RdYlBu:qe(vb),RdYlGn:qe(yb),spectral:qe(bb),blues:qe(Db),greens:qe(Ib),greys:qe(Mb),oranges:qe($b),purples:qe(Nb),reds:qe(Fb),BuGn:qe(Sb),BuPu:qe(xb),GnBu:qe(wb),OrRd:qe(Cb),PuBuGn:qe(Eb),PuBu:qe(Tb),PuRd:qe(Rb),RdPu:qe(kb),YlGnBu:qe(Pb),YlGn:qe(_b),YlOrBr:qe(Ab),YlOrRd:qe(Ob)},Qxe=Object.keys(Xxe);qe(db),qe(hb),qe(fb),qe(pb),qe(mb),qe(gb),qe(vb),qe(yb),qe(bb),qe(Db),qe(Ib),qe(Mb),qe($b),qe(Nb),qe(Fb),qe(Sb),qe(xb),qe(wb),qe(Cb),qe(Eb),qe(Tb),qe(Rb),qe(kb),qe(Pb),qe(_b),qe(Ab),qe(Ob);z.oneOfType([z.oneOf(Qxe),z.func,z.arrayOf(z.string)]);var Zxe={basis:Lbe,basisClosed:Bbe,basisOpen:jbe,bundle:qbe,cardinal:zbe,cardinalClosed:Hbe,cardinalOpen:Ube,catmullRom:Vbe,catmullRomClosed:Wbe,catmullRomOpen:Gbe,linear:cL,linearClosed:Kbe,monotoneX:Ybe,monotoneY:Jbe,natural:Xbe,step:Qbe,stepAfter:e1e,stepBefore:Zbe},zb=Object.keys(Zxe);z.oneOf(zb);zb.filter(function(t){return t.endsWith("Closed")});oL(zb,"bundle","basisClosed","basisOpen","cardinalClosed","cardinalOpen","catmullRomClosed","catmullRomOpen","linearClosed");var ewe=oL(zb,"bundle","basisClosed","basisOpen","cardinalClosed","cardinalOpen","catmullRomClosed","catmullRomOpen","linearClosed");z.oneOf(ewe);z.arrayOf(z.shape({id:z.string.isRequired})).isRequired,z.arrayOf(z.shape({id:z.string.isRequired,match:z.oneOfType([z.oneOf(["*"]),z.object,z.func]).isRequired})).isRequired;var twe={ascending:xL,descending:l1e,insideOut:c1e,none:_d,reverse:u1e},nwe=Object.keys(twe);z.oneOf(nwe);var rwe={expand:r1e,diverging:SL,none:Pd,silhouette:i1e,wiggle:s1e},iwe=Object.keys(rwe);z.oneOf(iwe);z.shape({top:z.number,right:z.number,bottom:z.number,left:z.number}).isRequired;var swe=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];z.oneOf(swe);ql(PR);var awe={top:0,right:0,bottom:0,left:0},qR=function(t,e,n){return n===void 0&&(n={}),P.useMemo(function(){var r=tr({},awe,n);return{margin:r,innerWidth:t-r.left-r.right,innerHeight:e-r.top-r.bottom,outerWidth:t,outerHeight:e}},[t,e,n.top,n.right,n.bottom,n.left])},$L=function(){var t=P.useRef(null),e=P.useState({left:0,top:0,width:0,height:0}),n=e[0],r=e[1],i=P.useState(function(){return typeof window<"u"?new ResizeObserver(function(s){var a=s[0];return r(a.contentRect)}):null})[0];return P.useEffect(function(){return t.current&&i!==null&&i.observe(t.current),function(){i!==null&&i.disconnect()}},[]),[t,n]},owe=function(t){return P.useMemo(function(){return Kxe(Wxe,t)},[t])},lwe=function(t){return typeof t=="function"?t:typeof t=="string"?t.indexOf("time:")===0?ub(t.slice("5")):sm(t):function(e){return""+e}},zR=function(t){return P.useMemo(function(){return lwe(t)},[t])},LL=P.createContext(),cwe={},BL=function(t){var e=t.theme,n=e===void 0?cwe:e,r=t.children,i=owe(n);return S.jsx(LL.Provider,{value:i,children:r})};BL.propTypes={children:z.node.isRequired,theme:z.object};var an=function(){return P.useContext(LL)},jL=function(t){var e=t.children,n=t.condition,r=t.wrapper;return n?P.cloneElement(r,{},e):e};jL.propTypes={children:z.node.isRequired,condition:z.bool.isRequired,wrapper:z.element.isRequired};var uwe={position:"relative"},Hb=function(t){var e=t.children,n=t.theme,r=t.renderWrapper,i=r===void 0||r,s=t.isInteractive,a=s===void 0||s,o=t.animate,l=t.motionStiffness,c=t.motionDamping,u=t.motionConfig,d=P.useRef(null);return S.jsx(BL,{theme:n,children:S.jsx(jR,{animate:o,stiffness:l,damping:c,config:u,children:S.jsx(ece,{container:d,children:S.jsxs(jL,{condition:i,wrapper:S.jsx("div",{style:uwe,ref:d}),children:[e,a&&S.jsx(Zle,{})]})})})})};Hb.propTypes={children:z.element.isRequired,isInteractive:z.bool,renderWrapper:z.bool,theme:z.object,animate:z.bool,motionStiffness:z.number,motionDamping:z.number,motionConfig:z.string};z.func.isRequired,z.bool,z.bool,z.object.isRequired,z.bool.isRequired,z.number,z.number,z.string;var Ub=function(t){var e=t.children,n=$L(),r=n[0],i=n[1],s=i.width>0&&i.height>0;return S.jsx("div",{ref:r,style:{width:"100%",height:"100%"},children:s&&e({width:i.width,height:i.height})})};Ub.propTypes={children:z.func.isRequired};var dwe=["id","colors"],qL=function(t){var e=t.id,n=t.colors,r=NL(t,dwe);return S.jsx("linearGradient",tr({id:e,x1:0,x2:0,y1:0,y2:1},r,{children:n.map(function(i){var s=i.offset,a=i.color,o=i.opacity;return S.jsx("stop",{offset:s+"%",stopColor:a,stopOpacity:o!==void 0?o:1},s)})}))};qL.propTypes={id:z.string.isRequired,colors:z.arrayOf(z.shape({offset:z.number.isRequired,color:z.string.isRequired,opacity:z.number})).isRequired,gradientTransform:z.string};var zL={linearGradient:qL},jg=P.memo(function(t){var e=t.id,n=t.background,r=t.color,i=t.size,s=t.padding,a=t.stagger,o=i+s,l=i/2,c=s/2;return a===!0&&(o=2*i+2*s),S.jsxs("pattern",{id:e,width:o,height:o,patternUnits:"userSpaceOnUse",children:[S.jsx("rect",{width:o,height:o,fill:n}),S.jsx("circle",{cx:c+l,cy:c+l,r:l,fill:r}),a&&S.jsx("circle",{cx:1.5*s+i+l,cy:1.5*s+i+l,r:l,fill:r})]})});jg.displayName="PatternDots",jg.propTypes={id:z.string.isRequired,color:z.string.isRequired,background:z.string.isRequired,size:z.number.isRequired,padding:z.number.isRequired,stagger:z.bool.isRequired},jg.defaultProps={color:"#000000",background:"#ffffff",size:4,padding:4,stagger:!1};var ns=function(t){return t*Math.PI/180},Vb=function(t){return 180*t/Math.PI},hwe=function(t){return t.startAngle+(t.endAngle-t.startAngle)/2},Xl=function(t,e){return{x:Math.cos(t)*e,y:Math.sin(t)*e}},fwe=function(t){var e=t%360;return e<0&&(e+=360),e},pwe={svg:{align:{left:"start",center:"middle",right:"end",start:"start",middle:"middle",end:"end"},baseline:{top:"text-before-edge",center:"central",bottom:"alphabetic"}},canvas:{align:{left:"left",center:"center",right:"right",start:"left",middle:"center",end:"right"},baseline:{top:"top",center:"middle",bottom:"bottom"}}},qg=P.memo(function(t){var e=t.id,n=t.spacing,r=t.rotation,i=t.background,s=t.color,a=t.lineWidth,o=Math.round(r)%360,l=Math.abs(n);o>180?o-=360:o>90?o-=180:o<-180?o+=360:o<-90&&(o+=180);var c,u=l,d=l;return o===0?c=`
                M 0 0 L `+u+` 0
                M 0 `+d+" L "+u+" "+d+`
            `:o===90?c=`
                M 0 0 L 0 `+d+`
                M `+u+" 0 L "+u+" "+d+`
            `:(u=Math.abs(l/Math.sin(ns(o))),d=l/Math.sin(ns(90-o)),c=o>0?`
                    M 0 `+-d+" L "+2*u+" "+d+`
                    M `+-u+" "+-d+" L "+u+" "+d+`
                    M `+-u+" 0 L "+u+" "+2*d+`
                `:`
                    M `+-u+" "+d+" L "+u+" "+-d+`
                    M `+-u+" "+2*d+" L "+2*u+" "+-d+`
                    M 0 `+2*d+" L "+2*u+` 0
                `),S.jsxs("pattern",{id:e,width:u,height:d,patternUnits:"userSpaceOnUse",children:[S.jsx("rect",{width:u,height:d,fill:i,stroke:"rgba(255, 0, 0, 0.1)",strokeWidth:0}),S.jsx("path",{d:c,strokeWidth:a,stroke:s,strokeLinecap:"square"})]})});qg.displayName="PatternLines",qg.propTypes={id:z.string.isRequired,spacing:z.number.isRequired,rotation:z.number.isRequired,background:z.string.isRequired,color:z.string.isRequired,lineWidth:z.number.isRequired},qg.defaultProps={spacing:5,rotation:0,color:"#000000",background:"#ffffff",lineWidth:2};var zg=P.memo(function(t){var e=t.id,n=t.background,r=t.color,i=t.size,s=t.padding,a=t.stagger,o=i+s,l=s/2;return a===!0&&(o=2*i+2*s),S.jsxs("pattern",{id:e,width:o,height:o,patternUnits:"userSpaceOnUse",children:[S.jsx("rect",{width:o,height:o,fill:n}),S.jsx("rect",{x:l,y:l,width:i,height:i,fill:r}),a&&S.jsx("rect",{x:1.5*s+i,y:1.5*s+i,width:i,height:i,fill:r})]})});zg.displayName="PatternSquares",zg.propTypes={id:z.string.isRequired,color:z.string.isRequired,background:z.string.isRequired,size:z.number.isRequired,padding:z.number.isRequired,stagger:z.bool.isRequired},zg.defaultProps={color:"#000000",background:"#ffffff",size:4,padding:4,stagger:!1};var HL={patternDots:jg,patternLines:qg,patternSquares:zg},mwe=["type"],BC=tr({},zL,HL),UL=function(t){var e=t.defs;return!e||e.length<1?null:S.jsx("defs",{"aria-hidden":!0,children:e.map(function(n){var r=n.type,i=NL(n,mwe);return BC[r]?P.createElement(BC[r],tr({key:i.id},i)):null})})};UL.propTypes={defs:z.arrayOf(z.shape({type:z.oneOf(Object.keys(BC)).isRequired,id:z.string.isRequired}))};var gwe=P.memo(UL),HR=function(t){var e=t.width,n=t.height,r=t.margin,i=t.defs,s=t.children,a=t.role,o=t.ariaLabel,l=t.ariaLabelledBy,c=t.ariaDescribedBy,u=t.isFocusable,d=an();return S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:n,role:a,"aria-label":o,"aria-labelledby":l,"aria-describedby":c,focusable:u,tabIndex:u?0:void 0,children:[S.jsx(gwe,{defs:i}),S.jsx("rect",{width:e,height:n,fill:d.background}),S.jsx("g",{transform:"translate("+r.left+","+r.top+")",children:s})]})};HR.propTypes={width:z.number.isRequired,height:z.number.isRequired,margin:z.shape({top:z.number.isRequired,left:z.number.isRequired}).isRequired,defs:z.array,children:z.oneOfType([z.arrayOf(z.node),z.node]).isRequired,role:z.string,isFocusable:z.bool,ariaLabel:z.string,ariaLabelledBy:z.string,ariaDescribedBy:z.string};var VL=function(t){var e=t.size,n=t.color,r=t.borderWidth,i=t.borderColor;return S.jsx("circle",{r:e/2,fill:n,stroke:i,strokeWidth:r,style:{pointerEvents:"none"}})};VL.propTypes={size:z.number.isRequired,color:z.string.isRequired,borderWidth:z.number.isRequired,borderColor:z.string.isRequired};var vwe=P.memo(VL),WL=function(t){var e=t.x,n=t.y,r=t.symbol,i=r===void 0?vwe:r,s=t.size,a=t.datum,o=t.color,l=t.borderWidth,c=t.borderColor,u=t.label,d=t.labelTextAnchor,h=d===void 0?"middle":d,p=t.labelYOffset,f=p===void 0?-12:p,m=an(),g=yi(),v=g.animate,y=g.config,b=ho({transform:"translate("+e+", "+n+")",config:y,immediate:!v});return S.jsxs(Gt.g,{transform:b.transform,style:{pointerEvents:"none"},children:[P.createElement(i,{size:s,color:o,datum:a,borderWidth:l,borderColor:c}),u&&S.jsx("text",{textAnchor:h,y:f,style:m.dots.text,children:u})]})};WL.propTypes={x:z.number.isRequired,y:z.number.isRequired,datum:z.object.isRequired,size:z.number.isRequired,color:z.string.isRequired,borderWidth:z.number.isRequired,borderColor:z.string.isRequired,symbol:z.oneOfType([z.func,z.object]),label:z.oneOfType([z.string,z.number]),labelTextAnchor:z.oneOf(["start","middle","end"]),labelYOffset:z.number};P.memo(WL);var jC=function(t){var e=t.width,n=t.height,r=t.axis,i=t.scale,s=t.value,a=t.lineStyle,o=t.textStyle,l=t.legend,c=t.legendPosition,u=t.legendOffsetX,d=t.legendOffsetY,h=t.legendOrientation,p=an(),f=0,m=0,g=0,v=0;r==="y"?(g=i(s),m=e):(f=i(s),v=n);var y=null;if(l){var b=function(C){var R=C.axis,w=C.width,E=C.height,k=C.position,T=C.offsetX,_=C.offsetY,D=C.orientation,I=0,M=0,A=D==="vertical"?-90:0,O="start";if(R==="x")switch(k){case"top-left":I=-T,M=_,O="end";break;case"top":M=-_,O=D==="horizontal"?"middle":"start";break;case"top-right":I=T,M=_,O=D==="horizontal"?"start":"end";break;case"right":I=T,M=E/2,O=D==="horizontal"?"start":"middle";break;case"bottom-right":I=T,M=E-_,O="start";break;case"bottom":M=E+_,O=D==="horizontal"?"middle":"end";break;case"bottom-left":M=E-_,I=-T,O=D==="horizontal"?"end":"start";break;case"left":I=-T,M=E/2,O=D==="horizontal"?"end":"middle"}else switch(k){case"top-left":I=T,M=-_,O="start";break;case"top":I=w/2,M=-_,O=D==="horizontal"?"middle":"start";break;case"top-right":I=w-T,M=-_,O=D==="horizontal"?"end":"start";break;case"right":I=w+T,O=D==="horizontal"?"start":"middle";break;case"bottom-right":I=w-T,M=_,O="end";break;case"bottom":I=w/2,M=_,O=D==="horizontal"?"middle":"end";break;case"bottom-left":I=T,M=_,O=D==="horizontal"?"start":"end";break;case"left":I=-T,O=D==="horizontal"?"end":"middle"}return{x:I,y:M,rotation:A,textAnchor:O}}({axis:r,width:e,height:n,position:c,offsetX:u,offsetY:d,orientation:h});y=S.jsx("text",{transform:"translate("+b.x+", "+b.y+") rotate("+b.rotation+")",textAnchor:b.textAnchor,dominantBaseline:"central",style:o,children:l})}return S.jsxs("g",{transform:"translate("+f+", "+g+")",children:[S.jsx("line",{x1:0,x2:m,y1:0,y2:v,stroke:p.markers.lineColor,strokeWidth:p.markers.lineStrokeWidth,style:a}),y]})};jC.propTypes={width:z.number.isRequired,height:z.number.isRequired,axis:z.oneOf(["x","y"]).isRequired,scale:z.func.isRequired,value:z.oneOfType([z.number,z.string,z.instanceOf(Date)]).isRequired,lineStyle:z.object,textStyle:z.object,legend:z.string,legendPosition:z.oneOf(["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"]),legendOffsetX:z.number.isRequired,legendOffsetY:z.number.isRequired,legendOrientation:z.oneOf(["horizontal","vertical"]).isRequired},jC.defaultProps={legendPosition:"top-right",legendOffsetX:14,legendOffsetY:14,legendOrientation:"horizontal"};var ywe=P.memo(jC),GL=function(t){var e=t.markers,n=t.width,r=t.height,i=t.xScale,s=t.yScale;return e&&e.length!==0?e.map(function(a,o){return S.jsx(ywe,tr({},a,{width:n,height:r,scale:a.axis==="y"?s:i}),o)}):null};GL.propTypes={width:z.number.isRequired,height:z.number.isRequired,xScale:z.func.isRequired,yScale:z.func.isRequired,markers:z.arrayOf(z.shape({axis:z.oneOf(["x","y"]).isRequired,value:z.oneOfType([z.number,z.string,z.instanceOf(Date)]).isRequired,lineStyle:z.object,textStyle:z.object}))};var bwe=P.memo(GL),KL=function(t){return em(t)?t:function(e){return ts(e,t)}},Ql=function(t){return P.useMemo(function(){return KL(t)},[t])},Swe=function(t,e,n,r,i,s){return t<=i&&i<=t+n&&e<=s&&s<=e+r},US=function(t,e){var n=e.clientX,r=e.clientY,i=t.getBoundingClientRect(),s=t.getBBox(),a=s.width===i.width?1:s.width/i.width;return[(n-i.left)*a,(r-i.top)*a]},xwe=Object.keys(zL),wwe=Object.keys(HL),Cwe=function(t,e,n){if(t==="*")return!0;if(em(t))return t(e);if(tm(t)){var r=n?ts(e,n):e;return QSe($xe(r,Object.keys(t)),t)}return!1},YL=function(t,e,n,r){var i=r===void 0?{}:r,s=i.dataKey,a=i.colorKey,o=a===void 0?"color":a,l=i.targetKey,c=l===void 0?"fill":l,u=[],d={};return t.length&&e.length&&(u=[].concat(t),e.forEach(function(h){for(var p=function(m){var g=n[m],v=g.id,y=g.match;if(Cwe(y,h,s)){var b=t.find(function(D){return D.id===v});if(b){if(wwe.includes(b.type))if(b.background==="inherit"||b.color==="inherit"){var C=ts(h,o),R=b.background,w=b.color,E=v;b.background==="inherit"&&(E=E+".bg."+C,R=C),b.color==="inherit"&&(E=E+".fg."+C,w=C),jl(h,c,"url(#"+E+")"),d[E]||(u.push(tr({},b,{id:E,background:R,color:w})),d[E]=1)}else jl(h,c,"url(#"+v+")");else if(xwe.includes(b.type))if(b.colors.map(function(D){return D.color}).includes("inherit")){var k=ts(h,o),T=v,_=tr({},b,{colors:b.colors.map(function(D,I){return D.color!=="inherit"?D:(T=T+"."+I+"."+k,tr({},D,{color:D.color==="inherit"?k:D.color}))})});_.id=T,jl(h,c,"url(#"+T+")"),d[T]||(u.push(_),d[T]=1)}else jl(h,c,"url(#"+v+")")}return"break"}},f=0;f<n.length&&p(f)!=="break";f++);})),u};function Ewe(){}var Twe=Ewe,VS=PL,Rwe=Twe,kwe=FR,Pwe=1/0,_we=VS&&1/kwe(new VS([,-0]))[1]==Pwe?function(t){return new VS(t)}:Rwe,Awe=_we,Owe=_R,Dwe=sL,Iwe=aL,Mwe=AR,Nwe=Awe,Fwe=FR,$we=200;function Lwe(t,e,n){var r=-1,i=Dwe,s=t.length,a=!0,o=[],l=o;if(n)a=!1,i=Iwe;else if(s>=$we){var c=e?null:Nwe(t);if(c)return Fwe(c);a=!1,i=Mwe,l=new Owe}else l=e?[]:o;e:for(;++r<s;){var u=t[r],d=e?e(u):u;if(u=n||u!==0?u:0,a&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;e&&l.push(d),o.push(u)}else i(l,d,n)||(l!==o&&l.push(d),o.push(u))}return o}var Bwe=Lwe,jwe=eb,qwe=BR,zwe=1,Hwe=2;function Uwe(t,e,n,r){var i=n.length,s=i,a=!r;if(t==null)return!s;for(t=Object(t);i--;){var o=n[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=n[i];var l=o[0],c=t[l],u=o[1];if(a&&o[2]){if(c===void 0&&!(l in t))return!1}else{var d=new jwe;if(r)var h=r(c,u,l,t,e,d);if(!(h===void 0?qwe(u,c,zwe|Hwe,r,d):h))return!1}}return!0}var Vwe=Uwe,Wwe=_a;function Gwe(t){return t===t&&!Wwe(t)}var JL=Gwe,Kwe=JL,Ywe=am;function Jwe(t){for(var e=Ywe(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Kwe(i)]}return e}var Xwe=Jwe;function Qwe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var XL=Qwe,Zwe=Vwe,eCe=Xwe,tCe=XL;function nCe(t){var e=eCe(t);return e.length==1&&e[0][2]?tCe(e[0][0],e[0][1]):function(n){return n===t||Zwe(n,t,e)}}var rCe=nCe,iCe=BR,sCe=ts,aCe=OL,oCe=cR,lCe=JL,cCe=XL,uCe=rh,dCe=1,hCe=2;function fCe(t,e){return oCe(t)&&lCe(e)?cCe(uCe(t),e):function(n){var r=sCe(n,t);return r===void 0&&r===e?aCe(n,t):iCe(e,r,dCe|hCe)}}var pCe=fCe;function mCe(t){return function(e){return e==null?void 0:e[t]}}var gCe=mCe,vCe=im;function yCe(t){return function(e){return vCe(e,t)}}var bCe=yCe,SCe=gCe,xCe=bCe,wCe=cR,CCe=rh;function ECe(t){return wCe(t)?SCe(CCe(t)):xCe(t)}var TCe=ECe,RCe=rCe,kCe=pCe,PCe=rb,_Ce=vi,ACe=TCe;function OCe(t){return typeof t=="function"?t:t==null?PCe:typeof t=="object"?_Ce(t)?kCe(t[0],t[1]):RCe(t):ACe(t)}var UR=OCe,DCe=UR,ICe=Bwe;function MCe(t,e){return t&&t.length?ICe(t,DCe(e)):[]}var A3=MCe,NCe=xF,FCe=am;function $Ce(t,e){return t&&NCe(t,e,FCe)}var LCe=$Ce,BCe=eh;function jCe(t,e){return function(n,r){if(n==null)return n;if(!BCe(n))return t(n,r);for(var i=n.length,s=e?i:-1,a=Object(n);(e?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}var qCe=jCe,zCe=LCe,HCe=qCe,UCe=HCe(zCe),QL=UCe,VCe=QL,WCe=eh;function GCe(t,e){var n=-1,r=WCe(t)?Array(t.length):[];return VCe(t,function(i,s,a){r[++n]=e(i,s,a)}),r}var KCe=GCe;function YCe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var JCe=YCe,O3=ib;function XCe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,s=O3(t),a=e!==void 0,o=e===null,l=e===e,c=O3(e);if(!o&&!c&&!s&&t>e||s&&a&&l&&!o&&!c||r&&a&&l||!n&&l||!i)return 1;if(!r&&!s&&!c&&t<e||c&&n&&i&&!r&&!s||o&&n&&i||!a&&i||!l)return-1}return 0}var QCe=XCe,ZCe=QCe;function e2e(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,a=i.length,o=n.length;++r<a;){var l=ZCe(i[r],s[r]);if(l){if(r>=o)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var t2e=e2e,WS=sb,n2e=im,r2e=UR,i2e=KCe,s2e=JCe,a2e=nm,o2e=t2e,l2e=rb,c2e=vi;function u2e(t,e,n){e.length?e=WS(e,function(s){return c2e(s)?function(a){return n2e(a,s.length===1?s[0]:s)}:s}):e=[l2e];var r=-1;e=WS(e,a2e(r2e));var i=i2e(t,function(s,a,o){var l=WS(e,function(c){return c(s)});return{criteria:l,index:++r,value:s}});return s2e(i,function(s,a){return o2e(s,a,n)})}var d2e=u2e,h2e=IL,f2e=d2e,p2e=lR,D3=NF;p2e(function(t,e){if(t==null)return[];var n=e.length;return n>1&&D3(t,e[0],e[1])?e=[]:n>2&&D3(e[0],e[1],e[2])&&(e=[e[0]]),f2e(t,h2e(e,1),[])});var I3=vc;I3&&I3.isDate;var su=[function(t){return t.setMilliseconds(0)},function(t){return t.setSeconds(0)},function(t){return t.setMinutes(0)},function(t){return t.setHours(0)},function(t){return t.setDate(1)},function(t){return t.setMonth(0)}],m2e={millisecond:[],second:su.slice(0,1),minute:su.slice(0,2),hour:su.slice(0,3),day:su.slice(0,4),month:su.slice(0,5),year:su.slice(0,6)},g2e=function(t){return function(e){return m2e[t].forEach(function(n){n(e)}),e}},v2e=function(t){var e=t.format,n=e===void 0?"native":e,r=t.precision,i=r===void 0?"millisecond":r,s=t.useUTC,a=s===void 0||s,o=g2e(i);return function(l){if(l===void 0)return l;if(n==="native"||l instanceof Date)return o(l);var c=a?J$(n):K$(n);return o(c(l))}},y2e=function(t,e,n,r){var i,s,a,o,l=t.min,c=l===void 0?0:l,u=t.max,d=u===void 0?"auto":u,h=t.stacked,p=h!==void 0&&h,f=t.reverse,m=f!==void 0&&f,g=t.clamp,v=g!==void 0&&g,y=t.nice,b=y!==void 0&&y;c==="auto"?i=p===!0?(s=e.minStacked)!=null?s:0:e.min:i=c,d==="auto"?a=p===!0?(o=e.maxStacked)!=null?o:0:e.max:a=d;var C=ZF().rangeRound(r==="x"?[0,n]:[n,0]).domain(m?[a,i]:[i,a]).clamp(v);return b===!0?C.nice():typeof b=="number"&&C.nice(b),b2e(C,p)},b2e=function(t,e){e===void 0&&(e=!1);var n=t;return n.type="linear",n.stacked=e,n},S2e=function(t,e,n){var r=t0e().range([0,n]).domain(e.all);return r.type="point",r},x2e=function(t,e,n,r){var i=t.round,s=i===void 0||i,a=vR().range(r==="x"?[0,n]:[n,0]).domain(e.all).round(s);return w2e(a)},w2e=function(t){var e=t;return e.type="band",e},C2e=function(t,e,n){var r,i,s=t.format,a=s===void 0?"native":s,o=t.precision,l=o===void 0?"millisecond":o,c=t.min,u=c===void 0?"auto":c,d=t.max,h=d===void 0?"auto":d,p=t.useUTC,f=p===void 0||p,m=t.nice,g=m!==void 0&&m,v=v2e({format:a,precision:l,useUTC:f});r=u==="auto"?v(e.min):a!=="native"?v(u):u,i=h==="auto"?v(e.max):a!=="native"?v(h):h;var y=f?Zve():Qve();y.range([0,n]),r&&i&&y.domain([r,i]),g===!0?y.nice():typeof g!="object"&&typeof g!="number"||y.nice(g);var b=y;return b.type="time",b.useUTC=f,b},E2e=function(t,e,n,r){var i,s=t.base,a=s===void 0?10:s,o=t.min,l=o===void 0?"auto":o,c=t.max,u=c===void 0?"auto":c;if(e.all.some(function(m){return m===0}))throw new Error("a log scale domain must not include or cross zero");var d,h,p=!1;if(e.all.filter(function(m){return m!=null}).forEach(function(m){p||(i===void 0?i=Math.sign(m):Math.sign(m)!==i&&(p=!0))}),p)throw new Error("a log scale domain must be strictly-positive or strictly-negative");d=l==="auto"?e.min:l,h=u==="auto"?e.max:u;var f=t$().domain([d,h]).rangeRound(r==="x"?[0,n]:[n,0]).base(a).nice();return f.type="log",f},T2e=function(t,e,n,r){var i,s,a=t.constant,o=a===void 0?1:a,l=t.min,c=l===void 0?"auto":l,u=t.max,d=u===void 0?"auto":u,h=t.reverse,p=h!==void 0&&h;i=c==="auto"?e.min:c,s=d==="auto"?e.max:d;var f=n$().constant(o).rangeRound(r==="x"?[0,n]:[n,0]).nice();p===!0?f.domain([s,i]):f.domain([i,s]);var m=f;return m.type="symlog",m};function VR(t,e,n,r){switch(t.type){case"linear":return y2e(t,e,n,r);case"point":return S2e(0,e,n);case"band":return x2e(t,e,n,r);case"time":return C2e(t,e,n);case"log":return E2e(t,e,n,r);case"symlog":return T2e(t,e,n,r);default:throw new Error("invalid scale spec")}}var ZL=function(t){var e=t.bandwidth();if(e===0)return t;var n=e/2;return t.round()&&(n=Math.round(n)),function(r){var i;return((i=t(r))!=null?i:0)+n}},e9={millisecond:[WA,WA],second:[GA,GA],minute:[H0e,W0e],hour:[U0e,G0e],day:[Ln(function(t){return t.setHours(0,0,0,0)},function(t,e){return t.setDate(t.getDate()+e)},function(t,e){return(e.getTime()-t.getTime())/864e5},function(t){return Math.floor(t.getTime()/864e5)}),Ln(function(t){return t.setUTCHours(0,0,0,0)},function(t,e){return t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e.getTime()-t.getTime())/864e5},function(t){return Math.floor(t.getTime()/864e5)})],week:[ev,tv],sunday:[ev,tv],monday:[gp,vp],tuesday:[A$,B$],wednesday:[O$,j$],thursday:[xc,wc],friday:[D$,q$],saturday:[I$,z$],month:[V0e,K0e],year:[Rd,kd]},R2e=Object.keys(e9),k2e=new RegExp("^every\\s*(\\d+)?\\s*("+R2e.join("|")+")s?$","i"),t9=function(t,e){if(Array.isArray(e))return e;if(typeof e=="string"&&"useUTC"in t){var n=e.match(k2e);if(n){var r=n[1],i=n[2],s=e9[i][t.useUTC?1:0];if(i==="day"){var a,o,l=t.domain(),c=l[0],u=l[1],d=new Date(u);return d.setDate(d.getDate()+1),(a=(o=s.every(Number(r??1)))==null?void 0:o.range(c,d))!=null?a:[]}if(r===void 0)return t.ticks(s);var h=s.every(Number(r));if(h)return t.ticks(h)}throw new Error("Invalid tickValues: "+e)}if("ticks"in t){if(e===void 0)return t.ticks();if(typeof(p=e)=="number"&&isFinite(p)&&Math.floor(p)===p)return t.ticks(e)}var p;return t.domain()};function Is(){return Is=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Is.apply(this,arguments)}var n9=function(t){var e,n=t.axis,r=t.scale,i=t.ticksPosition,s=t.tickValues,a=t.tickSize,o=t.tickPadding,l=t.tickRotation,c=t.engine,u=c===void 0?"svg":c,d=t9(r,s),h=pwe[u],p="bandwidth"in r?ZL(r):r,f={lineX:0,lineY:0},m={textX:0,textY:0},g=typeof document=="object"&&document.dir==="rtl",v=h.align.center,y=h.baseline.center;return n==="x"?(e=function(b){var C;return{x:(C=p(b))!=null?C:0,y:0}},f.lineY=a*(i==="after"?1:-1),m.textY=(a+o)*(i==="after"?1:-1),y=i==="after"?h.baseline.top:h.baseline.bottom,l===0?v=h.align.center:i==="after"&&l<0||i==="before"&&l>0?(v=h.align[g?"left":"right"],y=h.baseline.center):(i==="after"&&l>0||i==="before"&&l<0)&&(v=h.align[g?"right":"left"],y=h.baseline.center)):(e=function(b){var C;return{x:0,y:(C=p(b))!=null?C:0}},f.lineX=a*(i==="after"?1:-1),m.textX=(a+o)*(i==="after"?1:-1),v=i==="after"?h.align.left:h.align.right),{ticks:d.map(function(b){return Is({key:b instanceof Date?""+b.valueOf():""+b,value:b},e(b),f,m)}),textAlign:v,textBaseline:y}},r9=function(t,e){if(t===void 0||typeof t=="function")return t;if(e.type==="time"){var n=ub(t);return function(r){return n(r instanceof Date?r:new Date(r))}}return sm(t)},qC=function(t){var e,n=t.width,r=t.height,i=t.scale,s=t.axis,a=t.values,o=(e=a,(Array.isArray(e)?a:void 0)||t9(i,a)),l="bandwidth"in i?ZL(i):i,c=s==="x"?o.map(function(u){var d,h;return{key:u instanceof Date?""+u.valueOf():""+u,x1:(d=l(u))!=null?d:0,x2:(h=l(u))!=null?h:0,y1:0,y2:r}}):o.map(function(u){var d,h;return{key:u instanceof Date?""+u.valueOf():""+u,x1:0,x2:n,y1:(d=l(u))!=null?d:0,y2:(h=l(u))!=null?h:0}});return c},P2e=P.memo(function(t){var e,n=t.value,r=t.format,i=t.lineX,s=t.lineY,a=t.onClick,o=t.textBaseline,l=t.textAnchor,c=t.animatedProps,u=an(),d=(e=r==null?void 0:r(n))!=null?e:n,h=P.useMemo(function(){var p={opacity:c.opacity};return a?{style:Is({},p,{cursor:"pointer"}),onClick:function(f){return a(f,d)}}:{style:p}},[c.opacity,a,d]);return S.jsxs(Gt.g,Is({transform:c.transform},h,{children:[S.jsx("line",{x1:0,x2:i,y1:0,y2:s,style:u.axis.ticks.line}),S.jsx(Gt.text,{dominantBaseline:o,textAnchor:l,transform:c.textTransform,style:u.axis.ticks.text,children:d})]}))}),_2e=P.memo(function(t){var e=t.axis,n=t.scale,r=t.x,i=r===void 0?0:r,s=t.y,a=s===void 0?0:s,o=t.length,l=t.ticksPosition,c=t.tickValues,u=t.tickSize,d=u===void 0?5:u,h=t.tickPadding,p=h===void 0?5:h,f=t.tickRotation,m=f===void 0?0:f,g=t.format,v=t.renderTick,y=v===void 0?P2e:v,b=t.legend,C=t.legendPosition,R=C===void 0?"end":C,w=t.legendOffset,E=w===void 0?0:w,k=t.onClick,T=t.ariaHidden,_=an(),D=P.useMemo(function(){return r9(g,n)},[g,n]),I=n9({axis:e,scale:n,ticksPosition:l,tickValues:c,tickSize:d,tickPadding:p,tickRotation:m}),M=I.ticks,A=I.textAlign,O=I.textBaseline,L=null;if(b!==void 0){var F,B=0,j=0,q=0;e==="y"?(q=-90,B=E,R==="start"?(F="start",j=o):R==="middle"?(F="middle",j=o/2):R==="end"&&(F="end")):(j=E,R==="start"?F="start":R==="middle"?(F="middle",B=o/2):R==="end"&&(F="end",B=o)),L=S.jsx("text",{transform:"translate("+B+", "+j+") rotate("+q+")",textAnchor:F,style:Is({dominantBaseline:"central"},_.axis.legend.text),children:b})}var V=yi(),U=V.animate,ne=V.config,W=ho({transform:"translate("+i+","+a+")",lineX2:e==="x"?o:0,lineY2:e==="x"?0:o,config:ne,immediate:!U}),J=Kd(M,{keys:function(K){return K.key},initial:function(K){return{opacity:1,transform:"translate("+K.x+","+K.y+")",textTransform:"translate("+K.textX+","+K.textY+") rotate("+m+")"}},from:function(K){return{opacity:0,transform:"translate("+K.x+","+K.y+")",textTransform:"translate("+K.textX+","+K.textY+") rotate("+m+")"}},enter:function(K){return{opacity:1,transform:"translate("+K.x+","+K.y+")",textTransform:"translate("+K.textX+","+K.textY+") rotate("+m+")"}},update:function(K){return{opacity:1,transform:"translate("+K.x+","+K.y+")",textTransform:"translate("+K.textX+","+K.textY+") rotate("+m+")"}},leave:{opacity:0},config:ne,immediate:!U});return S.jsxs(Gt.g,{transform:W.transform,"aria-hidden":T,children:[J(function(K,Q,re,G){return P.createElement(y,Is({tickIndex:G,format:D,rotate:m,textBaseline:O,textAnchor:A,animatedProps:K},Q,k?{onClick:k}:{}))}),S.jsx(Gt.line,{style:_.axis.domain.line,x1:0,x2:W.lineX2,y1:0,y2:W.lineY2}),L]})}),A2e={ticksPosition:z.oneOf(["before","after"]),tickValues:z.oneOfType([z.number,z.arrayOf(z.oneOfType([z.number,z.string,z.instanceOf(Date)])),z.string]),tickSize:z.number,tickPadding:z.number,tickRotation:z.number,format:z.oneOfType([z.func,z.string]),renderTick:z.func,legend:z.node,legendPosition:z.oneOf(["start","middle","end"]),legendOffset:z.number,ariaHidden:z.bool};z.shape(A2e);var i9=["top","right","bottom","left"],O2e=P.memo(function(t){var e=t.xScale,n=t.yScale,r=t.width,i=t.height,s={top:t.top,right:t.right,bottom:t.bottom,left:t.left};return S.jsx(S.Fragment,{children:i9.map(function(a){var o=s[a];if(!o)return null;var l=a==="top"||a==="bottom";return S.jsx(_2e,Is({},o,{axis:l?"x":"y",x:a==="right"?r:0,y:a==="bottom"?i:0,scale:l?e:n,length:l?r:i,ticksPosition:a==="top"||a==="left"?"before":"after"}),a)})})}),D2e=P.memo(function(t){var e=t.animatedProps,n=an();return S.jsx(Gt.line,Is({},e,n.grid.line))}),M3=P.memo(function(t){var e=t.lines,n=yi(),r=n.animate,i=n.config,s=Kd(e,{keys:function(a){return a.key},initial:function(a){return{opacity:1,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2}},from:function(a){return{opacity:0,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2}},enter:function(a){return{opacity:1,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2}},update:function(a){return{opacity:1,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2}},leave:{opacity:0},config:i,immediate:!r});return S.jsx("g",{children:s(function(a,o){return P.createElement(D2e,Is({},o,{key:o.key,animatedProps:a}))})})}),I2e=P.memo(function(t){var e=t.width,n=t.height,r=t.xScale,i=t.yScale,s=t.xValues,a=t.yValues,o=P.useMemo(function(){return!!r&&qC({width:e,height:n,scale:r,axis:"x",values:s})},[r,s,e,n]),l=P.useMemo(function(){return!!i&&qC({width:e,height:n,scale:i,axis:"y",values:a})},[n,e,i,a]);return S.jsxs(S.Fragment,{children:[o&&S.jsx(M3,{lines:o}),l&&S.jsx(M3,{lines:l})]})}),M2e=function(t,e){var n,r=e.axis,i=e.scale,s=e.x,a=s===void 0?0:s,o=e.y,l=o===void 0?0:o,c=e.length,u=e.ticksPosition,d=e.tickValues,h=e.tickSize,p=h===void 0?5:h,f=e.tickPadding,m=f===void 0?5:f,g=e.tickRotation,v=g===void 0?0:g,y=e.format,b=e.legend,C=e.legendPosition,R=C===void 0?"end":C,w=e.legendOffset,E=w===void 0?0:w,k=e.theme,T=n9({axis:r,scale:i,ticksPosition:u,tickValues:d,tickSize:p,tickPadding:m,tickRotation:v,engine:"canvas"}),_=T.ticks,D=T.textAlign,I=T.textBaseline;t.save(),t.translate(a,l),t.textAlign=D,t.textBaseline=I,t.font=(k.axis.ticks.text.fontWeight?k.axis.ticks.text.fontWeight+" ":"")+k.axis.ticks.text.fontSize+"px "+k.axis.ticks.text.fontFamily,((n=k.axis.domain.line.strokeWidth)!=null?n:0)>0&&(t.lineWidth=Number(k.axis.domain.line.strokeWidth),t.lineCap="square",k.axis.domain.line.stroke&&(t.strokeStyle=k.axis.domain.line.stroke),t.beginPath(),t.moveTo(0,0),t.lineTo(r==="x"?c:0,r==="x"?0:c),t.stroke());var M=typeof y=="function"?y:function(B){return""+B};if(_.forEach(function(B){var j;((j=k.axis.ticks.line.strokeWidth)!=null?j:0)>0&&(t.lineWidth=Number(k.axis.ticks.line.strokeWidth),t.lineCap="square",k.axis.ticks.line.stroke&&(t.strokeStyle=k.axis.ticks.line.stroke),t.beginPath(),t.moveTo(B.x,B.y),t.lineTo(B.x+B.lineX,B.y+B.lineY),t.stroke());var q=M(B.value);t.save(),t.translate(B.x+B.textX,B.y+B.textY),t.rotate(ns(v)),k.axis.ticks.text.fill&&(t.fillStyle=k.axis.ticks.text.fill),t.fillText(String(q),0,0),t.restore()}),b!==void 0){var A=0,O=0,L=0,F="center";r==="y"?(L=-90,A=E,R==="start"?(F="start",O=c):R==="middle"?(F="center",O=c/2):R==="end"&&(F="end")):(O=E,R==="start"?F="start":R==="middle"?(F="center",A=c/2):R==="end"&&(F="end",A=c)),t.translate(A,O),t.rotate(ns(L)),t.font=(k.axis.legend.text.fontWeight?k.axis.legend.text.fontWeight+" ":"")+k.axis.legend.text.fontSize+"px "+k.axis.legend.text.fontFamily,k.axis.legend.text.fill&&(t.fillStyle=k.axis.legend.text.fill),t.textAlign=F,t.textBaseline="middle",t.fillText(b,0,0)}t.restore()},N2e=function(t,e){var n=e.xScale,r=e.yScale,i=e.width,s=e.height,a=e.top,o=e.right,l=e.bottom,c=e.left,u=e.theme,d={top:a,right:o,bottom:l,left:c};i9.forEach(function(h){var p=d[h];if(!p)return null;var f=h==="top"||h==="bottom",m=h==="top"||h==="left"?"before":"after",g=f?n:r,v=r9(p.format,g);M2e(t,Is({},p,{axis:f?"x":"y",x:h==="right"?i:0,y:h==="bottom"?s:0,scale:g,format:v,length:f?i:s,ticksPosition:m,theme:u}))})},N3=function(t,e){var n=e.width,r=e.height,i=e.scale,s=e.axis,a=e.values;qC({width:n,height:r,scale:i,axis:s,values:a}).forEach(function(o){t.beginPath(),t.moveTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.stroke()})};function F2e(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var $2e=F2e,L2e=th,B2e=am;function j2e(t,e){return t&&L2e(e,B2e(e),t)}var q2e=j2e,z2e=th,H2e=rm;function U2e(t,e){return t&&z2e(e,H2e(e),t)}var V2e=U2e,W2e=th,G2e=LR;function K2e(t,e){return W2e(t,G2e(t),e)}var Y2e=K2e,J2e=$R,X2e=rR,Q2e=LR,Z2e=RL,eEe=Object.getOwnPropertySymbols,tEe=eEe?function(t){for(var e=[];t;)J2e(e,Q2e(t)),t=X2e(t);return e}:Z2e,s9=tEe,nEe=th,rEe=s9;function iEe(t,e){return nEe(t,rEe(t),e)}var sEe=iEe,aEe=EL,oEe=s9,lEe=rm;function cEe(t){return aEe(t,lEe,oEe)}var a9=cEe,uEe=Object.prototype,dEe=uEe.hasOwnProperty;function hEe(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&dEe.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var fEe=hEe,pEe=nR;function mEe(t,e){var n=e?pEe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var gEe=mEe,vEe=/\w*$/;function yEe(t){var e=new t.constructor(t.source,vEe.exec(t));return e.lastIndex=t.lastIndex,e}var bEe=yEe,F3=Jd,$3=F3?F3.prototype:void 0,L3=$3?$3.valueOf:void 0;function SEe(t){return L3?Object(L3.call(t)):{}}var xEe=SEe,wEe=nR,CEe=gEe,EEe=bEe,TEe=xEe,REe=CF,kEe="[object Boolean]",PEe="[object Date]",_Ee="[object Map]",AEe="[object Number]",OEe="[object RegExp]",DEe="[object Set]",IEe="[object String]",MEe="[object Symbol]",NEe="[object ArrayBuffer]",FEe="[object DataView]",$Ee="[object Float32Array]",LEe="[object Float64Array]",BEe="[object Int8Array]",jEe="[object Int16Array]",qEe="[object Int32Array]",zEe="[object Uint8Array]",HEe="[object Uint8ClampedArray]",UEe="[object Uint16Array]",VEe="[object Uint32Array]";function WEe(t,e,n){var r=t.constructor;switch(e){case NEe:return wEe(t);case kEe:case PEe:return new r(+t);case FEe:return CEe(t,n);case $Ee:case LEe:case BEe:case jEe:case qEe:case zEe:case HEe:case UEe:case VEe:return REe(t,n);case _Ee:return new r;case AEe:case IEe:return new r(t);case OEe:return EEe(t);case DEe:return new r;case MEe:return TEe(t)}}var GEe=WEe,KEe=qb,YEe=Ns,JEe="[object Map]";function XEe(t){return YEe(t)&&KEe(t)==JEe}var QEe=XEe,ZEe=QEe,eTe=nm,B3=vc,j3=B3&&B3.isMap,tTe=j3?eTe(j3):ZEe,nTe=tTe,rTe=qb,iTe=Ns,sTe="[object Set]";function aTe(t){return iTe(t)&&rTe(t)==sTe}var oTe=aTe,lTe=oTe,cTe=nm,q3=vc,z3=q3&&q3.isSet,uTe=z3?cTe(z3):lTe,dTe=uTe,hTe=eb,fTe=$2e,pTe=oR,mTe=q2e,gTe=V2e,vTe=hp,yTe=EF,bTe=Y2e,STe=sEe,xTe=kL,wTe=a9,CTe=qb,ETe=fEe,TTe=GEe,RTe=RF,kTe=vi,PTe=gc,_Te=nTe,ATe=_a,OTe=dTe,DTe=am,ITe=rm,MTe=1,NTe=2,FTe=4,o9="[object Arguments]",$Te="[object Array]",LTe="[object Boolean]",BTe="[object Date]",jTe="[object Error]",l9="[object Function]",qTe="[object GeneratorFunction]",zTe="[object Map]",HTe="[object Number]",c9="[object Object]",UTe="[object RegExp]",VTe="[object Set]",WTe="[object String]",GTe="[object Symbol]",KTe="[object WeakMap]",YTe="[object ArrayBuffer]",JTe="[object DataView]",XTe="[object Float32Array]",QTe="[object Float64Array]",ZTe="[object Int8Array]",eRe="[object Int16Array]",tRe="[object Int32Array]",nRe="[object Uint8Array]",rRe="[object Uint8ClampedArray]",iRe="[object Uint16Array]",sRe="[object Uint32Array]",Ht={};Ht[o9]=Ht[$Te]=Ht[YTe]=Ht[JTe]=Ht[LTe]=Ht[BTe]=Ht[XTe]=Ht[QTe]=Ht[ZTe]=Ht[eRe]=Ht[tRe]=Ht[zTe]=Ht[HTe]=Ht[c9]=Ht[UTe]=Ht[VTe]=Ht[WTe]=Ht[GTe]=Ht[nRe]=Ht[rRe]=Ht[iRe]=Ht[sRe]=!0;Ht[jTe]=Ht[l9]=Ht[KTe]=!1;function Hg(t,e,n,r,i,s){var a,o=e&MTe,l=e&NTe,c=e&FTe;if(n&&(a=i?n(t,r,i,s):n(t)),a!==void 0)return a;if(!ATe(t))return t;var u=kTe(t);if(u){if(a=ETe(t),!o)return yTe(t,a)}else{var d=CTe(t),h=d==l9||d==qTe;if(PTe(t))return vTe(t,o);if(d==c9||d==o9||h&&!i){if(a=l||h?{}:RTe(t),!o)return l?STe(t,gTe(a,t)):bTe(t,mTe(a,t))}else{if(!Ht[d])return i?t:{};a=TTe(t,d,o)}}s||(s=new hTe);var p=s.get(t);if(p)return p;s.set(t,a),OTe(t)?t.forEach(function(g){a.add(Hg(g,e,n,g,t,s))}):_Te(t)&&t.forEach(function(g,v){a.set(v,Hg(g,e,n,v,t,s))});var f=c?l?wTe:xTe:l?ITe:DTe,m=u?void 0:f(t);return fTe(m||t,function(g,v){m&&(v=g,g=t[v]),pTe(a,v,Hg(g,e,n,v,t,s))}),a}var u9=Hg;function aRe(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var oRe=aRe,lRe=im,cRe=oRe;function uRe(t,e){return e.length<2?t:lRe(t,cRe(e,0,-1))}var dRe=uRe,hRe=nh,fRe=qe,pRe=dRe,mRe=rh;function gRe(t,e){return e=hRe(e,t),t=pRe(t,e),t==null||delete t[mRe(fRe(e))]}var vRe=gRe,yRe=tm;function bRe(t){return yRe(t)?void 0:t}var SRe=bRe,xRe=sb,wRe=u9,CRe=vRe,ERe=nh,TRe=th,RRe=SRe,kRe=ML,PRe=a9,_Re=1,ARe=2,ORe=4,DRe=kRe(function(t,e){var n={};if(t==null)return n;var r=!1;e=xRe(e,function(s){return s=ERe(s,t),r||(r=s.length>1),s}),TRe(t,PRe(t),n),r&&(n=wRe(n,_Re|ARe|ORe,RRe));for(var i=e.length;i--;)CRe(n,e[i]);return n}),d9=DRe,IRe=ml,MRe=Ns,NRe="[object Number]";function FRe(t){return typeof t=="number"||MRe(t)&&IRe(t)==NRe}var H3=FRe,$Re=QL;function LRe(t,e){var n=[];return $Re(t,function(r,i,s){e(r,i,s)&&n.push(r)}),n}var BRe=LRe,jRe=TL,qRe=BRe,zRe=UR,HRe=vi;function URe(t,e){var n=HRe(t)?jRe:qRe;return n(t,zRe(e))}var VRe=URe;function wa(){return wa=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wa.apply(this,arguments)}var zC={dotSize:4,noteWidth:120,noteTextOffset:8,animate:!0,motionStiffness:90,motionDamping:13},WRe=function(t){var e=typeof t;return P.isValidElement(t)||e==="string"||e==="function"||e==="object"},GRe=function(t){var e=typeof t;return e==="string"||e==="function"},bp=function(t){return t.type==="circle"},HC=function(t){return t.type==="dot"},Sp=function(t){return t.type==="rect"},KRe=function(t){var e=t.data,n=t.annotations,r=t.getPosition,i=t.getDimensions;return n.reduce(function(s,a){var o=a.offset||0;return[].concat(s,VRe(e,a.match).map(function(l){var c=r(l),u=i(l);return(bp(a)||Sp(a))&&(u.size=u.size+2*o,u.width=u.width+2*o,u.height=u.height+2*o),wa({},d9(a,["match","offset"]),c,u,{size:a.size||u.size,datum:l})}))},[])},YRe=function(t,e,n,r){var i=Math.atan2(r-e,n-t);return fwe(Vb(i))},h9=function(t){var e,n,r=t.x,i=t.y,s=t.noteX,a=t.noteY,o=t.noteWidth,l=o===void 0?zC.noteWidth:o,c=t.noteTextOffset,u=c===void 0?zC.noteTextOffset:c;if(H3(s))e=r+s;else{if(s.abs===void 0)throw new Error("noteX should be either a number or an object containing an 'abs' property");e=s.abs}if(H3(a))n=i+a;else{if(a.abs===void 0)throw new Error("noteY should be either a number or an object containing an 'abs' property");n=a.abs}var d=r,h=i,p=YRe(r,i,e,n);if(bp(t)){var f=Xl(ns(p),t.size/2);d+=f.x,h+=f.y}if(Sp(t)){var m=Math.round((p+90)/45)%8;m===0&&(h-=t.height/2),m===1&&(d+=t.width/2,h-=t.height/2),m===2&&(d+=t.width/2),m===3&&(d+=t.width/2,h+=t.height/2),m===4&&(h+=t.height/2),m===5&&(d-=t.width/2,h+=t.height/2),m===6&&(d-=t.width/2),m===7&&(d-=t.width/2,h-=t.height/2)}var g=e,v=e;return(p+90)%360>180?(g-=l,v-=l):v+=l,{points:[[d,h],[e,n],[v,n]],text:[g,n-u],angle:p+90}},f9=function(t){var e=t.data,n=t.annotations,r=t.getPosition,i=t.getDimensions;return P.useMemo(function(){return KRe({data:e,annotations:n,getPosition:r,getDimensions:i})},[e,n,r,i])},JRe=function(t){var e=t.annotations;return P.useMemo(function(){return e.map(function(n){return wa({},n,{computed:h9(wa({},n))})})},[e])},XRe=function(t){return P.useMemo(function(){return h9(t)},[t])},QRe=function(t){var e=t.datum,n=t.x,r=t.y,i=t.note,s=an(),a=yi(),o=a.animate,l=a.config,c=ho({x:n,y:r,config:l,immediate:!o});return typeof i=="function"?P.createElement(i,{x:n,y:r,datum:e}):S.jsxs(S.Fragment,{children:[s.annotations.text.outlineWidth>0&&S.jsx(Gt.text,{x:c.x,y:c.y,style:wa({},s.annotations.text,{strokeLinejoin:"round",strokeWidth:2*s.annotations.text.outlineWidth,stroke:s.annotations.text.outlineColor}),children:i}),S.jsx(Gt.text,{x:c.x,y:c.y,style:d9(s.annotations.text,["outlineWidth","outlineColor"]),children:i})]})},U3=function(t){var e=t.points,n=t.isOutline,r=n!==void 0&&n,i=an(),s=P.useMemo(function(){var l=e[0];return e.slice(1).reduce(function(c,u){return c+" L"+u[0]+","+u[1]},"M"+l[0]+","+l[1])},[e]),a=Jxe(s);if(r&&i.annotations.link.outlineWidth<=0)return null;var o=wa({},i.annotations.link);return r&&(o.strokeLinecap="square",o.strokeWidth=i.annotations.link.strokeWidth+2*i.annotations.link.outlineWidth,o.stroke=i.annotations.link.outlineColor,o.opacity=i.annotations.link.outlineOpacity),S.jsx(Gt.path,{fill:"none",d:a,style:o})},ZRe=function(t){var e=t.x,n=t.y,r=t.size,i=an(),s=yi(),a=s.animate,o=s.config,l=ho({x:e,y:n,radius:r/2,config:o,immediate:!a});return S.jsxs(S.Fragment,{children:[i.annotations.outline.outlineWidth>0&&S.jsx(Gt.circle,{cx:l.x,cy:l.y,r:l.radius,style:wa({},i.annotations.outline,{fill:"none",strokeWidth:i.annotations.outline.strokeWidth+2*i.annotations.outline.outlineWidth,stroke:i.annotations.outline.outlineColor,opacity:i.annotations.outline.outlineOpacity})}),S.jsx(Gt.circle,{cx:l.x,cy:l.y,r:l.radius,style:i.annotations.outline})]})},eke=function(t){var e=t.x,n=t.y,r=t.size,i=r===void 0?zC.dotSize:r,s=an(),a=yi(),o=a.animate,l=a.config,c=ho({x:e,y:n,radius:i/2,config:l,immediate:!o});return S.jsxs(S.Fragment,{children:[s.annotations.outline.outlineWidth>0&&S.jsx(Gt.circle,{cx:c.x,cy:c.y,r:c.radius,style:wa({},s.annotations.outline,{fill:"none",strokeWidth:2*s.annotations.outline.outlineWidth,stroke:s.annotations.outline.outlineColor,opacity:s.annotations.outline.outlineOpacity})}),S.jsx(Gt.circle,{cx:c.x,cy:c.y,r:c.radius,style:s.annotations.symbol})]})},tke=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,s=t.borderRadius,a=s===void 0?6:s,o=an(),l=yi(),c=l.animate,u=l.config,d=ho({x:e-r/2,y:n-i/2,width:r,height:i,config:u,immediate:!c});return S.jsxs(S.Fragment,{children:[o.annotations.outline.outlineWidth>0&&S.jsx(Gt.rect,{x:d.x,y:d.y,rx:a,ry:a,width:d.width,height:d.height,style:wa({},o.annotations.outline,{fill:"none",strokeWidth:o.annotations.outline.strokeWidth+2*o.annotations.outline.outlineWidth,stroke:o.annotations.outline.outlineColor,opacity:o.annotations.outline.outlineOpacity})}),S.jsx(Gt.rect,{x:d.x,y:d.y,rx:a,ry:a,width:d.width,height:d.height,style:o.annotations.outline})]})},nke=function(t){var e=t.datum,n=t.x,r=t.y,i=t.note,s=XRe(t);if(!WRe(i))throw new Error("note should be a valid react element");return S.jsxs(S.Fragment,{children:[S.jsx(U3,{points:s.points,isOutline:!0}),bp(t)&&S.jsx(ZRe,{x:n,y:r,size:t.size}),HC(t)&&S.jsx(eke,{x:n,y:r,size:t.size}),Sp(t)&&S.jsx(tke,{x:n,y:r,width:t.width,height:t.height,borderRadius:t.borderRadius}),S.jsx(U3,{points:s.points}),S.jsx(QRe,{datum:e,x:s.text[0],y:s.text[1],note:i})]})},V3=function(t,e){e.forEach(function(n,r){var i=n[0],s=n[1];r===0?t.moveTo(i,s):t.lineTo(i,s)})},rke=function(t,e){var n=e.annotations,r=e.theme;n.length!==0&&(t.save(),n.forEach(function(i){if(!GRe(i.note))throw new Error("note is invalid for canvas implementation");r.annotations.link.outlineWidth>0&&(t.lineCap="square",t.strokeStyle=r.annotations.link.outlineColor,t.lineWidth=r.annotations.link.strokeWidth+2*r.annotations.link.outlineWidth,t.beginPath(),V3(t,i.computed.points),t.stroke(),t.lineCap="butt"),bp(i)&&r.annotations.outline.outlineWidth>0&&(t.strokeStyle=r.annotations.outline.outlineColor,t.lineWidth=r.annotations.outline.strokeWidth+2*r.annotations.outline.outlineWidth,t.beginPath(),t.arc(i.x,i.y,i.size/2,0,2*Math.PI),t.stroke()),HC(i)&&r.annotations.symbol.outlineWidth>0&&(t.strokeStyle=r.annotations.symbol.outlineColor,t.lineWidth=2*r.annotations.symbol.outlineWidth,t.beginPath(),t.arc(i.x,i.y,i.size/2,0,2*Math.PI),t.stroke()),Sp(i)&&r.annotations.outline.outlineWidth>0&&(t.strokeStyle=r.annotations.outline.outlineColor,t.lineWidth=r.annotations.outline.strokeWidth+2*r.annotations.outline.outlineWidth,t.beginPath(),t.rect(i.x-i.width/2,i.y-i.height/2,i.width,i.height),t.stroke()),t.strokeStyle=r.annotations.link.stroke,t.lineWidth=r.annotations.link.strokeWidth,t.beginPath(),V3(t,i.computed.points),t.stroke(),bp(i)&&(t.strokeStyle=r.annotations.outline.stroke,t.lineWidth=r.annotations.outline.strokeWidth,t.beginPath(),t.arc(i.x,i.y,i.size/2,0,2*Math.PI),t.stroke()),HC(i)&&(t.fillStyle=r.annotations.symbol.fill,t.beginPath(),t.arc(i.x,i.y,i.size/2,0,2*Math.PI),t.fill()),Sp(i)&&(t.strokeStyle=r.annotations.outline.stroke,t.lineWidth=r.annotations.outline.strokeWidth,t.beginPath(),t.rect(i.x-i.width/2,i.y-i.height/2,i.width,i.height),t.stroke()),typeof i.note=="function"?i.note(t,{datum:i.datum,x:i.computed.text[0],y:i.computed.text[1],theme:r}):(t.font=r.annotations.text.fontSize+"px "+r.annotations.text.fontFamily,t.textAlign="left",t.textBaseline="alphabetic",t.fillStyle=r.annotations.text.fill,t.strokeStyle=r.annotations.text.outlineColor,t.lineWidth=2*r.annotations.text.outlineWidth,r.annotations.text.outlineWidth>0&&(t.lineJoin="round",t.strokeText(i.note,i.computed.text[0],i.computed.text[1]),t.lineJoin="miter"),t.fillText(i.note,i.computed.text[0],i.computed.text[1]))}),t.restore())};function ov(){return ov=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ov.apply(this,arguments)}function W3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ike(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(i,s){if(i){if(typeof i=="string")return W3(i,s);var a=Object.prototype.toString.call(i).slice(8,-1);return a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set"?Array.from(i):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?W3(i,s):void 0}}(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p9={nivo:["#e8c1a0","#f47560","#f1e15b","#e8a838","#61cdbb","#97e3d5"],category10:X$,accent:Q$,dark2:Z$,paired:eL,pastel1:tL,pastel2:nL,set1:rL,set2:iL,set3:PR},ske=Object.keys(p9),m9={brown_blueGreen:db,purpleRed_green:hb,pink_yellowGreen:fb,purple_orange:pb,red_blue:mb,red_grey:gb,red_yellow_blue:vb,red_yellow_green:yb,spectral:bb},ake=Object.keys(m9),oke={brown_blueGreen:eye,purpleRed_green:tye,pink_yellowGreen:nye,purple_orange:rye,red_blue:iye,red_grey:sye,red_yellow_blue:aye,red_yellow_green:oye,spectral:lye},g9={blues:Db,greens:Ib,greys:Mb,oranges:$b,purples:Nb,reds:Fb,blue_green:Sb,blue_purple:xb,green_blue:wb,orange_red:Cb,purple_blue_green:Eb,purple_blue:Tb,purple_red:Rb,red_purple:kb,yellow_green_blue:Pb,yellow_green:_b,yellow_orange_brown:Ab,yellow_orange_red:Ob},lke=Object.keys(g9),cke={blues:xye,greens:wye,greys:Cye,oranges:Rye,purples:Eye,reds:Tye,turbo:Nye,viridis:Fye,inferno:Lye,magma:$ye,plasma:Bye,cividis:kye,warm:_ye,cool:Aye,cubehelixDefault:Pye,blue_green:cye,blue_purple:uye,green_blue:dye,orange_red:hye,purple_blue_green:fye,purple_blue:pye,purple_red:mye,red_purple:gye,yellow_green_blue:vye,yellow_green:yye,yellow_orange_brown:bye,yellow_orange_red:Sye},Ug=ov({},p9,m9,g9),uke=Object.keys(Ug),dke=function(t){return ske.includes(t)},hke=function(t){return ake.includes(t)},fke=function(t){return lke.includes(t)},pke={rainbow:Oye,sinebow:Mye};ov({},oke,cke,pke);var mke=function(t,e){if(typeof t=="function")return t;if(tm(t)){if(function(l){return l.theme!==void 0}(t)){if(e===void 0)throw new Error("Unable to use color from theme as no theme was provided");var n=ts(e,t.theme);if(n===void 0)throw new Error("Color from theme is undefined at path: '"+t.theme+"'");return function(){return n}}if(function(l){return l.from!==void 0}(t)){var r=function(l){return ts(l,t.from)};if(Array.isArray(t.modifiers)){for(var i,s=[],a=function(){var l=i.value,c=l[0],u=l[1];if(c==="brighter")s.push(function(d){return d.brighter(u)});else if(c==="darker")s.push(function(d){return d.darker(u)});else{if(c!=="opacity")throw new Error("Invalid color modifier: '"+c+"', must be one of: 'brighter', 'darker', 'opacity'");s.push(function(d){return d.opacity=u,d})}},o=ike(t.modifiers);!(i=o()).done;)a();return s.length===0?r:function(l){return s.reduce(function(c,u){return u(c)},Ed(r(l))).toString()}}return r}throw new Error("Invalid color spec, you should either specify 'theme' or 'from' when using a config object")}return function(){return t}},Ad=function(t,e){return P.useMemo(function(){return mke(t,e)},[t,e])};z.oneOfType([z.func,z.arrayOf(z.string),z.shape({scheme:z.oneOf(uke).isRequired,size:z.number}),z.shape({datum:z.string.isRequired}),z.string]);z.oneOfType([z.string,z.func,z.shape({theme:z.string.isRequired}),z.shape({from:z.string.isRequired,modifiers:z.arrayOf(z.array)})]);var gke=function(t,e){if(typeof t=="function")return t;var n=typeof e=="function"?e:function(d){return ts(d,e)};if(Array.isArray(t)){var r=ql(t),i=function(d){return r(n(d))};return i.scale=r,i}if(tm(t)){if(function(d){return d.datum!==void 0}(t))return function(d){return ts(d,t.datum)};if(function(d){return d.scheme!==void 0}(t)){if(dke(t.scheme)){var s=ql(Ug[t.scheme]),a=function(d){return s(n(d))};return a.scale=s,a}if(hke(t.scheme)){if(t.size!==void 0&&(t.size<3||t.size>11))throw new Error("Invalid size '"+t.size+"' for diverging color scheme '"+t.scheme+"', must be between 3~11");var o=ql(Ug[t.scheme][t.size||11]),l=function(d){return o(n(d))};return l.scale=o,l}if(fke(t.scheme)){if(t.size!==void 0&&(t.size<3||t.size>9))throw new Error("Invalid size '"+t.size+"' for sequential color scheme '"+t.scheme+"', must be between 3~9");var c=ql(Ug[t.scheme][t.size||9]),u=function(d){return c(n(d))};return u.scale=c,u}}throw new Error("Invalid colors, when using an object, you should either pass a 'datum' or a 'scheme' property")}return function(){return t}},v9=function(t,e){return P.useMemo(function(){return gke(t,e)},[t,e])},vke=function(t){var e=t.x,n=t.y,r=t.size,i=t.fill,s=t.opacity,a=s===void 0?1:s,o=t.borderWidth,l=o===void 0?0:o,c=t.borderColor;return S.jsx("circle",{r:r/2,cx:e+r/2,cy:n+r/2,fill:i,opacity:a,strokeWidth:l,stroke:c===void 0?"transparent":c,style:{pointerEvents:"none"}})},yke=function(t){var e=t.x,n=t.y,r=t.size,i=t.fill,s=t.opacity,a=s===void 0?1:s,o=t.borderWidth,l=o===void 0?0:o,c=t.borderColor;return S.jsx("g",{transform:"translate("+e+","+n+")",children:S.jsx("path",{d:`
                    M`+r/2+` 0
                    L`+.8*r+" "+r/2+`
                    L`+r/2+" "+r+`
                    L`+.2*r+" "+r/2+`
                    L`+r/2+` 0
                `,fill:i,opacity:a,strokeWidth:l,stroke:c===void 0?"transparent":c,style:{pointerEvents:"none"}})})},bke=function(t){var e=t.x,n=t.y,r=t.size,i=t.fill,s=t.opacity,a=s===void 0?1:s,o=t.borderWidth,l=o===void 0?0:o,c=t.borderColor;return S.jsx("rect",{x:e,y:n,fill:i,opacity:a,strokeWidth:l,stroke:c===void 0?"transparent":c,width:r,height:r,style:{pointerEvents:"none"}})},Ske=function(t){var e=t.x,n=t.y,r=t.size,i=t.fill,s=t.opacity,a=s===void 0?1:s,o=t.borderWidth,l=o===void 0?0:o,c=t.borderColor;return S.jsx("g",{transform:"translate("+e+","+n+")",children:S.jsx("path",{d:`
                M`+r/2+` 0
                L`+r+" "+r+`
                L0 `+r+`
                L`+r/2+` 0
            `,fill:i,opacity:a,strokeWidth:l,stroke:c===void 0?"transparent":c,style:{pointerEvents:"none"}})})};function zl(){return zl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zl.apply(this,arguments)}var xke={top:0,right:0,bottom:0,left:0},WR=function(t){var e,n=t.direction,r=t.itemsSpacing,i=t.padding,s=t.itemCount,a=t.itemWidth,o=t.itemHeight;if(typeof i!="number"&&(typeof(e=i)!="object"||Array.isArray(e)||e===null))throw new Error("Invalid property padding, must be one of: number, object");var l=typeof i=="number"?{top:i,right:i,bottom:i,left:i}:zl({},xke,i),c=l.left+l.right,u=l.top+l.bottom,d=a+c,h=o+u,p=(s-1)*r;return n==="row"?d=a*s+p+c:n==="column"&&(h=o*s+p+u),{width:d,height:h,padding:l}},y9=function(t){var e=t.anchor,n=t.translateX,r=t.translateY,i=t.containerWidth,s=t.containerHeight,a=t.width,o=t.height,l=n,c=r;switch(e){case"top":l+=(i-a)/2;break;case"top-right":l+=i-a;break;case"right":l+=i-a,c+=(s-o)/2;break;case"bottom-right":l+=i-a,c+=s-o;break;case"bottom":l+=(i-a)/2,c+=s-o;break;case"bottom-left":c+=s-o;break;case"left":c+=(s-o)/2;break;case"center":l+=(i-a)/2,c+=(s-o)/2}return{x:l,y:c}},b9=function(t){var e,n,r,i,s,a,o=t.direction,l=t.justify,c=t.symbolSize,u=t.symbolSpacing,d=t.width,h=t.height;switch(o){case"left-to-right":e=0,n=(h-c)/2,i=h/2,a="central",l?(r=d,s="end"):(r=c+u,s="start");break;case"right-to-left":e=d-c,n=(h-c)/2,i=h/2,a="central",l?(r=0,s="start"):(r=d-c-u,s="end");break;case"top-to-bottom":e=(d-c)/2,n=0,r=d/2,s="middle",l?(i=h,a="alphabetic"):(i=c+u,a="text-before-edge");break;case"bottom-to-top":e=(d-c)/2,n=h-c,r=d/2,s="middle",l?(i=0,a="text-before-edge"):(i=h-c-u,a="alphabetic")}return{symbolX:e,symbolY:n,labelX:r,labelY:i,labelAnchor:s,labelAlignment:a}},wke={circle:vke,diamond:yke,square:bke,triangle:Ske},Cke=function(t){var e,n,r,i,s,a,o,l,c,u,d,h=t.x,p=t.y,f=t.width,m=t.height,g=t.data,v=t.direction,y=v===void 0?"left-to-right":v,b=t.justify,C=b!==void 0&&b,R=t.textColor,w=t.background,E=w===void 0?"transparent":w,k=t.opacity,T=k===void 0?1:k,_=t.symbolShape,D=_===void 0?"square":_,I=t.symbolSize,M=I===void 0?16:I,A=t.symbolSpacing,O=A===void 0?8:A,L=t.symbolBorderWidth,F=L===void 0?0:L,B=t.symbolBorderColor,j=B===void 0?"transparent":B,q=t.onClick,V=t.onMouseEnter,U=t.onMouseLeave,ne=t.toggleSerie,W=t.effects,J=P.useState({}),K=J[0],Q=J[1],re=an(),G=P.useCallback(function(se){if(W){var ae=W.filter(function(ve){return ve.on==="hover"}).reduce(function(ve,ke){return zl({},ve,ke.style)},{});Q(ae)}V==null||V(g,se)},[V,g,W]),ie=P.useCallback(function(se){if(W){var ae=W.filter(function(ve){return ve.on!=="hover"}).reduce(function(ve,ke){return zl({},ve,ke.style)},{});Q(ae)}U==null||U(g,se)},[U,g,W]),te=b9({direction:y,justify:C,symbolSize:(e=K.symbolSize)!=null?e:M,symbolSpacing:O,width:f,height:m}),Z=te.symbolX,oe=te.symbolY,ue=te.labelX,me=te.labelY,H=te.labelAnchor,Y=te.labelAlignment,X=[q,V,U,ne].some(function(se){return se!==void 0}),le=typeof D=="function"?D:wke[D];return S.jsxs("g",{transform:"translate("+h+","+p+")",style:{opacity:(n=K.itemOpacity)!=null?n:T},children:[S.jsx("rect",{width:f,height:m,fill:(r=K.itemBackground)!=null?r:E,style:{cursor:X?"pointer":"auto"},onClick:function(se){q==null||q(g,se),ne==null||ne(g.id)},onMouseEnter:G,onMouseLeave:ie}),P.createElement(le,zl({id:g.id,x:Z,y:oe,size:(i=K.symbolSize)!=null?i:M,fill:(s=(a=g.fill)!=null?a:g.color)!=null?s:"black",borderWidth:(o=K.symbolBorderWidth)!=null?o:F,borderColor:(l=K.symbolBorderColor)!=null?l:j},g.hidden?re.legends.hidden.symbol:void 0)),S.jsx("text",{textAnchor:H,style:zl({},re.legends.text,{fill:(c=(u=(d=K.itemTextColor)!=null?d:R)!=null?u:re.legends.text.fill)!=null?c:"black",dominantBaseline:Y,pointerEvents:"none",userSelect:"none"},g.hidden?re.legends.hidden.text:void 0),x:ue,y:me,children:g.label})]})},Eke=function(t){var e=t.data,n=t.x,r=t.y,i=t.direction,s=t.padding,a=s===void 0?0:s,o=t.justify,l=t.effects,c=t.itemWidth,u=t.itemHeight,d=t.itemDirection,h=d===void 0?"left-to-right":d,p=t.itemsSpacing,f=p===void 0?0:p,m=t.itemTextColor,g=t.itemBackground,v=g===void 0?"transparent":g,y=t.itemOpacity,b=y===void 0?1:y,C=t.symbolShape,R=t.symbolSize,w=t.symbolSpacing,E=t.symbolBorderWidth,k=t.symbolBorderColor,T=t.onClick,_=t.onMouseEnter,D=t.onMouseLeave,I=t.toggleSerie,M=WR({itemCount:e.length,itemWidth:c,itemHeight:u,itemsSpacing:f,direction:i,padding:a}).padding,A=i==="row"?c+f:0,O=i==="column"?u+f:0;return S.jsx("g",{transform:"translate("+n+","+r+")",children:e.map(function(L,F){return S.jsx(Cke,{data:L,x:F*A+M.left,y:F*O+M.top,width:c,height:u,direction:h,justify:o,effects:l,textColor:m,background:v,opacity:b,symbolShape:C,symbolSize:R,symbolSpacing:w,symbolBorderWidth:E,symbolBorderColor:k,onClick:T,onMouseEnter:_,onMouseLeave:D,toggleSerie:I},F)})})},S9=function(t){var e=t.data,n=t.containerWidth,r=t.containerHeight,i=t.translateX,s=i===void 0?0:i,a=t.translateY,o=a===void 0?0:a,l=t.anchor,c=t.direction,u=t.padding,d=u===void 0?0:u,h=t.justify,p=t.itemsSpacing,f=p===void 0?0:p,m=t.itemWidth,g=t.itemHeight,v=t.itemDirection,y=t.itemTextColor,b=t.itemBackground,C=t.itemOpacity,R=t.symbolShape,w=t.symbolSize,E=t.symbolSpacing,k=t.symbolBorderWidth,T=t.symbolBorderColor,_=t.onClick,D=t.onMouseEnter,I=t.onMouseLeave,M=t.toggleSerie,A=t.effects,O=WR({itemCount:e.length,itemsSpacing:f,itemWidth:m,itemHeight:g,direction:c,padding:d}),L=O.width,F=O.height,B=y9({anchor:l,translateX:s,translateY:o,containerWidth:n,containerHeight:r,width:L,height:F}),j=B.x,q=B.y;return S.jsx(Eke,{data:e,x:j,y:q,direction:c,padding:d,justify:h,effects:A,itemsSpacing:f,itemWidth:m,itemHeight:g,itemDirection:v,itemTextColor:y,itemBackground:b,itemOpacity:C,symbolShape:R,symbolSize:w,symbolSpacing:E,symbolBorderWidth:k,symbolBorderColor:T,onClick:_,onMouseEnter:D,onMouseLeave:I,toggleSerie:typeof M=="boolean"?void 0:M})},Tke={start:"left",middle:"center",end:"right"},Rke=function(t,e){var n=e.data,r=e.containerWidth,i=e.containerHeight,s=e.translateX,a=s===void 0?0:s,o=e.translateY,l=o===void 0?0:o,c=e.anchor,u=e.direction,d=e.padding,h=d===void 0?0:d,p=e.justify,f=p!==void 0&&p,m=e.itemsSpacing,g=m===void 0?0:m,v=e.itemWidth,y=e.itemHeight,b=e.itemDirection,C=b===void 0?"left-to-right":b,R=e.itemTextColor,w=e.symbolSize,E=w===void 0?16:w,k=e.symbolSpacing,T=k===void 0?8:k,_=e.theme,D=WR({itemCount:n.length,itemWidth:v,itemHeight:y,itemsSpacing:g,direction:u,padding:h}),I=D.width,M=D.height,A=D.padding,O=y9({anchor:c,translateX:a,translateY:l,containerWidth:r,containerHeight:i,width:I,height:M}),L=O.x,F=O.y,B=u==="row"?v+g:0,j=u==="column"?y+g:0;t.save(),t.translate(L,F),t.font=_.legends.text.fontSize+"px "+(_.legends.text.fontFamily||"sans-serif"),n.forEach(function(q,V){var U,ne,W=V*B+A.left,J=V*j+A.top,K=b9({direction:C,justify:f,symbolSize:E,symbolSpacing:T,width:v,height:y}),Q=K.symbolX,re=K.symbolY,G=K.labelX,ie=K.labelY,te=K.labelAnchor,Z=K.labelAlignment;t.fillStyle=(U=q.color)!=null?U:"black",t.fillRect(W+Q,J+re,E,E),t.textAlign=Tke[te],Z==="central"&&(t.textBaseline="middle"),t.fillStyle=(ne=R??_.legends.text.fill)!=null?ne:"black",t.fillText(String(q.label),W+G,J+ie)}),t.restore()};z.arrayOf(z.object),z.oneOf(["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left","center"]).isRequired,z.number,z.number,z.oneOf(["row","column"]).isRequired,z.number,z.number.isRequired,z.number.isRequired,z.oneOf(["left-to-right","right-to-left","top-to-bottom","bottom-to-top"]),z.string,z.string,z.number,z.oneOfType([z.oneOf(["circle","diamond","square","triangle"]),z.func]),z.number,z.number,z.number,z.string,z.func,z.func,z.func,z.arrayOf(z.shape({on:z.oneOfType([z.oneOf(["hover"])]).isRequired,style:z.shape({itemTextColor:z.string,itemBackground:z.string,itemOpacity:z.number,symbolSize:z.number,symbolBorderWidth:z.number,symbolBorderColor:z.string}).isRequired}));function Bt(){return Bt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bt.apply(this,arguments)}function ah(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var G3,kke=function(t){var e=t.bars,n=t.annotations,r=f9({data:e,annotations:n,getPosition:function(i){return{x:i.x+i.width/2,y:i.y+i.height/2}},getDimensions:function(i){var s=i.height,a=i.width;return{width:a,height:s,size:Math.max(a,s)}}});return S.jsx(S.Fragment,{children:r.map(function(i,s){return S.jsx(nke,Bt({},i),s)})})},Pke=function(t){var e=t.width,n=t.height,r=t.legends,i=t.toggleSerie;return S.jsx(S.Fragment,{children:r.map(function(s,a){var o,l=s[0],c=s[1];return S.jsx(S9,Bt({},l,{containerWidth:e,containerHeight:n,data:(o=l.data)!=null?o:c,toggleSerie:l.toggleSerie&&l.dataFrom==="keys"?i:void 0}),a)})})},_ke=["data"],Ake=function(t){var e,n=t.bar,r=n.data,i=ah(n,_ke),s=t.style,a=s.borderColor,o=s.color,l=s.height,c=s.labelColor,u=s.labelOpacity,d=s.labelX,h=s.labelY,p=s.transform,f=s.width,m=t.borderRadius,g=t.borderWidth,v=t.label,y=t.shouldRenderLabel,b=t.isInteractive,C=t.onClick,R=t.onMouseEnter,w=t.onMouseLeave,E=t.tooltip,k=t.isFocusable,T=t.ariaLabel,_=t.ariaLabelledBy,D=t.ariaDescribedBy,I=an(),M=QT(),A=M.showTooltipFromEvent,O=M.showTooltipAt,L=M.hideTooltip,F=P.useMemo(function(){return function(){return P.createElement(E,Bt({},i,r))}},[E,i,r]),B=P.useCallback(function(W){C==null||C(Bt({color:i.color},r),W)},[i,r,C]),j=P.useCallback(function(W){return A(F(),W)},[A,F]),q=P.useCallback(function(W){R==null||R(r,W),A(F(),W)},[r,R,A,F]),V=P.useCallback(function(W){w==null||w(r,W),L()},[r,L,w]),U=P.useCallback(function(){O(F(),[i.absX+i.width/2,i.absY])},[O,F,i]),ne=P.useCallback(function(){L()},[L]);return S.jsxs(Gt.g,{transform:p,children:[S.jsx(Gt.rect,{width:rl(f,function(W){return Math.max(W,0)}),height:rl(l,function(W){return Math.max(W,0)}),rx:m,ry:m,fill:(e=r.fill)!=null?e:o,strokeWidth:g,stroke:a,focusable:k,tabIndex:k?0:void 0,"aria-label":T?T(r):void 0,"aria-labelledby":_?_(r):void 0,"aria-describedby":D?D(r):void 0,onMouseEnter:b?q:void 0,onMouseMove:b?j:void 0,onMouseLeave:b?V:void 0,onClick:b?B:void 0,onFocus:b&&k?U:void 0,onBlur:b&&k?ne:void 0}),y&&S.jsx(Gt.text,{x:d,y:h,textAnchor:"middle",dominantBaseline:"central",fillOpacity:u,style:Bt({},I.labels.text,{pointerEvents:"none",fill:c}),children:v})]})},Oke=["color","label"],Zt={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",reverse:!1,minValue:"auto",maxValue:"auto",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},padding:.1,innerPadding:0,axisBottom:{},axisLeft:{},enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{from:"theme",theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:function(t){var e=t.color,n=t.label,r=ah(t,Oke);return S.jsx(fF,{id:n,value:r.formattedValue,enableChip:!0,color:e})},tooltipLabel:function(t){return t.id+" - "+t.indexValue},legends:[],initialHiddenIds:[],annotations:[],markers:[]},bn=Bt({},Zt,{layers:["grid","axes","bars","markers","legends","annotations"],barComponent:Ake,defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),Xr=Bt({},Zt,{layers:["grid","axes","bars","legends","annotations"],pixelRatio:typeof window<"u"&&(G3=window.devicePixelRatio)!=null?G3:1}),x9=function(t,e,n,r,i,s){return VR(r,{all:t.map(e),min:0,max:0},i,s).padding(n)},w9=function(t,e){return t.map(function(n){return Bt({},e.reduce(function(r,i){return r[i]=null,r},{}),n)})},Wb=function(t){return Object.keys(t).reduce(function(e,n){return t[n]&&(e[n]=t[n]),e},{})},Gb=function(t){return[t,Number(t)]},Dke=["layout","minValue","maxValue","reverse","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],GR=function(t,e){return t>e},C9=function(t,e){return t<e},E9=function(t,e){return Array.from(" ".repeat(e-t),function(n,r){return t+r})},Ike=function(t){return GR(t,0)?0:t},Mke=function(t,e,n,r){var i=t.data,s=t.formatValue,a=t.getColor,o=t.getIndex,l=t.getTooltipLabel,c=t.innerPadding,u=c===void 0?0:c,d=t.keys,h=t.xScale,p=t.yScale,f=t.margin,m=n?C9:GR,g=i.map(Wb),v=[];return d.forEach(function(y,b){return E9(0,h.domain().length).forEach(function(C){var R,w,E,k=Gb(i[C][y]),T=k[0],_=k[1],D=o(i[C]),I=((R=h(D))!=null?R:0)+e*b+u*b,M=m(w=_,0)?(E=p(w))!=null?E:0:r,A=function(L,F){var B;return m(L,0)?r-F:((B=p(L))!=null?B:0)-r}(_,M),O={id:y,value:T===null?T:_,formattedValue:s(_),hidden:!1,index:C,indexValue:D,data:g[C]};v.push({key:y+"."+O.indexValue,index:v.length,data:O,x:I,y:M,absX:f.left+I,absY:f.top+M,width:e,height:A,color:a(O),label:l(O)})})}),v},Nke=function(t,e,n,r){var i=t.data,s=t.formatValue,a=t.getIndex,o=t.getColor,l=t.getTooltipLabel,c=t.keys,u=t.innerPadding,d=u===void 0?0:u,h=t.xScale,p=t.yScale,f=t.margin,m=n?C9:GR,g=i.map(Wb),v=[];return c.forEach(function(y,b){return E9(0,p.domain().length).forEach(function(C){var R,w,E,k=Gb(i[C][y]),T=k[0],_=k[1],D=a(i[C]),I=m(w=_,0)?r:(E=h(w))!=null?E:0,M=((R=p(D))!=null?R:0)+e*b+d*b,A=function(L,F){var B;return m(L,0)?((B=h(L))!=null?B:0)-r:r-F}(_,I),O={id:y,value:T===null?T:_,formattedValue:s(_),hidden:!1,index:C,indexValue:D,data:g[C]};v.push({key:y+"."+O.indexValue,index:v.length,data:O,x:I,y:M,absX:f.left+I,absY:f.top+M,width:A,height:e,color:o(O),label:l(O)})})}),v},Fke=function(t){var e,n,r=t.layout,i=t.minValue,s=t.maxValue,a=t.reverse,o=t.width,l=t.height,c=t.padding,u=c===void 0?0:c,d=t.innerPadding,h=d===void 0?0:d,p=t.valueScale,f=t.indexScale,m=t.hiddenIds,g=m===void 0?[]:m,v=ah(t,Dke),y=v.keys.filter(function(q){return!g.includes(q)}),b=w9(v.data,y),C=r==="vertical"?["y","x",o]:["x","y",l],R=C[0],w=C[1],E=C[2],k=x9(b,v.getIndex,u,f,E,w),T=Bt({max:s,min:i,reverse:a},p),_=T.min==="auto"?Ike:function(q){return q},D=b.reduce(function(q,V){return[].concat(q,y.map(function(U){return V[U]}))},[]).filter(Boolean),I=_(Math.min.apply(Math,D)),M=(n=Math.max.apply(Math,D),isFinite(n)?n:0),A=VR(T,{all:D,min:I,max:M},R==="x"?o:l,R),O=r==="vertical"?[k,A]:[A,k],L=O[0],F=O[1],B=(k.bandwidth()-h*(y.length-1))/y.length,j=[Bt({},v,{data:b,keys:y,innerPadding:h,xScale:L,yScale:F}),B,T.reverse,(e=A(0))!=null?e:0];return{xScale:L,yScale:F,bars:B>0?r==="vertical"?Mke.apply(void 0,j):Nke.apply(void 0,j):[]}},$ke=["data","layout","minValue","maxValue","reverse","width","height","padding","valueScale","indexScale","hiddenIds"],Lke=function t(e){var n;return e.some(Array.isArray)?t((n=[]).concat.apply(n,e)):e},Bke=function(t,e,n){var r=t.formatValue,i=t.getColor,s=t.getIndex,a=t.getTooltipLabel,o=t.innerPadding,l=t.stackedData,c=t.xScale,u=t.yScale,d=t.margin,h=[];return l.forEach(function(p){return c.domain().forEach(function(f,m){var g,v,y=p[m],b=(g=c(s(y.data)))!=null?g:0,C=((v=function(_){return u(_[n?0:1])}(y))!=null?v:0)+.5*o,R=function(_,D){var I;return((I=u(_[n?1:0]))!=null?I:0)-D}(y,C)-o,w=Gb(y.data[p.key]),E=w[0],k=w[1],T={id:p.key,value:E===null?E:k,formattedValue:r(k),hidden:!1,index:m,indexValue:f,data:Wb(y.data)};h.push({key:p.key+"."+f,index:h.length,data:T,x:b,y:C,absX:d.left+b,absY:d.top+C,width:e,height:R,color:i(T),label:a(T)})})}),h},jke=function(t,e,n){var r=t.formatValue,i=t.getColor,s=t.getIndex,a=t.getTooltipLabel,o=t.innerPadding,l=t.stackedData,c=t.xScale,u=t.yScale,d=t.margin,h=[];return l.forEach(function(p){return u.domain().forEach(function(f,m){var g,v,y=p[m],b=(g=u(s(y.data)))!=null?g:0,C=((v=function(_){return c(_[n?1:0])}(y))!=null?v:0)+.5*o,R=function(_,D){var I;return((I=c(_[n?0:1]))!=null?I:0)-D}(y,C)-o,w=Gb(y.data[p.key]),E=w[0],k=w[1],T={id:p.key,value:E===null?E:k,formattedValue:r(k),hidden:!1,index:m,indexValue:f,data:Wb(y.data)};h.push({key:p.key+"."+f,index:h.length,data:T,x:C,y:b,absX:d.left+C,absY:d.top+b,width:R,height:e,color:i(T),label:a(T)})})}),h},qke=function(t){var e,n=t.data,r=t.layout,i=t.minValue,s=t.maxValue,a=t.reverse,o=t.width,l=t.height,c=t.padding,u=c===void 0?0:c,d=t.valueScale,h=t.indexScale,p=t.hiddenIds,f=p===void 0?[]:p,m=ah(t,$ke),g=m.keys.filter(function(B){return!f.includes(B)}),v=n1e().keys(g).offset(SL)(w9(n,g)),y=r==="vertical"?["y","x",o]:["x","y",l],b=y[0],C=y[1],R=y[2],w=x9(n,m.getIndex,u,h,R,C),E=Bt({max:s,min:i,reverse:a},d),k=(e=Lke(v),d.type==="log"?e.filter(function(B){return B!==0}):e),T=Math.min.apply(Math,k),_=Math.max.apply(Math,k),D=VR(E,{all:k,min:T,max:_},b==="x"?o:l,b),I=r==="vertical"?[w,D]:[D,w],M=I[0],A=I[1],O=m.innerPadding>0?m.innerPadding:0,L=w.bandwidth(),F=[Bt({},m,{innerPadding:O,stackedData:v,xScale:M,yScale:A}),L,E.reverse];return{xScale:M,yScale:A,bars:L>0?r==="vertical"?Bke.apply(void 0,F):jke.apply(void 0,F):[]}},zke=function(t){var e=t.bars,n=t.direction,r=t.from,i=t.groupMode,s=t.layout,a=t.legendLabel,o=t.reverse,l=KL(a??(r==="indexes"?"indexValue":"id"));return r==="indexes"?function(c,u,d){var h=A3(c.map(function(p){var f,m;return{id:(f=p.data.indexValue)!=null?f:"",label:d(p.data),hidden:p.data.hidden,color:(m=p.color)!=null?m:"#000"}}),function(p){return p.id});return u==="horizontal"&&h.reverse(),h}(e,s,l):function(c,u,d,h,p,f){var m=A3(c.map(function(g){var v;return{id:g.data.id,label:f(g.data),hidden:g.data.hidden,color:(v=g.color)!=null?v:"#000"}}),function(g){return g.id});return(u==="vertical"&&h==="stacked"&&d==="column"&&p!==!0||u==="horizontal"&&h==="stacked"&&p===!0)&&m.reverse(),m}(e,s,n,i,o,l)},T9=function(t){var e=t.indexBy,n=e===void 0?Zt.indexBy:e,r=t.keys,i=r===void 0?Zt.keys:r,s=t.label,a=s===void 0?Zt.label:s,o=t.tooltipLabel,l=o===void 0?Zt.tooltipLabel:o,c=t.valueFormat,u=t.colors,d=u===void 0?Zt.colors:u,h=t.colorBy,p=h===void 0?Zt.colorBy:h,f=t.borderColor,m=f===void 0?Zt.borderColor:f,g=t.labelTextColor,v=g===void 0?Zt.labelTextColor:g,y=t.groupMode,b=y===void 0?Zt.groupMode:y,C=t.layout,R=C===void 0?Zt.layout:C,w=t.reverse,E=w===void 0?Zt.reverse:w,k=t.data,T=t.minValue,_=T===void 0?Zt.minValue:T,D=t.maxValue,I=D===void 0?Zt.maxValue:D,M=t.margin,A=t.width,O=t.height,L=t.padding,F=L===void 0?Zt.padding:L,B=t.innerPadding,j=B===void 0?Zt.innerPadding:B,q=t.valueScale,V=q===void 0?Zt.valueScale:q,U=t.indexScale,ne=U===void 0?Zt.indexScale:U,W=t.initialHiddenIds,J=W===void 0?Zt.initialHiddenIds:W,K=t.enableLabel,Q=K===void 0?Zt.enableLabel:K,re=t.labelSkipWidth,G=re===void 0?Zt.labelSkipWidth:re,ie=t.labelSkipHeight,te=ie===void 0?Zt.labelSkipHeight:ie,Z=t.legends,oe=Z===void 0?Zt.legends:Z,ue=t.legendLabel,me=P.useState(J??[]),H=me[0],Y=me[1],X=P.useCallback(function(Pe){Y(function(Ye){return Ye.indexOf(Pe)>-1?Ye.filter(function(Lt){return Lt!==Pe}):[].concat(Ye,[Pe])})},[]),le=Ql(n),se=Ql(a),ae=Ql(l),ve=zR(c),ke=an(),Ee=v9(d,p),Oe=Ad(m,ke),De=Ad(v,ke),He=(b==="grouped"?Fke:qke)({layout:R,reverse:E,data:k,getIndex:le,keys:i,minValue:_,maxValue:I,width:A,height:O,getColor:Ee,padding:F,innerPadding:j,valueScale:V,indexScale:ne,hiddenIds:H,formatValue:ve,getTooltipLabel:ae,margin:M}),_e=He.bars,Te=He.xScale,Ce=He.yScale,Ke=P.useMemo(function(){return _e.filter(function(Pe){return Pe.data.value!==null}).map(function(Pe,Ye){return Bt({},Pe,{index:Ye})})},[_e]),fe=P.useCallback(function(Pe){var Ye=Pe.width,Lt=Pe.height;return!!Q&&!(G>0&&Ye<G)&&!(te>0&&Lt<te)},[Q,G,te]),Re=P.useMemo(function(){return i.map(function(Pe){var Ye=_e.find(function(Lt){return Lt.data.id===Pe});return Bt({},Ye,{data:Bt({id:Pe},Ye==null?void 0:Ye.data,{hidden:H.includes(Pe)})})})},[H,i,_e]),Ue=P.useMemo(function(){return oe.map(function(Pe){return[Pe,zke({bars:Pe.dataFrom==="keys"?Re:_e,direction:Pe.direction,from:Pe.dataFrom,groupMode:b,layout:R,legendLabel:ue,reverse:E})]})},[oe,Re,_e,b,R,ue,E]);return{bars:_e,barsWithValue:Ke,xScale:Te,yScale:Ce,getIndex:le,getLabel:se,getTooltipLabel:ae,formatValue:ve,getColor:Ee,getBorderColor:Oe,getLabelColor:De,shouldRenderBarLabel:fe,hiddenIds:H,toggleSerie:X,legendsWithData:Ue}},Hke=["isInteractive","animate","motionConfig","theme","renderWrapper"],Uke=function(t){var e=t.data,n=t.indexBy,r=t.keys,i=t.margin,s=t.width,a=t.height,o=t.groupMode,l=t.layout,c=t.reverse,u=t.minValue,d=t.maxValue,h=t.valueScale,p=t.indexScale,f=t.padding,m=t.innerPadding,g=t.axisTop,v=t.axisRight,y=t.axisBottom,b=y===void 0?bn.axisBottom:y,C=t.axisLeft,R=C===void 0?bn.axisLeft:C,w=t.enableGridX,E=w===void 0?bn.enableGridX:w,k=t.enableGridY,T=k===void 0?bn.enableGridY:k,_=t.gridXValues,D=t.gridYValues,I=t.layers,M=I===void 0?bn.layers:I,A=t.barComponent,O=A===void 0?bn.barComponent:A,L=t.enableLabel,F=L===void 0?bn.enableLabel:L,B=t.label,j=t.labelSkipWidth,q=j===void 0?bn.labelSkipWidth:j,V=t.labelSkipHeight,U=V===void 0?bn.labelSkipHeight:V,ne=t.labelTextColor,W=t.markers,J=W===void 0?bn.markers:W,K=t.colorBy,Q=t.colors,re=t.defs,G=re===void 0?bn.defs:re,ie=t.fill,te=ie===void 0?bn.fill:ie,Z=t.borderRadius,oe=Z===void 0?bn.borderRadius:Z,ue=t.borderWidth,me=ue===void 0?bn.borderWidth:ue,H=t.borderColor,Y=t.annotations,X=Y===void 0?bn.annotations:Y,le=t.legendLabel,se=t.tooltipLabel,ae=t.valueFormat,ve=t.isInteractive,ke=ve===void 0?bn.isInteractive:ve,Ee=t.tooltip,Oe=Ee===void 0?bn.tooltip:Ee,De=t.onClick,He=t.onMouseEnter,_e=t.onMouseLeave,Te=t.legends,Ce=t.role,Ke=Ce===void 0?bn.role:Ce,fe=t.ariaLabel,Re=t.ariaLabelledBy,Ue=t.ariaDescribedBy,Pe=t.isFocusable,Ye=Pe===void 0?bn.isFocusable:Pe,Lt=t.barAriaLabel,Bn=t.barAriaLabelledBy,or=t.barAriaDescribedBy,fo=t.initialHiddenIds,Fs=yi(),$s=Fs.animate,Oa=Fs.config,Kr=qR(s,a,i),ji=Kr.outerWidth,Ls=Kr.outerHeight,qi=Kr.margin,lr=Kr.innerWidth,Yr=Kr.innerHeight,Xt=T9({indexBy:n,label:B,tooltipLabel:se,valueFormat:ae,colors:Q,colorBy:K,borderColor:H,labelTextColor:ne,groupMode:o,layout:l,reverse:c,data:e,keys:r,minValue:u,maxValue:d,margin:qi,width:lr,height:Yr,padding:f,innerPadding:m,valueScale:h,indexScale:p,enableLabel:F,labelSkipWidth:q,labelSkipHeight:U,legends:Te,legendLabel:le,initialHiddenIds:fo}),fs=Xt.bars,ps=Xt.barsWithValue,Si=Xt.xScale,Me=Xt.yScale,Qe=Xt.getLabel,Ct=Xt.getTooltipLabel,dt=Xt.getBorderColor,lt=Xt.getLabelColor,cr=Xt.shouldRenderBarLabel,on=Xt.toggleSerie,qt=Xt.legendsWithData,ms=Kd(ps,{keys:function(be){return be.key},from:function(be){return Bt({borderColor:dt(be),color:be.color,height:0,labelColor:lt(be),labelOpacity:0,labelX:be.width/2,labelY:be.height/2,transform:"translate("+be.x+", "+(be.y+be.height)+")",width:be.width},l==="vertical"?{}:{height:be.height,transform:"translate("+be.x+", "+be.y+")",width:0})},enter:function(be){return{borderColor:dt(be),color:be.color,height:be.height,labelColor:lt(be),labelOpacity:1,labelX:be.width/2,labelY:be.height/2,transform:"translate("+be.x+", "+be.y+")",width:be.width}},update:function(be){return{borderColor:dt(be),color:be.color,height:be.height,labelColor:lt(be),labelOpacity:1,labelX:be.width/2,labelY:be.height/2,transform:"translate("+be.x+", "+be.y+")",width:be.width}},leave:function(be){return Bt({borderColor:dt(be),color:be.color,height:0,labelColor:lt(be),labelOpacity:0,labelX:be.width/2,labelY:0,transform:"translate("+be.x+", "+(be.y+be.height)+")",width:be.width},l==="vertical"?{}:{labelX:0,labelY:be.height/2,height:be.height,transform:"translate("+be.x+", "+be.y+")",width:0})},config:Oa,immediate:!$s}),Bs=P.useMemo(function(){return{borderRadius:oe,borderWidth:me,enableLabel:F,isInteractive:ke,labelSkipWidth:q,labelSkipHeight:U,onClick:De,onMouseEnter:He,onMouseLeave:_e,getTooltipLabel:Ct,tooltip:Oe,isFocusable:Ye,ariaLabel:Lt,ariaLabelledBy:Bn,ariaDescribedBy:or}},[oe,me,F,Ct,ke,U,q,De,He,_e,Oe,Ye,Lt,Bn,or]),Da=YL(G,fs,te,{dataKey:"data",targetKey:"data.fill"}),Jr={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null};M.includes("annotations")&&(Jr.annotations=S.jsx(kke,{bars:fs,annotations:X},"annotations")),M.includes("axes")&&(Jr.axes=S.jsx(O2e,{xScale:Si,yScale:Me,width:lr,height:Yr,top:g,right:v,bottom:b,left:R},"axes")),M.includes("bars")&&(Jr.bars=S.jsx(P.Fragment,{children:ms(function(be,ft){return P.createElement(O,Bt({},Bs,{bar:ft,style:be,shouldRenderLabel:cr(ft),label:Qe(ft.data)}))})},"bars")),M.includes("grid")&&(Jr.grid=S.jsx(I2e,{width:lr,height:Yr,xScale:E?Si:null,yScale:T?Me:null,xValues:_,yValues:D},"grid")),M.includes("legends")&&(Jr.legends=S.jsx(Pke,{width:lr,height:Yr,legends:qt,toggleSerie:on},"legends")),M.includes("markers")&&(Jr.markers=S.jsx(bwe,{markers:J,width:lr,height:Yr,xScale:Si,yScale:Me},"markers"));var yl=P.useMemo(function(){return Bt({},Bs,{margin:qi,width:s,height:a,innerWidth:lr,innerHeight:Yr,bars:fs,legendData:qt,enableLabel:F,xScale:Si,yScale:Me,tooltip:Oe,getTooltipLabel:Ct,onClick:De,onMouseEnter:He,onMouseLeave:_e})},[Bs,qi,s,a,lr,Yr,fs,qt,F,Si,Me,Oe,Ct,De,He,_e]);return S.jsx(HR,{width:ji,height:Ls,margin:qi,defs:Da,role:Ke,ariaLabel:fe,ariaLabelledBy:Re,ariaDescribedBy:Ue,isFocusable:Ye,children:M.map(function(be,ft){var vm;return typeof be=="function"?S.jsx(P.Fragment,{children:P.createElement(be,yl)},ft):(vm=Jr==null?void 0:Jr[be])!=null?vm:null})})},Vke=function(t){var e=t.isInteractive,n=e===void 0?bn.isInteractive:e,r=t.animate,i=r===void 0?bn.animate:r,s=t.motionConfig,a=s===void 0?bn.motionConfig:s,o=t.theme,l=t.renderWrapper,c=ah(t,Hke);return S.jsx(Hb,{animate:i,isInteractive:n,motionConfig:a,renderWrapper:l,theme:o,children:S.jsx(Uke,Bt({isInteractive:n},c))})},Wke=["isInteractive","renderWrapper","theme"],GS=function(t,e,n,r){return t.find(function(i){return Swe(i.x+e.left,i.y+e.top,i.width,i.height,n,r)})},Gke=function(t){var e=t.data,n=t.indexBy,r=t.keys,i=t.margin,s=t.width,a=t.height,o=t.groupMode,l=t.layout,c=t.reverse,u=t.minValue,d=t.maxValue,h=t.valueScale,p=t.indexScale,f=t.padding,m=t.innerPadding,g=t.axisTop,v=t.axisRight,y=t.axisBottom,b=y===void 0?Xr.axisBottom:y,C=t.axisLeft,R=C===void 0?Xr.axisLeft:C,w=t.enableGridX,E=w===void 0?Xr.enableGridX:w,k=t.enableGridY,T=k===void 0?Xr.enableGridY:k,_=t.gridXValues,D=t.gridYValues,I=t.layers,M=I===void 0?Xr.layers:I,A=t.renderBar,O=A===void 0?function(Me,Qe){var Ct=Qe.bar,dt=Ct.color,lt=Ct.height,cr=Ct.width,on=Ct.x,qt=Ct.y,ms=Qe.borderColor,Bs=Qe.borderRadius,Da=Qe.borderWidth,Jr=Qe.label,yl=Qe.labelColor,be=Qe.shouldRenderLabel;if(Me.fillStyle=dt,Da>0&&(Me.strokeStyle=ms,Me.lineWidth=Da),Me.beginPath(),Bs>0){var ft=Math.min(Bs,lt);Me.moveTo(on+ft,qt),Me.lineTo(on+cr-ft,qt),Me.quadraticCurveTo(on+cr,qt,on+cr,qt+ft),Me.lineTo(on+cr,qt+lt-ft),Me.quadraticCurveTo(on+cr,qt+lt,on+cr-ft,qt+lt),Me.lineTo(on+ft,qt+lt),Me.quadraticCurveTo(on,qt+lt,on,qt+lt-ft),Me.lineTo(on,qt+ft),Me.quadraticCurveTo(on,qt,on+ft,qt),Me.closePath()}else Me.rect(on,qt,cr,lt);Me.fill(),Da>0&&Me.stroke(),be&&(Me.textBaseline="middle",Me.textAlign="center",Me.fillStyle=yl,Me.fillText(Jr,on+cr/2,qt+lt/2))}:A,L=t.enableLabel,F=L===void 0?Xr.enableLabel:L,B=t.label,j=t.labelSkipWidth,q=j===void 0?Xr.labelSkipWidth:j,V=t.labelSkipHeight,U=V===void 0?Xr.labelSkipHeight:V,ne=t.labelTextColor,W=t.colorBy,J=t.colors,K=t.borderRadius,Q=K===void 0?Xr.borderRadius:K,re=t.borderWidth,G=re===void 0?Xr.borderWidth:re,ie=t.borderColor,te=t.annotations,Z=te===void 0?Xr.annotations:te,oe=t.legendLabel,ue=t.tooltipLabel,me=t.valueFormat,H=t.isInteractive,Y=H===void 0?Xr.isInteractive:H,X=t.tooltip,le=X===void 0?Xr.tooltip:X,se=t.onClick,ae=t.onMouseEnter,ve=t.onMouseLeave,ke=t.legends,Ee=t.pixelRatio,Oe=Ee===void 0?Xr.pixelRatio:Ee,De=t.canvasRef,He=P.useRef(null),_e=an(),Te=qR(s,a,i),Ce=Te.margin,Ke=Te.innerWidth,fe=Te.innerHeight,Re=Te.outerWidth,Ue=Te.outerHeight,Pe=T9({indexBy:n,label:B,tooltipLabel:ue,valueFormat:me,colors:J,colorBy:W,borderColor:ie,labelTextColor:ne,groupMode:o,layout:l,reverse:c,data:e,keys:r,minValue:u,maxValue:d,margin:Ce,width:Ke,height:fe,padding:f,innerPadding:m,valueScale:h,indexScale:p,enableLabel:F,labelSkipWidth:q,labelSkipHeight:U,legends:ke,legendLabel:oe}),Ye=Pe.bars,Lt=Pe.barsWithValue,Bn=Pe.xScale,or=Pe.yScale,fo=Pe.getLabel,Fs=Pe.getTooltipLabel,$s=Pe.getBorderColor,Oa=Pe.getLabelColor,Kr=Pe.shouldRenderBarLabel,ji=Pe.legendsWithData,Ls=QT(),qi=Ls.showTooltipFromEvent,lr=Ls.hideTooltip,Yr=JRe({annotations:f9({data:Ye,annotations:Z,getPosition:function(Me){return{x:Me.x,y:Me.y}},getDimensions:function(Me){var Qe=Me.width,Ct=Me.height;return{width:Qe,height:Ct,size:Math.max(Qe,Ct)}}})}),Xt=P.useMemo(function(){return{borderRadius:Q,borderWidth:G,isInteractive:Y,isFocusable:!1,labelSkipWidth:q,labelSkipHeight:U,margin:Ce,width:s,height:a,innerWidth:Ke,innerHeight:fe,bars:Ye,legendData:ji,enableLabel:F,xScale:Bn,yScale:or,tooltip:le,getTooltipLabel:Fs,onClick:se,onMouseEnter:ae,onMouseLeave:ve}},[Q,G,Y,q,U,Ce,s,a,Ke,fe,Ye,ji,F,Bn,or,le,Fs,se,ae,ve]);P.useEffect(function(){var Me,Qe=(Me=He.current)==null?void 0:Me.getContext("2d");He.current&&Qe&&(He.current.width=Re*Oe,He.current.height=Ue*Oe,Qe.scale(Oe,Oe),Qe.fillStyle=_e.background,Qe.fillRect(0,0,Re,Ue),Qe.translate(Ce.left,Ce.top),M.forEach(function(Ct){Ct==="grid"?typeof _e.grid.line.strokeWidth=="number"&&_e.grid.line.strokeWidth>0&&(Qe.lineWidth=_e.grid.line.strokeWidth,Qe.strokeStyle=_e.grid.line.stroke,E&&N3(Qe,{width:s,height:a,scale:Bn,axis:"x",values:_}),T&&N3(Qe,{width:s,height:a,scale:or,axis:"y",values:D})):Ct==="axes"?N2e(Qe,{xScale:Bn,yScale:or,width:Ke,height:fe,top:g,right:v,bottom:b,left:R,theme:_e}):Ct==="bars"?Lt.forEach(function(dt){O(Qe,{bar:dt,borderColor:$s(dt),borderRadius:Q,borderWidth:G,label:fo(dt.data),labelColor:Oa(dt),shouldRenderLabel:Kr(dt)})}):Ct==="legends"?ji.forEach(function(dt){var lt=dt[0],cr=dt[1];Rke(Qe,Bt({},lt,{data:cr,containerWidth:Ke,containerHeight:fe,theme:_e}))}):Ct==="annotations"?rke(Qe,{annotations:Yr,theme:_e}):typeof Ct=="function"&&Ct(Qe,Xt)}),Qe.save())},[b,R,v,g,Lt,Q,G,Yr,E,T,$s,fo,Oa,_,D,o,a,fe,Ke,Xt,M,l,ji,Ce.left,Ce.top,Ue,Re,Oe,O,Bn,or,c,Kr,_e,s]);var fs=P.useCallback(function(Me){if(Ye&&He.current){var Qe=US(He.current,Me),Ct=Qe[0],dt=Qe[1],lt=GS(Ye,Ce,Ct,dt);lt!==void 0?(qi(P.createElement(le,Bt({},lt.data,{color:lt.color,label:lt.label,value:Number(lt.data.value)})),Me),Me.type==="mouseenter"&&(ae==null||ae(lt.data,Me))):lr()}},[lr,Ce,ae,Ye,qi,le]),ps=P.useCallback(function(Me){if(Ye&&He.current){lr();var Qe=US(He.current,Me),Ct=Qe[0],dt=Qe[1],lt=GS(Ye,Ce,Ct,dt);lt&&(ve==null||ve(lt.data,Me))}},[lr,Ce,ve,Ye]),Si=P.useCallback(function(Me){if(Ye&&He.current){var Qe=US(He.current,Me),Ct=Qe[0],dt=Qe[1],lt=GS(Ye,Ce,Ct,dt);lt!==void 0&&(se==null||se(Bt({},lt.data,{color:lt.color}),Me))}},[Ce,se,Ye]);return S.jsx("canvas",{ref:function(Me){He.current=Me,De&&"current"in De&&(De.current=Me)},width:Re*Oe,height:Ue*Oe,style:{width:Re,height:Ue,cursor:Y?"auto":"normal"},onMouseEnter:Y?fs:void 0,onMouseMove:Y?fs:void 0,onMouseLeave:Y?ps:void 0,onClick:Y?Si:void 0})},Kke=P.forwardRef(function(t,e){var n=t.isInteractive,r=t.renderWrapper,i=t.theme,s=ah(t,Wke);return S.jsx(Hb,{isInteractive:n,renderWrapper:r,theme:i,animate:!1,children:S.jsx(Gke,Bt({},s,{canvasRef:e}))})}),R9=function(t){return S.jsx(Ub,{children:function(e){var n=e.width,r=e.height;return S.jsx(Vke,Bt({width:n,height:r},t))}})};P.forwardRef(function(t,e){return S.jsx(Ub,{children:function(n){var r=n.width,i=n.height;return S.jsx(Kke,Bt({width:r,height:i},t,{ref:e}))}})});function Yke(){const{tasksCompleted:t,tasksCompletedLoading:e}=P.useContext(Vn),n=Xke(t);return S.jsx("div",{children:e?S.jsx(Yp,{}):S.jsx(Jke,{data:n,tasksCompleted:t})})}function Jke({data:t}){return S.jsx("div",{className:O8.bar_chart,children:S.jsx(R9,{data:t,keys:["Blood Test","Radiology","Reviews","Discharge","Other"],indexBy:"date",margin:{top:50,right:60,bottom:50,left:60},padding:.3,valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:"paired"},borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"7 Days",legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Tasks",legendPosition:"middle",legendOffset:-40},enableGridY:!1,labelSkipWidth:18,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["brighter",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],animate:!1,role:"application",ariaLabel:"Nivo bar chart demo",barAriaLabel:function(e){return e.id+": "+e.formattedValue+" in country: "+e.indexValue}})})}function Xke(t){const e=new Date().toLocaleDateString(),n=new Date(new Date().setDate(new Date().getDate()-1)).toLocaleDateString(),r=new Date(new Date().setDate(new Date().getDate()-2)).toLocaleDateString(),i=new Date(new Date().setDate(new Date().getDate()-3)).toLocaleDateString(),s=new Date(new Date().setDate(new Date().getDate()-4)).toLocaleDateString(),a=new Date(new Date().setDate(new Date().getDate()-5)).toLocaleDateString(),o=new Date(new Date().setDate(new Date().getDate()-6)).toLocaleDateString(),l="hsl(128, 70%, 50%)",c="hsl(163, 70%, 50%)",u="hsl(211, 70%, 50%)",d="hsl(144, 70%, 50%)",h="hsl(191, 70%, 50%)";let p=[{date:`${o}`,"Blood Test":0,bloodTestColor:`${l}`,Radiology:0,radiologyColor:`${c}`,Reviews:0,reviewsColor:`${u}`,Discharge:0,dischargeColor:`${d}`,Other:0,otherColor:`${h}`},{date:`${a}`,"Blood Test":0,bloodTestColor:`${l}`,Radiology:0,radiologyColor:`${c}`,Reviews:0,reviewsColor:`${u}`,Discharge:0,dischargeColor:`${d}`,Other:0,otherColor:`${h}`},{date:`${s}`,"Blood Test":0,bloodTestColor:`${l}`,Radiology:0,radiologyColor:`${c}`,Reviews:0,reviewsColor:`${u}`,Discharge:0,dischargeColor:`${d}`,Other:0,otherColor:`${h}`},{date:`${i}`,"Blood Test":0,bloodTestColor:`${l}`,Radiology:0,radiologyColor:`${c}`,Reviews:0,reviewsColor:`${u}`,Discharge:0,dischargeColor:`${d}`,Other:0,otherColor:`${h}`},{date:`${r}`,"Blood Test":0,bloodTestColor:`${l}`,Radiology:0,radiologyColor:`${c}`,Reviews:0,reviewsColor:`${u}`,Discharge:0,dischargeColor:`${d}`,Other:0,otherColor:`${h}`},{date:`${n}`,"Blood Test":0,bloodTestColor:`${l}`,Radiology:0,radiologyColor:`${c}`,Reviews:0,reviewsColor:`${u}`,Discharge:0,dischargeColor:`${d}`,Other:0,otherColor:`${h}`},{date:`${e}`,"Blood Test":0,bloodTestColor:`${l}`,Radiology:0,radiologyColor:`${c}`,Reviews:0,reviewsColor:`${u}`,Discharge:0,dischargeColor:`${d}`,Other:0,otherColor:`${h}`}];function f(g,v){return g.getDate()==v.getDate()&&g.getMonth()==v.getMonth()&&g.getFullYear()==v.getFullYear()}const m=["Blood Test","Radiology","Reviews","Discharge","Other"];return t.map(g=>{if(g)for(let v=0;v<=6;v++)f(new Date(g.finished_at),new Date(new Date().setDate(new Date().getDate()-v)))&&m.includes(g.type)&&p[6-v][g.type]++}),p}function Qke(){return S.jsx("div",{children:S.jsx(Nc,{children:S.jsxs(Fc,{children:[S.jsx(yt,{gutterBottom:!0,variant:"h5",component:"div",children:"My Analytics"}),S.jsx("div",{className:O8.bar_chart,children:S.jsx(Yke,{})})]})})})}const Zke={width:"100%",maxWidth:360,bgcolor:"background.paper",margin:"auto"};function ePe(){const[t,e]=P.useState(!1);return t?S.jsx(nPe,{setEditOff:()=>e(!1)}):S.jsx(tPe,{setEditOn:()=>e(!0)})}function tPe({setEditOn:t}){P.useContext(Vn);function e(){t()}return S.jsx("div",{children:S.jsxs(ct,{sx:{mx:"auto",px:5},children:[S.jsx(pl,{sx:Zke,component:"nav","aria-label":"mailbox folders",children:S.jsx(qn,{button:!0,children:S.jsx(Qn,{primary:"Password",secondary:"********"})})}),S.jsx(ht,{variant:"contained",onClick:e,children:" Change Password"})]})})}function nPe({setEditOff:t}){var h,p;const{register:e,handleSubmit:n,formState:{errors:r},watch:i}=A8(),{userProfile:s,updateUserPassword:a}=P.useContext(Vn),[o,l]=P.useState(!1);function c(f){a(s._id,f.password),t()}const u=()=>{t()},d=()=>{l(!o)};return S.jsxs(uT,{children:[S.jsx(yt,{gutterBottom:!0,variant:"h5",component:"div",textAlign:"center",children:"Change Password"}),S.jsxs("form",{onSubmit:n(c),children:[S.jsxs(ct,{children:[S.jsx(_n,{margin:"dense",varient:"outlined",label:"Password",fullWidth:!0,type:o?"text":"password",...e("password",{required:"password is required",minLength:{value:8,message:"password must be at least 8 characters"},maxLength:{value:30,message:"Username must be atmost 30 characters long"}}),error:!!(r!=null&&r.password),helperText:(h=r.password)==null?void 0:h.message,InputProps:{endAdornment:S.jsx(jN,{position:"end",children:S.jsx(ii,{onClick:d,onMouseDown:f=>f.preventDefault(),children:o?S.jsx(wT,{}):S.jsx(ST,{})})})}}),S.jsx(_n,{margin:"dense",varient:"outlined",label:"Confirm Password",fullWidth:!0,type:o?"text":"password",...e("confirm_password",{required:"comfirm password is required",validate:f=>{if(f!==i("password"))return"your password does not match"}}),error:!!(r!=null&&r.confirm_password),helperText:(p=r.confirm_password)==null?void 0:p.message})]}),S.jsxs(ct,{sx:{display:"flex",flexDirection:"column",gap:"5px",paddingTop:"5px"},children:[S.jsx(ht,{type:"submit",variant:"contained",color:"primary",children:"Save"}),S.jsx(ht,{variant:"outlined",color:"inherit",onClick:u,sx:{borderColor:"primary.main",color:"primary.main"},children:"Cancel"})]})]})]})}function rPe(){return S.jsx(ct,{sx:{flexGrow:1},children:S.jsxs(at,{container:!0,spacing:8,mt:10,children:[S.jsxs(at,{container:!0,item:!0,spacing:3,xs:12,md:4,children:[S.jsx(at,{item:!0,xs:12,md:12,children:S.jsx("div",{children:S.jsx(Coe,{})})}),S.jsx(at,{item:!0,xs:12,md:12,children:S.jsx(ePe,{})})]}),S.jsx(at,{item:!0,xs:12,md:8,children:S.jsx("div",{children:S.jsx(Qke,{})})})]})})}function iPe(){return S.jsx("div",{children:S.jsx("div",{children:S.jsx(rPe,{})})})}const sPe={width:"100%",maxWidth:360,bgcolor:"background.paper"};function aPe({patientList:t}){const e=Mc();if(t)return S.jsx("div",{children:S.jsxs(ct,{sx:{mx:"auto",px:5},children:[S.jsx(yt,{gutterBottom:!0,variant:"h5",component:"div",children:"Patients"}),S.jsx(bd,{}),S.jsx(pl,{sx:sPe,component:"nav","aria-label":"mailbox folders",children:t.map((n,r)=>S.jsx(qn,{button:!0,onClick:()=>{e(`/patientdetails/${n._id}`)},children:S.jsx(Qn,{primary:n.fname+" "+n.lname})},r))})]})})}const oPe="_bar_chart_1jv85_1",k9={bar_chart:oPe};function lPe({completedTasks:t}){let e=[];return t&&(e=cPe(t)),S.jsx("div",{className:k9.bar_chart,children:S.jsx(R9,{data:e,keys:["Blood Test","Radiology","Reviews","Discharge","Other"],indexBy:"date",margin:{top:50,right:130,bottom:50,left:60},padding:.3,valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:"paired"},borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"7 Days",legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Tasks",legendPosition:"middle",legendOffset:-40},enableGridY:!1,labelSkipWidth:18,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["brighter",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],animate:!1,role:"application",ariaLabel:"Nivo bar chart demo",barAriaLabel:function(n){return n.id+": "+n.formattedValue+" in country: "+n.indexValue}})})}function cPe(t){const e=new Date().toLocaleDateString(),n=new Date(new Date().setDate(new Date().getDate()-1)).toLocaleDateString(),r=new Date(new Date().setDate(new Date().getDate()-2)).toLocaleDateString(),i=new Date(new Date().setDate(new Date().getDate()-3)).toLocaleDateString(),s=new Date(new Date().setDate(new Date().getDate()-4)).toLocaleDateString(),a=new Date(new Date().setDate(new Date().getDate()-5)).toLocaleDateString(),o=new Date(new Date().setDate(new Date().getDate()-6)).toLocaleDateString(),l="hsl(128, 70%, 50%)",c="hsl(163, 70%, 50%)",u="hsl(211, 70%, 50%)",d="hsl(144, 70%, 50%)",h="hsl(191, 70%, 50%)";let p=[{date:`${o}`,"Blood Test":0,bloodTestColor:`${l}`,Radiology:0,radiologyColor:`${c}`,Reviews:0,reviewsColor:`${u}`,Discharge:0,dischargeColor:`${d}`,Other:0,otherColor:`${h}`},{date:`${a}`,"Blood Test":0,bloodTestColor:`${l}`,Radiology:0,radiologyColor:`${c}`,Reviews:0,reviewsColor:`${u}`,Discharge:0,dischargeColor:`${d}`,Other:0,otherColor:`${h}`},{date:`${s}`,"Blood Test":0,bloodTestColor:`${l}`,Radiology:0,radiologyColor:`${c}`,Reviews:0,reviewsColor:`${u}`,Discharge:0,dischargeColor:`${d}`,Other:0,otherColor:`${h}`},{date:`${i}`,"Blood Test":0,bloodTestColor:`${l}`,Radiology:0,radiologyColor:`${c}`,Reviews:0,reviewsColor:`${u}`,Discharge:0,dischargeColor:`${d}`,Other:0,otherColor:`${h}`},{date:`${r}`,"Blood Test":0,bloodTestColor:`${l}`,Radiology:0,radiologyColor:`${c}`,Reviews:0,reviewsColor:`${u}`,Discharge:0,dischargeColor:`${d}`,Other:0,otherColor:`${h}`},{date:`${n}`,"Blood Test":0,bloodTestColor:`${l}`,Radiology:0,radiologyColor:`${c}`,Reviews:0,reviewsColor:`${u}`,Discharge:0,dischargeColor:`${d}`,Other:0,otherColor:`${h}`},{date:`${e}`,"Blood Test":0,bloodTestColor:`${l}`,Radiology:0,radiologyColor:`${c}`,Reviews:0,reviewsColor:`${u}`,Discharge:0,dischargeColor:`${d}`,Other:0,otherColor:`${h}`}];function f(g,v){return g.getDate()==v.getDate()&&g.getMonth()==v.getMonth()&&g.getFullYear()==v.getFullYear()}const m=["Blood Test","Radiology","Reviews","Discharge","Other"];return t.map(g=>{if(g)for(let v=0;v<=6;v++)f(new Date(g.finished_at),new Date(new Date().setDate(new Date().getDate()-v)))&&m.includes(g.type)&&p[6-v][g.type]++}),p}function uPe({completedTasks:t}){return S.jsx("div",{children:S.jsx(Nc,{children:S.jsxs(Fc,{children:[S.jsx(yt,{gutterBottom:!0,variant:"h5",component:"div",children:"Team Performance"}),S.jsx("div",{className:k9.bar_chart,children:S.jsx(lPe,{completedTasks:t})})]})})})}function Ut(){return Ut=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ut.apply(this,arguments)}var dPe={pointerEvents:"none"},hPe=function(t){var e=t.label,n=t.style,r=an();return S.jsx(Gt.g,{transform:n.transform,opacity:n.progress,style:dPe,children:S.jsx(Gt.text,{textAnchor:"middle",dominantBaseline:"central",style:Ut({},r.labels.text,{fill:n.textColor}),children:e})})},P9=function(t){var e=t%(2*Math.PI);return e<0&&(e+=2*Math.PI),e},fPe=function(t,e){return t.filter(function(n){return Math.abs(Vb(n.arc.endAngle-n.arc.startAngle))>=e})},pPe={startAngle:{enter:function(t){return Ut({},t,{endAngle:t.startAngle})},update:function(t){return t},leave:function(t){return Ut({},t,{startAngle:t.endAngle})}},middleAngle:{enter:function(t){var e=t.startAngle+(t.endAngle-t.startAngle)/2;return Ut({},t,{startAngle:e,endAngle:e})},update:function(t){return t},leave:function(t){var e=t.startAngle+(t.endAngle-t.startAngle)/2;return Ut({},t,{startAngle:e,endAngle:e})}},endAngle:{enter:function(t){return Ut({},t,{startAngle:t.endAngle})},update:function(t){return t},leave:function(t){return Ut({},t,{endAngle:t.startAngle})}},innerRadius:{enter:function(t){return Ut({},t,{outerRadius:t.innerRadius})},update:function(t){return t},leave:function(t){return Ut({},t,{innerRadius:t.outerRadius})}},centerRadius:{enter:function(t){var e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;return Ut({},t,{innerRadius:e,outerRadius:e})},update:function(t){return t},leave:function(t){var e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;return Ut({},t,{innerRadius:e,outerRadius:e})}},outerRadius:{enter:function(t){return Ut({},t,{innerRadius:t.outerRadius})},update:function(t){return t},leave:function(t){return Ut({},t,{outerRadius:t.innerRadius})}},pushIn:{enter:function(t){return Ut({},t,{innerRadius:t.innerRadius-t.outerRadius+t.innerRadius,outerRadius:t.innerRadius})},update:function(t){return t},leave:function(t){return Ut({},t,{innerRadius:t.outerRadius,outerRadius:t.outerRadius+t.outerRadius-t.innerRadius})}},pushOut:{enter:function(t){return Ut({},t,{innerRadius:t.outerRadius,outerRadius:t.outerRadius+t.outerRadius-t.innerRadius})},update:function(t){return t},leave:function(t){return Ut({},t,{innerRadius:t.innerRadius-t.outerRadius+t.innerRadius,outerRadius:t.innerRadius})}}},_9=function(t,e){return P.useMemo(function(){var n=pPe[t];return{enter:function(r){return Ut({progress:0},n.enter(r.arc),e?e.enter(r):{})},update:function(r){return Ut({progress:1},n.update(r.arc),e?e.update(r):{})},leave:function(r){return Ut({progress:0},n.leave(r.arc),e?e.leave(r):{})}}},[t,e])},mPe=function(t,e){var n=hwe(t)-Math.PI/2,r=t.innerRadius+(t.outerRadius-t.innerRadius)*e;return Xl(n,r)},gPe=function(t){return function(e,n,r,i){return rl([e,n,r,i],function(s,a,o,l){var c=mPe({startAngle:s,endAngle:a,innerRadius:o,outerRadius:l},t);return"translate("+c.x+","+c.y+")"})}},vPe=function(t,e,n,r){e===void 0&&(e=.5),n===void 0&&(n="innerRadius");var i=yi(),s=i.animate,a=i.config,o=_9(n,r);return{transition:Kd(t,{keys:function(l){return l.id},initial:o.update,from:o.enter,enter:o.update,update:o.update,leave:o.leave,config:a,immediate:!s}),interpolate:gPe(e)}},yPe=function(t){var e=t.center,n=t.data,r=t.transitionMode,i=t.label,s=t.radiusOffset,a=t.skipAngle,o=t.textColor,l=t.component,c=l===void 0?hPe:l,u=Ql(i),d=an(),h=Ad(o,d),p=P.useMemo(function(){return n.filter(function(y){return Math.abs(Vb(y.arc.endAngle-y.arc.startAngle))>=a})},[n,a]),f=vPe(p,s,r),m=f.transition,g=f.interpolate,v=c;return S.jsx("g",{transform:"translate("+e[0]+","+e[1]+")",children:m(function(y,b){return P.createElement(v,{key:b.id,datum:b,label:u(b),style:Ut({},y,{transform:g(y.startAngle,y.endAngle,y.innerRadius,y.outerRadius),textColor:h(b)})})})})},bPe=function(t){var e=t.label,n=t.style,r=an();return S.jsxs(Gt.g,{opacity:n.opacity,children:[S.jsx(Gt.path,{fill:"none",stroke:n.linkColor,strokeWidth:n.thickness,d:n.path}),S.jsx(Gt.text,{transform:n.textPosition,textAnchor:n.textAnchor,dominantBaseline:"central",style:Ut({},r.labels.text,{fill:n.textColor}),children:e})]})},SPe=function(t){var e=P9(t.startAngle+(t.endAngle-t.startAngle)/2-Math.PI/2);return e<Math.PI/2||e>1.5*Math.PI?"start":"end"},A9=function(t,e,n,r){var i,s,a=P9(t.startAngle+(t.endAngle-t.startAngle)/2-Math.PI/2),o=Xl(a,t.outerRadius+e),l=Xl(a,t.outerRadius+e+n);return a<Math.PI/2||a>1.5*Math.PI?(i="after",s={x:l.x+r,y:l.y}):(i="before",s={x:l.x-r,y:l.y}),{side:i,points:[o,l,s]}},xPe=Mbe().x(function(t){return t.x}).y(function(t){return t.y}),wPe=function(t,e,n,r,i,s,a){return rl([t,e,n,r,i,s,a],function(o,l,c,u,d,h,p){var f=A9({startAngle:o,endAngle:l,innerRadius:c,outerRadius:u},d,h,p).points;return xPe(f)})},CPe=function(t,e,n,r){return rl([t,e,n,r],function(i,s,a,o){return SPe({startAngle:i,endAngle:s,innerRadius:a,outerRadius:o})})},EPe=function(t,e,n,r,i,s,a,o){return rl([t,e,n,r,i,s,a,o],function(l,c,u,d,h,p,f,m){var g=A9({startAngle:l,endAngle:c,innerRadius:u,outerRadius:d},h,p,f),v=g.points,y=g.side,b=v[2];return y==="before"?b.x-=m:b.x+=m,"translate("+b.x+","+b.y+")"})},TPe=function(t){var e=t.data,n=t.offset,r=n===void 0?0:n,i=t.diagonalLength,s=t.straightLength,a=t.skipAngle,o=a===void 0?0:a,l=t.textOffset,c=t.linkColor,u=t.textColor,d=yi(),h=d.animate,p=d.config,f=an(),m=Ad(c,f),g=Ad(u,f),v=function(b,C){return P.useMemo(function(){return fPe(b,C)},[b,C])}(e,o),y=function(b){var C=b.offset,R=b.diagonalLength,w=b.straightLength,E=b.textOffset,k=b.getLinkColor,T=b.getTextColor;return P.useMemo(function(){return{enter:function(_){return{startAngle:_.arc.startAngle,endAngle:_.arc.endAngle,innerRadius:_.arc.innerRadius,outerRadius:_.arc.outerRadius,offset:C,diagonalLength:0,straightLength:0,textOffset:E,linkColor:k(_),textColor:T(_),opacity:0}},update:function(_){return{startAngle:_.arc.startAngle,endAngle:_.arc.endAngle,innerRadius:_.arc.innerRadius,outerRadius:_.arc.outerRadius,offset:C,diagonalLength:R,straightLength:w,textOffset:E,linkColor:k(_),textColor:T(_),opacity:1}},leave:function(_){return{startAngle:_.arc.startAngle,endAngle:_.arc.endAngle,innerRadius:_.arc.innerRadius,outerRadius:_.arc.outerRadius,offset:C,diagonalLength:0,straightLength:0,textOffset:E,linkColor:k(_),textColor:T(_),opacity:0}}}},[R,w,E,k,T])}({offset:r,diagonalLength:i,straightLength:s,textOffset:l,getLinkColor:m,getTextColor:g});return{transition:Kd(v,{keys:function(b){return b.id},initial:y.update,from:y.enter,enter:y.update,update:y.update,leave:y.leave,config:p,immediate:!h}),interpolateLink:wPe,interpolateTextAnchor:CPe,interpolateTextPosition:EPe}},RPe=function(t){var e=t.center,n=t.data,r=t.label,i=t.skipAngle,s=t.offset,a=t.diagonalLength,o=t.straightLength,l=t.strokeWidth,c=t.textOffset,u=t.textColor,d=t.linkColor,h=t.component,p=h===void 0?bPe:h,f=Ql(r),m=TPe({data:n,skipAngle:i,offset:s,diagonalLength:a,straightLength:o,textOffset:c,linkColor:d,textColor:u}),g=m.transition,v=m.interpolateLink,y=m.interpolateTextAnchor,b=m.interpolateTextPosition,C=p;return S.jsx("g",{transform:"translate("+e[0]+","+e[1]+")",children:g(function(R,w){return P.createElement(C,{key:w.id,datum:w,label:f(w),style:Ut({},R,{thickness:l,path:v(R.startAngle,R.endAngle,R.innerRadius,R.outerRadius,R.offset,R.diagonalLength,R.straightLength),textAnchor:y(R.startAngle,R.endAngle,R.innerRadius,R.outerRadius),textPosition:b(R.startAngle,R.endAngle,R.innerRadius,R.outerRadius,R.offset,R.diagonalLength,R.straightLength,R.textOffset)})})})})},kPe=function(t){var e=t.datum,n=t.style,r=t.onClick,i=t.onMouseEnter,s=t.onMouseMove,a=t.onMouseLeave,o=P.useCallback(function(d){return r==null?void 0:r(e,d)},[r,e]),l=P.useCallback(function(d){return i==null?void 0:i(e,d)},[i,e]),c=P.useCallback(function(d){return s==null?void 0:s(e,d)},[s,e]),u=P.useCallback(function(d){return a==null?void 0:a(e,d)},[a,e]);return S.jsx(Gt.path,{d:n.path,opacity:n.opacity,fill:e.fill||n.color,stroke:n.borderColor,strokeWidth:n.borderWidth,onClick:r?o:void 0,onMouseEnter:i?l:void 0,onMouseMove:s?c:void 0,onMouseLeave:a?u:void 0})},PPe=function(t,e,n,r,i){return rl([t,e,n,r],function(s,a,o,l){return i({startAngle:s,endAngle:a,innerRadius:Math.max(0,o),outerRadius:Math.max(0,l)})})},_Pe=function(t,e,n){e===void 0&&(e="innerRadius");var r=yi(),i=r.animate,s=r.config,a=_9(e,n);return{transition:Kd(t,{keys:function(o){return o.id},initial:a.update,from:a.enter,enter:a.update,update:a.update,leave:a.leave,config:s,immediate:!i}),interpolate:PPe}},APe=function(t){var e=t.center,n=t.data,r=t.arcGenerator,i=t.borderWidth,s=t.borderColor,a=t.onClick,o=t.onMouseEnter,l=t.onMouseMove,c=t.onMouseLeave,u=t.transitionMode,d=t.component,h=d===void 0?kPe:d,p=an(),f=Ad(s,p),m=_Pe(n,u,{enter:function(b){return{opacity:0,color:b.color,borderColor:f(b)}},update:function(b){return{opacity:1,color:b.color,borderColor:f(b)}},leave:function(b){return{opacity:0,color:b.color,borderColor:f(b)}}}),g=m.transition,v=m.interpolate,y=h;return S.jsx("g",{transform:"translate("+e[0]+","+e[1]+")",children:g(function(b,C){return P.createElement(y,{key:C.id,datum:C,style:Ut({},b,{borderWidth:i,path:v(b.startAngle,b.endAngle,b.innerRadius,b.outerRadius,r)}),onClick:a,onMouseEnter:o,onMouseMove:l,onMouseLeave:c})})})},OPe=function(t,e,n,r,i,s){s===void 0&&(s=!0);var a=[],o=Xl(ns(r),n);a.push([o.x,o.y]);var l=Xl(ns(i),n);a.push([l.x,l.y]);for(var c=Math.round(Math.min(r,i));c<=Math.round(Math.max(r,i));c++)if(c%90==0){var u=Xl(ns(c),n);a.push([u.x,u.y])}a=a.map(function(g){var v=g[0],y=g[1];return[t+v,e+y]}),s&&a.push([t,e]);var d=a.map(function(g){return g[0]}),h=a.map(function(g){return g[1]}),p=Math.min.apply(Math,d),f=Math.max.apply(Math,d),m=Math.min.apply(Math,h);return{points:a,x:p,y:m,width:f-p,height:Math.max.apply(Math,h)-m}},DPe=function(t){var e=t===void 0?{}:t,n=e.cornerRadius,r=n===void 0?0:n,i=e.padAngle,s=i===void 0?0:i;return P.useMemo(function(){return Obe().innerRadius(function(a){return a.innerRadius}).outerRadius(function(a){return a.outerRadius}).cornerRadius(r).padAngle(s)},[r,s])};function ao(){return ao=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ao.apply(this,arguments)}function O9(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var K3,IPe=function(t){var e=t.width,n=t.height,r=t.legends,i=t.data,s=t.toggleSerie;return S.jsx(S.Fragment,{children:r.map(function(a,o){var l;return S.jsx(S9,ao({},a,{containerWidth:e,containerHeight:n,data:(l=a.data)!=null?l:i,toggleSerie:a.toggleSerie?s:void 0}),o)})})},Ge={id:"id",value:"value",sortByValue:!1,innerRadius:0,padAngle:0,cornerRadius:0,layers:["arcLinkLabels","arcs","arcLabels","legends"],startAngle:0,endAngle:360,fit:!0,activeInnerRadiusOffset:0,activeOuterRadiusOffset:0,borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},enableArcLabels:!0,arcLabel:"formattedValue",arcLabelsSkipAngle:0,arcLabelsRadiusOffset:.5,arcLabelsTextColor:{theme:"labels.text.fill"},enableArcLinkLabels:!0,arcLinkLabel:"id",arcLinkLabelsSkipAngle:0,arcLinkLabelsOffset:0,arcLinkLabelsDiagonalLength:16,arcLinkLabelsStraightLength:24,arcLinkLabelsThickness:1,arcLinkLabelsTextOffset:6,arcLinkLabelsTextColor:{theme:"labels.text.fill"},arcLinkLabelsColor:{theme:"axis.ticks.line.stroke"},colors:{scheme:"nivo"},defs:[],fill:[],isInteractive:!0,animate:!0,motionConfig:"gentle",transitionMode:"innerRadius",tooltip:function(t){var e=t.datum;return S.jsx(fF,{id:e.id,value:e.formattedValue,enableChip:!0,color:e.color})},legends:[],role:"img",pixelRatio:typeof window<"u"&&(K3=window.devicePixelRatio)!=null?K3:1},MPe=["points"],NPe=function(t){var e=t.data,n=t.id,r=n===void 0?Ge.id:n,i=t.value,s=i===void 0?Ge.value:i,a=t.valueFormat,o=t.colors,l=o===void 0?Ge.colors:o,c=Ql(r),u=Ql(s),d=zR(a),h=v9(l,"id");return P.useMemo(function(){return e.map(function(p){var f,m=c(p),g=u(p),v={id:m,label:(f=p.label)!=null?f:m,hidden:!1,value:g,formattedValue:d(g),data:p};return ao({},v,{color:h(v)})})},[e,c,u,d,h])},FPe=function(t){var e=t.data,n=t.startAngle,r=t.endAngle,i=t.innerRadius,s=t.outerRadius,a=t.padAngle,o=t.sortByValue,l=t.activeId,c=t.activeInnerRadiusOffset,u=t.activeOuterRadiusOffset,d=t.hiddenIds,h=P.useMemo(function(){var p=$be().value(function(f){return f.value}).startAngle(ns(n)).endAngle(ns(r)).padAngle(ns(a));return o||p.sortValues(null),p},[n,r,a,o]);return P.useMemo(function(){var p=e.filter(function(f){return!d.includes(f.id)});return{dataWithArc:h(p).map(function(f){var m=Math.abs(f.endAngle-f.startAngle);return ao({},f.data,{arc:{index:f.index,startAngle:f.startAngle,endAngle:f.endAngle,innerRadius:l===f.data.id?i-c:i,outerRadius:l===f.data.id?s+u:s,thickness:s-i,padAngle:f.padAngle,angle:m,angleDeg:Vb(m)}})}),legendData:e.map(function(f){return ao({},f,{hidden:d.includes(f.id)})})}},[h,e,d,l,i,c,s,u])},$Pe=function(t){var e=t.data,n=t.width,r=t.height,i=t.innerRadius,s=i===void 0?Ge.innerRadius:i,a=t.startAngle,o=a===void 0?Ge.startAngle:a,l=t.endAngle,c=l===void 0?Ge.endAngle:l,u=t.padAngle,d=u===void 0?Ge.padAngle:u,h=t.sortByValue,p=h===void 0?Ge.sortByValue:h,f=t.cornerRadius,m=f===void 0?Ge.cornerRadius:f,g=t.fit,v=g===void 0?Ge.fit:g,y=t.activeInnerRadiusOffset,b=y===void 0?Ge.activeInnerRadiusOffset:y,C=t.activeOuterRadiusOffset,R=C===void 0?Ge.activeOuterRadiusOffset:C,w=P.useState(null),E=w[0],k=w[1],T=P.useState([]),_=T[0],D=T[1],I=P.useMemo(function(){var O,L=Math.min(n,r)/2,F=L*Math.min(s,1),B=n/2,j=r/2;if(v){var q=OPe(B,j,L,o-90,c-90),V=q.points,U=O9(q,MPe),ne=Math.min(n/U.width,r/U.height),W={width:U.width*ne,height:U.height*ne};W.x=(n-W.width)/2,W.y=(r-W.height)/2,B=(B-U.x)/U.width*U.width*ne+W.x,j=(j-U.y)/U.height*U.height*ne+W.y,O={box:U,ratio:ne,points:V},L*=ne,F*=ne}return{centerX:B,centerY:j,radius:L,innerRadius:F,debug:O}},[n,r,s,o,c,v,m]),M=FPe({data:e,startAngle:o,endAngle:c,innerRadius:I.innerRadius,outerRadius:I.radius,padAngle:d,sortByValue:p,activeId:E,activeInnerRadiusOffset:b,activeOuterRadiusOffset:R,hiddenIds:_}),A=P.useCallback(function(O){D(function(L){return L.indexOf(O)>-1?L.filter(function(F){return F!==O}):[].concat(L,[O])})},[]);return ao({arcGenerator:DPe({cornerRadius:m,padAngle:ns(d)}),setActiveId:k,toggleSerie:A},M,I)},LPe=function(t){var e=t.dataWithArc,n=t.arcGenerator,r=t.centerX,i=t.centerY,s=t.radius,a=t.innerRadius;return P.useMemo(function(){return{dataWithArc:e,arcGenerator:n,centerX:r,centerY:i,radius:s,innerRadius:a}},[e,n,r,i,s,a])},BPe=function(t){var e=t.center,n=t.data,r=t.arcGenerator,i=t.borderWidth,s=t.borderColor,a=t.isInteractive,o=t.onClick,l=t.onMouseEnter,c=t.onMouseMove,u=t.onMouseLeave,d=t.setActiveId,h=t.tooltip,p=t.transitionMode,f=QT(),m=f.showTooltipFromEvent,g=f.hideTooltip,v=P.useMemo(function(){if(a)return function(R,w){o==null||o(R,w)}},[a,o]),y=P.useMemo(function(){if(a)return function(R,w){m(P.createElement(h,{datum:R}),w),d(R.id),l==null||l(R,w)}},[a,m,d,l,h]),b=P.useMemo(function(){if(a)return function(R,w){m(P.createElement(h,{datum:R}),w),c==null||c(R,w)}},[a,m,c,h]),C=P.useMemo(function(){if(a)return function(R,w){g(),d(null),u==null||u(R,w)}},[a,g,d,u]);return S.jsx(APe,{center:e,data:n,arcGenerator:r,borderWidth:i,borderColor:s,transitionMode:p,onClick:v,onMouseEnter:y,onMouseMove:b,onMouseLeave:C})},jPe=["isInteractive","animate","motionConfig","theme","renderWrapper"],qPe=function(t){var e=t.data,n=t.id,r=n===void 0?Ge.id:n,i=t.value,s=i===void 0?Ge.value:i,a=t.valueFormat,o=t.sortByValue,l=o===void 0?Ge.sortByValue:o,c=t.layers,u=c===void 0?Ge.layers:c,d=t.startAngle,h=d===void 0?Ge.startAngle:d,p=t.endAngle,f=p===void 0?Ge.endAngle:p,m=t.padAngle,g=m===void 0?Ge.padAngle:m,v=t.fit,y=v===void 0?Ge.fit:v,b=t.innerRadius,C=b===void 0?Ge.innerRadius:b,R=t.cornerRadius,w=R===void 0?Ge.cornerRadius:R,E=t.activeInnerRadiusOffset,k=E===void 0?Ge.activeInnerRadiusOffset:E,T=t.activeOuterRadiusOffset,_=T===void 0?Ge.activeOuterRadiusOffset:T,D=t.width,I=t.height,M=t.margin,A=t.colors,O=A===void 0?Ge.colors:A,L=t.borderWidth,F=L===void 0?Ge.borderWidth:L,B=t.borderColor,j=B===void 0?Ge.borderColor:B,q=t.enableArcLabels,V=q===void 0?Ge.enableArcLabels:q,U=t.arcLabel,ne=U===void 0?Ge.arcLabel:U,W=t.arcLabelsSkipAngle,J=W===void 0?Ge.arcLabelsSkipAngle:W,K=t.arcLabelsTextColor,Q=K===void 0?Ge.arcLabelsTextColor:K,re=t.arcLabelsRadiusOffset,G=re===void 0?Ge.arcLabelsRadiusOffset:re,ie=t.arcLabelsComponent,te=t.enableArcLinkLabels,Z=te===void 0?Ge.enableArcLinkLabels:te,oe=t.arcLinkLabel,ue=oe===void 0?Ge.arcLinkLabel:oe,me=t.arcLinkLabelsSkipAngle,H=me===void 0?Ge.arcLinkLabelsSkipAngle:me,Y=t.arcLinkLabelsOffset,X=Y===void 0?Ge.arcLinkLabelsOffset:Y,le=t.arcLinkLabelsDiagonalLength,se=le===void 0?Ge.arcLinkLabelsDiagonalLength:le,ae=t.arcLinkLabelsStraightLength,ve=ae===void 0?Ge.arcLinkLabelsStraightLength:ae,ke=t.arcLinkLabelsThickness,Ee=ke===void 0?Ge.arcLinkLabelsThickness:ke,Oe=t.arcLinkLabelsTextOffset,De=Oe===void 0?Ge.arcLinkLabelsTextOffset:Oe,He=t.arcLinkLabelsTextColor,_e=He===void 0?Ge.arcLinkLabelsTextColor:He,Te=t.arcLinkLabelsColor,Ce=Te===void 0?Ge.arcLinkLabelsColor:Te,Ke=t.arcLinkLabelComponent,fe=t.defs,Re=fe===void 0?Ge.defs:fe,Ue=t.fill,Pe=Ue===void 0?Ge.fill:Ue,Ye=t.isInteractive,Lt=Ye===void 0?Ge.isInteractive:Ye,Bn=t.onClick,or=t.onMouseEnter,fo=t.onMouseMove,Fs=t.onMouseLeave,$s=t.tooltip,Oa=$s===void 0?Ge.tooltip:$s,Kr=t.transitionMode,ji=Kr===void 0?Ge.transitionMode:Kr,Ls=t.legends,qi=Ls===void 0?Ge.legends:Ls,lr=t.role,Yr=lr===void 0?Ge.role:lr,Xt=qR(D,I,M),fs=Xt.outerWidth,ps=Xt.outerHeight,Si=Xt.margin,Me=Xt.innerWidth,Qe=Xt.innerHeight,Ct=NPe({data:e,id:r,value:s,valueFormat:a,colors:O}),dt=$Pe({data:Ct,width:Me,height:Qe,fit:y,innerRadius:C,startAngle:h,endAngle:f,padAngle:g,sortByValue:l,cornerRadius:w,activeInnerRadiusOffset:k,activeOuterRadiusOffset:_}),lt=dt.dataWithArc,cr=dt.legendData,on=dt.arcGenerator,qt=dt.centerX,ms=dt.centerY,Bs=dt.radius,Da=dt.innerRadius,Jr=dt.setActiveId,yl=dt.toggleSerie,be=YL(Re,lt,Pe),ft={arcLinkLabels:null,arcs:null,arcLabels:null,legends:null};Z&&u.includes("arcLinkLabels")&&(ft.arcLinkLabels=S.jsx(RPe,{center:[qt,ms],data:lt,label:ue,skipAngle:H,offset:X,diagonalLength:se,straightLength:ve,strokeWidth:Ee,textOffset:De,textColor:_e,linkColor:Ce,component:Ke},"arcLinkLabels")),u.includes("arcs")&&(ft.arcs=S.jsx(BPe,{center:[qt,ms],data:lt,arcGenerator:on,borderWidth:F,borderColor:j,isInteractive:Lt,onClick:Bn,onMouseEnter:or,onMouseMove:fo,onMouseLeave:Fs,setActiveId:Jr,tooltip:Oa,transitionMode:ji},"arcs")),V&&u.includes("arcLabels")&&(ft.arcLabels=S.jsx(yPe,{center:[qt,ms],data:lt,label:ne,radiusOffset:G,skipAngle:J,textColor:Q,transitionMode:ji,component:ie},"arcLabels")),qi.length>0&&u.includes("legends")&&(ft.legends=S.jsx(IPe,{width:Me,height:Qe,data:cr,legends:qi,toggleSerie:yl},"legends"));var vm=LPe({dataWithArc:lt,arcGenerator:on,centerX:qt,centerY:ms,radius:Bs,innerRadius:Da});return S.jsx(HR,{width:fs,height:ps,margin:Si,defs:be,role:Yr,children:u.map(function(ym,I7){return ft[ym]!==void 0?ft[ym]:typeof ym=="function"?S.jsx(P.Fragment,{children:P.createElement(ym,vm)},I7):null})})},zPe=function(t){var e=t.isInteractive,n=e===void 0?Ge.isInteractive:e,r=t.animate,i=r===void 0?Ge.animate:r,s=t.motionConfig,a=s===void 0?Ge.motionConfig:s,o=t.theme,l=t.renderWrapper,c=O9(t,jPe);return S.jsx(Hb,{animate:i,isInteractive:n,motionConfig:a,renderWrapper:l,theme:o,children:S.jsx(qPe,ao({isInteractive:n},c))})},HPe=function(t){return S.jsx(Ub,{children:function(e){var n=e.width,r=e.height;return S.jsx(zPe,ao({width:n,height:r},t))}})};function UPe({completedTasks:t,clinicianList:e}){let n=[];return t&&e&&(n=VPe(t,e)),S.jsx(HPe,{data:n,margin:{top:40,right:80,bottom:80,left:80},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,colors:{scheme:"nivo"},borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:"#333333",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]}})}function VPe(t,e){const n=["hsl(124, 70%, 50%)","hsl(180, 70%, 50%)","hsl(46, 70%, 50%)","hsl(92, 70%, 50%)","hsl(153, 70%, 50%)","hsl(153, 70%, 50%)"];let r=[];return e.forEach((i,s)=>{let a=0;t.forEach(o=>{o.clinician._id===i._id&&(a+=1)}),r.push({id:`Dr.${i.fname} ${i.lname}`,label:`Dr.${i.fname} ${i.lname}`,value:a,color:n[s]})}),r}const WPe="_pie_chart_1pe4m_1",GPe={pie_chart:WPe};function KPe({completedTasks:t,clinicianList:e}){return S.jsx("div",{children:S.jsx(Nc,{children:S.jsxs(Fc,{children:[S.jsx(yt,{gutterBottom:!0,variant:"h5",component:"div",children:"Users"}),S.jsx("div",{className:GPe.pie_chart,children:S.jsx(UPe,{completedTasks:t,clinicianList:e})})]})})})}function YPe(t,e,n,r){return{avatar:t,name:e,role:n,isSuperVisor:r}}function JPe({clinicianList:t}){let e=[];if(t&&t.map(n=>{e.push(YPe(n.avatar,"Dr. "+n.fname+" "+n.lname,n.role,n.isSupervisor?"Yes":"No"))}),t)return S.jsx(ct,{children:S.jsx(vT,{component:hs,children:S.jsxs(mT,{"aria-label":"simple table",children:[S.jsx(QN,{children:S.jsxs(Wa,{children:[S.jsx(It,{children:"Photo "}),S.jsx(It,{align:"left",children:"Name"}),S.jsx(It,{align:"left",children:"Role"}),S.jsx(It,{align:"left",children:"Is Supervisor"})]})}),S.jsx(gT,{children:e.map(n=>S.jsxs(Wa,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[S.jsx(It,{component:"th",scope:"row",children:S.jsx(AT,{id:n.avatar})}),S.jsx(It,{align:"left",children:n.name}),S.jsx(It,{align:"left",children:n.role}),S.jsx(It,{align:"left",children:n.isSuperVisor})]},n.avatar))})]})})})}function XPe(){const{team:t,teamLoading:e,allTeams:n,allTeamsLoading:r,tasks:i,tasksLoading:s,loggedInUser:a}=P.useContext(Vn),[o,l]=P.useState(!1),[c,u]=P.useState(null),[d,h]=P.useState(null),[p,f]=P.useState(null),[m,g]=P.useState(null);if(P.useEffect(()=>{l(!!(e||r||s))},[e,r,s]),i&&t){const v=i.filter(y=>y.status===2&&y.clinician.team===t._id);P.useEffect(()=>{f(t.clinicians),g(t.patients),u(t),h(v)},[i,t])}return S.jsx("div",{children:o?S.jsx(Yp,{}):S.jsx(QPe,{teamOnDisplay:c,setTeamOnDisplay:u,allTeams:n,clinicianList:p,setClinicianList:f,patientList:m,setPatientList:g,completedTasks:d,setCompletedTasks:h,tasks:i,loggedInUser:a})})}function QPe({teamOnDisplay:t,setTeamOnDisplay:e,allTeams:n,clinicianList:r,setClinicianList:i,patientList:s,setPatientList:a,completedTasks:o,setCompletedTasks:l,tasks:c,loggedInUser:u}){if(t)return S.jsx(ct,{sx:{flexGrow:1},children:S.jsxs(at,{container:!0,spacing:8,children:[u.isAdmin&&n?S.jsx(ZPe,{teamOnDisplay:t,setTeamOnDisplay:e,allTeams:n,setClinicianList:i,setPatientList:a,setCompletedTasks:l,tasks:c}):null,S.jsx(at,{container:!0,item:!0,xs:12,md:4,spacing:3,mt:0,children:S.jsx(at,{item:!0,xs:12,md:12,children:S.jsx(aPe,{patientList:s})})}),S.jsxs(at,{container:!0,item:!0,xs:12,md:8,spacing:3,mt:0,children:[S.jsxs(at,{item:!0,xs:12,md:12,children:[S.jsxs(yt,{gutterBottom:!0,variant:"h5",component:"div",children:[t.name," Team Details"]}),S.jsx(bd,{}),S.jsx(JPe,{clinicianList:r})]}),S.jsx(at,{item:!0,xs:12,md:12,children:S.jsx(uPe,{completedTasks:o})}),S.jsx(at,{item:!0,xs:12,md:12,children:S.jsx(KPe,{completedTasks:o,clinicianList:r})})]})]})})}function ZPe({teamOnDisplay:t,setTeamOnDisplay:e,allTeams:n,setClinicianList:r,setPatientList:i,tasks:s,setCompletedTasks:a}){return S.jsx(at,{item:!0,xs:12,md:12,mt:2,children:n.map(o=>S.jsx(ht,{variant:t._id==o._id?"contained":"outlined",sx:{m:2,mt:3},onClick:()=>{e(o),r(o.clinicians),i(o.patients);const l=s.filter(c=>c.status===2&&c.clinician.team===o._id);a(l)},children:o.name},o._id))})}de(hs)(({theme:t})=>({backgroundColor:t.palette.mode==="dark"?"#1A2027":"#fff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary}));function e4e(){return S.jsx("div",{children:S.jsx(XPe,{})})}const t4e=["localeText"],UC=P.createContext(null);function n4e(t){var e;const{localeText:n}=t,r=pe(t,t4e),{utils:i,localeText:s}=(e=P.useContext(UC))!=null?e:{utils:void 0,localeText:void 0},a=$e({props:r,name:"MuiLocalizationProvider"}),{children:o,dateAdapter:l,dateFormats:c,dateLibInstance:u,adapterLocale:d,localeText:h}=a,p=P.useMemo(()=>$({},h,s,n),[h,s,n]),f=P.useMemo(()=>{if(!l)return i||null;const v=new l({locale:d,formats:c,instance:u});if(!v.isMUIAdapter)throw new Error(["MUI: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join(`
`));return v},[l,d,c,u,i]),m=P.useMemo(()=>f?{minDate:f.date("1900-01-01T00:00:00.000"),maxDate:f.date("2099-12-31T00:00:00.000")}:null,[f]),g=P.useMemo(()=>({utils:f,defaultDates:m,localeText:p}),[m,f,p]);return S.jsx(UC.Provider,{value:g,children:o})}var VC={},r4e={get exports(){return VC},set exports(t){VC=t}};(function(t,e){(function(n,r){t.exports=r()})(hn,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",a="second",o="minute",l="hour",c="day",u="week",d="month",h="quarter",p="year",f="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var A=["th","st","nd","rd"],O=M%100;return"["+M+(A[(O-20)%10]||A[O]||A[0])+"]"}},b=function(M,A,O){var L=String(M);return!L||L.length>=A?M:""+Array(A+1-L.length).join(O)+M},C={s:b,z:function(M){var A=-M.utcOffset(),O=Math.abs(A),L=Math.floor(O/60),F=O%60;return(A<=0?"+":"-")+b(L,2,"0")+":"+b(F,2,"0")},m:function M(A,O){if(A.date()<O.date())return-M(O,A);var L=12*(O.year()-A.year())+(O.month()-A.month()),F=A.clone().add(L,d),B=O-F<0,j=A.clone().add(L+(B?-1:1),d);return+(-(L+(O-F)/(B?F-j:j-F))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:d,y:p,w:u,d:c,D:f,h:l,m:o,s:a,ms:s,Q:h}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},R="en",w={};w[R]=y;var E=function(M){return M instanceof D},k=function M(A,O,L){var F;if(!A)return R;if(typeof A=="string"){var B=A.toLowerCase();w[B]&&(F=B),O&&(w[B]=O,F=B);var j=A.split("-");if(!F&&j.length>1)return M(j[0])}else{var q=A.name;w[q]=A,F=q}return!L&&F&&(R=F),F||!L&&R},T=function(M,A){if(E(M))return M.clone();var O=typeof A=="object"?A:{};return O.date=M,O.args=arguments,new D(O)},_=C;_.l=k,_.i=E,_.w=function(M,A){return T(M,{locale:A.$L,utc:A.$u,x:A.$x,$offset:A.$offset})};var D=function(){function M(O){this.$L=k(O.locale,null,!0),this.parse(O)}var A=M.prototype;return A.parse=function(O){this.$d=function(L){var F=L.date,B=L.utc;if(F===null)return new Date(NaN);if(_.u(F))return new Date;if(F instanceof Date)return new Date(F);if(typeof F=="string"&&!/Z$/i.test(F)){var j=F.match(g);if(j){var q=j[2]-1||0,V=(j[7]||"0").substring(0,3);return B?new Date(Date.UTC(j[1],q,j[3]||1,j[4]||0,j[5]||0,j[6]||0,V)):new Date(j[1],q,j[3]||1,j[4]||0,j[5]||0,j[6]||0,V)}}return new Date(F)}(O),this.$x=O.x||{},this.init()},A.init=function(){var O=this.$d;this.$y=O.getFullYear(),this.$M=O.getMonth(),this.$D=O.getDate(),this.$W=O.getDay(),this.$H=O.getHours(),this.$m=O.getMinutes(),this.$s=O.getSeconds(),this.$ms=O.getMilliseconds()},A.$utils=function(){return _},A.isValid=function(){return this.$d.toString()!==m},A.isSame=function(O,L){var F=T(O);return this.startOf(L)<=F&&F<=this.endOf(L)},A.isAfter=function(O,L){return T(O)<this.startOf(L)},A.isBefore=function(O,L){return this.endOf(L)<T(O)},A.$g=function(O,L,F){return _.u(O)?this[L]:this.set(F,O)},A.unix=function(){return Math.floor(this.valueOf()/1e3)},A.valueOf=function(){return this.$d.getTime()},A.startOf=function(O,L){var F=this,B=!!_.u(L)||L,j=_.p(O),q=function(re,G){var ie=_.w(F.$u?Date.UTC(F.$y,G,re):new Date(F.$y,G,re),F);return B?ie:ie.endOf(c)},V=function(re,G){return _.w(F.toDate()[re].apply(F.toDate("s"),(B?[0,0,0,0]:[23,59,59,999]).slice(G)),F)},U=this.$W,ne=this.$M,W=this.$D,J="set"+(this.$u?"UTC":"");switch(j){case p:return B?q(1,0):q(31,11);case d:return B?q(1,ne):q(0,ne+1);case u:var K=this.$locale().weekStart||0,Q=(U<K?U+7:U)-K;return q(B?W-Q:W+(6-Q),ne);case c:case f:return V(J+"Hours",0);case l:return V(J+"Minutes",1);case o:return V(J+"Seconds",2);case a:return V(J+"Milliseconds",3);default:return this.clone()}},A.endOf=function(O){return this.startOf(O,!1)},A.$set=function(O,L){var F,B=_.p(O),j="set"+(this.$u?"UTC":""),q=(F={},F[c]=j+"Date",F[f]=j+"Date",F[d]=j+"Month",F[p]=j+"FullYear",F[l]=j+"Hours",F[o]=j+"Minutes",F[a]=j+"Seconds",F[s]=j+"Milliseconds",F)[B],V=B===c?this.$D+(L-this.$W):L;if(B===d||B===p){var U=this.clone().set(f,1);U.$d[q](V),U.init(),this.$d=U.set(f,Math.min(this.$D,U.daysInMonth())).$d}else q&&this.$d[q](V);return this.init(),this},A.set=function(O,L){return this.clone().$set(O,L)},A.get=function(O){return this[_.p(O)]()},A.add=function(O,L){var F,B=this;O=Number(O);var j=_.p(L),q=function(ne){var W=T(B);return _.w(W.date(W.date()+Math.round(ne*O)),B)};if(j===d)return this.set(d,this.$M+O);if(j===p)return this.set(p,this.$y+O);if(j===c)return q(1);if(j===u)return q(7);var V=(F={},F[o]=r,F[l]=i,F[a]=n,F)[j]||1,U=this.$d.getTime()+O*V;return _.w(U,this)},A.subtract=function(O,L){return this.add(-1*O,L)},A.format=function(O){var L=this,F=this.$locale();if(!this.isValid())return F.invalidDate||m;var B=O||"YYYY-MM-DDTHH:mm:ssZ",j=_.z(this),q=this.$H,V=this.$m,U=this.$M,ne=F.weekdays,W=F.months,J=function(G,ie,te,Z){return G&&(G[ie]||G(L,B))||te[ie].slice(0,Z)},K=function(G){return _.s(q%12||12,G,"0")},Q=F.meridiem||function(G,ie,te){var Z=G<12?"AM":"PM";return te?Z.toLowerCase():Z},re={YY:String(this.$y).slice(-2),YYYY:this.$y,M:U+1,MM:_.s(U+1,2,"0"),MMM:J(F.monthsShort,U,W,3),MMMM:J(W,U),D:this.$D,DD:_.s(this.$D,2,"0"),d:String(this.$W),dd:J(F.weekdaysMin,this.$W,ne,2),ddd:J(F.weekdaysShort,this.$W,ne,3),dddd:ne[this.$W],H:String(q),HH:_.s(q,2,"0"),h:K(1),hh:K(2),a:Q(q,V,!0),A:Q(q,V,!1),m:String(V),mm:_.s(V,2,"0"),s:String(this.$s),ss:_.s(this.$s,2,"0"),SSS:_.s(this.$ms,3,"0"),Z:j};return B.replace(v,function(G,ie){return ie||re[G]||j.replace(":","")})},A.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},A.diff=function(O,L,F){var B,j=_.p(L),q=T(O),V=(q.utcOffset()-this.utcOffset())*r,U=this-q,ne=_.m(this,q);return ne=(B={},B[p]=ne/12,B[d]=ne,B[h]=ne/3,B[u]=(U-V)/6048e5,B[c]=(U-V)/864e5,B[l]=U/i,B[o]=U/r,B[a]=U/n,B)[j]||U,F?ne:_.a(ne)},A.daysInMonth=function(){return this.endOf(d).$D},A.$locale=function(){return w[this.$L]},A.locale=function(O,L){if(!O)return this.$L;var F=this.clone(),B=k(O,L,!0);return B&&(F.$L=B),F},A.clone=function(){return _.w(this.$d,this)},A.toDate=function(){return new Date(this.valueOf())},A.toJSON=function(){return this.isValid()?this.toISOString():null},A.toISOString=function(){return this.$d.toISOString()},A.toString=function(){return this.$d.toUTCString()},M}(),I=D.prototype;return T.prototype=I,[["$ms",s],["$s",a],["$m",o],["$H",l],["$W",c],["$M",d],["$y",p],["$D",f]].forEach(function(M){I[M[1]]=function(A){return this.$g(A,M[0],M[1])}}),T.extend=function(M,A){return M.$i||(M(A,D,T),M.$i=!0),T},T.locale=k,T.isDayjs=E,T.unix=function(M){return T(1e3*M)},T.en=w[R],T.Ls=w,T.p={},T})})(r4e);const Zl=VC;var WC={},i4e={get exports(){return WC},set exports(t){WC=t}};(function(t,e){(function(n,r){t.exports=r()})(hn,function(){var n="week",r="year";return function(i,s,a){var o=s.prototype;o.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var c=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var u=a(this).startOf(r).add(1,r).date(c),d=a(this).endOf(n);if(u.isBefore(d))return 1}var h=a(this).startOf(r).date(c).startOf(n).subtract(1,"millisecond"),p=this.diff(h,n,!0);return p<0?a(this).startOf("week").week():Math.ceil(p)},o.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(i4e);var GC={},s4e={get exports(){return GC},set exports(t){GC=t}};(function(t,e){(function(n,r){t.exports=r()})(hn,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d\d/,s=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,o={},l=function(m){return(m=+m)+(m>68?1900:2e3)},c=function(m){return function(g){this[m]=+g}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(m){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var v=g.match(/([+-]|\d\d)/g),y=60*v[1]+(+v[2]||0);return y===0?0:v[0]==="+"?-y:y}(m)}],d=function(m){var g=o[m];return g&&(g.indexOf?g:g.s.concat(g.f))},h=function(m,g){var v,y=o.meridiem;if(y){for(var b=1;b<=24;b+=1)if(m.indexOf(y(b,0,g))>-1){v=b>12;break}}else v=m===(g?"pm":"PM");return v},p={A:[a,function(m){this.afternoon=h(m,!1)}],a:[a,function(m){this.afternoon=h(m,!0)}],S:[/\d/,function(m){this.milliseconds=100*+m}],SS:[i,function(m){this.milliseconds=10*+m}],SSS:[/\d{3}/,function(m){this.milliseconds=+m}],s:[s,c("seconds")],ss:[s,c("seconds")],m:[s,c("minutes")],mm:[s,c("minutes")],H:[s,c("hours")],h:[s,c("hours")],HH:[s,c("hours")],hh:[s,c("hours")],D:[s,c("day")],DD:[i,c("day")],Do:[a,function(m){var g=o.ordinal,v=m.match(/\d+/);if(this.day=v[0],g)for(var y=1;y<=31;y+=1)g(y).replace(/\[|\]/g,"")===m&&(this.day=y)}],M:[s,c("month")],MM:[i,c("month")],MMM:[a,function(m){var g=d("months"),v=(d("monthsShort")||g.map(function(y){return y.slice(0,3)})).indexOf(m)+1;if(v<1)throw new Error;this.month=v%12||v}],MMMM:[a,function(m){var g=d("months").indexOf(m)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,c("year")],YY:[i,function(m){this.year=l(m)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function f(m){var g,v;g=m,v=o&&o.formats;for(var y=(m=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(T,_,D){var I=D&&D.toUpperCase();return _||v[D]||n[D]||v[I].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(M,A,O){return A||O.slice(1)})})).match(r),b=y.length,C=0;C<b;C+=1){var R=y[C],w=p[R],E=w&&w[0],k=w&&w[1];y[C]=k?{regex:E,parser:k}:R.replace(/^\[|\]$/g,"")}return function(T){for(var _={},D=0,I=0;D<b;D+=1){var M=y[D];if(typeof M=="string")I+=M.length;else{var A=M.regex,O=M.parser,L=T.slice(I),F=A.exec(L)[0];O.call(_,F),T=T.replace(F,"")}}return function(B){var j=B.afternoon;if(j!==void 0){var q=B.hours;j?q<12&&(B.hours+=12):q===12&&(B.hours=0),delete B.afternoon}}(_),_}}return function(m,g,v){v.p.customParseFormat=!0,m&&m.parseTwoDigitYear&&(l=m.parseTwoDigitYear);var y=g.prototype,b=y.parse;y.parse=function(C){var R=C.date,w=C.utc,E=C.args;this.$u=w;var k=E[1];if(typeof k=="string"){var T=E[2]===!0,_=E[3]===!0,D=T||_,I=E[2];_&&(I=E[2]),o=this.$locale(),!T&&I&&(o=v.Ls[I]),this.$d=function(L,F,B){try{if(["x","X"].indexOf(F)>-1)return new Date((F==="X"?1e3:1)*L);var j=f(F)(L),q=j.year,V=j.month,U=j.day,ne=j.hours,W=j.minutes,J=j.seconds,K=j.milliseconds,Q=j.zone,re=new Date,G=U||(q||V?1:re.getDate()),ie=q||re.getFullYear(),te=0;q&&!V||(te=V>0?V-1:re.getMonth());var Z=ne||0,oe=W||0,ue=J||0,me=K||0;return Q?new Date(Date.UTC(ie,te,G,Z,oe,ue,me+60*Q.offset*1e3)):B?new Date(Date.UTC(ie,te,G,Z,oe,ue,me)):new Date(ie,te,G,Z,oe,ue,me)}catch{return new Date("")}}(R,k,w),this.init(),I&&I!==!0&&(this.$L=this.locale(I).$L),D&&R!=this.format(k)&&(this.$d=new Date("")),o={}}else if(k instanceof Array)for(var M=k.length,A=1;A<=M;A+=1){E[1]=k[A-1];var O=v.apply(this,E);if(O.isValid()){this.$d=O.$d,this.$L=O.$L,this.init();break}A===M&&(this.$d=new Date(""))}else b.call(this,C)}}})})(s4e);const a4e=GC;var KC={},o4e={get exports(){return KC},set exports(t){KC=t}};(function(t,e){(function(n,r){t.exports=r()})(hn,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(r,i,s){var a=i.prototype,o=a.format;s.en.formats=n,a.format=function(l){l===void 0&&(l="YYYY-MM-DDTHH:mm:ssZ");var c=this.$locale().formats,u=function(d,h){return d.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(p,f,m){var g=m&&m.toUpperCase();return f||h[m]||n[m]||h[g].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(v,y,b){return y||b.slice(1)})})}(l,c===void 0?{}:c);return o.call(this,u)}}})})(o4e);const l4e=KC;var YC={},c4e={get exports(){return YC},set exports(t){YC=t}};(function(t,e){(function(n,r){t.exports=r()})(hn,function(){return function(n,r,i){r.prototype.isBetween=function(s,a,o,l){var c=i(s),u=i(a),d=(l=l||"()")[0]==="(",h=l[1]===")";return(d?this.isAfter(c,o):!this.isBefore(c,o))&&(h?this.isBefore(u,o):!this.isAfter(u,o))||(d?this.isBefore(c,o):!this.isAfter(c,o))&&(h?this.isAfter(u,o):!this.isBefore(u,o))}}})})(c4e);const u4e=YC,d4e=(t,e="warning")=>{let n=!1;const r=Array.isArray(t)?t.join(`
`):t;return()=>{n||(n=!0,e==="error"?console.error(r):console.warn(r))}};Zl.extend(a4e);Zl.extend(l4e);Zl.extend(u4e);const h4e=d4e(["Your locale has not been found.","Either the locale key is not a supported one. Locales supported by dayjs are available here: https://github.com/iamkun/dayjs/tree/dev/src/locale","Or you forget to import the locale with `require('dayjs/locale/{localeUsed}')`","fallback on English locale"]),f4e={YY:"year",YYYY:{sectionType:"year",contentType:"digit",maxLength:4},M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMM:{sectionType:"month",contentType:"letter"},MMMM:{sectionType:"month",contentType:"letter"},D:{sectionType:"day",contentType:"digit",maxLength:2},DD:"day",Do:{sectionType:"day",contentType:"digit-with-letter"},d:{sectionType:"weekDay",contentType:"digit",maxLength:2},dd:{sectionType:"weekDay",contentType:"letter"},ddd:{sectionType:"weekDay",contentType:"letter"},dddd:{sectionType:"weekDay",contentType:"letter"},A:"meridiem",a:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},p4e={normalDateWithWeekday:"ddd, MMM D",normalDate:"D MMMM",shortDate:"MMM D",monthAndDate:"MMMM D",dayOfMonth:"D",year:"YYYY",month:"MMMM",monthShort:"MMM",monthAndYear:"MMMM YYYY",weekday:"dddd",weekdayShort:"ddd",minutes:"mm",hours12h:"hh",hours24h:"HH",seconds:"ss",fullTime:"LT",fullTime12h:"hh:mm A",fullTime24h:"HH:mm",fullDate:"ll",fullDateWithWeekday:"dddd, LL",fullDateTime:"lll",fullDateTime12h:"ll hh:mm A",fullDateTime24h:"ll HH:mm",keyboardDate:"L",keyboardDateTime:"L LT",keyboardDateTime12h:"L hh:mm A",keyboardDateTime24h:"L HH:mm"},m4e=(t,e)=>e?(...n)=>t(...n).locale(e):t;class g4e{constructor({locale:e,formats:n,instance:r}={}){this.isMUIAdapter=!0,this.lib="dayjs",this.rawDayJsInstance=void 0,this.dayjs=void 0,this.locale=void 0,this.formats=void 0,this.escapedCharacters={start:"[",end:"]"},this.formatTokenMap=f4e,this.getLocaleFormats=()=>{var i;const s=(i=this.rawDayJsInstance.Ls)!=null?i:Zl.Ls,a=this.locale||"en";let o=s[a];return o===void 0&&(h4e(),o=s.en),o.formats},this.date=i=>i===null?null:this.dayjs(i),this.toJsDate=i=>i.toDate(),this.parseISO=i=>this.dayjs(i),this.toISO=i=>i.toISOString(),this.parse=(i,s)=>i===""?null:this.dayjs(i,s,this.locale,!0),this.getCurrentLocaleCode=()=>this.locale||"en",this.is12HourCycleInCurrentLocale=()=>/A|a/.test(this.getLocaleFormats().LT||""),this.expandFormat=i=>{const s=this.getLocaleFormats(),a=o=>o.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(l,c,u)=>c||u.slice(1));return i.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(o,l,c)=>{const u=c&&c.toUpperCase();return l||s[c]||a(s[u])})},this.getFormatHelperText=i=>this.expandFormat(i).replace(/a/gi,"(a|p)m").toLocaleLowerCase(),this.isNull=i=>i===null,this.isValid=i=>this.dayjs(i).isValid(),this.format=(i,s)=>this.formatByString(i,this.formats[s]),this.formatByString=(i,s)=>this.dayjs(i).format(s),this.formatNumber=i=>i,this.getDiff=(i,s,a)=>i.diff(s,a),this.isEqual=(i,s)=>i===null&&s===null?!0:this.dayjs(i).isSame(s),this.isSameYear=(i,s)=>i.isSame(s,"year"),this.isSameMonth=(i,s)=>i.isSame(s,"month"),this.isSameDay=(i,s)=>i.isSame(s,"day"),this.isSameHour=(i,s)=>i.isSame(s,"hour"),this.isAfter=(i,s)=>i.isAfter(s),this.isAfterYear=(i,s)=>i.isAfter(s,"year"),this.isAfterDay=(i,s)=>i.isAfter(s,"day"),this.isBefore=(i,s)=>i.isBefore(s),this.isBeforeYear=(i,s)=>i.isBefore(s,"year"),this.isBeforeDay=(i,s)=>i.isBefore(s,"day"),this.isWithinRange=(i,[s,a])=>i.isBetween(s,a,null,"[]"),this.startOfYear=i=>i.startOf("year"),this.startOfMonth=i=>i.startOf("month"),this.startOfWeek=i=>i.startOf("week"),this.startOfDay=i=>i.startOf("day"),this.endOfYear=i=>i.endOf("year"),this.endOfMonth=i=>i.endOf("month"),this.endOfWeek=i=>i.endOf("week"),this.endOfDay=i=>i.endOf("day"),this.addYears=(i,s)=>s<0?i.subtract(Math.abs(s),"year"):i.add(s,"year"),this.addMonths=(i,s)=>s<0?i.subtract(Math.abs(s),"month"):i.add(s,"month"),this.addWeeks=(i,s)=>s<0?i.subtract(Math.abs(s),"week"):i.add(s,"week"),this.addDays=(i,s)=>s<0?i.subtract(Math.abs(s),"day"):i.add(s,"day"),this.addHours=(i,s)=>s<0?i.subtract(Math.abs(s),"hour"):i.add(s,"hour"),this.addMinutes=(i,s)=>s<0?i.subtract(Math.abs(s),"minute"):i.add(s,"minute"),this.addSeconds=(i,s)=>s<0?i.subtract(Math.abs(s),"second"):i.add(s,"second"),this.getYear=i=>i.year(),this.getMonth=i=>i.month(),this.getDate=i=>i.date(),this.getHours=i=>i.hour(),this.getMinutes=i=>i.minute(),this.getSeconds=i=>i.second(),this.setYear=(i,s)=>i.set("year",s),this.setMonth=(i,s)=>i.set("month",s),this.setDate=(i,s)=>i.set("date",s),this.setHours=(i,s)=>i.set("hour",s),this.setMinutes=(i,s)=>i.set("minute",s),this.setSeconds=(i,s)=>i.set("second",s),this.getDaysInMonth=i=>i.daysInMonth(),this.getNextMonth=i=>i.add(1,"month"),this.getPreviousMonth=i=>i.subtract(1,"month"),this.getMonthArray=i=>{const a=[i.startOf("year")];for(;a.length<12;){const o=a[a.length-1];a.push(this.getNextMonth(o))}return a},this.mergeDateAndTime=(i,s)=>i.hour(s.hour()).minute(s.minute()).second(s.second()),this.getWeekdays=()=>{const i=this.dayjs().startOf("week");return[0,1,2,3,4,5,6].map(s=>this.formatByString(i.add(s,"day"),"dd"))},this.getWeekArray=i=>{const s=i.startOf("month").startOf("week"),a=i.endOf("month").endOf("week");let o=0,l=s;const c=[];for(;l.isBefore(a);){const u=Math.floor(o/7);c[u]=c[u]||[],c[u].push(l),l=l.add(1,"day"),o+=1}return c},this.getWeekNumber=i=>i.week(),this.getYearRange=(i,s)=>{const a=i.startOf("year"),o=s.endOf("year"),l=[];let c=a;for(;c.isBefore(o);)l.push(c),c=c.add(1,"year");return l},this.getMeridiemText=i=>i==="am"?"AM":"PM",this.rawDayJsInstance=r||Zl,this.dayjs=m4e(this.rawDayJsInstance,e),this.locale=e,this.formats=$({},p4e,n),Zl.extend(WC)}}const v4e=(t,e)=>e==null||!t.isValid(e)?null:e,lv=(t,e,n)=>e==null||!t.isValid(e)?n:e,y4e=(t,e,n)=>!t.isValid(e)&&e!=null&&!t.isValid(n)&&n!=null?!0:t.isEqual(e,n),D9=(t,e)=>{const n=t.formatTokenMap[e];if(n==null)throw new Error([`MUI: The token "${e}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join(`
`));return typeof n=="string"?{type:n,contentType:n==="meridiem"?"letter":"digit",maxLength:void 0}:{type:n.sectionType,contentType:n.contentType,maxLength:n.maxLength}},b4e=t=>{switch(t){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}},Kb=(t,e)=>{const n=[],r=t.date(),i=t.startOfWeek(r),s=t.endOfWeek(r);let a=i;for(;t.isBefore(a,s);)n.push(a),a=t.addDays(a,1);return n.map(o=>t.formatByString(o,e))},I9=(t,e,n)=>{switch(e){case"month":return t.getMonthArray(t.date()).map(r=>t.formatByString(r,n));case"weekDay":return Kb(t,n);case"meridiem":{const r=t.date();return[t.startOfDay(r),t.endOfDay(r)].map(i=>t.formatByString(i,n))}default:return[]}},M9=(t,e,n)=>{let r=e;for(r=Number(r).toString();r.length<n;)r=`0${r}`;return r},KR=(t,e,n,r)=>{if(r.type==="day"&&r.contentType==="digit-with-letter"){const s=t.setDate(n.longestMonth,e);return t.formatByString(s,r.format)}const i=e.toString();return r.hasLeadingZerosInInput?M9(t,i,r.maxLength):i},S4e=(t,e,n,r,i)=>{const s=b4e(n),a=n==="Home",o=n==="End",l=e.value===""||a||o,c=()=>{const d=r[e.type]({currentDate:i,format:e.format,contentType:e.contentType}),h=m=>KR(t,m,d,e);if(l)return e.type==="year"&&!o&&!a?t.formatByString(t.date(),e.format):s>0||a?h(d.minimum):h(d.maximum);const f=parseInt(e.value,10)+s;return f>d.maximum?h(d.minimum):f<d.minimum?h(d.maximum):h(f)},u=()=>{const d=I9(t,e.type,e.format);if(d.length===0)return e.value;if(l)return s>0||a?d[0]:d[d.length-1];const p=(d.indexOf(e.value)+d.length+s)%d.length;return d[p]};return e.contentType==="digit"||e.contentType==="digit-with-letter"?c():u()},YR=(t,e)=>{let n=t.value||t.placeholder;const r=e==="non-input"?t.hasLeadingZerosInFormat:t.hasLeadingZerosInInput;return e==="non-input"&&t.hasLeadingZerosInInput&&!t.hasLeadingZerosInFormat&&(n=Number(n).toString()),["input-rtl","input-ltr"].includes(e)&&t.contentType==="digit"&&!r&&n.length===1&&(n=`${n}`),e==="input-rtl"&&(n=`${n}`),n},Tf=t=>t.replace(/[\u2066\u2067\u2068\u2069]/g,""),N9=(t,e)=>{let n=0,r=e?1:0;const i=[];for(let s=0;s<t.length;s+=1){const a=t[s],o=YR(a,e?"input-rtl":"input-ltr"),l=`${a.startSeparator}${o}${a.endSeparator}`,c=Tf(l).length,u=l.length,d=Tf(o),h=r+o.indexOf(d[0])+a.startSeparator.length,p=h+d.length;i.push($({},a,{start:n,end:n+c,startInInput:h,endInInput:p})),n+=c,r+=u}return i},x4e=(t,e,n,r)=>{switch(n.type){case"year":return e.fieldYearPlaceholder({digitAmount:t.formatByString(t.date(),r).length});case"month":return e.fieldMonthPlaceholder({contentType:n.contentType});case"day":return e.fieldDayPlaceholder();case"weekDay":return e.fieldWeekDayPlaceholder({contentType:n.contentType});case"hours":return e.fieldHoursPlaceholder();case"minutes":return e.fieldMinutesPlaceholder();case"seconds":return e.fieldSecondsPlaceholder();case"meridiem":return e.fieldMeridiemPlaceholder();default:return r}},Y3=(t,e,n,r)=>t.formatByString(t.parse(e,n),r),F9=(t,e)=>t.formatByString(t.date(),e).length===4,$9=(t,e,n,r)=>{if(e!=="digit")return!1;switch(n){case"year":return F9(t,r)?t.formatByString(t.setYear(t.date(),1),r)==="0001":t.formatByString(t.setYear(t.date(),2001),r)==="01";case"month":return t.formatByString(t.startOfYear(t.date()),r).length>1;case"day":return t.formatByString(t.startOfMonth(t.date()),r).length>1;case"weekDay":return t.formatByString(t.startOfWeek(t.date()),r).length>1;case"hours":return t.formatByString(t.setHours(t.date(),1),r).length>1;case"minutes":return t.formatByString(t.setMinutes(t.date(),1),r).length>1;case"seconds":return t.formatByString(t.setMinutes(t.date(),1),r).length>1;default:throw new Error("Invalid section type")}},w4e=(t,e)=>{const n=[],{start:r,end:i}=t.escapedCharacters,s=new RegExp(`(\\${r}[^\\${i}]*\\${i})+`,"g");let a=null;for(;a=s.exec(e);)n.push({start:a.index,end:s.lastIndex-1});return n},J3=(t,e,n,r,i,s)=>{let a="";const o=[],l=t.date(),c=v=>{if(v==="")return null;const y=D9(t,v),b=$9(t,y.contentType,y.type,v),C=s?b:y.contentType==="digit",R=r!=null&&t.isValid(r);let w=R?t.formatByString(r,v):"",E=null;if(C)if(b)E=w===""?t.formatByString(l,v).length:w.length;else{if(y.maxLength==null)throw new Error(`MUI: The token ${v} should have a 'maxDigitNumber' property on it's adapter`);E=y.maxLength,R&&(w=M9(t,w,E))}return o.push($({},y,{format:v,maxLength:E,value:w,placeholder:x4e(t,e,y,v),hasLeadingZeros:b,hasLeadingZerosInFormat:b,hasLeadingZerosInInput:C,startSeparator:o.length===0?a:"",endSeparator:"",modified:!1})),null};let u=10,d=n,h=t.expandFormat(n);for(;h!==d;)if(d=h,h=t.expandFormat(d),u-=1,u<0)throw new Error("MUI: The format expansion seems to be  enter in an infinite loop. Please open an issue with the format passed to the picker component");const p=h,f=w4e(t,p),m=new RegExp(`^(${Object.keys(t.formatTokenMap).join("|")})`);let g="";for(let v=0;v<p.length;v+=1){const y=f.find(w=>w.start<=v&&w.end>=v),b=p[v],C=y!=null,R=`${g}${p.slice(v)}`;!C&&b.match(/([A-Za-z]+)/)&&m.test(R)?g+=b:C&&(y==null?void 0:y.start)===v||(y==null?void 0:y.end)===v||(c(g),g="",o.length===0?a+=b:o[o.length-1].endSeparator+=b)}return c(g),o.map(v=>{const y=b=>{let C=b;return C!==null&&C.includes(" ")&&(C=`${C}`),i==="spacious"&&["/",".","-"].includes(C)&&(C=` ${C} `),C};return v.startSeparator=y(v.startSeparator),v.endSeparator=y(v.endSeparator),v})},JC=(t,e)=>{const n=e.some(o=>o.type==="day"),r=[],i=[];for(let o=0;o<e.length;o+=1){const l=e[o];n&&l.type==="weekDay"||(r.push(l.format),i.push(YR(l,"non-input")))}const s=r.join(" "),a=i.join(" ");return t.parse(a,s)},C4e=(t,e)=>{const r=t.map(i=>{const s=YR(i,e?"input-rtl":"input-ltr");return`${i.startSeparator}${s}${i.endSeparator}`}).join("");return e?`${r}`:r},E4e=t=>{const e=t.date(),n=t.endOfYear(e),{maxDaysInMonth:r,longestMonth:i}=t.getMonthArray(e).reduce((s,a)=>{const o=t.getDaysInMonth(a);return o>s.maxDaysInMonth?{maxDaysInMonth:o,longestMonth:a}:s},{maxDaysInMonth:0,longestMonth:null});return{year:({format:s})=>({minimum:0,maximum:F9(t,s)?9999:99}),month:()=>({minimum:1,maximum:t.getMonth(n)+1}),day:({currentDate:s})=>({minimum:1,maximum:s!=null&&t.isValid(s)?t.getDaysInMonth(s):r,longestMonth:i}),weekDay:({format:s,contentType:a})=>{if(a==="digit"){const o=Kb(t,s).map(Number);return{minimum:Math.min(...o),maximum:Math.max(...o)}}return{minimum:1,maximum:7}},hours:({format:s})=>{const a=t.getHours(n);return t.formatByString(t.endOfDay(e),s)!==a.toString()?{minimum:1,maximum:Number(t.formatByString(t.startOfDay(e),s))}:{minimum:0,maximum:a}},minutes:()=>({minimum:0,maximum:t.getMinutes(n)}),seconds:()=>({minimum:0,maximum:t.getSeconds(n)}),meridiem:()=>({minimum:0,maximum:0})}},T4e=(t,e,n,r)=>{switch(e.type){case"year":return t.setYear(r,t.getYear(n));case"month":return t.setMonth(r,t.getMonth(n));case"weekDay":{const i=Kb(t,e.format),s=t.formatByString(n,e.format),a=i.indexOf(s),l=i.indexOf(e.value)-a;return t.addDays(n,l)}case"day":return t.setDate(r,t.getDate(n));case"meridiem":{const i=t.getHours(n)<12,s=t.getHours(r);return i&&s>=12?t.addHours(r,-12):!i&&s<12?t.addHours(r,12):r}case"hours":return t.setHours(r,t.getHours(n));case"minutes":return t.setMinutes(r,t.getMinutes(n));case"seconds":return t.setSeconds(r,t.getSeconds(n));default:return r}},X3={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8},Q3=(t,e,n,r,i)=>[...n].sort((s,a)=>X3[s.type]-X3[a.type]).reduce((s,a)=>!i||a.modified?T4e(t,a,e,s):s,r),R4e=()=>navigator.userAgent.toLowerCase().indexOf("android")>-1,k4e=(t,e,n)=>{if(!(e.every(a=>a.type==="weekDay"||a.value!=="")&&e.some(a=>a.type==="day")))return null;const i=e.map(a=>{if(a.type!=="day")return a;const o=n.day({currentDate:null,format:a.format,contentType:a.contentType});return $({},a,{value:KR(t,o.minimum,o,a)})}),s=JC(t,i);return s==null||!t.isValid(s)?null:e.map(a=>{if(a.type!=="day")return a;const o=n.day({currentDate:s,format:a.format,contentType:a.contentType});return Number(a.value)<=o.maximum?a:$({},a,{value:o.maximum.toString()})})},P4e=(t,e)=>{const n={};if(!e)return t.forEach((l,c)=>{const u=c===0?null:c-1,d=c===t.length-1?null:c+1;n[c]={leftIndex:u,rightIndex:d}}),{neighbors:n,startIndex:0,endIndex:t.length-1};const r={},i={};let s=0,a=0,o=t.length-1;for(;o>=0;){a=t.findIndex((l,c)=>{var u;return c>=s&&((u=l.endSeparator)==null?void 0:u.includes(" "))&&l.endSeparator!==" / "}),a===-1&&(a=t.length-1);for(let l=a;l>=s;l-=1)i[l]=o,r[o]=l,o-=1;s=a+1}return t.forEach((l,c)=>{const u=i[c],d=u===0?null:r[u-1],h=u===t.length-1?null:r[u+1];n[c]={leftIndex:d,rightIndex:h}}),{neighbors:n,startIndex:r[0],endIndex:r[t.length-1]}},_4e={emptyValue:null,getTodayValue:(t,e)=>e==="date"?t.startOfDay(t.date()):t.date(),cleanValue:v4e,areValuesEqual:y4e,isSameError:(t,e)=>t===e,hasError:t=>t!=null,defaultErrorState:null},A4e={updateReferenceValue:(t,e,n)=>e==null||!t.isValid(e)?n:e,getSectionsFromValue:(t,e,n,r,i)=>!t.isValid(e)&&!!n?n:N9(i(e),r),getValueStrFromSections:C4e,getActiveDateManager:(t,e)=>({date:e.value,referenceDate:e.referenceValue,getSections:n=>n,getNewValuesFromNewActiveDate:n=>({value:n,referenceValue:n==null||!t.isValid(n)?e.referenceValue:n})}),parseValueStr:(t,e,n)=>n(t.trim(),e)};var Yb={};Object.defineProperty(Yb,"__esModule",{value:!0});var L9=Yb.default=void 0,Z3=O4e(P);function B9(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(B9=function(r){return r?n:e})(t)}function O4e(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=B9(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var a=i?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}const D4e=typeof window<"u"?Z3.useLayoutEffect:Z3.useEffect;var I4e=D4e;L9=Yb.default=I4e;var j9={},M4e=nr;Object.defineProperty(j9,"__esModule",{value:!0});var $a=j9.default=$4e,eO=F4e(P),N4e=M4e(Yb);function q9(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(q9=function(r){return r?n:e})(t)}function F4e(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=q9(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var a=i?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function $4e(t){const e=eO.useRef(t);return(0,N4e.default)(()=>{e.current=t}),eO.useCallback((...n)=>(0,e.current)(...n),[])}var z9={},rg={},tO;function L4e(){if(tO)return rg;tO=1,Object.defineProperty(rg,"__esModule",{value:!0}),rg.default=t;function t(e,n){typeof e=="function"?e(n):e&&(e.current=n)}return rg}var B4e=nr;Object.defineProperty(z9,"__esModule",{value:!0});var j4e=z9.default=U4e,q4e=H4e(P),z4e=B4e(L4e());function H9(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(H9=function(r){return r?n:e})(t)}function H4e(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=H9(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var a=i?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function U4e(...t){return q4e.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{(0,z4e.default)(n,e)})},t)}const V4e=t=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:$({},t)}}}}),U9={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"open previous view",openNextView:"open next view",calendarViewSwitchingButtonAriaLabel:t=>t==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(t,e,n)=>`Select ${t}. ${e===null?"No time selected":`Selected time is ${n.format(e,"fullTime")}`}`,hoursClockNumberText:t=>`${t} hours`,minutesClockNumberText:t=>`${t} minutes`,secondsClockNumberText:t=>`${t} seconds`,selectViewText:t=>`Select ${t}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:t=>`Week ${t}`,calendarWeekNumberText:t=>`${t}`,openDatePickerDialogue:(t,e)=>t!==null&&e.isValid(t)?`Choose date, selected date is ${e.format(t,"fullDate")}`:"Choose date",openTimePickerDialogue:(t,e)=>t!==null&&e.isValid(t)?`Choose time, selected time is ${e.format(t,"fullTime")}`:"Choose time",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:t=>"Y".repeat(t.digitAmount),fieldMonthPlaceholder:t=>t.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:t=>t.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa"},W4e=U9;V4e(U9);const om=()=>{const t=P.useContext(UC);if(t===null)throw new Error(["MUI: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(t.utils===null)throw new Error(["MUI: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const e=P.useMemo(()=>$({},W4e,t.localeText),[t.localeText]);return P.useMemo(()=>$({},t,{localeText:e}),[t,e])},Jb=()=>om().utils,G4e=()=>om().defaultDates,K4e=()=>om().localeText;function Y4e(t,e,n,r){const{value:i,onError:s}=t,a=om(),o=P.useRef(r),l=e({adapter:a,value:i,props:t});return P.useEffect(()=>{s&&!n(l,o.current)&&s(l,i),o.current=l},[n,s,o,l,i]),l}var V9={};Object.defineProperty(V9,"__esModule",{value:!0});var J4e=V9.default=Q4e,KS=X4e(P);function W9(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(W9=function(r){return r?n:e})(t)}function X4e(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=W9(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var a=i?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function Q4e({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=KS.useRef(t!==void 0),[s,a]=KS.useState(e),o=i?t:s,l=KS.useCallback(c=>{i||a(c)},[]);return[o,l]}const Z4e=t=>{var e;const n=Jb(),r=K4e(),i=om(),a=Ar().direction==="rtl",{valueManager:o,fieldValueManager:l,valueType:c,validator:u,internalProps:d,internalProps:{value:h,defaultValue:p,onChange:f,format:m,formatDensity:g="dense",selectedSections:v,onSelectedSectionsChange:y,shouldRespectLeadingZeros:b=!1}}=t,C=P.useRef(p),R=(e=h??C.current)!=null?e:o.emptyValue,w=P.useMemo(()=>E4e(n),[n]),E=P.useCallback((U,ne=null)=>l.getSectionsFromValue(n,U,ne,a,W=>J3(n,r,m,W,g,b)),[l,m,r,a,b,n,g]),k=P.useMemo(()=>l.getValueStrFromSections(E(o.emptyValue),a),[l,E,o.emptyValue,a]),[T,_]=P.useState(()=>({sections:E(R),value:R,referenceValue:l.updateReferenceValue(n,R,o.getTodayValue(n,c)),tempValueStrAndroid:null})),[D,I]=J4e({controlled:v,default:null,name:"useField",state:"selectedSectionIndexes"}),M=U=>{I(U),y==null||y(U),_(ne=>$({},ne,{selectedSectionQuery:null}))},A=P.useMemo(()=>{if(D==null)return null;if(D==="all")return{startIndex:0,endIndex:T.sections.length-1,shouldSelectBoundarySelectors:!0};if(typeof D=="number")return{startIndex:D,endIndex:D};if(typeof D=="string"){const U=T.sections.findIndex(ne=>ne.type===D);return{startIndex:U,endIndex:U}}return D},[D,T.sections]),O=({value:U,referenceValue:ne,sections:W})=>{if(_(J=>$({},J,{sections:W,value:U,referenceValue:ne,tempValueStrAndroid:null})),f){const J={validationError:u({adapter:i,value:U,props:$({},d,{value:U})})};f(U,J)}},L=(U,ne)=>{const W=[...T.sections];return W[U]=$({},W[U],{value:ne,modified:!0}),N9(W,a)},F=()=>{o.areValuesEqual(n,T.value,o.emptyValue)||O({value:o.emptyValue,referenceValue:T.referenceValue,sections:E(o.emptyValue)})},B=()=>{if(A==null)return;const U=T.sections[A.startIndex];if(U.value==="")return;const ne=l.getActiveDateManager(n,T,U),J=ne.getSections(T.sections).filter(G=>G.value!=="").length===1,K=L(A.startIndex,""),Q=J?null:n.date(new Date("")),re=ne.getNewValuesFromNewActiveDate(Q);(Q!=null&&!n.isValid(Q))!=(ne.date!=null&&!n.isValid(ne.date))?O($({},re,{sections:K})):_(G=>$({},G,re,{sections:K,tempValueStrAndroid:null}))},j=U=>{const ne=(K,Q)=>{const re=n.parse(K,m);if(re==null||!n.isValid(re))return null;const G=J3(n,r,m,re,g,b);return Q3(n,re,G,Q,!1)},W=l.parseValueStr(U,T.referenceValue,ne),J=l.updateReferenceValue(n,W,T.referenceValue);O({value:W,referenceValue:J,sections:E(W,T.sections)})},q=({activeSection:U,newSectionValue:ne,shouldGoToNextSection:W})=>{W&&A&&A.startIndex<T.sections.length-1?M(A.startIndex+1):A&&A.startIndex!==A.endIndex&&M(A.startIndex);const J=l.getActiveDateManager(n,T,U),K=L(A.startIndex,ne),Q=J.getSections(K);let re=JC(n,Q),G=!1;if(!n.isValid(re)){const oe=k4e(n,Q,w);oe!=null&&(G=!0,re=JC(n,oe))}let ie,te;if(re!=null&&n.isValid(re)){const oe=Q3(n,re,Q,J.referenceDate,!0);ie=J.getNewValuesFromNewActiveDate(oe),te=!0}else ie=J.getNewValuesFromNewActiveDate(re),te=(re!=null&&!n.isValid(re))!=(J.date!=null&&!n.isValid(J.date));const Z=G?E(ie.value,T.sections):K;return te?O($({},ie,{sections:Z})):_(oe=>$({},oe,ie,{sections:Z,tempValueStrAndroid:null}))},V=U=>_(ne=>$({},ne,{tempValueStrAndroid:U}));return P.useEffect(()=>{o.areValuesEqual(n,T.value,R)||_(U=>$({},U,{value:R,referenceValue:l.updateReferenceValue(n,R,U.referenceValue),sections:E(R)}))},[R]),P.useEffect(()=>{const U=E(T.value);_(ne=>$({},ne,{sections:U}))},[m,n.locale]),{state:T,selectedSectionIndexes:A,setSelectedSections:M,clearValue:F,clearActiveSection:B,updateSectionValue:q,updateValueFromValueStr:j,setTempAndroidValueStr:V,sectionsValueBoundaries:w,placeholder:k}},e_e=5e3,au=t=>t.saveQuery!=null,t_e=({sections:t,updateSectionValue:e,sectionsValueBoundaries:n,setTempAndroidValueStr:r})=>{const i=Jb(),[s,a]=P.useState(null),o=$a(()=>a(null));P.useEffect(()=>{var h;s!=null&&((h=t[s.sectionIndex])==null?void 0:h.type)!==s.sectionType&&o()},[t,s,o]),P.useEffect(()=>{if(s!=null){const h=setTimeout(()=>o(),e_e);return()=>{window.clearTimeout(h)}}return()=>{}},[s,o]);const l=({keyPressed:h,sectionIndex:p},f,m)=>{const g=h.toLowerCase(),v=t[p];if(s!=null&&(!m||m(s.value))&&s.sectionIndex===p){const b=`${s.value}${g}`,C=f(b,v);if(!au(C))return a({sectionIndex:p,value:b,sectionType:v.type}),C}const y=f(g,v);return au(y)&&!y.saveQuery?(o(),null):(a({sectionIndex:p,value:g,sectionType:v.type}),au(y)?null:y)},c=h=>{const p=(g,v,y)=>{const b=v.filter(C=>C.toLowerCase().startsWith(y));return b.length===0?{saveQuery:!1}:{sectionValue:b[0],shouldGoToNextSection:b.length===1}},f=(g,v,y,b)=>{const C=R=>I9(i,v.type,R);if(v.contentType==="letter")return p(v.format,C(v.format),g);if(y&&b!=null&&D9(i,y).contentType==="letter"){const R=C(y),w=p(y,R,g);return au(w)?{saveQuery:!1}:$({},w,{sectionValue:b(w.sectionValue,R)})}return{saveQuery:!1}};return l(h,(g,v)=>{switch(v.type){case"month":{const y=b=>Y3(i,b,i.formats.month,v.format);return f(g,v,i.formats.month,y)}case"weekDay":{const y=(b,C)=>C.indexOf(b).toString();return f(g,v,i.formats.weekday,y)}case"meridiem":return f(g,v);default:return{saveQuery:!1}}})},u=h=>{const p=(m,g)=>{const v=+`${m}`,y=n[g.type]({currentDate:null,format:g.format,contentType:g.contentType});if(v>y.maximum)return{saveQuery:!1};if(v<y.minimum)return{saveQuery:!0};const b=+`${m}0`>y.maximum||m.length===y.maximum.toString().length;return{sectionValue:KR(i,v,y,g),shouldGoToNextSection:b}};return l(h,(m,g)=>{if(g.contentType==="digit"||g.contentType==="digit-with-letter")return p(m,g);if(g.type==="month"){const v=$9(i,"digit","month","MM"),y=p(m,{type:g.type,format:"MM",hasLeadingZerosInFormat:v,hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(au(y))return y;const b=Y3(i,y.sectionValue,"MM",g.format);return $({},y,{sectionValue:b})}if(g.type==="weekDay"){const v=p(m,g);if(au(v))return v;const y=Kb(i,g.format)[Number(v.sectionValue)-1];return $({},v,{sectionValue:y})}return{saveQuery:!1}},m=>!Number.isNaN(Number(m)))};return{applyCharacterEditing:$a(h=>{const p=t[h.sectionIndex],m=!Number.isNaN(Number(h.keyPressed))?u(h):c(h);m==null?r(null):e({activeSection:p,newSectionValue:m.sectionValue,shouldGoToNextSection:m.shouldGoToNextSection})}),resetCharacterQuery:o}},G9=(t=document)=>{const e=t.activeElement;return e?e.shadowRoot?G9(e.shadowRoot):e:null},n_e=["onClick","onKeyDown","onFocus","onBlur","onMouseUp","onPaste","error"],r_e=t=>{const e=Jb(),{state:n,selectedSectionIndexes:r,setSelectedSections:i,clearValue:s,clearActiveSection:a,updateSectionValue:o,updateValueFromValueStr:l,setTempAndroidValueStr:c,sectionsValueBoundaries:u,placeholder:d}=Z4e(t),{inputRef:h,internalProps:p,internalProps:{readOnly:f=!1,unstableFieldRef:m},forwardedProps:{onClick:g,onKeyDown:v,onFocus:y,onBlur:b,onMouseUp:C,onPaste:R,error:w},fieldValueManager:E,valueManager:k,validator:T}=t,_=pe(t.forwardedProps,n_e),{applyCharacterEditing:D,resetCharacterQuery:I}=t_e({sections:n.sections,updateSectionValue:o,sectionsValueBoundaries:u,setTempAndroidValueStr:c}),M=P.useRef(null),A=j4e(h,M),O=P.useRef(void 0),F=Ar().direction==="rtl",B=P.useMemo(()=>P4e(n.sections,F),[n.sections,F]),j=()=>{var oe;if(f){i(null);return}const ue=(oe=M.current.selectionStart)!=null?oe:0,me=ue<=n.sections[0].startInInput?1:n.sections.findIndex(Y=>Y.startInInput-Y.startSeparator.length>ue),H=me===-1?n.sections.length-1:me-1;i(H)},q=$a((...oe)=>{g==null||g(...oe),j()}),V=$a(oe=>{C==null||C(oe),oe.preventDefault()}),U=$a((...oe)=>{y==null||y(...oe);const ue=M.current;clearTimeout(O.current),O.current=setTimeout(()=>{!ue||ue!==M.current||r!=null||f||(ue.value.length&&Number(ue.selectionEnd)-Number(ue.selectionStart)===ue.value.length?i("all"):j())})}),ne=$a((...oe)=>{b==null||b(...oe),i(null)}),W=$a(oe=>{if(R==null||R(oe),f){oe.preventDefault();return}const ue=oe.clipboardData.getData("text");if(r&&r.startIndex===r.endIndex){const me=n.sections[r.startIndex],H=/^[a-zA-Z]+$/.test(ue),Y=/^[0-9]+$/.test(ue),X=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(ue);if(me.contentType==="letter"&&H||me.contentType==="digit"&&Y||me.contentType==="digit-with-letter"&&X)return;if(H||Y){oe.preventDefault();return}}oe.preventDefault(),l(ue)}),J=$a(oe=>{if(f)return;const ue=oe.target.value,me=Tf(ue);if(r==null){l(me);return}let H;if(r.startIndex===0&&r.endIndex===n.sections.length-1)H=me;else{const Y=Tf(E.getValueStrFromSections(n.sections,F));let X=-1,le=-1;for(let ke=0;ke<Y.length;ke+=1)X===-1&&Y[ke]!==me[ke]&&(X=ke),le===-1&&Y[Y.length-ke-1]!==me[me.length-ke-1]&&(le=ke);const se=n.sections[r.startIndex];if(X<se.start||Y.length-le-1>se.end)return;const ve=me.length-Y.length+se.end-Tf(se.endSeparator||"").length;H=me.slice(se.start,ve)}if(R4e()&&H.length===0){c(ue);return}D({keyPressed:H,sectionIndex:r.startIndex})}),K=$a(oe=>{switch(v==null||v(oe),!0){case(oe.key==="a"&&(oe.ctrlKey||oe.metaKey)):{oe.preventDefault(),i("all");break}case oe.key==="ArrowRight":{if(oe.preventDefault(),r==null)i(B.startIndex);else if(r.startIndex!==r.endIndex)i(r.endIndex);else{const ue=B.neighbors[r.startIndex].rightIndex;ue!==null&&i(ue)}break}case oe.key==="ArrowLeft":{if(oe.preventDefault(),r==null)i(B.endIndex);else if(r.startIndex!==r.endIndex)i(r.startIndex);else{const ue=B.neighbors[r.startIndex].leftIndex;ue!==null&&i(ue)}break}case["Backspace","Delete"].includes(oe.key):{if(oe.preventDefault(),f)break;r==null||r.startIndex===0&&r.endIndex===n.sections.length-1?s():a(),I();break}case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(oe.key):{if(oe.preventDefault(),f||r==null)break;const ue=n.sections[r.startIndex],me=E.getActiveDateManager(e,n,ue),H=S4e(e,ue,oe.key,u,me.date);o({activeSection:ue,newSectionValue:H,shouldGoToNextSection:!1});break}}});L9(()=>{if(r==null){M.current.scrollLeft&&(M.current.scrollLeft=0);return}const oe=n.sections[r.startIndex],ue=n.sections[r.endIndex];let me=oe.startInInput,H=ue.endInInput;if(r.shouldSelectBoundarySelectors&&(me-=oe.startSeparator.length,H+=ue.endSeparator.length),me!==M.current.selectionStart||H!==M.current.selectionEnd){const Y=M.current.scrollTop;M.current.setSelectionRange(me,H),M.current.scrollTop=Y}});const Q=Y4e($({},p,{value:n.value}),T,k.isSameError,k.defaultErrorState),re=P.useMemo(()=>w!==void 0?w:k.hasError(Q),[k,Q,w]);P.useEffect(()=>(M.current&&M.current===document.activeElement&&i("all"),()=>window.clearTimeout(O.current)),[]),P.useEffect(()=>{n.tempValueStrAndroid!=null&&r!=null&&(I(),a())},[n.tempValueStrAndroid]);const G=P.useMemo(()=>{var oe;return(oe=n.tempValueStrAndroid)!=null?oe:E.getValueStrFromSections(n.sections,F)},[n.sections,E,n.tempValueStrAndroid,F]),ie=P.useMemo(()=>r==null||n.sections[r.startIndex].contentType==="letter"?"text":"tel",[r,n.sections]),Z=!(M.current&&M.current===G9(document))&&k.areValuesEqual(e,n.value,k.emptyValue);return P.useImperativeHandle(m,()=>({getSections:()=>n.sections,getActiveSectionIndex:()=>{var oe,ue;const me=(oe=M.current.selectionStart)!=null?oe:0,H=(ue=M.current.selectionEnd)!=null?ue:0;if(me===0&&H===0)return null;const Y=me<=n.sections[0].startInInput?1:n.sections.findIndex(X=>X.startInInput-X.startSeparator.length>me);return Y===-1?n.sections.length-1:Y-1},setSelectedSections:oe=>i(oe)})),$({placeholder:d,autoComplete:"off"},_,{value:Z?"":G,inputMode:ie,readOnly:f,onClick:q,onFocus:U,onBlur:ne,onPaste:W,onChange:J,onKeyDown:K,onMouseUp:V,error:re,ref:A})},i_e=({props:t,value:e,adapter:n})=>{if(e===null)return null;const r=n.utils.date(),i=lv(n.utils,t.minDate,n.defaultDates.minDate),s=lv(n.utils,t.maxDate,n.defaultDates.maxDate);switch(!0){case!n.utils.isValid(e):return"invalidDate";case!!(t.shouldDisableDate&&t.shouldDisableDate(e)):return"shouldDisableDate";case!!(t.shouldDisableMonth&&t.shouldDisableMonth(e)):return"shouldDisableMonth";case!!(t.shouldDisableYear&&t.shouldDisableYear(e)):return"shouldDisableYear";case!!(t.disableFuture&&n.utils.isAfterDay(e,r)):return"disableFuture";case!!(t.disablePast&&n.utils.isBeforeDay(e,r)):return"disablePast";case!!(i&&n.utils.isBeforeDay(e,i)):return"minDate";case!!(s&&n.utils.isAfterDay(e,s)):return"maxDate";default:return null}},s_e=["value","defaultValue","format","formatDensity","shouldRespectLeadingZeros","onChange","readOnly","onError","shouldDisableDate","shouldDisableMonth","shouldDisableYear","minDate","maxDate","disableFuture","disablePast","selectedSections","onSelectedSectionsChange","unstableFieldRef"],a_e=t=>{var e,n,r;const i=Jb(),s=G4e();return $({},t,{disablePast:(e=t.disablePast)!=null?e:!1,disableFuture:(n=t.disableFuture)!=null?n:!1,format:(r=t.format)!=null?r:i.formats.keyboardDate,minDate:lv(i,t.minDate,s.minDate),maxDate:lv(i,t.maxDate,s.maxDate)})},o_e=({props:t,inputRef:e})=>{const n=a_e(t),{value:r,defaultValue:i,format:s,formatDensity:a,shouldRespectLeadingZeros:o,onChange:l,readOnly:c,onError:u,shouldDisableDate:d,shouldDisableMonth:h,shouldDisableYear:p,minDate:f,maxDate:m,disableFuture:g,disablePast:v,selectedSections:y,onSelectedSectionsChange:b,unstableFieldRef:C}=n,R=pe(n,s_e);return r_e({inputRef:e,forwardedProps:R,internalProps:{value:r,defaultValue:i,format:s,formatDensity:a,shouldRespectLeadingZeros:o,onChange:l,readOnly:c,onError:u,shouldDisableDate:d,shouldDisableMonth:h,shouldDisableYear:p,minDate:f,maxDate:m,disableFuture:g,disablePast:v,selectedSections:y,onSelectedSectionsChange:b,unstableFieldRef:C},valueManager:_4e,fieldValueManager:A4e,validator:i_e,valueType:"date"})},l_e=["components","componentsProps","slots","slotProps","InputProps","inputProps"],c_e=["inputRef"],u_e=["ref","onPaste","inputMode","readOnly"],d_e=P.forwardRef(function(e,n){var r,i,s;const a=$e({props:e,name:"MuiDateField"}),{components:o,componentsProps:l,slots:c,slotProps:u,InputProps:d,inputProps:h}=a,p=pe(a,l_e),f=a,m=(r=(i=c==null?void 0:c.textField)!=null?i:o==null?void 0:o.TextField)!=null?r:_n,g=va({elementType:m,externalSlotProps:(s=u==null?void 0:u.textField)!=null?s:l==null?void 0:l.textField,externalForwardedProps:p,ownerState:f}),{inputRef:v}=g,y=pe(g,c_e);y.inputProps=$({},y.inputProps,h),y.InputProps=$({},y.InputProps,d);const b=o_e({props:y,inputRef:v}),{ref:C,onPaste:R,inputMode:w,readOnly:E}=b,k=pe(b,u_e);return S.jsx(m,$({ref:n},k,{InputProps:$({},k.InputProps,{readOnly:E}),inputProps:$({},k.inputProps,{inputMode:w,onPaste:R,ref:C})}))}),h_e="";function f_e(){const{loggedInUser:t}=P.useContext(Vn),[e,n]=P.useState(""),[r,i]=P.useState(""),[s,a]=P.useState(Zl()),[o,l]=P.useState([]),{addPatientProvider:c}=P.useContext(Vn);P.useEffect(()=>{async function p(){const{data:f}=await xn.get(`${h_e}/api/patient/supervisors/${t._id}`);let m=[],g=0;for(const v of f){const y=`${v.fname} ${v.lname}`;m.push(S.jsx(Ou,{value:v.id,control:S.jsx($ne,{}),label:y,name:"responsibleClinicians",checked:g==0},v.id)),g++}l(m)}p()},[t]);async function u(p){p.preventDefault();const f=new FormData(p.target),m={fname:f.get("fname"),lname:f.get("lname"),location:r,description:f.get("description"),responsibleClinicians:f.get("responsibleClinicians"),quickAdd:f.get("blood-test")&&f.get("radiology")?"blood-test, radiology":f.get("blood-test")?"blood-test":f.get("radiology")?"radiology":null,notification:f.get("notification"),birth_date:s,gender:e};c(m)}function d(p){n(p.target.value)}function h(p){i(p.target.value)}return S.jsx(ct,{sx:{"& .MuiTextField-root":{my:1}},children:S.jsxs("form",{onSubmit:u,children:[S.jsxs(ct,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[S.jsx(_n,{multiline:!0,fullWidth:!0,label:"First name",name:"fname",sx:{mr:1},required:!0}),S.jsx(_n,{multiline:!0,fullWidth:!0,label:"Last name",name:"lname",sx:{ml:1},required:!0})]}),S.jsxs(ct,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[S.jsx(n4e,{dateAdapter:g4e,children:S.jsx(d_e,{sx:{width:"100%"},format:"DD-MM-YYYY",label:"Date of Birth",value:s,onChange:p=>a(p),required:!0})}),S.jsxs(Va,{fullWidth:!0,sx:{ml:2,textAlign:"left"},children:[S.jsx(Yl,{id:"select-gender",required:!0,children:"Gender"}),S.jsxs(Ho,{labelId:"select-gender",value:e,label:"Gender",onChange:d,required:!0,children:[S.jsx(Pn,{value:"Male",children:"Male"}),S.jsx(Pn,{value:"Female",children:"Female"})]})]}),S.jsxs(Va,{fullWidth:!0,sx:{ml:2,textAlign:"left"},children:[S.jsx(Yl,{id:"select-location",required:!0,children:"Location"}),S.jsxs(Ho,{labelId:"select-location",value:r,label:"Location",onChange:h,children:[S.jsx(Pn,{value:"Ward 1",children:"Ward 1"}),S.jsx(Pn,{value:"Ward 2",children:"Ward 2"}),S.jsx(Pn,{value:"Ward 3",children:"Ward 3"}),S.jsx(Pn,{value:"Ward 4",children:"Ward 4"})]})]})]}),S.jsx(_n,{multiline:!0,fullWidth:!0,label:"Description",rows:4,name:"description"}),S.jsxs(Va,{sx:{m:3},component:"fieldset",variant:"standard",style:{display:"flex",justifyContent:"flex-start"},children:[S.jsx(Qw,{style:{textAlign:"left"},component:"label",children:"Responsible Clinician"}),S.jsx(jne,{children:o})]}),S.jsxs(Va,{sx:{m:3},component:"fieldset",variant:"standard",style:{display:"flex",justifyContent:"flex-start"},children:[S.jsx(Qw,{style:{textAlign:"left"},component:"label",children:"Quick add"}),S.jsx(Ou,{value:"blood test",control:S.jsx(M0,{}),label:"Blood Test",name:"blood-test"}),S.jsx(Ou,{value:"radiology",control:S.jsx(M0,{}),label:"Radiology",name:"radiology"})]}),S.jsx(dT,{children:S.jsx(Ou,{control:S.jsx(JN,{defaultChecked:!0}),label:"Notification",name:"notification"})}),S.jsx(ht,{style:{display:"flex"},variant:"contained",type:"submit",role:"Add",children:"Add"})]})})}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var At;(function(t){t[t.Disconnected=0]="Disconnected",t[t.EstablishingConnection=3]="EstablishingConnection",t[t.Connecting=1]="Connecting",t[t.CatchingUp=1]="CatchingUp",t[t.Connected=2]="Connected"})(At||(At={}));var ig,p_e=new Uint8Array(16);function m_e(){if(!ig&&(ig=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ig))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ig(p_e)}const g_e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function v_e(t){return typeof t=="string"&&g_e.test(t)}var ur=[];for(var YS=0;YS<256;++YS)ur.push((YS+256).toString(16).substr(1));function y_e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(ur[t[e+0]]+ur[t[e+1]]+ur[t[e+2]]+ur[t[e+3]]+"-"+ur[t[e+4]]+ur[t[e+5]]+"-"+ur[t[e+6]]+ur[t[e+7]]+"-"+ur[t[e+8]]+ur[t[e+9]]+"-"+ur[t[e+10]]+ur[t[e+11]]+ur[t[e+12]]+ur[t[e+13]]+ur[t[e+14]]+ur[t[e+15]]).toLowerCase();if(!v_e(n))throw TypeError("Stringified UUID is invalid");return n}function Cn(t,e,n){t=t||{};var r=t.random||(t.rng||m_e)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return y_e(r)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function N(t,e){if(!t)throw new Error(typeof e=="number"?`0x${e.toString(16).padStart(3,"0")}`:e)}var JR={};JR.byteLength=w_e;var b_e=JR.toByteArray=E_e,K9=JR.fromByteArray=k_e,Zs=[],zi=[],S_e=typeof Uint8Array<"u"?Uint8Array:Array,JS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ou=0,x_e=JS.length;ou<x_e;++ou)Zs[ou]=JS[ou],zi[JS.charCodeAt(ou)]=ou;zi["-".charCodeAt(0)]=62;zi["_".charCodeAt(0)]=63;function Y9(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function w_e(t){var e=Y9(t),n=e[0],r=e[1];return(n+r)*3/4-r}function C_e(t,e,n){return(e+n)*3/4-n}function E_e(t){var e,n=Y9(t),r=n[0],i=n[1],s=new S_e(C_e(t,r,i)),a=0,o=i>0?r-4:r,l;for(l=0;l<o;l+=4)e=zi[t.charCodeAt(l)]<<18|zi[t.charCodeAt(l+1)]<<12|zi[t.charCodeAt(l+2)]<<6|zi[t.charCodeAt(l+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=zi[t.charCodeAt(l)]<<2|zi[t.charCodeAt(l+1)]>>4,s[a++]=e&255),i===1&&(e=zi[t.charCodeAt(l)]<<10|zi[t.charCodeAt(l+1)]<<4|zi[t.charCodeAt(l+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function T_e(t){return Zs[t>>18&63]+Zs[t>>12&63]+Zs[t>>6&63]+Zs[t&63]}function R_e(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(T_e(r));return i.join("")}function k_e(t){for(var e,n=t.length,r=n%3,i=[],s=16383,a=0,o=n-r;a<o;a+=s)i.push(R_e(t,a,a+s>o?o:a+s));return r===1?(e=t[n-1],i.push(Zs[e>>2]+Zs[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Zs[e>>10]+Zs[e>>4&63]+Zs[e<<2&63]+"=")),i.join("")}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function Hc(t,e){switch(e){case"base64":return K9(t);case"utf8":case"utf-8":case void 0:return new TextDecoder().decode(t);default:throw new Error("invalid/unsupported encoding")}}const oh=(t,e)=>qr.from(t,e).buffer,al=(t,e)=>qr.from(t).toString(e);function nO(t){const e=t;return t instanceof ArrayBuffer||typeof e=="object"&&e!==null&&typeof e.byteLength=="number"&&typeof e.slice=="function"&&e.byteOffset===void 0&&e.buffer===void 0}class qr extends Uint8Array{toString(e){return Hc(this,e)}static from(e,n,r){if(typeof e=="string")return qr.fromString(e,n);if(e!==null&&typeof e=="object"&&nO(e.buffer))return N(e.byteOffset===0,0),N(e.byteLength===e.buffer.byteLength,1),qr.fromArrayBuffer(e.buffer,n,r);if(nO(e))return qr.fromArrayBuffer(e,n,r);throw new TypeError}static fromArrayBuffer(e,n,r){const i=n??0,s=r??e.byteLength-i;if(i<0||i>e.byteLength||s<0||s+i>e.byteLength)throw new RangeError;return new qr(e,i,s)}static fromString(e,n){switch(n){case"base64":{const r=this.sanitizeBase64(e),i=b_e(r);return new qr(i.buffer)}case"utf8":case"utf-8":case void 0:{const r=new TextEncoder().encode(e);return new qr(r.buffer)}default:throw new Error("invalid/unsupported encoding")}}static isBuffer(e){throw new Error("unimplemented")}static sanitizeBase64(e){let n=e;return n=n.split("=")[0],n=n.replace(/[^\w+-/]/g,""),n.length%4!==0&&(n+=["","===","==","="][n.length%4]),n}}const P_e="modulepreload",__e=function(t){return"/"+t},rO={},A_e=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=__e(s),s in rO)return;rO[s]=!0;const a=s.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const d=i[u];if(d.href===s&&(!a||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":P_e,a||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),a)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};async function O_e(t,e){const n=await crypto.subtle.digest(e,t);return new Uint8Array(n)}function D_e(t,e){switch(e){case"hex":return Array.prototype.map.call(t,r=>r.toString(16).padStart(2,"0")).join("");case"base64":return K9(t)}}async function I_e(t,e="SHA-1",n="hex"){if(crypto.subtle===void 0)return A_e(()=>import("./hashFileNode-877bb603.js"),[]).then(async i=>i.hashFile(t,e,n));const r=await O_e(t,e);return D_e(r,n)}async function M_e(t){const n=`blob ${t.byteLength.toString()}${String.fromCharCode(0)}`,r=qr.from(n+t.toString());return I_e(r)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const st=window.performance;/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const N_e=t=>qr.from(t,"base64").toString("utf-8"),J9=t=>qr.from(t,"utf8").toString("base64");/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function qh(t,e){return(...n)=>{if(t.disposed)throw new Error("Already disposed");return e(...n)}}var Cc={},F_e={get exports(){return Cc},set exports(t){Cc=t}},Xu=typeof Reflect=="object"?Reflect:null,iO=Xu&&typeof Xu.apply=="function"?Xu.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Vg;Xu&&typeof Xu.ownKeys=="function"?Vg=Xu.ownKeys:Object.getOwnPropertySymbols?Vg=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Vg=function(e){return Object.getOwnPropertyNames(e)};function $_e(t){console&&console.warn&&console.warn(t)}var X9=Number.isNaN||function(e){return e!==e};function jt(){jt.init.call(this)}F_e.exports=jt;Cc.once=q_e;jt.EventEmitter=jt;jt.prototype._events=void 0;jt.prototype._eventsCount=0;jt.prototype._maxListeners=void 0;var sO=10;function Xb(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(jt,"defaultMaxListeners",{enumerable:!0,get:function(){return sO},set:function(t){if(typeof t!="number"||t<0||X9(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");sO=t}});jt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};jt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||X9(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Q9(t){return t._maxListeners===void 0?jt.defaultMaxListeners:t._maxListeners}jt.prototype.getMaxListeners=function(){return Q9(this)};jt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")iO(l,this,n);else for(var c=l.length,u=rB(l,c),r=0;r<c;++r)iO(u[r],this,n);return!0};function Z9(t,e,n,r){var i,s,a;if(Xb(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),a=s[e]),a===void 0)a=s[e]=n,++t._eventsCount;else if(typeof a=="function"?a=s[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),i=Q9(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,$_e(o)}return t}jt.prototype.addListener=function(e,n){return Z9(this,e,n,!1)};jt.prototype.on=jt.prototype.addListener;jt.prototype.prependListener=function(e,n){return Z9(this,e,n,!0)};function L_e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function eB(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=L_e.bind(r);return i.listener=n,r.wrapFn=i,i}jt.prototype.once=function(e,n){return Xb(n),this.on(e,eB(this,e,n)),this};jt.prototype.prependOnceListener=function(e,n){return Xb(n),this.prependListener(e,eB(this,e,n)),this};jt.prototype.removeListener=function(e,n){var r,i,s,a,o;if(Xb(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,a=r.length-1;a>=0;a--)if(r[a]===n||r[a].listener===n){o=r[a].listener,s=a;break}if(s<0)return this;s===0?r.shift():B_e(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,o||n)}return this};jt.prototype.off=jt.prototype.removeListener;jt.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),a;for(i=0;i<s.length;++i)a=s[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function tB(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?j_e(i):rB(i,i.length)}jt.prototype.listeners=function(e){return tB(this,e,!0)};jt.prototype.rawListeners=function(e){return tB(this,e,!1)};jt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):nB.call(t,e)};jt.prototype.listenerCount=nB;function nB(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}jt.prototype.eventNames=function(){return this._eventsCount>0?Vg(this._events):[]};function rB(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function B_e(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function j_e(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function q_e(t,e){return new Promise(function(n,r){function i(a){t.removeListener(e,s),r(a)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}iB(t,e,s,{once:!0}),e!=="error"&&z_e(t,i,{once:!0})})}function z_e(t,e,n){typeof t.on=="function"&&iB(t,"error",e,n)}function iB(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class An extends Cc.EventEmitter{constructor(){super(),this.addListener=super.addListener.bind(this),this.on=super.on.bind(this),this.once=super.once.bind(this),this.prependListener=super.prependListener.bind(this),this.prependOnceListener=super.prependOnceListener.bind(this),this.removeListener=super.removeListener.bind(this),this.off=super.off.bind(this)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class Ti extends An{constructor(e){if(super(),this.isDisposed=!1,this.forwardingEvents=new Map,e!==void 0){const n=i=>this.unforwardEvent(e,i),r=i=>this.forwardEvent(e,i);this.on(Ti.removeListenerEvent,n),this.on(Ti.newListenerEvent,r)}}static isEmitterEvent(e){return e===Ti.newListenerEvent||e===Ti.removeListenerEvent}get disposed(){return this.isDisposed}dispose(){this.isDisposed=!0;for(const e of this.forwardingEvents.values())for(const n of e.values())try{n()}catch{}this.removeAllListeners(),this.forwardingEvents.clear()}forwardEvent(e,...n){for(const r of n)if(e!==void 0&&r!==void 0&&!Ti.isEmitterEvent(r)){let i=this.forwardingEvents.get(r);if(i===void 0&&(i=new Map,this.forwardingEvents.set(r,i)),!i.has(e)){const s=(...a)=>this.emit(r,...a);i.set(e,()=>e.off(r,s)),e.on(r,s)}}}unforwardEvent(e,...n){for(const r of n)if(r!==void 0&&!Ti.isEmitterEvent(r)){const i=this.forwardingEvents.get(r);if(i!=null&&i.has(e)&&this.listenerCount(r)===0){const s=i.get(e);s!==void 0&&s(),i.delete(e),i.size===0&&this.forwardingEvents.delete(r)}}}}Ti.newListenerEvent="newListener";Ti.removeListenerEvent="removeListener";/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class H_e{send(e){}}class U_e{send(e){}sendTelemetryEvent(e,n){}sendErrorEvent(e,n){}sendPerformanceEvent(e,n){}}function V_e(t){const e=s=>s!==null&&!Array.isArray(s)&&typeof s=="object",n=(s,a)=>{const o=s.split(`
`);return o.shift(),a!==void 0&&o.unshift(a),o.join(`
`)},i={message:typeof(t==null?void 0:t.message)=="string"?t.message:String(t)};if(e(t)){const{errorType:s,stack:a,name:o}=t;if(typeof s=="string"&&(i.errorType=s),typeof a=="string"){const l=typeof o=="string"?o:void 0;i.stack=n(a,l)}}return i}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class sn{constructor(){this.completed=!1,this.p=new Promise((e,n)=>{this.res=e,this.rej=n})}get isCompleted(){return this.completed}get promise(){return this.p}resolve(e){this.res!==void 0&&(this.completed=!0,this.res(e))}reject(e){this.rej!==void 0&&(this.completed=!0,this.rej(e))}}class Qa{constructor(e){this.execute=e}get[Symbol.toStringTag](){return this.getPromise()[Symbol.toStringTag]}async then(e,n){return this.getPromise().then(...arguments)}async catch(e){return this.getPromise().catch(...arguments)}async finally(e){return this.getPromise().finally(...arguments)}async getPromise(){return this.result===void 0&&(this.result=this.execute()),this.result}}var W_e=u9,G_e=1,K_e=4;function Y_e(t){return W_e(t,G_e|K_e)}var cv=Y_e;/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class Ec{constructor(e,n,r=()=>Date.now()){this.defaultTimeout=e,this.defaultHandler=n,this.getCurrentTick=r}get hasTimer(){return!!this.runningState}start(e=this.defaultTimeout,n=this.defaultHandler){this.startCore(e,n,e)}clear(){this.runningState&&(clearTimeout(this.runningState.timeout),this.runningState=void 0)}restart(e,n){var r,i;if(!this.runningState)this.start(e,n);else{const s=e??this.runningState.intendedDuration,a=(i=n??((r=this.runningState.restart)===null||r===void 0?void 0:r.handler))!==null&&i!==void 0?i:this.runningState.handler,o=this.calculateRemainingTime(this.runningState);s<o?this.start(s,a):s===o?(this.runningState.handler=a,this.runningState.restart=void 0,this.runningState.intendedDuration=s):this.runningState.restart={startTick:this.getCurrentTick(),duration:s,handler:a}}}startCore(e,n,r){this.clear(),this.runningState={startTick:this.getCurrentTick(),duration:e,intendedDuration:r,handler:n,timeout:setTimeout(()=>this.handler(),e)}}handler(){N(!!this.runningState,10);const e=this.runningState.restart;if(e!==void 0){const n=this.calculateRemainingTime(e);this.startCore(n,()=>e.handler(),e.duration)}else{const n=this.runningState.handler;this.clear(),n()}}calculateRemainingTime(e){const n=this.getCurrentTick()-e.startTick;return e.duration-n}}class J_e{constructor(e,n){this.timer=new Ec(e,()=>this.wrapHandler(n))}get hasTimer(){return this.timer.hasTimer}async start(e,n){return this.clear(),this.deferred=new sn,this.timer.start(e,n?()=>this.wrapHandler(n):void 0),this.deferred.promise}clear(){this.timer.clear(),this.deferred&&(this.deferred.resolve({timerResult:"cancel"}),this.deferred=void 0)}wrapHandler(e){e(),N(!!this.deferred,11),this.deferred.resolve({timerResult:"timeout"}),this.deferred=void 0}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class Ys{constructor(e){this.startTick=e,this.lastTick=e}static start(){const e=st.now();return new Ys(e)}trace(){const e=st.now(),n={totalTimeElapsed:e-this.startTick,duration:e-this.lastTick,tick:e};return this.lastTick=e,n}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function pi(t,e="Unreachable Case"){throw new Error(e)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */let lh=class{constructor(e){this.valueGenerator=e,this._evaluated=!1}get evaluated(){return this._evaluated}get value(){return this._evaluated||(this._evaluated=!0,this._value=this.valueGenerator()),this._value}};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const sB=async t=>new Promise(e=>setTimeout(()=>e(),t));/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function X_e(t){return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const aB=t=>typeof t=="object"&&typeof(t==null?void 0:t.name)=="string"&&typeof(t==null?void 0:t.fluid)=="object",aO=t=>{const e=t;return typeof e=="object"&&(typeof(e==null?void 0:e.package)=="string"||aB(e==null?void 0:e.package))&&((e==null?void 0:e.config)===void 0||typeof(e==null?void 0:e.config)=="object")};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var Tc;(function(t){t.genericError="genericError",t.throttlingError="throttlingError",t.dataCorruptionError="dataCorruptionError",t.dataProcessingError="dataProcessingError",t.usageError="usageError",t.clientSessionExpiredError="clientSessionExpiredError"})(Tc||(Tc={}));/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var ln;(function(t){t.cache="fluid-cache",t.clientDetails="fluid-client-details",t.loadMode="loadMode",t.reconnect="fluid-reconnect",t.sequenceNumber="fluid-sequence-number",t.version="version"})(ln||(ln={}));/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var ze;(function(t){t.Detached="Detached",t.Attaching="Attaching",t.Attached="Attached"})(ze||(ze={}));var Pi;(function(t){t.NotBound="NotBound",t.Binding="Binding",t.Bound="Bound"})(Pi||(Pi={}));var Od={},Q_e={get exports(){return Od},set exports(t){Od=t}},XS,oO;function Z_e(){if(oO)return XS;oO=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,s=r*365.25;XS=function(u,d){d=d||{};var h=typeof u;if(h==="string"&&u.length>0)return a(u);if(h==="number"&&isFinite(u))return d.long?l(u):o(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function a(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var h=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return h*s;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*r;case"hours":case"hour":case"hrs":case"hr":case"h":return h*n;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function o(u){var d=Math.abs(u);return d>=r?Math.round(u/r)+"d":d>=n?Math.round(u/n)+"h":d>=e?Math.round(u/e)+"m":d>=t?Math.round(u/t)+"s":u+"ms"}function l(u){var d=Math.abs(u);return d>=r?c(u,d,r,"day"):d>=n?c(u,d,n,"hour"):d>=e?c(u,d,e,"minute"):d>=t?c(u,d,t,"second"):u+" ms"}function c(u,d,h,p){var f=d>=h*1.5;return Math.round(u/h)+" "+p+(f?"s":"")}return XS}function e5e(t){n.debug=n,n.default=n,n.coerce=l,n.disable=s,n.enable=i,n.enabled=a,n.humanize=Z_e(),n.destroy=c,Object.keys(t).forEach(u=>{n[u]=t[u]}),n.names=[],n.skips=[],n.formatters={};function e(u){let d=0;for(let h=0;h<u.length;h++)d=(d<<5)-d+u.charCodeAt(h),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=e;function n(u){let d,h=null,p,f;function m(...g){if(!m.enabled)return;const v=m,y=Number(new Date),b=y-(d||y);v.diff=b,v.prev=d,v.curr=y,d=y,g[0]=n.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let C=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(w,E)=>{if(w==="%%")return"%";C++;const k=n.formatters[E];if(typeof k=="function"){const T=g[C];w=k.call(v,T),g.splice(C,1),C--}return w}),n.formatArgs.call(v,g),(v.log||n.log).apply(v,g)}return m.namespace=u,m.useColors=n.useColors(),m.color=n.selectColor(u),m.extend=r,m.destroy=n.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==n.namespaces&&(p=n.namespaces,f=n.enabled(u)),f),set:g=>{h=g}}),typeof n.init=="function"&&n.init(m),m}function r(u,d){const h=n(this.namespace+(typeof d>"u"?":":d)+u);return h.log=this.log,h}function i(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let d;const h=(typeof u=="string"?u:"").split(/[\s,]+/),p=h.length;for(d=0;d<p;d++)h[d]&&(u=h[d].replace(/\*/g,".*?"),u[0]==="-"?n.skips.push(new RegExp("^"+u.slice(1)+"$")):n.names.push(new RegExp("^"+u+"$")))}function s(){const u=[...n.names.map(o),...n.skips.map(o).map(d=>"-"+d)].join(",");return n.enable(""),u}function a(u){if(u[u.length-1]==="*")return!0;let d,h;for(d=0,h=n.skips.length;d<h;d++)if(n.skips[d].test(u))return!1;for(d=0,h=n.names.length;d<h;d++)if(n.names[d].test(u))return!0;return!1}function o(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var t5e=e5e;(function(t,e){e.formatArgs=r,e.save=i,e.load=s,e.useColors=n,e.storage=a(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;l.splice(1,0,c,"color: inherit");let u=0,d=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(u++,h==="%c"&&(d=u))}),l.splice(d,0,c)}e.log=console.debug||console.log||(()=>{});function i(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function s(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}function a(){try{return localStorage}catch{}}t.exports=t5e(e);const{formatters:o}=t.exports;o.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(Q_e,Od);const oB=new lh(()=>r5e(i5e())),n5e={getRawConfig:()=>{}},r5e=t=>t!=null?new lm({getRawConfig:e=>{var n,r;try{return(r=lB((n=t.getItem(e))!==null&&n!==void 0?n:void 0))===null||r===void 0?void 0:r.raw}catch{}}}):n5e;function lO(t){switch(t){case"boolean":case"number":case"string":return!0;default:return!1}}function lB(t){let e=t,n;if(typeof t=="string")try{e=JSON.parse(t),n={raw:t,string:t}}catch{}if(e===void 0)return n;const r=typeof e;if(lO(r))return Object.assign(Object.assign({},n),{raw:t,[r]:e});if(Array.isArray(e)){const i=typeof e[0];if(!lO(i))return n;for(const s of e)if(typeof s!==i)return n;return Object.assign(Object.assign({},n),{raw:t,[`${i}[]`]:e})}return n}const i5e=()=>{try{return sessionStorage!==null?sessionStorage:void 0}catch{return}};class lm{constructor(...e){this.configCache=new Map,this.orderedBaseProviders=[];const n=new Set,r=[...e];for(;r.length>0;){const i=r.shift();i!==void 0&&cB(i)&&!n.has(i)&&(n.add(i),i instanceof lm?r.push(...i.orderedBaseProviders):this.orderedBaseProviders.push(i))}}getBoolean(e){var n;return(n=this.getCacheEntry(e))===null||n===void 0?void 0:n.boolean}getNumber(e){var n;return(n=this.getCacheEntry(e))===null||n===void 0?void 0:n.number}getString(e){var n;return(n=this.getCacheEntry(e))===null||n===void 0?void 0:n.string}getBooleanArray(e){var n;return(n=this.getCacheEntry(e))===null||n===void 0?void 0:n["boolean[]"]}getNumberArray(e){var n;return(n=this.getCacheEntry(e))===null||n===void 0?void 0:n["number[]"]}getStringArray(e){var n;return(n=this.getCacheEntry(e))===null||n===void 0?void 0:n["string[]"]}getRawConfig(e){var n;return(n=this.getCacheEntry(e))===null||n===void 0?void 0:n.raw}getCacheEntry(e){if(!this.configCache.has(e)){for(const n of this.orderedBaseProviders){const r=lB(n==null?void 0:n.getRawConfig(e));if(r!==void 0)return this.configCache.set(e,r),r}this.configCache.set(e,{raw:void 0})}return this.configCache.get(e)}}function XR(t){const e=t;return cB(e==null?void 0:e.config)&&(e==null?void 0:e.logger)!==void 0}function ch(t){return XR(t)?t:QR(t,oB.value)}function QR(t,...e){if(XR(t))throw new Error("Logger is already a monitoring context");const n=t;return n.config=new lm(...e),n.logger=t,n}function cB(t){const e=t;return typeof(e==null?void 0:e.getRawConfig)=="function"}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const uB=t=>typeof(t==null?void 0:t.getTelemetryProperties)=="function"&&typeof(t==null?void 0:t.addTelemetryProperties)=="function",dB=t=>typeof(t==null?void 0:t.errorInstanceId)=="string";function hB(t){return typeof(t==null?void 0:t.errorType)=="string"&&typeof(t==null?void 0:t.message)=="string"&&dB(t)&&uB(t)}function fB(t){return typeof(t==null?void 0:t.errorType)=="string"&&typeof(t==null?void 0:t.message)=="string"&&uB(t)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const s5e=t=>t!==null&&!Array.isArray(t)&&typeof t=="object";function ZR(t,e){const n=(s,a)=>{if(!e)return s;const o=s.split(`
`);return o.shift(),a!==void 0&&o.unshift(a),o.join(`
`)},i={message:typeof(t==null?void 0:t.message)=="string"?t.message:String(t)};if(s5e(t)){const{errorType:s,stack:a,name:o}=t;if(typeof s=="string"&&(i.errorType=s),typeof a=="string"){const l=typeof o=="string"?o:void 0;i.stack=n(a,l)}}return i}const ek=t=>typeof(t==null?void 0:t.getTelemetryProperties)=="function";function a5e(t,e){for(const n of Object.keys(e))t[n]===void 0&&(t[n]=e[n])}function o5e(t){const e=t;e.errorInstanceId===void 0&&(e.errorInstanceId=Cn())}function As(t,e={}){var n;if(fB(t)&&o5e(t),hB(t))return t.addTelemetryProperties((n=e.props)!==null&&n!==void 0?n:{}),t;const{message:r,stack:i}=ZR(t,!1),s=new cm({message:r,stack:i});if(typeof t=="object"&&t!==null){const{canRetry:o,retryAfterSeconds:l}=t;Object.assign(As,{canRetry:o,retryAfterSeconds:l})}typeof t!="object"&&s.addTelemetryProperties({typeofError:typeof t});const a=ek(t)?t.getTelemetryProperties():{};return s.addTelemetryProperties(Object.assign(Object.assign(Object.assign({},a),e.props),{untrustedOrigin:1})),s}let QS;function Qb(){const t=new Error("<<generated stack>>");if(QS===void 0&&(QS=t.stack!==void 0),QS)return t;try{throw t}catch(e){return e}}function l5e(){return Qb().stack}function Zb(t,e){const{message:n,stack:r}=ZR(t,!1),i=e(n);return r!==void 0&&mB(i,r),gB(t)&&i.addTelemetryProperties({untrustedOrigin:1}),dB(t)&&(i.overwriteErrorInstanceId(t.errorInstanceId),i.addTelemetryProperties({innerErrorInstanceId:t.errorInstanceId})),ek(t)&&i.addTelemetryProperties(t.getTelemetryProperties()),i}function pB(t,e,n){const r=Zb(t,e),i=r.errorInstanceId,s=i;return n.sendTelemetryEvent({eventName:"WrapError",errorInstanceId:i,wrappedByErrorInstanceId:s},t),r}function mB(t,e){try{Object.assign(t,{stack:e})}catch{t.addTelemetryProperties({stack2:e})}}function gB(t){return!fB(t)||t.getTelemetryProperties().untrustedOrigin===1&&t.errorType===cm.normalizedErrorType}function c5e(t){return typeof(t==null?void 0:t.value)!="object"&&typeof(t==null?void 0:t.tag)=="string"}function u5e(t,e){const n={};for(const r of Object.keys(t)){if(e.has(r))continue;const i=t[r];switch(typeof i){case"string":case"number":case"boolean":case"undefined":n[r]=i;break;default:{c5e(i)?n[r]=i:n[r]="REDACTED (arbitrary object)";break}}}return n}const d5e=()=>{const t=new WeakSet;return(e,n)=>{if(typeof n=="object"&&n!==null){if(t.has(n))return"<removed/circular>";t.add(n)}return n}};class rt extends Error{constructor(e,n,r=new Set){super(e),this.omitPropsFromLogging=r,this._errorInstanceId=Cn(),this.fluidErrorCode="-",r.add("omitPropsFromLogging"),r.add("_errorInstanceId"),n&&this.addTelemetryProperties(n)}get errorInstanceId(){return this._errorInstanceId}overwriteErrorInstanceId(e){this._errorInstanceId=e}addTelemetryProperties(e){a5e(this,e)}getTelemetryProperties(){const e=u5e(this,this.omitPropsFromLogging);return Object.assign(Object.assign({},e),{stack:this.stack,message:this.message,errorInstanceId:this._errorInstanceId})}}class cm extends rt{constructor(e){super(e.message),this.errorType=cm.normalizedErrorType,e.stack!==void 0&&mB(this,e.stack)}}cm.normalizedErrorType="genericError";/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var Vt;(function(t){t.PackageData="PackageData",t.CodeArtifact="CodeArtifact",t.UserData="UserData"})(Vt||(Vt={}));class dn{constructor(e,n){this.namespace=e,this.properties=n}static formatTick(e){return Math.floor(e)}static numberFromString(e){if(e==null)return;const n=Number(e);return Number.isNaN(n)?e:n}static sanitizePkgName(e){return e.replace("@","").replace("/","-")}static prepareErrorObject(e,n,r){const{message:i,errorType:s,stack:a}=ZR(n,!0);if(e.stack=a,e.error=i,e.errorType=s,ek(n)){const o=n.getTelemetryProperties();for(const l of Object.keys(o))e[l]===void 0&&(e[l]=o[l])}e.stack===void 0&&r&&(e.stack=l5e())}sendTelemetryEvent(e,n){var r;this.sendTelemetryEventCore(Object.assign(Object.assign({},e),{category:(r=e.category)!==null&&r!==void 0?r:"generic"}),n)}sendTelemetryEventCore(e,n){const r=Object.assign({},e);n!==void 0&&dn.prepareErrorObject(r,n,!1),typeof r.duration=="number"&&(r.duration=dn.formatTick(r.duration)),this.send(r)}sendErrorEvent(e,n){this.sendTelemetryEventCore(Object.assign(Object.assign({error:e.eventName},e),{category:"error"}),n)}sendPerformanceEvent(e,n){var r;const i=Object.assign(Object.assign({},e),{category:(r=e.category)!==null&&r!==void 0?r:"performance"});this.sendTelemetryEventCore(i,n)}prepareEvent(e){const n=e.category==="error"||e.error!==void 0,r=Object.assign({},e);if(this.namespace!==void 0&&(r.eventName=`${this.namespace}${dn.eventNamespaceSeparator}${r.eventName}`),this.properties){const i=[];i.push(this.properties.all),n&&i.push(this.properties.error);for(const s of i)if(s!==void 0)for(const a of Object.keys(s)){if(e[a]!==void 0)continue;const o=s[a],l=typeof o=="function"?o():o;l!==void 0&&(r[a]=l)}}return r}}dn.eventNamespaceSeparator=":";class h5e{constructor(e){this.logger=e}send(e){const n={category:e.category,eventName:e.eventName};for(const r of Object.keys(e)){const i=e[r],{value:s,tag:a}=typeof i=="object"?i:{value:i,tag:void 0};switch(a){case void 0:n[r]=s;break;case Vt.PackageData:n[r]=s;break;case Vt.UserData:n[r]="REDACTED (UserData)";break;default:n[r]="REDACTED (unknown tag)";break}}this.logger.send(n)}}class ot extends dn{constructor(e,n,r){super(n,r),this.baseLogger=e,XR(e)&&QR(this,new lm(e.config))}static create(e,n,r){if(e instanceof ot){const i={};for(const a of[e.properties,r])a!==void 0&&(a.all!==void 0&&(i.all=Object.assign(Object.assign({},i.all),a.all)),a.error!==void 0&&(i.error=Object.assign(Object.assign({},i.error),a.error)));const s=e.namespace===void 0?n:n===void 0?e.namespace:`${e.namespace}${dn.eventNamespaceSeparator}${n}`;return new ot(e.baseLogger,s,i)}return new ot(e||new H_e,n,r)}send(e){this.baseLogger.send(this.prepareEvent(e))}}class f5e extends dn{constructor(e,n){super(e,n),this.loggers=[]}addLogger(e){e!=null&&this.loggers.push(e)}send(e){const n=this.prepareEvent(e);this.loggers.forEach(r=>{r.send(n)})}}class gt{constructor(e,n,r={end:!0,cancel:"generic"}){this.logger=e,this.markers=r,this.startTime=st.now(),this.event=Object.assign({},n),this.markers.start&&this.reportEvent("start"),typeof window=="object"&&window!=null&&window.performance&&(this.startMark=`${n.eventName}-start`,window.performance.mark(this.startMark))}static start(e,n,r){return new gt(e,n,r)}static timedExec(e,n,r,i){const s=gt.start(e,n,i);try{const a=r(s);return s.autoEnd(),a}catch(a){throw s.cancel(void 0,a),a}}static async timedExecAsync(e,n,r,i){const s=gt.start(e,n,i);try{const a=await r(s);return s.autoEnd(),a}catch(a){throw s.cancel(void 0,a),a}}get duration(){return st.now()-this.startTime}reportProgress(e,n="update"){this.reportEvent(n,e)}autoEnd(){this.event&&this.markers.end&&this.reportEvent("end"),this.performanceEndMark(),this.event=void 0}end(e){this.reportEvent("end",e),this.performanceEndMark(),this.event=void 0}performanceEndMark(){if(this.startMark&&this.event){const e=`${this.event.eventName}-end`;window.performance.mark(e),window.performance.measure(`${this.event.eventName}`,this.startMark,e),this.startMark=void 0}}cancel(e,n){this.markers.cancel!==void 0&&this.reportEvent("cancel",Object.assign({category:this.markers.cancel},e),n),this.event=void 0}reportEvent(e,n,r){if(!this.event)return;const i=Object.assign(Object.assign({},this.event),n);i.eventName=`${i.eventName}_${e}`,e!=="start"&&(i.duration=this.duration),this.logger.sendPerformanceEvent(i,r)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class Rf extends dn{constructor(e,n,r){super(void 0,r),this.debug=e,this.debugErr=n}static create(e,n){const r=Od.debug(e),i=Od.debug(e);return i.log=console.error.bind(console),i.enabled=!0,new Rf(r,i,n)}static mixinDebugLogger(e,n,r){if(!n)return Rf.create(e,r);const i=new f5e(void 0,r);return i.addLogger(Rf.create(e,this.tryGetBaseLoggerProps(n))),i.addLogger(ot.create(n,e)),i}static tryGetBaseLoggerProps(e){if(e instanceof dn)return e.properties}send(e){const n=this.prepareEvent(e),r=n.category==="error";let i=r?this.debugErr:this.debug;const s=e.eventName.lastIndexOf(dn.eventNamespaceSeparator),a=e.eventName.substring(s+1);s>0&&(i=i.extend(e.eventName.substring(0,s))),n.eventName=void 0;let o="";o=`tick=${dn.formatTick(st.now())}`;const l=n.stack?n.stack:"";n.stack=void 0;let c;try{c=JSON.stringify(n)}catch{n.error=void 0,c=JSON.stringify(n)}c==="{}"&&(c=""),r&&(i.enabled=!0),i(`${a} ${c} ${o} ${l}`)}}class tk extends An{constructor(e){super(),this.errorHandler=e}emit(e,...n){try{return super.emit(e,...n)}catch(r){return this.errorHandler(e,r),!0}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const vB="connected",yB="disconnected";function p5e(t,e,n,...r){try{t.emit(n,...r)}catch(i){e.sendErrorEvent({eventName:"RaiseEventError",event:n},i)}}function nk(t,e,n,r){try{n?e.emit(vB,r):e.emit(yB)}catch(i){t.sendErrorEvent({eventName:"RaiseConnectedEventError"},i)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class bB{constructor(e,n,r=e){this.threshold=e,this.logger=n,this.thresholdMultiple=r}send(e,n){n<this.threshold||this.logger.sendPerformanceEvent({eventName:e,value:n})}sendIfMultiple(e,n){n===this.thresholdMultiple&&(this.logger.sendPerformanceEvent({eventName:e,value:n}),this.thresholdMultiple=this.thresholdMultiple*2)}}function m5e(t,e,n){if(t)return!0;const r=typeof n=="string"?{eventName:n,category:"error"}:Object.assign({category:"error"},n);return e.send(r),!1}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class cO{constructor(e,n,r,i=!1,s=new Map){this.eventBase=e,this.logger=n,this.sampleThreshold=r,this.includeAggregateMetrics=i,this.perBucketProperties=s,this.disposed=!1,this.measurementsMap=new Map}measure(e,n=""){var r,i,s;const a=st.now(),o=e(),l=st.now()-a;let c=this.measurementsMap.get(n);return c===void 0&&(c={count:0,duration:-1},this.measurementsMap.set(n,c)),c.count++,c.duration=l,this.includeAggregateMetrics&&(c.totalDuration=((r=c.totalDuration)!==null&&r!==void 0?r:0)+l,c.minDuration=Math.min((i=c.minDuration)!==null&&i!==void 0?i:l,l),c.maxDuration=Math.max((s=c.maxDuration)!==null&&s!==void 0?s:0,l)),c.count>=this.sampleThreshold&&this.flushBucket(n),o}flushBucket(e){const n=this.measurementsMap.get(e);if(n!==void 0&&n.count!==0){const r=this.perBucketProperties.get(e),i=Object.assign(Object.assign(Object.assign({},this.eventBase),r),n);this.logger.sendPerformanceEvent(i),this.measurementsMap.delete(e)}}dispose(e){this.measurementsMap.forEach((n,r)=>this.flushBucket(r))}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class Ya extends rt{constructor(e,n,r){super(e,r,new Set(["error"])),this.error=n,this.errorType=Tc.genericError}}class rk extends rt{constructor(e,n,r){super(e,r),this.retryAfterSeconds=n,this.errorType=Tc.throttlingError}static wrap(e,n,r){return pB(e,s=>new rk(s,n),r)}}class Tt extends rt{constructor(e){super(e,{usageError:!0}),this.errorType="usageError"}}class g5e extends rt{constructor(e,n){super(e,{timeoutMs:n}),this.expiryMs=n,this.errorType=Tc.clientSessionExpiredError}}class da extends rt{constructor(e,n){super(e,Object.assign(Object.assign({},n),{dataProcessingError:1})),this.errorType=Tc.dataCorruptionError,this.canRetry=!1}}class Ni extends rt{constructor(e){super(e),this.errorType=Tc.dataProcessingError,this.canRetry=!1}static create(e,n,r,i={}){const s=Ni.wrapIfUnrecognized(e,n,r);return s.addTelemetryProperties(i),s}static wrapIfUnrecognized(e,n,r){const i=Object.assign({dataProcessingError:1,dataProcessingCodepath:n},r===void 0?void 0:Rc(r)),s=As(e,{props:i});if(!gB(s))return s;const a=Zb(s,o=>new Ni(o));return a.addTelemetryProperties(s.getTelemetryProperties()),a}}const Rc=t=>({messageClientId:t.clientId,messageSequenceNumber:t.sequenceNumber,messageClientSequenceNumber:t.clientSequenceNumber,messageReferenceSequenceNumber:t.referenceSequenceNumber,messageMinimumSequenceNumber:t.minimumSequenceNumber,messageTimestamp:t.timestamp});/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class ik{constructor(e){this.internalStorageService=e}set policies(e){this._policies=e}get policies(){var e;return(e=this._policies)!==null&&e!==void 0?e:this.internalStorageService.policies}get repositoryUrl(){return this.internalStorageService.repositoryUrl}async getSnapshotTree(e,n){return this.internalStorageService.getSnapshotTree(e,n)}async getVersions(e,n,r){return this.internalStorageService.getVersions(e,n,r)}async uploadSummaryWithContext(e,n){return this.internalStorageService.uploadSummaryWithContext(e,n)}async downloadSummary(e){return this.internalStorageService.downloadSummary(e)}async createBlob(e){return this.internalStorageService.createBlob(e)}async readBlob(e){return this.internalStorageService.readBlob(e)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class v5e extends ik{constructor(e,n){super(e),this.blobs=n}get policies(){return this.internalStorageService.policies}async readBlob(e){const n=this.blobs.get(e);return n!==void 0?n:this.internalStorageService.readBlob(e)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var et;(function(t){t.NoOp="noop",t.ClientJoin="join",t.ClientLeave="leave",t.Propose="propose",t.Reject="reject",t.Summarize="summarize",t.SummaryAck="summaryAck",t.SummaryNack="summaryNack",t.Operation="op",t.RemoteHelp="remoteHelp",t.NoClient="noClient",t.RoundTrip="tripComplete",t.Control="control"})(et||(et={}));var uO;(function(t){t.ThrottlingError="ThrottlingError",t.InvalidScopeError="InvalidScopeError",t.BadRequestError="BadRequestError",t.LimitExceededError="LimitExceededError"})(uO||(uO={}));/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var Ca;(function(t){t.File="100644",t.Executable="100755",t.Directory="040000",t.Symlink="120000"})(Ca||(Ca={}));var Pr;(function(t){t.Blob="Blob",t.Tree="Tree",t.Attachment="Attachment"})(Pr||(Pr={}));/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var Ne;(function(t){t.Tree=1,t.Blob=2,t.Handle=3,t.Attachment=4})(Ne||(Ne={}));/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var Vo;(function(t){t.DocRead="doc:read",t.DocWrite="doc:write",t.SummaryWrite="summary:write"})(Vo||(Vo={}));/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function y5e(t){const e=t.type===Ne.Handle?t.handleType:t.type;switch(e){case Ne.Blob:case Ne.Attachment:return Ca.File;case Ne.Tree:return Ca.Directory;default:pi(e,`Unknown type: ${e}`)}}function SB(t){const e=t.type===Ne.Handle?t.handleType:t.type;switch(e){case Ne.Blob:case Ne.Attachment:return"blob";case Ne.Tree:return"tree";default:pi(e,`Unknown type: ${e}`)}}function sk(t,e=new Map,n=!1){const r={},i={id:t.sha,blobs:{},trees:{}};r[""]=i;for(const s of t.tree){const a=n?s.path.replace(/^\.app\//,""):s.path,o=a.lastIndexOf("/"),l=a.slice(0,Math.max(0,o)),c=a.slice(o+1),u=r[l];if(s.type==="tree"){const d={id:s.sha,blobs:{},commits:{},trees:{}};u.trees[decodeURIComponent(c)]=d,r[a]=d}else if(s.type==="blob")u.blobs[decodeURIComponent(c)]=s.sha,e.set(s.sha,`/${a}`);else throw new Error("Unknown entry type!!")}return i}class xB{constructor(e,n,r="utf-8"){this.path=e,this.mode=Ca.File,this.type=Pr.Blob,this.value={contents:n,encoding:r}}}class b5e{constructor(e,n){this.path=e,this.value=n,this.mode=Ca.Directory,this.type=Pr.Tree}}class S5e{constructor(e,n){this.path=e,this.id=n,this.mode=Ca.File,this.type=Pr.Attachment,this.value={id:n}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class dO{constructor(e,n,r,i){this.sequenceNumber=e,this.key=n,this.value=r,this.local=i}}class x5e extends An{constructor(e){super(),this.isDisposed=!1,this.members=new Map(e),this.snapshotCache=e}get disposed(){return this.isDisposed}snapshot(){var e;return(e=this.snapshotCache)!==null&&e!==void 0||(this.snapshotCache=cv(Array.from(this.members))),this.snapshotCache}addMember(e,n){N(!this.members.has(e),462),this.members.set(e,n),this.emit("addMember",e,n),this.snapshotCache=void 0}removeMember(e){N(this.members.has(e),463),this.members.delete(e),this.emit("removeMember",e),this.snapshotCache=void 0}getMembers(){return new Map(this.members)}getMember(e){return this.members.get(e)}dispose(){this.isDisposed=!0}}class w5e extends An{constructor(e,n){super(),this.sendProposal=n,this.isDisposed=!1,this.stateEvents=new Cc.EventEmitter,this.proposals=new Map(e.proposals.map(([,r])=>[r.sequenceNumber,new dO(r.sequenceNumber,r.key,r.value,!1)])),this.values=new Map(e.values),this.proposalsSnapshotCache=e.proposals,this.valuesSnapshotCache=e.values}get disposed(){return this.isDisposed}snapshot(){var e,n;return(e=this.proposalsSnapshotCache)!==null&&e!==void 0||(this.proposalsSnapshotCache=Array.from(this.proposals).map(([r,i])=>[r,{sequenceNumber:r,key:i.key,value:i.value},[]])),(n=this.valuesSnapshotCache)!==null&&n!==void 0||(this.valuesSnapshotCache=cv(Array.from(this.values))),{proposals:this.proposalsSnapshotCache,values:this.valuesSnapshotCache}}has(e){return this.values.has(e)}get(e){var n;return(n=this.values.get(e))===null||n===void 0?void 0:n.value}getApprovalData(e){const n=this.values.get(e);return n?cv(n):void 0}async propose(e,n){const r=this.sendProposal(e,n);if(r<0)throw this.emit("error",{eventName:"ProposalInDisconnectedState",key:e}),new Error("Can't propose in disconnected state");return new Promise((i,s)=>{let a;const o=(h,p)=>{h===r&&(a=p,this.stateEvents.off("localProposalSequenced",o),this.stateEvents.off("disconnected",c),this.stateEvents.on("localProposalApproved",l))},l=h=>{h===a&&(i(),d())},c=()=>{a===void 0&&this.stateEvents.once("connected",()=>{a===void 0&&(s(new Error("Client disconnected without successfully sending proposal")),d())})},u=()=>{s(new Error("QuorumProposals was disposed")),d()},d=()=>{this.stateEvents.off("localProposalSequenced",o),this.stateEvents.off("localProposalApproved",l),this.stateEvents.off("disconnected",c),this.stateEvents.off("disposed",u)};this.stateEvents.on("localProposalSequenced",o),this.stateEvents.on("disconnected",c),this.stateEvents.on("disposed",u)})}addProposal(e,n,r,i,s){N(!this.proposals.has(r),464);const a=new dO(r,e,n,i);this.proposals.set(r,a),this.emit("addProposal",a),i&&this.stateEvents.emit("localProposalSequenced",s,r),this.proposalsSnapshotCache=void 0}updateMinimumSequenceNumber(e){const n=e.minimumSequenceNumber,r=[];for(const[i,s]of this.proposals)i<=n&&r.push(s);r.sort((i,s)=>i.sequenceNumber-s.sequenceNumber);for(const i of r){const s={approvalSequenceNumber:e.sequenceNumber,commitSequenceNumber:-1,key:i.key,sequenceNumber:i.sequenceNumber,value:i.value};this.values.set(s.key,s),this.valuesSnapshotCache=void 0,this.emit("approveProposal",s.sequenceNumber,s.key,s.value,s.approvalSequenceNumber),this.proposals.delete(i.sequenceNumber),this.proposalsSnapshotCache=void 0,i.local&&this.stateEvents.emit("localProposalApproved",i.sequenceNumber)}}setConnectionState(e){e?this.stateEvents.emit("connected"):this.stateEvents.emit("disconnected")}dispose(){this.isDisposed=!0,this.stateEvents.emit("disposed")}}class C5e extends An{constructor(e,n,r,i){super(),this.isDisposed=!1,this.quorumClients=new x5e(e),this.quorumClients.on("addMember",(s,a)=>{this.emit("addMember",s,a)}),this.quorumClients.on("removeMember",s=>{this.emit("removeMember",s)}),this.quorumProposals=new w5e({proposals:n,values:r},i),this.quorumProposals.on("addProposal",s=>{this.emit("addProposal",s)}),this.quorumProposals.on("approveProposal",(s,a,o,l)=>{this.emit("approveProposal",s,a,o,l)})}get disposed(){return this.isDisposed}close(){this.removeAllListeners()}snapshot(){const e=this.quorumClients.snapshot(),{proposals:n,values:r}=this.quorumProposals.snapshot();return{members:e,proposals:n,values:r}}has(e){return this.quorumProposals.has(e)}get(e){return this.quorumProposals.get(e)}getApprovalData(e){return this.quorumProposals.getApprovalData(e)}addMember(e,n){this.quorumClients.addMember(e,n)}removeMember(e){this.quorumClients.removeMember(e)}getMembers(){return this.quorumClients.getMembers()}getMember(e){return this.quorumClients.getMember(e)}async propose(e,n){return this.quorumProposals.propose(e,n)}addProposal(e,n,r,i,s){return this.quorumProposals.addProposal(e,n,r,i,s)}updateMinimumSequenceNumber(e){this.quorumProposals.updateMinimumSequenceNumber(e)}setConnectionState(e,n){this.quorumProposals.setConnectionState(e)}dispose(){throw new Error("Not implemented.")}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class E5e{constructor(e,n,r,i,s,a,o){this.minimumSequenceNumber=e,this.sequenceNumber=n,this.term=r??1,this._quorum=new C5e(i,s,a,o)}get quorum(){return this._quorum}get attributes(){return{minimumSequenceNumber:this.minimumSequenceNumber,sequenceNumber:this.sequenceNumber,term:this.term}}setConnectionState(e,n){this._quorum.setConnectionState(e,n)}snapshot(){return this._quorum.snapshot()}close(){this._quorum.close()}processMessage(e,n){if(e.sequenceNumber!==this.sequenceNumber+1)throw new Error(`Protocol state is not moving sequentially. Current is ${this.sequenceNumber}. Next is ${e.sequenceNumber}`);this.sequenceNumber=e.sequenceNumber,this.minimumSequenceNumber=e.minimumSequenceNumber;let r=!1;switch(e.type){case et.ClientJoin:const i=e,s=JSON.parse(i.data),a={client:s.detail,sequenceNumber:i.sequenceNumber};this._quorum.addMember(s.clientId,a);break;case et.ClientLeave:const l=JSON.parse(e.data);this._quorum.removeMember(l);break;case et.Propose:const c=e.contents;this._quorum.addProposal(c.key,c.value,e.sequenceNumber,n,e.clientSequenceNumber),r=!0;break;case et.Reject:throw new Error("Quorum rejection is removed.")}return this._quorum.updateMinimumSequenceNumber(e),{immediateNoOp:r}}getProtocolState(){return Object.assign({sequenceNumber:this.sequenceNumber,minimumSequenceNumber:this.minimumSequenceNumber},this._quorum.snapshot())}}class T5e extends E5e{processMessage(e,n){const r=this._quorum.getMember(e.clientId);if(e.clientId!=null){if(r===void 0&&e.type!==et.ClientJoin)throw new Error("Remote message's clientId is missing from the quorum");if((r==null?void 0:r.shouldHaveLeft)===!0&&e.type!==et.NoOp)throw new Error("Remote message's clientId already should have left")}return super.processMessage(e,n)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function wB(t,e,n){const r=[];for(const i of e){const s=`${t}${i.path}`;if(i.type===Pr.Blob){const a=i.value,o=oh(a.contents,a.encoding),l=Cn();n.set(l,o);const c={mode:Ca[i.mode],path:s,sha:l,size:0,type:"blob",url:""};r.push(c)}else if(i.type===Pr.Tree){N(i.type===Pr.Tree,257);const a=i.value,o={mode:Ca[i.mode],path:s,sha:"",size:-1,type:"tree",url:""};r.push(o);const l=wB(`${s}/`,a.entries,n);r.push(...l)}}return r}function R5e(t,e){return{sha:"",tree:wB("",t,e),url:""}}function CB(t,e){const n=R5e(t,e);return sk(n)}var uv={},k5e={get exports(){return uv},set exports(t){uv=t}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(t,e){(function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,s=typeof hn=="object"&&hn;(s.global===s||s.window===s||s.self===s)&&(n=s);var a,o=2147483647,l=36,c=1,u=26,d=38,h=700,p=72,f=128,m="-",g=/^xn--/,v=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=l-c,R=Math.floor,w=String.fromCharCode,E;function k(q){throw RangeError(b[q])}function T(q,V){for(var U=q.length,ne=[];U--;)ne[U]=V(q[U]);return ne}function _(q,V){var U=q.split("@"),ne="";U.length>1&&(ne=U[0]+"@",q=U[1]),q=q.replace(y,".");var W=q.split("."),J=T(W,V).join(".");return ne+J}function D(q){for(var V=[],U=0,ne=q.length,W,J;U<ne;)W=q.charCodeAt(U++),W>=55296&&W<=56319&&U<ne?(J=q.charCodeAt(U++),(J&64512)==56320?V.push(((W&1023)<<10)+(J&1023)+65536):(V.push(W),U--)):V.push(W);return V}function I(q){return T(q,function(V){var U="";return V>65535&&(V-=65536,U+=w(V>>>10&1023|55296),V=56320|V&1023),U+=w(V),U}).join("")}function M(q){return q-48<10?q-22:q-65<26?q-65:q-97<26?q-97:l}function A(q,V){return q+22+75*(q<26)-((V!=0)<<5)}function O(q,V,U){var ne=0;for(q=U?R(q/h):q>>1,q+=R(q/V);q>C*u>>1;ne+=l)q=R(q/C);return R(ne+(C+1)*q/(q+d))}function L(q){var V=[],U=q.length,ne,W=0,J=f,K=p,Q,re,G,ie,te,Z,oe,ue,me;for(Q=q.lastIndexOf(m),Q<0&&(Q=0),re=0;re<Q;++re)q.charCodeAt(re)>=128&&k("not-basic"),V.push(q.charCodeAt(re));for(G=Q>0?Q+1:0;G<U;){for(ie=W,te=1,Z=l;G>=U&&k("invalid-input"),oe=M(q.charCodeAt(G++)),(oe>=l||oe>R((o-W)/te))&&k("overflow"),W+=oe*te,ue=Z<=K?c:Z>=K+u?u:Z-K,!(oe<ue);Z+=l)me=l-ue,te>R(o/me)&&k("overflow"),te*=me;ne=V.length+1,K=O(W-ie,ne,ie==0),R(W/ne)>o-J&&k("overflow"),J+=R(W/ne),W%=ne,V.splice(W++,0,J)}return I(V)}function F(q){var V,U,ne,W,J,K,Q,re,G,ie,te,Z=[],oe,ue,me,H;for(q=D(q),oe=q.length,V=f,U=0,J=p,K=0;K<oe;++K)te=q[K],te<128&&Z.push(w(te));for(ne=W=Z.length,W&&Z.push(m);ne<oe;){for(Q=o,K=0;K<oe;++K)te=q[K],te>=V&&te<Q&&(Q=te);for(ue=ne+1,Q-V>R((o-U)/ue)&&k("overflow"),U+=(Q-V)*ue,V=Q,K=0;K<oe;++K)if(te=q[K],te<V&&++U>o&&k("overflow"),te==V){for(re=U,G=l;ie=G<=J?c:G>=J+u?u:G-J,!(re<ie);G+=l)H=re-ie,me=l-ie,Z.push(w(A(ie+H%me,0))),re=R(H/me);Z.push(w(A(re,0))),J=O(U,ue,ne==W),U=0,++ne}++U,++V}return Z.join("")}function B(q){return _(q,function(V){return g.test(V)?L(V.slice(4).toLowerCase()):V})}function j(q){return _(q,function(V){return v.test(V)?"xn--"+F(V):V})}if(a={version:"1.3.2",ucs2:{decode:D,encode:I},decode:L,encode:F,toASCII:j,toUnicode:B},r&&i)if(t.exports==r)i.exports=a;else for(E in a)a.hasOwnProperty(E)&&(r[E]=a[E]);else n.punycode=a})(hn)})(k5e,uv);var P5e={isString:function(t){return typeof t=="string"},isObject:function(t){return typeof t=="object"&&t!==null},isNull:function(t){return t===null},isNullOrUndefined:function(t){return t==null}},xp={};function _5e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var A5e=function(t,e,n,r){e=e||"&",n=n||"=";var i={};if(typeof t!="string"||t.length===0)return i;var s=/\+/g;t=t.split(e);var a=1e3;r&&typeof r.maxKeys=="number"&&(a=r.maxKeys);var o=t.length;a>0&&o>a&&(o=a);for(var l=0;l<o;++l){var c=t[l].replace(s,"%20"),u=c.indexOf(n),d,h,p,f;u>=0?(d=c.substr(0,u),h=c.substr(u+1)):(d=c,h=""),p=decodeURIComponent(d),f=decodeURIComponent(h),_5e(i,p)?Array.isArray(i[p])?i[p].push(f):i[p]=[i[p],f]:i[p]=f}return i},zh=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},O5e=function(t,e,n,r){return e=e||"&",n=n||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(i){var s=encodeURIComponent(zh(i))+n;return Array.isArray(t[i])?t[i].map(function(a){return s+encodeURIComponent(zh(a))}).join(e):s+encodeURIComponent(zh(t[i]))}).join(e):r?encodeURIComponent(zh(r))+n+encodeURIComponent(zh(t)):""};xp.decode=xp.parse=A5e;xp.encode=xp.stringify=O5e;var D5e=uv,za=P5e,XC=EB;function Za(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var I5e=/^([a-z0-9.+-]+:)/i,M5e=/:[0-9]*$/,N5e=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,F5e=["<",">",'"',"`"," ","\r",`
`,"	"],$5e=["{","}","|","\\","^","`"].concat(F5e),QC=["'"].concat($5e),hO=["%","/","?",";","#"].concat(QC),fO=["/","?","#"],L5e=255,pO=/^[+a-z0-9A-Z_-]{0,63}$/,B5e=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,j5e={javascript:!0,"javascript:":!0},ZC={javascript:!0,"javascript:":!0},Qu={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},e2=xp;function EB(t,e,n){if(t&&za.isObject(t)&&t instanceof Za)return t;var r=new Za;return r.parse(t,e,n),r}Za.prototype.parse=function(t,e,n){if(!za.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=r!==-1&&r<t.indexOf("#")?"?":"#",s=t.split(i),a=/\\/g;s[0]=s[0].replace(a,"/"),t=s.join(i);var o=t;if(o=o.trim(),!n&&t.split("#").length===1){var l=N5e.exec(o);if(l)return this.path=o,this.href=o,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=e2.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=I5e.exec(o);if(c){c=c[0];var u=c.toLowerCase();this.protocol=u,o=o.substr(c.length)}if(n||c||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var d=o.substr(0,2)==="//";d&&!(c&&ZC[c])&&(o=o.substr(2),this.slashes=!0)}if(!ZC[c]&&(d||c&&!Qu[c])){for(var h=-1,p=0;p<fO.length;p++){var f=o.indexOf(fO[p]);f!==-1&&(h===-1||f<h)&&(h=f)}var m,g;h===-1?g=o.lastIndexOf("@"):g=o.lastIndexOf("@",h),g!==-1&&(m=o.slice(0,g),o=o.slice(g+1),this.auth=decodeURIComponent(m)),h=-1;for(var p=0;p<hO.length;p++){var f=o.indexOf(hO[p]);f!==-1&&(h===-1||f<h)&&(h=f)}h===-1&&(h=o.length),this.host=o.slice(0,h),o=o.slice(h),this.parseHost(),this.hostname=this.hostname||"";var v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v)for(var y=this.hostname.split(/\./),p=0,b=y.length;p<b;p++){var C=y[p];if(C&&!C.match(pO)){for(var R="",w=0,E=C.length;w<E;w++)C.charCodeAt(w)>127?R+="x":R+=C[w];if(!R.match(pO)){var k=y.slice(0,p),T=y.slice(p+1),_=C.match(B5e);_&&(k.push(_[1]),T.unshift(_[2])),T.length&&(o="/"+T.join(".")+o),this.hostname=k.join(".");break}}}this.hostname.length>L5e?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=D5e.toASCII(this.hostname));var D=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+D,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),o[0]!=="/"&&(o="/"+o))}if(!j5e[u])for(var p=0,b=QC.length;p<b;p++){var M=QC[p];if(o.indexOf(M)!==-1){var A=encodeURIComponent(M);A===M&&(A=escape(M)),o=o.split(M).join(A)}}var O=o.indexOf("#");O!==-1&&(this.hash=o.substr(O),o=o.slice(0,O));var L=o.indexOf("?");if(L!==-1?(this.search=o.substr(L),this.query=o.substr(L+1),e&&(this.query=e2.parse(this.query)),o=o.slice(0,L)):e&&(this.search="",this.query={}),o&&(this.pathname=o),Qu[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",F=this.search||"";this.path=D+F}return this.href=this.format(),this};Za.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&za.isObject(this.query)&&Object.keys(this.query).length&&(s=e2.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Qu[e])&&i!==!1?(i="//"+(i||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),a&&a.charAt(0)!=="?"&&(a="?"+a),n=n.replace(/[?#]/g,function(o){return encodeURIComponent(o)}),a=a.replace("#","%23"),e+i+n+a+r};Za.prototype.resolve=function(t){return this.resolveObject(EB(t,!1,!0)).format()};Za.prototype.resolveObject=function(t){if(za.isString(t)){var e=new Za;e.parse(t,!1,!0),t=e}for(var n=new Za,r=Object.keys(this),i=0;i<r.length;i++){var s=r[i];n[s]=this[s]}if(n.hash=t.hash,t.href==="")return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),o=0;o<a.length;o++){var l=a[o];l!=="protocol"&&(n[l]=t[l])}return Qu[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!Qu[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var d=c[u];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,!t.host&&!ZC[t.protocol]){for(var b=(t.pathname||"").split("/");b.length&&!(t.host=b.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),b[0]!==""&&b.unshift(""),b.length<2&&b.unshift(""),n.pathname=b.join("/")}else n.pathname=t.pathname;if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var h=n.pathname||"",p=n.search||"";n.path=h+p}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var f=n.pathname&&n.pathname.charAt(0)==="/",m=t.host||t.pathname&&t.pathname.charAt(0)==="/",g=m||f||n.host&&t.pathname,v=g,y=n.pathname&&n.pathname.split("/")||[],b=t.pathname&&t.pathname.split("/")||[],C=n.protocol&&!Qu[n.protocol];if(C&&(n.hostname="",n.port=null,n.host&&(y[0]===""?y[0]=n.host:y.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(b[0]===""?b[0]=t.host:b.unshift(t.host)),t.host=null),g=g&&(b[0]===""||y[0]==="")),m)n.host=t.host||t.host===""?t.host:n.host,n.hostname=t.hostname||t.hostname===""?t.hostname:n.hostname,n.search=t.search,n.query=t.query,y=b;else if(b.length)y||(y=[]),y.pop(),y=y.concat(b),n.search=t.search,n.query=t.query;else if(!za.isNullOrUndefined(t.search)){if(C){n.hostname=n.host=y.shift();var R=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;R&&(n.auth=R.shift(),n.host=n.hostname=R.shift())}return n.search=t.search,n.query=t.query,(!za.isNull(n.pathname)||!za.isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!y.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var w=y.slice(-1)[0],E=(n.host||t.host||y.length>1)&&(w==="."||w==="..")||w==="",k=0,T=y.length;T>=0;T--)w=y[T],w==="."?y.splice(T,1):w===".."?(y.splice(T,1),k++):k&&(y.splice(T,1),k--);if(!g&&!v)for(;k--;k)y.unshift("..");g&&y[0]!==""&&(!y[0]||y[0].charAt(0)!=="/")&&y.unshift(""),E&&y.join("/").substr(-1)!=="/"&&y.push("");var _=y[0]===""||y[0]&&y[0].charAt(0)==="/";if(C){n.hostname=n.host=_?"":y.length?y.shift():"";var R=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;R&&(n.auth=R.shift(),n.host=n.hostname=R.shift())}return g=g||n.host&&y.length,g&&!_&&y.unshift(""),y.length?n.pathname=y.join("/"):(n.pathname=null,n.path=null),(!za.isNull(n.pathname)||!za.isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n};Za.prototype.parseHost=function(){var t=this.host,e=M5e.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var us;(function(t){t.genericError="genericError",t.genericNetworkError="genericNetworkError",t.authorizationError="authorizationError",t.fileNotFoundOrAccessDeniedError="fileNotFoundOrAccessDeniedError",t.throttlingError="throttlingError",t.offlineError="offlineError",t.unsupportedClientProtocolVersion="unsupportedClientProtocolVersion",t.writeError="writeError",t.fetchFailure="fetchFailure",t.incorrectServerResponse="incorrectServerResponse",t.fileOverwrittenInStorage="fileOverwrittenInStorage",t.deltaStreamConnectionForbidden="deltaStreamConnectionForbidden",t.locationRedirection="locationRedirection"})(us||(us={}));/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var Dd;(function(t){t[t.NoCaching=0]="NoCaching",t[t.Prefetch=1]="Prefetch"})(Dd||(Dd={}));var Id;(function(t){t.summarizingClient="fluid-client-summarizer",t.createNew="createNew"})(Id||(Id={}));/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const ak=t=>(t==null?void 0:t.type)==="fluid";function Ea(t){if(!ak(t))throw new Error(`resolved is not a Fluid url. Type: ${t==null?void 0:t.type}`)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class ok{constructor(e){this.protocolName="none:",this.protocolToDocumentFactoryMap=new Map,e.forEach(n=>{this.protocolToDocumentFactoryMap.set(n.protocolName,n)})}static create(e){if(Array.isArray(e)){const n=[];return e.forEach(r=>{const i=r;i.protocolToDocumentFactoryMap!==void 0?n.push(...i.protocolToDocumentFactoryMap.values()):n.push(r)}),n.length===1?n[0]:new ok(n)}return e}async createDocumentService(e,n,r){Ea(e);const i=XC(e.url);if(i.protocol===void 0||i.protocol===null)throw new Error("No protocol provided");const s=this.protocolToDocumentFactoryMap.get(i.protocol);if(s===void 0)throw new Error("Unknown Fluid protocol");return s.createDocumentService(e,n,r)}async createContainer(e,n,r,i){Ea(n);const s=XC(n.url);if(s.protocol===void 0||s.protocol===null)throw new Error("No protocol provided");const a=this.protocolToDocumentFactoryMap.get(s.protocol);if(a===void 0)throw new Error("Unknown Fluid protocol");return a.createContainer(e,n,r,i)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */async function q5e(t,e){let n;for(const r of t)if(n=await r.resolve(Object.assign({},e)),n!==void 0)return n}class lk{constructor(e){this.urlResolvers=e}static create(e){return Array.isArray(e)?e.length===1?e[0]:new lk(e):e}async resolve(e){return q5e(this.urlResolvers,e)}async getAbsoluteUrl(e,n){throw new Error("Not implmented")}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var ZS,Wo;(function(t){t[t.Offline=0]="Offline",t[t.Online=1]="Online",t[t.Unknown=2]="Unknown"})(Wo||(Wo={}));function ck(){return typeof navigator=="object"&&navigator!==null&&typeof navigator.onLine=="boolean"?navigator.onLine?Wo.Online:Wo.Offline:Wo.Unknown}class t2 extends rt{constructor(e,n,r){super(e,r),this.canRetry=n,this.errorType=us.genericNetworkError}}const mO="deltaStreamConnectionForbidden";class e1 extends rt{constructor(e,n){super(e,Object.assign(Object.assign({},n),{statusCode:400})),this.errorType=e1.errorType,this.canRetry=!1}}e1.errorType=(ZS=us[mO])!==null&&ZS!==void 0?ZS:mO;class z5e extends rt{constructor(e,n,r,i){super(e,i,new Set(["claims","tenantId"])),this.claims=n,this.tenantId=r,this.errorType=us.authorizationError,this.canRetry=!1}}class H5e extends rt{constructor(e,n,r,i){super(e,i),this.errorType=n,this.canRetry=r}}class t1 extends H5e{constructor(e,n,r){super(e,n,!1,r),this.errorType=n}}class U5e extends rt{constructor(e,n,r){super(e,r),this.retryAfterSeconds=n,this.errorType=us.throttlingError,this.canRetry=!0}}const V5e=(t,e)=>new t1(t,us.writeError,e);function Md(t,e,n){return e.retryAfterMs!==void 0&&e.canRetry?new U5e(t,e.retryAfterMs/1e3,n):new t2(t,e.canRetry,n)}const um=t=>(t==null?void 0:t.canRetry)===!0,gO=t=>t==null?void 0:t.retryAfterSeconds,dv=t=>(t==null?void 0:t.retryAfterSeconds)!==void 0?t.retryAfterSeconds*1e3:void 0;/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */async function zn(t,e){const n=await t.readBlob(e),r=al(n,"utf8");return JSON.parse(r)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function Wg(t,e){return{type:Ne.Tree,tree:{".protocol":e,".app":t}}}function W5e(t){var e;const n=t.tree.attributes,r=JSON.parse(n.content);return r.term=(e=r.term)!==null&&e!==void 0?e:1,r}function G5e(t){const e=t.tree.quorumValues;return JSON.parse(e.content)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function n2(t,e,n){var r,i;const s=Object.assign({},e),a=n.online;if(s.online=typeof a=="string"?a:Wo[ck()],typeof navigator=="object"&&navigator!==null){const o=navigator,l=(i=(r=o.connection)!==null&&r!==void 0?r:o.mozConnection)!==null&&i!==void 0?i:o.webkitConnection;l!==null&&typeof l=="object"&&(s.connectionType=l.type)}s.category=um(n)?"generic":"error",t.sendTelemetryEvent(s,n)}function r2(t){return new Promise(n=>{let r=n,i=t;ck()===Wo.Offline&&(window==null?void 0:window.addEventListener)!==void 0&&(r=()=>{n(),window.removeEventListener("online",r)},window.addEventListener("online",r,!1),i=Math.max(t,3e4)),setTimeout(r,i)})}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 *
 * THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY
 */const TB="1.3.6";/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const K5e=1e4,Y5e=100;class J5e{constructor(e,n,r,i,s,a){this.to=n,this.payloadSize=r,this.logger=i,this.requestCallback=s,this.responseCallback=a,this.results=new Map,this.workingState="working",this.requestsInFlight=0,this.endEvent=new sn,this.requests=0,this.latestRequested=e,this.nextToDeliver=e,this.knewTo=n!==void 0}get working(){return this.workingState==="working"}get canceled(){return this.workingState==="canceled"}cancel(){this.working&&(this.workingState="canceled",this.endEvent.resolve())}async run(e){N(e>0,258),N(this.working,259);let n=e;for(;n>0;)n--,this.addRequest();return this.dispatch(),this.endEvent.promise}done(){N(this.to!==void 0,260),N(this.nextToDeliver>=this.to,261),this.working&&(this.workingState="done",this.endEvent.resolve())}fail(e){this.working&&(this.workingState="done",this.endEvent.reject(e))}dispatch(){for(;this.working;){const e=this.results.get(this.nextToDeliver);if(e===void 0)break;this.results.delete(this.nextToDeliver),N(e.length<=this.payloadSize,473),this.nextToDeliver+=e.length,this.responseCallback(e)}this.working&&(this.requestsInFlight===0?(N(this.results.size===0,263),this.done()):this.to!==void 0&&this.nextToDeliver>=this.to&&(N(!this.knewTo,264),this.done()))}getNextChunk(){if(!this.working)return;const e=this.latestRequested;if(!(this.to!==void 0&&this.to<=e))return this.latestRequested+=this.payloadSize,this.to!==void 0&&(this.latestRequested=Math.min(this.to,this.latestRequested)),N(e<this.latestRequested,265),{from:e,to:this.latestRequested}}addRequest(){const e=this.getNextChunk();e!==void 0&&this.addRequestCore(e.from,e.to).catch(this.fail.bind(this))}async addRequestCore(e,n){N(this.working,266);let r=e,i=n;for(this.requestsInFlight++;this.working;){const s=i-r;N(s>0,267),this.to!==void 0&&(N(r<this.to,268),N(i<=this.to,269)),this.requests++;const a=this.requestCallback(this.requests,r,i,this.to!==void 0,{});this.dispatch();const{payload:o,cancel:l,partial:c}=await a;if(l&&this.cancel(),this.to!==void 0&&r>=this.to){N(!this.knewTo,270),o.length!==0&&this.logger.sendErrorEvent({eventName:"ParallelRequests_GotExtra",from:r,to:i,end:this.to,length:o.length});break}if(this.working){const u=r,d=o.length;let h=s<=d;if(d!==0){s<d&&this.logger.sendTelemetryEvent({eventName:"ParallelRequests_Over",from:r,to:i,length:d});const p=o.splice(0,s);this.results.set(r,p),r+=p.length}else N(!c,271),N(!this.knewTo,272);if(!c&&!h){if(!this.knewTo){(this.to===void 0||this.to>r)&&(this.to=r);break}this.logger.sendPerformanceEvent({eventName:"ParallelRequests_Partial",from:u,to:i,length:d})}if(i===this.latestRequested&&(o.length!==0&&(this.results.set(r,o),r+=o.length),this.latestRequested=r,h=!0),h){const p=this.getNextChunk();if(p===void 0)break;r=p.from,i=p.to}}}this.requestsInFlight--,this.dispatch()}}class X5e{constructor(){this.queue=[],this.done=!1}pushValue(e){this.pushCore(Promise.resolve({done:!1,value:e}))}pushError(e){this.pushCore(Promise.reject(e)),this.done=!0}pushDone(){this.pushCore(Promise.resolve({done:!0})),this.done=!0}pushCore(e){N(!this.done,274),this.deferred?(N(this.queue.length===0,275),this.deferred.resolve(e),this.deferred=void 0):this.queue.push(e)}async read(){N(this.deferred===void 0,276);const e=this.queue.shift();return e!==void 0?e:(N(!this.done,277),this.deferred=new sn,this.deferred.promise)}}async function Q5e(t,e,n,r,i,s){let a,o=0;const l=[],c={partial:!1,cancel:!0,payload:[]};for(;(i==null?void 0:i.aborted)!==!0;){o++;let u=Math.min(K5e,Y5e*Math.pow(2,o));const d=st.now();try{const h=t(Object.assign(Object.assign({},e),{retry:o})),{messages:p,partialResult:f}=await h;if(l.push(...p),p.length!==0||!n)return{payload:l,cancel:!1,partial:f};if(a===void 0)a=st.now();else if(st.now()-a>3e4)throw Md("Failed to retrieve ops from storage (Too Many Retries)",{canRetry:!1},Object.assign({retry:o,driverVersion:TB},e))}catch(h){const p=um(h);a=void 0;const f=dv(h);if(n2(r,Object.assign(Object.assign({eventName:"GetDeltas_Error"},e),{retry:o,duration:st.now()-d,retryAfter:f,reason:s}),h),!p)throw h;f!==void 0&&f>=0&&(u=f)}await r2(u)}return c}function Z5e(t,e,n,r,i,s,a,o){let l=0,c,u=0;const d=new X5e,h={fromTotal:n,toTotal:r},p=gt.start(s,Object.assign(Object.assign({eventName:"GetDeltas"},h),{reason:o})),f=new J5e(n,r,i,s,async(g,v,y,b,C)=>(l++,Q5e(async R=>t(v,y,R),Object.assign(Object.assign({request:g,from:v,to:y},h),C),b,s,a,o)),g=>{c===void 0?N(g[0].sequenceNumber===n,621):N(g[0].sequenceNumber===c+1,622),c=g[g.length-1].sequenceNumber,N(c-g[0].sequenceNumber+1===g.length,623),u+=g.length,d.pushValue(g)}),m=g=>{f.cancel()};return a!==void 0&&a.addEventListener("abort",m),f.run(e).finally(()=>{a!==void 0&&a.removeEventListener("abort",m)}).then(()=>{const g={lastFetch:c,length:u,requests:l};f.canceled?p.cancel(Object.assign(Object.assign({},g),{error:"ops request cancelled by client"})):(N(r===void 0||c!==void 0&&c>=r-1,624),p.end(g)),d.pushDone()}).catch(g=>{p.cancel({lastFetch:c,length:u,requests:l},g),d.pushError(g)}),d}const eAe={read:async()=>({done:!0})};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class tAe extends ik{constructor(){super(...arguments),this.prefetchCache=new Map,this.prefetchEnabled=!0}get policies(){const e=this.internalStorageService.policies;if(e)return Object.assign(Object.assign({},e),{caching:Dd.NoCaching})}async getSnapshotTree(e){const n=this.internalStorageService.getSnapshotTree(e);return this.prefetchEnabled&&n.then(r=>{r!=null&&this.prefetchTree(r)}),n}async readBlob(e){return this.cachedRead(e)}stopPrefetch(){this.prefetchEnabled=!1,this.prefetchCache.clear()}async cachedRead(e){if(this.prefetchEnabled){const n=this.prefetchCache.get(e);if(n!==void 0)return n;const r=this.internalStorageService.readBlob(e);return this.prefetchCache.set(e,r.catch(i=>{throw um(i)&&this.prefetchCache.delete(e),i})),r}return this.internalStorageService.readBlob(e)}prefetchTree(e){const n=[];this.prefetchTreeCore(e,n);for(const r of n)this.cachedRead(r)}prefetchTreeCore(e,n){for(const r of Object.keys(e.blobs)){const i=e.blobs[r];r.startsWith(".")||r==="header"||r.startsWith("quorum")?i!==null&&this.cachedRead(i):r.startsWith("deltas")||i!==null&&n.push(i)}for(const r of Object.keys(e.trees))this.prefetchTreeCore(e.trees[r],n)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class hv{constructor(e){this.maxRequests=e,this.tasks=[],this.release=()=>{const n=this.tasks.shift();if(n!==void 0)return n();this.maxRequests++},N(e>0,174)}get waitQueueLength(){return this.tasks.length}async acquire(){if(this.maxRequests>0){this.maxRequests--;return}return new Promise(e=>{this.tasks.push(e)})}async schedule(e){return await this.acquire(),e().finally(this.release)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */async function uk(t,e,n,r){var i,s;let a,o=!1,l=1e3,c=0;const u=st.now();let d;do try{a=await t(r.cancel),o=!0}catch(h){if(!um(h))throw n.sendTelemetryEvent({eventName:`${e}_cancel`,retry:c,duration:st.now()-u,fetchCallName:e},h),h;if(((i=r.cancel)===null||i===void 0?void 0:i.aborted)===!0)throw n.sendTelemetryEvent({eventName:`${e}_runWithRetryAborted`,retry:c,duration:st.now()-u,fetchCallName:e},h),new t1("runWithRetry was Aborted",us.genericError,{driverVersion:TB,fetchCallName:e});c++,d=h,l=(s=dv(h))!==null&&s!==void 0?s:Math.min(l*2,8e3),r.onRetry&&r.onRetry(l,h),await sB(l)}while(!o);return c>0&&n.sendTelemetryEvent({eventName:`${e}_lastError`,retry:c,duration:st.now()-u,fetchCallName:e},d),a}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class nAe{constructor(e){this.props=e,this.attachmentCounter=0,this.summaryTree={}}get summary(){var e;return{type:Ne.Tree,tree:Object.assign({},this.summaryTree),unreferenced:(e=this.props)===null||e===void 0?void 0:e.unreferenced}}addBlob(e,n){this.summaryTree[e]={type:Ne.Blob,content:n}}addHandle(e,n,r){this.summaryTree[e]={type:Ne.Handle,handleType:n,handle:r}}addTree(e,n){this.summaryTree[e]=n}addAttachment(e){this.summaryTree[this.attachmentCounter++]={id:e,type:Ne.Attachment}}}function RB(t,e){const n=new nAe({unreferenced:t.unreferenced});for(const[r,i]of Object.entries(t.blobs)){const s=e.get(i);N(s!==void 0,733),n.addBlob(r,qr.from(s).toString("utf-8"))}for(const[r,i]of Object.entries(t.trees)){const s=RB(i,e);n.addTree(r,s)}return n.summary}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function rAe(t){if(wp(t))return!0;switch(t.type){case et.Propose:case et.Reject:case et.NoOp:return!0;default:return!1}}function wp(t){return t.type===et.Operation||t.type===et.Summarize}var i2;(function(t){t.FluidDataStoreOp="component",t.Attach="attach",t.ChunkedOp="chunkedOp",t.BlobAttach="blobAttach",t.Rejoin="rejoin",t.Alias="alias",t.Operation="op"})(i2||(i2={}));function Cp(t){return!!Object.values(i2).includes(t.type)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class iAe extends Cc.EventEmitter{constructor(){super(...arguments),this.members=new Map}on(e,n){return super.on(e,n)}addMember(e,n){this.members.set(e,n),this.emit("addMember",e,n)}removeMember(e){const n=this.members.get(e);return n!==void 0?(this.members.delete(e),this.emit("removeMember",e,n),!0):!1}getMembers(){return new Map(this.members)}getMember(e){return this.members.get(e)}clear(){const e=this.members.keys();for(const n of e)this.removeMember(n)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const sAe="Code package does not implement IRuntimeFactory";class dk{constructor(e,n,r,i,s,a,o,l,c,u,d,h,p,f,m){this.container=e,this.scope=n,this.codeLoader=r,this._codeDetails=i,this._baseSnapshot=s,this.deltaManager=a,this.loader=l,this.submitFn=c,this.submitSignalFn=u,this.closeFn=d,this.version=h,this.updateDirtyContainerState=p,this.existing=f,this.pendingLocalState=m,this._disposed=!1,this._quorum=o,this.taggedLogger=e.subLogger,this._fluidModuleP=new Qa(async()=>this.loadCodeModule(i)),this.attachListener()}static async createOrLoad(e,n,r,i,s,a,o,l,c,u,d,h,p,f,m){const g=new dk(e,n,r,i,s,a,o,l,c,u,d,h,p,f,m);return await g.instantiateRuntime(f),g}get clientId(){return this.container.clientId}get id(){const e=this.container.resolvedUrl;return ak(e)?e.id:""}get clientDetails(){return this.container.clientDetails}get connected(){return this.container.connected}get canSummarize(){return"summarize"in this.runtime}get serviceConfiguration(){return this.container.serviceConfiguration}get audience(){return this.container.audience}get options(){return this.container.options}get baseSnapshot(){return this._baseSnapshot}get storage(){return this.container.storage}get runtime(){if(this._runtime===void 0)throw new Error("Attempted to access runtime before it was defined");return this._runtime}get disposed(){return this._disposed}get codeDetails(){return this._codeDetails}get quorum(){return this._quorum}getSpecifiedCodeDetails(){var e;return(e=this._quorum.get("code"))!==null&&e!==void 0?e:this._quorum.get("code2")}dispose(e){this._disposed||(this._disposed=!0,this.runtime.dispose(e),this._quorum.dispose(),this.deltaManager.dispose())}getLoadedFromVersion(){return this.container.loadedFromVersion}get attachState(){return this.container.attachState}createSummary(e){return this.runtime.createSummary(e)}setConnectionState(e,n){const r=this.runtime;N(e===this.connected,222),r.setConnectionState(e,n)}process(e,n,r){this.runtime.process(e,n,r)}processSignal(e,n){this.runtime.processSignal(e,n)}async request(e){return this.runtime.request(e)}async getAbsoluteUrl(e){return this.container.getAbsoluteUrl(e)}getPendingLocalState(){return this.runtime.getPendingLocalState()}async satisfies(e){var n;const r=[],i=this.codeLoader;i.IFluidCodeDetailsComparer!==void 0&&r.push(i.IFluidCodeDetailsComparer);const s=await this._fluidModuleP,a=(n=s.module)===null||n===void 0?void 0:n.fluidExport;if((a==null?void 0:a.IFluidCodeDetailsComparer)!==void 0&&r.push(a.IFluidCodeDetailsComparer),r.length===0)return!1;for(const o of r)if(await o.satisfies(s.details,e)===!1)return!1;return!0}notifyAttaching(e){var n,r;this._baseSnapshot=e,(r=(n=this.runtime).notifyAttaching)===null||r===void 0||r.call(n,e),this.runtime.setAttachState(ze.Attaching)}async getRuntimeFactory(){var e;const n=(e=(await this._fluidModuleP).module)===null||e===void 0?void 0:e.fluidExport,r=n==null?void 0:n.IRuntimeFactory;if(r===void 0)throw new Error(sAe);return r}async instantiateRuntime(e){const n=await this.getRuntimeFactory();this._runtime=await n.instantiateRuntime(this,e)}attachListener(){this.container.once("attached",()=>{this.runtime.setAttachState(ze.Attached)})}async loadCodeModule(e){const n=await gt.timedExecAsync(this.taggedLogger,{eventName:"CodeLoad"},async()=>this.codeLoader.load(e));if("module"in n){const{module:r,details:i}=n;return{module:r,details:i??e}}else return this.taggedLogger.sendTelemetryEvent({eventName:"LegacyCodeLoader"}),n}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var Mr;(function(t){t.Never="Never",t.Disabled="Disabled",t.Enabled="Enabled"})(Mr||(Mr={}));const aAe=t=>{let e;return t&&"name"in t?e=t:aB(t==null?void 0:t.package)?e=t==null?void 0:t.package.name:e=t==null?void 0:t.package,{name:e}};var kc={},oAe={get exports(){return kc},set exports(t){kc=t}};const{AbortController:kB,AbortSignal:lAe}=typeof self<"u"?self:typeof window<"u"?window:void 0;oAe.exports=kB;kc.AbortSignal=lAe;kc.default=kB;function kt(t){if(this._capacity=_B(t),this._length=0,this._front=0,PB(t)){for(var e=t.length,n=0;n<e;++n)this[n]=t[n];this._length=e}}kt.prototype.toArray=function(){for(var e=this._length,n=new Array(e),r=this._front,i=this._capacity,s=0;s<e;++s)n[s]=this[r+s&i-1];return n};kt.prototype.push=function(e){var n=arguments.length,r=this._length;if(n>1){var i=this._capacity;if(r+n>i){for(var a=0;a<n;++a){this._checkCapacity(r+1);var s=this._front+r&this._capacity-1;this[s]=arguments[a],r++,this._length=r}return r}else{for(var s=this._front,a=0;a<n;++a)this[s+r&i-1]=arguments[a],s++;return this._length=r+n,r+n}}if(n===0)return r;this._checkCapacity(r+1);var a=this._front+r&this._capacity-1;return this[a]=e,this._length=r+1,r+1};kt.prototype.pop=function(){var e=this._length;if(e!==0){var n=this._front+e-1&this._capacity-1,r=this[n];return this[n]=void 0,this._length=e-1,r}};kt.prototype.shift=function(){var e=this._length;if(e!==0){var n=this._front,r=this[n];return this[n]=void 0,this._front=n+1&this._capacity-1,this._length=e-1,r}};kt.prototype.unshift=function(e){var n=this._length,r=arguments.length;if(r>1){var a=this._capacity;if(n+r>a){for(var o=r-1;o>=0;o--){this._checkCapacity(n+1);var a=this._capacity,i=(this._front-1&a-1^a)-a;this[i]=arguments[o],n++,this._length=n,this._front=i}return n}else{for(var s=this._front,o=r-1;o>=0;o--){var i=(s-1&a-1^a)-a;this[i]=arguments[o],s=i}return this._front=s,this._length=n+r,n+r}}if(r===0)return n;this._checkCapacity(n+1);var a=this._capacity,o=(this._front-1&a-1^a)-a;return this[o]=e,this._length=n+1,this._front=o,n+1};kt.prototype.peekBack=function(){var e=this._length;if(e!==0){var n=this._front+e-1&this._capacity-1;return this[n]}};kt.prototype.peekFront=function(){if(this._length!==0)return this[this._front]};kt.prototype.get=function(e){var n=e;if(n===(n|0)){var r=this._length;if(n<0&&(n=n+r),!(n<0||n>=r))return this[this._front+n&this._capacity-1]}};kt.prototype.isEmpty=function(){return this._length===0};kt.prototype.clear=function(){for(var e=this._length,n=this._front,r=this._capacity,i=0;i<e;++i)this[n+i&r-1]=void 0;this._length=0,this._front=0};kt.prototype.toString=function(){return this.toArray().toString()};kt.prototype.valueOf=kt.prototype.toString;kt.prototype.removeFront=kt.prototype.shift;kt.prototype.removeBack=kt.prototype.pop;kt.prototype.insertFront=kt.prototype.unshift;kt.prototype.insertBack=kt.prototype.push;kt.prototype.enqueue=kt.prototype.push;kt.prototype.dequeue=kt.prototype.shift;kt.prototype.toJSON=kt.prototype.toArray;Object.defineProperty(kt.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("")}});kt.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(_B(this._capacity*1.5+16))};kt.prototype._resizeTo=function(e){var n=this._capacity;this._capacity=e;var r=this._front,i=this._length;if(r+i>n){var s=r+i&n-1;cAe(this,0,this,n,s)}};var PB=Array.isArray;function cAe(t,e,n,r,i){for(var s=0;s<i;++s)n[s+r]=t[s+e],t[s+e]=void 0}function uAe(t){return t=t>>>0,t=t-1,t=t|t>>1,t=t|t>>2,t=t|t>>4,t=t|t>>8,t=t|t>>16,t+1}function _B(t){if(typeof t!="number")if(PB(t))t=t.length;else return 16;return uAe(Math.min(Math.max(16,t),1073741824))}var s2=kt;/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class a2 extends An{constructor(e){super(),this.worker=e,this.isDisposed=!1,this.q=new s2,this.pauseCount=1}get disposed(){return this.isDisposed}get paused(){return this.pauseCount!==0}get length(){return this.q.length}get idle(){return this.processingPromise===void 0&&this.q.length===0}async waitTillProcessingDone(){var e;return(e=this.processingPromise)!==null&&e!==void 0?e:{count:0,duration:0}}dispose(){throw new Error("Not implemented.")}clear(){this.q.clear()}peek(){return this.q.peekFront()}toArray(){return this.q.toArray()}push(e){try{this.q.push(e),this.emit("push",e),this.ensureProcessing()}catch(n){this.emit("error",n)}}async pause(){this.pauseCount++,await this.waitTillProcessingDone()}resume(){N(this.pauseCount>0,244),this.pauseCount--,this.ensureProcessing()}ensureProcessing(){this.anythingToProcess()&&this.processingPromise===void 0&&(this.processingPromise=Promise.resolve().then(()=>{N(this.processingPromise!==void 0,"reentrancy?");const e=this.processDeltas();return N(this.processingPromise!==void 0,"reentrancy?"),this.processingPromise=void 0,e}).catch(e=>(this.error=e,this.processingPromise=void 0,this.emit("error",e),{count:0,duration:0})),N(this.processingPromise!==void 0,"processDeltas() should run async"))}anythingToProcess(){return this.q.length!==0&&!this.paused&&this.error===void 0}processDeltas(){const e=st.now();let n=0;for(;this.anythingToProcess();){const i=this.q.shift();n++,this.worker(i),this.emit("op",i)}const r=st.now()-e;return this.q.length===0&&this.emit("idle",n,r),{count:n,duration:r}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class dAe extends An{constructor(e,n,r,i){super(),this.serviceProvider=e,this.logger=n,this._active=r,this.pending=[],this.minSequenceNumber=0,this.lastQueuedSequenceNumber=0,this.lastObservedSeqNumber=0,this.lastProcessedSequenceNumber=0,this.baseTerm=0,this.opsSize=0,this.initSequenceNumber=0,this.closed=!1,this.throttlingIdSet=new Set,this.timeTillThrottling=0,this.closeAbortController=new kc,this.deltaStorageDelayId=Cn(),this.deltaStreamDelayId=Cn(),this.messageBuffer=[];const s={incomingOpHandler:(a,o)=>{try{this.enqueueMessages(a,o)}catch(l){this.logger.sendErrorEvent({eventName:"EnqueueMessages_Exception"},l),this.close(As(l))}},signalHandler:a=>this._inboundSignal.push(a),reconnectionDelayHandler:(a,o)=>this.emitDelayInfo(this.deltaStreamDelayId,a,o),closeHandler:a=>this.close(a),disconnectHandler:a=>this.disconnectHandler(a),connectHandler:a=>this.connectHandler(a),pongHandler:a=>this.emit("pong",a),readonlyChangeHandler:a=>p5e(this,this.logger,"readonly",a)};this.connectionManager=i(s),this._inbound=new a2(a=>{this.processInboundMessage(a)}),this._inbound.on("error",a=>{this.close(Ni.wrapIfUnrecognized(a,"deltaManagerInboundErrorHandler",this.lastMessage))}),this._inboundSignal=new a2(a=>{if(this.handler===void 0)throw new Error("Attempted to process an inbound signal without a handler attached");this.handler.processSignal({clientId:a.clientId,content:JSON.parse(a.content)})}),this._inboundSignal.on("error",a=>{this.close(As(a))})}get active(){return this._active()}get disposed(){return this.closed}get IDeltaSender(){return this}get inbound(){return this._inbound}get inboundSignal(){return this._inboundSignal}get initialSequenceNumber(){return this.initSequenceNumber}get lastSequenceNumber(){return this.lastProcessedSequenceNumber}get lastMessage(){return this.lastProcessedMessage}get lastKnownSeqNumber(){return this.lastObservedSeqNumber}get referenceTerm(){return this.baseTerm}get minimumSequenceNumber(){return this.minSequenceNumber}get hasCheckpointSequenceNumber(){return N(this.connectionManager.connected,223),this._checkpointSequenceNumber!==void 0}get maxMessageSize(){return this.connectionManager.maxMessageSize}get version(){return this.connectionManager.version}get serviceConfiguration(){return this.connectionManager.serviceConfiguration}get outbound(){return this.connectionManager.outbound}get readOnlyInfo(){return this.connectionManager.readOnlyInfo}get clientDetails(){return this.connectionManager.clientDetails}submit(e,n,r=!1,i){const s={contents:JSON.stringify(n),metadata:i,referenceSequenceNumber:this.lastProcessedSequenceNumber,type:e};r||this.flush();const a=this.connectionManager.prepareMessageToSend(s);return a===void 0?-1:(this.opsSize+=a.contents.length,this.messageBuffer.push(a),this.emit("submitOp",a),r||this.flush(),a.clientSequenceNumber)}submitSignal(e){return this.connectionManager.submitSignal(e)}flush(){this.messageBuffer.length!==0&&(this.emit("prepareSend",this.messageBuffer),this.connectionManager.sendMessages(this.messageBuffer),this.messageBuffer=[])}get connectionProps(){return Object.assign({sequenceNumber:this.lastSequenceNumber,opsSize:this.opsSize>0?this.opsSize:void 0},this.connectionManager.connectionProps)}logConnectionIssue(e){var n;N(this.connectionManager.connected,568);const r=this.pending.sort((i,s)=>i.sequenceNumber-s.sequenceNumber);this.logger.sendErrorEvent(Object.assign(Object.assign(Object.assign(Object.assign({},e),{fetchReason:this.fetchReason,lastQueuedSequenceNumber:this.lastQueuedSequenceNumber,lastProcessedSequenceNumber:this.lastProcessedSequenceNumber,lastObserved:this.lastObservedSeqNumber}),this.connectionManager.connectionVerboseProps),{pendingOps:this.pending.length,pendingFirst:(n=r[0])===null||n===void 0?void 0:n.sequenceNumber,haveHandler:this.handler!==void 0,inboundLength:this.inbound.length,inboundPaused:this.inbound.paused}))}connectHandler(e){this.refreshDelayInfo(this.deltaStreamDelayId);const n=this.connectionManager.connectionVerboseProps;n.connectionLastQueuedSequenceNumber=this.lastQueuedSequenceNumber,n.connectionLastObservedSeqNumber=this.lastObservedSeqNumber;const r=e.checkpointSequenceNumber;this._checkpointSequenceNumber=r,r!==void 0&&this.updateLatestKnownOpSeqNumber(r),N(this.messageBuffer.length===0,233),this.opsSize=0,this.emit("connect",e,r!==void 0?this.lastObservedSeqNumber-this.lastSequenceNumber:void 0),r!==void 0?r>this.lastQueuedSequenceNumber&&this.fetchMissingDeltas("AfterConnection"):e.mode==="read"&&this.fetchMissingDeltas("AfterReadConnection")}dispose(){throw new Error("Not implemented.")}async attachOpHandler(e,n,r,i,s="none"){if(this.initSequenceNumber=n,this.lastProcessedSequenceNumber=n,this.baseTerm=r,this.minSequenceNumber=e,this.lastQueuedSequenceNumber=n,this.lastObservedSeqNumber=n,N(this.handler===void 0,226),this.handler=i,N(!!this.handler,227),N(this.fetchReason===void 0,616),!this.closed){if(this._inbound.resume(),this._inboundSignal.resume(),s!=="none"){const a=s==="cached";await this.fetchMissingDeltasCore(`DocumentOpen_${s}`,a),a&&this.fetchMissingDeltas("PostDocumentOpen")}N(this.fetchReason!==void 0||this.pending.length===0,617)}}connect(e){var n;const r=(n=e.fetchOpsFromStorage)!==null&&n!==void 0?n:!0;m5e(this.handler!==void 0||!r,this.logger,"CantFetchWithoutBaseline"),r&&this.fetchMissingDeltas(e.reason),this.connectionManager.connect(e.mode)}async getDeltas(e,n,r,i,s){const a=this.serviceProvider();if(a===void 0)throw new Error("Delta manager is not attached");this.deltaStorage===void 0&&(this.deltaStorage=await a.connectToDeltaStorage());let o;if(n!==void 0){const d=n-1;if(this.lastQueuedSequenceNumber>=d){this.logger.sendPerformanceEvent(Object.assign({reason:r,eventName:"ExtraStorageCall",early:!0,from:e,to:n},this.connectionManager.connectionVerboseProps));return}o=h=>h.sequenceNumber>=d}else o=d=>d.sequenceNumber>=this.lastObservedSeqNumber;const l=new kc;let c=!1;const u=d=>{N(d.sequenceNumber===this.lastQueuedSequenceNumber,570),!c&&o(d)&&(l.abort(),this._inbound.off("push",u))};try{this._inbound.on("push",u),N(this.closeAbortController.signal.onabort===null,488),this.closeAbortController.signal.onabort=()=>l.abort();const d=this.deltaStorage.fetchMessages(e,n,l.signal,s,r);for(;;){const h=await d.read();if(h.done)break;try{c=!0,i(h.value)}finally{c=!1}}}finally{this.closeAbortController.signal.onabort=null,this._inbound.off("push",u),N(!c,649)}}close(e){this.closed||(this.closed=!0,this.connectionManager.dispose(e),this.closeAbortController.abort(),this._inbound.clear(),this._inboundSignal.clear(),this._inbound.pause(),this._inboundSignal.pause(),this.pending=[],this.emit("closed",e),this.removeAllListeners())}refreshDelayInfo(e){this.throttlingIdSet.delete(e),this.throttlingIdSet.size===0&&(this.timeTillThrottling=0)}disconnectHandler(e){this.messageBuffer.length=0,this.emit("disconnect",e)}emitDelayInfo(e,n,r){const i=Date.now();if(this.throttlingIdSet.add(e),n>0&&i+n>this.timeTillThrottling){this.timeTillThrottling=i+n;const s=rk.wrap(r,n/1e3,this.logger);this.emit("throttled",s)}}comparableMessagePayload(e){return`${e.clientId}-${e.type}-${e.minimumSequenceNumber}-${e.referenceSequenceNumber}-${e.timestamp}`}enqueueMessages(e,n,r=!1){var i,s;if(this.handler===void 0){this.pending=this.pending.concat(e);return}if(N(this.pending.length===0||this.fetchReason!==void 0,489),e.length===0)return;const a=e[0].sequenceNumber,o=e[e.length-1].sequenceNumber;if(o>this.lastQueuedSequenceNumber){let c=a-1;const u=c-this.lastQueuedSequenceNumber;let d,h=0,p=0;for(const m of e)m.sequenceNumber===c?h++:m.sequenceNumber!==c+1&&(p++,d===void 0&&(d=c+1)),c=m.sequenceNumber;let f;h!==0||p!==0&&!r||u>0&&this.fetchReason===void 0?f="enqueueMessages":this.fetchReason!==void 0&&this.fetchReason!==n&&a<=this.lastQueuedSequenceNumber+1&&o>this.lastQueuedSequenceNumber&&(f="enqueueMessagesExtraFetch"),f!==void 0&&this.logger.sendPerformanceEvent(Object.assign({eventName:f,reason:n,previousReason:this.prevEnqueueMessagesReason,from:a,to:o+1,length:e.length,fetchReason:this.fetchReason,duplicate:h>0?h:void 0,initialGap:u!==0?u:void 0,gap:p>0?p:void 0,firstMissing:d,dmInitialSeqNumber:this.initialSequenceNumber},this.connectionManager.connectionVerboseProps))}this.updateLatestKnownOpSeqNumber(e[e.length-1].sequenceNumber);const l=(i=this.previouslyProcessedMessage)===null||i===void 0?void 0:i.sequenceNumber;N(l===void 0||l===this.lastQueuedSequenceNumber,236);for(const c of e)if(c.sequenceNumber<=this.lastQueuedSequenceNumber){if(((s=this.previouslyProcessedMessage)===null||s===void 0?void 0:s.sequenceNumber)===c.sequenceNumber){const u=this.comparableMessagePayload(this.previouslyProcessedMessage),d=this.comparableMessagePayload(c);if(u!==d){const h=new t1("Found two messages with the same sequenceNumber but different payloads. Likely to be a service issue",us.fileOverwrittenInStorage,{clientId:this.connectionManager.clientId,sequenceNumber:c.sequenceNumber,message1:u,message2:d,driverVersion:void 0});this.close(h)}}}else c.sequenceNumber!==this.lastQueuedSequenceNumber+1?(this.pending.push(c),this.fetchMissingDeltas(n,c.sequenceNumber)):(this.lastQueuedSequenceNumber=c.sequenceNumber,this.previouslyProcessedMessage=c,this._inbound.push(c));this.prevEnqueueMessagesReason=this.pending.length>0?"unknown":n}processInboundMessage(e){const n=Date.now();if(this.lastProcessedMessage=e,N(e.clientId!==void 0||!rAe(e),237),typeof e.contents=="string"&&e.contents!==""&&e.type!==et.ClientLeave&&(e.contents=JSON.parse(e.contents)),this.connectionManager.beforeProcessingIncomingOp(e),this.minSequenceNumber>e.minimumSequenceNumber)throw new da("Found a lower minimumSequenceNumber (msn) than previously recorded",Object.assign(Object.assign({},Rc(e)),{clientId:this.connectionManager.clientId}));if(this.minSequenceNumber=e.minimumSequenceNumber,e.sequenceNumber!==this.lastProcessedSequenceNumber+1)throw new da("Found a non-Sequential sequenceNumber",Object.assign(Object.assign({},Rc(e)),{clientId:this.connectionManager.clientId}));if(this.lastProcessedSequenceNumber=e.sequenceNumber,N(this.lastProcessedSequenceNumber<=this.lastObservedSeqNumber,615),e.term===void 0&&(e.term=1),this.baseTerm=e.term,this.handler===void 0)throw new Error("Attempted to process an inbound message without a handler attached");this.handler.process(e);const r=Date.now();this.emit("op",e,r-n)}fetchMissingDeltas(e,n){this.fetchMissingDeltasCore(e,!1,n).catch(r=>{this.logger.sendErrorEvent({eventName:"fetchMissingDeltasException"},r)})}async fetchMissingDeltasCore(e,n,r){var i;if(this.fetchReason===void 0){if(this.closed){this.logger.sendTelemetryEvent({eventName:"fetchMissingDeltasClosedConnection",reason:e});return}if(this.handler===void 0){N(this.lastQueuedSequenceNumber===0,619);return}try{let s=this.lastQueuedSequenceNumber+1;const a=(i=this.previouslyProcessedMessage)===null||i===void 0?void 0:i.sequenceNumber;a!==void 0&&(N(a===this.lastQueuedSequenceNumber,242),N(s>1,243),s--);const o=`${e}_fetch`;this.fetchReason=o,await this.getDeltas(s,r,o,l=>{this.refreshDelayInfo(this.deltaStorageDelayId),this.enqueueMessages(l,o)},n)}catch(s){this.logger.sendErrorEvent({eventName:"GetDeltas_Exception"},s),this.close(As(s))}finally{this.refreshDelayInfo(this.deltaStorageDelayId),this.fetchReason=void 0,this.processPendingOps(e)}}}processPendingOps(e){if(this.closed)return;N(this.handler!==void 0,620);const n=this.pending.sort((r,i)=>r.sequenceNumber-i.sequenceNumber);this.pending=[],this.enqueueMessages(n,`${e}_pending`,!0),this.fetchReason===void 0&&this.lastQueuedSequenceNumber<this.lastObservedSeqNumber&&this.fetchMissingDeltas("OpsBehind")}updateLatestKnownOpSeqNumber(e){this.lastObservedSeqNumber<e&&(this.lastObservedSeqNumber=e)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class ex extends Ti{constructor(e){super(e),this.queue=e}get paused(){return this.queue.paused}get length(){return this.queue.length}get idle(){return this.queue.idle}peek(){return this.queue.peek()}toArray(){return this.queue.toArray()}async systemPause(){return this.pause()}async pause(){return this.queue.pause()}async systemResume(){return this.resume()}async resume(){this.queue.resume()}async waitTillProcessingDone(){return this.queue.waitTillProcessingDone()}}class hAe extends Ti{constructor(e){super(e),this.deltaManager=e,this.inbound=new ex(e.inbound),this.outbound=new ex(e.outbound),this.inboundSignal=new ex(e.inboundSignal)}get IDeltaSender(){return this}get minimumSequenceNumber(){return this.deltaManager.minimumSequenceNumber}get lastSequenceNumber(){return this.deltaManager.lastSequenceNumber}get lastMessage(){return this.deltaManager.lastMessage}get lastKnownSeqNumber(){return this.deltaManager.lastKnownSeqNumber}get initialSequenceNumber(){return this.deltaManager.initialSequenceNumber}get hasCheckpointSequenceNumber(){return this.deltaManager.hasCheckpointSequenceNumber}get clientDetails(){return this.deltaManager.clientDetails}get version(){return this.deltaManager.version}get maxMessageSize(){return this.deltaManager.maxMessageSize}get serviceConfiguration(){return this.deltaManager.serviceConfiguration}get active(){return this.deltaManager.active}get readOnlyInfo(){return this.deltaManager.readOnlyInfo}dispose(){this.inbound.dispose(),this.outbound.dispose(),this.inboundSignal.dispose(),super.dispose()}submitSignal(e){return this.deltaManager.submitSignal(e)}flush(){return this.deltaManager.flush()}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function tx(t){var e;const n=XC(t,!0);if(typeof n.pathname!="string")throw new rt("Failed to parse pathname");const r=(e=n.search)!==null&&e!==void 0?e:"",s=/^\/([^/]*\/[^/]*)(\/?.*)$/.exec(n.pathname);return(s==null?void 0:s.length)===3?{id:s[1],path:s[2],query:r,version:n.query.version}:void 0}function AB(t){const e={blobs:{},blobsContents:{},trees:{},id:Cn(),unreferenced:t.unreferenced},n=Object.keys(t.tree);for(const r of n){const i=t.tree[r];switch(i.type){case Ne.Tree:{e.trees[r]=AB(i);break}case Ne.Attachment:e.blobs[r]=i.id;break;case Ne.Blob:{const s=Cn();e.blobs[r]=s;const a=typeof i.content=="string"?oh(i.content,"utf8"):X_e(i.content);e.blobsContents[s]=a;break}case Ne.Handle:throw new rt("No handles should be there in summary in detached container!!");default:pi(i,`Unknown tree type ${i.type}`)}}return e}function fAe(t,e){const n={type:Ne.Tree,tree:Object.assign({},e.tree)};return n.tree[".protocol"]=t,AB(n)}const nx=t=>{const e=t.tree[".protocol"],n=t.tree[".app"];return N(e!==void 0&&n!==void 0,480),fAe(e,n)};function vO(t){return".protocol"in t.trees?t.trees[".protocol"]:t}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 *
 * THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY
 */const OB="1.3.6";/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function DB(t){return t.headers===void 0?!0:t.headers[ln.cache]!==!1}class pAe{constructor(e,n){this.container=e,this.loader=n}get IFluidRouter(){return this}async resolve(e){var n,r,i,s,a;if(e.url.startsWith("/")){if(DB(e))return this.container;{const o=this.container.resolvedUrl;return Ea(o),await ra.load(this.loader,{canReconnect:(n=e.headers)===null||n===void 0?void 0:n[ln.reconnect],clientDetailsOverride:(r=e.headers)===null||r===void 0?void 0:r[ln.clientDetails],resolvedUrl:Object.assign({},o),version:(s=(i=e.headers)===null||i===void 0?void 0:i[ln.version])!==null&&s!==void 0?s:void 0,loadMode:(a=e.headers)===null||a===void 0?void 0:a[ln.loadMode]})}}if(this.loader===void 0)throw new Error("Cannot resolve external containers");return this.loader.resolve(e)}async request(e){return e.url.startsWith("/")?(await this.resolve(e)).request(e):this.loader===void 0?{status:404,value:"Cannot request external containers",mimeType:"plain/text"}:this.loader.request(e)}}function mAe(t){const e=Object.create(t),n=new Map;return e.resolve=async r=>DB(r)?(n.has(r.url)||n.set(r.url,t.resolve(r)),n.get(r.url)):t.resolve(r),e}class gAe{constructor(e){var n,r;this.containers=new Map;const i=Object.assign({},e.scope);((n=e.options)===null||n===void 0?void 0:n.provideScopeLoader)!==!1&&(i.ILoader=this);const s={loaderId:Cn(),loaderVersion:OB},a=QR(Rf.mixinDebugLogger("fluid:telemetry",e.logger,{all:s}),oB.value,e.configProvider);this.services={urlResolver:mAe(lk.create(e.urlResolver)),documentServiceFactory:ok.create(e.documentServiceFactory),codeLoader:e.codeLoader,options:(r=e.options)!==null&&r!==void 0?r:{},scope:i,subLogger:a.logger,detachedBlobStorage:e.detachedBlobStorage},this.mc=ch(ot.create(this.services.subLogger,"Loader"))}get IFluidRouter(){return this}async createDetachedContainer(e){const n=await ra.createDetached(this,e);return this.cachingEnabled&&n.once("attached",()=>{Ea(n.resolvedUrl);const r=tx(n.resolvedUrl.url);r!==void 0&&this.addToContainerCache(r.id,Promise.resolve(n))}),n}async rehydrateDetachedContainerFromSnapshot(e){return ra.rehydrateDetachedFromSnapshot(this,e)}async resolve(e,n){const r=n===void 0?"Resolve":"ResolveWithPendingState";return gt.timedExecAsync(this.mc.logger,{eventName:r},async()=>(await this.resolveCore(e,n!==void 0?JSON.parse(n):void 0)).container)}async request(e){return gt.timedExecAsync(this.mc.logger,{eventName:"Request"},async()=>{const n=await this.resolveCore(e);return n.container.request(Object.assign(Object.assign({},e),{url:`${n.parsed.path}${n.parsed.query}`}))})}getKeyForContainerCache(e,n){var r;return((r=e.headers)===null||r===void 0?void 0:r[ln.version])!==void 0?`${n.id}@${e.headers[ln.version]}`:n.id}addToContainerCache(e,n){this.containers.set(e,n),n.then(r=>{r.closed?this.containers.delete(e):r.once("closed",()=>{this.containers.delete(e)})}).catch(r=>{})}async resolveCore(e,n){const r=await this.services.urlResolver.resolve(e);Ea(r);const i=tx(r.url);if(i===void 0)throw new Error(`Invalid URL ${r.url}`);if(n!==void 0){const c=tx(n.url);if((c==null?void 0:c.id)!==i.id||(c==null?void 0:c.path.replace(/\/$/,""))!==i.path.replace(/\/$/,"")){const u=`URL ${r.url} does not match pending state URL ${n.url}`;throw new Error(u)}}const{canCache:s,fromSequenceNumber:a}=this.parseHeader(i,e),o=n!==void 0?!1:s;let l;if(o){const c=this.getKeyForContainerCache(e,i),u=await this.containers.get(c);if(u!==void 0)l=u;else{const d=this.loadContainer(e,r);this.addToContainerCache(c,d),l=await d}}else l=await this.loadContainer(e,r,n);return l.deltaManager.lastSequenceNumber<=a&&await new Promise((c,u)=>{function d(h){h.sequenceNumber>a&&(c(),l.removeListener("op",d))}l.on("op",d)}),{container:l,parsed:i}}get cachingEnabled(){return this.services.options.cache!==!1}canCacheForRequest(e){return this.cachingEnabled&&e[ln.cache]!==!1}parseHeader(e,n){var r,i;let s=-1;n.headers=(r=n.headers)!==null&&r!==void 0?r:{};const a=n.headers[ln.sequenceNumber];return a!==void 0&&(s=a),n.headers[ln.version]=(i=e.version)!==null&&i!==void 0?i:n.headers[ln.version],{canCache:this.canCacheForRequest(n.headers),fromSequenceNumber:s}}async loadContainer(e,n,r){var i,s,a,o,l;return ra.load(this,{canReconnect:(i=e.headers)===null||i===void 0?void 0:i[ln.reconnect],clientDetailsOverride:(s=e.headers)===null||s===void 0?void 0:s[ln.clientDetails],resolvedUrl:n,version:(o=(a=e.headers)===null||a===void 0?void 0:a[ln.version])!==null&&o!==void 0?o:void 0,loadMode:(l=e.headers)===null||l===void 0?void 0:l[ln.loadMode]},r)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const vAe=45e3;class yAe{constructor(e,n,r){var i;this.handler=e,this.logger=n,this._clientId=r,this._connectionState=At.Disconnected,this.prevClientLeftTimer=new Ec((i=this.handler.maxClientLeaveWaitTime)!==null&&i!==void 0?i:3e5,()=>{N(!this.connected,684),this.applyForConnectedState("timeout")}),this.joinOpTimer=new Ec(vAe,()=>{var s;if(this.connectionState!==At.CatchingUp)return;const a=this.handler.quorumClients(),o={quorumInitialized:a!==void 0,hasPendingClientId:this.pendingClientId!==void 0,inQuorum:(a==null?void 0:a.getMember((s=this.pendingClientId)!==null&&s!==void 0?s:""))!==void 0,waitingForLeaveOp:this.waitingForLeaveOp};this.handler.logConnectionIssue("NoJoinOp",o)})}get connectionState(){return this._connectionState}get connected(){return this.connectionState===At.Connected}get clientId(){return this._clientId}get pendingClientId(){return this._pendingClientId}startJoinOpTimer(){N(!this.joinOpTimer.hasTimer,564),this.joinOpTimer.start()}stopJoinOpTimer(){N(this.joinOpTimer.hasTimer,565),this.joinOpTimer.clear()}get waitingForLeaveOp(){return this.prevClientLeftTimer.hasTimer}dispose(){N(!this.joinOpTimer.hasTimer,677),this.prevClientLeftTimer.clear()}containerSaved(){this.waitingForLeaveOp&&(this.prevClientLeftTimer.clear(),this.applyForConnectedState("containerSaved"))}receivedAddMemberEvent(e){e===this.pendingClientId&&(this.joinOpTimer.hasTimer?this.stopJoinOpTimer():this.handler.logConnectionIssue("ReceivedJoinOp"),this.waitingForLeaveOp&&(this.waitEvent=gt.start(this.logger,{eventName:"WaitBeforeClientLeave",details:JSON.stringify({waitOnClientId:this._clientId,hadOutstandingOps:this.handler.shouldClientJoinWrite()})})),this.applyForConnectedState("addMemberEvent"))}applyForConnectedState(e){var n,r;const i=this.handler.quorumClients();N(i!==void 0,566),N(this.waitingForLeaveOp===!1||this.clientId!==void 0&&i.getMember(this.clientId)!==void 0,738),this.pendingClientId!==this.clientId&&this.pendingClientId!==void 0&&i.getMember(this.pendingClientId)!==void 0&&!this.waitingForLeaveOp?((n=this.waitEvent)===null||n===void 0||n.end({source:e}),this.setConnectionState(At.Connected)):this.logger.sendTelemetryEvent({eventName:"connectedStateRejected",category:e==="timeout"?"error":"generic",details:JSON.stringify({source:e,pendingClientId:this.pendingClientId,clientId:this.clientId,waitingForLeaveOp:this.waitingForLeaveOp,inQuorum:(i==null?void 0:i.getMember((r=this.pendingClientId)!==null&&r!==void 0?r:""))!==void 0})})}receivedRemoveMemberEvent(e){this.clientId===e&&(this.prevClientLeftTimer.clear(),this.applyForConnectedState("removeMemberEvent"))}receivedDisconnectEvent(e){this.joinOpTimer.hasTimer&&this.stopJoinOpTimer(),this.setConnectionState(At.Disconnected,e)}receivedConnectEvent(e,n){const r=this._connectionState;this._connectionState=At.CatchingUp;const i=e==="write";N(i||!this.handler.shouldClientJoinWrite(),778),N(i||!this.waitingForLeaveOp,678);const s=this.handler.quorumClients();this._pendingClientId=n.clientId,this.handler.logConnectionStateChangeTelemetry(At.CatchingUp,r),i&&(s==null?void 0:s.getMember(this._pendingClientId))===void 0?this.startJoinOpTimer():this.waitingForLeaveOp||this.setConnectionState(At.Connected)}setConnectionState(e,n){if(this.connectionState===e){this.logger.sendErrorEvent({eventName:"setConnectionStateSame",value:e});return}const r=this._connectionState;this._connectionState=e;const i=this.handler.quorumClients();let s;this._clientId!==void 0&&(s=i==null?void 0:i.getMember(this._clientId)),e===At.Connected?(N(r===At.CatchingUp,472),s!==void 0&&(s.shouldHaveLeft=!0),this._clientId=this.pendingClientId):e===At.Disconnected&&(this._pendingClientId=void 0,s!==void 0&&this.handler.shouldClientJoinWrite()&&this.prevClientLeftTimer.hasTimer===!1?this.prevClientLeftTimer.restart():this.logger.sendTelemetryEvent({eventName:"noWaitOnDisconnected",details:JSON.stringify({inQuorum:s!==void 0,waitingForLeaveOp:this.waitingForLeaveOp,hadOutstandingOps:this.handler.shouldClientJoinWrite()})})),this.handler.logConnectionStateChangeTelemetry(this._connectionState,r,n),this.handler.connectionStateChanged()}initProtocol(e){e.quorum.on("addMember",(n,r)=>{this.receivedAddMemberEvent(n)}),e.quorum.on("removeMember",n=>{this.receivedRemoveMemberEvent(n)}),this.clientId!==void 0&&e.quorum.getMember(this.clientId)!==void 0&&this.prevClientLeftTimer.restart()}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class bAe{constructor(e,n){this.internalStorageService=e,this.logger=n,this._disposed=!1}get policies(){return this.internalStorageService.policies}get disposed(){return this._disposed}dispose(){this._disposed=!0}get repositoryUrl(){return this.internalStorageService.repositoryUrl}async getSnapshotTree(e,n){return this.runWithRetry(async()=>this.internalStorageService.getSnapshotTree(e,n),"storage_getSnapshotTree")}async readBlob(e){return this.runWithRetry(async()=>this.internalStorageService.readBlob(e),"storage_readBlob")}async getVersions(e,n,r){return this.runWithRetry(async()=>this.internalStorageService.getVersions(e,n,r),"storage_getVersions")}async uploadSummaryWithContext(e,n){return N(n.referenceSequenceNumber===0==(n.ackHandle===void 0),593),n.referenceSequenceNumber!==0?this.internalStorageService.uploadSummaryWithContext(e,n):this.runWithRetry(async()=>this.internalStorageService.uploadSummaryWithContext(e,n),"storage_uploadSummaryWithContext")}async downloadSummary(e){return this.runWithRetry(async()=>this.internalStorageService.downloadSummary(e),"storage_downloadSummary")}async createBlob(e){return this.runWithRetry(async()=>this.internalStorageService.createBlob(e),"storage_createBlob")}checkStorageDisposed(){if(this._disposed)throw new Ya("Storage Service is disposed. Cannot retry",{canRetry:!1})}async runWithRetry(e,n){return uk(e,n,this.logger,{onRetry:()=>this.checkStorageDisposed()})}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class SAe{constructor(e,n){this.internalStorageService=e,this.generateProtocolTree=n,this.getSnapshotTree=this.internalStorageService.getSnapshotTree.bind(this.internalStorageService),this.getVersions=this.internalStorageService.getVersions.bind(this.internalStorageService),this.createBlob=this.internalStorageService.createBlob.bind(this.internalStorageService),this.readBlob=this.internalStorageService.readBlob.bind(this.internalStorageService),this.downloadSummary=this.internalStorageService.downloadSummary.bind(this.internalStorageService),this.dispose=this.internalStorageService.dispose.bind(this.internalStorageService)}get policies(){return this.internalStorageService.policies}get repositoryUrl(){return this.internalStorageService.repositoryUrl}get disposed(){return this.internalStorageService.disposed}async uploadSummaryWithContext(e,n){return this.internalStorageService.uploadSummaryWithContext(Wg(e,this.generateProtocolTree()),n)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class xAe{constructor(e){this.storageGetter=e,this.blobContents={}}loadSnapshotForRehydratingContainer(e){this.getBlobContents(e)}getBlobContents(e){for(const[n,r]of Object.entries(e.blobsContents))this.blobContents[n]=r;for(const[n,r]of Object.entries(e.trees))this.getBlobContents(r)}get policies(){try{return this.storageGetter().policies}catch{}}get repositoryUrl(){return this.storageGetter().repositoryUrl}async getSnapshotTree(e,n){return this.storageGetter().getSnapshotTree(e,n)}async readBlob(e){const n=this.blobContents[e];return n!==void 0?n:this.storageGetter().readBlob(e)}async getVersions(e,n,r){return this.storageGetter().getVersions(e,n,r)}async uploadSummaryWithContext(e,n){return this.storageGetter().uploadSummaryWithContext(e,n)}async downloadSummary(e){return this.storageGetter().downloadSummary(e)}async createBlob(e){return this.storageGetter().createBlob(e)}}class wAe{constructor(e,n){this.blobStorage=e,this.logger=n,this.getSnapshotTree=this.notCalled,this.getVersions=this.notCalled,this.write=this.notCalled,this.uploadSummaryWithContext=this.notCalled,this.downloadSummary=this.notCalled}async createBlob(e){return this.blobStorage.createBlob(e)}async readBlob(e){return this.blobStorage.readBlob(e)}get policies(){return this.notCalled()}get repositoryUrl(){return this.notCalled()}notCalled(){try{throw new Error("BlobOnlyStorage not implemented method used")}catch(e){throw this.logger.sendErrorEvent({eventName:"BlobOnlyStorageWrongCall"},e),e}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class CAe extends Ti{constructor(e){super(e),super.setMaxListeners(50),this.propose=qh(this,e.propose.bind(e)),this.has=qh(this,e.has.bind(e)),this.get=qh(this,e.get.bind(e)),this.getMembers=qh(this,e.getMembers.bind(e)),this.getMember=qh(this,e.getMember.bind(e))}}function EAe(t){const n=new Map(t).get("code");return N(n!==void 0,732),n==null?void 0:n.value}function yO(t){return[["code",{key:"code",value:t,approvalSequenceNumber:0,commitSequenceNumber:0,sequenceNumber:0}]]}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const TAe=2e3,RAe=50;class kAe{constructor(e,n=TAe,r=RAe){this.submit=e,this.NoopCountFrequency=r,this.opsCountSinceNoop=0,n!==1/0&&(this.timer=new Ec(n,()=>{this.opsCountSinceNoop!==0&&this.submitNoop(!1)}))}scheduleSequenceNumberUpdate(e,n){if(n){this.submitNoop(!0);return}if(wp(e)){if(this.opsCountSinceNoop++,this.opsCountSinceNoop>=this.NoopCountFrequency){this.submitNoop(!1);return}this.timer!==void 0&&(this.opsCountSinceNoop===1&&this.timer.restart(),N(this.timer.hasTimer,578))}}submitNoop(e){this.submit(et.NoOp,e?"":null),N(this.opsCountSinceNoop===0,579)}stopSequenceNumberUpdate(){this.opsCountSinceNoop=0}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const PAe=8e3,_Ae=1e3,AAe=16*1024,bO={fatalConnectError:!0};function OAe(t){const e=`Nack (${t.type}): ${t.message}`,n=t.code!==403,r=t.retryAfter!==void 0?t.retryAfter*1e3:void 0;return Md(e,{canRetry:n,retryAfterMs:r},{statusCode:t.code,driverVersion:void 0})}class rx extends An{constructor(){super(...arguments),this.clientId="storage-only client",this.claims={scopes:[Vo.DocRead]},this.mode="read",this.existing=!0,this.maxMessageSize=0,this.version="",this.initialMessages=[],this.initialSignals=[],this.initialClients=[],this.serviceConfiguration={maxMessageSize:0,blockSize:0,summary:void 0},this.checkpointSequenceNumber=void 0,this._disposed=!1}submit(e){this.emit("nack",this.clientId,e.map(n=>({operation:n,content:{message:"Cannot submit with storage-only connection",code:403}})))}submitSignal(e){this.emit("nack",this.clientId,{operation:e,content:{message:"Cannot submit signal with storage-only connection",code:403}})}get disposed(){return this._disposed}dispose(){this._disposed=!0}}class hk{constructor(e,n,r,i,s){this.serviceProvider=e,this.client=n,this.logger=i,this.props=s,this._forceReadonly=!1,this.pendingReconnect=!1,this.clientSequenceNumber=0,this.clientSequenceNumberObserved=0,this.trailingNoopCount=0,this.connectFirstConnection=!0,this._connectionVerboseProps={},this._connectionProps={},this.closed=!1,this.opHandler=(a,o)=>{const l=Array.isArray(o)?o:[o];this.props.incomingOpHandler(l,"opHandler")},this.nackHandler=(a,o)=>{const l=o[0];if(this._readonlyPermissions===!0){this.props.closeHandler(V5e("writeOnReadOnlyDocument",{driverVersion:void 0}));return}const c=OAe(l.content);if(!c.canRetry){this.props.closeHandler(c);return}this.reconnectOnError("write",c)},this.disconnectHandlerInternal=a=>{this.reconnectOnError(this.defaultReconnectionMode,a)},this.errorHandler=a=>{this.reconnectOnError(this.defaultReconnectionMode,a)},this.clientDetails=this.client.details,this.defaultReconnectionMode=this.client.mode,this._reconnectMode=r?Mr.Enabled:Mr.Never,this._outbound=new a2(a=>{if(this.connection===void 0)throw new Error("Attempted to submit an outbound message without connection");this.connection.submit(a)}),this._outbound.on("error",a=>{this.props.closeHandler(As(a))})}get connectionVerboseProps(){return this._connectionVerboseProps}get connectionMode(){var e,n;return(n=(e=this.connection)===null||e===void 0?void 0:e.mode)!==null&&n!==void 0?n:"read"}get connected(){return this.connection!==void 0}get clientId(){var e;return(e=this.connection)===null||e===void 0?void 0:e.clientId}get reconnectMode(){return this._reconnectMode}get maxMessageSize(){var e,n,r;return(r=(n=(e=this.connection)===null||e===void 0?void 0:e.serviceConfiguration)===null||n===void 0?void 0:n.maxMessageSize)!==null&&r!==void 0?r:AAe}get version(){if(this.connection===void 0)throw new Error("Cannot check version without a connection");return this.connection.version}get serviceConfiguration(){var e;return(e=this.connection)===null||e===void 0?void 0:e.serviceConfiguration}get scopes(){var e;return(e=this.connection)===null||e===void 0?void 0:e.claims.scopes}get outbound(){return this._outbound}get connectionProps(){return this.connection!==void 0?this._connectionProps:Object.assign(Object.assign({},this._connectionProps),{sentOps:this.clientSequenceNumber})}shouldJoinWrite(){return this.clientSequenceNumberObserved<this.clientSequenceNumber-this.trailingNoopCount}get readonly(){return this._forceReadonly?!0:this._readonlyPermissions}get readOnlyInfo(){const e=this.connection!==void 0&&this.connection instanceof rx;return e||this._forceReadonly||this._readonlyPermissions===!0?{readonly:!0,forced:this._forceReadonly,permissions:this._readonlyPermissions,storageOnly:e}:{readonly:this._readonlyPermissions}}static detailsFromConnection(e){return{claims:e.claims,clientId:e.clientId,existing:e.existing,checkpointSequenceNumber:e.checkpointSequenceNumber,get initialClients(){return e.initialClients},mode:e.mode,serviceConfiguration:e.serviceConfiguration,version:e.version}}dispose(e){if(this.closed)return;this.closed=!0,this.pendingConnection=void 0,this._reconnectMode=Mr.Never,this._outbound.clear();const n=e!==void 0?`Closing DeltaManager (${e.message})`:"Closing DeltaManager";this.disconnectFromDeltaStream(n),this.set_readonlyPermissions(!0)}setAutoReconnect(e){N(e!==Mr.Never&&this._reconnectMode!==Mr.Never,632),this._reconnectMode=e,e!==Mr.Enabled&&this.disconnectFromDeltaStream("setAutoReconnect")}forceReadonly(e){e!==this._forceReadonly&&this.logger.sendTelemetryEvent({eventName:"ForceReadOnly",value:e});const n=this.readonly;if(this._forceReadonly=e,n!==this.readonly){if(this._reconnectMode===Mr.Never)throw new Tt("API is not supported for non-connecting or closed container");let r=!1;this.readonly===!0&&(this.shouldJoinWrite()&&this.logger.sendErrorEvent({eventName:"ForceReadonlyPendingChanged"}),r=this.disconnectFromDeltaStream("Force readonly")),this.props.readonlyChangeHandler(this.readonly),r&&this.triggerConnect("read")}}set_readonlyPermissions(e){const n=this.readonly;this._readonlyPermissions=e,n!==this.readonly&&this.props.readonlyChangeHandler(this.readonly)}connect(e){this.connectCore(e).catch(n=>{const r=As(n,{props:bO});this.props.closeHandler(r)})}async connectCore(e){var n,r;if(N(!this.closed,618),this.connection!==void 0)return;let i;this.pendingConnection!==void 0&&(i=this.pendingConnection.connectionMode,this.cancelConnection(),N(this.pendingConnection===void 0,836));let s=(n=e??i)!==null&&n!==void 0?n:this.defaultReconnectionMode;this.shouldJoinWrite()&&(s="write");const a=this.serviceProvider();N(a!==void 0,679);let o;if(((r=a.policies)===null||r===void 0?void 0:r.storageOnly)===!0){o=new rx,this.setupNewSuccessfulConnection(o,"read"),N(this.pendingConnection===void 0,691);return}let l=_Ae,c=0;const u=st.now();let d;const h=new kc,p=h.signal;for(this.pendingConnection={abort:()=>{h.abort()},connectionMode:s};o===void 0;){if(this.closed)throw new Error("Attempting to connect a closed DeltaManager");if(p.aborted===!0){this.logger.sendTelemetryEvent({eventName:"ConnectionAttemptCancelled",attempts:c,duration:dn.formatTick(st.now()-u),connectionEstablished:!1});return}c++;try{this.client.mode=s,o=await a.connectToDeltaStream(Object.assign(Object.assign({},this.client),{mode:s})),o.disposed&&(this.logger.sendTelemetryEvent({eventName:"ReceivedClosedConnection"}),o=void 0)}catch(f){if(typeof f=="object"&&f!==null&&(f==null?void 0:f.errorType)===e1.errorType){o=new rx,s="read";break}if(!um(f)){const g=As(f,{props:bO});throw this.props.closeHandler(g),g}n2(this.logger,{attempts:c,delay:l,eventName:"DeltaConnectionFailureToConnect",duration:dn.formatTick(st.now()-u)},f),d=f;const m=dv(f);l=m??Math.min(l*2,PAe),m!==void 0&&this.props.reconnectionDelayHandler(m,f),await r2(l)}}if(c>1&&n2(this.logger,{eventName:"MultipleDeltaConnectionFailures",attempts:c,duration:dn.formatTick(st.now()-u)},d),p.aborted===!0){o.dispose(),this.logger.sendTelemetryEvent({eventName:"ConnectionAttemptCancelled",attempts:c,duration:dn.formatTick(st.now()-u),connectionEstablished:!0});return}this.setupNewSuccessfulConnection(o,s)}triggerConnect(e){N(this.connection===void 0,569),this.reconnectMode===Mr.Enabled&&this.connect(e)}disconnectFromDeltaStream(e){if(this.pendingReconnect=!1,this.connection===void 0)return this.pendingConnection!==void 0?(this.cancelConnection(),!0):!1;N(this.pendingConnection===void 0,635);const n=this.connection;return this.connection=void 0,n.off("op",this.opHandler),n.off("signal",this.props.signalHandler),n.off("nack",this.nackHandler),n.off("disconnect",this.disconnectHandlerInternal),n.off("error",this.errorHandler),n.off("pong",this.props.pongHandler),this._outbound.pause(),this._outbound.clear(),this.props.disconnectHandler(e),n.dispose(),this._connectionVerboseProps={},!0}cancelConnection(){N(this.pendingConnection!==void 0,837),this.pendingConnection.abort(),this.pendingConnection=void 0,this.logger.sendTelemetryEvent({eventName:"ConnectionCancelReceived"})}setupNewSuccessfulConnection(e,n){N(this.connection===void 0,230),N(!e.disposed,650),this.pendingConnection=void 0,this.connection=e;const r=!e.claims.scopes.includes(Vo.DocWrite);if(N(n==="read"||r===(this.connectionMode==="read"),231),N(!r||this.connectionMode==="read",232),this.set_readonlyPermissions(r),this.closed){this.disconnectFromDeltaStream("ConnectionManager already closed");return}this._outbound.resume(),e.on("op",this.opHandler),e.on("signal",this.props.signalHandler),e.on("nack",this.nackHandler),e.on("disconnect",this.disconnectHandlerInternal),e.on("error",this.errorHandler),e.on("pong",this.props.pongHandler);const i=e.initialMessages.sort((l,c)=>l.sequenceNumber-c.sequenceNumber);let s=e.checkpointSequenceNumber;this._connectionVerboseProps={clientId:e.clientId,mode:e.mode},this._connectionProps={},e.relayServiceAgent!==void 0&&(this._connectionVerboseProps.relayServiceAgent=e.relayServiceAgent,this._connectionProps.relayServiceAgent=e.relayServiceAgent),this._connectionProps.socketDocumentId=e.claims.documentId,this._connectionProps.connectionMode=e.mode;let a=-1;if(i.length!==0&&(this._connectionVerboseProps.connectionInitialOpsFrom=i[0].sequenceNumber,a=i[i.length-1].sequenceNumber,this._connectionVerboseProps.connectionInitialOpsTo=a+1,(s===void 0||s<a)&&(s=a)),this.props.incomingOpHandler(i,this.connectFirstConnection?"InitialOps":"ReconnectOps"),e.initialSignals!==void 0)for(const l of e.initialSignals)this.props.signalHandler(l);const o=hk.detailsFromConnection(e);o.checkpointSequenceNumber=s,this.props.connectHandler(o),this.connectFirstConnection=!1}reconnectOnError(e,n){this.reconnect(e,n.message,n).catch(this.props.closeHandler)}async reconnect(e,n,r){if(N(this.connection!==void 0,235),this.disconnectFromDeltaStream(n),r!==void 0&&!r.canRetry&&this.logger.sendTelemetryEvent({eventName:"reconnectingDespiteFatalError",reconnectMode:this.reconnectMode},r),this.reconnectMode===Mr.Never&&this.props.closeHandler(),this.closed||this.reconnectMode!==Mr.Enabled)return;const i=dv(r);r!==void 0&&i!==void 0&&(this.props.reconnectionDelayHandler(i,r),await r2(i)),this.triggerConnect(e)}prepareMessageToSend(e){var n,r;if(this.readonly===!0){N(this.readOnlyInfo.readonly===!0,496);const i=new Ya("deltaManagerReadonlySubmit",void 0,{readonly:this.readOnlyInfo.readonly,forcedReadonly:this.readOnlyInfo.forced,readonlyPermissions:this.readOnlyInfo.permissions,storageOnly:this.readOnlyInfo.storageOnly});this.props.closeHandler(i);return}return N(!!this.connection,228),this.lastSubmittedClientId!==((n=this.connection)===null||n===void 0?void 0:n.clientId)&&(this.lastSubmittedClientId=(r=this.connection)===null||r===void 0?void 0:r.clientId,this.clientSequenceNumber=0,this.clientSequenceNumberObserved=0),e.type===et.NoOp?this.trailingNoopCount++:this.trailingNoopCount=0,Object.assign(Object.assign({},e),{clientSequenceNumber:++this.clientSequenceNumber})}submitSignal(e){this.connection!==void 0?this.connection.submitSignal(e):this.logger.sendErrorEvent({eventName:"submitSignalDisconnected"})}sendMessages(e){if(N(this.connected,692),this.connectionMode==="read"){this.pendingReconnect||(this.pendingReconnect=!0,Promise.resolve().then(async()=>{this.pendingReconnect&&await this.reconnect("write","Switch to write")}).catch(()=>{}));return}N(!this.pendingReconnect,693),this._outbound.push(e)}beforeProcessingIncomingOp(e){if(N(this.clientId!==e.clientId||this.lastSubmittedClientId===e.clientId,238),this.lastSubmittedClientId!==void 0&&this.lastSubmittedClientId===e.clientId){const n=e.clientSequenceNumber;N(this.clientSequenceNumberObserved<n,239),N(n<=this.clientSequenceNumber,240),this.clientSequenceNumberObserved=n}e.type===et.ClientLeave&&JSON.parse(e.data)===this.clientId&&(this.logger.sendPerformanceEvent({eventName:"ReadConnectionTransition"}),this.reconnect("read","Switch to read").catch(i=>{this.logger.sendErrorEvent({eventName:"SwitchToReadConnection"},i)}))}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const DAe=0,SO="dirty",ix="saved",IAe=t=>{var e;return(e=t.get("code"))!==null&&e!==void 0?e:t.get("code2")};async function xO(t,e,n){const r=gt.start(t,{eventName:e}),i=await n();r.duration>1e3&&r.end(i)}const wO="summarizer";class ra extends tk{constructor(e,n){var r,i;super((u,d)=>{this.mc.logger.sendErrorEvent({eventName:"ContainerEventHandlerException",name:typeof u=="string"?u:void 0},d)}),this.loader=e,this._canReconnect=!0,this._lifecycleState="loading",this._attachState=ze.Detached,this.inboundQueuePausedFromInit=!0,this.firstConnection=!0,this.connectionTransitionTimes=[],this.messageCountAfterDisconnection=0,this.attachStarted=!1,this._dirtyContainer=!1,this.setAutoReconnectTime=st.now(),this._audience=new iAe,this.clientDetailsOverride=n.clientDetailsOverride,this._resolvedUrl=n.resolvedUrl,n.canReconnect!==void 0&&(this._canReconnect=n.canReconnect);const s=this.client.details.type,o=`${this.client.details.capabilities.interactive?"interactive":"noninteractive"}${s!==void 0&&s!==""?`/${s}`:""}`;this.subLogger=ot.create(e.services.subLogger,void 0,{all:{clientType:o,containerId:Cn(),docId:()=>{var u,d;return(d=(u=this._resolvedUrl)===null||u===void 0?void 0:u.id)!==null&&d!==void 0?d:void 0},containerAttachState:()=>this._attachState,containerLifecycleState:()=>this._lifecycleState,containerConnectionState:()=>At[this.connectionState],serializedContainer:n.serializedContainerState!==void 0},error:{dmInitialSeqNumber:()=>{var u;return(u=this._deltaManager)===null||u===void 0?void 0:u.initialSequenceNumber},dmLastProcessedSeqNumber:()=>{var u;return(u=this._deltaManager)===null||u===void 0?void 0:u.lastSequenceNumber},dmLastKnownSeqNumber:()=>{var u;return(u=this._deltaManager)===null||u===void 0?void 0:u.lastKnownSeqNumber},containerLoadedFromVersionId:()=>{var u;return(u=this.loadedFromVersion)===null||u===void 0?void 0:u.id},containerLoadedFromVersionDate:()=>{var u;return(u=this.loadedFromVersion)===null||u===void 0?void 0:u.date},dmLastMsqSeqNumber:()=>{var u,d;return(d=(u=this.deltaManager)===null||u===void 0?void 0:u.lastMessage)===null||d===void 0?void 0:d.sequenceNumber},dmLastMsqSeqTimestamp:()=>{var u,d;return(d=(u=this.deltaManager)===null||u===void 0?void 0:u.lastMessage)===null||d===void 0?void 0:d.timestamp},dmLastMsqSeqClientId:()=>{var u,d;return(d=(u=this.deltaManager)===null||u===void 0?void 0:u.lastMessage)===null||d===void 0?void 0:d.clientId},connectionStateDuration:()=>st.now()-this.connectionTransitionTimes[this.connectionState]}}),this.mc=ch(ot.create(this.subLogger,"Container"));const l=(r=this.mc.config.getBoolean("Fluid.Container.summarizeProtocolTree"))!==null&&r!==void 0?r:this.loader.services.options.summarizeProtocolTree;this.options=Object.assign(Object.assign({},this.loader.services.options),{summarizeProtocolTree:l}),this.connectionStateHandler=new yAe({quorumClients:()=>{var u;return(u=this._protocolHandler)===null||u===void 0?void 0:u.quorum},logConnectionStateChangeTelemetry:(u,d,h)=>this.logConnectionStateChangeTelemetry(u,d,h),shouldClientJoinWrite:()=>this._deltaManager.connectionManager.shouldJoinWrite(),maxClientLeaveWaitTime:this.loader.services.options.maxClientLeaveWaitTime,logConnectionIssue:(u,d)=>{this._deltaManager.logConnectionIssue(Object.assign({eventName:u,duration:st.now()-this.connectionTransitionTimes[At.CatchingUp]},d===void 0?{}:{details:JSON.stringify(d)}))},connectionStateChanged:()=>{this._lifecycleState==="loaded"&&this.propagateConnectionState()}},this.mc.logger,(i=n.serializedContainerState)===null||i===void 0?void 0:i.clientId),this.on(ix,()=>{this.connectionStateHandler.containerSaved()}),this._deltaManager=this.createDeltaManager(),this._storage=new xAe(()=>{if(this.attachState!==ze.Attached){if(this.loader.services.detachedBlobStorage!==void 0)return new wAe(this.loader.services.detachedBlobStorage,this.mc.logger);throw this.mc.logger.sendErrorEvent({eventName:"NoRealStorageInDetachedContainer"}),new Error("Real storage calls not allowed in Unattached container")}return this.storageService}),typeof document=="object"&&document!==null&&typeof document.addEventListener=="function"&&document.addEventListener!==null&&(this.lastVisible=document.hidden?st.now():void 0,this.visibilityEventHandler=()=>{document.hidden?this.lastVisible=st.now():setTimeout(()=>{this.lastVisible=void 0},0)},document.addEventListener("visibilitychange",this.visibilityEventHandler)),this.on("newListener",(u,d)=>{Promise.resolve().then(()=>{switch(u){case SO:this._dirtyContainer&&d();break;case ix:this._dirtyContainer||d();break;case vB:this.connected&&d(this.clientId);break;case yB:this.connected||d();break}}).catch(h=>{this.mc.logger.sendErrorEvent({eventName:"RaiseConnectedEventError"},h)})})}static async load(e,n,r){const i=new ra(e,{clientDetailsOverride:n.clientDetailsOverride,resolvedUrl:n.resolvedUrl,canReconnect:n.canReconnect,serializedContainerState:r});return gt.timedExecAsync(i.mc.logger,{eventName:"Load"},async s=>new Promise((a,o)=>{var l,c;const u=n.version,d={opsBeforeReturn:"cached"},h=r?Object.assign(Object.assign({},(l=n.loadMode)!==null&&l!==void 0?l:d),{opsBeforeReturn:void 0}):(c=n.loadMode)!==null&&c!==void 0?c:d,p=f=>{o(f??new Ya("Container closed without error during load"))};i.on("closed",p),i.load(u,h,r).finally(()=>{i.removeListener("closed",p)}).then(f=>{s.end(Object.assign(Object.assign({},f),n.loadMode)),a(i)},f=>{const m=As(f);i.close(m),p(m)})}),{start:!0,end:!0,cancel:"generic"})}static async createDetached(e,n){const r=new ra(e,{});return gt.timedExecAsync(r.mc.logger,{eventName:"CreateDetached"},async i=>(await r.createDetached(n),r),{start:!0,end:!0,cancel:"generic"})}static async rehydrateDetachedFromSnapshot(e,n){const r=new ra(e,{});return gt.timedExecAsync(r.mc.logger,{eventName:"RehydrateDetachedFromSnapshot"},async i=>{const s=JSON.parse(n);return await r.rehydrateDetachedFromSnapshot(s),r},{start:!0,end:!0,cancel:"generic"})}setLoaded(){this._lifecycleState==="loading"&&(this.propagateConnectionState(),this._lifecycleState="loaded")}get closed(){return this._lifecycleState==="closing"||this._lifecycleState==="closed"}get storage(){return this._storage}get storageService(){if(this._storageService===void 0)throw new Error("Attempted to access storageService before it was defined");return this._storageService}get context(){if(this._context===void 0)throw new Ya("Attempted to access context before it was defined");return this._context}get protocolHandler(){if(this._protocolHandler===void 0)throw new Error("Attempted to access protocolHandler before it was defined");return this._protocolHandler}get connectionMode(){return this._deltaManager.connectionManager.connectionMode}get IFluidRouter(){return this}get resolvedUrl(){return this._resolvedUrl}get loadedFromVersion(){return this._loadedFromVersion}get readOnlyInfo(){return this._deltaManager.readOnlyInfo}get closeSignal(){return this._deltaManager.closeAbortController.signal}forceReadonly(e){this._deltaManager.connectionManager.forceReadonly(e)}get deltaManager(){return this._deltaManager}get connectionState(){return this.connectionStateHandler.connectionState}get connected(){return this.connectionStateHandler.connected}get serviceConfiguration(){return this._deltaManager.serviceConfiguration}get clientId(){return this.connectionStateHandler.clientId}get scopes(){return this._deltaManager.connectionManager.scopes}get clientDetails(){return this._deltaManager.clientDetails}getSpecifiedCodeDetails(){return this.getCodeDetailsFromQuorum()}getLoadedCodeDetails(){var e;return(e=this._context)===null||e===void 0?void 0:e.codeDetails}get audience(){return this._audience}get isDirty(){return this._dirtyContainer}get serviceFactory(){return this.loader.services.documentServiceFactory}get urlResolver(){return this.loader.services.urlResolver}get scope(){return this.loader.services.scope}get codeLoader(){return this.loader.services.codeLoader}getQuorum(){return this.protocolHandler.quorum}close(e){this._deltaManager.close(e),N(this.connectionState===At.Disconnected,207),N(this._lifecycleState==="closed",788)}closeCore(e){var n,r,i,s;N(!this.closed,789);try{try{this.mc.logger.sendTelemetryEvent({eventName:"ContainerClose",category:e===void 0?"generic":"error"},e),this._lifecycleState="closing",(n=this._protocolHandler)===null||n===void 0||n.close(),this.connectionStateHandler.dispose(),(r=this._context)===null||r===void 0||r.dispose(e!==void 0?new Error(e.message):void 0),(i=this._storageService)===null||i===void 0||i.dispose(),(s=this.service)===null||s===void 0||s.dispose(e)}catch(a){this.mc.logger.sendErrorEvent({eventName:"ContainerCloseException"},a)}this.emit("closed",e),this.removeAllListeners(),this.visibilityEventHandler!==void 0&&document.removeEventListener("visibilitychange",this.visibilityEventHandler)}finally{this._lifecycleState="closed"}}closeAndGetPendingLocalState(){N(this.attachState===ze.Attached,209),N(this.resolvedUrl!==void 0&&this.resolvedUrl.type==="fluid",210),N(!!this._protocolHandler,739),N(this._protocolHandler.attributes.term!==void 0,779);const e={pendingRuntimeState:this.context.getPendingLocalState(),url:this.resolvedUrl.url,protocol:this.protocolHandler.getProtocolState(),term:this._protocolHandler.attributes.term,clientId:this.clientId};return this.close(),JSON.stringify(e)}get attachState(){return this._attachState}serialize(){N(this.attachState===ze.Detached,211);const e=this.context.createSummary(),n=this.captureProtocolSummary(),r=Wg(e,n);return this.loader.services.detachedBlobStorage&&this.loader.services.detachedBlobStorage.size>0&&(r.tree[".hasAttachmentBlobs"]={type:Ne.Blob,content:"true"}),JSON.stringify(r)}async attach(e){await gt.timedExecAsync(this.mc.logger,{eventName:"Attach"},async()=>{if(this._lifecycleState!=="loaded")throw new Tt(`The Container is not in a valid state for attach [${this._lifecycleState}]`);N(this._attachState===ze.Detached&&!this.attachStarted,517),this.attachStarted=!0;const n=this.loader.services.detachedBlobStorage!==void 0&&this.loader.services.detachedBlobStorage.size>0;try{N(this.deltaManager.inbound.length===0,214);let r;if(!n){const a=this.context.createSummary(),o=this.captureProtocolSummary();r=Wg(a,o),this._attachState=ze.Attaching,this.context.notifyAttaching(nx(r))}const i=await this.urlResolver.resolve(e);Ea(i),this.service===void 0&&(N(this.client.details.type!==wO,708),this.service=await uk(async()=>this.serviceFactory.createContainer(r,i,this.subLogger,!1),"containerAttach",this.mc.logger,{cancel:this.closeSignal}));const s=this.service.resolvedUrl;if(Ea(s),this._resolvedUrl=s,await this.connectStorageService(),n){N(!!this.loader.services.detachedBlobStorage,590);const a=new Map;for(;a.size<this.loader.services.detachedBlobStorage.size;){const c=this.loader.services.detachedBlobStorage.getBlobIds().filter(u=>!a.has(u));for(const u of c){const d=await this.loader.services.detachedBlobStorage.readBlob(u),h=await this.storageService.createBlob(d);a.set(u,h.id)}}const o=this.context.createSummary(a),l=this.captureProtocolSummary();r=Wg(o,l),this._attachState=ze.Attaching,this.context.notifyAttaching(nx(r)),await this.storageService.uploadSummaryWithContext(r,{referenceSequenceNumber:0,ackHandle:void 0,proposalHandle:void 0})}this._attachState=ze.Attached,this.emit("attached"),this.propagateConnectionState(),this.closed||this.resumeInternal({fetchOpsFromStorage:!1,reason:"createDetached"})}catch(r){const i=As(r),s=this.resolvedUrl;throw ak(s)&&i.addTelemetryProperties({resolvedUrl:s.url}),this.close(i),i}},{start:!0,end:!0,cancel:"generic"})}async request(e){return gt.timedExecAsync(this.mc.logger,{eventName:"Request"},async()=>this.context.request(e),{end:!0,cancel:"error"})}setAutoReconnectInternal(e){if(this._deltaManager.connectionManager.reconnectMode===e)return;const r=st.now(),i=r-this.setAutoReconnectTime;this.setAutoReconnectTime=r,this.mc.logger.sendTelemetryEvent({eventName:e===Mr.Enabled?"AutoReconnectEnabled":"AutoReconnectDisabled",connectionMode:this.connectionMode,connectionState:At[this.connectionState],duration:i}),this._deltaManager.connectionManager.setAutoReconnect(e)}connect(){if(this.closed)throw new Tt("The Container is closed and cannot be connected");if(this._attachState!==ze.Attached)throw new Tt("The Container is not attached and cannot be connected");this.connected||this.connectInternal({reason:"DocumentConnect",fetchOpsFromStorage:!1})}connectInternal(e){N(!this.closed,709),N(this._attachState===ze.Attached,710),this.resumeInternal(e);const n=Mr.Enabled;this.setAutoReconnectInternal(n)}disconnect(){if(this.closed)throw new Tt("The Container is closed and cannot be disconnected");this.disconnectInternal()}disconnectInternal(){N(!this.closed,711);const e=Mr.Disabled;this.setAutoReconnectInternal(e)}resumeInternal(e){N(!this.closed,217),this.inboundQueuePausedFromInit&&(this.inboundQueuePausedFromInit=!1,this._deltaManager.inbound.resume(),this._deltaManager.inboundSignal.resume()),this.connectToDeltaStream(e)}async getAbsoluteUrl(e){var n;if(this.resolvedUrl!==void 0)return this.urlResolver.getAbsoluteUrl(this.resolvedUrl,e,aAe((n=this._context)===null||n===void 0?void 0:n.codeDetails))}async proposeCodeDetails(e){if(!aO(e))throw new Error("Provided codeDetails are not IFluidCodeDetails");if(this.codeLoader.IFluidCodeDetailsComparer){const n=await this.codeLoader.IFluidCodeDetailsComparer.compare(e,this.getCodeDetailsFromQuorum());if(n!==void 0&&n<=0)throw new Error("Proposed code details should be greater than the current")}return this.protocolHandler.quorum.propose("code",e).then(()=>!0).catch(()=>!1)}async processCodeProposal(){const e=this.getCodeDetailsFromQuorum();if(await Promise.all([this.deltaManager.inbound.pause(),this.deltaManager.inboundSignal.pause()]),await this.context.satisfies(e)===!0){this.deltaManager.inbound.resume(),this.deltaManager.inboundSignal.resume();return}this.close(new Ya("Existing context does not satisfy incoming proposal"))}async getVersion(e){return(await this.storageService.getVersions(e,1))[0]}recordConnectStartTime(){this.connectionTransitionTimes[At.Disconnected]===void 0&&(this.connectionTransitionTimes[At.Disconnected]=st.now())}connectToDeltaStream(e){this.recordConnectStartTime(),(!this._canReconnect||!this.client.details.capabilities.interactive)&&(e.mode="write"),this._deltaManager.connect(e)}async load(e,n,r){if(this._resolvedUrl===void 0)throw new Error("Attempting to load without a resolved url");this.service=await this.serviceFactory.createDocumentService(this._resolvedUrl,this.subLogger,this.client.details.type===wO);const i={reason:"DocumentOpen",mode:"write",fetchOpsFromStorage:!1};n.deltaConnection===void 0&&this.connectToDeltaStream(i),r?this.connectStorageService().catch(u=>this.close(u)):await this.connectStorageService(),this._attachState=ze.Attached;const{snapshot:s,versionId:a}=r===void 0?await this.fetchSnapshotTree(e):{snapshot:void 0,versionId:void 0};N(s!==void 0||r!==void 0,567);const o=r===void 0?await this.getDocumentAttributes(this.storageService,s):{sequenceNumber:r.protocol.sequenceNumber,minimumSequenceNumber:r.protocol.minimumSequenceNumber,term:r.term};let l;switch(n.opsBeforeReturn){case void 0:this.attachDeltaManagerOpHandler(o,n.deltaConnection!=="none"?"all":"none");break;case"cached":l=this.attachDeltaManagerOpHandler(o,"cached");break;case"all":l=this.attachDeltaManagerOpHandler(o,"all");break;default:pi(n.opsBeforeReturn)}this._protocolHandler=r===void 0?await this.initializeProtocolStateFromSnapshot(o,this.storageService,s):await this.initializeProtocolState(o,r.protocol.members,r.protocol.proposals,r.protocol.values);const c=this.getCodeDetailsFromQuorum();if(await this.instantiateContext(!0,c,s,r==null?void 0:r.pendingRuntimeState),!this.closed)switch(l!==void 0&&(this._deltaManager.inbound.resume(),await xO(this.mc.logger,"WaitOps",async()=>(await l,{})),await xO(this.mc.logger,"WaitOpProcessing",async()=>this._deltaManager.inbound.waitTillProcessingDone()),this._deltaManager.inbound.pause()),n.deltaConnection){case void 0:case"delayed":N(this.inboundQueuePausedFromInit,838),this.inboundQueuePausedFromInit=!1,this._deltaManager.inbound.resume(),this._deltaManager.inboundSignal.resume();break;case"none":break;default:pi(n.deltaConnection)}if(this.closed)throw new Error("Container was closed while load()");return this.setLoaded(),{sequenceNumber:o.sequenceNumber,version:a,dmLastProcessedSeqNumber:this._deltaManager.lastSequenceNumber,dmLastKnownSeqNumber:this._deltaManager.lastKnownSeqNumber}}async createDetached(e){const n={sequenceNumber:DAe,term:1,minimumSequenceNumber:0};await this.attachDeltaManagerOpHandler(n);const r=yO(e);this._protocolHandler=await this.initializeProtocolState(n,[],[],r),await this.instantiateContextDetached(!1),this.setLoaded()}async rehydrateDetachedFromSnapshot(e){e.tree[".hasAttachmentBlobs"]!==void 0&&(N(!!this.loader.services.detachedBlobStorage&&this.loader.services.detachedBlobStorage.size>0,592),delete e.tree[".hasAttachmentBlobs"]);const n=nx(e);this._storage.loadSnapshotForRehydratingContainer(n);const r=await this.getDocumentAttributes(this._storage,n);await this.attachDeltaManagerOpHandler(r);const i=vO(n),s=await zn(this._storage,i.blobs.quorumValues),a=EAe(s);this._protocolHandler=await this.initializeProtocolState(r,[],[],a!==void 0?yO(a):[]),await this.instantiateContextDetached(!0,n),this.setLoaded()}async connectStorageService(){var e,n;if(this._storageService!==void 0)return;N(this.service!==void 0,495);const r=await this.service.connectToStorage();this._storageService=new bAe(r,this.mc.logger),this.options.summarizeProtocolTree===!0&&(this.mc.logger.sendTelemetryEvent({eventName:"summarizeProtocolTreeEnabled"}),this._storageService=new SAe(this._storageService,()=>this.captureProtocolSummary())),N(((e=r.policies)===null||e===void 0?void 0:e.minBlobSize)===((n=this.storageService.policies)===null||n===void 0?void 0:n.minBlobSize),224)}async getDocumentAttributes(e,n){if(n===void 0)return{minimumSequenceNumber:0,sequenceNumber:0,term:1};const r=".protocol"in n.trees?n.trees[".protocol"].blobs.attributes:n.blobs[".attributes"],i=await zn(e,r);return i.term===void 0&&(i.term=1),i}async initializeProtocolStateFromSnapshot(e,n,r){let i=[],s=[],a=[];if(r!==void 0){const l=vO(r);[i,s,a]=await Promise.all([zn(n,l.blobs.quorumMembers),zn(n,l.blobs.quorumProposals),zn(n,l.blobs.quorumValues)])}return await this.initializeProtocolState(e,i,s,a)}async initializeProtocolState(e,n,r,i){const s=new T5e(e.minimumSequenceNumber,e.sequenceNumber,e.term,n,r,i,(o,l)=>this.submitMessage(et.Propose,{key:o,value:l})),a=ot.create(this.subLogger,"ProtocolHandler");return s.quorum.on("error",o=>{a.sendErrorEvent(o)}),this.connectionStateHandler.initProtocol(s),s.quorum.on("addProposal",o=>{(o.key==="code"||o.key==="code2")&&this.emit("codeDetailsProposed",o.value,o)}),s.quorum.on("approveProposal",(o,l,c)=>{(l==="code"||l==="code2")&&(aO(c)||this.mc.logger.sendErrorEvent({eventName:"CodeProposalNotIFluidCodeDetails"}),this.processCodeProposal().catch(u=>{throw this.close(As(u)),u}))}),s}captureProtocolSummary(){const e=this.protocolHandler.snapshot();return{tree:{attributes:{content:JSON.stringify(this.protocolHandler.attributes),type:Ne.Blob},quorumMembers:{content:JSON.stringify(e.members),type:Ne.Blob},quorumProposals:{content:JSON.stringify(e.proposals),type:Ne.Blob},quorumValues:{content:JSON.stringify(e.values),type:Ne.Blob}},type:Ne.Tree}}getCodeDetailsFromQuorum(){const e=this.protocolHandler.quorum;return IAe(e)}get client(){var e;const n=((e=this.options)===null||e===void 0?void 0:e.client)!==void 0?this.options.client:{details:{capabilities:{interactive:!0}},mode:"read",permission:[],scopes:[],user:{id:""}};return this.clientDetailsOverride!==void 0&&FF(n.details,this.clientDetailsOverride),n.details.environment=[n.details.environment,` loaderVersion:${OB}`].join(";"),n}activeConnection(){return this.connectionState===At.Connected&&this.connectionMode==="write"}createDeltaManager(){const e=()=>this.service,n=new dAe(e,ot.create(this.subLogger,"DeltaManager"),()=>this.activeConnection(),r=>new hk(e,this.client,this._canReconnect,ot.create(this.subLogger,"ConnectionManager"),r));return n.inbound.pause(),n.inboundSignal.pause(),n.on("connect",(r,i)=>{var s;this._audience.clear();for(const a of(s=r.initialClients)!==null&&s!==void 0?s:[])this._audience.addMember(a.clientId,a.client);this.connectionStateHandler.receivedConnectEvent(this.connectionMode,r)}),n.on("disconnect",r=>{var i;(i=this.collabWindowTracker)===null||i===void 0||i.stopSequenceNumberUpdate(),this.connectionStateHandler.receivedDisconnectEvent(r)}),n.on("throttled",r=>{const i=r;i.logged!==!0&&this.logContainerError(i),this.emit("warning",i)}),n.on("readonly",r=>{this.emit("readonly",r)}),n.on("closed",r=>{this.closeCore(r)}),n}async attachDeltaManagerOpHandler(e,n){var r;return this._deltaManager.attachOpHandler(e.minimumSequenceNumber,e.sequenceNumber,(r=e.term)!==null&&r!==void 0?r:1,{process:i=>this.processRemoteMessage(i),processSignal:i=>{this.processSignal(i)}},n)}logConnectionStateChangeTelemetry(e,n,r){var i;const s=st.now();this.connectionTransitionTimes[e]=s;const a=s-this.connectionTransitionTimes[n];let o,l,c,u,d;e===At.Disconnected?c=this._deltaManager.connectionManager.reconnectMode:(e===At.Connected?(o=s-this.connectionTransitionTimes[At.Disconnected],o=dn.formatTick(o)):(u=this.deltaManager.lastKnownSeqNumber,this.deltaManager.hasCheckpointSequenceNumber&&(d=u-this.deltaManager.lastSequenceNumber)),this.firstConnection?l="InitialConnect":l="AutoReconnect"),this.mc.logger.sendPerformanceEvent(Object.assign({eventName:`ConnectionStateChange_${At[e]}`,from:At[n],duration:a,durationFromDisconnected:o,reason:r,connectionInitiationReason:l,pendingClientId:this.connectionStateHandler.pendingClientId,clientId:this.clientId,autoReconnect:c,opsBehind:d,online:Wo[ck()],lastVisible:this.lastVisible!==void 0?st.now()-this.lastVisible:void 0,checkpointSequenceNumber:u,quorumSize:(i=this._protocolHandler)===null||i===void 0?void 0:i.quorum.getMembers().size},this._deltaManager.connectionProps)),e===At.Connected&&(this.firstConnection=!1)}propagateConnectionState(){var e;const n=this.connectionState===At.Connected&&!this.firstConnection&&this.connectionMode==="write";n&&(this.messageCountAfterDisconnection=0);const r=this.connectionState===At.Connected;((e=this._context)===null||e===void 0?void 0:e.disposed)===!1&&this.context.setConnectionState(r,this.clientId),this.protocolHandler.setConnectionState(r,this.clientId),nk(this.mc.logger,this,r,this.clientId),n&&this.mc.logger.sendTelemetryEvent({eventName:"OpsSentOnReconnect",count:this.messageCountAfterDisconnection})}submitContainerMessage(e,n,r,i){switch(e){case et.Operation:case et.RemoteHelp:break;case et.Summarize:{const a=n;a.details===void 0&&(a.details={}),a.details.includesProtocolTree=this.options.summarizeProtocolTree===!0;break}default:return this.close(new Ya("invalidContainerSubmitOpType",void 0,{messageType:e})),-1}return this.submitMessage(e,n,r,i)}submitMessage(e,n,r,i){var s;return this.connectionState!==At.Connected?(this.mc.logger.sendErrorEvent({eventName:"SubmitMessageWithNoConnection",type:e}),-1):(this.messageCountAfterDisconnection+=1,(s=this.collabWindowTracker)===null||s===void 0||s.stopSequenceNumberUpdate(),this._deltaManager.submit(e,n,r,i))}processRemoteMessage(e){const n=this.clientId===e.clientId;let r={immediateNoOp:!1};try{r=this.protocolHandler.processMessage(e,n)}catch(i){this.close(Zb(i,s=>new da(s,Rc(e))))}return Cp(e)&&!wp(e)&&this.mc.logger.sendTelemetryEvent({eventName:"UnpackedRuntimeMessage",type:e.type}),(wp(e)||Cp(e))&&this.context.process(e,n,void 0),this.activeConnection()&&(this.collabWindowTracker===void 0&&(N(this.serviceConfiguration!==void 0,740),this.collabWindowTracker=new kAe((i,s)=>{N(this.activeConnection(),577),this.submitMessage(i,s)},this.serviceConfiguration.noopTimeFrequency,this.serviceConfiguration.noopCountFrequency)),this.collabWindowTracker.scheduleSequenceNumberUpdate(e,r.immediateNoOp===!0)),this.emit("op",e),r}submitSignal(e){this._deltaManager.submitSignal(JSON.stringify(e))}processSignal(e){if(e.clientId===null){const n=e.content;if(n.type===et.ClientJoin){const r=n.content;this._audience.addMember(r.clientId,r.client)}else if(n.type===et.ClientLeave){const r=n.content;this._audience.removeMember(r)}}else{const n=this.clientId===e.clientId;this.context.processSignal(e,n)}}async fetchSnapshotTree(e){var n;const r=await this.getVersion(e??null);r===void 0&&e!==void 0&&this.mc.logger.sendErrorEvent({eventName:"NoVersionFoundWhenSpecified",id:e}),this._loadedFromVersion=r;const i=(n=await this.storageService.getSnapshotTree(r))!==null&&n!==void 0?n:void 0;return i===void 0&&r!==void 0&&this.mc.logger.sendErrorEvent({eventName:"getSnapshotTreeFailed",id:r.id}),{snapshot:i,versionId:r==null?void 0:r.id}}async instantiateContextDetached(e,n){const r=this.getCodeDetailsFromQuorum();if(r===void 0)throw new Error("pkg should be provided in create flow!!");await this.instantiateContext(e,r,n)}async instantiateContext(e,n,r,i){var s;N(((s=this._context)===null||s===void 0?void 0:s.disposed)!==!1,221);const a=new pAe(this,this.loader);this._context=await dk.createOrLoad(this,this.scope,this.codeLoader,n,r,new hAe(this._deltaManager),new CAe(this.protocolHandler.quorum),a,(o,l,c,u)=>this.submitContainerMessage(o,l,c,u),o=>this.submitSignal(o),o=>this.close(o),ra.version,o=>this.updateDirtyContainerState(o),e,i),this.emit("contextChanged",n)}updateDirtyContainerState(e){this._dirtyContainer!==e&&(this._dirtyContainer=e,this.emit(e?SO:ix))}logContainerError(e){this.mc.logger.sendErrorEvent({eventName:"ContainerWarning"},e)}}ra.version="^0.1.0";/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const MAe=2e3;class NAe{constructor(e,n,r,i){this.tenantId=e,this.id=n,this.deltaStorageService=r,this.documentStorageService=i,this.logtailSha=this.documentStorageService.logTailSha}fetchMessages(e,n,r,i,s){return i?eAe:Z5e(this.getCore.bind(this),1,e,n,MAe,new U_e,r,s)}async getCore(e,n){const r=this.logtailSha?await zn(this.documentStorageService,this.logtailSha):[];if(this.logtailSha=void 0,r.length>0){const i=r.filter(s=>s.sequenceNumber>=e);if(i.length>0)return{messages:i,partialResult:!0}}return this.deltaStorageService.get(this.tenantId,this.id,e,n)}}class FAe{constructor(e,n,r,i=async()=>this.restWrapper,s=()=>this.url){this.url=e,this.restWrapper=n,this.logger=r,this.getRestWrapper=i,this.getDeltaStorageUrl=s}async get(e,n,r,i){return{messages:await gt.timedExecAsync(this.logger,{eventName:"getDeltas",from:r,to:i},async a=>{const o=await this.getRestWrapper(),l=this.getDeltaStorageUrl(),c=await o.get(l,{from:r-1,to:i});return a.end({count:c.length}),c}),partialResult:!1}}}var Ep={};Ep.userAgent=!1;var lu={};/*! CryptoJS v3.1.2 core-fix.js
 * code.google.com/p/crypto-js
 * (c) 2009-2013 by Jeff Mott. All rights reserved.
 * code.google.com/p/crypto-js/wiki/License
 * THIS IS FIX of 'core.js' to fix Hmac issue.
 * https://code.google.com/p/crypto-js/issues/detail?id=84
 * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
 */var Ae=Ae||function(t,e){var n={},r=n.lib={},i=r.Base=function(){function h(){}return{extend:function(p){h.prototype=this;var f=new h;return p&&f.mixIn(p),f.hasOwnProperty("init")||(f.init=function(){f.$super.init.apply(this,arguments)}),f.init.prototype=f,f.$super=this,f},create:function(){var p=this.extend();return p.init.apply(p,arguments),p},init:function(){},mixIn:function(p){for(var f in p)p.hasOwnProperty(f)&&(this[f]=p[f]);p.hasOwnProperty("toString")&&(this.toString=p.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=r.WordArray=i.extend({init:function(h,p){h=this.words=h||[],p!=e?this.sigBytes=p:this.sigBytes=h.length*4},toString:function(h){return(h||o).stringify(this)},concat:function(h){var p=this.words,f=h.words,m=this.sigBytes,g=h.sigBytes;if(this.clamp(),m%4)for(var v=0;v<g;v++){var y=f[v>>>2]>>>24-v%4*8&255;p[m+v>>>2]|=y<<24-(m+v)%4*8}else for(var v=0;v<g;v+=4)p[m+v>>>2]=f[v>>>2];return this.sigBytes+=g,this},clamp:function(){var h=this.words,p=this.sigBytes;h[p>>>2]&=4294967295<<32-p%4*8,h.length=t.ceil(p/4)},clone:function(){var h=i.clone.call(this);return h.words=this.words.slice(0),h},random:function(h){for(var p=[],f=0;f<h;f+=4)p.push(t.random()*4294967296|0);return new s.init(p,h)}}),a=n.enc={},o=a.Hex={stringify:function(h){for(var p=h.words,f=h.sigBytes,m=[],g=0;g<f;g++){var v=p[g>>>2]>>>24-g%4*8&255;m.push((v>>>4).toString(16)),m.push((v&15).toString(16))}return m.join("")},parse:function(h){for(var p=h.length,f=[],m=0;m<p;m+=2)f[m>>>3]|=parseInt(h.substr(m,2),16)<<24-m%8*4;return new s.init(f,p/2)}},l=a.Latin1={stringify:function(h){for(var p=h.words,f=h.sigBytes,m=[],g=0;g<f;g++){var v=p[g>>>2]>>>24-g%4*8&255;m.push(String.fromCharCode(v))}return m.join("")},parse:function(h){for(var p=h.length,f=[],m=0;m<p;m++)f[m>>>2]|=(h.charCodeAt(m)&255)<<24-m%4*8;return new s.init(f,p)}},c=a.Utf8={stringify:function(h){try{return decodeURIComponent(escape(l.stringify(h)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(h){return l.parse(unescape(encodeURIComponent(h)))}},u=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(h){typeof h=="string"&&(h=c.parse(h)),this._data.concat(h),this._nDataBytes+=h.sigBytes},_process:function(h){var p=this._data,f=p.words,m=p.sigBytes,g=this.blockSize,v=g*4,y=m/v;h?y=t.ceil(y):y=t.max((y|0)-this._minBufferSize,0);var b=y*g,C=t.min(b*4,m);if(b){for(var R=0;R<b;R+=g)this._doProcessBlock(f,R);var w=f.splice(0,b);p.sigBytes-=C}return new s.init(w,C)},clone:function(){var h=i.clone.call(this);return h._data=this._data.clone(),h},_minBufferSize:0});r.Hasher=u.extend({cfg:i.extend(),init:function(h){this.cfg=this.cfg.extend(h),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(h){return this._append(h),this._process(),this},finalize:function(h){h&&this._append(h);var p=this._doFinalize();return p},blockSize:512/32,_createHelper:function(h){return function(p,f){return new h.init(f).finalize(p)}},_createHmacHelper:function(h){return function(p,f){return new d.HMAC.init(h,f).finalize(p)}}});var d=n.algo={};return n}(Math);(function(t){var i=Ae,e=i.lib,n=e.Base,r=e.WordArray,i=i.x64={};i.Word=n.extend({init:function(s,a){this.high=s,this.low=a}}),i.WordArray=n.extend({init:function(s,a){s=this.words=s||[],this.sigBytes=a!=t?a:8*s.length},toX32:function(){for(var s=this.words,a=s.length,o=[],l=0;l<a;l++){var c=s[l];o.push(c.high),o.push(c.low)}return r.create(o,this.sigBytes)},clone:function(){for(var s=n.clone.call(this),a=s.words=this.words.slice(0),o=a.length,l=0;l<o;l++)a[l]=a[l].clone();return s}})})();Ae.lib.Cipher||function(t){var p=Ae,e=p.lib,n=e.Base,r=e.WordArray,i=e.BufferedBlockAlgorithm,s=p.enc.Base64,a=p.algo.EvpKDF,o=e.Cipher=i.extend({cfg:n.extend(),createEncryptor:function(m,g){return this.create(this._ENC_XFORM_MODE,m,g)},createDecryptor:function(m,g){return this.create(this._DEC_XFORM_MODE,m,g)},init:function(m,g,v){this.cfg=this.cfg.extend(v),this._xformMode=m,this._key=g,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(m){return this._append(m),this._process()},finalize:function(m){return m&&this._append(m),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(m){return{encrypt:function(g,v,y){return(typeof v=="string"?f:h).encrypt(m,g,v,y)},decrypt:function(g,v,y){return(typeof v=="string"?f:h).decrypt(m,g,v,y)}}}});e.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=p.mode={},l=function(m,g,v){var y=this._iv;y?this._iv=t:y=this._prevBlock;for(var b=0;b<v;b++)m[g+b]^=y[b]},c=(e.BlockCipherMode=n.extend({createEncryptor:function(m,g){return this.Encryptor.create(m,g)},createDecryptor:function(m,g){return this.Decryptor.create(m,g)},init:function(m,g){this._cipher=m,this._iv=g}})).extend();c.Encryptor=c.extend({processBlock:function(m,g){var v=this._cipher,y=v.blockSize;l.call(this,m,g,y),v.encryptBlock(m,g),this._prevBlock=m.slice(g,g+y)}}),c.Decryptor=c.extend({processBlock:function(m,g){var v=this._cipher,y=v.blockSize,b=m.slice(g,g+y);v.decryptBlock(m,g),l.call(this,m,g,y),this._prevBlock=b}}),d=d.CBC=c,c=(p.pad={}).Pkcs7={pad:function(m,g){for(var v=4*g,v=v-m.sigBytes%v,y=v<<24|v<<16|v<<8|v,b=[],C=0;C<v;C+=4)b.push(y);v=r.create(b,v),m.concat(v)},unpad:function(m){m.sigBytes-=m.words[m.sigBytes-1>>>2]&255}},e.BlockCipher=o.extend({cfg:o.cfg.extend({mode:d,padding:c}),reset:function(){o.reset.call(this);var g=this.cfg,m=g.iv,g=g.mode;if(this._xformMode==this._ENC_XFORM_MODE)var v=g.createEncryptor;else v=g.createDecryptor,this._minBufferSize=1;this._mode=v.call(g,this,m&&m.words)},_doProcessBlock:function(m,g){this._mode.processBlock(m,g)},_doFinalize:function(){var m=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){m.pad(this._data,this.blockSize);var g=this._process(!0)}else g=this._process(!0),m.unpad(g);return g},blockSize:4});var u=e.CipherParams=n.extend({init:function(m){this.mixIn(m)},toString:function(m){return(m||this.formatter).stringify(this)}}),d=(p.format={}).OpenSSL={stringify:function(m){var g=m.ciphertext;return m=m.salt,(m?r.create([1398893684,1701076831]).concat(m).concat(g):g).toString(s)},parse:function(m){m=s.parse(m);var g=m.words;if(g[0]==1398893684&&g[1]==1701076831){var v=r.create(g.slice(2,4));g.splice(0,4),m.sigBytes-=16}return u.create({ciphertext:m,salt:v})}},h=e.SerializableCipher=n.extend({cfg:n.extend({format:d}),encrypt:function(m,g,v,y){y=this.cfg.extend(y);var b=m.createEncryptor(v,y);return g=b.finalize(g),b=b.cfg,u.create({ciphertext:g,key:v,iv:b.iv,algorithm:m,mode:b.mode,padding:b.padding,blockSize:m.blockSize,formatter:y.format})},decrypt:function(m,g,v,y){return y=this.cfg.extend(y),g=this._parse(g,y.format),m.createDecryptor(v,y).finalize(g.ciphertext)},_parse:function(m,g){return typeof m=="string"?g.parse(m,this):m}}),p=(p.kdf={}).OpenSSL={execute:function(m,g,v,y){return y||(y=r.random(8)),m=a.create({keySize:g+v}).compute(m,y),v=r.create(m.words.slice(g),4*v),m.sigBytes=4*g,u.create({key:m,iv:v,salt:y})}},f=e.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:p}),encrypt:function(m,g,v,y){return y=this.cfg.extend(y),v=y.kdf.execute(v,m.keySize,m.ivSize),y.iv=v.iv,m=h.encrypt.call(this,m,g,v.key,y),m.mixIn(v),m},decrypt:function(m,g,v,y){return y=this.cfg.extend(y),g=this._parse(g,y.format),v=y.kdf.execute(v,m.keySize,m.ivSize,g.salt),y.iv=v.iv,h.decrypt.call(this,m,g,v.key,y)}})}();(function(){for(var t=Ae,e=t.lib.BlockCipher,w=t.algo,n=[],r=[],i=[],s=[],a=[],o=[],l=[],c=[],u=[],d=[],h=[],p=0;256>p;p++)h[p]=128>p?p<<1:p<<1^283;for(var f=0,m=0,p=0;256>p;p++){var g=m^m<<1^m<<2^m<<3^m<<4,g=g>>>8^g&255^99;n[f]=g,r[g]=f;var v=h[f],y=h[v],b=h[y],C=257*h[g]^16843008*g;i[f]=C<<24|C>>>8,s[f]=C<<16|C>>>16,a[f]=C<<8|C>>>24,o[f]=C,C=16843009*b^65537*y^257*v^16843008*f,l[g]=C<<24|C>>>8,c[g]=C<<16|C>>>16,u[g]=C<<8|C>>>24,d[g]=C,f?(f=v^h[h[h[b^v]]],m^=h[h[m]]):f=m=1}var R=[0,1,2,4,8,16,32,64,128,27,54],w=w.AES=e.extend({_doReset:function(){for(var T=this._key,E=T.words,k=T.sigBytes/4,T=4*((this._nRounds=k+6)+1),_=this._keySchedule=[],D=0;D<T;D++)if(D<k)_[D]=E[D];else{var I=_[D-1];D%k?6<k&&D%k==4&&(I=n[I>>>24]<<24|n[I>>>16&255]<<16|n[I>>>8&255]<<8|n[I&255]):(I=I<<8|I>>>24,I=n[I>>>24]<<24|n[I>>>16&255]<<16|n[I>>>8&255]<<8|n[I&255],I^=R[D/k|0]<<24),_[D]=_[D-k]^I}for(E=this._invKeySchedule=[],k=0;k<T;k++)D=T-k,I=k%4?_[D]:_[D-4],E[k]=4>k||4>=D?I:l[n[I>>>24]]^c[n[I>>>16&255]]^u[n[I>>>8&255]]^d[n[I&255]]},encryptBlock:function(E,k){this._doCryptBlock(E,k,this._keySchedule,i,s,a,o,n)},decryptBlock:function(E,k){var T=E[k+1];E[k+1]=E[k+3],E[k+3]=T,this._doCryptBlock(E,k,this._invKeySchedule,l,c,u,d,r),T=E[k+1],E[k+1]=E[k+3],E[k+3]=T},_doCryptBlock:function(E,k,T,_,D,I,M,A){for(var O=this._nRounds,U=E[k]^T[0],ne=E[k+1]^T[1],W=E[k+2]^T[2],V=E[k+3]^T[3],L=4,F=1;F<O;F++)var B=_[U>>>24]^D[ne>>>16&255]^I[W>>>8&255]^M[V&255]^T[L++],j=_[ne>>>24]^D[W>>>16&255]^I[V>>>8&255]^M[U&255]^T[L++],q=_[W>>>24]^D[V>>>16&255]^I[U>>>8&255]^M[ne&255]^T[L++],V=_[V>>>24]^D[U>>>16&255]^I[ne>>>8&255]^M[W&255]^T[L++],U=B,ne=j,W=q;B=(A[U>>>24]<<24|A[ne>>>16&255]<<16|A[W>>>8&255]<<8|A[V&255])^T[L++],j=(A[ne>>>24]<<24|A[W>>>16&255]<<16|A[V>>>8&255]<<8|A[U&255])^T[L++],q=(A[W>>>24]<<24|A[V>>>16&255]<<16|A[U>>>8&255]<<8|A[ne&255])^T[L++],V=(A[V>>>24]<<24|A[U>>>16&255]<<16|A[ne>>>8&255]<<8|A[W&255])^T[L++],E[k]=B,E[k+1]=j,E[k+2]=q,E[k+3]=V},keySize:8});t.AES=e._createHelper(w)})();(function(){function t(h,p){var f=(this._lBlock>>>h^this._rBlock)&p;this._rBlock^=f,this._lBlock^=f<<h}function e(h,p){var f=(this._rBlock>>>h^this._lBlock)&p;this._lBlock^=f,this._rBlock^=f<<h}var n=Ae,i=n.lib,r=i.WordArray,i=i.BlockCipher,s=n.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=s.DES=i.extend({_doReset:function(){for(var h=this._key.words,p=[],f=0;56>f;f++){var m=a[f]-1;p[f]=h[m>>>5]>>>31-m%32&1}for(h=this._subKeys=[],m=0;16>m;m++){for(var g=h[m]=[],v=l[m],f=0;24>f;f++)g[f/6|0]|=p[(o[f]-1+v)%28]<<31-f%6,g[4+(f/6|0)]|=p[28+(o[f+24]-1+v)%28]<<31-f%6;for(g[0]=g[0]<<1|g[0]>>>31,f=1;7>f;f++)g[f]>>>=4*(f-1)+3;g[7]=g[7]<<5|g[7]>>>27}for(p=this._invSubKeys=[],f=0;16>f;f++)p[f]=h[15-f]},encryptBlock:function(h,p){this._doCryptBlock(h,p,this._subKeys)},decryptBlock:function(h,p){this._doCryptBlock(h,p,this._invSubKeys)},_doCryptBlock:function(h,p,f){this._lBlock=h[p],this._rBlock=h[p+1],t.call(this,4,252645135),t.call(this,16,65535),e.call(this,2,858993459),e.call(this,8,16711935),t.call(this,1,1431655765);for(var m=0;16>m;m++){for(var g=f[m],v=this._lBlock,y=this._rBlock,b=0,C=0;8>C;C++)b|=c[C][((y^g[C])&u[C])>>>0];this._lBlock=y,this._rBlock=v^b}f=this._lBlock,this._lBlock=this._rBlock,this._rBlock=f,t.call(this,1,1431655765),e.call(this,8,16711935),e.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),h[p]=this._lBlock,h[p+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});n.DES=i._createHelper(d),s=s.TripleDES=i.extend({_doReset:function(){var h=this._key.words;this._des1=d.createEncryptor(r.create(h.slice(0,2))),this._des2=d.createEncryptor(r.create(h.slice(2,4))),this._des3=d.createEncryptor(r.create(h.slice(4,6)))},encryptBlock:function(h,p){this._des1.encryptBlock(h,p),this._des2.decryptBlock(h,p),this._des3.encryptBlock(h,p)},decryptBlock:function(h,p){this._des3.decryptBlock(h,p),this._des2.encryptBlock(h,p),this._des1.decryptBlock(h,p)},keySize:6,ivSize:2,blockSize:2}),n.TripleDES=i._createHelper(s)})();(function(){var t=Ae,e=t.lib.WordArray;t.enc.Base64={stringify:function(n){var r=n.words,i=n.sigBytes,s=this._map;n.clamp(),n=[];for(var a=0;a<i;a+=3)for(var o=(r[a>>>2]>>>24-8*(a%4)&255)<<16|(r[a+1>>>2]>>>24-8*((a+1)%4)&255)<<8|r[a+2>>>2]>>>24-8*((a+2)%4)&255,l=0;4>l&&a+.75*l<i;l++)n.push(s.charAt(o>>>6*(3-l)&63));if(r=s.charAt(64))for(;n.length%4;)n.push(r);return n.join("")},parse:function(n){var r=n.length,i=this._map,s=i.charAt(64);s&&(s=n.indexOf(s),s!=-1&&(r=s));for(var s=[],a=0,o=0;o<r;o++)if(o%4){var l=i.indexOf(n.charAt(o-1))<<2*(o%4),c=i.indexOf(n.charAt(o))>>>6-2*(o%4);s[a>>>2]|=(l|c)<<24-8*(a%4),a++}return e.create(s,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(t){function e(d,h,p,f,m,g,v){return d=d+(h&p|~h&f)+m+v,(d<<g|d>>>32-g)+h}function n(d,h,p,f,m,g,v){return d=d+(h&f|p&~f)+m+v,(d<<g|d>>>32-g)+h}function r(d,h,p,f,m,g,v){return d=d+(h^p^f)+m+v,(d<<g|d>>>32-g)+h}function i(d,h,p,f,m,g,v){return d=d+(p^(h|~f))+m+v,(d<<g|d>>>32-g)+h}for(var s=Ae,l=s.lib,a=l.WordArray,o=l.Hasher,l=s.algo,c=[],u=0;64>u;u++)c[u]=4294967296*t.abs(t.sin(u+1))|0;l=l.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(d,h){for(var p=0;16>p;p++){var f=h+p,m=d[f];d[f]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360}var p=this._hash.words,f=d[h+0],m=d[h+1],g=d[h+2],v=d[h+3],y=d[h+4],b=d[h+5],C=d[h+6],R=d[h+7],w=d[h+8],E=d[h+9],k=d[h+10],T=d[h+11],_=d[h+12],D=d[h+13],I=d[h+14],M=d[h+15],A=p[0],F=p[1],L=p[2],O=p[3],A=e(A,F,L,O,f,7,c[0]),O=e(O,A,F,L,m,12,c[1]),L=e(L,O,A,F,g,17,c[2]),F=e(F,L,O,A,v,22,c[3]),A=e(A,F,L,O,y,7,c[4]),O=e(O,A,F,L,b,12,c[5]),L=e(L,O,A,F,C,17,c[6]),F=e(F,L,O,A,R,22,c[7]),A=e(A,F,L,O,w,7,c[8]),O=e(O,A,F,L,E,12,c[9]),L=e(L,O,A,F,k,17,c[10]),F=e(F,L,O,A,T,22,c[11]),A=e(A,F,L,O,_,7,c[12]),O=e(O,A,F,L,D,12,c[13]),L=e(L,O,A,F,I,17,c[14]),F=e(F,L,O,A,M,22,c[15]),A=n(A,F,L,O,m,5,c[16]),O=n(O,A,F,L,C,9,c[17]),L=n(L,O,A,F,T,14,c[18]),F=n(F,L,O,A,f,20,c[19]),A=n(A,F,L,O,b,5,c[20]),O=n(O,A,F,L,k,9,c[21]),L=n(L,O,A,F,M,14,c[22]),F=n(F,L,O,A,y,20,c[23]),A=n(A,F,L,O,E,5,c[24]),O=n(O,A,F,L,I,9,c[25]),L=n(L,O,A,F,v,14,c[26]),F=n(F,L,O,A,w,20,c[27]),A=n(A,F,L,O,D,5,c[28]),O=n(O,A,F,L,g,9,c[29]),L=n(L,O,A,F,R,14,c[30]),F=n(F,L,O,A,_,20,c[31]),A=r(A,F,L,O,b,4,c[32]),O=r(O,A,F,L,w,11,c[33]),L=r(L,O,A,F,T,16,c[34]),F=r(F,L,O,A,I,23,c[35]),A=r(A,F,L,O,m,4,c[36]),O=r(O,A,F,L,y,11,c[37]),L=r(L,O,A,F,R,16,c[38]),F=r(F,L,O,A,k,23,c[39]),A=r(A,F,L,O,D,4,c[40]),O=r(O,A,F,L,f,11,c[41]),L=r(L,O,A,F,v,16,c[42]),F=r(F,L,O,A,C,23,c[43]),A=r(A,F,L,O,E,4,c[44]),O=r(O,A,F,L,_,11,c[45]),L=r(L,O,A,F,M,16,c[46]),F=r(F,L,O,A,g,23,c[47]),A=i(A,F,L,O,f,6,c[48]),O=i(O,A,F,L,R,10,c[49]),L=i(L,O,A,F,I,15,c[50]),F=i(F,L,O,A,b,21,c[51]),A=i(A,F,L,O,_,6,c[52]),O=i(O,A,F,L,v,10,c[53]),L=i(L,O,A,F,k,15,c[54]),F=i(F,L,O,A,m,21,c[55]),A=i(A,F,L,O,w,6,c[56]),O=i(O,A,F,L,M,10,c[57]),L=i(L,O,A,F,C,15,c[58]),F=i(F,L,O,A,D,21,c[59]),A=i(A,F,L,O,y,6,c[60]),O=i(O,A,F,L,T,10,c[61]),L=i(L,O,A,F,g,15,c[62]),F=i(F,L,O,A,E,21,c[63]);p[0]=p[0]+A|0,p[1]=p[1]+F|0,p[2]=p[2]+L|0,p[3]=p[3]+O|0},_doFinalize:function(){var d=this._data,h=d.words,p=8*this._nDataBytes,f=8*d.sigBytes;h[f>>>5]|=128<<24-f%32;var m=t.floor(p/4294967296);for(h[(f+64>>>9<<4)+15]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,h[(f+64>>>9<<4)+14]=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,d.sigBytes=4*(h.length+1),this._process(),d=this._hash,h=d.words,p=0;4>p;p++)f=h[p],h[p]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360;return d},clone:function(){var d=o.clone.call(this);return d._hash=this._hash.clone(),d}}),s.MD5=o._createHelper(l),s.HmacMD5=o._createHmacHelper(l)})(Math);(function(){var t=Ae,i=t.lib,e=i.WordArray,n=i.Hasher,r=[],i=t.algo.SHA1=n.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(s,a){for(var o=this._hash.words,l=o[0],c=o[1],u=o[2],d=o[3],h=o[4],p=0;80>p;p++){if(16>p)r[p]=s[a+p]|0;else{var f=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=f<<1|f>>>31}f=(l<<5|l>>>27)+h+r[p],f=20>p?f+((c&u|~c&d)+1518500249):40>p?f+((c^u^d)+1859775393):60>p?f+((c&u|c&d|u&d)-1894007588):f+((c^u^d)-899497514),h=d,d=u,u=c<<30|c>>>2,c=l,l=f}o[0]=o[0]+l|0,o[1]=o[1]+c|0,o[2]=o[2]+u|0,o[3]=o[3]+d|0,o[4]=o[4]+h|0},_doFinalize:function(){var s=this._data,a=s.words,o=8*this._nDataBytes,l=8*s.sigBytes;return a[l>>>5]|=128<<24-l%32,a[(l+64>>>9<<4)+14]=Math.floor(o/4294967296),a[(l+64>>>9<<4)+15]=o,s.sigBytes=4*a.length,this._process(),this._hash},clone:function(){var s=n.clone.call(this);return s._hash=this._hash.clone(),s}});t.SHA1=n._createHelper(i),t.HmacSHA1=n._createHmacHelper(i)})();(function(t){for(var e=Ae,p=e.lib,n=p.WordArray,r=p.Hasher,p=e.algo,i=[],s=[],a=function(m){return 4294967296*(m-(m|0))|0},o=2,l=0;64>l;){var c;e:{c=o;for(var u=t.sqrt(c),d=2;d<=u;d++)if(!(c%d)){c=!1;break e}c=!0}c&&(8>l&&(i[l]=a(t.pow(o,.5))),s[l]=a(t.pow(o,1/3)),l++),o++}var h=[],p=p.SHA256=r.extend({_doReset:function(){this._hash=new n.init(i.slice(0))},_doProcessBlock:function(f,m){for(var g=this._hash.words,v=g[0],y=g[1],b=g[2],C=g[3],R=g[4],w=g[5],E=g[6],k=g[7],T=0;64>T;T++){if(16>T)h[T]=f[m+T]|0;else{var _=h[T-15],D=h[T-2];h[T]=((_<<25|_>>>7)^(_<<14|_>>>18)^_>>>3)+h[T-7]+((D<<15|D>>>17)^(D<<13|D>>>19)^D>>>10)+h[T-16]}_=k+((R<<26|R>>>6)^(R<<21|R>>>11)^(R<<7|R>>>25))+(R&w^~R&E)+s[T]+h[T],D=((v<<30|v>>>2)^(v<<19|v>>>13)^(v<<10|v>>>22))+(v&y^v&b^y&b),k=E,E=w,w=R,R=C+_|0,C=b,b=y,y=v,v=_+D|0}g[0]=g[0]+v|0,g[1]=g[1]+y|0,g[2]=g[2]+b|0,g[3]=g[3]+C|0,g[4]=g[4]+R|0,g[5]=g[5]+w|0,g[6]=g[6]+E|0,g[7]=g[7]+k|0},_doFinalize:function(){var f=this._data,m=f.words,g=8*this._nDataBytes,v=8*f.sigBytes;return m[v>>>5]|=128<<24-v%32,m[(v+64>>>9<<4)+14]=t.floor(g/4294967296),m[(v+64>>>9<<4)+15]=g,f.sigBytes=4*m.length,this._process(),this._hash},clone:function(){var f=r.clone.call(this);return f._hash=this._hash.clone(),f}});e.SHA256=r._createHelper(p),e.HmacSHA256=r._createHmacHelper(p)})(Math);(function(){var t=Ae,e=t.lib.WordArray,r=t.algo,n=r.SHA256,r=r.SHA224=n.extend({_doReset:function(){this._hash=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var i=n._doFinalize.call(this);return i.sigBytes-=4,i}});t.SHA224=n._createHelper(r),t.HmacSHA224=n._createHmacHelper(r)})();(function(){function t(){return r.create.apply(r,arguments)}for(var e=Ae,n=e.lib.Hasher,s=e.x64,r=s.Word,i=s.WordArray,s=e.algo,a=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],o=[],l=0;80>l;l++)o[l]=t();s=s.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(c,u){for(var y=this._hash.words,d=y[0],h=y[1],p=y[2],f=y[3],m=y[4],g=y[5],v=y[6],y=y[7],b=d.high,C=d.low,R=h.high,w=h.low,E=p.high,k=p.low,T=f.high,_=f.low,D=m.high,I=m.low,M=g.high,A=g.low,O=v.high,L=v.low,F=y.high,B=y.low,j=b,q=C,V=R,U=w,ne=E,W=k,J=T,K=_,Q=D,re=I,G=M,ie=A,te=O,Z=L,oe=F,ue=B,me=0;80>me;me++){var He=o[me];if(16>me)var H=He.high=c[u+2*me]|0,De=He.low=c[u+2*me+1]|0;else{var H=o[me-15],De=H.high,se=H.low,H=(De>>>1|se<<31)^(De>>>8|se<<24)^De>>>7,se=(se>>>1|De<<31)^(se>>>8|De<<24)^(se>>>7|De<<25),ae=o[me-2],De=ae.high,Ee=ae.low,ae=(De>>>19|Ee<<13)^(De<<3|Ee>>>29)^De>>>6,Ee=(Ee>>>19|De<<13)^(Ee<<3|De>>>29)^(Ee>>>6|De<<26),De=o[me-7],Y=De.high,X=o[me-16],Oe=X.high,X=X.low,De=se+De.low,H=H+Y+(De>>>0<se>>>0?1:0),De=De+Ee,H=H+ae+(De>>>0<Ee>>>0?1:0),De=De+X,H=H+Oe+(De>>>0<X>>>0?1:0);He.high=H,He.low=De}var Y=Q&G^~Q&te,X=re&ie^~re&Z,He=j&V^j&ne^V&ne,le=q&U^q&W^U&W,se=(j>>>28|q<<4)^(j<<30|q>>>2)^(j<<25|q>>>7),ae=(q>>>28|j<<4)^(q<<30|j>>>2)^(q<<25|j>>>7),Ee=a[me],ve=Ee.high,ke=Ee.low,Ee=ue+((re>>>14|Q<<18)^(re>>>18|Q<<14)^(re<<23|Q>>>9)),Oe=oe+((Q>>>14|re<<18)^(Q>>>18|re<<14)^(Q<<23|re>>>9))+(Ee>>>0<ue>>>0?1:0),Ee=Ee+X,Oe=Oe+Y+(Ee>>>0<X>>>0?1:0),Ee=Ee+ke,Oe=Oe+ve+(Ee>>>0<ke>>>0?1:0),Ee=Ee+De,Oe=Oe+H+(Ee>>>0<De>>>0?1:0),De=ae+le,He=se+He+(De>>>0<ae>>>0?1:0),oe=te,ue=Z,te=G,Z=ie,G=Q,ie=re,re=K+Ee|0,Q=J+Oe+(re>>>0<K>>>0?1:0)|0,J=ne,K=W,ne=V,W=U,V=j,U=q,q=Ee+De|0,j=Oe+He+(q>>>0<Ee>>>0?1:0)|0}C=d.low=C+q,d.high=b+j+(C>>>0<q>>>0?1:0),w=h.low=w+U,h.high=R+V+(w>>>0<U>>>0?1:0),k=p.low=k+W,p.high=E+ne+(k>>>0<W>>>0?1:0),_=f.low=_+K,f.high=T+J+(_>>>0<K>>>0?1:0),I=m.low=I+re,m.high=D+Q+(I>>>0<re>>>0?1:0),A=g.low=A+ie,g.high=M+G+(A>>>0<ie>>>0?1:0),L=v.low=L+Z,v.high=O+te+(L>>>0<Z>>>0?1:0),B=y.low=B+ue,y.high=F+oe+(B>>>0<ue>>>0?1:0)},_doFinalize:function(){var c=this._data,u=c.words,d=8*this._nDataBytes,h=8*c.sigBytes;return u[h>>>5]|=128<<24-h%32,u[(h+128>>>10<<5)+30]=Math.floor(d/4294967296),u[(h+128>>>10<<5)+31]=d,c.sigBytes=4*u.length,this._process(),this._hash.toX32()},clone:function(){var c=n.clone.call(this);return c._hash=this._hash.clone(),c},blockSize:32}),e.SHA512=n._createHelper(s),e.HmacSHA512=n._createHmacHelper(s)})();(function(){var t=Ae,i=t.x64,e=i.Word,n=i.WordArray,i=t.algo,r=i.SHA512,i=i.SHA384=r.extend({_doReset:function(){this._hash=new n.init([new e.init(3418070365,3238371032),new e.init(1654270250,914150663),new e.init(2438529370,812702999),new e.init(355462360,4144912697),new e.init(1731405415,4290775857),new e.init(2394180231,1750603025),new e.init(3675008525,1694076839),new e.init(1203062813,3204075428)])},_doFinalize:function(){var s=r._doFinalize.call(this);return s.sigBytes-=16,s}});t.SHA384=r._createHelper(i),t.HmacSHA384=r._createHmacHelper(i)})();(function(){var t=Ae,c=t.lib,e=c.WordArray,n=c.Hasher,c=t.algo,r=e.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),i=e.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),s=e.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),a=e.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),o=e.create([0,1518500249,1859775393,2400959708,2840853838]),l=e.create([1352829926,1548603684,1836072691,2053994217,0]),c=c.RIPEMD160=n.extend({_doReset:function(){this._hash=e.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,d){for(var h=0;16>h;h++){var p=d+h,f=u[p];u[p]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360}var p=this._hash.words,f=o.words,m=l.words,g=r.words,v=i.words,y=s.words,b=a.words,C,R,w,E,k,T,_,D,I,M;T=C=p[0],_=R=p[1],D=w=p[2],I=E=p[3],M=k=p[4];for(var A,h=0;80>h;h+=1)A=C+u[d+g[h]]|0,A=16>h?A+((R^w^E)+f[0]):32>h?A+((R&w|~R&E)+f[1]):48>h?A+(((R|~w)^E)+f[2]):64>h?A+((R&E|w&~E)+f[3]):A+((R^(w|~E))+f[4]),A|=0,A=A<<y[h]|A>>>32-y[h],A=A+k|0,C=k,k=E,E=w<<10|w>>>22,w=R,R=A,A=T+u[d+v[h]]|0,A=16>h?A+((_^(D|~I))+m[0]):32>h?A+((_&I|D&~I)+m[1]):48>h?A+(((_|~D)^I)+m[2]):64>h?A+((_&D|~_&I)+m[3]):A+((_^D^I)+m[4]),A|=0,A=A<<b[h]|A>>>32-b[h],A=A+M|0,T=M,M=I,I=D<<10|D>>>22,D=_,_=A;A=p[1]+w+I|0,p[1]=p[2]+E+M|0,p[2]=p[3]+k+T|0,p[3]=p[4]+C+_|0,p[4]=p[0]+R+D|0,p[0]=A},_doFinalize:function(){var u=this._data,d=u.words,h=8*this._nDataBytes,p=8*u.sigBytes;for(d[p>>>5]|=128<<24-p%32,d[(p+64>>>9<<4)+14]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360,u.sigBytes=4*(d.length+1),this._process(),u=this._hash,d=u.words,h=0;5>h;h++)p=d[h],d[h]=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360;return u},clone:function(){var u=n.clone.call(this);return u._hash=this._hash.clone(),u}});t.RIPEMD160=n._createHelper(c),t.HmacRIPEMD160=n._createHmacHelper(c)})();(function(){var t=Ae,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(n,r){n=this._hasher=new n.init,typeof r=="string"&&(r=e.parse(r));var i=n.blockSize,s=4*i;r.sigBytes>s&&(r=n.finalize(r)),r.clamp();for(var a=this._oKey=r.clone(),o=this._iKey=r.clone(),l=a.words,c=o.words,u=0;u<i;u++)l[u]^=1549556828,c[u]^=909522486;a.sigBytes=o.sigBytes=s,this.reset()},reset:function(){var n=this._hasher;n.reset(),n.update(this._iKey)},update:function(n){return this._hasher.update(n),this},finalize:function(n){var r=this._hasher;return n=r.finalize(n),r.reset(),r.finalize(this._oKey.clone().concat(n))}})})();(function(){var t=Ae,r=t.lib,e=r.Base,n=r.WordArray,r=t.algo,i=r.HMAC,s=r.PBKDF2=e.extend({cfg:e.extend({keySize:4,hasher:r.SHA1,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,o){for(var f=this.cfg,l=i.create(f.hasher,a),c=n.create(),u=n.create([1]),d=c.words,h=u.words,p=f.keySize,f=f.iterations;d.length<p;){var m=l.update(o).finalize(u);l.reset();for(var g=m.words,v=g.length,y=m,b=1;b<f;b++){y=l.finalize(y),l.reset();for(var C=y.words,R=0;R<v;R++)g[R]^=C[R]}c.concat(m),h[0]++}return c.sigBytes=4*p,c}});t.PBKDF2=function(a,o,l){return s.create(l).compute(a,o)}})();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var gu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",IB="=";function kf(t){var e,n,r="";for(e=0;e+3<=t.length;e+=3)n=parseInt(t.substring(e,e+3),16),r+=gu.charAt(n>>6)+gu.charAt(n&63);for(e+1==t.length?(n=parseInt(t.substring(e,e+1),16),r+=gu.charAt(n<<2)):e+2==t.length&&(n=parseInt(t.substring(e,e+2),16),r+=gu.charAt(n>>2)+gu.charAt((n&3)<<4));(r.length&3)>0;)r+=IB;return r}function fk(t){var e="",n,r=0,i,s;for(n=0;n<t.length&&t.charAt(n)!=IB;++n)s=gu.indexOf(t.charAt(n)),!(s<0)&&(r==0?(e+=La(s>>2),i=s&3,r=1):r==1?(e+=La(i<<2|s>>4),i=s&15,r=2):r==2?(e+=La(i),e+=La(s>>2),i=s&3,r=3):(e+=La(i<<2|s>>4),e+=La(s&15),r=0));return r==1&&(e+=La(i<<2)),e}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
*/var Go;function ee(t,e,n){t!=null&&(typeof t=="number"?this.fromNumber(t,e,n):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}function vt(){return new ee(null)}function $Ae(t,e,n,r,i,s){for(;--s>=0;){var a=e*this[t++]+n[r]+i;i=Math.floor(a/67108864),n[r++]=a&67108863}return i}function LAe(t,e,n,r,i,s){for(var a=e&32767,o=e>>15;--s>=0;){var l=this[t]&32767,c=this[t++]>>15,u=o*l+c*a;l=a*l+((u&32767)<<15)+n[r]+(i&1073741823),i=(l>>>30)+(u>>>15)+o*c+(i>>>30),n[r++]=l&1073741823}return i}function BAe(t,e,n,r,i,s){for(var a=e&16383,o=e>>14;--s>=0;){var l=this[t]&16383,c=this[t++]>>14,u=o*l+c*a;l=a*l+((u&16383)<<14)+n[r]+i,i=(l>>28)+(u>>14)+o*c,n[r++]=l&268435455}return i}Ep.appName=="Microsoft Internet Explorer"?(ee.prototype.am=LAe,Go=30):Ep.appName!="Netscape"?(ee.prototype.am=$Ae,Go=26):(ee.prototype.am=BAe,Go=28);ee.prototype.DB=Go;ee.prototype.DM=(1<<Go)-1;ee.prototype.DV=1<<Go;var pk=52;ee.prototype.FV=Math.pow(2,pk);ee.prototype.F1=pk-Go;ee.prototype.F2=2*Go-pk;var jAe="0123456789abcdefghijklmnopqrstuvwxyz",n1=new Array,uh,Qi;uh="0".charCodeAt(0);for(Qi=0;Qi<=9;++Qi)n1[uh++]=Qi;uh="a".charCodeAt(0);for(Qi=10;Qi<36;++Qi)n1[uh++]=Qi;uh="A".charCodeAt(0);for(Qi=10;Qi<36;++Qi)n1[uh++]=Qi;function La(t){return jAe.charAt(t)}function MB(t,e){var n=n1[t.charCodeAt(e)];return n??-1}function qAe(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function zAe(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function Oo(t){var e=vt();return e.fromInt(t),e}function HAe(t,e){var n;if(e==16)n=4;else if(e==8)n=3;else if(e==256)n=8;else if(e==2)n=1;else if(e==32)n=5;else if(e==4)n=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var r=t.length,i=!1,s=0;--r>=0;){var a=n==8?t[r]&255:MB(t,r);if(a<0){t.charAt(r)=="-"&&(i=!0);continue}i=!1,s==0?this[this.t++]=a:s+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,s+=n,s>=this.DB&&(s-=this.DB)}n==8&&t[0]&128&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&ee.ZERO.subTo(this,this)}function UAe(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function VAe(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var n=(1<<e)-1,r,i=!1,s="",a=this.t,o=this.DB-a*this.DB%e;if(a-- >0)for(o<this.DB&&(r=this[a]>>o)>0&&(i=!0,s=La(r));a>=0;)o<e?(r=(this[a]&(1<<o)-1)<<e-o,r|=this[--a]>>(o+=this.DB-e)):(r=this[a]>>(o-=e)&n,o<=0&&(o+=this.DB,--a)),r>0&&(i=!0),i&&(s+=La(r));return i?s:"0"}function WAe(){var t=vt();return ee.ZERO.subTo(this,t),t}function GAe(){return this.s<0?this.negate():this}function KAe(t){var e=this.s-t.s;if(e!=0)return e;var n=this.t;if(e=n-t.t,e!=0)return this.s<0?-e:e;for(;--n>=0;)if((e=this[n]-t[n])!=0)return e;return 0}function r1(t){var e=1,n;return(n=t>>>16)!=0&&(t=n,e+=16),(n=t>>8)!=0&&(t=n,e+=8),(n=t>>4)!=0&&(t=n,e+=4),(n=t>>2)!=0&&(t=n,e+=2),(n=t>>1)!=0&&(t=n,e+=1),e}function YAe(){return this.t<=0?0:this.DB*(this.t-1)+r1(this[this.t-1]^this.s&this.DM)}function JAe(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function XAe(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function QAe(t,e){var n=t%this.DB,r=this.DB-n,i=(1<<r)-1,s=Math.floor(t/this.DB),a=this.s<<n&this.DM,o;for(o=this.t-1;o>=0;--o)e[o+s+1]=this[o]>>r|a,a=(this[o]&i)<<n;for(o=s-1;o>=0;--o)e[o]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function ZAe(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t){e.t=0;return}var r=t%this.DB,i=this.DB-r,s=(1<<r)-1;e[0]=this[n]>>r;for(var a=n+1;a<this.t;++a)e[a-n-1]|=(this[a]&s)<<i,e[a-n]=this[a]>>r;r>0&&(e[this.t-n-1]|=(this.s&s)<<i),e.t=this.t-n,e.clamp()}function e3e(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()}function t3e(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e[i]=0;for(i=0;i<r.t;++i)e[i+n.t]=n.am(0,r[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&ee.ZERO.subTo(e,e)}function n3e(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function r3e(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t){e!=null&&e.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=vt());var s=vt(),a=this.s,o=t.s,l=this.DB-r1(r[r.t-1]);l>0?(r.lShiftTo(l,s),i.lShiftTo(l,n)):(r.copyTo(s),i.copyTo(n));var c=s.t,u=s[c-1];if(u!=0){var d=u*(1<<this.F1)+(c>1?s[c-2]>>this.F2:0),h=this.FV/d,p=(1<<this.F1)/d,f=1<<this.F2,m=n.t,g=m-c,v=e??vt();for(s.dlShiftTo(g,v),n.compareTo(v)>=0&&(n[n.t++]=1,n.subTo(v,n)),ee.ONE.dlShiftTo(c,v),v.subTo(s,s);s.t<c;)s[s.t++]=0;for(;--g>=0;){var y=n[--m]==u?this.DM:Math.floor(n[m]*h+(n[m-1]+f)*p);if((n[m]+=s.am(0,y,n,g,0,c))<y)for(s.dlShiftTo(g,v),n.subTo(v,n);n[m]<--y;)n.subTo(v,n)}e!=null&&(n.drShiftTo(c,e),a!=o&&ee.ZERO.subTo(e,e)),n.t=c,n.clamp(),l>0&&n.rShiftTo(l,n),a<0&&ee.ZERO.subTo(n,n)}}}function i3e(t){var e=vt();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(ee.ZERO)>0&&t.subTo(e,e),e}function Uc(t){this.m=t}function s3e(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function a3e(t){return t}function o3e(t){t.divRemTo(this.m,null,t)}function l3e(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function c3e(t,e){t.squareTo(e),this.reduce(e)}Uc.prototype.convert=s3e;Uc.prototype.revert=a3e;Uc.prototype.reduce=o3e;Uc.prototype.mulTo=l3e;Uc.prototype.sqrTo=c3e;function u3e(){if(this.t<1)return 0;var t=this[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Vc(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function d3e(t){var e=vt();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(ee.ZERO)>0&&this.m.subTo(e,e),e}function h3e(t){var e=vt();return t.copyTo(e),this.reduce(e),e}function f3e(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=t[e]&32767,r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t[n]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function p3e(t,e){t.squareTo(e),this.reduce(e)}function m3e(t,e,n){t.multiplyTo(e,n),this.reduce(n)}Vc.prototype.convert=d3e;Vc.prototype.revert=h3e;Vc.prototype.reduce=f3e;Vc.prototype.mulTo=m3e;Vc.prototype.sqrTo=p3e;function g3e(){return(this.t>0?this[0]&1:this.s)==0}function v3e(t,e){if(t>4294967295||t<1)return ee.ONE;var n=vt(),r=vt(),i=e.convert(this),s=r1(t)-1;for(i.copyTo(n);--s>=0;)if(e.sqrTo(n,r),(t&1<<s)>0)e.mulTo(r,i,n);else{var a=n;n=r,r=a}return e.revert(n)}function y3e(t,e){var n;return t<256||e.isEven()?n=new Uc(e):n=new Vc(e),this.exp(t,n)}ee.prototype.copyTo=qAe;ee.prototype.fromInt=zAe;ee.prototype.fromString=HAe;ee.prototype.clamp=UAe;ee.prototype.dlShiftTo=JAe;ee.prototype.drShiftTo=XAe;ee.prototype.lShiftTo=QAe;ee.prototype.rShiftTo=ZAe;ee.prototype.subTo=e3e;ee.prototype.multiplyTo=t3e;ee.prototype.squareTo=n3e;ee.prototype.divRemTo=r3e;ee.prototype.invDigit=u3e;ee.prototype.isEven=g3e;ee.prototype.exp=v3e;ee.prototype.toString=VAe;ee.prototype.negate=WAe;ee.prototype.abs=GAe;ee.prototype.compareTo=KAe;ee.prototype.bitLength=YAe;ee.prototype.mod=i3e;ee.prototype.modPowInt=y3e;ee.ZERO=Oo(0);ee.ONE=Oo(1);/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function b3e(){var t=vt();return this.copyTo(t),t}function S3e(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function x3e(){return this.t==0?this.s:this[0]<<24>>24}function w3e(){return this.t==0?this.s:this[0]<<16>>16}function C3e(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function E3e(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function T3e(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=Oo(n),i=vt(),s=vt(),a="";for(this.divRemTo(r,i,s);i.signum()>0;)a=(n+s.intValue()).toString(t).substr(1)+a,i.divRemTo(r,i,s);return s.intValue().toString(t)+a}function R3e(t,e){this.fromInt(0),e==null&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,s=0,a=0,o=0;o<t.length;++o){var l=MB(t,o);if(l<0){t.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+l,++s>=n&&(this.dMultiply(r),this.dAddOffset(a,0),s=0,a=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),i&&ee.ZERO.subTo(this,this)}function k3e(t,e,n){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(ee.ONE.shiftLeft(t-1),mk,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(ee.ONE.shiftLeft(t-1),this);else{var r=new Array,i=t&7;r.length=(t>>3)+1,e.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}}function P3e(){var t=this.t,e=new Array;e[0]=this.s;var n=this.DB-t*this.DB%8,r,i=0;if(t-- >0)for(n<this.DB&&(r=this[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this[t]&(1<<n)-1)<<8-n,r|=this[--t]>>(n+=this.DB-8)):(r=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),r&128&&(r|=-256),i==0&&(this.s&128)!=(r&128)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e}function _3e(t){return this.compareTo(t)==0}function A3e(t){return this.compareTo(t)<0?this:t}function O3e(t){return this.compareTo(t)>0?this:t}function D3e(t,e,n){var r,i,s=Math.min(t.t,this.t);for(r=0;r<s;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=s;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=s;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function I3e(t,e){return t&e}function M3e(t){var e=vt();return this.bitwiseTo(t,I3e,e),e}function mk(t,e){return t|e}function N3e(t){var e=vt();return this.bitwiseTo(t,mk,e),e}function NB(t,e){return t^e}function F3e(t){var e=vt();return this.bitwiseTo(t,NB,e),e}function FB(t,e){return t&~e}function $3e(t){var e=vt();return this.bitwiseTo(t,FB,e),e}function L3e(){for(var t=vt(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function B3e(t){var e=vt();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function j3e(t){var e=vt();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function q3e(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function z3e(){for(var t=0;t<this.t;++t)if(this[t]!=0)return t*this.DB+q3e(this[t]);return this.s<0?this.t*this.DB:-1}function H3e(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function U3e(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=H3e(this[n]^e);return t}function V3e(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this[e]&1<<t%this.DB)!=0}function W3e(t,e){var n=ee.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}function G3e(t){return this.changeBit(t,mk)}function K3e(t){return this.changeBit(t,FB)}function Y3e(t){return this.changeBit(t,NB)}function J3e(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()}function X3e(t){var e=vt();return this.addTo(t,e),e}function Q3e(t){var e=vt();return this.subTo(t,e),e}function Z3e(t){var e=vt();return this.multiplyTo(t,e),e}function eOe(){var t=vt();return this.squareTo(t),t}function tOe(t){var e=vt();return this.divRemTo(t,e,null),e}function nOe(t){var e=vt();return this.divRemTo(t,null,e),e}function rOe(t){var e=vt(),n=vt();return this.divRemTo(t,e,n),new Array(e,n)}function iOe(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function sOe(t,e){if(t!=0){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function dm(){}function $B(t){return t}function aOe(t,e,n){t.multiplyTo(e,n)}function oOe(t,e){t.squareTo(e)}dm.prototype.convert=$B;dm.prototype.revert=$B;dm.prototype.mulTo=aOe;dm.prototype.sqrTo=oOe;function lOe(t){return this.exp(t,new dm)}function cOe(t,e,n){var r=Math.min(this.t+t.t,e);for(n.s=0,n.t=r;r>0;)n[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n[r+this.t]=this.am(0,t[r],n,r,0,this.t);for(i=Math.min(t.t,e);r<i;++r)this.am(0,t[r],n,r,0,e-r);n.clamp()}function uOe(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)}function dh(t){this.r2=vt(),this.q3=vt(),ee.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function dOe(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=vt();return t.copyTo(e),this.reduce(e),e}function hOe(t){return t}function fOe(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function pOe(t,e){t.squareTo(e),this.reduce(e)}function mOe(t,e,n){t.multiplyTo(e,n),this.reduce(n)}dh.prototype.convert=dOe;dh.prototype.revert=hOe;dh.prototype.reduce=fOe;dh.prototype.mulTo=mOe;dh.prototype.sqrTo=pOe;function gOe(t,e){var n=t.bitLength(),r,i=Oo(1),s;if(n<=0)return i;n<18?r=1:n<48?r=3:n<144?r=4:n<768?r=5:r=6,n<8?s=new Uc(e):e.isEven()?s=new dh(e):s=new Vc(e);var a=new Array,o=3,l=r-1,c=(1<<r)-1;if(a[1]=s.convert(this),r>1){var u=vt();for(s.sqrTo(a[1],u);o<=c;)a[o]=vt(),s.mulTo(u,a[o-2],a[o]),o+=2}var d=t.t-1,h,p=!0,f=vt(),m;for(n=r1(t[d])-1;d>=0;){for(n>=l?h=t[d]>>n-l&c:(h=(t[d]&(1<<n+1)-1)<<l-n,d>0&&(h|=t[d-1]>>this.DB+n-l)),o=r;!(h&1);)h>>=1,--o;if((n-=o)<0&&(n+=this.DB,--d),p)a[h].copyTo(i),p=!1;else{for(;o>1;)s.sqrTo(i,f),s.sqrTo(f,i),o-=2;o>0?s.sqrTo(i,f):(m=i,i=f,f=m),s.mulTo(f,a[h],i)}for(;d>=0&&!(t[d]&1<<n);)s.sqrTo(i,f),m=i,i=f,f=m,--n<0&&(n=this.DB-1,--d)}return s.revert(i)}function vOe(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),n.rShiftTo(s,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n}function yOe(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(e==0)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n}function bOe(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return ee.ZERO;for(var n=t.clone(),r=this.clone(),i=Oo(1),s=Oo(0),a=Oo(0),o=Oo(1);n.signum()!=0;){for(;n.isEven();)n.rShiftTo(1,n),e?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;r.isEven();)r.rShiftTo(1,r),e?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(t,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(a,i),s.subTo(o,s)):(r.subTo(n,r),e&&a.subTo(i,a),o.subTo(s,o))}if(r.compareTo(ee.ONE)!=0)return ee.ZERO;if(o.compareTo(t)>=0)return o.subtract(t);if(o.signum()<0)o.addTo(t,o);else return o;return o.signum()<0?o.add(t):o}var Fr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],SOe=(1<<26)/Fr[Fr.length-1];function xOe(t){var e,n=this.abs();if(n.t==1&&n[0]<=Fr[Fr.length-1]){for(e=0;e<Fr.length;++e)if(n[0]==Fr[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<Fr.length;){for(var r=Fr[e],i=e+1;i<Fr.length&&r<SOe;)r*=Fr[i++];for(r=n.modInt(r);e<i;)if(r%Fr[e++]==0)return!1}return n.millerRabin(t)}function wOe(t){var e=this.subtract(ee.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var r=e.shiftRight(n);t=t+1>>1,t>Fr.length&&(t=Fr.length);for(var i=vt(),s=0;s<t;++s){i.fromInt(Fr[Math.floor(Math.random()*Fr.length)]);var a=i.modPow(r,this);if(a.compareTo(ee.ONE)!=0&&a.compareTo(e)!=0){for(var o=1;o++<n&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(ee.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}ee.prototype.chunkSize=C3e;ee.prototype.toRadix=T3e;ee.prototype.fromRadix=R3e;ee.prototype.fromNumber=k3e;ee.prototype.bitwiseTo=D3e;ee.prototype.changeBit=W3e;ee.prototype.addTo=J3e;ee.prototype.dMultiply=iOe;ee.prototype.dAddOffset=sOe;ee.prototype.multiplyLowerTo=cOe;ee.prototype.multiplyUpperTo=uOe;ee.prototype.modInt=yOe;ee.prototype.millerRabin=wOe;ee.prototype.clone=b3e;ee.prototype.intValue=S3e;ee.prototype.byteValue=x3e;ee.prototype.shortValue=w3e;ee.prototype.signum=E3e;ee.prototype.toByteArray=P3e;ee.prototype.equals=_3e;ee.prototype.min=A3e;ee.prototype.max=O3e;ee.prototype.and=M3e;ee.prototype.or=N3e;ee.prototype.xor=F3e;ee.prototype.andNot=$3e;ee.prototype.not=L3e;ee.prototype.shiftLeft=B3e;ee.prototype.shiftRight=j3e;ee.prototype.getLowestSetBit=z3e;ee.prototype.bitCount=U3e;ee.prototype.testBit=V3e;ee.prototype.setBit=G3e;ee.prototype.clearBit=K3e;ee.prototype.flipBit=Y3e;ee.prototype.add=X3e;ee.prototype.subtract=Q3e;ee.prototype.multiply=Z3e;ee.prototype.divide=tOe;ee.prototype.remainder=nOe;ee.prototype.divideAndRemainder=rOe;ee.prototype.modPow=gOe;ee.prototype.modInverse=bOe;ee.prototype.pow=lOe;ee.prototype.gcd=vOe;ee.prototype.isProbablePrime=xOe;ee.prototype.square=eOe;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function gk(){this.i=0,this.j=0,this.S=new Array}function COe(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)n=n+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[n],this.S[n]=r;this.i=0,this.j=0}function EOe(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}gk.prototype.init=COe;gk.prototype.next=EOe;function TOe(){return new gk}var o2=256;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var sg,Ri,Zn;function ROe(t){Ri[Zn++]^=t&255,Ri[Zn++]^=t>>8&255,Ri[Zn++]^=t>>16&255,Ri[Zn++]^=t>>24&255,Zn>=o2&&(Zn-=o2)}function LB(){ROe(new Date().getTime())}if(Ri==null){Ri=new Array,Zn=0;var vs;if(lu!==void 0&&(lu.crypto!==void 0||lu.msCrypto!==void 0)){var CO=lu.crypto||lu.msCrypto;if(CO.getRandomValues){var EO=new Uint8Array(32);for(CO.getRandomValues(EO),vs=0;vs<32;++vs)Ri[Zn++]=EO[vs]}else if(Ep.appName=="Netscape"&&Ep.appVersion<"5"){var TO=lu.crypto.random(32);for(vs=0;vs<TO.length;++vs)Ri[Zn++]=TO.charCodeAt(vs)&255}}for(;Zn<o2;)vs=Math.floor(65536*Math.random()),Ri[Zn++]=vs>>>8,Ri[Zn++]=vs&255;Zn=0,LB()}function kOe(){if(sg==null){for(LB(),sg=TOe(),sg.init(Ri),Zn=0;Zn<Ri.length;++Zn)Ri[Zn]=0;Zn=0}return sg.next()}function POe(t){var e;for(e=0;e<t.length;++e)t[e]=kOe()}function Wc(){}Wc.prototype.nextBytes=POe;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function Rr(t,e){return new ee(t,e)}function _Oe(t,e){if(e<t.length+11)throw"Message too long for RSA";for(var n=new Array,r=t.length-1;r>=0&&e>0;){var i=t.charCodeAt(r--);i<128?n[--e]=i:i>127&&i<2048?(n[--e]=i&63|128,n[--e]=i>>6|192):(n[--e]=i&63|128,n[--e]=i>>6&63|128,n[--e]=i>>12|224)}n[--e]=0;for(var s=new Wc,a=new Array;e>2;){for(a[0]=0;a[0]==0;)s.nextBytes(a);n[--e]=a[0]}return n[--e]=2,n[--e]=0,new ee(n)}function RO(t,e,n){for(var r="",i=0;r.length<e;)r+=n(String.fromCharCode.apply(String,t.concat([(i&4278190080)>>24,(i&16711680)>>16,(i&65280)>>8,i&255]))),i+=1;return r}function AOe(t,e,n,r){var i=x.crypto.MessageDigest,s=x.crypto.Util,a=null;if(n||(n="sha1"),typeof n=="string"&&(a=i.getCanonicalAlgName(n),r=i.getHashLength(a),n=function(m){return rs(s.hashHex(Ms(m),a))}),t.length+2*r+2>e)throw"Message too long for RSA";var o="",l;for(l=0;l<e-t.length-2*r-2;l+=1)o+="\0";var c=n("")+o+""+t,u=new Array(r);new Wc().nextBytes(u);var d=RO(u,c.length,n),h=[];for(l=0;l<c.length;l+=1)h[l]=c.charCodeAt(l)^d.charCodeAt(l);var p=RO(h,u.length,n),f=[0];for(l=0;l<u.length;l+=1)f[l+1]=u[l]^p.charCodeAt(l);return new ee(f.concat(h))}function We(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function OOe(t,e){if(this.isPublic=!0,this.isPrivate=!1,typeof t!="string")this.n=t,this.e=e;else if(t!=null&&e!=null&&t.length>0&&e.length>0)this.n=Rr(t,16),this.e=parseInt(e,16);else throw"Invalid RSA public key"}function DOe(t){return t.modPowInt(this.e,this.n)}function IOe(t){var e=_Oe(t,this.n.bitLength()+7>>3);if(e==null)return null;var n=this.doPublic(e);if(n==null)return null;var r=n.toString(16);return r.length&1?"0"+r:r}function MOe(t,e,n){var r=this.n.bitLength()+7>>3,i=AOe(t,r,e,n);if(i==null)return null;var s=this.doPublic(i);if(s==null)return null;for(var a=s.toString(16);a.length<r*2;)a="0"+a;return a}We.prototype.doPublic=DOe;We.prototype.setPublic=OOe;We.prototype.encrypt=IOe;We.prototype.encryptOAEP=MOe;We.prototype.type="RSA";/*! (c) Tom Wu, Kenji Urushima | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function NOe(t,e){for(var n=t.toByteArray(),r=0;r<n.length&&n[r]==0;)++r;if(n.length-r!=e-1||n[r]!=2)return null;for(++r;n[r]!=0;)if(++r>=n.length)return null;for(var i="";++r<n.length;){var s=n[r]&255;s<128?i+=String.fromCharCode(s):s>191&&s<224?(i+=String.fromCharCode((s&31)<<6|n[r+1]&63),++r):(i+=String.fromCharCode((s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63),r+=2)}return i}function kO(t,e,n){for(var r="",i=0;r.length<e;)r+=n(t+String.fromCharCode.apply(String,[(i&4278190080)>>24,(i&16711680)>>16,(i&65280)>>8,i&255])),i+=1;return r}function FOe(t,e,n,r){var i=x.crypto.MessageDigest,s=x.crypto.Util,a=null;n||(n="sha1"),typeof n=="string"&&(a=i.getCanonicalAlgName(n),r=i.getHashLength(a),n=function(g){return rs(s.hashHex(Ms(g),a))}),t=t.toByteArray();var d;for(d=0;d<t.length;d+=1)t[d]&=255;for(;t.length<e;)t.unshift(0);if(t=String.fromCharCode.apply(String,t),t.length<2*r+2)throw"Cipher too short";var o=t.substr(1,r),l=t.substr(r+1),c=kO(l,r,n),u=[],d;for(d=0;d<o.length;d+=1)u[d]=o.charCodeAt(d)^c.charCodeAt(d);var h=kO(String.fromCharCode.apply(String,u),t.length-r,n),p=[];for(d=0;d<l.length;d+=1)p[d]=l.charCodeAt(d)^h.charCodeAt(d);if(p=String.fromCharCode.apply(String,p),p.substr(0,r)!==n(""))throw"Hash mismatch";p=p.substr(r);var f=p.indexOf(""),m=f!=-1?p.substr(0,f).lastIndexOf("\0"):-1;if(m+1!=f)throw"Malformed data";return p.substr(f+1)}function $Oe(t,e,n){if(this.isPrivate=!0,typeof t!="string")this.n=t,this.e=e,this.d=n;else if(t!=null&&e!=null&&t.length>0&&e.length>0)this.n=Rr(t,16),this.e=parseInt(e,16),this.d=Rr(n,16);else throw"Invalid RSA private key"}function LOe(t,e,n,r,i,s,a,o){if(this.isPrivate=!0,this.isPublic=!1,t==null)throw"RSASetPrivateEx N == null";if(e==null)throw"RSASetPrivateEx E == null";if(t.length==0)throw"RSASetPrivateEx N.length == 0";if(e.length==0)throw"RSASetPrivateEx E.length == 0";if(t!=null&&e!=null&&t.length>0&&e.length>0)this.n=Rr(t,16),this.e=parseInt(e,16),this.d=Rr(n,16),this.p=Rr(r,16),this.q=Rr(i,16),this.dmp1=Rr(s,16),this.dmq1=Rr(a,16),this.coeff=Rr(o,16);else throw"Invalid RSA private key in RSASetPrivateEx"}function BOe(t,e){var n=new Wc,r=t>>1;this.e=parseInt(e,16);for(var i=new ee(e,16),s=t/2-100,a=ee.ONE.shiftLeft(s);;){for(;this.p=new ee(t-r,1,n),!(this.p.subtract(ee.ONE).gcd(i).compareTo(ee.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new ee(r,1,n),!(this.q.subtract(ee.ONE).gcd(i).compareTo(ee.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var o=this.p;this.p=this.q,this.q=o}var l=this.q.subtract(this.p).abs();if(!(l.bitLength()<s||l.compareTo(a)<=0)){var c=this.p.subtract(ee.ONE),u=this.q.subtract(ee.ONE),d=c.multiply(u);if(d.gcd(i).compareTo(ee.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==t)){this.d=i.modInverse(d),this.dmp1=this.d.mod(c),this.dmq1=this.d.mod(u),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0}function jOe(t){if(this.p==null||this.q==null)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),n=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(n)<0;)e=e.add(this.p);return e.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)}function qOe(t){if(t.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var e=Rr(t,16),n=this.doPrivate(e);return n==null?null:NOe(n,this.n.bitLength()+7>>3)}function zOe(t,e,n){if(t.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var r=Rr(t,16),i=this.doPrivate(r);return i==null?null:FOe(i,this.n.bitLength()+7>>3,e,n)}We.prototype.doPrivate=jOe;We.prototype.setPrivate=$Oe;We.prototype.setPrivateEx=LOe;We.prototype.generate=BOe;We.prototype.decrypt=qOe;We.prototype.decryptOAEP=zOe;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function rr(t,e){this.x=e,this.q=t}function HOe(t){return t==this?!0:this.q.equals(t.q)&&this.x.equals(t.x)}function UOe(){return this.x}function VOe(){return new rr(this.q,this.x.negate().mod(this.q))}function WOe(t){return new rr(this.q,this.x.add(t.toBigInteger()).mod(this.q))}function GOe(t){return new rr(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))}function KOe(t){return new rr(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))}function YOe(){return new rr(this.q,this.x.square().mod(this.q))}function JOe(t){return new rr(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))}rr.prototype.equals=HOe;rr.prototype.toBigInteger=UOe;rr.prototype.negate=VOe;rr.prototype.add=WOe;rr.prototype.subtract=GOe;rr.prototype.multiply=KOe;rr.prototype.square=YOe;rr.prototype.divide=JOe;rr.prototype.sqrt=function(){return new rr(this.q,this.x.sqrt().mod(this.q))};function Pt(t,e,n,r){this.curve=t,this.x=e,this.y=n,r==null?this.z=ee.ONE:this.z=r,this.zinv=null}function XOe(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function QOe(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function ZOe(t){if(t==this)return!0;if(this.isInfinity())return t.isInfinity();if(t.isInfinity())return this.isInfinity();var e,n;return e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),e.equals(ee.ZERO)?(n=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q),n.equals(ee.ZERO)):!1}function eDe(){return this.x==null&&this.y==null?!0:this.z.equals(ee.ZERO)&&!this.y.toBigInteger().equals(ee.ZERO)}function tDe(){return new Pt(this.curve,this.x,this.y.negate(),this.z)}function nDe(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),n=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(ee.ZERO.equals(n))return ee.ZERO.equals(e)?this.twice():this.curve.getInfinity();var r=new ee("3"),i=this.x.toBigInteger(),s=this.y.toBigInteger();t.x.toBigInteger(),t.y.toBigInteger();var a=n.square(),o=a.multiply(n),l=i.multiply(a),c=e.square().multiply(this.z),u=c.subtract(l.shiftLeft(1)).multiply(t.z).subtract(o).multiply(n).mod(this.curve.q),d=l.multiply(r).multiply(e).subtract(s.multiply(o)).subtract(c.multiply(e)).multiply(t.z).add(e.multiply(o)).mod(this.curve.q),h=o.multiply(this.z).multiply(t.z).mod(this.curve.q);return new Pt(this.curve,this.curve.fromBigInteger(u),this.curve.fromBigInteger(d),h)}function rDe(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var t=new ee("3"),e=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),i=r.multiply(n).mod(this.curve.q),s=this.curve.a.toBigInteger(),a=e.square().multiply(t);ee.ZERO.equals(s)||(a=a.add(this.z.square().multiply(s))),a=a.mod(this.curve.q);var o=a.square().subtract(e.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.q),l=a.multiply(t).multiply(e).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(a.square().multiply(a)).mod(this.curve.q),c=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new Pt(this.curve,this.curve.fromBigInteger(o),this.curve.fromBigInteger(l),c)}function iDe(t){if(this.isInfinity())return this;if(t.signum()==0)return this.curve.getInfinity();var e=t,n=e.multiply(new ee("3")),r=this.negate(),i=this,s=this.curve.q.subtract(t),a=s.multiply(new ee("3")),o=new Pt(this.curve,this.x,this.y),l=o.negate(),c;for(c=n.bitLength()-2;c>0;--c){i=i.twice();var u=n.testBit(c),d=e.testBit(c);u!=d&&(i=i.add(u?this:r))}for(c=a.bitLength()-2;c>0;--c){o=o.twice();var h=a.testBit(c),p=s.testBit(c);h!=p&&(o=o.add(h?o:l))}return i}function sDe(t,e,n){var r;t.bitLength()>n.bitLength()?r=t.bitLength()-1:r=n.bitLength()-1;for(var i=this.curve.getInfinity(),s=this.add(e);r>=0;)i=i.twice(),t.testBit(r)?n.testBit(r)?i=i.add(s):i=i.add(this):n.testBit(r)&&(i=i.add(e)),--r;return i}Pt.prototype.getX=XOe;Pt.prototype.getY=QOe;Pt.prototype.equals=ZOe;Pt.prototype.isInfinity=eDe;Pt.prototype.negate=tDe;Pt.prototype.add=nDe;Pt.prototype.twice=rDe;Pt.prototype.multiply=iDe;Pt.prototype.multiplyTwo=sDe;function gl(t,e,n){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(n),this.infinity=new Pt(this,null,null)}function aDe(){return this.q}function oDe(){return this.a}function lDe(){return this.b}function cDe(t){return t==this?!0:this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)}function uDe(){return this.infinity}function dDe(t){return new rr(this.q,t)}function hDe(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var e=t.substr(0,2);t.substr(2);var n=this.fromBigInteger(new ee(l,16)),r=this.getA(),i=this.getB(),s=n.square().add(r).multiply(n).add(i),a=s.sqrt();return e=="03"&&(a=a.negate()),new Pt(this,n,a);case 4:case 6:case 7:var o=(t.length-2)/2,l=t.substr(2,o),c=t.substr(o+2,o);return new Pt(this,this.fromBigInteger(new ee(l,16)),this.fromBigInteger(new ee(c,16)));default:return null}}gl.prototype.getQ=aDe;gl.prototype.getA=oDe;gl.prototype.getB=lDe;gl.prototype.equals=cDe;gl.prototype.getInfinity=uDe;gl.prototype.fromBigInteger=dDe;gl.prototype.decodePointHex=hDe;/*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib
 */rr.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)};Pt.prototype.getEncoded=function(t){var e=function(s,a){var o=s.toByteArrayUnsigned();if(a<o.length)o=o.slice(o.length-a);else for(;a>o.length;)o.unshift(0);return o},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),i=e(n,32);return t?r.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(e(r,32))),i};Pt.decodeFrom=function(t,e){e[0];var n=e.length-1,r=e.slice(1,1+n/2),i=e.slice(1+n/2,1+n);r.unshift(0),i.unshift(0);var s=new ee(r),a=new ee(i);return new Pt(t,t.fromBigInteger(s),t.fromBigInteger(a))};Pt.decodeFromHex=function(t,e){e.substr(0,2);var n=e.length-2,r=e.substr(2,n/2),i=e.substr(2+n/2,n/2),s=new ee(r,16),a=new ee(i,16);return new Pt(t,t.fromBigInteger(s),t.fromBigInteger(a))};Pt.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),n=t.y.subtract(this.y),r=n.divide(e),i=r.square().subtract(this.x).subtract(t.x),s=r.multiply(this.x.subtract(i)).subtract(this.y);return new Pt(this.curve,i,s)};Pt.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var t=this.curve.fromBigInteger(ee.valueOf(2)),e=this.curve.fromBigInteger(ee.valueOf(3)),n=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),r=n.square().subtract(this.x.multiply(t)),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new Pt(this.curve,r,i)};Pt.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(t.signum()==0)return this.curve.getInfinity();var e=t,n=e.multiply(new ee("3")),r=this.negate(),i=this,s;for(s=n.bitLength()-2;s>0;--s){i=i.twice();var a=n.testBit(s),o=e.testBit(s);a!=o&&(i=i.add2D(a?this:r))}return i};Pt.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),i=this.curve.getQ(),s=e.multiply(e).mod(i),a=t.multiply(t).multiply(t).add(n.multiply(t)).add(r).mod(i);return s.equals(a)};Pt.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"};Pt.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(e.compareTo(ee.ONE)<0||e.compareTo(t.subtract(ee.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(ee.ONE)<0||n.compareTo(t.subtract(ee.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */var BB=function(){var t="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",e='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',n='(?:"'+e+'*")',r=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+t+"|"+n+")","g"),i=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),s={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function a(u,d,h){return d?s[d]:String.fromCharCode(parseInt(h,16))}var o=new String(""),l="\\",c=Object.hasOwnProperty;return function(u,d){var h=u.match(r),p,f=h[0],m=!1;f==="{"?p={}:f==="["?p=[]:(p=[],m=!0);for(var g,v=[p],y=1-m,b=h.length;y<b;++y){f=h[y];var C;switch(f.charCodeAt(0)){default:C=v[0],C[g||C.length]=+f,g=void 0;break;case 34:if(f=f.substring(1,f.length-1),f.indexOf(l)!==-1&&(f=f.replace(i,a)),C=v[0],!g)if(C instanceof Array)g=C.length;else{g=f||o;break}C[g]=f,g=void 0;break;case 91:C=v[0],v.unshift(C[g||C.length]=[]),g=void 0;break;case 93:v.shift();break;case 102:C=v[0],C[g||C.length]=!1,g=void 0;break;case 110:C=v[0],C[g||C.length]=null,g=void 0;break;case 116:C=v[0],C[g||C.length]=!0,g=void 0;break;case 123:C=v[0],v.unshift(C[g||C.length]={}),g=void 0;break;case 125:v.shift();break}}if(m){if(v.length!==1)throw new Error;p=p[0]}else if(v.length)throw new Error;if(d){var R=function(w,E){var k=w[E];if(k&&typeof k=="object"){var T=null;for(var _ in k)if(c.call(k,_)&&k!==w){var D=R(k,_);D!==void 0?k[_]=D:(T||(T=[]),T.push(_))}if(T)for(var I=T.length;--I>=0;)delete k[T[I]]}return d.call(w,E,k)};p=R({"":p},"")}return p}}();(typeof x>"u"||!x)&&(x={});(typeof x.asn1>"u"||!x.asn1)&&(x.asn1={});x.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if(e.substr(0,1)!="-")e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var n=e.substr(1),r=n.length;r%2==1?r+=1:e.match(/^[0-7]/)||(r+=2);for(var i="",s=0;s<r;s++)i+="f";var a=new ee(i,16),o=a.xor(t).add(ee.ONE);e=o.toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return fr(t,e)},this.newObject=function(t){var e=x,n=e.asn1,r=n.ASN1Object,i=n.DERBoolean,s=n.DERInteger,a=n.DERBitString,o=n.DEROctetString,l=n.DERNull,c=n.DERObjectIdentifier,u=n.DEREnumerated,d=n.DERUTF8String,h=n.DERNumericString,p=n.DERPrintableString,f=n.DERTeletexString,m=n.DERIA5String,g=n.DERUTCTime,v=n.DERGeneralizedTime,y=n.DERVisibleString,b=n.DERBMPString,C=n.DERSequence,R=n.DERSet,w=n.DERTaggedObject,E=n.ASN1Util.newObject;if(t instanceof n.ASN1Object)return t;var k=Object.keys(t);if(k.length!=1)throw new Error("key of param shall be only one.");var T=k[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+T+":")==-1)throw new Error("undefined key: "+T);if(T=="bool")return new i(t[T]);if(T=="int")return new s(t[T]);if(T=="bitstr")return new a(t[T]);if(T=="octstr")return new o(t[T]);if(T=="null")return new l(t[T]);if(T=="oid")return new c(t[T]);if(T=="enum")return new u(t[T]);if(T=="utf8str")return new d(t[T]);if(T=="numstr")return new h(t[T]);if(T=="prnstr")return new p(t[T]);if(T=="telstr")return new f(t[T]);if(T=="ia5str")return new m(t[T]);if(T=="utctime")return new g(t[T]);if(T=="gentime")return new v(t[T]);if(T=="visstr")return new y(t[T]);if(T=="bmpstr")return new b(t[T]);if(T=="asn1")return new r(t[T]);if(T=="seq"){for(var _=t[T],D=[],I=0;I<_.length;I++){var M=E(_[I]);D.push(M)}return new C({array:D})}if(T=="set"){for(var _=t[T],D=[],I=0;I<_.length;I++){var M=E(_[I]);D.push(M)}return new R({array:D})}if(T=="tag"){var A=t[T];if(Object.prototype.toString.call(A)==="[object Array]"&&A.length==3){var O=E(A[2]);return new w({tag:A[0],explicit:A[1],obj:O})}else return new w(A)}},this.jsonToASN1HEX=function(t){var e=this.newObject(t);return e.tohex()}};x.asn1.ASN1Util.oidHexToInt=function(t){for(var i="",e=parseInt(t.substr(0,2),16),n=Math.floor(e/40),r=e%40,i=n+"."+r,s="",a=2;a<t.length;a+=2){var o=parseInt(t.substr(a,2),16),l=("00000000"+o.toString(2)).slice(-8);if(s=s+l.substr(1,7),l.substr(0,1)=="0"){var c=new ee(s,2);i=i+"."+c.toString(10),s=""}}return i};x.asn1.ASN1Util.oidIntToHex=function(t){var e=function(o){var l=o.toString(16);return l.length==1&&(l="0"+l),l},n=function(o){var l="",c=new ee(o,10),u=c.toString(2),d=7-u.length%7;d==7&&(d=0);for(var h="",p=0;p<d;p++)h+="0";u=h+u;for(var p=0;p<u.length-1;p+=7){var f=u.substr(p,7);p!=u.length-7&&(f="1"+f),l+=e(parseInt(f,2))}return l};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",i=t.split("."),s=parseInt(i[0])*40+parseInt(i[1]);r+=e(s),i.splice(0,2);for(var a=0;a<i.length;a++)r+=n(i[a]);return r};x.asn1.ASN1Object=function(t){var e="";this.params=null,this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+e.length+",v="+this.hV);var n=this.hV.length/2,r=n.toString(16);if(r.length%2==1&&(r="0"+r),n<128)return r;var i=r.length/2;if(i>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+n.toString(16));var s=128+i;return s.toString(16)+r},this.tohex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(n){this.params=n},t!=null&&t.tlv!=null&&(this.hTLV=t.tlv,this.isModified=!1)};x.asn1.DERAbstractString=function(t){x.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=bk(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t=="string"?this.setString(t):typeof t.str<"u"?this.setString(t.str):typeof t.hex<"u"&&this.setStringHex(t.hex))};ce(x.asn1.DERAbstractString,x.asn1.ASN1Object);x.asn1.DERAbstractTime=function(t){x.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){var n=e.getTime()+e.getTimezoneOffset()*6e4,r=new Date(n);return r},this.formatDate=function(e,n,r){var i=this.zeroPadding,s=this.localDateToUTC(e),a=String(s.getFullYear());n=="utc"&&(a=a.substr(2,2));var o=i(String(s.getMonth()+1),2),l=i(String(s.getDate()),2),c=i(String(s.getHours()),2),u=i(String(s.getMinutes()),2),d=i(String(s.getSeconds()),2),h=a+o+l+c+u+d;if(r===!0){var p=s.getMilliseconds();if(p!=0){var f=i(String(p),3);f=f.replace(/[0]+$/,""),h=h+"."+f}}return h+"Z"},this.zeroPadding=function(e,n){return e.length>=n?e:new Array(n-e.length+1).join("0")+e},this.setByParam=function(e){this.hV=null,this.hTLV=null,this.params=e},this.getString=function(){},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.str=e},this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.date=e},this.setByDateValue=function(e,n,r,i,s,a){var o=new Date(Date.UTC(e,n-1,r,i,s,a,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}};ce(x.asn1.DERAbstractTime,x.asn1.ASN1Object);x.asn1.DERAbstractStructured=function(t){x.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,typeof t<"u"&&typeof t.array<"u"&&(this.asn1Array=t.array)};ce(x.asn1.DERAbstractStructured,x.asn1.ASN1Object);x.asn1.DERBoolean=function(t){x.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",t==!1?this.hTLV="010100":this.hTLV="0101ff"};ce(x.asn1.DERBoolean,x.asn1.ASN1Object);x.asn1.DERInteger=function(t){x.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.params=null;var e=x.asn1.ASN1Util.bigIntToMinTwosComplementsHex;this.setByBigInteger=function(n){this.isModified=!0,this.params={bigint:n}},this.setByInteger=function(n){this.isModified=!0,this.params=n},this.setValueHex=function(n){this.isModified=!0,this.params={hex:n}},this.getFreshValueHex=function(){var n=this.params,r=null;if(n==null)throw new Error("value not set");if(typeof n=="object"&&n.hex!=null)return this.hV=n.hex,this.hV;if(typeof n=="number")r=new ee(String(n),10);else if(n.int!=null)r=new ee(String(n.int),10);else if(n.bigint!=null)r=n.bigint;else throw new Error("wrong parameter");return this.hV=e(r),this.hV},t!=null&&(this.params=t)};ce(x.asn1.DERInteger,x.asn1.ASN1Object);x.asn1.DERBitString=function(t){if(t!==void 0&&typeof t.obj<"u"){var e=x.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.tohex()}x.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(n){this.hTLV=null,this.isModified=!0,this.hV=n},this.setUnusedBitsAndHexValue=function(n,r){if(n<0||7<n)throw"unused bits shall be from 0 to 7: u = "+n;var i="0"+n;this.hTLV=null,this.isModified=!0,this.hV=i+r},this.setByBinaryString=function(n){n=n.replace(/0+$/,"");var r=8-n.length%8;r==8&&(r=0),n+="0000000".substr(0,r);for(var i="",s=0;s<n.length-1;s+=8){var a=n.substr(s,8),o=parseInt(a,2).toString(16);o.length==1&&(o="0"+o),i+=o}this.hTLV=null,this.isModified=!0,this.hV="0"+r+i},this.setByBooleanArray=function(n){for(var r="",i=0;i<n.length;i++)n[i]==!0?r+="1":r+="0";this.setByBinaryString(r)},this.newFalseArray=function(n){for(var r=new Array(n),i=0;i<n;i++)r[i]=!1;return r},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t=="string"&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):typeof t.hex<"u"?this.setHexValueIncludingUnusedBits(t.hex):typeof t.bin<"u"?this.setByBinaryString(t.bin):typeof t.array<"u"&&this.setByBooleanArray(t.array))};ce(x.asn1.DERBitString,x.asn1.ASN1Object);x.asn1.DEROctetString=function(t){if(t!==void 0&&typeof t.obj<"u"){var e=x.asn1.ASN1Util.newObject(t.obj);t.hex=e.tohex()}x.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"};ce(x.asn1.DEROctetString,x.asn1.DERAbstractString);x.asn1.DERNull=function(){x.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"};ce(x.asn1.DERNull,x.asn1.ASN1Object);x.asn1.DERObjectIdentifier=function(t){x.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){var n=wDe(e);if(n==null)throw new Error("malformed oid string: "+e);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.setValueName=function(e){var n=x.asn1.x509.OID.name2oid(e);if(n!=="")this.setValueOidString(n);else throw new Error("DERObjectIdentifier oidName undefined: "+e)},this.setValueNameOrOid=function(e){e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){typeof e=="string"?this.setValueNameOrOid(e):e.oid!==void 0?this.setValueNameOrOid(e.oid):e.name!==void 0?this.setValueNameOrOid(e.name):e.hex!==void 0&&this.setValueHex(e.hex)},t!==void 0&&this.setByParam(t)};ce(x.asn1.DERObjectIdentifier,x.asn1.ASN1Object);x.asn1.DEREnumerated=function(t){x.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=x.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var n=new ee(String(e),10);this.setByBigInteger(n)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t.int<"u"?this.setByInteger(t.int):typeof t=="number"?this.setByInteger(t):typeof t.hex<"u"&&this.setValueHex(t.hex))};ce(x.asn1.DEREnumerated,x.asn1.ASN1Object);x.asn1.DERUTF8String=function(t){x.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"};ce(x.asn1.DERUTF8String,x.asn1.DERAbstractString);x.asn1.DERNumericString=function(t){x.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"};ce(x.asn1.DERNumericString,x.asn1.DERAbstractString);x.asn1.DERPrintableString=function(t){x.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"};ce(x.asn1.DERPrintableString,x.asn1.DERAbstractString);x.asn1.DERTeletexString=function(t){x.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"};ce(x.asn1.DERTeletexString,x.asn1.DERAbstractString);x.asn1.DERIA5String=function(t){x.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"};ce(x.asn1.DERIA5String,x.asn1.DERAbstractString);x.asn1.DERVisibleString=function(t){x.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="1a"};ce(x.asn1.DERVisibleString,x.asn1.DERAbstractString);x.asn1.DERBMPString=function(t){x.asn1.DERBMPString.superclass.constructor.call(this,t),this.hT="1e"};ce(x.asn1.DERBMPString,x.asn1.DERAbstractString);x.asn1.DERUTCTime=function(t){x.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var e=this.params;if(this.params==null&&(e={date:new Date}),typeof e=="string")if(e.match(/^[0-9]{12}Z$/)||e.match(/^[0-9]{12}\.[0-9]+Z$/))this.hV=Es(e);else throw new Error("malformed string for UTCTime: "+e);else if(e.str!=null)this.hV=Es(e.str);else if(e.date==null&&e.millis==!0){var n=new Date;this.hV=Es(this.formatDate(n,"utc",!0))}else if(e.date!=null&&e.date instanceof Date){var r=e.millis===!0;this.hV=Es(this.formatDate(e.date,"utc",r))}else e instanceof Date&&(this.hV=Es(this.formatDate(e,"utc")));if(this.hV==null)throw new Error("parameter not specified properly for UTCTime");return this.hV},t!=null&&this.setByParam(t)};ce(x.asn1.DERUTCTime,x.asn1.DERAbstractTime);x.asn1.DERGeneralizedTime=function(t){x.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.params=t,this.getFreshValueHex=function(){var e=this.params;if(this.params==null&&(e={date:new Date}),typeof e=="string")if(e.match(/^[0-9]{14}Z$/)||e.match(/^[0-9]{14}\.[0-9]+Z$/))this.hV=Es(e);else throw new Error("malformed string for GeneralizedTime: "+e);else if(e.str!=null)this.hV=Es(e.str);else if(e.date==null&&e.millis==!0){var n=new Date;this.hV=Es(this.formatDate(n,"gen",!0))}else if(e.date!=null&&e.date instanceof Date){var r=e.millis===!0;this.hV=Es(this.formatDate(e.date,"gen",r))}else e instanceof Date&&(this.hV=Es(this.formatDate(e,"gen")));if(this.hV==null)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},t!=null&&this.setByParam(t)};ce(x.asn1.DERGeneralizedTime,x.asn1.DERAbstractTime);x.asn1.DERSequence=function(t){x.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var e="",n=0;n<this.asn1Array.length;n++){var r=this.asn1Array[n];e+=r.tohex()}return this.hV=e,this.hV}};ce(x.asn1.DERSequence,x.asn1.DERAbstractStructured);x.asn1.DERSet=function(t){x.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,n=0;n<this.asn1Array.length;n++){var r=this.asn1Array[n];e.push(r.tohex())}return this.sortFlag==!0&&e.sort(),this.hV=e.join(""),this.hV},typeof t<"u"&&typeof t.sortflag<"u"&&t.sortflag==!1&&(this.sortFlag=!1)};ce(x.asn1.DERSet,x.asn1.DERAbstractStructured);x.asn1.DERTaggedObject=function(t){x.asn1.DERTaggedObject.superclass.constructor.call(this);var e=x.asn1,n=xe,r=n.getV;n.isASN1HEX;var i=e.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(s,a,o){this.params={tag:a,explicit:s,obj:o}},this.getFreshValueHex=function(){var s=this.params;if(s.explicit==null&&(s.explicit=!0),s.tage!=null&&(s.tag=s.tage,s.explicit=!0),s.tagi!=null&&(s.tag=s.tagi,s.explicit=!1),s.str!=null)this.hV=bk(s.str);else if(s.hex!=null)this.hV=s.hex;else if(s.obj!=null){var a;s.obj instanceof e.ASN1Object?a=s.obj.tohex():typeof s.obj=="object"&&(a=i(s.obj).tohex()),s.explicit?this.hV=a:this.hV=r(a,0)}else throw new Error("str, hex nor obj not specified");return s.tag==null&&(s.tag="a0"),this.hT=s.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(s){this.params=s},t!==void 0&&this.setByParam(t)};ce(x.asn1.DERTaggedObject,x.asn1.ASN1Object);var xe=new function(){};xe.getLblen=function(t,e){if(t.substr(e+2,1)!="8")return 1;var n=parseInt(t.substr(e+3,1));return n==0?-1:0<n&&n<10?n+1:-2};xe.getL=function(t,e){var n=xe.getLblen(t,e);return n<1?"":t.substr(e+2,n*2)};xe.getVblen=function(t,e){var n,r;return n=xe.getL(t,e),n==""?-1:(n.substr(0,1)==="8"?r=new ee(n.substr(2),16):r=new ee(n,16),r.intValue())};xe.getVidx=function(t,e){var n=xe.getLblen(t,e);return n<0?n:e+(n+1)*2};xe.getV=function(t,e){var n=xe.getVidx(t,e),r=xe.getVblen(t,e);return t.substr(n,r*2)};xe.getTLV=function(t,e){return t.substr(e,2)+xe.getL(t,e)+xe.getV(t,e)};xe.getTLVblen=function(t,e){return 2+xe.getLblen(t,e)*2+xe.getVblen(t,e)*2};xe.getNextSiblingIdx=function(t,e){var n=xe.getVidx(t,e),r=xe.getVblen(t,e);return n+r*2};xe.getChildIdx=function(t,e){var n=xe,r=[],i,s,a;i=n.getVidx(t,e),s=n.getVblen(t,e)*2,t.substr(e,2)=="03"&&(i+=2,s-=2),a=0;for(var o=i;a<=s;){var l=n.getTLVblen(t,o);if(a+=l,a<=s&&r.push(o),o+=l,a>=s)break}return r};xe.getNthChildIdx=function(t,e,n){var r=xe.getChildIdx(t,e);return r[n]};xe.getIdxbyList=function(t,e,n,r){var i=xe,s,a;return n.length==0?r!==void 0&&t.substr(e,2)!==r?-1:e:(s=n.shift(),a=i.getChildIdx(t,e),s>=a.length?-1:i.getIdxbyList(t,a[s],n,r))};xe.getIdxbyListEx=function(t,e,n,r){var i=xe,s,a;if(n.length==0)return r!==void 0&&t.substr(e,2)!==r?-1:e;s=n.shift(),a=i.getChildIdx(t,e);for(var o=0,l=0;l<a.length;l++){var c=t.substr(a[l],2);if(typeof s=="number"&&!i.isContextTag(c)&&o==s||typeof s=="string"&&i.isContextTag(c,s))return i.getIdxbyListEx(t,a[l],n,r);i.isContextTag(c)||o++}return-1};xe.getTLVbyList=function(t,e,n,r){var i=xe,s=i.getIdxbyList(t,e,n,r);return s==-1||s>=t.length?null:i.getTLV(t,s)};xe.getTLVbyListEx=function(t,e,n,r){var i=xe,s=i.getIdxbyListEx(t,e,n,r);return s==-1?null:i.getTLV(t,s)};xe.getVbyList=function(t,e,n,r,i){var s=xe,a,o;return a=s.getIdxbyList(t,e,n,r),a==-1||a>=t.length?null:(o=s.getV(t,a),i===!0&&(o=o.substr(2)),o)};xe.getVbyListEx=function(t,e,n,r,i){var s=xe,a,o;return a=s.getIdxbyListEx(t,e,n,r),a==-1?null:(o=s.getV(t,a),t.substr(a,2)=="03"&&i!==!1&&(o=o.substr(2)),o)};xe.getInt=function(t,e,n){n==null&&(n=-1);try{var r=t.substr(e,2);if(r!="02"&&r!="03")return n;var i=xe.getV(t,e);return r=="02"?parseInt(i,16):CDe(i)}catch{return n}};xe.getOID=function(t,e,n){n==null&&(n=null);try{if(t.substr(e,2)!="06")return n;var r=xe.getV(t,e);return Sk(r)}catch{return n}};xe.getOIDName=function(t,e,n){n==null&&(n=null);try{var r=xe.getOID(t,e,n);if(r==n)return n;var i=x.asn1.x509.OID.oid2name(r);return i==""?r:i}catch{return n}};xe.getString=function(t,e,n){n==null&&(n=null);try{var r=xe.getV(t,e);return rs(r)}catch{return n}};xe.hextooidstr=function(t){var e=function(d,h){return d.length>=h?d:new Array(h-d.length+1).join("0")+d},n=[],r=t.substr(0,2),i=parseInt(r,16);n[0]=new String(Math.floor(i/40)),n[1]=new String(i%40);for(var s=t.substr(2),a=[],o=0;o<s.length/2;o++)a.push(parseInt(s.substr(o*2,2),16));for(var l=[],c="",o=0;o<a.length;o++)a[o]&128?c=c+e((a[o]&127).toString(2),7):(c=c+e((a[o]&127).toString(2),7),l.push(new String(parseInt(c,2))),c="");var u=n.join(".");return l.length>0&&(u=u+"."+l.join(".")),u};xe.dump=function(t,e,n,r){var i=xe,s=i.getV,a=i.dump,o=i.getChildIdx,l=t;t instanceof x.asn1.ASN1Object&&(l=t.tohex());var c=function(E,k){if(E.length<=k*2)return E;var T=E.substr(0,k)+"..(total "+E.length/2+"bytes).."+E.substr(E.length-k,k);return T};e===void 0&&(e={ommit_long_octet:32}),n===void 0&&(n=0),r===void 0&&(r="");var u=e.ommit_long_octet,R=l.substr(n,2);if(R=="01"){var d=s(l,n);return d=="00"?r+`BOOLEAN FALSE
`:r+`BOOLEAN TRUE
`}if(R=="02"){var d=s(l,n);return r+"INTEGER "+c(d,u)+`
`}if(R=="03"){var d=s(l,n);if(i.isASN1HEX(d.substr(2))){var h=r+`BITSTRING, encapsulates
`;return h=h+a(d.substr(2),e,0,r+"  "),h}else return r+"BITSTRING "+c(d,u)+`
`}if(R=="04"){var d=s(l,n);if(i.isASN1HEX(d)){var h=r+`OCTETSTRING, encapsulates
`;return h=h+a(d,e,0,r+"  "),h}else return r+"OCTETSTRING "+c(d,u)+`
`}if(R=="05")return r+`NULL
`;if(R=="06"){var p=s(l,n),f=x.asn1.ASN1Util.oidHexToInt(p),m=x.asn1.x509.OID.oid2name(f),g=f.replace(/\./g," ");return m!=""?r+"ObjectIdentifier "+m+" ("+g+`)
`:r+"ObjectIdentifier ("+g+`)
`}if(R=="0a")return r+"ENUMERATED "+parseInt(s(l,n))+`
`;if(R=="0c")return r+"UTF8String '"+Mt(s(l,n))+`'
`;if(R=="13")return r+"PrintableString '"+Mt(s(l,n))+`'
`;if(R=="14")return r+"TeletexString '"+Mt(s(l,n))+`'
`;if(R=="16")return r+"IA5String '"+Mt(s(l,n))+`'
`;if(R=="17")return r+"UTCTime "+Mt(s(l,n))+`
`;if(R=="18")return r+"GeneralizedTime "+Mt(s(l,n))+`
`;if(R=="1a")return r+"VisualString '"+Mt(s(l,n))+`'
`;if(R=="1e")return r+"BMPString '"+HB(s(l,n))+`'
`;if(R=="30"){if(l.substr(n,4)=="3000")return r+`SEQUENCE {}
`;var h=r+`SEQUENCE
`,v=o(l,n),y=e;if((v.length==2||v.length==3)&&l.substr(v[0],2)=="06"&&l.substr(v[v.length-1],2)=="04"){var m=i.oidname(s(l,v[0])),b=JSON.parse(JSON.stringify(e));b.x509ExtName=m,y=b}for(var C=0;C<v.length;C++)h=h+a(l,y,v[C],r+"  ");return h}if(R=="31"){for(var h=r+`SET
`,v=o(l,n),C=0;C<v.length;C++)h=h+a(l,e,v[C],r+"  ");return h}var R=parseInt(R,16);if(R&128){var w=R&31;if(R&32){for(var h=r+"["+w+`]
`,v=o(l,n),C=0;C<v.length;C++)h=h+a(l,e,v[C],r+"  ");return h}else{var d=s(l,n);if(xe.isASN1HEX(d)){var h=r+"["+w+`]
`;return h=h+a(d,e,0,r+"  "),h}else(d.substr(0,8)=="68747470"||e.x509ExtName==="subjectAltName"&&w==2)&&(d=Mt(d));var h=r+"["+w+"] "+d+`
`;return h}}return r+"UNKNOWN("+R+") "+s(l,n)+`
`};xe.parse=function(t){var e=xe,n=e.parse,r=e.isASN1HEX,i=e.getV,s=e.getTLV,a=e.getChildIdx,o=x.asn1,l=o.ASN1Util.oidHexToInt,c=o.x509.OID.oid2name,u=Mt,d=HB,h=pDe,p={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},f=function(T){for(var _=[],D=a(T,0),I=0;I<D.length;I++){var M=D[I],A=s(T,M),O=n(A);_.push(O)}return _},m=t.substr(0,2),g={},v=i(t,0);if(m=="01")return t=="0101ff"?{bool:!0}:{bool:!1};if(m=="02")return{int:{hex:v}};if(m=="03")try{if(v.substr(0,2)!="00")throw"not encap";var y=v.substr(2);if(!r(y))throw"not encap";return{bitstr:{obj:n(y)}}}catch{var b=null;return v.length<=10&&(b=EDe(v)),b==null?{bitstr:{hex:v}}:{bitstr:{bin:b}}}else if(m=="04")try{if(!r(v))throw"not encap";return{octstr:{obj:n(v)}}}catch{return{octstr:{hex:v}}}else{if(m=="05")return{null:""};if(m=="06"){var C=l(v),R=c(C);return R==""?{oid:C}:{oid:R}}else{if(m=="0a")return v.length>4?{enum:{hex:v}}:{enum:parseInt(v,16)};if(m=="30"||m=="31")return g[p[m]]=f(t),g;if(m=="14"){var w=h(v);return g[p[m]]={str:w},g}else if(m=="1e"){var w=d(v);return g[p[m]]={str:w},g}else if(":0c:12:13:16:17:18:1a:".indexOf(m)!=-1){var w=u(v);return g[p[m]]={str:w},g}else if(m.match(/^8[0-9]$/)){var w=u(v);return w==null|w==""?{tag:{tag:m,explicit:!1,hex:v}}:w.match(/[\x00-\x1F\x7F-\x9F]/)!=null||w.match(/[\u0000-\u001F\u0080\u009F]/)!=null?{tag:{tag:m,explicit:!1,hex:v}}:{tag:{tag:m,explicit:!1,str:w}}}else if(m.match(/^a[0-9]$/))try{if(!r(v))throw new Error("not encap");return{tag:{tag:m,explicit:!0,obj:n(v)}}}catch{return{tag:{tag:m,explicit:!0,hex:v}}}else{var E=new x.asn1.ASN1Object;E.hV=v;var k=E.getLengthHexFromValue();return{asn1:{tlv:m+k+v}}}}}};xe.isContextTag=function(t,e){t=t.toLowerCase();var n,r;try{n=parseInt(t,16)}catch{return-1}if(e===void 0)return(n&192)==128;try{var i=e.match(/^\[[0-9]+\]$/);return i==null||(r=parseInt(e.substr(1,e.length-1),10),r>31)?!1:(n&192)==128&&(n&31)==r}catch{return!1}};xe.isASN1HEX=function(t){var e=xe;if(t.length%2==1)return!1;var n=e.getVblen(t,0),r=t.substr(0,2),i=e.getL(t,0),s=t.length-r.length-i.length;return s==n*2};xe.checkStrictDER=function(t,e,n,r,i){var s=xe;if(n===void 0){if(typeof t!="string")throw new Error("not hex string");if(t=t.toLowerCase(),!x.lang.String.isHex(t))throw new Error("not hex string");n=t.length,r=t.length/2,r<128?i=1:i=Math.ceil(r.toString(16))+1}var a=s.getL(t,e);if(a.length>i*2)throw new Error("L of TLV too long: idx="+e);var o=s.getVblen(t,e);if(o>r)throw new Error("value of L too long than hex: idx="+e);var l=s.getTLV(t,e),c=l.length-2-s.getL(t,e).length;if(c!==o*2)throw new Error("V string length and L's value not the same:"+c+"/"+o*2);if(e===0&&t.length!=l.length)throw new Error("total length and TLV length unmatch:"+t.length+"!="+l.length);var u=t.substr(e,2);if(u==="02"){var d=s.getVidx(t,e);if(t.substr(d,2)=="00"&&t.charCodeAt(d+2)<56)throw new Error("not least zeros for DER INTEGER")}if(parseInt(u,16)&32){for(var h=s.getVblen(t,e),p=0,f=s.getChildIdx(t,e),m=0;m<f.length;m++){var g=s.getTLV(t,f[m]);p+=g.length,s.checkStrictDER(t,f[m],n,r,i)}if(h*2!=p)throw new Error("sum of children's TLV length and L unmatch: "+h*2+"!="+p)}};xe.oidname=function(t){var e=x.asn1;x.lang.String.isHex(t)&&(t=e.ASN1Util.oidHexToInt(t));var n=e.x509.OID.oid2name(t);return n===""&&(n=t),n};(typeof x>"u"||!x)&&(x={});(typeof x.asn1>"u"||!x.asn1)&&(x.asn1={});(typeof x.asn1.x509>"u"||!x.asn1.x509)&&(x.asn1.x509={});x.asn1.x509.Certificate=function(t){x.asn1.x509.Certificate.superclass.constructor.call(this);var e=x,n=e.asn1,r=n.DERBitString,i=n.DERSequence,s=n.x509,a=s.TBSCertificate,o=s.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(l){this.params=l},this.sign=function(){var l=this.params,c=l.sigalg;l.sigalg.name!=null&&(c=l.sigalg.name);var u=l.tbsobj.tohex(),d=new x.crypto.Signature({alg:c});d.init(l.cakey),d.updateHex(u),l.sighex=d.sign()},this.getPEM=function(){return fr(this.tohex(),"CERTIFICATE")},this.tohex=function(){var l=this.params;if((l.tbsobj==null||l.tbsobj==null)&&(l.tbsobj=new a(l)),l.sighex==null&&l.cakey!=null&&this.sign(),l.sighex==null)throw new Error("sighex or cakey parameter not defined");var c=[];c.push(l.tbsobj),c.push(new o({name:l.sigalg})),c.push(new r({hex:"00"+l.sighex}));var u=new i({array:c});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&(this.params=t)};ce(x.asn1.x509.Certificate,x.asn1.ASN1Object);x.asn1.x509.TBSCertificate=function(t){x.asn1.x509.TBSCertificate.superclass.constructor.call(this);var e=x,n=e.asn1,r=n.x509,i=n.DERTaggedObject,s=n.DERInteger,a=n.DERSequence,o=r.AlgorithmIdentifier,l=r.Time,c=r.X500Name,u=r.Extensions,d=r.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(h){this.params=h},this.tohex=function(){var h=[],p=this.params;if(p.version!=null||p.version!=1){var f=2;p.version!=null&&(f=p.version-1);var m=new i({obj:new s({int:f})});h.push(m)}h.push(new s(p.serial)),h.push(new o({name:p.sigalg})),h.push(new c(p.issuer)),h.push(new a({array:[new l(p.notbefore),new l(p.notafter)]})),h.push(new c(p.subject)),h.push(new d(Rt.getKey(p.sbjpubkey))),p.ext!==void 0&&p.ext.length>0&&h.push(new i({tag:"a3",obj:new u(p.ext)}));var g=new x.asn1.DERSequence({array:h});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};ce(x.asn1.x509.TBSCertificate,x.asn1.ASN1Object);x.asn1.x509.Extensions=function(t){x.asn1.x509.Extensions.superclass.constructor.call(this);var e=x,n=e.asn1,r=n.DERSequence,i=n.x509;this.aParam=[],this.setByParam=function(s){this.aParam=s},this.tohex=function(){for(var s=[],a=0;a<this.aParam.length;a++){var o=this.aParam[a],l=o.extname,c=null;if(o.extn!=null)c=new i.PrivateExtension(o);else if(l=="subjectKeyIdentifier")c=new i.SubjectKeyIdentifier(o);else if(l=="keyUsage")c=new i.KeyUsage(o);else if(l=="subjectAltName")c=new i.SubjectAltName(o);else if(l=="issuerAltName")c=new i.IssuerAltName(o);else if(l=="basicConstraints")c=new i.BasicConstraints(o);else if(l=="nameConstraints")c=new i.NameConstraints(o);else if(l=="cRLDistributionPoints")c=new i.CRLDistributionPoints(o);else if(l=="certificatePolicies")c=new i.CertificatePolicies(o);else if(l=="policyMappings")c=new i.PolicyMappings(o);else if(l=="policyConstraints")c=new i.PolicyConstraints(o);else if(l=="inhibitAnyPolicy")c=new i.InhibitAnyPolicy(o);else if(l=="authorityKeyIdentifier")c=new i.AuthorityKeyIdentifier(o);else if(l=="extKeyUsage")c=new i.ExtKeyUsage(o);else if(l=="authorityInfoAccess")c=new i.AuthorityInfoAccess(o);else if(l=="cRLNumber")c=new i.CRLNumber(o);else if(l=="cRLReason")c=new i.CRLReason(o);else if(l=="ocspNonce")c=new i.OCSPNonce(o);else if(l=="ocspNoCheck")c=new i.OCSPNoCheck(o);else if(l=="adobeTimeStamp")c=new i.AdobeTimeStamp(o);else if(l=="subjectDirectoryAttributes")c=new i.SubjectDirectoryAttributes(o);else throw new Error("extension not supported:"+JSON.stringify(o));c!=null&&s.push(c)}var u=new r({array:s});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.x509.Extensions,x.asn1.ASN1Object);x.asn1.x509.Extension=function(t){x.asn1.x509.Extension.superclass.constructor.call(this);var e=x,n=e.asn1,r=n.DERObjectIdentifier,i=n.DEROctetString;n.DERBitString;var s=n.DERBoolean,a=n.DERSequence;this.tohex=function(){var o=new r({oid:this.oid}),l=new i({hex:this.getExtnValueHex()}),c=new Array;c.push(o),this.critical&&c.push(new s),c.push(l);var u=new a({array:c});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,t!==void 0&&t.critical!==void 0&&(this.critical=t.critical)};ce(x.asn1.x509.Extension,x.asn1.ASN1Object);x.asn1.x509.KeyUsage=function(t){x.asn1.x509.KeyUsage.superclass.constructor.call(this,t);var e=Error,n={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var r=this.getBinValue();return this.asn1ExtnValue=new x.asn1.DERBitString({bin:r}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var r=this.params;if(typeof r!="object"||typeof r.names!="object"&&typeof r.bin!="string")throw new e("parameter not yet set");if(r.names!=null)return c2(r.names,n);if(r.bin!=null)return r.bin;throw new e("parameter not set properly")},this.oid="2.5.29.15",t!==void 0&&(this.params=t)};ce(x.asn1.x509.KeyUsage,x.asn1.x509.Extension);x.asn1.x509.BasicConstraints=function(t){x.asn1.x509.BasicConstraints.superclass.constructor.call(this,t);var e=x.asn1,n=e.DERBoolean,r=e.DERInteger,i=e.DERSequence;this.getExtnValueHex=function(){var s=new Array;this.cA&&s.push(new n),this.pathLen>-1&&s.push(new r({int:this.pathLen}));var a=new i({array:s});return this.asn1ExtnValue=a,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,t!==void 0&&(t.cA!==void 0&&(this.cA=t.cA),t.pathLen!==void 0&&(this.pathLen=t.pathLen))};ce(x.asn1.x509.BasicConstraints,x.asn1.x509.Extension);x.asn1.x509.CRLDistributionPoints=function(t){x.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t);var e=x,n=e.asn1,r=n.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(i){for(var s=[],a=0;a<i.length;a++)if(i[a]instanceof x.asn1.ASN1Object)s.push(i[a]);else{var o=new r.DistributionPoint(i[a]);s.push(o)}this.asn1ExtnValue=new n.DERSequence({array:s})},this.setByOneURI=function(i){var s=new r.DistributionPoint({fulluri:i});this.setByDPArray([s])},this.oid="2.5.29.31",t!==void 0&&(t.array!==void 0?this.setByDPArray(t.array):t.uri!==void 0&&this.setByOneURI(t.uri))};ce(x.asn1.x509.CRLDistributionPoints,x.asn1.x509.Extension);x.asn1.x509.DistributionPoint=function(t){x.asn1.x509.DistributionPoint.superclass.constructor.call(this);var e=x,n=e.asn1,r=n.x509.DistributionPointName;this.tohex=function(){var i=new n.DERSequence;if(this.asn1DP!=null){var s=new n.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});i.appendASN1Object(s)}return this.hTLV=i.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(t.dpobj!==void 0?this.asn1DP=t.dpobj:t.dpname!==void 0?this.asn1DP=new r(t.dpname):t.fulluri!==void 0&&(this.asn1DP=new r({full:[{uri:t.fulluri}]})))};ce(x.asn1.x509.DistributionPoint,x.asn1.ASN1Object);x.asn1.x509.DistributionPointName=function(t){x.asn1.x509.DistributionPointName.superclass.constructor.call(this);var e=x,n=e.asn1,r=n.DERTaggedObject;if(this.tohex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new r({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0)if(n.x509.GeneralNames.prototype.isPrototypeOf(t))this.type="full",this.tag="a0",this.asn1V=t;else if(t.full!==void 0)this.type="full",this.tag="a0",this.asn1V=new n.x509.GeneralNames(t.full);else throw new Error("This class supports GeneralNames only as argument")};ce(x.asn1.x509.DistributionPointName,x.asn1.ASN1Object);x.asn1.x509.CertificatePolicies=function(t){x.asn1.x509.CertificatePolicies.superclass.constructor.call(this,t);var e=x,n=e.asn1,r=n.x509,i=n.DERSequence,s=r.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var a=[],o=0;o<this.params.array.length;o++)a.push(new s(this.params.array[o]));var l=new i({array:a});return this.asn1ExtnValue=l,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",t!==void 0&&(this.params=t)};ce(x.asn1.x509.CertificatePolicies,x.asn1.x509.Extension);x.asn1.x509.PolicyInformation=function(t){x.asn1.x509.PolicyInformation.superclass.constructor.call(this,t);var e=x.asn1,n=e.DERSequence,r=e.DERObjectIdentifier,i=e.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var s=[new r(this.params.policyoid)];if(this.params.array!==void 0){for(var a=[],o=0;o<this.params.array.length;o++)a.push(new i(this.params.array[o]));a.length>0&&s.push(new n({array:a}))}var l=new n({array:s});return l.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};ce(x.asn1.x509.PolicyInformation,x.asn1.ASN1Object);x.asn1.x509.PolicyQualifierInfo=function(t){x.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,t);var e=x.asn1,n=e.DERSequence,r=e.DERIA5String,i=e.DERObjectIdentifier,s=e.x509.UserNotice;this.params=null,this.tohex=function(){if(this.params.cps!==void 0){var a=new n({array:[new i({oid:"1.3.6.1.5.5.7.2.1"}),new r({str:this.params.cps})]});return a.tohex()}if(this.params.unotice!=null){var a=new n({array:[new i({oid:"1.3.6.1.5.5.7.2.2"}),new s(this.params.unotice)]});return a.tohex()}},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};ce(x.asn1.x509.PolicyQualifierInfo,x.asn1.ASN1Object);x.asn1.x509.UserNotice=function(t){x.asn1.x509.UserNotice.superclass.constructor.call(this,t);var e=x.asn1.DERSequence;x.asn1.DERInteger;var n=x.asn1.x509.DisplayText,r=x.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var i=[];this.params.noticeref!==void 0&&i.push(new r(this.params.noticeref)),this.params.exptext!==void 0&&i.push(new n(this.params.exptext));var s=new e({array:i});return s.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};ce(x.asn1.x509.UserNotice,x.asn1.ASN1Object);x.asn1.x509.NoticeReference=function(t){x.asn1.x509.NoticeReference.superclass.constructor.call(this,t);var e=x.asn1.DERSequence,n=x.asn1.DERInteger,r=x.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var i=[];if(this.params.org!==void 0&&i.push(new r(this.params.org)),this.params.noticenum!==void 0){for(var s=[],a=this.params.noticenum,o=0;o<a.length;o++)s.push(new n(a[o]));i.push(new e({array:s}))}if(i.length==0)throw new Error("parameter is empty");var l=new e({array:i});return l.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};ce(x.asn1.x509.NoticeReference,x.asn1.ASN1Object);x.asn1.x509.DisplayText=function(t){x.asn1.x509.DisplayText.superclass.constructor.call(this,t),this.hT="0c",t!==void 0&&(t.type==="ia5"?this.hT="16":t.type==="vis"?this.hT="1a":t.type==="bmp"&&(this.hT="1e"))};ce(x.asn1.x509.DisplayText,x.asn1.DERAbstractString);x.asn1.x509.PolicyMappings=function(t){x.asn1.x509.PolicyMappings.superclass.constructor.call(this,t);var e=x,n=e.asn1;n.x509;var r=n.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){for(var i=this.params,s=[],a=0;a<i.array.length;a++){var o=i.array[a];s.push({seq:[{oid:o[0]},{oid:o[1]}]})}return this.asn1ExtnValue=r({seq:s}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.33",t!==void 0&&(this.params=t)};ce(x.asn1.x509.PolicyMappings,x.asn1.x509.Extension);x.asn1.x509.PolicyConstraints=function(t){x.asn1.x509.PolicyConstraints.superclass.constructor.call(this,t);var e=x,n=e.asn1;n.x509;var r=n.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){var i=this.params,s=[];return i.reqexp!=null&&s.push({tag:{tagi:"80",obj:{int:i.reqexp}}}),i.inhibit!=null&&s.push({tag:{tagi:"81",obj:{int:i.inhibit}}}),this.asn1ExtnValue=r({seq:s}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.36",t!==void 0&&(this.params=t)};ce(x.asn1.x509.PolicyConstraints,x.asn1.x509.Extension);x.asn1.x509.InhibitAnyPolicy=function(t){x.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this,t);var e=x,n=e.asn1;n.x509;var r=n.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=r({int:this.params.skip}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.54",t!==void 0&&(this.params=t)};ce(x.asn1.x509.InhibitAnyPolicy,x.asn1.x509.Extension);x.asn1.x509.NameConstraints=function(t){x.asn1.x509.NameConstraints.superclass.constructor.call(this,t);var e=x,n=e.asn1,r=n.x509,i=n.ASN1Util.newObject,s=r.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var a=this.params,o=[];if(a.permit!=null&&a.permit.length!=null){for(var l=[],c=0;c<a.permit.length;c++)l.push(new s(a.permit[c]));o.push({tag:{tagi:"a0",obj:{seq:l}}})}if(a.exclude!=null&&a.exclude.length!=null){for(var u=[],c=0;c<a.exclude.length;c++)u.push(new s(a.exclude[c]));o.push({tag:{tagi:"a1",obj:{seq:u}}})}return this.asn1ExtnValue=i({seq:o}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",t!==void 0&&(this.params=t)};ce(x.asn1.x509.NameConstraints,x.asn1.x509.Extension);x.asn1.x509.GeneralSubtree=function(t){x.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var e=x.asn1,n=e.x509,r=n.GeneralName,i=e.ASN1Util.newObject;this.params=null,this.setByParam=function(s){this.params=s},this.tohex=function(){var s=this.params,a=[new r(s)];s.min!=null&&a.push({tag:{tagi:"80",obj:{int:s.min}}}),s.max!=null&&a.push({tag:{tagi:"81",obj:{int:s.max}}});var o=i({seq:a});return o.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};ce(x.asn1.x509.GeneralSubtree,x.asn1.ASN1Object);x.asn1.x509.ExtKeyUsage=function(t){x.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t);var e=x,n=e.asn1;this.setPurposeArray=function(r){this.asn1ExtnValue=new n.DERSequence;for(var i=0;i<r.length;i++){var s=new n.DERObjectIdentifier(r[i]);this.asn1ExtnValue.appendASN1Object(s)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",t!==void 0&&t.array!==void 0&&this.setPurposeArray(t.array)};ce(x.asn1.x509.ExtKeyUsage,x.asn1.x509.Extension);x.asn1.x509.AuthorityKeyIdentifier=function(t){x.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t);var e=x,n=e.asn1,r=n.DERTaggedObject,i=n.x509.GeneralNames;e.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var s=new Array;this.asn1KID&&s.push(new r({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&s.push(new r({explicit:!1,tag:"a1",obj:new i([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&s.push(new r({explicit:!1,tag:"82",obj:this.asn1CertSN}));var a=new n.DERSequence({array:s});return this.asn1ExtnValue=a,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(s){if(s.str!==void 0||s.hex!==void 0)this.asn1KID=new x.asn1.DEROctetString(s);else if(typeof s=="object"&&x.crypto.Util.isKey(s)||typeof s=="string"&&s.indexOf("BEGIN ")!=-1){var a=s;typeof s=="string"&&(a=Rt.getKey(s));var o=Rt.getKeyID(a);this.asn1KID=new x.asn1.DEROctetString({hex:o})}},this.setCertIssuerByParam=function(s){s.str!==void 0||s.ldapstr!==void 0||s.hex!==void 0||s.certsubject!==void 0||s.certissuer!==void 0?this.asn1CertIssuer=new x.asn1.x509.X500Name(s):typeof s=="string"&&s.indexOf("BEGIN ")!=-1&&s.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new x.asn1.x509.X500Name({certissuer:s}))},this.setCertSNByParam=function(s){if(s.str!==void 0||s.bigint!==void 0||s.hex!==void 0)this.asn1CertSN=new x.asn1.DERInteger(s);else if(typeof s=="string"&&s.indexOf("BEGIN ")!=-1&&s.indexOf("CERTIFICATE")){var a=new Xe;a.readCertPEM(s);var o=a.getSerialNumberHex();this.asn1CertSN=new x.asn1.DERInteger({hex:o})}},this.oid="2.5.29.35",t!==void 0&&(t.kid!==void 0&&this.setKIDByParam(t.kid),t.issuer!==void 0&&this.setCertIssuerByParam(t.issuer),t.sn!==void 0&&this.setCertSNByParam(t.sn),t.issuersn!==void 0&&typeof t.issuersn=="string"&&t.issuersn.indexOf("BEGIN ")!=-1&&t.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(t.issuersn),this.setCertIssuerByParam(t.issuersn)))};ce(x.asn1.x509.AuthorityKeyIdentifier,x.asn1.x509.Extension);x.asn1.x509.SubjectKeyIdentifier=function(t){x.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,t);var e=x,n=e.asn1,r=n.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(i){if(i.str!==void 0||i.hex!==void 0)this.asn1KID=new r(i);else if(typeof i=="object"&&x.crypto.Util.isKey(i)||typeof i=="string"&&i.indexOf("BEGIN")!=-1){var s=i;typeof i=="string"&&(s=Rt.getKey(i));var a=Rt.getKeyID(s);this.asn1KID=new x.asn1.DEROctetString({hex:a})}},this.oid="2.5.29.14",t!==void 0&&t.kid!==void 0&&this.setKIDByParam(t.kid)};ce(x.asn1.x509.SubjectKeyIdentifier,x.asn1.x509.Extension);x.asn1.x509.AuthorityInfoAccess=function(t){x.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(e){for(var n=new Array,r=x,i=r.asn1,s=i.DERSequence,a=i.DERObjectIdentifier,o=i.x509.GeneralName,l=0;l<e.length;l++){var c,u=e[l];if(u.ocsp!==void 0)c=new s({array:[new a({oid:"1.3.6.1.5.5.7.48.1"}),new o({uri:u.ocsp})]});else if(u.caissuer!==void 0)c=new s({array:[new a({oid:"1.3.6.1.5.5.7.48.2"}),new o({uri:u.caissuer})]});else throw new Error("unknown AccessMethod parameter: "+JSON.stringify(u));n.push(c)}this.asn1ExtnValue=new s({array:n})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",t!==void 0&&t.array!==void 0&&this.setAccessDescriptionArray(t.array)};ce(x.asn1.x509.AuthorityInfoAccess,x.asn1.x509.Extension);x.asn1.x509.SubjectAltName=function(t){x.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(e){this.asn1ExtnValue=new x.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",t!==void 0&&t.array!==void 0&&this.setNameArray(t.array)};ce(x.asn1.x509.SubjectAltName,x.asn1.x509.Extension);x.asn1.x509.IssuerAltName=function(t){x.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(e){this.asn1ExtnValue=new x.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",t!==void 0&&t.array!==void 0&&this.setNameArray(t.array)};ce(x.asn1.x509.IssuerAltName,x.asn1.x509.Extension);x.asn1.x509.SubjectDirectoryAttributes=function(t){x.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,t);var e=x.asn1,n=e.DERSequence,r=e.ASN1Util.newObject,i=e.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var s=[],a=0;a<this.params.array.length;a++){var o=this.params.array[a],l={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(o.attr=="dateOfBirth")l.seq[0].oid=i(o.attr),l.seq[1].set[0]={gentime:o.str};else if(o.attr=="placeOfBirth")l.seq[0].oid=i(o.attr),l.seq[1].set[0]={utf8str:o.str};else if(o.attr=="gender")l.seq[0].oid=i(o.attr),l.seq[1].set[0]={prnstr:o.str};else if(o.attr=="countryOfCitizenship")l.seq[0].oid=i(o.attr),l.seq[1].set[0]={prnstr:o.str};else if(o.attr=="countryOfResidence")l.seq[0].oid=i(o.attr),l.seq[1].set[0]={prnstr:o.str};else throw new Error("unsupported attribute: "+o.attr);s.push(new r(l))}var c=new n({array:s});return this.asn1ExtnValue=c,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",t!==void 0&&(this.params=t)};ce(x.asn1.x509.SubjectDirectoryAttributes,x.asn1.x509.Extension);x.asn1.x509.PrivateExtension=function(t){x.asn1.x509.PrivateExtension.superclass.constructor.call(this,t);var e=x,n=e.lang.String.isHex,r=e.asn1,i=r.x509.OID.name2oid,s=r.ASN1Util.newObject;this.params=null,this.setByParam=function(a){this.oid=i(a.extname),this.params=a},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var a=this.params.extn;if(typeof a=="string"&&n(a))return a;if(typeof a=="object")try{return s(a).tohex()}catch{}throw new Error("unsupported extn value")},t!=null&&this.setByParam(t)};ce(x.asn1.x509.PrivateExtension,x.asn1.x509.Extension);x.asn1.x509.CRL=function(t){x.asn1.x509.CRL.superclass.constructor.call(this);var e=x,n=e.asn1,r=n.DERSequence,i=n.DERBitString,s=n.x509,a=s.AlgorithmIdentifier,o=s.TBSCertList;this.params=void 0,this.setByParam=function(l){this.params=l},this.sign=function(){var l=new o(this.params).tohex(),c=new x.crypto.Signature({alg:this.params.sigalg});c.init(this.params.cakey),c.updateHex(l);var u=c.sign();this.params.sighex=u},this.getPEM=function(){return fr(this.tohex(),"X509 CRL")},this.tohex=function(){var l=this.params;if(l.tbsobj==null&&(l.tbsobj=new o(l)),l.sighex==null&&l.cakey!=null&&this.sign(),l.sighex==null)throw new Error("sighex or cakey parameter not defined");var c=[];c.push(l.tbsobj),c.push(new a({name:l.sigalg})),c.push(new i({hex:"00"+l.sighex}));var u=new r({array:c});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&(this.params=t)};ce(x.asn1.x509.CRL,x.asn1.ASN1Object);x.asn1.x509.TBSCertList=function(t){x.asn1.x509.TBSCertList.superclass.constructor.call(this);var e=x,n=e.asn1,r=n.DERInteger,i=n.DERSequence,s=n.DERTaggedObject;n.DERObjectIdentifier;var a=n.x509,o=a.AlgorithmIdentifier,l=a.Time,c=a.Extensions,u=a.X500Name;this.params=null,this.setByParam=function(d){this.params=d},this.getRevCertSequence=function(){for(var d=[],h=this.params.revcert,p=0;p<h.length;p++){var f=[new r(h[p].sn),new l(h[p].date)];h[p].ext!=null&&f.push(new c(h[p].ext)),d.push(new i({array:f}))}return new i({array:d})},this.tohex=function(){var d=[],h=this.params;if(h.version!=null){var p=h.version-1,f=new r({int:p});d.push(f)}if(d.push(new o({name:h.sigalg})),d.push(new u(h.issuer)),d.push(new l(h.thisupdate)),h.nextupdate!=null&&d.push(new l(h.nextupdate)),h.revcert!=null&&d.push(this.getRevCertSequence()),h.ext!=null){var m=new c(h.ext);d.push(new s({tag:"a0",explicit:!0,obj:m}))}var g=new i({array:d});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};ce(x.asn1.x509.TBSCertList,x.asn1.ASN1Object);x.asn1.x509.CRLEntry=function(t){x.asn1.x509.CRLEntry.superclass.constructor.call(this);var e=x,n=e.asn1;this.setCertSerial=function(r){this.sn=new n.DERInteger(r)},this.setRevocationDate=function(r){this.time=new n.x509.Time(r)},this.tohex=function(){var r=new n.DERSequence({array:[this.sn,this.time]});return this.TLV=r.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(t.time!==void 0&&this.setRevocationDate(t.time),t.sn!==void 0&&this.setCertSerial(t.sn))};ce(x.asn1.x509.CRLEntry,x.asn1.ASN1Object);x.asn1.x509.CRLNumber=function(t){x.asn1.x509.CRLNumber.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new x.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",t!=null&&(this.params=t)};ce(x.asn1.x509.CRLNumber,x.asn1.x509.Extension);x.asn1.x509.CRLReason=function(t){x.asn1.x509.CRLReason.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new x.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",t!=null&&(this.params=t)};ce(x.asn1.x509.CRLReason,x.asn1.x509.Extension);x.asn1.x509.OCSPNonce=function(t){x.asn1.x509.OCSPNonce.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new x.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",t!=null&&(this.params=t)};ce(x.asn1.x509.OCSPNonce,x.asn1.x509.Extension);x.asn1.x509.OCSPNoCheck=function(t){x.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new x.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",t!=null&&(this.params=t)};ce(x.asn1.x509.OCSPNoCheck,x.asn1.x509.Extension);x.asn1.x509.AdobeTimeStamp=function(t){x.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,t);var e=x,n=e.asn1,r=n.DERInteger,i=n.DERBoolean,s=n.DERSequence,a=n.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var o=this.params,l=[new r(1)];return l.push(new a({uri:o.uri})),o.reqauth!=null&&l.push(new i(o.reqauth)),this.asn1ExtnValue=new s({array:l}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",t!==void 0&&this.setByParam(t)};ce(x.asn1.x509.AdobeTimeStamp,x.asn1.x509.Extension);x.asn1.x509.X500Name=function(t){x.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var e=x,n=e.asn1,r=n.x509,i=r.RDN;this.setByString=function(s,a){a!==void 0&&(this.sRule=a);var o=s.split("/");o.shift();for(var l=[],c=0;c<o.length;c++)if(o[c].match(/^[^=]+=.+$/))l.push(o[c]);else{var u=l.length-1;l[u]=l[u]+"/"+o[c]}for(var c=0;c<l.length;c++)this.asn1Array.push(new i({str:l[c],rule:this.sRule}))},this.setByLdapString=function(s,a){a!==void 0&&(this.sRule=a);var o=r.X500Name.ldapToCompat(s);this.setByString(o,a)},this.setByObject=function(s,a){a!==void 0&&(this.sRule=a);for(var o in s)if(s.hasOwnProperty(o)){var l=new i({str:o+"="+s[o],rule:this.sRule});this.asn1Array?this.asn1Array.push(l):this.asn1Array=[l]}},this.setByParam=function(s){if(s.rule!==void 0&&(this.sRule=s.rule),s.array!==void 0)this.paramArray=s.array;else if(s.str!==void 0)this.setByString(s.str);else if(s.ldapstr!==void 0)this.setByLdapString(s.ldapstr);else if(s.hex!==void 0)this.hTLV=s.hex;else if(s.certissuer!==void 0){var a=new Xe;a.readCertPEM(s.certissuer),this.hTLV=a.getIssuerHex()}else if(s.certsubject!==void 0){var a=new Xe;a.readCertPEM(s.certsubject),this.hTLV=a.getSubjectHex()}else typeof s=="object"&&s.certsubject===void 0&&s.certissuer===void 0&&this.setByObject(s)},this.tohex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var s=0;s<this.paramArray.length;s++){var a={array:this.paramArray[s]};this.sRule!="utf8"&&(a.rule=this.sRule);var o=new i(a);this.asn1Array.push(o)}var l=new n.DERSequence({array:this.asn1Array});return this.hTLV=l.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};ce(x.asn1.x509.X500Name,x.asn1.ASN1Object);x.asn1.x509.X500Name.compatToLDAP=function(t){if(t.substr(0,1)!=="/")throw"malformed input";t=t.substr(1);var e=t.split("/");return e.reverse(),e=e.map(function(n){return n.replace(/,/,"\\,")}),e.join(",")};x.asn1.x509.X500Name.onelineToLDAP=function(t){return x.asn1.x509.X500Name.compatToLDAP(t)};x.asn1.x509.X500Name.ldapToCompat=function(t){for(var e=t.split(","),n=!1,r=[],i=0;e.length>0;i++){var s=e.shift();if(n===!0){var a=r.pop(),o=(a+","+s).replace(/\\,/g,",");r.push(o),n=!1}else r.push(s);s.substr(-1,1)==="\\"&&(n=!0)}return r=r.map(function(l){return l.replace("/","\\/")}),r.reverse(),"/"+r.join("/")};x.asn1.x509.X500Name.ldapToOneline=function(t){return x.asn1.x509.X500Name.ldapToCompat(t)};x.asn1.x509.RDN=function(t){x.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var e=x.asn1.x509.AttributeTypeAndValue;this.setByParam=function(n){n.rule!==void 0&&(this.sRule=n.rule),n.str!==void 0&&this.addByMultiValuedString(n.str),n.array!==void 0&&(this.paramArray=n.array)},this.addByString=function(n){this.asn1Array.push(new x.asn1.x509.AttributeTypeAndValue({str:n,rule:this.sRule}))},this.addByMultiValuedString=function(n){for(var r=x.asn1.x509.RDN.parseString(n),i=0;i<r.length;i++)this.addByString(r[i])},this.tohex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var n=0;n<this.paramArray.length;n++){var r=this.paramArray[n];r.rule!==void 0&&this.sRule!="utf8"&&(r.rule=this.sRule);var i=new e(r);this.asn1Array.push(i)}var s=new x.asn1.DERSet({array:this.asn1Array});return this.TLV=s.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};ce(x.asn1.x509.RDN,x.asn1.ASN1Object);x.asn1.x509.RDN.parseString=function(t){for(var e=t.split(/\+/),n=!1,r=[],i=0;e.length>0;i++){var s=e.shift();if(n===!0){var a=r.pop(),o=(a+"+"+s).replace(/\\\+/g,"+");r.push(o),n=!1}else r.push(s);s.substr(-1,1)==="\\"&&(n=!0)}for(var l=!1,c=[],i=0;r.length>0;i++){var s=r.shift();if(l===!0){var u=c.pop();if(s.match(/"$/)){var o=(u+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2");c.push(o),l=!1}else c.push(u+"+"+s)}else c.push(s);s.match(/^[^=]+="/)&&(l=!0)}return c};x.asn1.x509.AttributeTypeAndValue=function(t){x.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var e=x,n=e.asn1,r=n.DERSequence,i=n.DERUTF8String,s=n.DERPrintableString,a=n.DERTeletexString,o=n.DERIA5String,l=n.DERVisibleString,c=n.DERBMPString,u=e.lang.String.isMail,d=e.lang.String.isPrintable;this.setByParam=function(h){if(h.rule!==void 0&&(this.sRule=h.rule),h.ds!==void 0&&(this.dsType=h.ds),h.value===void 0&&h.str!==void 0){var p=h.str,f=p.match(/^([^=]+)=(.+)$/);if(f)this.sType=f[1],this.sValue=f[2];else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)}else this.sType=h.type,this.sValue=h.value},this.setByString=function(h,p){p!==void 0&&(this.sRule=p);var f=h.match(/^([^=]+)=(.+)$/);if(f)this.setByAttrTypeAndValueStr(f[1],f[2]);else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)},this._getDsType=function(){var h=this.sType,p=this.sValue,f=this.sRule;return f==="prn"?h=="CN"&&u(p)?"ia5":d(p)?"prn":"utf8":f==="utf8"?h=="CN"&&u(p)?"ia5":h=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(h,p,f){f!==void 0&&(this.sRule=f),this.sType=h,this.sValue=p},this.getValueObj=function(h,p){if(h=="utf8")return new i({str:p});if(h=="prn")return new s({str:p});if(h=="tel")return new a({str:p});if(h=="ia5")return new o({str:p});if(h=="vis")return new l({str:p});if(h=="bmp")return new c({str:p});throw new Error("unsupported directory string type: type="+h+" value="+p)},this.tohex=function(){this.dsType==null&&(this.dsType=this._getDsType());var h=x.asn1.x509.OID.atype2obj(this.sType),p=this.getValueObj(this.dsType,this.sValue),f=new r({array:[h,p]});return this.TLV=f.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};ce(x.asn1.x509.AttributeTypeAndValue,x.asn1.ASN1Object);x.asn1.x509.SubjectPublicKeyInfo=function(t){x.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var e=x,n=e.asn1,r=n.DERInteger,i=n.DERBitString,s=n.DERObjectIdentifier,a=n.DERSequence,o=n.ASN1Util.newObject,l=n.x509,c=l.AlgorithmIdentifier,u=e.crypto;u.ECDSA,u.DSA,this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";var d=new a({array:[this.asn1AlgId,this.asn1SubjPKey]});return d},this.tohex=function(){var d=this.getASN1Object();return this.hTLV=d.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(d){try{if(d instanceof We){var h=o({seq:[{int:{bigint:d.n}},{int:{int:d.e}}]}),p=h.tohex();this.asn1AlgId=new c({name:"rsaEncryption"}),this.asn1SubjPKey=new i({hex:"00"+p})}}catch{}try{if(d instanceof x.crypto.ECDSA){var f=new s({name:d.curveName});this.asn1AlgId=new c({name:"ecPublicKey",asn1params:f}),this.asn1SubjPKey=new i({hex:"00"+d.pubKeyHex})}}catch{}try{if(d instanceof x.crypto.DSA){var f=new o({seq:[{int:{bigint:d.p}},{int:{bigint:d.q}},{int:{bigint:d.g}}]});this.asn1AlgId=new c({name:"dsa",asn1params:f});var m=new r({bigint:d.y});this.asn1SubjPKey=new i({hex:"00"+m.tohex()})}}catch{}},t!==void 0&&this.setPubKey(t)};ce(x.asn1.x509.SubjectPublicKeyInfo,x.asn1.ASN1Object);x.asn1.x509.Time=function(t){x.asn1.x509.Time.superclass.constructor.call(this);var e=x,n=e.asn1,r=n.DERUTCTime,i=n.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(s){this.timeParams=s},this.setByParam=function(s){this.params=s},this.getType=function(s){return s.match(/^[0-9]{12}Z$/)?"utc":s.match(/^[0-9]{14}Z$/)?"gen":s.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":s.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var s=this.params,a=null;if(typeof s=="string"&&(s={str:s}),s!=null&&s.str&&(s.type==null||s.type==null)&&(s.type=this.getType(s.str)),s!=null&&s.str?(s.type=="utc"&&(a=new r(s.str)),s.type=="gen"&&(a=new i(s.str))):this.type=="gen"?a=new i:a=new r,a==null)throw new Error("wrong setting for Time");return this.TLV=a.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};x.asn1.x509.Time_bak=function(t){x.asn1.x509.Time_bak.superclass.constructor.call(this);var e=x,n=e.asn1,r=n.DERUTCTime,i=n.DERGeneralizedTime;this.setTimeParams=function(s){this.timeParams=s},this.tohex=function(){var s=null;return this.timeParams!=null?this.type=="utc"?s=new r(this.timeParams):s=new i(this.timeParams):this.type=="utc"?s=new r:s=new i,this.TLV=s.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",t!==void 0&&(t.type!==void 0?this.type=t.type:t.str!==void 0&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)};ce(x.asn1.x509.Time,x.asn1.ASN1Object);x.asn1.x509.AlgorithmIdentifier=function(t){x.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var e=x,n=e.asn1,r=n.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var s=null;for(var a in r)a===this.nameAlg&&(s=r[a]);if(s!==null)return this.hTLV=s,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=n.x509.OID.name2obj(this.nameAlg));var o=[this.asn1Alg];this.asn1Params!==null&&o.push(this.asn1Params);var l=new n.DERSequence({array:o});return this.hTLV=l.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(t.name!==void 0&&(this.nameAlg=t.name),t.asn1params!==void 0&&(this.asn1Params=t.asn1params),t.paramempty!==void 0&&(this.paramEmpty=t.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var i=this.nameAlg.toLowerCase();i.substr(-7,7)!=="withdsa"&&i.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new n.DERNull)}};ce(x.asn1.x509.AlgorithmIdentifier,x.asn1.ASN1Object);x.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"};x.asn1.x509.GeneralName=function(t){x.asn1.x509.GeneralName.superclass.constructor.call(this);var e=x,n=e.asn1,r=n.x509,i=r.X500Name,s=r.OtherName,a=n.DERIA5String;n.DERPrintableString;var o=n.DEROctetString,l=n.DERTaggedObject,c=n.ASN1Object,u=Error;this.params=null,this.setByParam=function(d){this.params=d},this.tohex=function(){var d=this.params,h,f,p,f=!1;if(d.other!==void 0)h="a0",p=new s(d.other);else if(d.rfc822!==void 0)h="81",p=new a({str:d.rfc822});else if(d.dns!==void 0)h="82",p=new a({str:d.dns});else if(d.dn!==void 0)h="a4",f=!0,typeof d.dn=="string"?p=new i({str:d.dn}):d.dn instanceof x.asn1.x509.X500Name?p=d.dn:p=new i(d.dn);else if(d.ldapdn!==void 0)h="a4",f=!0,p=new i({ldapstr:d.ldapdn});else if(d.certissuer!==void 0||d.certsubj!==void 0){h="a4",f=!0;var m,g,v=null;if(d.certsubj!==void 0?(m=!1,g=d.certsubj):(m=!0,g=d.certissuer),g.match(/^[0-9A-Fa-f]+$/),g.indexOf("-----BEGIN ")!=-1&&(v=Gn(g)),v==null)throw new Error("certsubj/certissuer not cert");var y=new Xe;y.hex=v;var b;m?b=y.getIssuerHex():b=y.getSubjectHex(),p=new c,p.hTLV=b}else if(d.uri!==void 0)h="86",p=new a({str:d.uri});else if(d.ip!==void 0){h="87";var C,R=d.ip;try{if(R.match(/^[0-9a-f]+$/)){var w=R.length;if(w==8||w==16||w==32||w==64)C=R;else throw"err"}else C=zB(R)}catch(k){throw new u("malformed IP address: "+d.ip+":"+k.message)}p=new o({hex:C})}else throw new u("improper params");var E=new l({tag:h,explicit:f,obj:p});return E.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};ce(x.asn1.x509.GeneralName,x.asn1.ASN1Object);x.asn1.x509.GeneralNames=function(t){x.asn1.x509.GeneralNames.superclass.constructor.call(this);var e=x,n=e.asn1;this.setByParamArray=function(r){for(var i=0;i<r.length;i++){var s=new n.x509.GeneralName(r[i]);this.asn1Array.push(s)}},this.tohex=function(){var r=new n.DERSequence({array:this.asn1Array});return r.tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,typeof t<"u"&&this.setByParamArray(t)};ce(x.asn1.x509.GeneralNames,x.asn1.ASN1Object);x.asn1.x509.OtherName=function(t){x.asn1.x509.OtherName.superclass.constructor.call(this);var e=x,n=e.asn1,r=n.DERObjectIdentifier,i=n.DERSequence,s=n.ASN1Util.newObject;this.params=null,this.setByParam=function(a){this.params=a},this.tohex=function(){var a=this.params;if(a.oid==null||a.value==null)throw new Error("oid or value not specified");var o=new r({oid:a.oid}),l=s({tag:{tag:"a0",explicit:!0,obj:a.value}}),c=new i({array:[o,l]});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};ce(x.asn1.x509.OtherName,x.asn1.ASN1Object);x.asn1.x509.OID=new function(){var t=x.asn1.DERObjectIdentifier;this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",policyMappings:"2.5.29.33",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",inhibitAnyPolicy:"2.5.29.54",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",smtpUTF8Mailbox:"1.3.6.1.5.5.7.8.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1",smimeMailboxLegacy:"2.23.140.1.5.1.1",smimeMailboxMulti:"2.23.140.1.5.1.2",smimeMailboxStrict:"2.23.140.1.5.1.3",smimeOrganizationLegacy:"2.23.140.1.5.2.1",smimeOrganizationMulti:"2.23.140.1.5.2.2",smimeOrganizationStrict:"2.23.140.1.5.2.3",smimeSponsorLegacy:"2.23.140.1.5.3.1",smimeSponsorMulti:"2.23.140.1.5.3.2",smimeSponsorStrict:"2.23.140.1.5.3.3",smimeIndividualLegacy:"2.23.140.1.5.4.1",smimeIndividualMulti:"2.23.140.1.5.4.2",smimeIndividualStrict:"2.23.140.1.5.4.3"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",GN:"2.5.4.42",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(e){if(typeof this.objCache[e]<"u")return this.objCache[e];if(typeof this.name2oidList[e]>"u")throw"Name of ObjectIdentifier not defined: "+e;var n=this.name2oidList[e],r=new t({oid:n});return this.objCache[e]=r,r},this.atype2obj=function(e){if(this.objCache[e]!==void 0)return this.objCache[e];var n;if(e.match(/^\d+\.\d+\.[0-9.]+$/))n=e;else if(this.atype2oidList[e]!==void 0)n=this.atype2oidList[e];else if(this.name2oidList[e]!==void 0)n=this.name2oidList[e];else throw new Error("AttributeType name undefined: "+e);var r=new t({oid:n});return this.objCache[e]=r,r},this.registerOIDs=function(e){if(this.checkOIDs(e))for(var n in e)this.name2oidList[n]=e[n]},this.checkOIDs=function(e){try{var n=Object.keys(e);return n.length==0?!1:(n.map(function(r,i,s){var a=this[r];if(!a.match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},e),!0)}catch{return!1}}};x.asn1.x509.OID.oid2name=function(t){var e=x.asn1.x509.OID.name2oidList;for(var n in e)if(e[n]==t)return n;return""};x.asn1.x509.OID.oid2atype=function(t){var e=x.asn1.x509.OID.atype2oidList;for(var n in e)if(e[n]==t)return n;return t};x.asn1.x509.OID.name2oid=function(t){if(t.match(/^[0-9.]+$/))return t;var e=x.asn1.x509.OID.name2oidList;return e[t]===void 0?"":e[t]};x.asn1.x509.X509Util={};x.asn1.x509.X509Util.newCertPEM=function(t){var e=x.asn1.x509;e.TBSCertificate;var n=e.Certificate,r=new n(t);return r.getPEM()};(typeof x>"u"||!x)&&(x={});(typeof x.asn1>"u"||!x.asn1)&&(x.asn1={});(typeof x.asn1.cms>"u"||!x.asn1.cms)&&(x.asn1.cms={});x.asn1.cms.Attribute=function(t){var e=Error,n=x,r=n.asn1,i=r.DERSequence,s=r.DERSet,a=r.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(o){this.params=o},this.getValueArray=function(){throw new e("not yet implemented abstract")},this.tohex=function(){var o=new a({oid:this.typeOid}),l=new s({array:this.getValueArray()}),c=new i({array:[o,l]});return c.tohex()},this.getEncodedHex=function(){return this.tohex()}};ce(x.asn1.cms.Attribute,x.asn1.ASN1Object);x.asn1.cms.ContentType=function(t){var e=x,n=e.asn1;n.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){var r=new n.DERObjectIdentifier(this.params.type);return[r]},t!=null&&this.setByParam(t)};ce(x.asn1.cms.ContentType,x.asn1.cms.Attribute);x.asn1.cms.MessageDigest=function(t){var e=x,n=e.asn1,r=n.DEROctetString,i=n.cms;i.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){var s=new r(this.params);return[s]},t!=null&&this.setByParam(t)};ce(x.asn1.cms.MessageDigest,x.asn1.cms.Attribute);x.asn1.cms.SigningTime=function(t){var e=x,n=e.asn1;n.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){var r=new n.x509.Time(this.params);return[r]},t!=null&&this.setByParam(t)};ce(x.asn1.cms.SigningTime,x.asn1.cms.Attribute);x.asn1.cms.SigningCertificate=function(t){var e=Error,n=x,r=n.asn1,i=r.DERSequence,s=r.cms,a=s.ESSCertID;n.crypto,s.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new e("parameter 'array' not specified");for(var o=this.params.array,l=[],c=0;c<o.length;c++){var u=o[c];t.hasis==!1&&typeof u=="string"&&(u.indexOf("-----BEGIN")!=-1||xe.isASN1HEX(u))&&(u={cert:u}),u.hasis!=!1&&t.hasis==!1&&(u.hasis=!1),l.push(new a(u))}var d=new i({array:l}),h=new i({array:[d]});return[h]},t!=null&&this.setByParam(t)};ce(x.asn1.cms.SigningCertificate,x.asn1.cms.Attribute);x.asn1.cms.ESSCertID=function(t){x.asn1.cms.ESSCertID.superclass.constructor.call(this);var e=Error,n=x,r=n.asn1,i=r.DEROctetString,s=r.DERSequence,a=r.cms.IssuerSerial;this.params=null,this.getCertHash=function(o,l){if(o.hash!=null)return o.hash;if(typeof o=="string"&&o.indexOf("-----BEGIN")==-1&&!xe.isASN1HEX(o))return o;var c;if(typeof o=="string")c=o;else if(o.cert!=null)c=o.cert;else throw new e("hash nor cert unspecified");var u;c.indexOf("-----BEGIN")!=-1?u=Gn(c):u=c,typeof o=="string"&&(o.indexOf("-----BEGIN")!=-1?u=Gn(o):xe.isASN1HEX(o)&&(u=o));var d;if(o.alg!=null)d=o.alg;else if(l!=null)d=l;else throw new e("hash alg unspecified");return n.crypto.Util.hashHex(u,d)},this.tohex=function(){var o=this.params,l=this.getCertHash(o,"sha1"),c=[];c.push(new i({hex:l})),(typeof o=="string"&&o.indexOf("-----BEGIN")!=-1||o.cert!=null&&o.hasis!=!1||o.issuer!=null&&o.serial!=null)&&c.push(new a(o));var u=new s({array:c});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.cms.ESSCertID,x.asn1.ASN1Object);x.asn1.cms.SigningCertificateV2=function(t){var e=Error,n=x,r=n.asn1,i=r.DERSequence;r.x509;var s=r.cms,a=s.ESSCertIDv2;n.crypto,s.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new e("parameter 'array' not specified");for(var o=this.params.array,l=[],c=0;c<o.length;c++){var u=o[c];(t.alg!=null||t.hasis==!1)&&typeof u=="string"&&(u.indexOf("-----BEGIN")!=-1||xe.isASN1HEX(u))&&(u={cert:u}),u.alg==null&&t.alg!=null&&(u.alg=t.alg),u.hasis!=!1&&t.hasis==!1&&(u.hasis=!1),l.push(new a(u))}var d=new i({array:l}),h=new i({array:[d]});return[h]},t!=null&&this.setByParam(t)};ce(x.asn1.cms.SigningCertificateV2,x.asn1.cms.Attribute);x.asn1.cms.ESSCertIDv2=function(t){x.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);var e=x,n=e.asn1,r=n.DEROctetString,i=n.DERSequence,s=n.cms.IssuerSerial,a=n.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var o=this.params,l=this.getCertHash(o,"sha256"),c=[];o.alg!=null&&o.alg!="sha256"&&c.push(new a({name:o.alg})),c.push(new r({hex:l})),(typeof o=="string"&&o.indexOf("-----BEGIN")!=-1||o.cert!=null&&o.hasis!=!1||o.issuer!=null&&o.serial!=null)&&c.push(new s(o));var u=new i({array:c});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.cms.ESSCertIDv2,x.asn1.cms.ESSCertID);x.asn1.cms.IssuerSerial=function(t){var e=Error,n=x,r=n.asn1,i=r.DERInteger,s=r.DERSequence,a=r.cms,o=r.x509,l=o.GeneralNames,c=Xe;a.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(u){this.params=u},this.tohex=function(){var u=this.params,d,h;if(typeof u=="string"&&u.indexOf("-----BEGIN")!=-1||u.cert!=null){var p;u.cert!=null?p=u.cert:p=u;var f=new c;f.readCertPEM(p),d=f.getIssuer(),h={hex:f.getSerialNumberHex()}}else if(u.issuer!=null&&u.serial)d=u.issuer,h=u.serial;else throw new e("cert or issuer and serial parameter not specified");var m=new l([{dn:d}]),g=new i(h),v=new s({array:[m,g]});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.cms.IssuerSerial,x.asn1.ASN1Object);x.asn1.cms.SignerIdentifier=function(t){var e=x,n=e.asn1;n.DERInteger,n.DERSequence;var r=n.cms,i=r.IssuerAndSerialNumber,s=r.SubjectKeyIdentifier,a=n.x509;a.X500Name,r.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params;if(o.type=="isssn"){var l=new i(o);return l.tohex()}else if(o.type=="skid"){var c=new s(o);return c.tohex()}else throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.cms.SignerIdentifier,x.asn1.ASN1Object);x.asn1.cms.IssuerAndSerialNumber=function(t){var e=x,n=e.asn1,r=n.DERInteger,i=n.DERSequence,s=n.cms,a=n.x509,o=a.X500Name,l=Xe,c=Error;s.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params,d,h;if(typeof u=="string"&&u.indexOf("-----BEGIN")!=-1||u.cert!=null){var p;u.cert!=null?p=u.cert:p=u;var f=new l;f.readCertPEM(p),d=f.getIssuer(),h={hex:f.getSerialNumberHex()}}else if(u.issuer!=null&&u.serial)d=u.issuer,h=u.serial;else throw new c("cert or issuer and serial parameter not specified");var m=new o(d),g=new r(h),v=new i({array:[m,g]});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(u){this.params=u},t!=null&&this.setByParam(t)};ce(x.asn1.cms.IssuerAndSerialNumber,x.asn1.ASN1Object);x.asn1.cms.SubjectKeyIdentifier=function(t){var e=x,n=e.asn1;n.DERInteger,n.DERSequence;var r=n.ASN1Util.newObject,i=n.cms;i.IssuerAndSerialName,i.SubjectKeyIdentifier;var s=n.x509;s.X500Name;var a=Xe,o=Error;i.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var l=this.params;if(l.cert==null&&l.skid==null)throw new o("property cert nor skid undefined");var c;if(l.cert!=null){var u=new a(l.cert),d=u.getExtSubjectKeyIdentifier();c=d.kid.hex}else l.skid!=null&&(c=l.skid);var h=r({tag:{tage:"a0",obj:{octstr:{hex:c}}}});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.cms.SubjectKeyIdentifier,x.asn1.ASN1Object);x.asn1.cms.AttributeList=function(t){var e=Error,n=x,r=n.asn1,i=r.DERSet,s=r.cms;s.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(a){this.params=a},this.tohex=function(){var a=this.params;if(this.hTLV!=null)return this.hTLV;var o=!0;a.sortflag!=null&&(o=a.sortflag);for(var l=a.array,c=[],u=0;u<l.length;u++){var d=l[u],h=d.attr;if(h=="contentType")c.push(new s.ContentType(d));else if(h=="messageDigest")c.push(new s.MessageDigest(d));else if(h=="signingTime")c.push(new s.SigningTime(d));else if(h=="signingCertificate")c.push(new s.SigningCertificate(d));else if(h=="signingCertificateV2")c.push(new s.SigningCertificateV2(d));else if(h=="signaturePolicyIdentifier")c.push(new x.asn1.cades.SignaturePolicyIdentifier(d));else if(h=="signatureTimeStamp"||h=="timeStampToken")c.push(new x.asn1.cades.SignatureTimeStamp(d));else throw new e("unknown attr: "+h)}var p=new i({array:c,sortflag:o});return this.hTLV=p.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.cms.AttributeList,x.asn1.ASN1Object);x.asn1.cms.SignerInfo=function(t){var e=Error,n=x,r=n.asn1,i=r.DERInteger,s=r.DEROctetString,a=r.DERSequence,o=r.DERTaggedObject,l=r.cms,c=l.SignerIdentifier,u=l.AttributeList;l.ContentType,l.EncapsulatedContentInfo,l.MessageDigest,l.SignedData;var d=r.x509,h=d.AlgorithmIdentifier,p=n.crypto,f=Rt;l.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var m=this.params,g=m.sigalg,v=new u(m.sattrs).tohex(),y=f.getKey(m.signkey),b=new p.Signature({alg:g});b.init(y),b.updateHex(v);var C=b.sign();m.sighex=C},this.tohex=function(){var m=this.params,g=[];if(g.push(new i({int:m.version})),g.push(new c(m.id)),g.push(new h({name:m.hashalg})),m.sattrs!=null){var v=new u(m.sattrs);try{g.push(new o({tag:"a0",explicit:!1,obj:v}))}catch(b){throw new e("si sattr error: "+b)}}if(m.sigalgfield!=null?g.push(new h({name:m.sigalgfield})):g.push(new h({name:m.sigalg})),m.sighex==null&&m.signkey!=null&&this.sign(),g.push(new s({hex:m.sighex})),m.uattrs!=null){var v=new u(m.uattrs);try{g.push(new o({tag:"a1",explicit:!1,obj:v}))}catch(C){throw new e("si uattr error: "+C)}}var y=new a({array:g});return y.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.cms.SignerInfo,x.asn1.ASN1Object);x.asn1.cms.EncapsulatedContentInfo=function(t){var e=x,n=e.asn1,r=n.DERTaggedObject,i=n.DERSequence,s=n.DERObjectIdentifier,a=n.DEROctetString,o=n.cms;o.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params,c=[];if(c.push(new s(l.type)),l.content!=null&&(l.content.hex!=null||l.content.str!=null)&&l.isDetached!=!0){var u=new a(l.content),d=new r({tag:"a0",explicit:!0,obj:u});c.push(d)}var h=new i({array:c});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(l){this.params=l},t!=null&&this.setByParam(t)};ce(x.asn1.cms.EncapsulatedContentInfo,x.asn1.ASN1Object);x.asn1.cms.ContentInfo=function(t){var e=x,n=e.asn1,r=n.DERTaggedObject,i=n.DERSequence,s=n.DERObjectIdentifier,a=n.x509;a.OID.name2obj,x.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params,l=[];l.push(new s(o.type));var c=new r({tag:"a0",explicit:!0,obj:o.obj});l.push(c);var u=new i({array:l});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(o){this.params=o},t!=null&&this.setByParam(t)};ce(x.asn1.cms.ContentInfo,x.asn1.ASN1Object);x.asn1.cms.SignedData=function(t){var e=x,n=e.asn1;n.ASN1Object;var r=n.DERInteger,i=n.DERSet,s=n.DERSequence;n.DERTaggedObject;var a=n.cms,o=a.EncapsulatedContentInfo,l=a.SignerInfo,c=a.ContentInfo,u=a.CertificateSet,d=a.RevocationInfoChoices,h=n.x509,p=h.AlgorithmIdentifier;x.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var f=this.params;this._setDigestAlgs(f),this._setContentTypeByEContent(f),this._setMessageDigestByEContent(f),this._setSignerInfoVersion(f),this._setSignedDataVersion(f)},this._setDigestAlgs=function(f){for(var m={},g=f.sinfos,v=0;v<g.length;v++){var y=g[v];m[y.hashalg]=1}f.hashalgs=Object.keys(m).sort()},this._setContentTypeByEContent=function(f){for(var m=f.econtent.type,g=f.sinfos,v=0;v<g.length;v++){var y=g[v],b=this._getAttrParamByName(y,"contentType");b.type=m}},this._setMessageDigestByEContent=function(f){var m=f.econtent;f.econtent.type;var g=m.content.hex;g==null&&m.type=="data"&&m.content.str!=null&&(g=Ms(m.content.str));for(var v=f.sinfos,y=0;y<v.length;y++){var b=v[y],C=b.hashalg,R=this._getAttrParamByName(b,"messageDigest"),w=x.crypto.Util.hashHex(g,C);R.hex=w}},this._getAttrParamByName=function(f,m){for(var g=f.sattrs.array,v=0;v<g.length;v++)if(g[v].attr==m)return g[v]},this._setSignerInfoVersion=function(f){for(var m=f.sinfos,g=0;g<m.length;g++){var v=m[g],y=1;v.id.type=="skid"&&(y=3),v.version=y}},this._setSignedDataVersion=function(f){var m=this._getSignedDataVersion(f);f.version=m},this._getSignedDataVersion=function(f){if(f.revinfos!=null)for(var m=f.revinfos,g=0;g<m.length;g++){var v=m[g];if(v.ocsp!=null)return 5}for(var y=f.sinfos,g=0;g<y.length;g++){var b=f.sinfos[g];if(b.version==3)return 3}return f.econtent.type!="data"?3:1},this.tohex=function(){var f=this.params;this.getEncodedHexPrepare!=null&&this.getEncodedHexPrepare(),f.fixed!=!0&&this.checkAndFixParam();var m=[];m.push(new r({int:f.version}));for(var g=[],v=0;v<f.hashalgs.length;v++){var y=f.hashalgs[v];g.push(new p({name:y}))}m.push(new i({array:g})),m.push(new o(f.econtent)),f.certs!=null&&m.push(new u(f.certs)),f.revinfos!=null&&m.push(new d(f.revinfos));for(var b=[],v=0;v<f.sinfos.length;v++){var C=f.sinfos[v];b.push(new l(C))}m.push(new i({array:b}));var R=new s({array:m});return R.tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){var f=new c({type:"signed-data",obj:this});return f},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.cms.SignedData,x.asn1.ASN1Object);x.asn1.cms.CertificateSet=function(t){x.asn1.cms.CertificateSet.superclass.constructor.call(this);var e=Error,n=x.asn1,r=n.DERTaggedObject,i=n.DERSet,s=n.ASN1Object;this.params=null,this.tohex=function(){var a=this.params,o=[],l;if(a instanceof Array)l=a;else if(a.array!=null)l=a.array;else throw new e("cert array not specified");for(var c=0;c<l.length;c++){var u=l[c],d=Gn(u),h=new s;h.hTLV=d,o.push(h)}var p={array:o};a.sortflag==!1&&(p.sortflag=!1);var f=new i(p),m=new r({tag:"a0",explicit:!1,obj:f});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.cms.CertificateSet,x.asn1.ASN1Object);x.asn1.cms.RevocationInfoChoices=function(t){x.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(!e instanceof Array)throw new Error("params is not array");for(var n=[],r=0;r<e.length;r++)n.push(new x.asn1.cms.RevocationInfoChoice(e[r]));var i=x.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:n}}});return i.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.cms.RevocationInfoChoices,x.asn1.ASN1Object);x.asn1.cms.RevocationInfoChoice=function(t){x.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(e.crl!=null&&typeof e.crl=="string"){var n=e.crl;return e.crl.indexOf("-----BEGIN")!=-1&&(n=Gn(e.crl)),n}else if(e.ocsp!=null){var r=x.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new x.asn1.cms.OtherRevocationFormat(e)}});return r.tohex()}else throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.cms.RevocationInfoChoice,x.asn1.ASN1Object);x.asn1.cms.OtherRevocationFormat=function(t){x.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var e=Error,n=x,r=n.asn1,i=r.ASN1Util.newObject,s=n.lang.String.isHex;this.params=null,this.tohex=function(){var a=this.params;if(a.ocsp==null)throw new e("property ocsp not specified");if(!s(a.ocsp)||!xe.isASN1HEX(a.ocsp))throw new e("ocsp value not ASN.1 hex string");var o=i({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:a.ocsp}}]});return o.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.cms.OtherRevocationFormat,x.asn1.ASN1Object);x.asn1.cms.CMSUtil=new function(){};x.asn1.cms.CMSUtil.newSignedData=function(t){return new x.asn1.cms.SignedData(t)};x.asn1.cms.CMSUtil.verifySignedData=function(t){var e=x,n=e.asn1,r=n.cms;r.SignerInfo,r.SignedData,r.SigningTime,r.SigningCertificate,r.SigningCertificateV2;var i=n.cades;i.SignaturePolicyIdentifier;var s=e.lang.String.isHex,a=xe,o=a.getVbyList,l=a.getTLVbyList,c=a.getIdxbyList,u=a.getChildIdx,d=a.getTLV,h=a.oidname,p=e.crypto.Util.hashHex;t.cms===void 0&&s(t.cms);var f=t.cms,m=function(k,T){for(var _,D=3;D<6;D++)if(_=c(k,0,[1,0,D]),_!==void 0){var I=k.substr(_,2);I==="a0"&&(T.certsIdx=_),I==="a1"&&(T.revinfosIdx=_),I==="31"&&(T.signerinfosIdx=_)}},g=function(k,T){var _=T.signerinfosIdx;if(_!==void 0){var D=u(k,_);T.signerInfoIdxList=D;for(var I=0;I<D.length;I++){var M=D[I],A={idx:M};v(k,A),T.signerInfos.push(A)}}},v=function(k,T){var _=T.idx;T.signerid_issuer1=l(k,_,[1,0],"30"),T.signerid_serial1=o(k,_,[1,1],"02"),T.hashalg=h(o(k,_,[2,0],"06"));var D=c(k,_,[3],"a0");T.idxSignedAttrs=D,y(k,T,D);var I=u(k,_),M=I.length;if(M<6)throw"malformed SignerInfo";T.sigalg=h(o(k,_,[M-2,0],"06")),T.sigval=o(k,_,[M-1],"04")},y=function(k,T,_){var D=u(k,_);T.signedAttrIdxList=D;for(var I=0;I<D.length;I++){var M=D[I],A=o(k,M,[0],"06"),O;A==="2a864886f70d010905"?(O=Mt(o(k,M,[1,0])),T.saSigningTime=O):A==="2a864886f70d010904"&&(O=o(k,M,[1,0],"04"),T.saMessageDigest=O)}},b=function(k,T){if(o(k,0,[0],"06")!=="2a864886f70d010702")return T;T.cmsType="signedData",T.econtent=o(k,0,[1,0,2,1,0]),m(k,T),T.signerInfos=[],g(k,T)},C=function(k,T){for(var _=T.parse.signerInfos,D=_.length,I=!0,M=0;M<D;M++){var A=_[M];w(k,T,A),A.isValid||(I=!1)}T.isValid=I},R=function(k,T,_,D){var I=T.parse.certsIdx,M;if(T.certs===void 0){M=[],T.certkeys=[];for(var A=u(k,I),O=0;O<A.length;O++){var L=d(k,A[O]),F=new Xe;F.readCertHex(L),M[O]=F,T.certkeys[O]=F.getPublicKey()}T.certs=M}else M=T.certs;T.cccc=M.length,T.cccci=A.length;for(var O=0;O<M.length;O++){var B=F.getIssuerHex(),j=F.getSerialNumberHex();_.signerid_issuer1===B&&_.signerid_serial1===j&&(_.certkey_idx=O)}},w=function(k,T,_,D){_.verifyDetail={};var I=_.verifyDetail,M=T.parse.econtent,A=_.hashalg,O=_.saMessageDigest;I.validMessageDigest=!1,p(M,A)===O&&(I.validMessageDigest=!0),R(k,T,_),I.validSignatureValue=!1;var L=_.sigalg,F="31"+d(k,_.idxSignedAttrs).substr(2);_.signedattrshex=F;var B=T.certs[_.certkey_idx].getPublicKey(),j=new x.crypto.Signature({alg:L});j.init(B),j.updateHex(F);var q=j.verify(_.sigval);I.validSignatureValue_isValid=q,q===!0&&(I.validSignatureValue=!0),_.isValid=!1,I.validMessageDigest&&I.validSignatureValue&&(_.isValid=!0)},E={isValid:!1,parse:{}};return b(f,E.parse),C(f,E),E};x.asn1.cms.CMSParser=function(){var t=Error,e=Xe,n=new e,r=xe,i=r.getV,s=r.getTLV;r.getIdxbyList;var a=r.getTLVbyList,o=r.getTLVbyListEx,l=r.getVbyList,c=r.getVbyListEx,u=r.getChildIdx;this.getCMSSignedData=function(d){var h=a(d,0,[1,0]),p=this.getSignedData(h);return p},this.getSignedData=function(d){var h=u(d,0),p={},f=i(d,h[0]),m=parseInt(f,16);p.version=m;var g=s(d,h[1]);p.hashalgs=this.getHashAlgArray(g);var v=s(d,h[2]);p.econtent=this.getEContent(v);var y=o(d,0,["[0]"]);y!=null&&(p.certs=this.getCertificateSet(y)),o(d,0,["[1]"]);var b=o(d,0,[3]);return p.sinfos=this.getSignerInfos(b),p},this.getHashAlgArray=function(d){for(var h=u(d,0),p=new e,f=[],m=0;m<h.length;m++){var g=s(d,h[m]),v=p.getAlgorithmIdentifierName(g);f.push(v)}return f},this.getEContent=function(d){var h={},p=l(d,0,[0]),f=l(d,0,[1,0]);return h.type=x.asn1.x509.OID.oid2name(xe.hextooidstr(p)),h.content={hex:f},h},this.getSignerInfos=function(d){for(var h=[],p=u(d,0),f=0;f<p.length;f++){var m=s(d,p[f]),g=this.getSignerInfo(m);h.push(g)}return h},this.getSignerInfo=function(d){var h={},p=u(d,0),f=r.getInt(d,p[0],-1);f!=-1&&(h.version=f);var m=s(d,p[1]),g=this.getIssuerAndSerialNumber(m);h.id=g;var v=s(d,p[2]),y=n.getAlgorithmIdentifierName(v);h.hashalg=y;var b=o(d,0,["[0]"]);if(b!=null){var C=this.getAttributeList(b);h.sattrs=C}var R=o(d,0,[3]),w=n.getAlgorithmIdentifierName(R);h.sigalg=w;var E=c(d,0,[4]);h.sighex=E;var k=o(d,0,["[1]"]);if(k!=null){var T=this.getAttributeList(k);h.uattrs=T}return h},this.getSignerIdentifier=function(d){if(d.substr(0,2)=="30")return this.getIssuerAndSerialNumber(d);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(d){var h={type:"isssn"},p=u(d,0),f=s(d,p[0]);h.issuer=n.getX500Name(f);var m=i(d,p[1]);return h.serial={hex:m},h},this.getAttributeList=function(d){for(var h=[],p=u(d,0),f=0;f<p.length;f++){var m=s(d,p[f]),g=this.getAttribute(m);h.push(g)}return{array:h}},this.getAttribute=function(d){var h={},p=u(d,0),f=r.getOID(d,p[0]),m=x.asn1.x509.OID.oid2name(f);h.attr=m;var g=s(d,p[1]),v=u(g,0);if(v.length==1)h.valhex=s(g,v[0]);else{for(var y=[],b=0;b<v.length;b++)y.push(s(g,v[b]));h.valhex=y}return m=="contentType"?this.setContentType(h):m=="messageDigest"?this.setMessageDigest(h):m=="signingTime"?this.setSigningTime(h):m=="signingCertificate"?this.setSigningCertificate(h):m=="signingCertificateV2"?this.setSigningCertificateV2(h):m=="signaturePolicyIdentifier"&&this.setSignaturePolicyIdentifier(h),h},this.setContentType=function(d){var h=r.getOIDName(d.valhex,0,null);h!=null&&(d.type=h,delete d.valhex)},this.setSigningTime=function(d){var h=i(d.valhex,0),p=Mt(h);d.str=p,delete d.valhex},this.setMessageDigest=function(d){var h=i(d.valhex,0);d.hex=h,delete d.valhex},this.setSigningCertificate=function(d){var h=u(d.valhex,0);if(h.length>0){for(var p=s(d.valhex,h[0]),f=u(p,0),m=[],g=0;g<f.length;g++){var v=s(p,f[g]),y=this.getESSCertID(v);m.push(y)}d.array=m}if(h.length>1){var b=s(d.valhex,h[1]);d.polhex=b}delete d.valhex},this.setSignaturePolicyIdentifier=function(d){var h=u(d.valhex,0);if(h.length>0){var p=r.getOID(d.valhex,h[0]);d.oid=p}if(h.length>1){var f=new e,m=u(d.valhex,h[1]),g=s(d.valhex,m[0]),v=f.getAlgorithmIdentifierName(g);d.alg=v;var y=i(d.valhex,m[1]);d.hash=y}delete d.valhex},this.setSigningCertificateV2=function(d){var h=u(d.valhex,0);if(h.length>0){for(var p=s(d.valhex,h[0]),f=u(p,0),m=[],g=0;g<f.length;g++){var v=s(p,f[g]),y=this.getESSCertIDv2(v);m.push(y)}d.array=m}if(h.length>1){var b=s(d.valhex,h[1]);d.polhex=b}delete d.valhex},this.getESSCertID=function(d){var h={},p=u(d,0);if(p.length>0){var f=i(d,p[0]);h.hash=f}if(p.length>1){var m=s(d,p[1]),g=this.getIssuerSerial(m);g.serial!=null&&(h.serial=g.serial),g.issuer!=null&&(h.issuer=g.issuer)}return h},this.getESSCertIDv2=function(d){var h={},p=u(d,0);if(p.length<1||3<p.length)throw new t("wrong number of elements");var f=0;if(d.substr(p[0],2)=="30"){var m=s(d,p[0]);h.alg=n.getAlgorithmIdentifierName(m),f++}else h.alg="sha256";var g=i(d,p[f]);if(h.hash=g,p.length>f+1){var v=s(d,p[f+1]),y=this.getIssuerSerial(v);h.issuer=y.issuer,h.serial=y.serial}return h},this.getIssuerSerial=function(d){var h={},p=u(d,0),f=s(d,p[0]),m=n.getGeneralNames(f),g=m[0].dn;h.issuer=g;var v=i(d,p[1]);return h.serial={hex:v},h},this.getCertificateSet=function(d){for(var h=u(d,0),p=[],f=0;f<h.length;f++){var m=s(d,h[f]);if(m.substr(0,2)=="30"){var g=fr(m,"CERTIFICATE");p.push(g)}}return{array:p,sortflag:!1}}};(typeof x>"u"||!x)&&(x={});(typeof x.asn1>"u"||!x.asn1)&&(x.asn1={});(typeof x.asn1.tsp>"u"||!x.asn1.tsp)&&(x.asn1.tsp={});x.asn1.tsp.TimeStampToken=function(t){var e=x,n=e.asn1,r=n.tsp;r.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var i=new r.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=i.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.tsp.TimeStampToken,x.asn1.cms.SignedData);x.asn1.tsp.TSTInfo=function(t){var e=x,n=e.asn1,r=n.DERSequence,i=n.DERInteger,s=n.DERBoolean,a=n.DERGeneralizedTime,o=n.DERObjectIdentifier,l=n.DERTaggedObject,c=n.tsp,u=c.MessageImprint,d=c.Accuracy;n.x509.X500Name;var h=n.x509.GeneralName;if(c.TSTInfo.superclass.constructor.call(this),this.dVersion=new i({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var p=[this.dVersion];if(this.dPolicy==null)throw new Error("policy shall be specified.");if(p.push(this.dPolicy),this.dMessageImprint==null)throw new Error("messageImprint shall be specified.");if(p.push(this.dMessageImprint),this.dSerial==null)throw new Error("serialNumber shall be specified.");if(p.push(this.dSerial),this.dGenTime==null)throw new Error("genTime shall be specified.");p.push(this.dGenTime),this.dAccuracy!=null&&p.push(this.dAccuracy),this.dOrdering!=null&&p.push(this.dOrdering),this.dNonce!=null&&p.push(this.dNonce),this.dTsa!=null&&p.push(this.dTsa);var f=new r({array:p});return this.hTLV=f.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0){if(typeof t.policy=="string"){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:t.policy})}t.messageImprint!==void 0&&(this.dMessageImprint=new u(t.messageImprint)),t.serial!==void 0&&(this.dSerial=new i(t.serial)),t.genTime!==void 0&&(this.dGenTime=new a(t.genTime)),t.accuracy!==void 0&&(this.dAccuracy=new d(t.accuracy)),t.ordering!==void 0&&t.ordering==!0&&(this.dOrdering=new s),t.nonce!==void 0&&(this.dNonce=new i(t.nonce)),t.tsa!==void 0&&(this.dTsa=new l({tag:"a0",explicit:!0,obj:new h({dn:t.tsa})}))}};ce(x.asn1.tsp.TSTInfo,x.asn1.ASN1Object);x.asn1.tsp.Accuracy=function(t){var e=x,n=e.asn1,r=n.ASN1Util.newObject;n.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var i=this.params,s=[];return i.seconds!=null&&typeof i.seconds=="number"&&s.push({int:i.seconds}),i.millis!=null&&typeof i.millis=="number"&&s.push({tag:{tagi:"80",obj:{int:i.millis}}}),i.micros!=null&&typeof i.micros=="number"&&s.push({tag:{tagi:"81",obj:{int:i.micros}}}),r({seq:s}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.tsp.Accuracy,x.asn1.ASN1Object);x.asn1.tsp.MessageImprint=function(t){var e=x,n=e.asn1,r=n.DERSequence,i=n.DEROctetString,s=n.x509,a=s.AlgorithmIdentifier;n.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params,l=new a({name:o.alg}),c=new i({hex:o.hash}),u=new r({array:[l,c]});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};ce(x.asn1.tsp.MessageImprint,x.asn1.ASN1Object);x.asn1.tsp.TimeStampReq=function(t){var e=x,n=e.asn1,r=n.DERSequence,i=n.DERInteger,s=n.DERBoolean;n.ASN1Object;var a=n.DERObjectIdentifier,o=n.tsp,l=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var c=this.params,u=[];u.push(new i({int:1})),c.messageImprint instanceof x.asn1.ASN1Object?u.push(c.messageImprint):u.push(new l(c.messageImprint)),c.policy!=null&&u.push(new a(c.policy)),c.nonce!=null&&u.push(new i(c.nonce)),c.certreq==!0&&u.push(new s);var d=new r({array:u});return d.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.tsp.TimeStampReq,x.asn1.ASN1Object);x.asn1.tsp.TimeStampResp=function(t){var e=x,n=e.asn1,r=n.DERSequence;n.ASN1Object;var i=n.tsp,s=i.PKIStatusInfo;i.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var a=this.params,o=[];if(a.econtent!=null||a.tst!=null)if(a.statusinfo!=null?o.push(new s(a.statusinfo)):o.push(new s("granted")),a.econtent!=null)o.push(new i.TimeStampToken(a).getContentInfo());else if(a.tst instanceof n.ASN1Object)o.push(a.tst);else throw new Error("improper member tst value");else if(a.statusinfo!=null)o.push(new s(a.statusinfo));else throw new Error("parameter for token nor statusinfo not specified");var l=new r({array:o});return l.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.tsp.TimeStampResp,x.asn1.ASN1Object);x.asn1.tsp.PKIStatusInfo=function(t){var e=Error,n=x,r=n.asn1,i=r.DERSequence,s=r.tsp,a=s.PKIStatus,o=s.PKIFreeText,l=s.PKIFailureInfo;s.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var c=this.params,u=[];if(typeof c=="string")u.push(new a(c));else{if(c.status==null)throw new e("property 'status' unspecified");u.push(new a(c.status)),c.statusstr!=null&&u.push(new o(c.statusstr)),c.failinfo!=null&&u.push(new l(c.failinfo))}var d=new i({array:u});return d.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.tsp.PKIStatusInfo,x.asn1.ASN1Object);x.asn1.tsp.PKIStatus=function(t){var e=Error,n=x,r=n.asn1,i=r.DERInteger,s=r.tsp;s.PKIStatus.superclass.constructor.call(this);var a={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var o=this.params,l;if(typeof o=="string")try{l=a[o]}catch{throw new e("undefined name: "+o)}else if(typeof o=="number")l=o;else throw new e("unsupported params");return new i({int:l}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.tsp.PKIStatus,x.asn1.ASN1Object);x.asn1.tsp.PKIFreeText=function(t){var e=Error,n=x,r=n.asn1,i=r.DERSequence,s=r.DERUTF8String,a=r.tsp;a.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params;if(!o instanceof Array)throw new e("wrong params: not array");for(var l=[],c=0;c<o.length;c++)l.push(new s({str:o[c]}));var u=new i({array:l});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.tsp.PKIFreeText,x.asn1.ASN1Object);x.asn1.tsp.PKIFailureInfo=function(t){var e=Error,n=x,r=n.asn1,i=r.DERBitString,s=r.tsp,a=s.PKIFailureInfo,o={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};a.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var l=this.params,c=0;if(typeof l=="number"&&0<=l&&l<=25){c|=1<<l;for(var u=c.toString(2),d="",h=u.length-1;h>=0;h--)d+=u[h];return d}else{if(typeof l=="string"&&o[l]!=null)return c2([l],o);if(typeof l=="object"&&l.length!=null)return c2(l,o);throw new e("wrong params")}},this.tohex=function(){this.params;var l=this.getBinValue();return new i({bin:l}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.tsp.PKIFailureInfo,x.asn1.ASN1Object);x.asn1.tsp.AbstractTSAAdapter=function(t){this.getTSTHex=function(e,n){throw"not implemented yet"}};x.asn1.tsp.SimpleTSAAdapter=function(t){var e=x,n=e.asn1,r=n.tsp,i=e.crypto.Util.hashHex;r.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(s,a){var o=i(s,a);this.params.econtent.content.messageImprint={alg:a,hash:o},this.params.econtent.content.serial={int:this.serial++};var l=Math.floor(Math.random()*1e9);this.params.econtent.content.nonce={int:l};var c=new r.TimeStampToken(this.params);return c.getContentInfoEncodedHex()},t!==void 0&&(this.params=t)};ce(x.asn1.tsp.SimpleTSAAdapter,x.asn1.tsp.AbstractTSAAdapter);x.asn1.tsp.FixedTSAAdapter=function(t){var e=x,n=e.asn1,r=n.tsp,i=e.crypto.Util.hashHex;r.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(s,a){var o=i(s,a);this.params.econtent.content.messageImprint={alg:a,hash:o};var l=new r.TimeStampToken(this.params);return l.getContentInfoEncodedHex()},t!==void 0&&(this.params=t)};ce(x.asn1.tsp.FixedTSAAdapter,x.asn1.tsp.AbstractTSAAdapter);x.asn1.tsp.TSPUtil=new function(){};x.asn1.tsp.TSPUtil.newTimeStampToken=function(t){return new x.asn1.tsp.TimeStampToken(t)};x.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){var e=new x.asn1.tsp.TSPParser;return e.getTimeStampReq(t)};x.asn1.tsp.TSPUtil.parseMessageImprint=function(t){var e=new x.asn1.tsp.TSPParser;return e.getMessageImprint(t)};x.asn1.tsp.TSPParser=function(){var t=Xe,e=new t,n=xe,r=n.getV,i=n.getTLV,s=n.getIdxbyList;n.getTLVbyListEx;var a=n.getChildIdx,o=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],l={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(c){var u=a(c,0);if(u.length==1)return this.getPKIStatusInfo(i(c,u[0]));if(u.length>1){var d=this.getPKIStatusInfo(i(c,u[0])),h=i(c,u[1]),p=this.getToken(h);return p.statusinfo=d,p}},this.getToken=function(c){var u=new x.asn1.cms.CMSParser,d=u.getCMSSignedData(c);return this.setTSTInfo(d),d},this.setTSTInfo=function(c){var u=c.econtent;if(u.type=="tstinfo"){var d=u.content.hex,h=this.getTSTInfo(d);u.content=h}},this.getTSTInfo=function(c){var u={},d=a(c,0),h=r(c,d[1]);u.policy=Sk(h);var p=i(c,d[2]);u.messageImprint=this.getMessageImprint(p);var f=r(c,d[3]);u.serial={hex:f};var m=r(c,d[4]);u.genTime={str:Mt(m)};var g=0;if(d.length>5&&c.substr(d[5],2)=="30"){var v=i(c,d[5]);u.accuracy=this.getAccuracy(v),g++}if(d.length>5+g&&c.substr(d[5+g],2)=="01"){var y=r(c,d[5+g]);y=="ff"&&(u.ordering=!0),g++}if(d.length>5+g&&c.substr(d[5+g],2)=="02"){var b=r(c,d[5+g]);u.nonce={hex:b},g++}if(d.length>5+g&&c.substr(d[5+g],2)=="a0"){var C=i(c,d[5+g]);C="30"+C.substr(2),pGeneralNames=e.getGeneralNames(C);var R=pGeneralNames[0].dn;u.tsa=R,g++}if(d.length>5+g&&c.substr(d[5+g],2)=="a1"){var w=i(c,d[5+g]);w="30"+w.substr(2);var E=e.getExtParamArray(w);u.ext=E,g++}return u},this.getAccuracy=function(c){for(var u={},d=a(c,0),h=0;h<d.length;h++){var p=c.substr(d[h],2),f=r(c,d[h]),m=parseInt(f,16);p=="02"?u.seconds=m:p=="80"?u.millis=m:p=="81"&&(u.micros=m)}return u},this.getMessageImprint=function(c){if(c.substr(0,2)!="30")throw new Error("head of messageImprint hex shall be x30");var u={};a(c,0);var d=s(c,0,[0,0]),h=r(c,d),p=n.hextooidstr(h),f=x.asn1.x509.OID.oid2name(p);if(f=="")throw new Error("hashAlg name undefined: "+p);var m=f,g=s(c,0,[1]);return u.alg=m,u.hash=r(c,g),u},this.getPKIStatusInfo=function(c){var u={},d=a(c,0),h=0;try{var p=r(c,d[0]),f=parseInt(p,16);u.status=o[f]}catch{}if(d.length>1&&c.substr(d[1],2)=="30"){var m=i(c,d[1]);u.statusstr=this.getPKIFreeText(m),h++}if(d.length>h&&c.substr(d[1+h],2)=="03"){var g=i(c,d[1+h]);u.failinfo=this.getPKIFailureInfo(g)}return u},this.getPKIFreeText=function(c){for(var u=[],d=a(c,0),h=0;h<d.length;h++)u.push(n.getString(c,d[h]));return u},this.getPKIFailureInfo=function(c){var u=n.getInt(c,0);return l[u]!=null?l[u]:u},this.getTimeStampReq=function(c){var u={};u.certreq=!1;var d=a(c,0);if(d.length<2)throw new Error("TimeStampReq must have at least 2 items");var h=i(c,d[1]);u.messageImprint=x.asn1.tsp.TSPUtil.parseMessageImprint(h);for(var p=2;p<d.length;p++){var f=d[p],m=c.substr(f,2);if(m=="06"){var g=r(c,f);u.policy=n.hextooidstr(g)}m=="02"&&(u.nonce=r(c,f)),m=="01"&&(u.certreq=!0)}return u}};(typeof x>"u"||!x)&&(x={});(typeof x.asn1>"u"||!x.asn1)&&(x.asn1={});(typeof x.asn1.cades>"u"||!x.asn1.cades)&&(x.asn1.cades={});x.asn1.cades.SignaturePolicyIdentifier=function(t){var e=x,n=e.asn1,r=n.cades,i=r.SignaturePolicyId;r.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new i(this.params)]},this.setByParam=function(s){this.params=s},t!=null&&this.setByParam(t)};ce(x.asn1.cades.SignaturePolicyIdentifier,x.asn1.cms.Attribute);x.asn1.cades.SignaturePolicyId=function(t){var e=x,n=e.asn1,r=n.DERSequence,i=n.DERObjectIdentifier,s=n.x509;s.AlgorithmIdentifier;var a=n.cades,o=a.SignaturePolicyId,l=a.OtherHashAlgAndValue;o.superclass.constructor.call(this),this.params=null,this.tohex=function(){var c=this.params,u=[];u.push(new i(c.oid)),u.push(new l(c));var d=new r({array:u});return d.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(c){this.params=c},t!=null&&this.setByParam(t)};ce(x.asn1.cades.SignaturePolicyId,x.asn1.ASN1Object);x.asn1.cades.OtherHashAlgAndValue=function(t){var e=Error,n=x,r=n.asn1,i=r.DERSequence,s=r.DEROctetString,a=r.x509,o=a.AlgorithmIdentifier,l=r.cades,c=l.OtherHashAlgAndValue;c.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params;if(u.alg==null)throw new e("property 'alg' not specified");if(u.hash==null&&u.cert==null)throw new e("property 'hash' nor 'cert' not specified");var d=null;if(u.hash!=null)d=u.hash;else if(u.cert!=null){if(typeof u.cert!="string")throw new e("cert not string");var h=u.cert;u.cert.indexOf("-----BEGIN")!=-1&&(h=Gn(u.cert)),d=x.crypto.Util.hashHex(h,u.alg)}var p=[];p.push(new o({name:u.alg})),p.push(new s({hex:d}));var f=new i({array:p});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.cades.OtherHashAlgAndValue,x.asn1.ASN1Object);x.asn1.cades.OtherHashValue=function(t){x.asn1.cades.OtherHashValue.superclass.constructor.call(this);var e=Error,n=x;n.lang.String.isHex;var r=n.asn1,i=r.DEROctetString;n.crypto.Util.hashHex,this.params=null,this.tohex=function(){var s=this.params;if(s.hash==null&&s.cert==null)throw new e("hash or cert not specified");var a=null;if(s.hash!=null)a=s.hash;else if(s.cert!=null){if(typeof s.cert!="string")throw new e("cert not string");var o=s.cert;s.cert.indexOf("-----BEGIN")!=-1&&(o=Gn(s.cert)),a=x.crypto.Util.hashHex(o,"sha1")}return new i({hex:a}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.cades.OtherHashValue,x.asn1.ASN1Object);x.asn1.cades.SignatureTimeStamp=function(t){var e=Error,n=x,r=n.lang.String.isHex,i=n.asn1,s=i.ASN1Object;i.x509;var a=i.cades;a.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var o=this.params;if(o.tst!=null)if(r(o.tst)){var l=new s;return l.hTLV=o.tst,[l]}else{if(o.tst instanceof s)return[o.tst];throw new e("params.tst has wrong value")}else if(o.res!=null){var c=o.res;if(c instanceof s&&(c=c.tohex()),typeof c!="string"||!r(c))throw new e("params.res has wrong value");xe.getTLVbyList(c,0,[1]);var l=new s;return l.hTLV=o.tst,[l]}},t!=null&&this.setByParam(t)};ce(x.asn1.cades.SignatureTimeStamp,x.asn1.cms.Attribute);x.asn1.cades.CompleteCertificateRefs=function(t){var e=Error,n=x,r=n.asn1,i=r.DERSequence,s=r.cades,a=s.OtherCertID,o=n.lang.String.isHex;s.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var l=this.params,c=[],u=0;u<l.array.length;u++){var d=l.array[u];if(typeof d=="string")if(d.indexOf("-----BEGIN")!=-1)d={cert:d};else if(o(d))d={hash:d};else throw new e("unsupported value: "+d);l.alg!=null&&d.alg==null&&(d.alg=l.alg),l.hasis!=null&&d.hasis==null&&(d.hasis=l.hasis);var h=new a(d);c.push(h)}var p=new i({array:c});return[p]},t!=null&&this.setByParam(t)};ce(x.asn1.cades.CompleteCertificateRefs,x.asn1.cms.Attribute);x.asn1.cades.OtherCertID=function(t){var e=x,n=e.asn1,r=n.DERSequence,i=n.cms,s=i.IssuerSerial,a=n.cades,o=a.OtherHashValue,l=a.OtherHashAlgAndValue;a.OtherCertID.superclass.constructor.call(this),this.params=t,this.tohex=function(){var c=this.params;typeof c=="string"&&(c.indexOf("-----BEGIN")!=-1?c={cert:c}:_isHex(c)&&(c={hash:c}));var u=[],d=null;if(c.alg!=null?d=new l(c):d=new o(c),u.push(d),c.cert!=null&&c.hasis==!0||c.issuer!=null&&c.serial!=null){var h=new s(c);u.push(h)}var p=new r({array:u});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.cades.OtherCertID,x.asn1.ASN1Object);x.asn1.cades.OtherHash=function(t){var e=x,n=e.asn1;n.cms;var r=n.cades,i=r.OtherHashAlgAndValue,s=r.OtherHashValue;e.crypto.Util.hashHex;var a=e.lang.String.isHex;r.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params;typeof o=="string"&&(o.indexOf("-----BEGIN")!=-1?o={cert:o}:a(o)&&(o={hash:o}));var l=null;return o.alg!=null?l=new i(o):l=new s(o),l.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};ce(x.asn1.cades.OtherHash,x.asn1.ASN1Object);x.asn1.cades.CAdESUtil=new function(){};x.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){var e=new x.asn1.cms.CMSParser,n=e.getCMSSignedData(t);return n};x.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,e,n){var r=xe,i=r.getChildIdx,s=r.getTLV,a=r.getV,o=x,l=o.asn1,c=l.ASN1Object,u=l.cms,d=u.AttributeList,h=u.SignerInfo,p={},f=i(t,e);if(f.length!=6)throw"not supported items for SignerInfo (!=6)";var m=f.shift();p.version=s(t,m);var g=f.shift();p.si=s(t,g);var v=f.shift();p.digalg=s(t,v);var y=f.shift();p.sattrs=s(t,y);var b=f.shift();p.sigalg=s(t,b);var C=f.shift();p.sig=s(t,C),p.sigval=a(t,C);var R=null;return p.obj=new h,R=new c,R.hTLV=p.version,p.obj.dCMSVersion=R,R=new c,R.hTLV=p.si,p.obj.dSignerIdentifier=R,R=new c,R.hTLV=p.digalg,p.obj.dDigestAlgorithm=R,R=new c,R.hTLV=p.sattrs,p.obj.dSignedAttrs=R,R=new c,R.hTLV=p.sigalg,p.obj.dSigAlg=R,R=new c,R.hTLV=p.sig,p.obj.dSig=R,p.obj.dUnsignedAttrs=new d,p};(typeof x.asn1.csr>"u"||!x.asn1.csr)&&(x.asn1.csr={});x.asn1.csr.CertificationRequest=function(t){var e=x,n=e.asn1,r=n.DERBitString,i=n.DERSequence,s=n.csr;n.x509;var a=s.CertificationRequestInfo;s.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(o){this.params=o},this.sign=function(){var o=new a(this.params).tohex(),l=new x.crypto.Signature({alg:this.params.sigalg});l.init(this.params.sbjprvkey),l.updateHex(o);var c=l.sign();this.params.sighex=c},this.getPEM=function(){return fr(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var o=this.params,l=new x.asn1.csr.CertificationRequestInfo(this.params),c=new x.asn1.x509.AlgorithmIdentifier({name:o.sigalg});if(o.sighex==null&&o.sbjprvkey!=null&&this.sign(),o.sighex==null)throw new Error("sighex or sbjprvkey parameter not defined");var u=new r({hex:"00"+o.sighex}),d=new i({array:[l,c,u]});return d.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};ce(x.asn1.csr.CertificationRequest,x.asn1.ASN1Object);x.asn1.csr.CertificationRequestInfo=function(t){var e=x,n=e.asn1;n.DERBitString;var r=n.DERSequence,i=n.DERInteger,s=n.DERUTF8String,a=n.DERTaggedObject,o=n.ASN1Util.newObject,l=n.csr,c=n.x509,u=c.X500Name,d=c.Extensions,h=c.SubjectPublicKeyInfo;l.AttributeList,l.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(f){f!=null&&(this.params=f)},this.tohex=function(){var f=this.params,m=[];if(m.push(new i({int:0})),m.push(new u(f.subject)),m.push(new h(Rt.getKey(f.sbjpubkey))),f.attrs!=null){var g=p(f.attrs),v=o({tag:{tage:"a0",obj:g}});m.push(v)}else if(f.extreq!=null){var y=new d(f.extreq),v=o({tag:{tage:"a0",obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[y]}]}}});m.push(v)}else m.push(new a({tag:"a0",explicit:!1,obj:new s({str:""})}));var b=new r({array:m});return b.tohex()},this.getEncodedHex=function(){return this.tohex()};function p(f){for(var m=Error,g=x.asn1.x509.Extensions,v=[],y=0;y<f.length;y++){var b=f[y],C=b.attr;if(C=="extensionRequest"){var R=new g(b.ext),w={seq:[{oid:"1.2.840.113549.1.9.14"},{set:[R]}]};v.push(w)}else if(C=="unstructuredName"){var w={seq:[{oid:"1.2.840.113549.1.9.2"},{set:b.names}]};v.push(w)}else if(C=="challengePassword"){var w={seq:[{oid:"1.2.840.113549.1.9.7"},{set:[{utf8str:b.password}]}]};v.push(w)}else throw new m("unknown CSR attribute")}return{set:v}}t!=null&&this.setByParam(t)};ce(x.asn1.csr.CertificationRequestInfo,x.asn1.ASN1Object);x.asn1.csr.AttributeList=function(t){};ce(x.asn1.csr.AttributeList,x.asn1.ASN1Object);x.asn1.csr.CSRUtil=new function(){};x.asn1.csr.CSRUtil.newCSRPEM=function(t){var e=x.asn1.csr,n=new e.CertificationRequest(t),r=n.getPEM();return r};x.asn1.csr.CSRUtil.getParam=function(t,e){var n=xe,r=n.getV,i=n.getIdxbyList,s=n.getTLVbyList,a=n.getTLVbyListEx,o=n.getVbyListEx,l=function(y){var b=i(y,0,[0,3,0,0],"06");return r(y,b)!="2a864886f70d01090e"?null:s(y,0,[0,3,0,1,0],"30")},c={};if(t.indexOf("-----BEGIN CERTIFICATE REQUEST")==-1)throw new Error("argument is not PEM file");var u=Gn(t,"CERTIFICATE REQUEST");e&&(c.tbs=s(u,0,[0]));try{var d=a(u,0,[0,1]);if(d=="3000")c.subject={};else{var m=new Xe;c.subject=m.getX500Name(d)}}catch{}var h=a(u,0,[0,2]),p=Rt.getKey(h,null,"pkcs8pub");c.sbjpubkey=Rt.getPEM(p,"PKCS8PUB");var f=l(u),m=new Xe;f!=null&&(c.extreq=m.getExtParamArray(f));try{var g=a(u,0,[1],"30"),m=new Xe;c.sigalg=m.getAlgorithmIdentifierName(g)}catch{}try{var v=o(u,0,[2]);c.sighex=v}catch{}return c};x.asn1.csr.CSRUtil.verifySignature=function(t){try{var e=null;if(typeof t=="string"&&t.indexOf("-----BEGIN CERTIFICATE REQUEST")!=-1?e=x.asn1.csr.CSRUtil.getParam(t,!0):typeof t=="object"&&t.sbjpubkey!=null&&t.sigalg!=null&&t.sighex!=null&&t.tbs!=null&&(e=t),e==null)return!1;var n=new x.crypto.Signature({alg:e.sigalg});return n.init(e.sbjpubkey),n.updateHex(e.tbs),n.verify(e.sighex)}catch(r){return alert(r),!1}};(typeof x>"u"||!x)&&(x={});(typeof x.asn1>"u"||!x.asn1)&&(x.asn1={});(typeof x.asn1.ocsp>"u"||!x.asn1.ocsp)&&(x.asn1.ocsp={});x.asn1.ocsp.DEFAULT_HASH="sha1";x.asn1.ocsp.OCSPResponse=function(t){x.asn1.ocsp.OCSPResponse.superclass.constructor.call(this),x.asn1.DEREnumerated;var e=x.asn1.ASN1Util.newObject,n=x.asn1.ocsp.ResponseBytes,r=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var i=this.params.resstatus;return typeof i=="number"?i:typeof i!="string"?-1:r.indexOf(i)},this.setByParam=function(i){this.params=i},this.tohex=function(){var i=this.params,s=this._getStatusCode();if(s==-1)throw new Error("responseStatus not supported: "+i.resstatus);if(s!=0)return e({seq:[{enum:{int:s}}]}).tohex();var a=new n(i);return e({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:a}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};ce(x.asn1.ocsp.OCSPResponse,x.asn1.ASN1Object);x.asn1.ocsp.ResponseBytes=function(t){x.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var e=x.asn1,n=e.DERSequence,r=e.DERObjectIdentifier,i=e.DEROctetString,s=e.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(a){this.params=a},this.tohex=function(){var a=this.params;if(a.restype!="ocspBasic")throw new Error("not supported responseType: "+a.restype);var o=new s(a),l=[];l.push(new r({name:"ocspBasic"})),l.push(new i({hex:o.tohex()}));var c=new n({array:l});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};ce(x.asn1.ocsp.ResponseBytes,x.asn1.ASN1Object);x.asn1.ocsp.BasicOCSPResponse=function(t){x.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var e=Error,n=x.asn1,r=n.ASN1Object,i=n.DERSequence;n.DERGeneralizedTime;var s=n.DERTaggedObject,a=n.DERBitString;n.x509.Extensions;var o=n.x509.AlgorithmIdentifier,l=n.ocsp;l.ResponderID,_SingleResponseList=l.SingleResponseList,_ResponseData=l.ResponseData,this.params=null,this.setByParam=function(c){this.params=c},this.sign=function(){var c=this.params,u=c.tbsresp.tohex(),d=new x.crypto.Signature({alg:c.sigalg});d.init(c.reskey),d.updateHex(u),c.sighex=d.sign()},this.tohex=function(){var c=this.params;c.tbsresp==null&&(c.tbsresp=new _ResponseData(c)),c.sighex==null&&c.reskey!=null&&this.sign();var u=[];if(u.push(c.tbsresp),u.push(new o({name:c.sigalg})),u.push(new a({hex:"00"+c.sighex})),c.certs!=null&&c.certs.length!=null){for(var d=[],h=0;h<c.certs.length;h++){var p=c.certs[h],f=null;if(xe.isASN1HEX(p))f=p;else if(p.match(/-----BEGIN/))f=Gn(p);else throw new e("certs["+h+"] not hex or PEM");d.push(new r({tlv:f}))}var m=new i({array:d});u.push(new s({tag:"a0",explicit:!0,obj:m}))}var g=new i({array:u});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};ce(x.asn1.ocsp.BasicOCSPResponse,x.asn1.ASN1Object);x.asn1.ocsp.ResponseData=function(t){x.asn1.ocsp.ResponseData.superclass.constructor.call(this);var e=x.asn1,n=e.DERSequence,r=e.DERGeneralizedTime,i=e.DERTaggedObject,s=e.x509.Extensions,a=e.ocsp,o=a.ResponderID;_SingleResponseList=a.SingleResponseList,this.params=null,this.tohex=function(){var l=this.params;l.respid!=null,l.prodat!=null,l.array!=null;var c=[];if(c.push(new o(l.respid)),c.push(new r(l.prodat)),c.push(new _SingleResponseList(l.array)),l.ext!=null){var u=new s(l.ext);c.push(new i({tag:"a1",explicit:!0,obj:u}))}var d=new n({array:c});return d.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(l){this.params=l},t!==void 0&&this.setByParam(t)};ce(x.asn1.ocsp.ResponseData,x.asn1.ASN1Object);x.asn1.ocsp.ResponderID=function(t){x.asn1.ocsp.ResponderID.superclass.constructor.call(this);var e=x,n=e.asn1,r=n.ASN1Util.newObject,i=n.x509.X500Name,s=e.lang.String.isHex,a=Error;this.params=null,this.tohex=function(){var o=this.params;if(o.key!=null){var l=null;if(typeof o.key=="string"){if(s(o.key)&&(l=o.key),o.key.match(/-----BEGIN CERTIFICATE/)){var c=new Xe(o.key),u=c.getExtSubjectKeyIdentifier();u!=null&&(l=u.kid.hex)}}else if(o.key instanceof Xe){var u=o.key.getExtSubjectKeyIdentifier();u!=null&&(l=u.kid.hex)}if(l==null)throw new a("wrong key member value");var d=r({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:l}}}});return d.tohex()}else if(o.name!=null){var h=null;if(typeof o.name=="string"&&o.name.match(/-----BEGIN CERTIFICATE/)){var c=new Xe(o.name);h=c.getSubject()}else o.name instanceof Xe?h=o.name.getSubject():typeof o.name=="object"&&(o.name.array!=null||o.name.str!=null)&&(h=o.name);if(h==null)throw new a("wrong name member value");var d=r({tag:{tag:"a1",explicit:!0,obj:new i(h)}});return d.tohex()}throw new a("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(o){this.params=o},t!==void 0&&this.setByParam(t)};ce(x.asn1.ocsp.ResponderID,x.asn1.ASN1Object);x.asn1.ocsp.SingleResponseList=function(t){x.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var e=x.asn1,n=e.DERSequence,r=e.ocsp.SingleResponse;this.params=null,this.tohex=function(){var i=this.params;if(typeof i!="object"||i.length==null)throw new Error("params not specified properly");for(var s=[],a=0;a<i.length;a++)s.push(new r(i[a]));var o=new n({array:s});return o.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(i){this.params=i},t!==void 0&&this.setByParam(t)};ce(x.asn1.ocsp.SingleResponseList,x.asn1.ASN1Object);x.asn1.ocsp.SingleResponse=function(t){var e=Error,n=x,r=n.asn1,i=r.DERSequence,s=r.DERGeneralizedTime,a=r.DERTaggedObject,o=r.ocsp,l=o.CertID,c=o.CertStatus,u=r.x509,d=u.Extensions;o.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params,p=[];if(h.certid==null)throw new e("certid unspecified");if(h.status==null)throw new e("status unspecified");if(h.thisupdate==null)throw new e("thisupdate unspecified");if(p.push(new l(h.certid)),p.push(new c(h.status)),p.push(new s(h.thisupdate)),h.nextupdate!=null){var f=new s(h.nextupdate);p.push(new a({tag:"a0",explicit:!0,obj:f}))}if(h.ext!=null){var m=new d(h.ext);p.push(new a({tag:"a1",explicit:!0,obj:m}))}var g=new i({array:p});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(h){this.params=h},t!==void 0&&this.setByParam(t)};ce(x.asn1.ocsp.SingleResponse,x.asn1.ASN1Object);x.asn1.ocsp.CertID=function(t){var e=x,n=e.asn1,r=n.DEROctetString,i=n.DERInteger,s=n.DERSequence,a=n.x509,o=a.AlgorithmIdentifier,l=n.ocsp;l.DEFAULT_HASH;var c=e.crypto,u=c.Util.hashHex,d=Xe,h=xe,p=h.getVbyList;l.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(f,m,g,v){v==null&&(v=this.DEFAULT_HASH),this.params={alg:v,issname:f,isskey:m,sbjsn:g}},this.setByCert=function(f,m,g){g==null&&(g=this.DEFAULT_HASH),this.params={alg:g,issuerCert:f,subjectCert:m}},this.getParamByCerts=function(f,m,g){g==null&&(g=this.DEFAULT_HASH);var v=new d(f),y=new d(m),b=u(v.getSubjectHex(),g),C=v.getPublicKeyHex(),R=u(p(C,0,[1],"03",!0),g),w=y.getSerialNumberHex(),E={alg:g,issname:b,isskey:R,sbjsn:w};return E},this.tohex=function(){if(typeof this.params!="object")throw new Error("params not set");var f=this.params,m,g,v,y;if(f.alg==null?y=this.DEFAULT_HASH:y=f.alg,f.issuerCert!=null&&f.subjectCert!=null){var b=this.getParamByCerts(f.issuerCert,f.subjectCert,y);m=b.issname,g=b.isskey,v=b.sbjsn}else if(f.issname!=null&&f.isskey!=null&&f.sbjsn!=null)m=f.issname,g=f.isskey,v=f.sbjsn;else throw new Error("required param members not defined");var C=new o({name:y}),R=new r({hex:m}),w=new r({hex:g}),E=new i({hex:v}),k=new s({array:[C,R,w,E]});return this.hTLV=k.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};ce(x.asn1.ocsp.CertID,x.asn1.ASN1Object);x.asn1.ocsp.CertStatus=function(t){x.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(e.status=="good")return"8000";if(e.status=="unknown")return"8200";if(e.status=="revoked"){var n=[{gentime:{str:e.time}}];e.reason!=null&&n.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:e.reason}}}});var r={tag:"a1",explicit:!1,obj:{seq:n}};return x.asn1.ASN1Util.newObject({tag:r}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},t!==void 0&&this.setByParam(t)};ce(x.asn1.ocsp.CertStatus,x.asn1.ASN1Object);x.asn1.ocsp.Request=function(t){var e=x,n=e.asn1,r=n.DERSequence,i=n.ocsp;if(i.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var a=[];if(this.dReqCert===null)throw"reqCert not set";a.push(this.dReqCert);var o=new r({array:a});return this.hTLV=o.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},typeof t<"u"){var s=new i.CertID(t);this.dReqCert=s}};ce(x.asn1.ocsp.Request,x.asn1.ASN1Object);x.asn1.ocsp.TBSRequest=function(t){var e=x,n=e.asn1,r=n.DERSequence,i=n.ocsp;i.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(s){for(var a=[],o=0;o<s.length;o++){var l=new i.Request(s[0]);a.push(l)}this.dRequestList=a},this.tohex=function(){var s=[];if(this.version!==0)throw"not supported version: "+this.version;if(this.dRequestorName!==null)throw"requestorName not supported";var a=new r({array:this.dRequestList});if(s.push(a),this.dRequestExt!==null)throw"requestExtensions not supported";var o=new r({array:s});return this.hTLV=o.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&t.reqList!==void 0&&this.setRequestListByParam(t.reqList)};ce(x.asn1.ocsp.TBSRequest,x.asn1.ASN1Object);x.asn1.ocsp.OCSPRequest=function(t){var e=x,n=e.asn1,r=n.DERSequence,i=n.ocsp;if(i.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var a=[];if(this.dTbsRequest!==null)a.push(this.dTbsRequest);else throw"tbsRequest not set";if(this.dOptionalSignature!==null)throw"optionalSignature not supported";var o=new r({array:a});return this.hTLV=o.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&t.reqList!==void 0){var s=new i.TBSRequest(t);this.dTbsRequest=s}};ce(x.asn1.ocsp.OCSPRequest,x.asn1.ASN1Object);x.asn1.ocsp.OCSPUtil={};x.asn1.ocsp.OCSPUtil.getRequestHex=function(t,e,n){var r=x,i=r.asn1,s=i.ocsp;n===void 0&&(n=s.DEFAULT_HASH);var a={alg:n,issuerCert:t,subjectCert:e},o=new s.OCSPRequest({reqList:[a]});return o.tohex()};x.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var e=xe,n=e.getVbyList,r=e.getVbyListEx,i=e.getIdxbyList;e.getIdxbyListEx;var s=e.getV,a={};try{var o=r(t,0,[0],"0a");a.responseStatus=parseInt(o,16)}catch{}if(a.responseStatus!==0)return a;try{var l=i(t,0,[1,0,1,0,0,2,0,1]);t.substr(l,2)==="80"?a.certStatus="good":t.substr(l,2)==="a1"?(a.certStatus="revoked",a.revocationTime=Mt(n(t,l,[0]))):t.substr(l,2)==="82"&&(a.certStatus="unknown")}catch{}try{var c=i(t,0,[1,0,1,0,0,2,0,2]);a.thisUpdate=Mt(s(t,c))}catch{}try{var u=i(t,0,[1,0,1,0,0,2,0,3]);t.substr(u,2)==="a0"&&(a.nextUpdate=Mt(n(t,u,[0])))}catch{}return a};x.asn1.ocsp.OCSPParser=function(){var t=Error,e=Xe,n=new e,r=xe,i=r.getV,s=r.getTLV,a=r.getIdxbyList,o=r.getVbyList,l=r.getTLVbyList,c=r.getVbyListEx,u=r.getTLVbyListEx,d=r.getChildIdx;this.getOCSPRequest=function(h){var p=d(h,0);if(p.length!=1&&p.length!=2)throw new t("wrong number elements: "+p.length);var f=this.getTBSRequest(s(h,p[0]));return f},this.getTBSRequest=function(h){var p={},f=u(h,0,[0],"30");p.array=this.getRequestList(f);var m=u(h,0,["[2]",0],"30");return m!=null&&(p.ext=n.getExtParamArray(m)),p},this.getRequestList=function(h){for(var p=[],f=d(h,0),m=0;m<f.length;m++){var h=s(h,f[m]);p.push(this.getRequest(h))}return p},this.getRequest=function(h){var p=d(h,0);if(p.length!=1&&p.length!=2)throw new t("wrong number elements: "+p.length);var f=this.getCertID(s(h,p[0]));if(p.length==2){var m=a(h,0,[1,0]);f.ext=n.getExtParamArray(s(h,m))}return f},this.getCertID=function(h){var p=d(h,0);if(p.length!=4)throw new t("wrong number elements: "+p.length);var f=new e,m={};return m.alg=f.getAlgorithmIdentifierName(s(h,p[0])),m.issname=i(h,p[1]),m.isskey=i(h,p[2]),m.sbjsn=i(h,p[3]),m},this.getOCSPResponse=function(h){var p=d(h,0),f,m=i(h,p[0]),g=parseInt(m);if(p.length==1)return{resstatus:g};var v=l(h,0,[1,0]);return f=this.getResponseBytes(v),f.resstatus=g,f},this.getResponseBytes=function(h){var p=d(h,0),f,m=l(h,0,[1,0]);f=this.getBasicOCSPResponse(m);var g=i(h,p[0]);return f.restype=x.asn1.x509.OID.oid2name(Sk(g)),f},this.getBasicOCSPResponse=function(h){var p=d(h,0),f;f=this.getResponseData(s(h,p[0]));var m=new Xe;f.alg=m.getAlgorithmIdentifierName(s(h,p[1]));var g=i(h,p[2]);f.sighex=g.substr(2);var v=c(h,0,["[0]"]);if(v!=null){for(var y=d(v,0),b=[],C=0;C<y.length;C++){var R=s(v,y[C]);b.push(R)}f.certs=b}return f},this.getResponseData=function(h){var p=d(h,0),f=p.length,m={},g=0;h.substr(p[0],2)=="a0"&&g++,m.respid=this.getResponderID(s(h,p[g++]));var v=i(h,p[g++]);if(m.prodat=Mt(v),m.array=this.getSingleResponseList(s(h,p[g++])),h.substr(p[f-1],2)=="a1"){var y=l(h,p[f-1],[0]),b=new Xe;m.ext=b.getExtParamArray(y)}return m},this.getResponderID=function(h){var p={};if(h.substr(0,2)=="a2"){var f=o(h,0,[0]);p.key=f}if(h.substr(0,2)=="a1"){var m=l(h,0,[0]),g=new Xe;p.name=g.getX500Name(m)}return p},this.getSingleResponseList=function(h){for(var p=d(h,0),f=[],m=0;m<p.length;m++){var g=this.getSingleResponse(s(h,p[m]));f.push(g)}return f},this.getSingleResponse=function(h){var p=d(h,0),f={},m=this.getCertID(s(h,p[0]));f.certid=m;var g=this.getCertStatus(s(h,p[1]));if(f.status=g,h.substr(p[2],2)=="18"){var v=i(h,p[2]);f.thisupdate=Mt(v)}for(var y=3;y<p.length;y++){if(h.substr(p[y],2)=="a0"){var b=o(h,p[y],[0],"18");f.nextupdate=Mt(b)}if(h.substr(p[y],2)=="a1"){var C=new Xe,R=l(h,0,[y,0]);f.ext=C.getExtParamArray(R)}}return f},this.getCertStatus=function(h){var p={};if(h=="8000")return{status:"good"};if(h=="8200")return{status:"unknown"};if(h.substr(0,2)=="a1"){p.status="revoked";var f=o(h,0,[0]),m=Mt(f);p.time=m}return p}};var x;(typeof x>"u"||!x)&&(x={});(typeof x.lang>"u"||!x.lang)&&(x.lang={});x.lang.String=function(){};function fDe(t){for(var e=new Array,n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function vk(t){for(var e="",n=0;n<t.length;n++){var r=t[n].toString(16);r.length==1&&(r="0"+r),e=e+r}return e}function Es(t){return vk(fDe(t))}function fv(t){return t=t.replace(/\=/g,""),t=t.replace(/\+/g,"-"),t=t.replace(/\//g,"_"),t}function yk(t){return t.length%4==2?t=t+"==":t.length%4==3&&(t=t+"="),t=t.replace(/-/g,"+"),t=t.replace(/_/g,"/"),t}function Kn(t){return t.length%2==1&&(t="0"+t),fv(kf(t))}function tn(t){return fk(yk(t))}var pv,ha;typeof Buffer=="function"?(pv=function(t){return fv(Buffer.from(t,"utf8").toString("base64"))},ha=function(t){return Buffer.from(yk(t),"base64").toString("utf8")}):(pv=function(t){return Kn(jB(UB(t)))},ha=function(t){return decodeURIComponent(qB(tn(t)))});function bk(t){return jB(UB(t)).toLowerCase()}function Mt(t){try{return decodeURIComponent(qB(t))}catch{return null}}function pDe(t){return Mt(mDe(t))}function mDe(t){for(var e=t.match(/.{1,2}/g),n=[],r=0;r<e.length;r++){var i=parseInt(e[r],16);161<=i&&i<=191?(n.push("c2"),n.push(e[r])):192<=i&&i<=255?(n.push("c3"),n.push((i-64).toString(16))):n.push(e[r])}return n.join("")}function rs(t){for(var e="",n=0;n<t.length-1;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e}function Ms(t){for(var e="",n=0;n<t.length;n++)e+=("0"+t.charCodeAt(n).toString(16)).slice(-2);return e}function gDe(t){return kf(t)}function vDe(t,e){return t.replace(new RegExp("(.{"+e+"})","g"),`$1\r
`)}function yDe(t){var e=t.replace(/[^0-9A-Za-z\/+=]*/g,""),n=fk(e);return n}function fr(t,e){return"-----BEGIN "+e+`-----\r
`+vDe(gDe(t),64)+`\r
-----END `+e+`-----\r
`}function Gn(t,e){if(t.indexOf("-----BEGIN ")==-1)throw new Error("can't find PEM header");return e!==void 0?(t=t.replace(new RegExp("^[^]*-----BEGIN "+e+"-----"),""),t=t.replace(new RegExp("-----END "+e+"-----[^]*$"),"")):(t=t.replace(/^[^]*-----BEGIN [^-]+-----/,""),t=t.replace(/-----END [^-]+-----[^]*$/,"")),yDe(t)}function bDe(t){var e,n,r,i,s,a,o,l,c,u;if(t=xDe(t),u=t.match(/^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/),u)return e=parseInt(u[1]),n=parseInt(u[2])-1,r=parseInt(u[3]),i=parseInt(u[4]),s=parseInt(u[5]),a=parseInt(u[6]),o=0,l=u[7],l!==""&&(c=(l.substr(1)+"00").substr(0,3),o=parseInt(c)),Date.UTC(e,n,r,i,s,a,o);throw new Error("unsupported zulu format: "+t)}function SDe(t){return Math.round(bDe(t)/1e3)}function xDe(t){return t.match(/^[0-9]{12}Z$/)||t.match(/^[0-9]{12}[.][0-9]*Z$/)?t.match(/^[0-4]/)?"20"+t:"19"+t:t}function jB(t){return t.replace(/%/g,"")}function qB(t){return t.replace(/(..)/g,"%$1")}function PO(t){var e="malformed IPv6 address";if(!t.match(/^[0-9A-Fa-f:]+$/))throw e;t=t.toLowerCase();var n=t.split(":").length-1;if(n<2)throw e;var r=":".repeat(7-n+2);t=t.replace("::",r);var i=t.split(":");if(i.length!=8)throw e;for(var s=0;s<8;s++)i[s]=("0000"+i[s]).slice(-4);return i.join("")}function _O(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+t);t=t.toLowerCase();var e=t.match(/.{1,4}/g);e=e.map(function(i){return i.replace(/^0+/,"")}),e=e.map(function(i){return i==""?"0":i}),t=":"+e.join(":")+":";var n=t.match(/:(0:){2,}/g);if(n==null)return t.slice(1,-1);var r=n.sort().slice(-1)[0];return t=t.replace(r.substr(0,r.length-1),":"),t.substr(0,2)!="::"&&(t=t.substr(1)),t.substr(-2,2)!="::"&&(t=t.substr(0,t.length-1)),t}function l2(t){var e=new Error("malformed hex value");if(!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw e;if(t.length==8){var n;try{return n=parseInt(t.substr(0,2),16)+"."+parseInt(t.substr(2,2),16)+"."+parseInt(t.substr(4,2),16)+"."+parseInt(t.substr(6,2),16),n}catch{throw e}}else if(t.length==16)try{return l2(t.substr(0,8))+"/"+AO(t.substr(8))}catch{throw e}else{if(t.length==32)return _O(t);if(t.length==64){try{return _O(t.substr(0,32))+"/"+AO(t.substr(32))}catch{throw e}return}else return t}}function AO(t){var e=new Error("malformed mask"),n;try{n=new ee(t,16).toString(2)}catch{throw e}if(!n.match(/^1*0*$/))throw e;return n.replace(/0+$/,"").length}function zB(t){var e=new Error("malformed IP address");if(t=t.toLowerCase(t),!t.match(/^[0-9a-f.:/]+$/))throw e;if(t.match(/^[0-9.]+$/)){var n=t.split(".");if(n.length!==4)throw e;var r="";try{for(var i=0;i<4;i++){var s=parseInt(n[i]);r+=("0"+s.toString(16)).slice(-2)}return r}catch{throw e}}else if(t.match(/^[0-9.]+\/[0-9]+$/)){var a=t.split("/");return zB(a[0])+OO(parseInt(a[1]),32)}else{if(t.match(/^[0-9a-f:]+$/)&&t.indexOf(":")!==-1)return PO(t);if(t.match(/^[0-9a-f:]+\/[0-9]+$/)&&t.indexOf(":")!==-1){var a=t.split("/");return PO(a[0])+OO(parseInt(a[1]),128)}else throw e}}function OO(t,e){if(e==32&&t==0)return"00000000";if(e==128&&t==0)return"00000000000000000000000000000000";var n=Array(t+1).join("1")+Array(e-t+1).join("0");return new ee(n,2).toString(16)}function HB(t){function e(i){var s=parseInt(i.substr(0,2),16),a=parseInt(i.substr(2),16);if(s==0&a<128)return String.fromCharCode(a);if(s<8){var o=192|(s&7)<<3|(a&192)>>6,l=128|a&63;return Mt(o.toString(16)+l.toString(16))}var o=224|(s&240)>>4,l=128|(s&15)<<2|(a&192)>>6,c=128|a&63;return Mt(o.toString(16)+l.toString(16)+c.toString(16))}var n=t.match(/.{4}/g),r=n.map(e);return r.join("")}function UB(t){for(var e=encodeURIComponent(t),n="",r=0;r<e.length;r++)e[r]=="%"?(n=n+e.substr(r,3),r=r+2):n=n+"%"+Es(e[r]);return n}x.lang.String.isInteger=function(t){return t.match(/^[0-9]+$/)?!0:!!t.match(/^-[0-9]+$/)};x.lang.String.isHex=function(t){return VB(t)};function VB(t){return!!(t.length%2==0&&(t.match(/^[0-9a-f]+$/)||t.match(/^[0-9A-F]+$/)))}x.lang.String.isBase64=function(t){return t=t.replace(/\s+/g,""),!!(t.match(/^[0-9A-Za-z+\/]+={0,3}$/)&&t.length%4==0)};x.lang.String.isBase64URL=function(t){return t.match(/[+/=]/)?!1:(t=yk(t),x.lang.String.isBase64(t))};function WB(t){return!!t.match(/^[0-9A-Za-z-_.]+$/)}x.lang.String.isIntegerArray=function(t){return t=t.replace(/\s+/g,""),!!t.match(/^\[[0-9,]+\]$/)};x.lang.String.isPrintable=function(t){return t.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null};x.lang.String.isIA5=function(t){return t.match(/^[\x20-\x21\x23-\x7f]*$/)!==null};x.lang.String.isMail=function(t){return t.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};function DO(t){return t.length%2==1?"0"+t:t.substr(0,1)>"7"?"00"+t:t}function wDe(t){var e=function(o){var l=o.toString(16);return l.length==1&&(l="0"+l),l},n=function(o){var l="",c=parseInt(o,10),u=c.toString(2),d=7-u.length%7;d==7&&(d=0);for(var h="",p=0;p<d;p++)h+="0";u=h+u;for(var p=0;p<u.length-1;p+=7){var f=u.substr(p,7);p!=u.length-7&&(f="1"+f),l+=e(parseInt(f,2))}return l};try{if(!t.match(/^[0-9.]+$/))return null;var r="",i=t.split("."),s=parseInt(i[0],10)*40+parseInt(i[1],10);r+=e(s),i.splice(0,2);for(var a=0;a<i.length;a++)r+=n(i[a]);return r}catch{return null}}function Sk(t){if(!VB(t))return null;try{var e=[],n=t.substr(0,2),r=parseInt(n,16);e[0]=new String(Math.floor(r/40)),e[1]=new String(r%40);for(var i=t.substr(2),s=[],a=0;a<i.length/2;a++)s.push(parseInt(i.substr(a*2,2),16));for(var o=[],l="",a=0;a<s.length;a++)s[a]&128?l=l+IO((s[a]&127).toString(2),7):(l=l+IO((s[a]&127).toString(2),7),o.push(new String(parseInt(l,2))),l="");var c=e.join(".");return o.length>0&&(c=c+"."+o.join(".")),c}catch{return null}}var IO=function(t,e,n){return n==null&&(n="0"),t.length>=e?t:new Array(e-t.length+1).join(n)+t};function CDe(t){if(t.length%2!=0||(t=t.toLowerCase(),t.match(/^[0-9a-f]+$/)==null))return-1;try{var e=t.substr(0,2);if(e=="00")return parseInt(t.substr(2),16);var n=parseInt(e,16);if(n>7)return-1;var r=t.substr(2),i=parseInt(r,16).toString(2);i=="0"&&(i="00000000"),i=i.slice(0,0-n);var s=parseInt(i,2);return s==NaN?-1:s}catch{return-1}}function EDe(t){if(typeof t!="string"||t.length%2!=0||!t.match(/^[0-9a-f]+$/))return null;try{var e=parseInt(t.substr(0,2),16);if(e<0||7<e)return null;for(var n=t.substr(2),r="",i=0;i<n.length;i+=2){var s=n.substr(i,2),a=parseInt(s,16).toString(2);a=("0000000"+a).slice(-8),r+=a}return r.substr(0,r.length-e)}catch{return null}}function c2(t,e){for(var n=0,r=0;r<t.length;r++)n|=1<<e[t[r]];for(var i=n.toString(2),s="",r=i.length-1;r>=0;r--)s+=i[r];return s}function ag(t,r,n){if(typeof t=="object"){for(var r=String(r).split("."),i=0;i<r.length&&t;i++){var s=r[i];s.match(/^[0-9]+$/)&&(s=parseInt(s)),t=t[s]}return t||t===!1?t:n}}function ce(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e)}(typeof x>"u"||!x)&&(x={});(typeof x.crypto>"u"||!x.crypto)&&(x.crypto={});x.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:Ae.algo.MD5,sha1:Ae.algo.SHA1,sha224:Ae.algo.SHA224,sha256:Ae.algo.SHA256,sha384:Ae.algo.SHA384,sha512:Ae.algo.SHA512,ripemd160:Ae.algo.RIPEMD160},this.getDigestInfoHex=function(t,e){if(typeof this.DIGESTINFOHEAD[e]>"u")throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,n){var r=this.getDigestInfoHex(t,e),i=n/4;if(r.length+22>i)throw"key is too short for SigAlg: keylen="+n+","+e;for(var s="0001",a="00"+r,o="",l=i-s.length-a.length,c=0;c<l;c+=2)o+="ff";var u=s+o+a;return u},this.hashString=function(t,e){var n=new x.crypto.MessageDigest({alg:e});return n.digestString(t)},this.hashHex=function(t,e){var n=new x.crypto.MessageDigest({alg:e});return n.digestHex(t)},this.sha1=function(t){return this.hashString(t,"sha1")},this.sha256=function(t){return this.hashString(t,"sha256")},this.sha256Hex=function(t){return this.hashHex(t,"sha256")},this.sha512=function(t){return this.hashString(t,"sha512")},this.sha512Hex=function(t){return this.hashHex(t,"sha512")},this.isKey=function(t){return t instanceof We||t instanceof x.crypto.DSA||t instanceof x.crypto.ECDSA}};x.crypto.Util.md5=function(t){var e=new x.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return e.digestString(t)};x.crypto.Util.ripemd160=function(t){var e=new x.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return e.digestString(t)};x.crypto.Util.SECURERANDOMGEN=new Wc;x.crypto.Util.getRandomHexOfNbytes=function(t){var e=new Array(t);return x.crypto.Util.SECURERANDOMGEN.nextBytes(e),vk(e)};x.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new ee(x.crypto.Util.getRandomHexOfNbytes(t),16)};x.crypto.Util.getRandomHexOfNbits=function(t){var e=t%8,n=(t-e)/8,r=new Array(n+1);return x.crypto.Util.SECURERANDOMGEN.nextBytes(r),r[0]=(255<<e&255^255)&r[0],vk(r)};x.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new ee(x.crypto.Util.getRandomHexOfNbits(t),16)};x.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var e=t.bitLength();;){var n=x.crypto.Util.getRandomBigIntegerOfNbits(e);if(t.compareTo(n)!=-1)return n}};x.crypto.Util.getRandomBigIntegerMinToMax=function(t,e){var n=t.compareTo(e);if(n==1)throw"biMin is greater than biMax";if(n==0)return t;var r=e.subtract(t),i=x.crypto.Util.getRandomBigIntegerZeroToMax(r);return i.add(t)};x.crypto.MessageDigest=function(t){this.setAlgAndProvider=function(e,n){if(e=x.crypto.MessageDigest.getCanonicalAlgName(e),e!==null&&n===void 0&&(n=x.crypto.Util.DEFAULTPROVIDER[e]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)!=-1&&n=="cryptojs"){try{this.md=x.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(r){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+r}this.updateString=function(r){this.md.update(r)},this.updateHex=function(r){var i=Ae.enc.Hex.parse(r);this.md.update(i)},this.digest=function(){var r=this.md.finalize();return r.toString(Ae.enc.Hex)},this.digestString=function(r){return this.updateString(r),this.digest()},this.digestHex=function(r){return this.updateHex(r),this.digest()}}if(":sha256:".indexOf(e)!=-1&&n=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(r){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+r}this.updateString=function(r){this.md.update(r)},this.updateHex=function(r){var i=sjcl.codec.hex.toBits(r);this.md.update(i)},this.digest=function(){var r=this.md.finalize();return sjcl.codec.hex.fromBits(r)},this.digestString=function(r){return this.updateString(r),this.digest()},this.digestHex=function(r){return this.updateHex(r),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},t!==void 0&&t.alg!==void 0&&(this.algName=t.alg,t.prov===void 0&&(this.provName=x.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))};x.crypto.MessageDigest.getCanonicalAlgName=function(t){return typeof t=="string"&&(t=t.toLowerCase(),t=t.replace(/-/,"")),t};x.crypto.MessageDigest.getHashLength=function(t){var e=x.crypto.MessageDigest,n=e.getCanonicalAlgName(t);if(e.HASHLENGTH[n]===void 0)throw"not supported algorithm: "+t;return e.HASHLENGTH[n]};x.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20};x.crypto.Mac=function(t){this.setAlgAndProvider=function(e,n){if(e=e.toLowerCase(),e==null&&(e="hmacsha1"),e=e.toLowerCase(),e.substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+e;n===void 0&&(n=x.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+n;var r=e.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)!=-1&&n=="cryptojs"){try{var i=x.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r];this.mac=Ae.algo.HMAC.create(i,this.pass)}catch(s){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+s}this.updateString=function(s){this.mac.update(s)},this.updateHex=function(s){var a=Ae.enc.Hex.parse(s);this.mac.update(a)},this.doFinal=function(){var s=this.mac.finalize();return s.toString(Ae.enc.Hex)},this.doFinalString=function(s){return this.updateString(s),this.doFinal()},this.doFinalHex=function(s){return this.updateHex(s),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if(typeof e=="string"){var n=e;(e.length%2==1||!e.match(/^[0-9A-Fa-f]+$/))&&(n=Ms(e)),this.pass=Ae.enc.Hex.parse(n);return}if(typeof e!="object")throw"KJUR.crypto.Mac unsupported password type: "+e;var n=null;if(e.hex!==void 0){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;n=e.hex}if(e.utf8!==void 0&&(n=bk(e.utf8)),e.rstr!==void 0&&(n=Ms(e.rstr)),e.b64!==void 0&&(n=fk(e.b64)),e.b64u!==void 0&&(n=tn(e.b64u)),n==null)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=Ae.enc.Hex.parse(n)},t!==void 0&&(t.pass!==void 0&&this.setPassword(t.pass),t.alg!==void 0&&(this.algName=t.alg,t.prov===void 0&&(this.provName=x.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))};x.crypto.Signature=function(t){var e=null;if(this._setAlgNames=function(){var n=this.algName.match(/^(.+)with(.+)$/);n&&(this.mdAlgName=n[1].toLowerCase(),this.pubkeyAlgName=n[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(n,r){for(var i="",s=r/4-n.length,a=0;a<s;a++)i=i+"0";return i+n},this.setAlgAndProvider=function(n,r){if(this._setAlgNames(),r!="cryptojs/jsrsa")throw new Error("provider not supported: "+r);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new x.crypto.MessageDigest({alg:this.mdAlgName})}catch(i){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+i)}this.init=function(i,s){var a=null;try{s===void 0?a=Rt.getKey(i):a=Rt.getKey(i,s)}catch(o){throw"init failed:"+o}if(a.isPrivate===!0)this.prvKey=a,this.state="SIGN";else if(a.isPublic===!0)this.pubKey=a,this.state="VERIFY";else throw"init failed.:"+a},this.updateString=function(i){this.md.updateString(i)},this.updateHex=function(i){this.md.updateHex(i)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&x.crypto.ECDSA!==void 0&&(this.prvKey=new x.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof We&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof We&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof x.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else if(this.prvKey instanceof x.crypto.DSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;return this.hSign},this.signString=function(i){return this.updateString(i),this.sign()},this.signHex=function(i){return this.updateHex(i),this.sign()},this.verify=function(i){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&x.crypto.ECDSA!==void 0&&(this.pubKey=new x.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof We&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,i,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof We&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,i);if(x.crypto.ECDSA!==void 0&&this.pubKey instanceof x.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,i);if(x.crypto.DSA!==void 0&&this.pubKey instanceof x.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,i);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(n,r){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(n){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(n){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(n){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(n){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(n){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,t!==void 0&&(t.alg!==void 0&&(this.algName=t.alg,t.prov===void 0?this.provName=x.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),t.psssaltlen!==void 0&&(this.pssSaltLen=t.psssaltlen),t.prvkeypem!==void 0)){if(t.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{var e=Rt.getKey(t.prvkeypem);this.init(e)}catch(n){throw"fatal error to load pem private key: "+n}}};x.crypto.Cipher=function(t){};x.crypto.Cipher.encrypt=function(t,e,n){if(e instanceof We&&e.isPublic){var r=x.crypto.Cipher.getAlgByKeyAndName(e,n);if(r==="RSA")return e.encrypt(t);if(r==="RSAOAEP")return e.encryptOAEP(t,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(i!==null)return e.encryptOAEP(t,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}else throw"Cipher.encrypt: unsupported key or algorithm"};x.crypto.Cipher.decrypt=function(t,e,n){if(e instanceof We&&e.isPrivate){var r=x.crypto.Cipher.getAlgByKeyAndName(e,n);if(r==="RSA")return e.decrypt(t);if(r==="RSAOAEP")return e.decryptOAEP(t,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(i!==null)return e.decryptOAEP(t,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}else throw"Cipher.decrypt: unsupported key or algorithm"};x.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof We){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e)!=-1)return e;if(e==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e};x.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};(typeof x>"u"||!x)&&(x={});(typeof x.crypto>"u"||!x.crypto)&&(x.crypto={});x.crypto.ECDSA=function(t){var e="secp256r1",n=Error,r=ee,i=Pt,s=x.crypto.ECDSA,a=x.crypto.ECParameterDB,o=s.getName,l=xe,c=l.getVbyListEx,u=l.isASN1HEX,d=new Wc;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(h){return new r(h.bitLength(),d).mod(h.subtract(r.ONE)).add(r.ONE)},this.setNamedCurve=function(h){this.ecparams=a.getByName(h),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=h},this.setPrivateKeyHex=function(h){this.isPrivate=!0,this.prvKeyHex=h},this.setPublicKeyHex=function(h){this.isPublic=!0,this.pubKeyHex=h},this.getPublicKeyXYHex=function(){var h=this.pubKeyHex;if(h.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var p=this.ecparams.keycharlen;if(h.length!==2+p*2)throw"malformed public key hex length";var f={};return f.x=h.substr(2,p),f.y=h.substr(2+p),f},this.getShortNISTPCurveName=function(){var h=this.curveName;return h==="secp256r1"||h==="NIST P-256"||h==="P-256"||h==="prime256v1"?"P-256":h==="secp384r1"||h==="NIST P-384"||h==="P-384"?"P-384":h==="secp521r1"||h==="NIST P-521"||h==="P-521"?"P-521":null},this.generateKeyPairHex=function(){var h=this.ecparams.n,p=this.getBigRandom(h),f=this.ecparams.keycharlen,m=("0000000000"+p.toString(16)).slice(-f);this.setPrivateKeyHex(m);var g=this.generatePublicKeyHex();return{ecprvhex:m,ecpubhex:g}},this.generatePublicKeyHex=function(){var h=new r(this.prvKeyHex,16),p=this.ecparams.G.multiply(h),f=p.getX().toBigInteger(),m=p.getY().toBigInteger(),g=this.ecparams.keycharlen,v=("0000000000"+f.toString(16)).slice(-g),y=("0000000000"+m.toString(16)).slice(-g),b="04"+v+y;return this.setPublicKeyHex(b),b},this.signWithMessageHash=function(h){return this.signHex(h,this.prvKeyHex)},this.signHex=function(h,p){var f=new r(p,16),m=this.ecparams.n,g=new r(h.substring(0,this.ecparams.keycharlen),16);do var v=this.getBigRandom(m),y=this.ecparams.G,b=y.multiply(v),C=b.getX().toBigInteger().mod(m);while(C.compareTo(r.ZERO)<=0);var R=v.modInverse(m).multiply(g.add(f.multiply(C))).mod(m);return s.biRSSigToASN1Sig(C,R)},this.sign=function(h,p){var f=p,m=this.ecparams.n,g=r.fromByteArrayUnsigned(h);do var v=this.getBigRandom(m),y=this.ecparams.G,b=y.multiply(v),C=b.getX().toBigInteger().mod(m);while(C.compareTo(ee.ZERO)<=0);var R=v.modInverse(m).multiply(g.add(f.multiply(C))).mod(m);return this.serializeSig(C,R)},this.verifyWithMessageHash=function(h,p){return this.verifyHex(h,p,this.pubKeyHex)},this.verifyHex=function(h,p,f){try{var m,g,v=s.parseSigHex(p);m=v.r,g=v.s;var y=i.decodeFromHex(this.ecparams.curve,f),b=new r(h.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(b,m,g,y)}catch{return!1}},this.verify=function(h,p,f){var m,g;if(Bitcoin.Util.isArray(p)){var v=this.parseSig(p);m=v.r,g=v.s}else if(typeof p=="object"&&p.r&&p.s)m=p.r,g=p.s;else throw"Invalid value for signature";var y;if(f instanceof Pt)y=f;else if(Bitcoin.Util.isArray(f))y=i.decodeFrom(this.ecparams.curve,f);else throw"Invalid format for pubkey value, must be byte array or ECPointFp";var b=r.fromByteArrayUnsigned(h);return this.verifyRaw(b,m,g,y)},this.verifyRaw=function(h,p,f,m){var g=this.ecparams.n,v=this.ecparams.G;if(p.compareTo(r.ONE)<0||p.compareTo(g)>=0||f.compareTo(r.ONE)<0||f.compareTo(g)>=0)return!1;var y=f.modInverse(g),b=h.multiply(y).mod(g),C=p.multiply(y).mod(g),R=v.multiply(b).add(m.multiply(C)),w=R.getX().toBigInteger().mod(g);return w.equals(p)},this.serializeSig=function(h,p){var f=h.toByteArraySigned(),m=p.toByteArraySigned(),g=[];return g.push(2),g.push(f.length),g=g.concat(f),g.push(2),g.push(m.length),g=g.concat(m),g.unshift(g.length),g.unshift(48),g},this.parseSig=function(h){var p;if(h[0]!=48)throw new Error("Signature not a valid DERSequence");if(p=2,h[p]!=2)throw new Error("First element in signature must be a DERInteger");var f=h.slice(p+2,p+2+h[p+1]);if(p+=2+h[p+1],h[p]!=2)throw new Error("Second element in signature must be a DERInteger");var m=h.slice(p+2,p+2+h[p+1]);p+=2+h[p+1];var g=r.fromByteArrayUnsigned(f),v=r.fromByteArrayUnsigned(m);return{r:g,s:v}},this.parseSigCompact=function(h){if(h.length!==65)throw"Signature has the wrong length";var p=h[0]-27;if(p<0||p>7)throw"Invalid signature type";var f=this.ecparams.n,m=r.fromByteArrayUnsigned(h.slice(1,33)).mod(f),g=r.fromByteArrayUnsigned(h.slice(33,65)).mod(f);return{r:m,s:g,i:p}},this.readPKCS5PrvKeyHex=function(h){if(u(h)===!1)throw new Error("not ASN.1 hex string");var p,f,m;try{p=c(h,0,["[0]",0],"06"),f=c(h,0,[1],"04");try{m=c(h,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=o(p),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(m),this.setPrivateKeyHex(f),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(h){if(u(h)===!1)throw new n("not ASN.1 hex string");var p,f,m,g;try{p=c(h,0,[1,0],"06"),f=c(h,0,[1,1],"06"),m=c(h,0,[2,0,1],"04");try{g=c(h,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new n("malformed PKCS#8 plain ECC private key")}if(this.curveName=o(f),this.curveName===void 0)throw new n("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(g),this.setPrivateKeyHex(m),this.isPublic=!1},this.readPKCS8PubKeyHex=function(h){if(u(h)===!1)throw new n("not ASN.1 hex string");var p,f,m;try{p=c(h,0,[0,0],"06"),f=c(h,0,[0,1],"06"),m=c(h,0,[1],"03")}catch{throw new n("malformed PKCS#8 ECC public key")}if(this.curveName=o(f),this.curveName===null)throw new n("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(m)},this.readCertPubKeyHex=function(h,p){if(u(h)===!1)throw new n("not ASN.1 hex string");var f,m;try{f=c(h,0,[0,5,0,1],"06"),m=c(h,0,[0,5,1],"03")}catch{throw new n("malformed X.509 certificate ECC public key")}if(this.curveName=o(f),this.curveName===null)throw new n("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(m)},t!==void 0&&t.curve!==void 0&&(this.curveName=t.curve),this.curveName===void 0&&(this.curveName=e),this.setNamedCurve(this.curveName),t!==void 0&&(t.prv!==void 0&&this.setPrivateKeyHex(t.prv),t.pub!==void 0&&this.setPublicKeyHex(t.pub))};x.crypto.ECDSA.parseSigHex=function(t){var e=x.crypto.ECDSA.parseSigHexInHexRS(t),n=new ee(e.r,16),r=new ee(e.s,16);return{r:n,s:r}};x.crypto.ECDSA.parseSigHexInHexRS=function(t){var e=xe,n=e.getChildIdx,r=e.getV;if(e.checkStrictDER(t,0),t.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var i=n(t,0);if(i.length!=2)throw new Error("signature shall have two elements");var s=i[0],a=i[1];if(t.substr(s,2)!="02")throw new Error("1st item not ASN.1 integer");if(t.substr(a,2)!="02")throw new Error("2nd item not ASN.1 integer");var o=r(t,s),l=r(t,a);return{r:o,s:l}};x.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=x.crypto.ECDSA.parseSigHexInHexRS(t),n=e.r,r=e.s;if(n.length>=130&&n.length<=134){if(n.length%2!=0)throw Error("unknown ECDSA sig r length error");if(r.length%2!=0)throw Error("unknown ECDSA sig s length error");n.substr(0,2)=="00"&&(n=n.substr(2)),r.substr(0,2)=="00"&&(r=r.substr(2));var i=Math.max(n.length,r.length);return n=("000000"+n).slice(-i),r=("000000"+r).slice(-i),n+r}if(n.substr(0,2)=="00"&&n.length%32==2&&(n=n.substr(2)),r.substr(0,2)=="00"&&r.length%32==2&&(r=r.substr(2)),n.length%32==30&&(n="00"+n),r.length%32==30&&(r="00"+r),n.length%32!=0)throw Error("unknown ECDSA sig r length error");if(r.length%32!=0)throw Error("unknown ECDSA sig s length error");return n+r};x.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var e=t.substr(0,t.length/2),n=t.substr(t.length/2);return x.crypto.ECDSA.hexRSSigToASN1Sig(e,n)};x.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var n=new ee(t,16),r=new ee(e,16);return x.crypto.ECDSA.biRSSigToASN1Sig(n,r)};x.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var n=x.asn1,r=new n.DERInteger({bigint:t}),i=new n.DERInteger({bigint:e}),s=new n.DERSequence({array:[r,i]});return s.tohex()};x.crypto.ECDSA.getName=function(t){return t==="2b8104001f"?"secp192k1":t==="2a8648ce3d030107"?"secp256r1":t==="2b8104000a"?"secp256k1":t==="2b81040021"?"secp224r1":t==="2b81040022"?"secp384r1":t==="2b81040023"?"secp521r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)!==-1?"secp256r1":"|secp256k1|".indexOf(t)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(t)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(t)!==-1?"secp384r1":"|secp521r1|NIST P-521|P-521|".indexOf(t)!==-1?"secp521r1":null};(typeof x>"u"||!x)&&(x={});(typeof x.crypto>"u"||!x.crypto)&&(x.crypto={});x.crypto.ECParameterDB=new function(){var t={},e={};function n(r){return new ee(r,16)}this.getByName=function(r){var i=r;if(typeof e[i]<"u"&&(i=e[r]),typeof t[i]<"u")return t[i];throw"unregistered EC curve name: "+i},this.regist=function(r,i,s,a,o,l,c,u,d,h,p,f){t[r]={};var m=n(s),g=n(a),v=n(o),y=n(l),b=n(c),C=new gl(m,g,v),R=C.decodePointHex("04"+u+d);t[r].name=r,t[r].keylen=i,t[r].keycharlen=Math.ceil(i/8)*2,t[r].curve=C,t[r].G=R,t[r].n=y,t[r].h=b,t[r].oid=p,t[r].info=f;for(var w=0;w<h.length;w++)e[h[w]]=r}};x.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field");x.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field");x.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field");x.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]);x.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]);x.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]);x.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]);x.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]);x.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]);x.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);(typeof x>"u"||!x)&&(x={});(typeof x.crypto>"u"||!x.crypto)&&(x.crypto={});x.crypto.DSA=function(){var t=xe;t.getVbyList;var e=t.getVbyListEx,n=t.isASN1HEX,r=ee;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(i,s,a,o,l){this.isPrivate=!0,this.p=i,this.q=s,this.g=a,this.y=o,this.x=l},this.setPrivateHex=function(i,s,a,o,l){var c,u,d,h,p;c=new ee(i,16),u=new ee(s,16),d=new ee(a,16),typeof o=="string"&&o.length>1?h=new ee(o,16):h=null,p=new ee(l,16),this.setPrivate(c,u,d,h,p)},this.setPublic=function(i,s,a,o){this.isPublic=!0,this.p=i,this.q=s,this.g=a,this.y=o,this.x=null},this.setPublicHex=function(i,s,a,o){var l,c,u,d;l=new ee(i,16),c=new ee(s,16),u=new ee(a,16),d=new ee(o,16),this.setPublic(l,c,u,d)},this.signWithMessageHash=function(i){var s=this.p,a=this.q,o=this.g;this.y;var l=this.x,c=x.crypto.Util.getRandomBigIntegerMinToMax(ee.ONE.add(ee.ONE),a.subtract(ee.ONE)),u=i.substr(0,a.bitLength()/4),d=new ee(u,16),h=o.modPow(c,s).mod(a),p=c.modInverse(a).multiply(d.add(l.multiply(h))).mod(a),f=x.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:h}},{int:{bigint:p}}]});return f},this.verifyWithMessageHash=function(i,s){var a=this.p,o=this.q,l=this.g,c=this.y,u=this.parseASN1Signature(s),d=u[0],h=u[1],p=i.substr(0,o.bitLength()/4),f=new ee(p,16);if(ee.ZERO.compareTo(d)>0||d.compareTo(o)>0||ee.ZERO.compareTo(h)>=0||h.compareTo(o)>0)throw"invalid DSA signature";var m=h.modInverse(o),g=f.multiply(m).mod(o),v=d.multiply(m).mod(o),y=l.modPow(g,a).multiply(c.modPow(v,a)).mod(a).mod(o);return y.compareTo(d)==0},this.parseASN1Signature=function(i){try{var s=new r(e(i,0,[0],"02"),16),a=new r(e(i,0,[1],"02"),16);return[s,a]}catch{throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(i){var s,a,o,l,c;if(n(i)===!1)throw new Error("not ASN.1 hex string");try{s=e(i,0,[1],"02"),a=e(i,0,[2],"02"),o=e(i,0,[3],"02"),l=e(i,0,[4],"02"),c=e(i,0,[5],"02")}catch{throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(s,a,o,l,c)},this.readPKCS8PrvKeyHex=function(i){var s,a,o,l;if(n(i)===!1)throw new Error("not ASN.1 hex string");try{s=e(i,0,[1,1,0],"02"),a=e(i,0,[1,1,1],"02"),o=e(i,0,[1,1,2],"02"),l=e(i,0,[2,0],"02")}catch{throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(s,a,o,null,l)},this.readPKCS8PubKeyHex=function(i){var s,a,o,l;if(n(i)===!1)throw new Error("not ASN.1 hex string");try{s=e(i,0,[0,1,0],"02"),a=e(i,0,[0,1,1],"02"),o=e(i,0,[0,1,2],"02"),l=e(i,0,[1,0],"02")}catch{throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(s,a,o,l)},this.readCertPubKeyHex=function(i,s){var a,o,l,c;if(n(i)===!1)throw new Error("not ASN.1 hex string");try{a=e(i,0,[0,5,0,1,0],"02"),o=e(i,0,[0,5,0,1,1],"02"),l=e(i,0,[0,5,0,1,2],"02"),c=e(i,0,[0,5,1,0],"02")}catch{throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(a,o,l,c)}};var Rt=function(){var t=function(f,m,g){return r(Ae.AES,f,m,g)},e=function(f,m,g){return r(Ae.TripleDES,f,m,g)},n=function(f,m,g){return r(Ae.DES,f,m,g)},r=function(f,m,g,v){var y=Ae.enc.Hex.parse(m),b=Ae.enc.Hex.parse(g),C=Ae.enc.Hex.parse(v),R={};R.key=b,R.iv=C,R.ciphertext=y;var w=f.decrypt(R,b,{iv:C});return Ae.enc.Hex.stringify(w)},i=function(f,m,g){return o(Ae.AES,f,m,g)},s=function(f,m,g){return o(Ae.TripleDES,f,m,g)},a=function(f,m,g){return o(Ae.DES,f,m,g)},o=function(f,m,g,v){var y=Ae.enc.Hex.parse(m),b=Ae.enc.Hex.parse(g),C=Ae.enc.Hex.parse(v),R=f.encrypt(y,b,{iv:C}),w=Ae.enc.Hex.parse(R.toString()),E=Ae.enc.Base64.stringify(w);return E},l={"AES-256-CBC":{proc:t,eproc:i,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:i,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:i,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:e,eproc:s,keylen:24,ivlen:8},"DES-CBC":{proc:n,eproc:a,keylen:8,ivlen:8}},c=function(f){var m=Ae.lib.WordArray.random(f),g=Ae.enc.Hex.stringify(m);return g},u=function(f){var m={},g=f.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));g&&(m.cipher=g[1],m.ivsalt=g[2]);var v=f.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));v&&(m.type=v[1]);var y=-1,b=0;f.indexOf(`\r
\r
`)!=-1&&(y=f.indexOf(`\r
\r
`),b=2),f.indexOf(`

`)!=-1&&(y=f.indexOf(`

`),b=1);var C=f.indexOf("-----END");if(y!=-1&&C!=-1){var R=f.substring(y+b*2,C-b);R=R.replace(/\s+/g,""),m.data=R}return m},d=function(f,m,g){for(var v=g.substring(0,16),y=Ae.enc.Hex.parse(v),b=Ae.enc.Utf8.parse(m),C=l[f].keylen+l[f].ivlen,R="",w=null;;){var E=Ae.algo.MD5.create();if(w!=null&&E.update(w),E.update(b),E.update(y),w=E.finalize(),R=R+Ae.enc.Hex.stringify(w),R.length>=C*2)break}var k={};return k.keyhex=R.substr(0,l[f].keylen*2),k.ivhex=R.substr(l[f].keylen*2,l[f].ivlen*2),k},h=function(f,m,g,v){var y=Ae.enc.Base64.parse(f),b=Ae.enc.Hex.stringify(y),C=l[m].proc,R=C(b,g,v);return R},p=function(f,m,g,v){var y=l[m].eproc,b=y(f,g,v);return b};return{version:"1.0.0",parsePKCS5PEM:function(f){return u(f)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(f,m,g){return d(f,m,g)},decryptKeyB64:function(f,m,g,v){return h(f,m,g,v)},getDecryptedKeyHex:function(f,m){var g=u(f),v=g.cipher,y=g.ivsalt,b=g.data,C=d(v,m,y),R=C.keyhex,w=h(b,v,R,y);return w},getEncryptedPKCS5PEMFromPrvKeyHex:function(f,m,g,v,y){var T="";if((typeof v>"u"||v==null)&&(v="AES-256-CBC"),typeof l[v]>"u")throw new Error("KEYUTIL unsupported algorithm: "+v);if(typeof y>"u"||y==null){var b=l[v].ivlen,C=c(b);y=C.toUpperCase()}var R=d(v,g,y),w=R.keyhex,E=p(m,v,w,y),k=E.replace(/(.{64})/g,`$1\r
`),T="-----BEGIN "+f+` PRIVATE KEY-----\r
`;return T+=`Proc-Type: 4,ENCRYPTED\r
`,T+="DEK-Info: "+v+","+y+`\r
`,T+=`\r
`,T+=k,T+=`\r
-----END `+f+` PRIVATE KEY-----\r
`,T},parseHexOfEncryptedPKCS8:function(f){var m=xe,g=m.getChildIdx,v=m.getV,y={},b=g(f,0);if(b.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+b.length);y.ciphertext=v(f,b[1]);var C=g(f,b[0]);if(C.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+C.length);if(v(f,C[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var R=g(f,C[1]);if(C.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+R.length);var w=g(f,R[1]);if(w.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+w.length);if(v(f,w[0])!="2a864886f70d0307")throw"this only supports TripleDES";y.encryptionSchemeAlg="TripleDES",y.encryptionSchemeIV=v(f,w[1]);var E=g(f,R[0]);if(E.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+E.length);if(v(f,E[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var k=g(f,E[1]);if(k.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+k.length);y.pbkdf2Salt=v(f,k[0]);var T=v(f,k[1]);try{y.pbkdf2Iter=parseInt(T,16)}catch{throw new Error("malformed format pbkdf2Iter: "+T)}return y},getPBKDF2KeyHexFromParam:function(f,m){var g=Ae.enc.Hex.parse(f.pbkdf2Salt),v=f.pbkdf2Iter,y=Ae.PBKDF2(m,g,{keySize:192/32,iterations:v}),b=Ae.enc.Hex.stringify(y);return b},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(f,m){var g=Gn(f,"ENCRYPTED PRIVATE KEY"),v=this.parseHexOfEncryptedPKCS8(g),y=Rt.getPBKDF2KeyHexFromParam(v,m),b={};b.ciphertext=Ae.enc.Hex.parse(v.ciphertext);var C=Ae.enc.Hex.parse(y),R=Ae.enc.Hex.parse(v.encryptionSchemeIV),w=Ae.TripleDES.decrypt(b,C,{iv:R}),E=Ae.enc.Hex.stringify(w);return E},getKeyFromEncryptedPKCS8PEM:function(f,m){var g=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(f,m),v=this.getKeyFromPlainPrivatePKCS8Hex(g);return v},parsePlainPrivatePKCS8Hex:function(f){var m=xe,g=m.getChildIdx,v=m.getV,y={};if(y.algparam=null,f.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var b=g(f,0);if(b.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(f.substr(b[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var C=g(f,b[1]);if(C.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(f.substr(C[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(y.algoid=v(f,C[0]),f.substr(C[1],2)=="06"&&(y.algparam=v(f,C[1])),f.substr(b[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return y.keyidx=m.getVidx(f,b[2]),y},getKeyFromPlainPrivatePKCS8PEM:function(f){var m=Gn(f,"PRIVATE KEY"),g=this.getKeyFromPlainPrivatePKCS8Hex(m);return g},getKeyFromPlainPrivatePKCS8Hex:function(f){var m=this.parsePlainPrivatePKCS8Hex(f),g;if(m.algoid=="2a864886f70d010101")g=new We;else if(m.algoid=="2a8648ce380401")g=new x.crypto.DSA;else if(m.algoid=="2a8648ce3d0201")g=new x.crypto.ECDSA;else throw new Error("unsupported private key algorithm");return g.readPKCS8PrvKeyHex(f),g},_getKeyFromPublicPKCS8Hex:function(f){var m,g=xe.getVbyList(f,0,[0,0],"06");if(g==="2a864886f70d010101")m=new We;else if(g==="2a8648ce380401")m=new x.crypto.DSA;else if(g==="2a8648ce3d0201")m=new x.crypto.ECDSA;else throw new Error("unsupported PKCS#8 public key hex");return m.readPKCS8PubKeyHex(f),m},parsePublicRawRSAKeyHex:function(f){var m=xe,g=m.getChildIdx,v=m.getV,y={};if(f.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var b=g(f,0);if(b.length!=2)throw new Error("malformed RSA key(code:002)");if(f.substr(b[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(y.n=v(f,b[0]),f.substr(b[1],2)!="02")throw new Error("malformed RSA key(code:004)");return y.e=v(f,b[1]),y},parsePublicPKCS8Hex:function(f){var m=xe,g=m.getChildIdx,v=m.getV,y={};y.algparam=null;var b=g(f,0);if(b.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+b.length);var C=b[0];if(f.substr(C,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var R=g(f,C);if(R.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(f.substr(R[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(y.algoid=v(f,R[0]),f.substr(R[1],2)=="06"?y.algparam=v(f,R[1]):f.substr(R[1],2)=="30"&&(y.algparam={},y.algparam.p=m.getVbyList(f,R[1],[0],"02"),y.algparam.q=m.getVbyList(f,R[1],[1],"02"),y.algparam.g=m.getVbyList(f,R[1],[2],"02")),f.substr(b[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return y.key=v(f,b[1]).substr(2),y}}}();Rt.getKey=function(t,e,n){var r=xe,i=r.getChildIdx;r.getV;var s=r.getVbyList,a=x.crypto,o=a.ECDSA,l=a.DSA,c=We,u=Gn,d=Rt;if(typeof c<"u"&&t instanceof c||typeof o<"u"&&t instanceof o||typeof l<"u"&&t instanceof l)return t;if(t.curve!==void 0&&t.xy!==void 0&&t.d===void 0)return new o({pub:t.xy,curve:t.curve});if(t.curve!==void 0&&t.d!==void 0)return new o({prv:t.d,curve:t.curve});if(t.kty===void 0&&t.n!==void 0&&t.e!==void 0&&t.d===void 0){var h=new c;return h.setPublic(t.n,t.e),h}if(t.kty===void 0&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0&&t.p!==void 0&&t.q!==void 0&&t.dp!==void 0&&t.dq!==void 0&&t.co!==void 0&&t.qi===void 0){var h=new c;return h.setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),h}if(t.kty===void 0&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0&&t.p===void 0){var h=new c;return h.setPrivate(t.n,t.e,t.d),h}if(t.p!==void 0&&t.q!==void 0&&t.g!==void 0&&t.y!==void 0&&t.x===void 0){var h=new l;return h.setPublic(t.p,t.q,t.g,t.y),h}if(t.p!==void 0&&t.q!==void 0&&t.g!==void 0&&t.y!==void 0&&t.x!==void 0){var h=new l;return h.setPrivate(t.p,t.q,t.g,t.y,t.x),h}if(t.kty==="RSA"&&t.n!==void 0&&t.e!==void 0&&t.d===void 0){var h=new c;return h.setPublic(tn(t.n),tn(t.e)),h}if(t.kty==="RSA"&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0&&t.p!==void 0&&t.q!==void 0&&t.dp!==void 0&&t.dq!==void 0&&t.qi!==void 0){var h=new c;return h.setPrivateEx(tn(t.n),tn(t.e),tn(t.d),tn(t.p),tn(t.q),tn(t.dp),tn(t.dq),tn(t.qi)),h}if(t.kty==="RSA"&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0){var h=new c;return h.setPrivate(tn(t.n),tn(t.e),tn(t.d)),h}if(t.kty==="EC"&&t.crv!==void 0&&t.x!==void 0&&t.y!==void 0&&t.d===void 0){var p=new o({curve:t.crv}),f=p.ecparams.keycharlen,m=("0000000000"+tn(t.x)).slice(-f),g=("0000000000"+tn(t.y)).slice(-f),v="04"+m+g;return p.setPublicKeyHex(v),p}if(t.kty==="EC"&&t.crv!==void 0&&t.x!==void 0&&t.y!==void 0&&t.d!==void 0){var p=new o({curve:t.crv}),f=p.ecparams.keycharlen,m=("0000000000"+tn(t.x)).slice(-f),g=("0000000000"+tn(t.y)).slice(-f),v="04"+m+g,y=("0000000000"+tn(t.d)).slice(-f);return p.setPublicKeyHex(v),p.setPrivateKeyHex(y),p}if(n==="pkcs5prv"){var b=t,r=xe,C,h;if(C=i(b,0),C.length===9)h=new c,h.readPKCS5PrvKeyHex(b);else if(C.length===6)h=new l,h.readPKCS5PrvKeyHex(b);else if(C.length>2&&b.substr(C[1],2)==="04")h=new o,h.readPKCS5PrvKeyHex(b);else throw new Error("unsupported PKCS#1/5 hexadecimal key");return h}if(n==="pkcs8prv"){var h=d.getKeyFromPlainPrivatePKCS8Hex(t);return h}if(n==="pkcs8pub")return d._getKeyFromPublicPKCS8Hex(t);if(n==="x509pub")return Xe.getPublicKeyFromCertHex(t);if(t.indexOf("-END CERTIFICATE-",0)!=-1||t.indexOf("-END X509 CERTIFICATE-",0)!=-1||t.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Xe.getPublicKeyFromCertPEM(t);if(t.indexOf("-END PUBLIC KEY-")!=-1){var R=Gn(t,"PUBLIC KEY");return d._getKeyFromPublicPKCS8Hex(R)}if(t.indexOf("-END RSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var w=u(t,"RSA PRIVATE KEY");return d.getKey(w,null,"pkcs5prv")}if(t.indexOf("-END DSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var E=u(t,"DSA PRIVATE KEY"),k=s(E,0,[1],"02"),T=s(E,0,[2],"02"),_=s(E,0,[3],"02"),D=s(E,0,[4],"02"),I=s(E,0,[5],"02"),h=new l;return h.setPrivate(new ee(k,16),new ee(T,16),new ee(_,16),new ee(D,16),new ee(I,16)),h}if(t.indexOf("-END EC PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var w=u(t,"EC PRIVATE KEY");return d.getKey(w,null,"pkcs5prv")}if(t.indexOf("-END PRIVATE KEY-")!=-1)return d.getKeyFromPlainPrivatePKCS8PEM(t);if(t.indexOf("-END RSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var M=d.getDecryptedKeyHex(t,e),A=new We;return A.readPKCS5PrvKeyHex(M),A}if(t.indexOf("-END EC PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var E=d.getDecryptedKeyHex(t,e),h=s(E,0,[1],"04"),O=s(E,0,[2,0],"06"),L=s(E,0,[3,0],"03").substr(2),F="";if(x.crypto.OID.oidhex2name[O]!==void 0)F=x.crypto.OID.oidhex2name[O];else throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+O);var p=new o({curve:F});return p.setPublicKeyHex(L),p.setPrivateKeyHex(h),p.isPublic=!1,p}if(t.indexOf("-END DSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var E=d.getDecryptedKeyHex(t,e),k=s(E,0,[1],"02"),T=s(E,0,[2],"02"),_=s(E,0,[3],"02"),D=s(E,0,[4],"02"),I=s(E,0,[5],"02"),h=new l;return h.setPrivate(new ee(k,16),new ee(T,16),new ee(_,16),new ee(D,16),new ee(I,16)),h}if(t.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return d.getKeyFromEncryptedPKCS8PEM(t,e);throw new Error("not supported argument")};Rt.generateKeypair=function(t,e){if(t=="RSA"){var n=e,r=new We;r.generate(n,"10001"),r.isPrivate=!0,r.isPublic=!0;var i=new We,s=r.n.toString(16),a=r.e.toString(16);i.setPublic(s,a),i.isPrivate=!1,i.isPublic=!0;var o={};return o.prvKeyObj=r,o.pubKeyObj=i,o}else if(t=="EC"){var l=e,c=new x.crypto.ECDSA({curve:l}),u=c.generateKeyPairHex(),r=new x.crypto.ECDSA({curve:l});r.setPublicKeyHex(u.ecpubhex),r.setPrivateKeyHex(u.ecprvhex),r.isPrivate=!0,r.isPublic=!1;var i=new x.crypto.ECDSA({curve:l});i.setPublicKeyHex(u.ecpubhex),i.isPrivate=!1,i.isPublic=!0;var o={};return o.prvKeyObj=r,o.pubKeyObj=i,o}else throw new Error("unknown algorithm: "+t)};Rt.getPEM=function(t,e,n,r,i,s){var a=x,o=a.asn1,l=o.DERObjectIdentifier,c=o.DERInteger,u=o.ASN1Util.newObject,d=o.x509,h=d.SubjectPublicKeyInfo,p=a.crypto,f=p.DSA,m=p.ECDSA,g=We;function v(L){var F=u({seq:[{int:0},{int:{bigint:L.n}},{int:L.e},{int:{bigint:L.d}},{int:{bigint:L.p}},{int:{bigint:L.q}},{int:{bigint:L.dmp1}},{int:{bigint:L.dmq1}},{int:{bigint:L.coeff}}]});return F}function y(L){var F=u({seq:[{int:1},{octstr:{hex:L.prvKeyHex}},{tag:["a0",!0,{oid:{name:L.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+L.pubKeyHex}}]}]});return F}function b(L){var F=u({seq:[{int:0},{int:{bigint:L.p}},{int:{bigint:L.q}},{int:{bigint:L.g}},{int:{bigint:L.y}},{int:{bigint:L.x}}]});return F}if((g!==void 0&&t instanceof g||f!==void 0&&t instanceof f||m!==void 0&&t instanceof m)&&t.isPublic==!0&&(e===void 0||e=="PKCS8PUB")){var C=new h(t),R=C.tohex();return fr(R,"PUBLIC KEY")}if(e=="PKCS1PRV"&&g!==void 0&&t instanceof g&&(n===void 0||n==null)&&t.isPrivate==!0){var C=v(t),R=C.tohex();return fr(R,"RSA PRIVATE KEY")}if(e=="PKCS1PRV"&&m!==void 0&&t instanceof m&&(n===void 0||n==null)&&t.isPrivate==!0){var w=new l({name:t.curveName}),E=w.tohex(),k=y(t),T=k.tohex(),_="";return _+=fr(E,"EC PARAMETERS"),_+=fr(T,"EC PRIVATE KEY"),_}if(e=="PKCS1PRV"&&f!==void 0&&t instanceof f&&(n===void 0||n==null)&&t.isPrivate==!0){var C=b(t),R=C.tohex();return fr(R,"DSA PRIVATE KEY")}if(e=="PKCS5PRV"&&g!==void 0&&t instanceof g&&n!==void 0&&n!=null&&t.isPrivate==!0){var C=v(t),R=C.tohex();return r===void 0&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",R,n,r,s)}if(e=="PKCS5PRV"&&m!==void 0&&t instanceof m&&n!==void 0&&n!=null&&t.isPrivate==!0){var C=y(t),R=C.tohex();return r===void 0&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",R,n,r,s)}if(e=="PKCS5PRV"&&f!==void 0&&t instanceof f&&n!==void 0&&n!=null&&t.isPrivate==!0){var C=b(t),R=C.tohex();return r===void 0&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",R,n,r,s)}var D=function(L,F){var B=I(L,F),j=new u({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:B.pbkdf2Salt}},{int:B.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:B.encryptionSchemeIV}}]}]}]},{octstr:{hex:B.ciphertext}}]});return j.tohex()},I=function(L,F){var B=100,j=Ae.lib.WordArray.random(8),q="DES-EDE3-CBC",V=Ae.lib.WordArray.random(8),U=Ae.PBKDF2(F,j,{keySize:192/32,iterations:B}),ne=Ae.enc.Hex.parse(L),W=Ae.TripleDES.encrypt(ne,U,{iv:V})+"",J={};return J.ciphertext=W,J.pbkdf2Salt=Ae.enc.Hex.stringify(j),J.pbkdf2Iter=B,J.encryptionSchemeAlg=q,J.encryptionSchemeIV=Ae.enc.Hex.stringify(V),J};if(e=="PKCS8PRV"&&g!=null&&t instanceof g&&t.isPrivate==!0){var M=v(t),A=M.tohex(),C=u({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:A}}]}),R=C.tohex();if(n===void 0||n==null)return fr(R,"PRIVATE KEY");var T=D(R,n);return fr(T,"ENCRYPTED PRIVATE KEY")}if(e=="PKCS8PRV"&&m!==void 0&&t instanceof m&&t.isPrivate==!0){var O={seq:[{int:1},{octstr:{hex:t.prvKeyHex}}]};typeof t.pubKeyHex=="string"&&O.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]});var M=new u(O),A=M.tohex(),C=u({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:A}}]}),R=C.tohex();if(n===void 0||n==null)return fr(R,"PRIVATE KEY");var T=D(R,n);return fr(T,"ENCRYPTED PRIVATE KEY")}if(e=="PKCS8PRV"&&f!==void 0&&t instanceof f&&t.isPrivate==!0){var M=new c({bigint:t.x}),A=M.tohex(),C=u({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:A}}]}),R=C.tohex();if(n===void 0||n==null)return fr(R,"PRIVATE KEY");var T=D(R,n);return fr(T,"ENCRYPTED PRIVATE KEY")}throw new Error("unsupported object nor format")};Rt.getKeyFromCSRPEM=function(t){var e=Gn(t,"CERTIFICATE REQUEST"),n=Rt.getKeyFromCSRHex(e);return n};Rt.getKeyFromCSRHex=function(t){var e=Rt.parseCSRHex(t),n=Rt.getKey(e.p8pubkeyhex,null,"pkcs8pub");return n};Rt.parseCSRHex=function(t){var e=xe,n=e.getChildIdx,r=e.getTLV,i={},s=t;if(s.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var a=n(s,0);if(a.length<1)throw new Error("malformed CSR(code:002)");if(s.substr(a[0],2)!="30")throw new Error("malformed CSR(code:003)");var o=n(s,a[0]);if(o.length<3)throw new Error("malformed CSR(code:004)");return i.p8pubkeyhex=r(s,o[2]),i};Rt.getKeyID=function(t){var e=Rt,n=xe;typeof t=="string"&&t.indexOf("BEGIN ")!=-1&&(t=e.getKey(t));var r=Gn(e.getPEM(t)),i=n.getIdxbyList(r,0,[1]),s=n.getV(r,i).substring(2);return x.crypto.Util.hashHex(s,"sha1")};Rt.getJWK=function(t,e,n,r,i){var s,a={},o,l=x.crypto.Util.hashHex;if(typeof t=="string")s=Rt.getKey(t),t.indexOf("CERTIFICATE")!=-1&&(o=Gn(t));else if(typeof t=="object")t instanceof Xe?(s=t.getPublicKey(),o=t.hex):s=t;else throw new Error("unsupported keyinfo type");if(s instanceof We&&s.isPrivate)a.kty="RSA",a.n=Kn(s.n.toString(16)),a.e=Kn(s.e.toString(16)),a.d=Kn(s.d.toString(16)),a.p=Kn(s.p.toString(16)),a.q=Kn(s.q.toString(16)),a.dp=Kn(s.dmp1.toString(16)),a.dq=Kn(s.dmq1.toString(16)),a.qi=Kn(s.coeff.toString(16));else if(s instanceof We&&s.isPublic)a.kty="RSA",a.n=Kn(s.n.toString(16)),a.e=Kn(s.e.toString(16));else if(s instanceof x.crypto.ECDSA&&s.isPrivate){var c=s.getShortNISTPCurveName();if(c!=="P-256"&&c!=="P-384"&&c!=="P-521")throw new Error("unsupported curve name for JWT: "+c);var u=s.getPublicKeyXYHex();a.kty="EC",a.crv=c,a.x=Kn(u.x),a.y=Kn(u.y),a.d=Kn(s.prvKeyHex)}else if(s instanceof x.crypto.ECDSA&&s.isPublic){var c=s.getShortNISTPCurveName();if(c!=="P-256"&&c!=="P-384"&&c!=="P-521")throw new Error("unsupported curve name for JWT: "+c);var u=s.getPublicKeyXYHex();a.kty="EC",a.crv=c,a.x=Kn(u.x),a.y=Kn(u.y)}if(a.kty==null)throw new Error("unsupported keyinfo");return!s.isPrivate&&e!=!0&&(a.kid=x.jws.JWS.getJWKthumbprint(a)),o!=null&&n!=!0&&(a.x5c=[kf(o)]),o!=null&&r!=!0&&(a.x5t=fv(kf(l(o,"sha1")))),o!=null&&i!=!0&&(a["x5t#S256"]=fv(kf(l(o,"sha256")))),a};Rt.getJWKFromKey=function(t){return Rt.getJWK(t,!0,!0,!0,!0)};We.getPosArrayOfChildrenFromHex=function(t){return xe.getChildIdx(t,0)};We.getHexValueArrayOfChildrenFromHex=function(t){var e=xe,n=e.getV,h=We.getPosArrayOfChildrenFromHex(t),r=n(t,h[0]),i=n(t,h[1]),s=n(t,h[2]),a=n(t,h[3]),o=n(t,h[4]),l=n(t,h[5]),c=n(t,h[6]),u=n(t,h[7]),d=n(t,h[8]),h=new Array;return h.push(r,i,s,a,o,l,c,u,d),h};We.prototype.readPrivateKeyFromPEMString=function(t){var e=Gn(t),n=We.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])};We.prototype.readPKCS5PrvKeyHex=function(t){var e=We.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])};We.prototype.readPKCS8PrvKeyHex=function(t){var e,n,r,i,s,a,o,l,c=xe,u=c.getVbyListEx;if(c.isASN1HEX(t)===!1)throw new Error("not ASN.1 hex string");try{e=u(t,0,[2,0,1],"02"),n=u(t,0,[2,0,2],"02"),r=u(t,0,[2,0,3],"02"),i=u(t,0,[2,0,4],"02"),s=u(t,0,[2,0,5],"02"),a=u(t,0,[2,0,6],"02"),o=u(t,0,[2,0,7],"02"),l=u(t,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(e,n,r,i,s,a,o,l)};We.prototype.readPKCS5PubKeyHex=function(t){var e=xe,n=e.getV;if(e.isASN1HEX(t)===!1)throw new Error("keyHex is not ASN.1 hex string");var r=e.getChildIdx(t,0);if(r.length!==2||t.substr(r[0],2)!=="02"||t.substr(r[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var i=n(t,r[0]),s=n(t,r[1]);this.setPublic(i,s)};We.prototype.readPKCS8PubKeyHex=function(t){var e=xe;if(e.isASN1HEX(t)===!1)throw new Error("not ASN.1 hex string");if(e.getTLVbyListEx(t,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var n=e.getTLVbyListEx(t,0,[1,0]);this.readPKCS5PubKeyHex(n)};We.prototype.readCertPubKeyHex=function(t,e){var n,r;n=new Xe,n.readCertHex(t),r=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(r)};function GB(t,e){for(var n="",r=e/4-t.length,i=0;i<r;i++)n=n+"0";return n+t}We.prototype.sign=function(t,e){var n=function(i){return x.crypto.Util.hashString(i,e)},r=n(t);return this.signWithMessageHash(r,e)};We.prototype.signWithMessageHash=function(t,e){var n=x.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),r=Rr(n,16),i=this.doPrivate(r),s=i.toString(16);return GB(s,this.n.bitLength())};function KB(t,e,n){for(var r="",i=0;r.length<e;)r+=rs(n(Ms(t+String.fromCharCode.apply(String,[(i&4278190080)>>24,(i&16711680)>>16,(i&65280)>>8,i&255])))),i+=1;return r}We.prototype.signPSS=function(t,e,n){var r=function(s){return x.crypto.Util.hashHex(s,e)},i=r(Ms(t));return n===void 0&&(n=-1),this.signWithMessageHashPSS(i,e,n)};We.prototype.signWithMessageHashPSS=function(t,e,n){var r=rs(t),i=r.length,s=this.n.bitLength()-1,a=Math.ceil(s/8),o,l=function(g){return x.crypto.Util.hashHex(g,e)};if(n===-1||n===void 0)n=i;else if(n===-2)n=a-i-2;else if(n<-2)throw new Error("invalid salt length");if(a<i+n+2)throw new Error("data too long");var c="";n>0&&(c=new Array(n),new Wc().nextBytes(c),c=String.fromCharCode.apply(String,c));var u=rs(l(Ms("\0\0\0\0\0\0\0\0"+r+c))),d=[];for(o=0;o<a-n-i-2;o+=1)d[o]=0;var h=String.fromCharCode.apply(String,d)+""+c,p=KB(u,h.length,l),f=[];for(o=0;o<h.length;o+=1)f[o]=h.charCodeAt(o)^p.charCodeAt(o);var m=65280>>8*a-s&255;for(f[0]&=~m,o=0;o<i;o++)f.push(u.charCodeAt(o));return f.push(188),GB(this.doPrivate(new ee(f)).toString(16),this.n.bitLength())};function YB(t){for(var e in x.crypto.Util.DIGESTINFOHEAD){var n=x.crypto.Util.DIGESTINFOHEAD[e],r=n.length;if(t.substring(0,r)==n){var i=[e,t.substring(r)];return i}}return[]}We.prototype.verify=function(t,e){if(e=e.toLowerCase(),e.match(/^[0-9a-f]+$/)==null)return!1;var n=Rr(e,16),r=this.n.bitLength();if(n.bitLength()>r)return!1;var i=this.doPublic(n),s=i.toString(16);if(s.length+3!=r/4)return!1;var a=s.replace(/^1f+00/,""),o=YB(a);if(o.length==0)return!1;var l=o[0],c=o[1],u=function(h){return x.crypto.Util.hashString(h,l)},d=u(t);return c==d};We.prototype.verifyWithMessageHash=function(t,e){if(e.length!=Math.ceil(this.n.bitLength()/4))return!1;var n=Rr(e,16);if(n.bitLength()>this.n.bitLength())return 0;var r=this.doPublic(n),i=r.toString(16).replace(/^1f+00/,""),s=YB(i);if(s.length==0)return!1;s[0];var a=s[1];return a==t};We.prototype.verifyPSS=function(t,e,n,r){var i=function(a){return x.crypto.Util.hashHex(a,n)},s=i(Ms(t));return r===void 0&&(r=-1),this.verifyWithMessageHashPSS(s,e,n,r)};We.prototype.verifyWithMessageHashPSS=function(t,e,n,r){if(e.length!=Math.ceil(this.n.bitLength()/4))return!1;var i=new ee(e,16),s=function(y){return x.crypto.Util.hashHex(y,n)},a=rs(t),o=a.length,l=this.n.bitLength()-1,c=Math.ceil(l/8),u;if(r===-1||r===void 0)r=o;else if(r===-2)r=c-o-2;else if(r<-2)throw new Error("invalid salt length");if(c<o+r+2)throw new Error("data too long");var d=this.doPublic(i).toByteArray();for(u=0;u<d.length;u+=1)d[u]&=255;for(;d.length<c;)d.unshift(0);if(d[c-1]!==188)throw new Error("encoded message does not end in 0xbc");d=String.fromCharCode.apply(String,d);var h=d.substr(0,c-o-1),p=d.substr(h.length,o),f=65280>>8*c-l&255;if(h.charCodeAt(0)&f)throw new Error("bits beyond keysize not zero");var m=KB(p,h.length,s),g=[];for(u=0;u<h.length;u+=1)g[u]=h.charCodeAt(u)^m.charCodeAt(u);g[0]&=~f;var v=c-o-r-2;for(u=0;u<v;u+=1)if(g[u]!==0)throw new Error("leftmost octets not zero");if(g[v]!==1)throw new Error("0x01 marker not found");return p===rs(s(Ms("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,g.slice(-r)))))};We.SALT_LEN_HLEN=-1;We.SALT_LEN_MAX=-2;We.SALT_LEN_RECOVER=-2;function Xe(t){var e=xe,n=e.getChildIdx,r=e.getV;e.dump;var i=e.parse,s=e.getTLV,a=e.getVbyList,o=e.getVbyListEx,l=e.getTLVbyList,c=e.getTLVbyListEx,u=e.getIdxbyList,d=e.getIdxbyListEx,h=e.getVidx,p=e.getInt,f=e.oidname,m=e.hextooidstr,g=Gn,v,y=Error;try{v=x.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var w=l(this.hex,0,[0,0]);if(w.substr(0,2)=="a0"){var E=l(w,0,[0]),k=p(E,0);if(k<0||2<k)throw new Error("malformed version field");return this.version=k+1,this.version}else return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return o(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var w=c(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(w)},this.getAlgorithmIdentifierName=function(w){for(var E in v)if(w===v[E])return E;return f(o(w,0,[0],"06"))},this.getIssuer=function(w,E){return this.getX500Name(this.getIssuerHex(),w,E)},this.getIssuerHex=function(){return l(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){var w=this.getIssuer();return w.str},this.getSubject=function(w,E){return this.getX500Name(this.getSubjectHex(),w,E)},this.getSubjectHex=function(){return l(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){var w=this.getSubject();return w.str},this.getNotBefore=function(){var w=a(this.hex,0,[0,4+this.foffset,0]);return w=w.replace(/(..)/g,"%$1"),w=decodeURIComponent(w),w},this.getNotAfter=function(){var w=a(this.hex,0,[0,4+this.foffset,1]);return w=w.replace(/(..)/g,"%$1"),w=decodeURIComponent(w),w},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return l(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var w=this.getSPKI();return w==null?null:a(w,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return u(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var w=this.getPublicKeyIdx();return u(this.hex,w,[1,0],"30")},this.getPublicKey=function(){return Rt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var w=l(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(w)},this.getSignatureValueHex=function(){return a(this.hex,0,[2],"03",!0)},this.verifySignature=function(w){var E=this.getSignatureAlgorithmField(),k=this.getSignatureValueHex(),T=l(this.hex,0,[0],"30"),_=new x.crypto.Signature({alg:E});return _.init(w),_.updateHex(T),_.verify(k)},this.parseExt=function(w){var E,k,T;if(w===void 0){if(T=this.hex,this.version!==3)return-1;E=u(T,0,[0,7,0],"30"),k=n(T,E)}else{T=Gn(w);var _=u(T,0,[0,3,0,0],"06");if(r(T,_)!="2a864886f70d01090e"){this.aExtInfo=new Array;return}E=u(T,0,[0,3,0,1,0],"30"),k=n(T,E),this.hex=T}this.aExtInfo=new Array;for(var D=0;D<k.length;D++){var I={};I.critical=!1;var M=n(T,k[D]),A=0;M.length===3&&(I.critical=!0,A=1),I.oid=e.hextooidstr(a(T,k[D],[0],"06"));var O=u(T,k[D],[1+A]);I.vidx=h(T,O),this.aExtInfo.push(I)}},this.getExtInfo=function(w){var E=this.aExtInfo,k=w;if(w.match(/^[0-9.]+$/)||(k=x.asn1.x509.OID.name2oid(w)),k!==""){for(var T=0;T<E.length;T++)if(E[T].oid===k)return E[T]}},this.getCriticalExtV=function(w,E,k){if(E!=null)return[E,k];var T=this.getExtInfo(w);return T==null?[null,null]:[s(this.hex,T.vidx),T.critical]},this.getExtBasicConstraints=function(w,E){if(w===void 0&&E===void 0){var k=this.getExtInfo("basicConstraints");if(k===void 0)return;w=s(this.hex,k.vidx),E=k.critical}var T={extname:"basicConstraints"};if(E&&(T.critical=!0),w==="3000")return T;if(w==="30030101ff")return T.cA=!0,T;if(w.substr(0,12)==="30060101ff02"){var _=r(w,10),D=parseInt(_,16);return T.cA=!0,T.pathLen=D,T}throw new Error("hExtV parse error: "+w)},this.getExtNameConstraints=function(w,E){var k=this.getCriticalExtV("nameConstraints",w,E);if(w=k[0],E=k[1],w!=null){var T={extname:"nameConstraints"};E&&(T.critical=!0);for(var _=n(w,0),D=0;D<_.length;D++){for(var I=[],M=n(w,_[D]),A=0;A<M.length;A++){var O=s(w,M[A]),L=this.getGeneralSubtree(O);I.push(L)}var F=w.substr(_[D],2);F=="a0"?T.permit=I:F=="a1"&&(T.exclude=I)}return T}},this.getGeneralSubtree=function(w){var E=n(w,0),k=E.length;if(k<1||2<k)throw new Error("wrong num elements");for(var T=this.getGeneralName(s(w,E[0])),_=1;_<k;_++){var D=w.substr(E[_],2),I=r(w,E[_]),M=parseInt(I,16);D=="80"&&(T.min=M),D=="81"&&(T.max=M)}return T},this.getExtKeyUsage=function(w,E){var k=this.getCriticalExtV("keyUsage",w,E);if(w=k[0],E=k[1],w!=null){var T={extname:"keyUsage"};return E&&(T.critical=!0),T.names=this.getExtKeyUsageString(w).split(","),T}},this.getExtKeyUsageBin=function(w){if(w===void 0){var E=this.getExtInfo("keyUsage");if(E===void 0)return"";w=s(this.hex,E.vidx)}if(w.length!=8&&w.length!=10)throw new Error("malformed key usage value: "+w);var k="000000000000000"+parseInt(w.substr(6),16).toString(2);return w.length==8&&(k=k.slice(-8)),w.length==10&&(k=k.slice(-16)),k=k.replace(/0+$/,""),k==""&&(k="0"),k},this.getExtKeyUsageString=function(w){for(var E=this.getExtKeyUsageBin(w),k=new Array,T=0;T<E.length;T++)E.substr(T,1)=="1"&&k.push(Xe.KEYUSAGE_NAME[T]);return k.join(",")},this.getExtSubjectKeyIdentifier=function(w,E){if(w===void 0&&E===void 0){var k=this.getExtInfo("subjectKeyIdentifier");if(k===void 0)return;w=s(this.hex,k.vidx),E=k.critical}var T={extname:"subjectKeyIdentifier"};E&&(T.critical=!0);var _=r(w,0);return T.kid={hex:_},T},this.getExtAuthorityKeyIdentifier=function(w,E){if(w===void 0&&E===void 0){var k=this.getExtInfo("authorityKeyIdentifier");if(k===void 0)return;w=s(this.hex,k.vidx),E=k.critical}var T={extname:"authorityKeyIdentifier"};E&&(T.critical=!0);for(var _=n(w,0),D=0;D<_.length;D++){var I=w.substr(_[D],2);if(I==="80"&&(T.kid={hex:r(w,_[D])}),I==="a1"){var M=s(w,_[D]),A=this.getGeneralNames(M);T.issuer=A[0].dn}I==="82"&&(T.sn={hex:r(w,_[D])})}return T},this.getExtExtKeyUsage=function(w,E){if(w===void 0&&E===void 0){var k=this.getExtInfo("extKeyUsage");if(k===void 0)return;w=s(this.hex,k.vidx),E=k.critical}var T={extname:"extKeyUsage",array:[]};E&&(T.critical=!0);for(var _=n(w,0),D=0;D<_.length;D++)T.array.push(f(r(w,_[D])));return T},this.getExtExtKeyUsageName=function(){var w=this.getExtInfo("extKeyUsage");if(w===void 0)return w;var E=new Array,k=s(this.hex,w.vidx);if(k==="")return E;for(var T=n(k,0),_=0;_<T.length;_++)E.push(f(r(k,T[_])));return E},this.getExtSubjectAltName=function(w,E){if(w===void 0&&E===void 0){var k=this.getExtInfo("subjectAltName");if(k===void 0)return;w=s(this.hex,k.vidx),E=k.critical}var T={extname:"subjectAltName",array:[]};return E&&(T.critical=!0),T.array=this.getGeneralNames(w),T},this.getExtIssuerAltName=function(w,E){if(w===void 0&&E===void 0){var k=this.getExtInfo("issuerAltName");if(k===void 0)return;w=s(this.hex,k.vidx),E=k.critical}var T={extname:"issuerAltName",array:[]};return E&&(T.critical=!0),T.array=this.getGeneralNames(w),T},this.getGeneralNames=function(w){for(var E=n(w,0),k=[],T=0;T<E.length;T++){var _=this.getGeneralName(s(w,E[T]));_!==void 0&&k.push(_)}return k},this.getGeneralName=function(w){var E=w.substr(0,2),k=r(w,0),T=rs(k);if(E=="81")return{rfc822:T};if(E=="82")return{dns:T};if(E=="86")return{uri:T};if(E=="87")return{ip:l2(k)};if(E=="a4")return{dn:this.getX500Name(k)};if(E=="a0")return{other:this.getOtherName(w)}},this.getExtSubjectAltName2=function(){var w,E,k,T=this.getExtInfo("subjectAltName");if(T===void 0)return T;for(var _=new Array,D=s(this.hex,T.vidx),I=n(D,0),M=0;M<I.length;M++)k=D.substr(I[M],2),w=r(D,I[M]),k==="81"&&(E=Mt(w),_.push(["MAIL",E])),k==="82"&&(E=Mt(w),_.push(["DNS",E])),k==="84"&&(E=Xe.hex2dn(w,0),_.push(["DN",E])),k==="86"&&(E=Mt(w),_.push(["URI",E])),k==="87"&&(E=l2(w),_.push(["IP",E]));return _},this.getExtCRLDistributionPoints=function(w,E){if(w===void 0&&E===void 0){var k=this.getExtInfo("cRLDistributionPoints");if(k===void 0)return;w=s(this.hex,k.vidx),E=k.critical}var T={extname:"cRLDistributionPoints",array:[]};E&&(T.critical=!0);for(var _=n(w,0),D=0;D<_.length;D++){var I=s(w,_[D]);T.array.push(this.getDistributionPoint(I))}return T},this.getDistributionPoint=function(w){for(var E={},k=n(w,0),T=0;T<k.length;T++){var _=w.substr(k[T],2),D=s(w,k[T]);_=="a0"&&(E.dpname=this.getDistributionPointName(D))}return E},this.getDistributionPointName=function(w){for(var E={},k=n(w,0),T=0;T<k.length;T++){var _=w.substr(k[T],2),D=s(w,k[T]);_=="a0"&&(E.full=this.getGeneralNames(D))}return E},this.getExtCRLDistributionPointsURI=function(){var w=this.getExtCRLDistributionPoints();if(w==null)return w;for(var E=w.array,k=[],T=0;T<E.length;T++)try{E[T].dpname.full[0].uri!=null&&k.push(E[T].dpname.full[0].uri)}catch{}return k},this.getExtAIAInfo=function(){var w=this.getExtInfo("authorityInfoAccess");if(w===void 0)return w;for(var E={ocsp:[],caissuer:[]},k=n(this.hex,w.vidx),T=0;T<k.length;T++){var _=a(this.hex,k[T],[0],"06"),D=a(this.hex,k[T],[1],"86");_==="2b06010505073001"&&E.ocsp.push(Mt(D)),_==="2b06010505073002"&&E.caissuer.push(Mt(D))}return E},this.getExtAuthorityInfoAccess=function(w,E){if(w===void 0&&E===void 0){var k=this.getExtInfo("authorityInfoAccess");if(k===void 0)return;w=s(this.hex,k.vidx),E=k.critical}var T={extname:"authorityInfoAccess",array:[]};E&&(T.critical=!0);for(var _=n(w,0),D=0;D<_.length;D++){var I=o(w,_[D],[0],"06"),M=a(w,_[D],[1],"86"),A=Mt(M);if(I=="2b06010505073001")T.array.push({ocsp:A});else if(I=="2b06010505073002")T.array.push({caissuer:A});else throw new Error("unknown method: "+I)}return T},this.getExtCertificatePolicies=function(w,E){if(w===void 0&&E===void 0){var k=this.getExtInfo("certificatePolicies");if(k===void 0)return;w=s(this.hex,k.vidx),E=k.critical}var T={extname:"certificatePolicies",array:[]};E&&(T.critical=!0);for(var _=n(w,0),D=0;D<_.length;D++){var I=s(w,_[D]),M=this.getPolicyInformation(I);T.array.push(M)}return T},this.getPolicyInformation=function(w){var E={},k=a(w,0,[0],"06");E.policyoid=f(k);var T=d(w,0,[1],"30");if(T!=-1){E.array=[];for(var _=n(w,T),D=0;D<_.length;D++){var I=s(w,_[D]),M=this.getPolicyQualifierInfo(I);E.array.push(M)}}return E},this.getOtherName=function(w){var E={},k=n(w,0),T=a(w,k[0],[],"06"),_=a(w,k[1],[]);return E.oid=f(T),E.value=i(_),E},this.getPolicyQualifierInfo=function(w){var E={},k=a(w,0,[0],"06");if(k==="2b06010505070201"){var T=o(w,0,[1],"16");E.cps=rs(T)}else if(k==="2b06010505070202"){var _=l(w,0,[1],"30");E.unotice=this.getUserNotice(_)}return E},this.getUserNotice=function(w){var E=null;try{E=e.parse(w);var k=this._asn1ToUnotice(E);return k}catch{return}},this._asn1ToUnotice=function(w){try{for(var E={},k=ag(w,"seq"),T=0;T<k.length;T++){var _=this._asn1ToNoticeRef(k[T]);_!=null&&(E.noticeref=_);var D=this.asn1ToDisplayText(k[T]);D!=null&&(E.exptext=D)}return Object.keys(E).length>0?E:void 0}catch{return}},this._asn1ToNoticeRef=function(w){try{for(var E={},k=ag(w,"seq"),T=0;T<k.length;T++){var _=this._asn1ToNoticeNum(k[T]);_!=null&&(E.noticenum=_);var D=this.asn1ToDisplayText(k[T]);D!=null&&(E.org=D)}return Object.keys(E).length>0?E:void 0}catch{return}},this._asn1ToNoticeNum=function(w){try{for(var E=ag(w,"seq"),k=[],T=0;T<E.length;T++){var _=E[T];k.push(parseInt(ag(_,"int.hex"),16))}return k}catch{return}},this.getDisplayText=function(w){var E={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"},k={};return k.type=E[w.substr(0,2)],k.str=rs(r(w,0)),k},this.asn1ToDisplayText=function(w){if(w.utf8str!=null)return{type:"utf8",str:w.utf8str.str};if(w.ia5str!=null)return{type:"ia5",str:w.ia5str.str};if(w.visstr!=null)return{type:"vis",str:w.visstr.str};if(w.bmpstr!=null)return{type:"bmp",str:w.bmpstr.str};if(w.prnstr!=null)return{type:"prn",str:w.prnstr.str}},this.getExtPolicyMappings=function(w,E){var k=this.getCriticalExtV("policyMappings",w,E);if(w=k[0],E=k[1],w!=null){var T={extname:"policyMappings"};E&&(T.critical=!0);try{for(var _=i(w),D=_.seq,I=[],M=0;M<D.length;M++){var A=D[M].seq;I.push([A[0].oid,A[1].oid])}T.array=I}catch{throw new y("malformed policyMappings")}return T}},this.getExtPolicyConstraints=function(w,E){var k=this.getCriticalExtV("policyConstraints",w,E);if(w=k[0],E=k[1],w!=null){var T={extname:"policyConstraints"};E&&(T.critical=!0);var _=i(w);try{for(var D=_.seq,I=0;I<D.length;I++){var M=D[I].tag;M.explicit==!1&&(M.tag=="80"&&(T.reqexp=parseInt(M.hex,16)),M.tag=="81"&&(T.inhibit=parseInt(M.hex,16)))}}catch{return new y("malformed policyConstraints value")}return T}},this.getExtInhibitAnyPolicy=function(w,E){var k=this.getCriticalExtV("inhibitAnyPolicy",w,E);if(w=k[0],E=k[1],w!=null){var T={extname:"inhibitAnyPolicy"};E&&(T.critical=!0);var _=p(w,0);return _==-1?new y("wrong value"):(T.skip=_,T)}},this.getExtCRLNumber=function(w,E){var k={extname:"cRLNumber"};if(E&&(k.critical=!0),w.substr(0,2)=="02")return k.num={hex:r(w,0)},k;throw new y("hExtV parse error: "+w)},this.getExtCRLReason=function(w,E){var k={extname:"cRLReason"};if(E&&(k.critical=!0),w.substr(0,2)=="0a")return k.code=parseInt(r(w,0),16),k;throw new Error("hExtV parse error: "+w)},this.getExtOcspNonce=function(w,E){var k={extname:"ocspNonce"};E&&(k.critical=!0);var T=r(w,0);return k.hex=T,k},this.getExtOcspNoCheck=function(w,E){var k={extname:"ocspNoCheck"};return E&&(k.critical=!0),k},this.getExtAdobeTimeStamp=function(w,E){if(w===void 0&&E===void 0){var k=this.getExtInfo("adobeTimeStamp");if(k===void 0)return;w=s(this.hex,k.vidx),E=k.critical}var T={extname:"adobeTimeStamp"};E&&(T.critical=!0);var _=n(w,0);if(_.length>1){var D=s(w,_[1]),I=this.getGeneralName(D);I.uri!=null&&(T.uri=I.uri)}if(_.length>2){var M=s(w,_[2]);M=="0101ff"&&(T.reqauth=!0),M=="010100"&&(T.reqauth=!1)}return T};var b=function(w){var E={};try{var k=w.seq[0].oid,T=x.asn1.x509.OID.name2oid(k);E.type=x.asn1.x509.OID.oid2atype(T);var _=w.seq[1];if(_.utf8str!=null)E.ds="utf8",E.value=_.utf8str.str;else if(_.numstr!=null)E.ds="num",E.value=_.numstr.str;else if(_.telstr!=null)E.ds="tel",E.value=_.telstr.str;else if(_.prnstr!=null)E.ds="prn",E.value=_.prnstr.str;else if(_.ia5str!=null)E.ds="ia5",E.value=_.ia5str.str;else if(_.visstr!=null)E.ds="vis",E.value=_.visstr.str;else if(_.bmpstr!=null)E.ds="bmp",E.value=_.bmpstr.str;else throw"error";return E}catch{throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},C=function(w){try{return w.set.map(function(E){return b(E)})}catch(E){throw new Error("improper ASN.1 parsed RDN: "+E)}},R=function(w){try{return w.seq.map(function(E){return C(E)})}catch(E){throw new Error("improper ASN.1 parsed X500Name: "+E)}};this.getX500NameRule=function(w){for(var E=null,k=[],T=0;T<w.length;T++)for(var _=w[T],D=0;D<_.length;D++)k.push(_[D]);for(var T=0;T<k.length;T++){var I=k[T],M=I.ds,A=I.value,O=I.type;if(M!="prn"&&M!="utf8"&&M!="ia5")return"mixed";if(M=="ia5"){if(O!="CN")return"mixed";if(x.lang.String.isMail(A))continue;return"mixed"}if(O=="C"){if(M=="prn")continue;return"mixed"}if(E==null)E=M;else if(E!==M)return"mixed"}return E??"prn"},this.getAttrTypeAndValue=function(w){var E=i(w);return b(E)},this.getRDN=function(w){var E=i(w);return C(E)},this.getX500NameArray=function(w){var E=i(w);return R(E)},this.getX500Name=function(w,E,k){var T=this.getX500NameArray(w),_=this.dnarraytostr(T),D={str:_};return D.array=T,k==!0&&(D.hex=w),E==!0&&(D.canon=this.c14nRDNArray(T)),D},this.readCertPEM=function(w){this.readCertHex(g(w))},this.readCertHex=function(w){this.hex=w,this.getVersion();try{u(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(w){var E={};return w==null&&(w={}),E.version=this.getVersion(),E.serial={hex:this.getSerialNumberHex()},E.sigalg=this.getSignatureAlgorithmField(),E.issuer=this.getIssuer(w.dncanon,w.dnhex),E.notbefore=this.getNotBefore(),E.notafter=this.getNotAfter(),E.subject=this.getSubject(w.dncanon,w.dnhex),E.sbjpubkey=fr(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo!=null&&this.aExtInfo.length>0&&(E.ext=this.getExtParamArray()),E.sighex=this.getSignatureValueHex(),w.tbshex==!0&&(E.tbshex=l(this.hex,0,[0])),w.nodnarray==!0&&(delete E.issuer.array,delete E.subject.array),E},this.getExtParamArray=function(w){if(w==null){var E=d(this.hex,0,[0,"[3]"]);E!=-1&&(w=c(this.hex,0,[0,"[3]",0],"30"))}for(var k=[],T=n(w,0),_=0;_<T.length;_++){var D=s(w,T[_]),I=this.getExtParam(D);I!=null&&k.push(I)}return k},this.getExtParam=function(w){var E=n(w,0),k=E.length;if(k!=2&&k!=3)throw new Error("wrong number elements in Extension: "+k+" "+w);var T=m(a(w,0,[0],"06")),_=!1;k==3&&l(w,0,[1])=="0101ff"&&(_=!0);var D=l(w,0,[k-1,0]),I=void 0;if(T=="2.5.29.14"?I=this.getExtSubjectKeyIdentifier(D,_):T=="2.5.29.15"?I=this.getExtKeyUsage(D,_):T=="2.5.29.17"?I=this.getExtSubjectAltName(D,_):T=="2.5.29.18"?I=this.getExtIssuerAltName(D,_):T=="2.5.29.19"?I=this.getExtBasicConstraints(D,_):T=="2.5.29.30"?I=this.getExtNameConstraints(D,_):T=="2.5.29.31"?I=this.getExtCRLDistributionPoints(D,_):T=="2.5.29.32"?I=this.getExtCertificatePolicies(D,_):T=="2.5.29.33"?I=this.getExtPolicyMappings(D,_):T=="2.5.29.35"?I=this.getExtAuthorityKeyIdentifier(D,_):T=="2.5.29.36"?I=this.getExtPolicyConstraints(D,_):T=="2.5.29.37"?I=this.getExtExtKeyUsage(D,_):T=="2.5.29.54"?I=this.getExtInhibitAnyPolicy(D,_):T=="1.3.6.1.5.5.7.1.1"?I=this.getExtAuthorityInfoAccess(D,_):T=="2.5.29.20"?I=this.getExtCRLNumber(D,_):T=="2.5.29.21"?I=this.getExtCRLReason(D,_):T=="1.3.6.1.5.5.7.48.1.2"?I=this.getExtOcspNonce(D,_):T=="1.3.6.1.5.5.7.48.1.5"?I=this.getExtOcspNoCheck(D,_):T=="1.2.840.113583.1.1.9.1"?I=this.getExtAdobeTimeStamp(D,_):Xe.EXT_PARSER[T]!=null&&(I=Xe.EXT_PARSER[T](T,_,D)),I!=null)return I;var M={extname:T,extn:D};return _&&(M.critical=!0),M},this.findExt=function(w,E){for(var k=0;k<w.length;k++)if(w[k].extname==E)return w[k];return null},this.updateExtCDPFullURI=function(w,E){var k=this.findExt(w,"cRLDistributionPoints");if(k!=null&&k.array!=null){for(var T=k.array,_=0;_<T.length;_++)if(T[_].dpname!=null&&T[_].dpname.full!=null)for(var D=T[_].dpname.full,I=0;I<D.length;I++){var M=D[_];M.uri!=null&&(M.uri=E)}}},this.updateExtAIAOCSP=function(w,E){var k=this.findExt(w,"authorityInfoAccess");if(k!=null&&k.array!=null)for(var T=k.array,_=0;_<T.length;_++)T[_].ocsp!=null&&(T[_].ocsp=E)},this.updateExtAIACAIssuer=function(w,E){var k=this.findExt(w,"authorityInfoAccess");if(k!=null&&k.array!=null)for(var T=k.array,_=0;_<T.length;_++)T[_].caissuer!=null&&(T[_].caissuer=E)},this.dnarraytostr=function(w){function E(T){return T.map(function(_){return k(_).replace(/\+/,"\\+")}).join("+")}function k(T){return T.type+"="+T.value}return"/"+w.map(function(T){return E(T).replace(/\//,"\\/")}).join("/")},this.setCanonicalizedDN=function(w){var E;if(w.str!=null&&w.array==null){var k=new x.asn1.x509.X500Name({str:w.str}),T=k.tohex();E=this.getX500NameArray(T)}else E=w.array;w.canon==null&&(w.canon=this.c14nRDNArray(E))},this.c14nRDNArray=function(w){for(var E=[],k=0;k<w.length;k++){for(var T=w[k],_=[],D=0;D<T.length;D++){var I=T[D],M=I.value;M=M.replace(/^\s*/,""),M=M.replace(/\s*$/,""),M=M.replace(/\s+/g," "),M=M.toLowerCase(),_.push(I.type.toLowerCase()+"="+M)}E.push(_.join("+"))}return"/"+E.join("/")},this.getInfo=function(){var w=function(K){for(var Q="",re="    ",G=`
`,ie=K.array,te=0;te<ie.length;te++){var Z=ie[te];if(Z.dn!=null&&(Q+=re+"dn: "+Z.dn.str+G),Z.ip!=null&&(Q+=re+"ip: "+Z.ip+G),Z.rfc822!=null&&(Q+=re+"rfc822: "+Z.rfc822+G),Z.dns!=null&&(Q+=re+"dns: "+Z.dns+G),Z.uri!=null&&(Q+=re+"uri: "+Z.uri+G),Z.other!=null){var oe=Z.other.oid,ue=JSON.stringify(Z.other.value).replace(/\"/g,"");Q+=re+"other: "+oe+"="+ue+G}}return Q=Q.replace(/\n$/,""),Q},E=function(K){for(var Q="",re=K.array,G=0;G<re.length;G++){var ie=re[G];if(Q+="    policy oid: "+ie.policyoid+`
`,ie.array!==void 0)for(var te=0;te<ie.array.length;te++){var Z=ie.array[te];Z.cps!==void 0&&(Q+="    cps: "+Z.cps+`
`)}}return Q},k=function(K){for(var Q="",re=K.array,G=0;G<re.length;G++){var ie=re[G];try{ie.dpname.full[0].uri!==void 0&&(Q+="    "+ie.dpname.full[0].uri+`
`)}catch{}try{ie.dname.full[0].dn.hex!==void 0&&(Q+="    "+Xe.hex2dn(ie.dpname.full[0].dn.hex)+`
`)}catch{}}return Q},T=function(K){for(var Q="",re=K.array,G=0;G<re.length;G++){var ie=re[G];ie.caissuer!==void 0&&(Q+="    caissuer: "+ie.caissuer+`
`),ie.ocsp!==void 0&&(Q+="    ocsp: "+ie.ocsp+`
`)}return Q},_,D,I;if(_=`Basic Fields
`,_+="  serial number: "+this.getSerialNumberHex()+`
`,_+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,_+="  issuer: "+this.getIssuerString()+`
`,_+="  notBefore: "+this.getNotBefore()+`
`,_+="  notAfter: "+this.getNotAfter()+`
`,_+="  subject: "+this.getSubjectString()+`
`,_+=`  subject public key info: 
`,D=this.getPublicKey(),_+="    key algorithm: "+D.type+`
`,D.type==="RSA"&&(_+="    n="+DO(D.n.toString(16)).substr(0,16)+`...
`,_+="    e="+DO(D.e.toString(16))+`
`),I=this.aExtInfo,I!=null){_+=`X509v3 Extensions:
`;for(var M=0;M<I.length;M++){var A=I[M],O=x.asn1.x509.OID.oid2name(A.oid);O===""&&(O=A.oid);var L="";if(A.critical===!0&&(L="CRITICAL"),_+="  "+O+" "+L+`:
`,O==="basicConstraints"){var F=this.getExtBasicConstraints();F.cA===void 0?_+=`    {}
`:(_+="    cA=true",F.pathLen!==void 0&&(_+=", pathLen="+F.pathLen),_+=`
`)}else if(O=="policyMappings"){var B=this.getExtPolicyMappings().array,j=B.map(function(K){var Q=K;return Q[0]+":"+Q[1]}).join(", ");_+="    "+j+`
`}else if(O=="policyConstraints"){var q=this.getExtPolicyConstraints();_+="    ",q.reqexp!=null&&(_+=" reqexp="+q.reqexp),q.inhibit!=null&&(_+=" inhibit="+q.inhibit),_+=`
`}else if(O=="inhibitAnyPolicy"){var q=this.getExtInhibitAnyPolicy();_+="    skip="+q.skip+`
`}else if(O=="keyUsage")_+="    "+this.getExtKeyUsageString()+`
`;else if(O=="subjectKeyIdentifier")_+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(O=="authorityKeyIdentifier"){var V=this.getExtAuthorityKeyIdentifier();V.kid!==void 0&&(_+="    kid="+V.kid.hex+`
`)}else if(O=="extKeyUsage"){var U=this.getExtExtKeyUsage().array;_+="    "+U.join(", ")+`
`}else if(O=="subjectAltName"){var ne=w(this.getExtSubjectAltName());_+=ne+`
`}else if(O=="cRLDistributionPoints"){var W=this.getExtCRLDistributionPoints();_+=k(W)}else if(O=="authorityInfoAccess"){var J=this.getExtAuthorityInfoAccess();_+=T(J)}else O=="certificatePolicies"&&(_+=E(this.getExtCertificatePolicies()))}}return _+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,_+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`,_},typeof t=="string"&&(t.indexOf("-----BEGIN")!=-1?this.readCertPEM(t):x.lang.String.isHex(t)&&this.readCertHex(t))}Xe.EXT_PARSER={};Xe.registExtParser=function(t,e){Xe.EXT_PARSER[t]=e};Xe.hex2dn=function(t,e){e===void 0&&(e=0);var n=new Xe;xe.getTLV(t,e);var r=n.getX500Name(t);return r.str};Xe.hex2rdn=function(t,e){if(e===void 0&&(e=0),t.substr(e,2)!=="31")throw new Error("malformed RDN");for(var n=new Array,r=xe.getChildIdx(t,e),i=0;i<r.length;i++)n.push(Xe.hex2attrTypeValue(t,r[i]));return n=n.map(function(s){return s.replace("+","\\+")}),n.join("+")};Xe.hex2attrTypeValue=function(t,e){var n=xe,r=n.getV;if(e===void 0&&(e=0),t.substr(e,2)!=="30")throw new Error("malformed attribute type and value");var i=n.getChildIdx(t,e);i.length!==2||t.substr(i[0],2);var s=r(t,i[0]),a=x.asn1.ASN1Util.oidHexToInt(s),o=x.asn1.x509.OID.oid2atype(a),l=r(t,i[1]),c=rs(l);return o+"="+c};Xe.getPublicKeyFromCertHex=function(t){var e=new Xe;return e.readCertHex(t),e.getPublicKey()};Xe.getPublicKeyFromCertPEM=function(t){var e=new Xe;return e.readCertPEM(t),e.getPublicKey()};Xe.getPublicKeyInfoPropOfCertPEM=function(t){var e=xe,n=e.getVbyList,r={},i,s;return r.algparam=null,i=new Xe,i.readCertPEM(t),s=i.getPublicKeyHex(),r.keyhex=n(s,0,[1],"03").substr(2),r.algoid=n(s,0,[0,0],"06"),r.algoid==="2a8648ce3d0201"&&(r.algparam=n(s,0,[0,1],"06")),r};Xe.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];(typeof x>"u"||!x)&&(x={});(typeof x.jws>"u"||!x.jws)&&(x.jws={});x.jws.JWS=function(){var t=x,e=t.jws.JWS,n=e.isSafeJSONString;this.parseJWS=function(r,i){if(!(this.parsedJWS!==void 0&&(i||this.parsedJWS.sigvalH!==void 0))){var s=r.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(s==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var a=s[1],o=s[2],l=s[3],c=a+"."+o;if(this.parsedJWS={},this.parsedJWS.headB64U=a,this.parsedJWS.payloadB64U=o,this.parsedJWS.sigvalB64U=l,this.parsedJWS.si=c,!i){var u=tn(l),d=Rr(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=d}var h=ha(a),p=ha(o);if(this.parsedJWS.headS=h,this.parsedJWS.payloadS=p,!n(h,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+h}}};x.jws.JWS.sign=function(t,e,n,r,i){var s=x,a=s.jws,o=a.JWS,l=o.readSafeJSONString,c=o.isSafeJSONString,u=s.crypto;u.ECDSA;var d=u.Mac,h=u.Signature,p=JSON,f,m,g;if(typeof e!="string"&&typeof e!="object")throw"spHeader must be JSON string or object: "+e;if(typeof e=="object"&&(m=e,f=p.stringify(m)),typeof e=="string"){if(f=e,!c(f))throw"JWS Head is not safe JSON string: "+f;m=l(f)}if(g=n,typeof n=="object"&&(g=p.stringify(n)),(t==""||t==null)&&m.alg!==void 0&&(t=m.alg),t!=""&&t!=null&&m.alg===void 0&&(m.alg=t,f=p.stringify(m)),t!==m.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+m.alg;var v=null;if(o.jwsalg2sigalg[t]===void 0)throw"unsupported alg name: "+t;v=o.jwsalg2sigalg[t];var y=pv(f),b=pv(g),C=y+"."+b,R="";if(v.substr(0,4)=="Hmac"){if(r===void 0)throw"mac key shall be specified for HS* alg";var w=new d({alg:v,prov:"cryptojs",pass:r});w.updateString(C),R=w.doFinal()}else if(v.indexOf("withECDSA")!=-1){var E=new h({alg:v});E.init(r,i),E.updateString(C);var k=E.sign();R=x.crypto.ECDSA.asn1SigToConcatSig(k)}else if(v!="none"){var E=new h({alg:v});E.init(r,i),E.updateString(C),R=E.sign()}var T=Kn(R);return C+"."+T};x.jws.JWS.verify=function(t,e,n){var r=x,i=r.jws,s=i.JWS,a=s.readSafeJSONString,o=r.crypto,l=o.ECDSA,c=o.Mac,u=o.Signature,d;if(typeof We!==void 0&&(d=We),!WB(t))return!1;var h=t.split(".");if(h.length!==3)return!1;var p=h[0],f=h[1],m=p+"."+f,g=tn(h[2]),v=a(ha(h[0])),y=null,b=null;if(v.alg===void 0)throw"algorithm not specified in header";if(y=v.alg,b=y.substr(0,2),n!=null&&Object.prototype.toString.call(n)==="[object Array]"&&n.length>0){var C=":"+n.join(":")+":";if(C.indexOf(":"+y+":")==-1)throw"algorithm '"+y+"' not accepted in the list"}if(y!="none"&&e===null)throw"key shall be specified to verify.";if(typeof e=="string"&&e.indexOf("-----BEGIN ")!=-1&&(e=Rt.getKey(e)),(b=="RS"||b=="PS")&&!(e instanceof d))throw"key shall be a RSAKey obj for RS* and PS* algs";if(b=="ES"&&!(e instanceof l))throw"key shall be a ECDSA obj for ES* algs";var R=null;if(s.jwsalg2sigalg[v.alg]===void 0)throw"unsupported alg name: "+y;if(R=s.jwsalg2sigalg[y],R=="none")throw"not supported";if(R.substr(0,4)=="Hmac"){var w=null;if(e===void 0)throw"hexadecimal key shall be specified for HMAC";var E=new c({alg:R,pass:e});return E.updateString(m),w=E.doFinal(),g==w}else if(R.indexOf("withECDSA")!=-1){var k=null;try{k=l.concatSigToASN1Sig(g)}catch{return!1}var T=new u({alg:R});return T.init(e),T.updateString(m),T.verify(k)}else{var T=new u({alg:R});return T.init(e),T.updateString(m),T.verify(g)}};x.jws.JWS.parse=function(t){var e=t.split("."),n={},r,i,s;if(e.length!=2&&e.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return r=e[0],i=e[1],e.length==3&&(s=e[2]),n.headerObj=x.jws.JWS.readSafeJSONString(ha(r)),n.payloadObj=x.jws.JWS.readSafeJSONString(ha(i)),n.headerPP=JSON.stringify(n.headerObj,null,"  "),n.payloadObj==null?n.payloadPP=ha(i):n.payloadPP=JSON.stringify(n.payloadObj,null,"  "),s!==void 0&&(n.sigHex=tn(s)),n};x.jws.JWS.verifyJWT=function(t,e,n){var r=x,i=r.jws,s=i.JWS,a=s.readSafeJSONString,o=s.inArray,l=s.includedArray;if(!WB(t))return!1;var c=t.split(".");if(c.length!=3)return!1;var u=c[0],d=c[1];tn(c[2]);var h=a(ha(u)),p=a(ha(d));if(h.alg===void 0)return!1;if(n.alg===void 0)throw"acceptField.alg shall be specified";if(!o(h.alg,n.alg)||p.iss!==void 0&&typeof n.iss=="object"&&!o(p.iss,n.iss)||p.sub!==void 0&&typeof n.sub=="object"&&!o(p.sub,n.sub))return!1;if(p.aud!==void 0&&typeof n.aud=="object"){if(typeof p.aud=="string"){if(!o(p.aud,n.aud))return!1}else if(typeof p.aud=="object"&&!l(p.aud,n.aud))return!1}var f=i.IntDate.getNow();return n.verifyAt!==void 0&&typeof n.verifyAt=="number"&&(f=n.verifyAt),(n.gracePeriod===void 0||typeof n.gracePeriod!="number")&&(n.gracePeriod=0),!(p.exp!==void 0&&typeof p.exp=="number"&&p.exp+n.gracePeriod<f||p.nbf!==void 0&&typeof p.nbf=="number"&&f<p.nbf-n.gracePeriod||p.iat!==void 0&&typeof p.iat=="number"&&f<p.iat-n.gracePeriod||p.jti!==void 0&&n.jti!==void 0&&p.jti!==n.jti||!s.verify(t,e,n.alg))};x.jws.JWS.includedArray=function(t,e){var n=x.jws.JWS.inArray;if(t===null||typeof t!="object"||typeof t.length!="number")return!1;for(var r=0;r<t.length;r++)if(!n(t[r],e))return!1;return!0};x.jws.JWS.inArray=function(t,e){if(e===null||typeof e!="object"||typeof e.length!="number")return!1;for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1};x.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"};x.jws.JWS.isSafeJSONString=function(t,e,n){var r=null;try{return r=BB(t),typeof r!="object"||r.constructor===Array?0:(e&&(e[n]=r),1)}catch{return 0}};x.jws.JWS.readSafeJSONString=function(t){var e=null;try{return e=BB(t),typeof e!="object"||e.constructor===Array?null:e}catch{return null}};x.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(e==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]};x.jws.JWS.getJWKthumbprint=function(t){if(t.kty!=="RSA"&&t.kty!=="EC"&&t.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var e="{";if(t.kty==="RSA"){if(typeof t.n!="string"||typeof t.e!="string")throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if(t.kty==="EC"){if(typeof t.crv!="string"||typeof t.x!="string"||typeof t.y!="string")throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if(t.kty==="oct"){if(typeof t.k!="string")throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var n=Ms(e),r=x.crypto.Util.hashHex(n,"sha256"),i=Kn(r);return i};x.jws.IntDate={};x.jws.IntDate.get=function(t){var e=x.jws.IntDate,n=e.getNow,r=e.getZulu;if(t=="now")return n();if(t=="now + 1hour")return n()+60*60;if(t=="now + 1day")return n()+60*60*24;if(t=="now + 1month")return n()+60*60*24*30;if(t=="now + 1year")return n()+60*60*24*365;if(t.match(/Z$/))return r(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t};x.jws.IntDate.getZulu=function(t){return SDe(t)};x.jws.IntDate.getNow=function(){var t=~~(new Date/1e3);return t};x.jws.IntDate.intDate2UTCString=function(t){var e=new Date(t*1e3);return e.toUTCString()};x.jws.IntDate.intDate2Zulu=function(t){var e=new Date(t*1e3),n=("0000"+e.getUTCFullYear()).slice(-4),r=("00"+(e.getUTCMonth()+1)).slice(-2),i=("00"+e.getUTCDate()).slice(-2),s=("00"+e.getUTCHours()).slice(-2),a=("00"+e.getUTCMinutes()).slice(-2),o=("00"+e.getUTCSeconds()).slice(-2);return n+r+i+s+a+o+"Z"};(typeof x>"u"||!x)&&(x={});(typeof x.jws>"u"||!x.jws)&&(x.jws={});x.jws.JWSJS=function(){var t=x,e=t.jws,n=e.JWS,r=n.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(i){this.init();var s=i.split(".");if(s.length!=3)throw"malformed input JWS";this.aHeader.push(s[0]),this.sPayload=s[1],this.aSignature.push(s[2])},this.addSignature=function(i,s,a,o){if(this.sPayload===void 0||this.sPayload===null)throw"there's no JSON-JS signature to add.";var l=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var c=x.jws.JWS.sign(i,s,this.sPayload,a,o),u=c.split("."),d=u[0],h=u[2];this.aHeader.push(u[0]),this.aSignature.push(u[2])}catch(p){throw this.aHeader.length>l&&this.aHeader.pop(),this.aSignature.length>l&&this.aSignature.pop(),"addSignature failed: "+p}},this.verifyAll=function(i){if(this.aHeader.length!==i.length||this.aSignature.length!==i.length)return!1;for(var s=0;s<i.length;s++){var a=i[s];if(a.length!==2)return!1;var o=this.verifyNth(s,a[0],a[1]);if(o===!1)return!1}return!0},this.verifyNth=function(i,s,a){if(this.aHeader.length<=i||this.aSignature.length<=i)return!1;var o=this.aHeader[i],l=this.aSignature[i],c=o+"."+this.sPayload+"."+l,u=!1;try{u=n.verify(c,s,a)}catch{return!1}return u},this.readJWSJS=function(i){if(typeof i=="string"){var s=r(i);if(s==null)throw"argument is not safe JSON object string";this.aHeader=s.headers,this.sPayload=s.payload,this.aSignature=s.signatures}else try{if(i.headers.length>0)this.aHeader=i.headers;else throw"malformed header";if(typeof i.payload=="string")this.sPayload=i.payload;else throw"malformed signatures";if(i.signatures.length>0)this.aSignature=i.signatures;else throw"malformed signatures"}catch(a){throw"malformed JWS-JS JSON object: "+a}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return this.aHeader.length==0?1:0}};x.crypto.ECDSA;x.crypto.DSA;x.crypto.Signature;x.crypto.MessageDigest;x.crypto.Mac;x.crypto.Cipher;var TDe=x;x.crypto;x.asn1;x.jws;x.lang;/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class cu extends Error{constructor(e,n,r,i,s){super(n),this.code=e,this.canRetry=r,this.isFatal=i,this.retryAfterMs=s,this.name="NetworkError",this.retryAfter=s!==void 0?s/1e3:void 0}get details(){return this.canRetry===void 0&&this.isFatal===void 0&&this.retryAfterMs===void 0?this.message:{message:this.message,canRetry:this.canRetry,isFatal:this.isFatal,retryAfter:this.retryAfter,retryAfterMs:this.retryAfterMs}}toJSON(){return{code:this.code,message:this.message,canRetry:this.canRetry,isFatal:this.isFatal,retryAfterMs:this.retryAfterMs,retryAfter:this.retryAfter}}}function sx(t,e){var n;let r,i,s,a;switch(e&&typeof e=="object"?(r=(n=e.message)!==null&&n!==void 0?n:"Unknown Error",i=e.canRetry,s=e.isFatal,a=e.retryAfter):e&&typeof e=="string"?r=e:r="Unknown Error",t){case 401:case 403:case 404:return new cu(t,r,!1,!1);case 413:case 422:return new cu(t,r,i??!1,s??!1,i?a:void 0);case 429:return new cu(t,r,!0,!1,a);case 500:return new cu(t,r,i??!0,s??!1,i?a:void 0);case 502:case 503:case 504:return new cu(t,r,!0,!1,a);default:return new cu(t,r,!1,!0)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const ax="x-correlation-id";var Tp={},RDe={get exports(){return Tp},set exports(t){Tp=t}},MO=["Black","White","Gray","Brown","Red","Pink","Crimson","Carnelian","Orange","Yellow","Ivory","Cream","Green","Viridian","Aquamarine","Cyan","Blue","Cerulean","Azure","Indigo","Navy","Violet","Purple","Lavender","Magenta","Rainbow","Iridescent","Spectrum","Prism","Bold","Vivid","Pale","Clear","Glass","Translucent","Misty","Dark","Light","Gold","Silver","Copper","Bronze","Steel","Iron","Brass","Mercury","Zinc","Chrome","Platinum","Titanium","Nickel","Lead","Pewter","Rust","Metal","Stone","Quartz","Granite","Marble","Alabaster","Agate","Jasper","Pebble","Pyrite","Crystal","Geode","Obsidian","Mica","Flint","Sand","Gravel","Boulder","Basalt","Ruby","Beryl","Scarlet","Citrine","Sulpher","Topaz","Amber","Emerald","Malachite","Jade","Abalone","Lapis","Sapphire","Diamond","Peridot","Gem","Jewel","Bevel","Coral","Jet","Ebony","Wood","Tree","Cherry","Maple","Cedar","Branch","Bramble","Rowan","Ash","Fir","Pine","Cactus","Alder","Grove","Forest","Jungle","Palm","Bush","Mulberry","Juniper","Vine","Ivy","Rose","Lily","Tulip","Daffodil","Honeysuckle","Fuschia","Hazel","Walnut","Almond","Lime","Lemon","Apple","Blossom","Bloom","Crocus","Rose","Buttercup","Dandelion","Iris","Carnation","Fern","Root","Branch","Leaf","Seed","Flower","Petal","Pollen","Orchid","Mangrove","Cypress","Sequoia","Sage","Heather","Snapdragon","Daisy","Mountain","Hill","Alpine","Chestnut","Valley","Glacier","Forest","Grove","Glen","Tree","Thorn","Stump","Desert","Canyon","Dune","Oasis","Mirage","Well","Spring","Meadow","Field","Prairie","Grass","Tundra","Island","Shore","Sand","Shell","Surf","Wave","Foam","Tide","Lake","River","Brook","Stream","Pool","Pond","Sun","Sprinkle","Shade","Shadow","Rain","Cloud","Storm","Hail","Snow","Sleet","Thunder","Lightning","Wind","Hurricane","Typhoon","Dawn","Sunrise","Morning","Noon","Twilight","Evening","Sunset","Midnight","Night","Sky","Star","Stellar","Comet","Nebula","Quasar","Solar","Lunar","Planet","Meteor","Sprout","Pear","Plum","Kiwi","Berry","Apricot","Peach","Mango","Pineapple","Coconut","Olive","Ginger","Root","Plain","Fancy","Stripe","Spot","Speckle","Spangle","Ring","Band","Blaze","Paint","Pinto","Shade","Tabby","Brindle","Patch","Calico","Checker","Dot","Pattern","Glitter","Glimmer","Shimmer","Dull","Dust","Dirt","Glaze","Scratch","Quick","Swift","Fast","Slow","Clever","Fire","Flicker","Flash","Spark","Ember","Coal","Flame","Chocolate","Vanilla","Sugar","Spice","Cake","Pie","Cookie","Candy","Caramel","Spiral","Round","Jelly","Square","Narrow","Long","Short","Small","Tiny","Big","Giant","Great","Atom","Peppermint","Mint","Butter","Fringe","Rag","Quilt","Truth","Lie","Holy","Curse","Noble","Sly","Brave","Shy","Lava","Foul","Leather","Fantasy","Keen","Luminous","Feather","Sticky","Gossamer","Cotton","Rattle","Silk","Satin","Cord","Denim","Flannel","Plaid","Wool","Linen","Silent","Flax","Weak","Valiant","Fierce","Gentle","Rhinestone","Splash","North","South","East","West","Summer","Winter","Autumn","Spring","Season","Equinox","Solstice","Paper","Motley","Torch","Ballistic","Rampant","Shag","Freckle","Wild","Free","Chain","Sheer","Crazy","Mad","Candle","Ribbon","Lace","Notch","Wax","Shine","Shallow","Deep","Bubble","Harvest","Fluff","Venom","Boom","Slash","Rune","Cold","Quill","Love","Hate","Garnet","Zircon","Power","Bone","Void","Horn","Glory","Cyber","Nova","Hot","Helix","Cosmic","Quark","Quiver","Holly","Clover","Polar","Regal","Ripple","Ebony","Wheat","Phantom","Dew","Chisel","Crack","Chatter","Laser","Foil","Tin","Clever","Treasure","Maze","Twisty","Curly","Fortune","Fate","Destiny","Cute","Slime","Ink","Disco","Plume","Time","Psychadelic","Relic","Fossil","Water","Savage","Ancient","Rapid","Road","Trail","Stitch","Button","Bow","Nimble","Zest","Sour","Bitter","Phase","Fan","Frill","Plump","Pickle","Mud","Puddle","Pond","River","Spring","Stream","Battle","Arrow","Plume","Roan","Pitch","Tar","Cat","Dog","Horse","Lizard","Bird","Fish","Saber","Scythe","Sharp","Soft","Razor","Neon","Dandy","Weed","Swamp","Marsh","Bog","Peat","Moor","Muck","Mire","Grave","Fair","Just","Brick","Puzzle","Skitter","Prong","Fork","Dent","Dour","Warp","Luck","Coffee","Split","Chip","Hollow","Heavy","Legend","Hickory","Mesquite","Nettle","Rogue","Charm","Prickle","Bead","Sponge","Whip","Bald","Frost","Fog","Oil","Veil","Cliff","Volcano","Rift","Maze","Proud","Dew","Mirror","Shard","Salt","Pepper","Honey","Thread","Bristle","Ripple","Glow","Zenith"],NO=["head","crest","crown","tooth","fang","horn","frill","skull","bone","tongue","throat","voice","nose","snout","chin","eye","sight","seer","speaker","singer","song","chanter","howler","chatter","shrieker","shriek","jaw","bite","biter","neck","shoulder","fin","wing","arm","lifter","grasp","grabber","hand","paw","foot","finger","toe","thumb","talon","palm","touch","racer","runner","hoof","fly","flier","swoop","roar","hiss","hisser","snarl","dive","diver","rib","chest","back","ridge","leg","legs","tail","beak","walker","lasher","swisher","carver","kicker","roarer","crusher","spike","shaker","charger","hunter","weaver","crafter","binder","scribe","muse","snap","snapper","slayer","stalker","track","tracker","scar","scarer","fright","killer","death","doom","healer","saver","friend","foe","guardian","thunder","lightning","cloud","storm","forger","scale","hair","braid","nape","belly","thief","stealer","reaper","giver","taker","dancer","player","gambler","twister","turner","painter","dart","drifter","sting","stinger","venom","spur","ripper","swallow","devourer","knight","lady","lord","queen","king","master","mistress","prince","princess","duke","dutchess","samurai","ninja","knave","slave","servant","sage","wizard","witch","warlock","warrior","jester","paladin","bard","trader","sword","shield","knife","dagger","arrow","bow","fighter","bane","follower","leader","scourge","watcher","cat","panther","tiger","cougar","puma","jaguar","ocelot","lynx","lion","leopard","ferret","weasel","wolverine","bear","raccoon","dog","wolf","kitten","puppy","cub","fox","hound","terrier","coyote","hyena","jackal","pig","horse","donkey","stallion","mare","zebra","antelope","gazelle","deer","buffalo","bison","boar","elk","whale","dolphin","shark","fish","minnow","salmon","ray","fisher","otter","gull","duck","goose","crow","raven","bird","eagle","raptor","hawk","falcon","moose","heron","owl","stork","crane","sparrow","robin","parrot","cockatoo","carp","lizard","gecko","iguana","snake","python","viper","boa","condor","vulture","spider","fly","scorpion","heron","oriole","toucan","bee","wasp","hornet","rabbit","bunny","hare","brow","mustang","ox","piper","soarer","flasher","moth","mask","hide","hero","antler","chill","chiller","gem","ogre","myth","elf","fairy","pixie","dragon","griffin","unicorn","pegasus","sprite","fancier","chopper","slicer","skinner","butterfly","legend","wanderer","rover","raver","loon","lancer","glass","glazer","flame","crystal","lantern","lighter","cloak","bell","ringer","keeper","centaur","bolt","catcher","whimsey","quester","rat","mouse","serpent","wyrm","gargoyle","thorn","whip","rider","spirit","sentry","bat","beetle","burn","cowl","stone","gem","collar","mark","grin","scowl","spear","razor","edge","seeker","jay","ape","monkey","gorilla","koala","kangaroo","yak","sloth","ant","roach","weed","seed","eater","razor","shirt","face","goat","mind","shift","rider","face","mole","vole","pirate","llama","stag","bug","cap","boot","drop","hugger","sargent","snagglefoot","carpet","curtain"];function u2(t){return t=t||Math.random,NO[Math.floor(t()*NO.length)]}function JB(t){return t=t||Math.random,MO[Math.floor(t()*MO.length)]}function kDe(t){var e=u2(t),n=u2(t);n=n.substr(0,1).toUpperCase()+n.substr(1);var r=JB(t);return r+e+" "+n}RDe.exports=kDe;Tp.randomNoun=u2;Tp.randomAdjective=JB;/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function PDe(t="_",e=!1){let[n,r]=Tp().split(" ");return e||(n=n.toLowerCase(),r=r.toLowerCase()),`${n}${t}${r}`}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 *
 * THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY
 */const _De="@fluidframework/server-services-client",ADe="0.1036.5001";/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const Hl=Od.debug("fluid:services-client");Hl(`Package: ${_De} - Version: ${ADe}`);/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class FO{constructor(e){this.historian=e,this.blobCache=new Map,this.commitCache=new Map,this.treeCache=new Map,this.refCache=new Map}async getHeader(e,n){const r=await this.historian.getHeader(n);for(const i of r.blobs)this.blobCache.set(i.sha,i);return sk(r.tree)}async getFullTree(e){return this.historian.getFullTree(e)}async getCommit(e){return this.commitCache.has(e)?(Hl(`Cache hit on ${e}`),this.commitCache.get(e)):this.historian.getCommit(e)}async getCommits(e,n){let r=e;if(this.refCache.has(e)&&(Hl(`Commit cache hit on ${e}`),r=this.refCache.get(e),this.refCache.delete(e),!r))return[];if(this.commitCache.has(r)){const i=this.commitCache.get(r);return[{commit:{author:i.author,committer:i.committer,message:i.message,tree:i.tree,url:i.url},parents:i.parents,sha:i.sha,url:i.url}]}return this.historian.getCommits(r,n)}async getTree(e,n=!0){return this.treeCache.has(e)?(Hl(`Tree cache hit on ${e}`),this.treeCache.get(e)):this.historian.getTree(e,n)}async getBlob(e){return this.blobCache.has(e)?(Hl(`Blob cache hit on ${e}`),this.blobCache.get(e)):this.historian.getBlob(e)}getRawUrl(e){return`${this.historian.endpoint}/git/blobs/raw/${e}`}async getContent(e,n){return this.historian.getContent(n,e)}async createBlob(e,n){const r={content:e,encoding:n};return this.historian.createBlob(r)}async createGitTree(e){return this.historian.createTree(e)}async createTree(e){return this.createTreeCore(e,0)}async createCommit(e){return this.historian.createCommit(e)}async createSummary(e){return this.historian.createSummary(e)}async deleteSummary(e){return this.historian.deleteSummary(e)}async getSummary(e){return this.historian.getSummary(e)}async getRef(e){return this.historian.getRef(`heads/${e}`).catch(n=>{if(n===400||n===404)return null;throw n})}async createRef(e,n){const r={ref:`refs/heads/${e}`,sha:n,config:{enabled:!0}};return this.historian.createRef(r)}async upsertRef(e,n){const r={force:!0,sha:n,config:{enabled:!0}};return this.historian.updateRef(`heads/${e}`,r)}addRef(e,n){this.refCache.set(e,n)}addCommit(e){this.commitCache.set(e.sha,e)}addTree(e){this.treeCache.set(e.sha,e)}addBlob(e){this.blobCache.set(e.sha,e)}async write(e,n,r,i){const s=await this.createTree(n),a={author:{date:new Date().toISOString(),email:"kurtb@microsoft.com",name:"Kurt Berglund"},message:i,parents:r,tree:s.sha},o=await this.historian.createCommit(a);return await this.getRef(e)?await this.upsertRef(e,o.sha):await this.createRef(e,o.sha),o}async createTreeCore(e,n){if(e.id)return this.getTree(e.id);const r=[];for(const l of e.entries)switch(Pr[l.type]){case Pr.Blob:{const c=l.value;l.mode===Ca.Symlink&&(c.contents=this.translateSymlink(c.contents,n));const u=this.createBlob(c.contents,c.encoding);r.push(u);break}case Pr.Tree:{const c=l.value,u=this.createTreeCore(c,n+1);r.push(u);break}default:throw new Error("Unknown entry type")}const i=await Promise.all(r),s=[];N(i.length===e.entries.length,"File entries length is not correct");for(let l=0;l<e.entries.length;l++){const c=e.entries[l].type===Pr.Tree?"tree":e.entries[l].type===Pr.Blob?"blob":"commit";s.push({mode:e.entries[l].mode,path:e.entries[l].path,sha:i[l].sha,type:c})}const a={tree:s};return this.historian.createTree(a)}translateSymlink(e,n){let r="";for(let i=0;i<=n;i++)r+="../";return`${r}${e}`}}var Hh=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},ODe=function(t,e,n,r){return e=e||"&",n=n||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(i){var s=encodeURIComponent(Hh(i))+n;return Array.isArray(t[i])?t[i].map(function(a){return s+encodeURIComponent(Hh(a))}).join(e):s+encodeURIComponent(Hh(t[i]))}).filter(Boolean).join(e):r?encodeURIComponent(Hh(r))+n+encodeURIComponent(Hh(t)):""},XB;XB=ODe;var Nd={},DDe={get exports(){return Nd},set exports(t){Nd=t}};(function(t,e){e=t.exports=n,e.getSerialize=r;function n(i,s,a,o){return JSON.stringify(i,r(s,o),a)}function r(i,s){var a=[],o=[];return s==null&&(s=function(l,c){return a[0]===c?"[Circular ~]":"[Circular ~."+o.slice(0,a.indexOf(c)).join(".")+"]"}),function(l,c){if(a.length>0){var u=a.indexOf(this);~u?a.splice(u+1):a.push(this),~u?o.splice(u,1/0,l):o.push(l),~a.indexOf(c)&&(c=s.call(this,l,c))}else a.push(c);return i==null?c:i.call(this,l,c)}}})(DDe,Nd);var d2={},IDe={get exports(){return d2},set exports(t){d2=t}},mv={},MDe={get exports(){return mv},set exports(t){mv=t}},QB=function(e,n){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(n,i)}},NDe=QB,vl=Object.prototype.toString;function xk(t){return Array.isArray(t)}function h2(t){return typeof t>"u"}function FDe(t){return t!==null&&!h2(t)&&t.constructor!==null&&!h2(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function ZB(t){return vl.call(t)==="[object ArrayBuffer]"}function $De(t){return vl.call(t)==="[object FormData]"}function LDe(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ZB(t.buffer),e}function BDe(t){return typeof t=="string"}function jDe(t){return typeof t=="number"}function ej(t){return t!==null&&typeof t=="object"}function Gg(t){if(vl.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function qDe(t){return vl.call(t)==="[object Date]"}function zDe(t){return vl.call(t)==="[object File]"}function HDe(t){return vl.call(t)==="[object Blob]"}function tj(t){return vl.call(t)==="[object Function]"}function UDe(t){return ej(t)&&tj(t.pipe)}function VDe(t){return vl.call(t)==="[object URLSearchParams]"}function WDe(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function GDe(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function wk(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),xk(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function f2(){var t={};function e(i,s){Gg(t[s])&&Gg(i)?t[s]=f2(t[s],i):Gg(i)?t[s]=f2({},i):xk(i)?t[s]=i.slice():t[s]=i}for(var n=0,r=arguments.length;n<r;n++)wk(arguments[n],e);return t}function KDe(t,e,n){return wk(e,function(i,s){n&&typeof i=="function"?t[s]=NDe(i,n):t[s]=i}),t}function YDe(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var bi={isArray:xk,isArrayBuffer:ZB,isBuffer:FDe,isFormData:$De,isArrayBufferView:LDe,isString:BDe,isNumber:jDe,isObject:ej,isPlainObject:Gg,isUndefined:h2,isDate:qDe,isFile:zDe,isBlob:HDe,isFunction:tj,isStream:UDe,isURLSearchParams:VDe,isStandardBrowserEnv:GDe,forEach:wk,merge:f2,extend:KDe,trim:WDe,stripBOM:YDe},uu=bi;function $O(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var nj=function(e,n,r){if(!n)return e;var i;if(r)i=r(n);else if(uu.isURLSearchParams(n))i=n.toString();else{var s=[];uu.forEach(n,function(l,c){l===null||typeof l>"u"||(uu.isArray(l)?c=c+"[]":l=[l],uu.forEach(l,function(d){uu.isDate(d)?d=d.toISOString():uu.isObject(d)&&(d=JSON.stringify(d)),s.push($O(c)+"="+$O(d))}))}),i=s.join("&")}if(i){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},JDe=bi;function i1(){this.handlers=[]}i1.prototype.use=function(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};i1.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};i1.prototype.forEach=function(e){JDe.forEach(this.handlers,function(r){r!==null&&e(r)})};var XDe=i1,QDe=bi,ZDe=function(e,n){QDe.forEach(e,function(i,s){s!==n&&s.toUpperCase()===n.toUpperCase()&&(e[n]=i,delete e[s])})},rj=function(e,n,r,i,s){return e.config=n,r&&(e.code=r),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},ij={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ox,LO;function sj(){if(LO)return ox;LO=1;var t=rj;return ox=function(n,r,i,s,a){var o=new Error(n);return t(o,r,i,s,a)},ox}var lx,BO;function eIe(){if(BO)return lx;BO=1;var t=sj();return lx=function(n,r,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?n(i):r(t("Request failed with status code "+i.status,i.config,null,i.request,i))},lx}var cx,jO;function tIe(){if(jO)return cx;jO=1;var t=bi;return cx=t.isStandardBrowserEnv()?function(){return{write:function(r,i,s,a,o,l){var c=[];c.push(r+"="+encodeURIComponent(i)),t.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),t.isString(a)&&c.push("path="+a),t.isString(o)&&c.push("domain="+o),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cx}var ux,qO;function nIe(){return qO||(qO=1,ux=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),ux}var dx,zO;function rIe(){return zO||(zO=1,dx=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e}),dx}var hx,HO;function iIe(){if(HO)return hx;HO=1;var t=nIe(),e=rIe();return hx=function(r,i){return r&&!t(i)?e(r,i):i},hx}var fx,UO;function sIe(){if(UO)return fx;UO=1;var t=bi,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return fx=function(r){var i={},s,a,o;return r&&t.forEach(r.split(`
`),function(c){if(o=c.indexOf(":"),s=t.trim(c.substr(0,o)).toLowerCase(),a=t.trim(c.substr(o+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([a]):i[s]=i[s]?i[s]+", "+a:a}}),i},fx}var px,VO;function aIe(){if(VO)return px;VO=1;var t=bi;return px=t.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function s(a){var o=a;return n&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=s(window.location.href),function(o){var l=t.isString(o)?s(o):o;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),px}var mx,WO;function s1(){if(WO)return mx;WO=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,mx=t,mx}var gx,GO;function KO(){if(GO)return gx;GO=1;var t=bi,e=eIe(),n=tIe(),r=nj,i=iIe(),s=sIe(),a=aIe(),o=sj(),l=ij,c=s1();return gx=function(d){return new Promise(function(p,f){var m=d.data,g=d.headers,v=d.responseType,y;function b(){d.cancelToken&&d.cancelToken.unsubscribe(y),d.signal&&d.signal.removeEventListener("abort",y)}t.isFormData(m)&&delete g["Content-Type"];var C=new XMLHttpRequest;if(d.auth){var R=d.auth.username||"",w=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";g.Authorization="Basic "+btoa(R+":"+w)}var E=i(d.baseURL,d.url);C.open(d.method.toUpperCase(),r(E,d.params,d.paramsSerializer),!0),C.timeout=d.timeout;function k(){if(C){var _="getAllResponseHeaders"in C?s(C.getAllResponseHeaders()):null,D=!v||v==="text"||v==="json"?C.responseText:C.response,I={data:D,status:C.status,statusText:C.statusText,headers:_,config:d,request:C};e(function(A){p(A),b()},function(A){f(A),b()},I),C=null}}if("onloadend"in C?C.onloadend=k:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(k)},C.onabort=function(){C&&(f(o("Request aborted",d,"ECONNABORTED",C)),C=null)},C.onerror=function(){f(o("Network Error",d,null,C)),C=null},C.ontimeout=function(){var D=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",I=d.transitional||l;d.timeoutErrorMessage&&(D=d.timeoutErrorMessage),f(o(D,d,I.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",C)),C=null},t.isStandardBrowserEnv()){var T=(d.withCredentials||a(E))&&d.xsrfCookieName?n.read(d.xsrfCookieName):void 0;T&&(g[d.xsrfHeaderName]=T)}"setRequestHeader"in C&&t.forEach(g,function(D,I){typeof m>"u"&&I.toLowerCase()==="content-type"?delete g[I]:C.setRequestHeader(I,D)}),t.isUndefined(d.withCredentials)||(C.withCredentials=!!d.withCredentials),v&&v!=="json"&&(C.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&C.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(y=function(_){C&&(f(!_||_&&_.type?new c("canceled"):_),C.abort(),C=null)},d.cancelToken&&d.cancelToken.subscribe(y),d.signal&&(d.signal.aborted?y():d.signal.addEventListener("abort",y))),m||(m=null),C.send(m)})},gx}var pr=bi,YO=ZDe,oIe=rj,lIe=ij,cIe={"Content-Type":"application/x-www-form-urlencoded"};function JO(t,e){!pr.isUndefined(t)&&pr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function uIe(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=KO()),t}function dIe(t,e,n){if(pr.isString(t))try{return(e||JSON.parse)(t),pr.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}var a1={transitional:lIe,adapter:uIe(),transformRequest:[function(e,n){return YO(n,"Accept"),YO(n,"Content-Type"),pr.isFormData(e)||pr.isArrayBuffer(e)||pr.isBuffer(e)||pr.isStream(e)||pr.isFile(e)||pr.isBlob(e)?e:pr.isArrayBufferView(e)?e.buffer:pr.isURLSearchParams(e)?(JO(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):pr.isObject(e)||n&&n["Content-Type"]==="application/json"?(JO(n,"application/json"),dIe(e)):e}],transformResponse:[function(e){var n=this.transitional||a1.transitional,r=n&&n.silentJSONParsing,i=n&&n.forcedJSONParsing,s=!r&&this.responseType==="json";if(s||i&&pr.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(s)throw a.name==="SyntaxError"?oIe(a,this,"E_JSON_PARSE"):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};pr.forEach(["delete","get","head"],function(e){a1.headers[e]={}});pr.forEach(["post","put","patch"],function(e){a1.headers[e]=pr.merge(cIe)});var Ck=a1,hIe=bi,fIe=Ck,pIe=function(e,n,r){var i=this||fIe;return hIe.forEach(r,function(a){e=a.call(i,e,n)}),e},vx,XO;function aj(){return XO||(XO=1,vx=function(e){return!!(e&&e.__CANCEL__)}),vx}var QO=bi,yx=pIe,mIe=aj(),gIe=Ck,vIe=s1();function bx(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new vIe("canceled")}var yIe=function(e){bx(e),e.headers=e.headers||{},e.data=yx.call(e,e.data,e.headers,e.transformRequest),e.headers=QO.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),QO.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var n=e.adapter||gIe.adapter;return n(e).then(function(i){return bx(e),i.data=yx.call(e,i.data,i.headers,e.transformResponse),i},function(i){return mIe(i)||(bx(e),i&&i.response&&(i.response.data=yx.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},xi=bi,oj=function(e,n){n=n||{};var r={};function i(u,d){return xi.isPlainObject(u)&&xi.isPlainObject(d)?xi.merge(u,d):xi.isPlainObject(d)?xi.merge({},d):xi.isArray(d)?d.slice():d}function s(u){if(xi.isUndefined(n[u])){if(!xi.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],n[u])}function a(u){if(!xi.isUndefined(n[u]))return i(void 0,n[u])}function o(u){if(xi.isUndefined(n[u])){if(!xi.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,n[u])}function l(u){if(u in n)return i(e[u],n[u]);if(u in e)return i(void 0,e[u])}var c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l};return xi.forEach(Object.keys(e).concat(Object.keys(n)),function(d){var h=c[d]||s,p=h(d);xi.isUndefined(p)&&h!==l||(r[d]=p)}),r},Sx,ZO;function lj(){return ZO||(ZO=1,Sx={version:"0.26.1"}),Sx}var bIe=lj().version,Ek={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Ek[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});var eD={};Ek.transitional=function(e,n,r){function i(s,a){return"[Axios v"+bIe+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return function(s,a,o){if(e===!1)throw new Error(i(a," has been removed"+(n?" in "+n:"")));return n&&!eD[a]&&(eD[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,a,o):!0}};function SIe(t,e,n){if(typeof t!="object")throw new TypeError("options must be an object");for(var r=Object.keys(t),i=r.length;i-- >0;){var s=r[i],a=e[s];if(a){var o=t[s],l=o===void 0||a(o,s,t);if(l!==!0)throw new TypeError("option "+s+" must be "+l);continue}if(n!==!0)throw Error("Unknown option "+s)}}var xIe={assertOptions:SIe,validators:Ek},cj=bi,wIe=nj,tD=XDe,nD=yIe,o1=oj,uj=xIe,du=uj.validators;function hm(t){this.defaults=t,this.interceptors={request:new tD,response:new tD}}hm.prototype.request=function(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=o1(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var r=n.transitional;r!==void 0&&uj.assertOptions(r,{silentJSONParsing:du.transitional(du.boolean),forcedJSONParsing:du.transitional(du.boolean),clarifyTimeoutError:du.transitional(du.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(s=s&&p.synchronous,i.unshift(p.fulfilled,p.rejected))});var a=[];this.interceptors.response.forEach(function(p){a.push(p.fulfilled,p.rejected)});var o;if(!s){var l=[nD,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(a),o=Promise.resolve(n);l.length;)o=o.then(l.shift(),l.shift());return o}for(var c=n;i.length;){var u=i.shift(),d=i.shift();try{c=u(c)}catch(h){d(h);break}}try{o=nD(c)}catch(h){return Promise.reject(h)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};hm.prototype.getUri=function(e){return e=o1(this.defaults,e),wIe(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};cj.forEach(["delete","get","head","options"],function(e){hm.prototype[e]=function(n,r){return this.request(o1(r||{},{method:e,url:n,data:(r||{}).data}))}});cj.forEach(["post","put","patch"],function(e){hm.prototype[e]=function(n,r,i){return this.request(o1(i||{},{method:e,url:n,data:r}))}});var CIe=hm,xx,rD;function EIe(){if(rD)return xx;rD=1;var t=s1();function e(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(a){r=a});var i=this;this.promise.then(function(s){if(i._listeners){var a,o=i._listeners.length;for(a=0;a<o;a++)i._listeners[a](s);i._listeners=null}}),this.promise.then=function(s){var a,o=new Promise(function(l){i.subscribe(l),a=l}).then(s);return o.cancel=function(){i.unsubscribe(a)},o},n(function(a){i.reason||(i.reason=new t(a),r(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},e.prototype.unsubscribe=function(r){if(this._listeners){var i=this._listeners.indexOf(r);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var r,i=new e(function(a){r=a});return{token:i,cancel:r}},xx=e,xx}var wx,iD;function TIe(){return iD||(iD=1,wx=function(e){return function(r){return e.apply(null,r)}}),wx}var Cx,sD;function RIe(){if(sD)return Cx;sD=1;var t=bi;return Cx=function(n){return t.isObject(n)&&n.isAxiosError===!0},Cx}var aD=bi,kIe=QB,Kg=CIe,PIe=oj,_Ie=Ck;function dj(t){var e=new Kg(t),n=kIe(Kg.prototype.request,e);return aD.extend(n,Kg.prototype,e),aD.extend(n,e),n.create=function(i){return dj(PIe(t,i))},n}var Aa=dj(_Ie);Aa.Axios=Kg;Aa.Cancel=s1();Aa.CancelToken=EIe();Aa.isCancel=aj();Aa.VERSION=lj().version;Aa.all=function(e){return Promise.all(e)};Aa.spread=TIe();Aa.isAxiosError=RIe();MDe.exports=Aa;mv.default=Aa;(function(t){t.exports=mv})(IDe);const AIe=kv(d2);/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class hj{constructor(e,n={},r=1e3*1024*1024,i=1e3*1024*1024){this.baseurl=e,this.defaultQueryString=n,this.maxBodyLength=r,this.maxContentLength=i}async get(e,n,r){const i={baseURL:this.baseurl,headers:r,maxBodyLength:this.maxBodyLength,maxContentLength:this.maxContentLength,method:"GET",url:`${e}${this.generateQueryString(n)}`};return this.request(i,200)}async post(e,n,r,i){const s={baseURL:this.baseurl,data:n,headers:i,maxBodyLength:this.maxBodyLength,maxContentLength:this.maxContentLength,method:"POST",url:`${e}${this.generateQueryString(r)}`};return this.request(s,201)}async delete(e,n,r){const i={baseURL:this.baseurl,headers:r,maxBodyLength:this.maxBodyLength,maxContentLength:this.maxContentLength,method:"DELETE",url:`${e}${this.generateQueryString(n)}`};return this.request(i,204)}async patch(e,n,r,i){const s={baseURL:this.baseurl,data:n,headers:i,maxBodyLength:this.maxBodyLength,maxContentLength:this.maxContentLength,method:"PATCH",url:`${e}${this.generateQueryString(r)}`};return this.request(s,200)}generateQueryString(e){if(this.defaultQueryString||e){const n=Object.assign(Object.assign({},this.defaultQueryString),e),r=XB(n);if(r!=="")return`?${r}`}return""}}class OIe extends hj{constructor(e,n={},r=1e3*1024*1024,i=1e3*1024*1024,s={},a=AIe,o,l,c){super(e,n,r,i),this.defaultHeaders=s,this.axios=a,this.refreshDefaultQueryString=o,this.refreshDefaultHeaders=l,this.getCorrelationId=c}async request(e,n,r=!0){var i,s;const a=Object.assign({},e);return a.headers=this.generateHeaders(a.headers,(s=(i=this.getCorrelationId)===null||i===void 0?void 0:i.call(this))!==null&&s!==void 0?s:Cn()),new Promise((o,l)=>{this.axios.request(a).then(c=>{o(c.data)}).catch(c=>{var u,d,h,p,f,m,g,v,y,b,C,R,w,E;if(((u=c==null?void 0:c.response)===null||u===void 0?void 0:u.status)===n&&o((d=c==null?void 0:c.response)===null||d===void 0?void 0:d.data),c!=null&&c.config?Hl(`[${c.config.method}] request to [${(h=c.config.baseURL)!==null&&h!==void 0?h:""}${(p=c.config.url)!==null&&p!==void 0?p:""}] failed with [${(f=c.response)===null||f===void 0?void 0:f.status}] [${Nd((m=c.response)===null||m===void 0?void 0:m.data,void 0,2)}]`):Hl(`request to ${a.url} failed ${c?c.message:""}`),((g=c==null?void 0:c.response)===null||g===void 0?void 0:g.status)===429&&((y=(v=c==null?void 0:c.response)===null||v===void 0?void 0:v.data)===null||y===void 0?void 0:y.retryAfter)>0&&r)setTimeout(()=>{this.request(a,n).then(o).catch(l)},c.response.data.retryAfter*1e3);else if(((b=c==null?void 0:c.response)===null||b===void 0?void 0:b.status)===401&&r&&this.refreshOnAuthError()){const k=Object.assign({},e);k.headers=this.generateHeaders(k.headers,a.headers[ax]),this.request(k,n,!1).then(o).catch(l)}else if(c!=null&&c.response)l(sx((C=c==null?void 0:c.response)===null||C===void 0?void 0:C.status,(R=c==null?void 0:c.response)===null||R===void 0?void 0:R.data));else if(c!=null&&c.request)l(sx(502,`Network Error: ${(w=c==null?void 0:c.message)!==null&&w!==void 0?w:"undefined"}`));else{const k={canRetry:!1,isFatal:!1,message:(E=c==null?void 0:c.message)!==null&&E!==void 0?E:"Unknown Error"};l(sx(500,k))}})})}generateHeaders(e,n){let r=e??{};return this.defaultHeaders&&(r=Object.assign(Object.assign({},this.defaultHeaders),e)),r[ax]?r:Object.assign({[ax]:n},r)}refreshOnAuthError(){return this.refreshDefaultQueryString===void 0&&this.refreshDefaultHeaders===void 0?!1:(this.refreshDefaultHeaders!==void 0&&(this.defaultHeaders=this.refreshDefaultHeaders()),this.refreshDefaultQueryString!==void 0&&(this.defaultQueryString=this.refreshDefaultQueryString()),!0)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function DIe(t,e){for(const n of e)if(t.endsWith(n))return!0;return!1}const IIe=t=>`Basic ${J9(`${t.user}:${t.password}`)}`;class oD{constructor(e,n,r,i){this.endpoint=e,this.historianApi=n,this.restWrapper=i,this.defaultQueryString={},r&&this.historianApi?(this.defaultQueryString.disableCache=r,this.cacheBust=!1):this.cacheBust=r,this.restWrapper===void 0&&(this.restWrapper=new OIe(this.endpoint))}async getHeader(e){return this.historianApi?this.restWrapper.get(`/headers/${encodeURIComponent(e)}`,this.getQueryString()):this.getHeaderDirect(e)}async getFullTree(e){return this.restWrapper.get(`/tree/${encodeURIComponent(e)}`,this.getQueryString())}async getBlob(e){return this.restWrapper.get(`/git/blobs/${encodeURIComponent(e)}`,this.getQueryString())}async createBlob(e){return this.restWrapper.post("/git/blobs",e,this.getQueryString())}async getContent(e,n){return this.restWrapper.get(`/contents/${e}`,this.getQueryString({ref:n}))}async getCommits(e,n){return this.restWrapper.get("/commits",this.getQueryString({count:n,sha:e})).catch(r=>r===400||r===404?[]:Promise.reject(r))}async getCommit(e){return this.restWrapper.get(`/git/commits/${encodeURIComponent(e)}`,this.getQueryString())}async createCommit(e){return this.restWrapper.post("/git/commits",e,this.getQueryString())}async getRefs(){return this.restWrapper.get("/git/refs",this.getQueryString())}async getRef(e){return this.restWrapper.get(`/git/refs/${e}`,this.getQueryString())}async createRef(e){return this.restWrapper.post("/git/refs",e,this.getQueryString())}async updateRef(e,n){return this.restWrapper.patch(`/git/refs/${e}`,n,this.getQueryString())}async deleteRef(e){await this.restWrapper.delete(`/git/refs/${e}`,this.getQueryString())}async createTag(e){return this.restWrapper.post("/git/tags",e,this.getQueryString())}async getTag(e){return this.restWrapper.get(`/git/tags/${e}`,this.getQueryString())}async createTree(e){return this.restWrapper.post("/git/trees",e,this.getQueryString())}async getTree(e,n){return this.restWrapper.get(`/git/trees/${encodeURIComponent(e)}`,this.getQueryString({recursive:n?1:0}))}async createSummary(e){return this.restWrapper.post("/git/summaries",e,this.getQueryString())}async deleteSummary(e){const n={"Soft-Delete":e};return this.restWrapper.delete("/git/summaries",this.getQueryString(),n)}async getSummary(e){return this.restWrapper.get(`/git/summaries/${e}`,this.getQueryString())}async getHeaderDirect(e){const n=await this.getTree(e,!0),r=[".attributes",".blobs",".messages","header"],i=[];for(const a of n.tree)if(a.type==="blob"&&DIe(a.path,r)){const o=this.getBlob(a.sha);i.push(o)}return{blobs:await Promise.all(i),tree:n}}getQueryString(e){return this.cacheBust?Object.assign(Object.assign({cacheBust:Date.now()},this.defaultQueryString),e):Object.assign(Object.assign({},this.defaultQueryString),e)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var Pf;(function(t){t.Method="method",t.Header="header",t.Body="body"})(Pf||(Pf={}));const MIe=(t,e)=>`${t}: ${e}`;class NIe{translate(e){var n,r;const i=Object.assign({},e),s=new URLSearchParams;if(s.append(Pf.Method,(n=i.method)!==null&&n!==void 0?n:"GET"),i.headers)for(const[a,o]of Object.entries(i.headers)){const l=MIe(a,o);s.append(Pf.Header,l)}if(i.data&&["post","put","patch"].includes((r=i.method)===null||r===void 0?void 0:r.toLowerCase())){const a=JSON.stringify(i.data);s.append(Pf.Body,a)}return i.data=s.toString(),i.method="POST",i.headers={"Content-Type":"application/x-www-form-urlencoded;restless"},i}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const Ex=(...t)=>t.map(e=>e.replace(/^\//,"").replace(/\/$/,"")).filter(e=>!!e).join("/");function fj(t,e,n="",r=""){const i={type:"tree",entries:[]},s=Object.keys(e.tree);for(const a of s){const o=e.tree[a];let l,c,u;const d=Ex(n===""?r:n,a);switch(o.type){case Ne.Tree:{c=fj(t,o,d,r),u=o.unreferenced||void 0;break}case Ne.Blob:{typeof o.content=="string"?c={type:"blob",content:o.content,encoding:"utf-8"}:c={type:"blob",content:Hc(o.content,"base64"),encoding:"base64"};break}case Ne.Handle:{if(o.embedded)l=o.handle;else{if(!t)throw Error("Parent summary does not exist to reference by handle.");l=Ex(t,r,o.handle)}break}case Ne.Attachment:{l=o.id;break}default:pi(o,`Unknown type: ${o.type}`)}const h={path:encodeURIComponent(a),type:SB(o)};let p;if(c)N(l===void 0,173),p=Object.assign({value:c,unreferenced:u},h);else if(l)p=Object.assign(Object.assign({},h),{id:l});else throw new Error(`Invalid tree entry for ${o.type}`);i.entries.push(p)}return i}function FIe(t,e){const n={},r={id:t.id,blobs:{},trees:{}};n[""]=r;for(const i of t.entries){const s=i.path.replace(new RegExp(`^${e}/`),""),a=s.lastIndexOf("/"),o=s.slice(0,Math.max(0,a)),l=s.slice(a+1),c=n[o];if(i.type==="tree"){const u={blobs:{},trees:{},unreferenced:i.unreferenced};c.trees[decodeURIComponent(l)]=u,n[s]=u}else if(i.type==="blob")c.blobs[decodeURIComponent(l)]=i.id;else throw new Error("Unknown entry type!!")}return r}function lD(t,e=".app"){var n;const r=new Map;t.blobs&&t.blobs.forEach(o=>{var l;r.set(o.id,oh(o.content,(l=o.encoding)!==null&&l!==void 0?l:"utf-8"))});const i=(n=t.trees)===null||n===void 0?void 0:n[0],s=i==null?void 0:i.sequenceNumber,a=FIe(i,e);return{blobs:r,snapshotTree:a,sequenceNumber:s}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class $Ie{constructor(e,n,r){this.manager=e,this.blobsShaCache=n,this.getPreviousFullSnapshot=r}async writeSummaryTree(e,n,r,i){const s=await this.getPreviousFullSnapshot(n);return this.writeSummaryTreeCore(e,s??void 0)}async writeSummaryTreeCore(e,n){const r=await Promise.all(Object.keys(e.tree).map(async s=>{const a=e.tree[s],o=await this.writeSummaryTreeObject(a,n);return{mode:y5e(a),path:encodeURIComponent(s),sha:o,type:SB(a)}}));return(await this.manager.createGitTree({tree:r})).sha}async writeSummaryTreeObject(e,n){switch(e.type){case Ne.Blob:return this.writeSummaryBlob(e.content);case Ne.Handle:{if(n===void 0)throw Error("Parent summary does not exist to reference by handle.");return this.getIdFromPath(e.handleType,e.handle,n)}case Ne.Tree:return this.writeSummaryTreeCore(e,n);case Ne.Attachment:return e.id;default:pi(e,`Unknown type: ${e.type}`)}}async writeSummaryBlob(e){const{parsedContent:n,encoding:r}=typeof e=="string"?{parsedContent:e,encoding:"utf-8"}:{parsedContent:Hc(e,"base64"),encoding:"base64"},i=await M_e(qr.from(n,r));if(!this.blobsShaCache.has(i)){this.blobsShaCache.set(i,"");const s=await this.manager.createBlob(n,r);N(i===s.sha,182)}return i}getIdFromPath(e,n,r){const i=n.split("/").map(s=>decodeURIComponent(s));return i[0]===""&&i.shift(),i.length===0?r.id:this.getIdFromPathCore(e,i,r)}getIdFromPathCore(e,n,r){var i;N(n.length>0,179);const s=n[0];if(n.length===1)switch(e){case Ne.Blob:{const a=r.blobs[s];return N(!!a,180),a}case Ne.Tree:{const a=(i=r.trees[s])===null||i===void 0?void 0:i.id;return N(!!a,181),a}default:throw Error(`Unexpected handle summary object type: "${e}".`)}return this.getIdFromPathCore(e,n.slice(1),r.trees[s])}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class LIe{constructor(e){this.manager=e}async writeSummaryTree(e,n,r,i){const s=await this.writeSummaryTreeCore(n,e,r,i??0);if(!s)throw new Error("Failed to write summary tree");return s}async writeSummaryTreeCore(e,n,r,i){const a={entries:fj(e,n,"",r==="channel"?".app":"").entries,message:void 0,sequenceNumber:i,type:r};return this.manager.createSummary(a).then(o=>o.id)}}const Ta=Object.create(null);Ta.open="0";Ta.close="1";Ta.ping="2";Ta.pong="3";Ta.message="4";Ta.upgrade="5";Ta.noop="6";const Yg=Object.create(null);Object.keys(Ta).forEach(t=>{Yg[Ta[t]]=t});const BIe={type:"error",data:"parser error"},jIe=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",qIe=typeof ArrayBuffer=="function",zIe=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,pj=({type:t,data:e},n,r)=>jIe&&e instanceof Blob?n?r(e):cD(e,r):qIe&&(e instanceof ArrayBuffer||zIe(e))?n?r(e):cD(new Blob([e]),r):r(Ta[t]+(e||"")),cD=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)},uD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<uD.length;t++)tf[uD.charCodeAt(t)]=t;const HIe=t=>{let e=t.length*.75,n=t.length,r,i=0,s,a,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<n;r+=4)s=tf[t.charCodeAt(r)],a=tf[t.charCodeAt(r+1)],o=tf[t.charCodeAt(r+2)],l=tf[t.charCodeAt(r+3)],u[i++]=s<<2|a>>4,u[i++]=(a&15)<<4|o>>2,u[i++]=(o&3)<<6|l&63;return c},UIe=typeof ArrayBuffer=="function",mj=(t,e)=>{if(typeof t!="string")return{type:"message",data:gj(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:VIe(t.substring(1),e)}:Yg[n]?t.length>1?{type:Yg[n],data:t.substring(1)}:{type:Yg[n]}:BIe},VIe=(t,e)=>{if(UIe){const n=HIe(t);return gj(n,e)}else return{base64:!0,data:t}},gj=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}},vj=String.fromCharCode(30),WIe=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,a)=>{pj(s,!1,o=>{r[a]=o,++i===n&&e(r.join(vj))})})},GIe=(t,e)=>{const n=t.split(vj),r=[];for(let i=0;i<n.length;i++){const s=mj(n[i],e);if(r.push(s),s.type==="error")break}return r},yj=4;function Fn(t){if(t)return KIe(t)}function KIe(t){for(var e in Fn.prototype)t[e]=Fn.prototype[e];return t}Fn.prototype.on=Fn.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Fn.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Fn.prototype.off=Fn.prototype.removeListener=Fn.prototype.removeAllListeners=Fn.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Fn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};Fn.prototype.emitReserved=Fn.prototype.emit;Fn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Fn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Ki=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function bj(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const YIe=Ki.setTimeout,JIe=Ki.clearTimeout;function l1(t,e){e.useNativeTimers?(t.setTimeoutFn=YIe.bind(Ki),t.clearTimeoutFn=JIe.bind(Ki)):(t.setTimeoutFn=Ki.setTimeout.bind(Ki),t.clearTimeoutFn=Ki.clearTimeout.bind(Ki))}const XIe=1.33;function QIe(t){return typeof t=="string"?ZIe(t):Math.ceil((t.byteLength||t.size)*XIe)}function ZIe(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}class eMe extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class Sj extends Fn{constructor(e){super(),this.writable=!1,l1(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,r){return super.emitReserved("error",new eMe(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=mj(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}}const xj="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),p2=64,tMe={};let dD=0,og=0,hD;function fD(t){let e="";do e=xj[t%p2]+e,t=Math.floor(t/p2);while(t>0);return e}function wj(){const t=fD(+new Date);return t!==hD?(dD=0,hD=t):t+"."+fD(dD++)}for(;og<p2;og++)tMe[xj[og]]=og;function Cj(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function nMe(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}let Ej=!1;try{Ej=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const rMe=Ej;function Tj(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||rMe))return new XMLHttpRequest}catch{}if(!e)try{return new Ki[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function iMe(){}const sMe=function(){return new Tj({xdomain:!1}).responseType!=null}();class aMe extends Sj{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port,this.xs=e.secure!==r}const n=e&&e.forceBase64;this.supportsBinary=sMe&&!n}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};GIe(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,WIe(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const n=this.opts.secure?"https":"http";let r="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=wj()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(n==="https"&&Number(this.opts.port)!==443||n==="http"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port);const i=Cj(e),s=this.opts.hostname.indexOf(":")!==-1;return n+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(i.length?"?"+i:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new fa(this.uri(),e)}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class fa extends Fn{constructor(e,n){super(),l1(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.async=n.async!==!1,this.data=n.data!==void 0?n.data:null,this.create()}create(){const e=bj(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const n=this.xhr=new Tj(e);try{n.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},n.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document<"u"&&(this.index=fa.requestsCount++,fa.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=iMe,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete fa.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}fa.requestsCount=0;fa.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",pD);else if(typeof addEventListener=="function"){const t="onpagehide"in Ki?"pagehide":"unload";addEventListener(t,pD,!1)}}function pD(){for(let t in fa.requests)fa.requests.hasOwnProperty(t)&&fa.requests[t].abort()}const Rj=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0))(),lg=Ki.WebSocket||Ki.MozWebSocket,mD=!0,oMe="arraybuffer",gD=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class lMe extends Sj{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,r=gD?{}:bj(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=mD&&!gD?n?new lg(e,n):new lg(e):new lg(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType||oMe,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;pj(r,this.supportsBinary,s=>{const a={};try{mD&&this.ws.send(s)}catch{}i&&Rj(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const n=this.opts.secure?"wss":"ws";let r="";this.opts.port&&(n==="wss"&&Number(this.opts.port)!==443||n==="ws"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=wj()),this.supportsBinary||(e.b64=1);const i=Cj(e),s=this.opts.hostname.indexOf(":")!==-1;return n+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(i.length?"?"+i:"")}check(){return!!lg}}const cMe={websocket:lMe,polling:aMe},uMe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,dMe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function m2(t){const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=uMe.exec(t||""),s={},a=14;for(;a--;)s[dMe[a]]=i[a]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=hMe(s,s.path),s.queryKey=fMe(s,s.query),s}function hMe(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function fMe(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}let kj=class vu extends Fn{constructor(e,n={}){super(),this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=m2(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=m2(n.host).host),l1(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=nMe(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=yj,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts.transportOptions[e],this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new cMe[e](r)}open(){let e;if(this.opts.rememberUpgrade&&vu.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),r=!1;vu.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;vu.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function s(){r||(r=!0,u(),n.close(),n=null)}const a=d=>{const h=new Error("probe error: "+d);h.transport=n.name,s(),this.emitReserved("upgradeError",h)};function o(){a("transport closed")}function l(){a("socket closed")}function c(d){n&&d.name!==n.name&&s()}const u=()=>{n.removeListener("open",i),n.removeListener("error",a),n.removeListener("close",o),this.off("close",l),this.off("upgrading",c)};n.once("open",i),n.once("error",a),n.once("close",o),this.once("close",l),this.once("upgrading",c),n.open()}onOpen(){if(this.readyState="open",vu.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=QIe(i)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(e,n,r){return this.sendPacket("message",e,n,r),this}send(e,n,r){return this.sendPacket("message",e,n,r),this}sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){vu.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let r=0;const i=e.length;for(;r<i;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}};kj.protocol=yj;function pMe(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=m2(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const mMe=typeof ArrayBuffer=="function",gMe=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Pj=Object.prototype.toString,vMe=typeof Blob=="function"||typeof Blob<"u"&&Pj.call(Blob)==="[object BlobConstructor]",yMe=typeof File=="function"||typeof File<"u"&&Pj.call(File)==="[object FileConstructor]";function Tk(t){return mMe&&(t instanceof ArrayBuffer||gMe(t))||vMe&&t instanceof Blob||yMe&&t instanceof File}function Jg(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Jg(t[n]))return!0;return!1}if(Tk(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Jg(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Jg(t[n]))return!0;return!1}function bMe(t){const e=[],n=t.data,r=t;return r.data=g2(n,e),r.attachments=e.length,{packet:r,buffers:e}}function g2(t,e){if(!t)return t;if(Tk(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=g2(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=g2(t[r],e));return n}return t}function SMe(t,e){return t.data=v2(t.data,e),delete t.attachments,t}function v2(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=v2(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=v2(t[n],e));return t}const xMe=5;var mt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(mt||(mt={}));class wMe{constructor(e){this.replacer=e}encode(e){return(e.type===mt.EVENT||e.type===mt.ACK)&&Jg(e)?this.encodeAsBinary({type:e.type===mt.EVENT?mt.BINARY_EVENT:mt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===mt.BINARY_EVENT||e.type===mt.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=bMe(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}class Rk extends Fn{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===mt.BINARY_EVENT;r||n.type===mt.BINARY_ACK?(n.type=r?mt.EVENT:mt.ACK,this.reconstructor=new CMe(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Tk(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(mt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===mt.BINARY_EVENT||r.type===mt.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const a=e.substring(s,n);if(a!=Number(a)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const a=e.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(Rk.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case mt.CONNECT:return typeof n=="object";case mt.DISCONNECT:return n===void 0;case mt.CONNECT_ERROR:return typeof n=="string"||typeof n=="object";case mt.EVENT:case mt.BINARY_EVENT:return Array.isArray(n)&&n.length>0;case mt.ACK:case mt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class CMe{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=SMe(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const EMe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Rk,Encoder:wMe,get PacketType(){return mt},protocol:xMe},Symbol.toStringTag,{value:"Module"}));function Ss(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const TMe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class _j extends Fn{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ss(e,"open",this.onopen.bind(this)),Ss(e,"packet",this.onpacket.bind(this)),Ss(e,"error",this.onerror.bind(this)),Ss(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(TMe.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:mt.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const a=this.ids++,o=n.pop();this._registerAckCallback(a,o),r.id=a}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i);this.acks[e]=(...a)=>{this.io.clearTimeoutFn(s),n.apply(this,[null,...a])}}emitWithAck(e,...n){const r=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((i,s)=>{n.push((a,o)=>r?a?s(a):i(o):i(a)),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:mt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case mt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case mt.EVENT:case mt.BINARY_EVENT:this.onevent(e);break;case mt.ACK:case mt.BINARY_ACK:this.onack(e);break;case mt.DISCONNECT:this.ondisconnect();break;case mt.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:mt.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(n.apply(this,e.data),delete this.acks[e.id])}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:mt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function hh(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}hh.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};hh.prototype.reset=function(){this.attempts=0};hh.prototype.setMin=function(t){this.ms=t};hh.prototype.setMax=function(t){this.max=t};hh.prototype.setJitter=function(t){this.jitter=t};class y2 extends Fn{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,l1(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new hh({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||EMe;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new kj(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Ss(n,"open",function(){r.onopen(),e&&e()}),s=Ss(n,"error",a=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",a),e?e(a):r.maybeReconnectOnOpen()});if(this._timeout!==!1){const a=this._timeout;a===0&&i();const o=this.setTimeoutFn(()=>{i(),n.close(),n.emit("error",new Error("timeout"))},a);this.opts.autoUnref&&o.unref(),this.subs.push(function(){clearTimeout(o)})}return this.subs.push(i),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ss(e,"ping",this.onping.bind(this)),Ss(e,"data",this.ondata.bind(this)),Ss(e,"error",this.onerror.bind(this)),Ss(e,"close",this.onclose.bind(this)),Ss(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Rj(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new _j(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(function(){clearTimeout(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Uh={};function Xg(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=pMe(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,a=Uh[i]&&s in Uh[i].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let l;return o?l=new y2(r,e):(Uh[i]||(Uh[i]=new y2(r,e)),l=Uh[i]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(Xg,{Manager:y2,Socket:_j,io:Xg,connect:Xg});/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class Fd{constructor(){this.cache=new Map}async get(e){return this.cache.get(e)}async put(e,n){this.cache.set(e,n)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const vD="latest";class RMe{constructor(e,n,r,i={},s,a=new Fd,o=new Fd,l,c=async u=>u&&this.noCacheGitManager!==void 0?this.noCacheGitManager:this.manager){this.id=e,this.manager=n,this.logger=r,this.policies=i,this.driverPolicies=s,this.blobCache=a,this.snapshotTreeCache=o,this.noCacheGitManager=l,this.getStorageManager=c,this.firstVersionsCall=!0}get repositoryUrl(){return""}async getSummaryUploadManager(){const e=await this.getStorageManager();return new LIe(e)}async getVersions(e,n){var r;if(e!==this.id&&e!==null)return[{id:e,treeId:void 0}];if(this.firstVersionsCall&&n===1){this.firstVersionsCall=!1;const{id:a,snapshotTree:o}=!((r=this.driverPolicies)===null||r===void 0)&&r.enableDiscovery?await this.fetchAndCacheSnapshotTree(vD,!0):await this.fetchAndCacheSnapshotTree(vD,!1);return[{id:a,treeId:o.id}]}const i=e||this.id;return(await gt.timedExecAsync(this.logger,{eventName:"getVersions",versionId:i,count:n},async()=>(await this.getStorageManager()).getCommits(i,n))).map(a=>({date:a.commit.author.date,id:a.sha,treeId:a.commit.tree.sha}))}async getSnapshotTree(e){let n=e;if(!n){const r=await this.getVersions(this.id,1);if(r.length===0)return null;n=r[0]}return(await this.fetchAndCacheSnapshotTree(n.id)).snapshotTree}async readBlob(e){const n=await this.blobCache.get(this.getCacheKey(e));if(n!==void 0)return n;const r=await gt.timedExecAsync(this.logger,{eventName:"readBlob",blobId:e},async s=>{const o=await(await this.getStorageManager()).getBlob(e);return s.end({size:o.size}),o}),i=oh(r.content,r.encoding);return await this.blobCache.put(this.getCacheKey(r.sha),i),i}async uploadSummaryWithContext(e,n){return await gt.timedExecAsync(this.logger,{eventName:"uploadSummaryWithContext"},async()=>{var i;return(await this.getSummaryUploadManager()).writeSummaryTree(e,(i=n.ackHandle)!==null&&i!==void 0?i:"","channel")})}async downloadSummary(e){const n=await gt.timedExecAsync(this.logger,{eventName:"getWholeFlatSummary",treeId:e.handle},async s=>{var a;const l=await(await this.getStorageManager()).getSummary(e.handle);return s.end({size:(a=l.trees[0])===null||a===void 0?void 0:a.entries.length}),l}),{blobs:r,snapshotTree:i}=lD(n,"");return RB(i,r)}async createBlob(e){const n=new Uint8Array(e);return gt.timedExecAsync(this.logger,{eventName:"createBlob",size:n.length},async r=>{const s=await(await this.getStorageManager()).createBlob(Hc(n,"base64"),"base64").then(a=>({id:a.sha,url:a.url}));return r.end({blobId:s.id}),s})}async fetchAndCacheSnapshotTree(e,n){const r=await this.snapshotTreeCache.get(this.getCacheKey(e));if(r!==void 0)return{id:r.id,snapshotTree:r.snapshotTree};const i=await gt.timedExecAsync(this.logger,{eventName:"getWholeFlatSummary",treeId:e},async u=>{var d;const p=await(await this.getStorageManager(n)).getSummary(e);return u.end({size:(d=p.trees[0])===null||d===void 0?void 0:d.entries.length}),p}),s=lD(i),a=i.id,o=s.snapshotTree.id;N(o!==void 0,629);const l={id:a,snapshotTree:s.snapshotTree},c=[this.snapshotTreeCache.put(this.getCacheKey(o),l),this.initBlobCache(s.blobs)];return o!==e&&c.push(this.snapshotTreeCache.put(this.getCacheKey(e),l)),await Promise.all(c),l}async initBlobCache(e){const n=[];e.forEach((r,i)=>{const s=this.getCacheKey(i);n.push(this.blobCache.put(s,r))}),await Promise.all(n)}getCacheKey(e){return`${this.id}:${e}`}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class kMe{constructor(e,n){this.internalGitManager=e,this.logger=n}async getHeader(e,n){return this.runWithRetry(async()=>this.internalGitManager.getHeader(e,n),"gitManager_getHeader")}async getFullTree(e){return this.runWithRetry(async()=>this.internalGitManager.getFullTree(e),"gitManager_getFullTree")}async getCommit(e){return this.runWithRetry(async()=>this.internalGitManager.getCommit(e),"gitManager_getCommit")}async getCommits(e,n){return this.runWithRetry(async()=>this.internalGitManager.getCommits(e,n),"gitManager_getCommits")}async getTree(e,n){return this.runWithRetry(async()=>this.internalGitManager.getTree(e,n),"gitManager_getTree")}async getBlob(e){return this.runWithRetry(async()=>this.internalGitManager.getBlob(e),"gitManager_getBlob")}getRawUrl(e){return this.internalGitManager.getRawUrl(e)}async getContent(e,n){return this.runWithRetry(async()=>this.internalGitManager.getContent(e,n),"gitManager_getContent")}async createBlob(e,n){return this.runWithRetry(async()=>this.internalGitManager.createBlob(e,n),"gitManager_createBlob")}async createGitTree(e){return this.runWithRetry(async()=>this.internalGitManager.createGitTree(e),"gitManager_createGitTree")}async createTree(e){return this.runWithRetry(async()=>this.internalGitManager.createTree(e),"gitManager_createTree")}async createCommit(e){return this.runWithRetry(async()=>this.internalGitManager.createCommit(e),"gitManager_createCommit")}async getRef(e){return this.runWithRetry(async()=>this.internalGitManager.getRef(e),"gitManager_getRef")}async createRef(e,n){return this.runWithRetry(async()=>this.internalGitManager.createRef(e,n),"gitManager_createRef")}async upsertRef(e,n){return this.runWithRetry(async()=>this.internalGitManager.upsertRef(e,n),"gitManager_upsertRef")}async write(e,n,r,i){return this.runWithRetry(async()=>this.internalGitManager.write(e,n,r,i),"gitManager_write")}async createSummary(e){return this.runWithRetry(async()=>this.internalGitManager.createSummary(e),"gitManager_createSummary")}async deleteSummary(e){return this.runWithRetry(async()=>this.internalGitManager.deleteSummary(e),"gitManager_deleteSummary")}async getSummary(e){return this.runWithRetry(async()=>this.internalGitManager.getSummary(e),"gitManager_getSummary")}async runWithRetry(e,n){return uk(e,n,this.logger,{})}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const PMe=typeof window>"u";class _Me{constructor(e,n,r,i={},s,a,o,l=async()=>this.manager){this.id=e,this.manager=n,this.logger=r,this.policies=i,this.getStorageManager=l,this.blobsShaCache=new Map,((s==null?void 0:s.enableRestLess)===!0||PMe)&&(this.blobCache=a??new Fd,this.snapshotTreeCache=o??new Fd)}get repositoryUrl(){return""}async getSummaryUploadManager(){const e=await this.getStorageManager();return new $Ie(new kMe(e,this.logger),this.blobsShaCache,this.getPreviousFullSnapshot.bind(this))}async getVersions(e,n){const r=e||this.id;return(await gt.timedExecAsync(this.logger,{eventName:"getVersions",versionId:r,count:n},async()=>(await this.getStorageManager()).getCommits(r,n))).map(s=>({date:s.commit.author.date,id:s.sha,treeId:s.commit.tree.sha}))}async getSnapshotTree(e){var n,r;let i=e;if(!i){const l=await this.getVersions(this.id,1);if(l.length===0)return null;i=l[0]}const s=await((n=this.snapshotTreeCache)===null||n===void 0?void 0:n.get(this.getCacheKey(i.treeId)));if(s)return s.snapshotTree;const a=await gt.timedExecAsync(this.logger,{eventName:"getSnapshotTree",treeId:i.treeId},async l=>{const u=await(await this.getStorageManager()).getTree(i.treeId);return l.end({size:u.tree.length}),u}),o=sk(a,this.blobsShaCache,!0);return await((r=this.snapshotTreeCache)===null||r===void 0?void 0:r.put(this.getCacheKey(o.id),{id:i.id,snapshotTree:o})),o}async readBlob(e){var n,r;const i=await((n=this.blobCache)===null||n===void 0?void 0:n.get(this.getCacheKey(e)));if(i)return i;const s=await gt.timedExecAsync(this.logger,{eventName:"readBlob",blobId:e},async o=>{const c=await(await this.getStorageManager()).getBlob(e);return o.end({size:c.size}),c});this.blobsShaCache.set(s.sha,"");const a=oh(s.content,s.encoding);return await((r=this.blobCache)===null||r===void 0?void 0:r.put(this.getCacheKey(s.sha),a)),a}async uploadSummaryWithContext(e,n){return await gt.timedExecAsync(this.logger,{eventName:"uploadSummaryWithContext"},async()=>{var i;return(await this.getSummaryUploadManager()).writeSummaryTree(e,(i=n.ackHandle)!==null&&i!==void 0?i:"","channel")})}async downloadSummary(e){throw new Error("NOT IMPLEMENTED!")}async createBlob(e){const n=new Uint8Array(e);return gt.timedExecAsync(this.logger,{eventName:"createBlob",size:n.length},async r=>{const s=await(await this.getStorageManager()).createBlob(Hc(n,"base64"),"base64").then(a=>({id:a.sha,url:a.url}));return r.end({blobId:s.id}),s})}async getPreviousFullSnapshot(e){return e?this.getVersions(e,1).then(async n=>(this.blobsShaCache.clear(),this.getSnapshotTree(n[0]))):void 0}getCacheKey(e){return`${this.id}:${e}`}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class kk extends ik{constructor(e,n,r,i={},s,a,o,l,c){super(kk.loadInternalDocumentStorageService(e,n,r,i,s,a,o,l,c)),this.id=e,this.manager=n,this.noCacheGitManager=l,this._logTailSha=void 0}get logTailSha(){return this._logTailSha}static loadInternalDocumentStorageService(e,n,r,i,s,a,o,l,c){const u=s!=null&&s.enableWholeSummaryUpload?new RMe(e,n,r,i,s,a,o,l,c):new _Me(e,n,r,i,s,a,o,c);return!(s!=null&&s.enableWholeSummaryUpload)&&i.caching===Dd.Prefetch?new tAe(u):u}async getSnapshotTree(e){const n=await this.internalStorageService.getSnapshotTree(e);return n!==null&&(this._logTailSha=".logTail"in n.trees?n.trees[".logTail"].blobs.logTail:void 0),n}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 *
 * THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY
 */const yD="1.3.6";/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class Do extends tk{constructor(e,n,r,i=!1){super((s,a)=>{r.sendErrorEvent({eventName:"DeltaConnection:EventException",name:s},a)}),this.socket=e,this.documentId=n,this.enableLongPollingDowngrades=i,this.queuedMessages=[],this.queuedSignals=[],this.earlyOpHandlerAttached=!1,this.connectionListeners=new Map,this.trackedListeners=new Map,this._disposed=!1,this.earlyOpHandler=(s,a)=>{this.queuedMessages.push(...a)},this.earlySignalHandler=s=>{this.queuedSignals.push(s)},this.mc=ch(ot.create(r,"DeltaConnection")),this.on("newListener",(s,a)=>{if(N(!this.disposed,522),Do.eventsAlwaysForwarded.includes(s)){N(this.trackedListeners.has(s),581);return}if(!Do.eventsToForward.includes(s))throw new Error(`DocumentDeltaConnection: Registering for unknown event: ${s}`);N(this.listeners(s).length!==0===this.trackedListeners.has(s),523),this.trackedListeners.has(s)||this.addTrackedListener(s,(...o)=>{this.emit(s,...o)})})}get hasDetails(){return!!this._details}get disposed(){return N(this._disposed||this.socket.connected,580),this._disposed}get logger(){return this.mc.logger}get details(){if(!this._details)throw new Error("Internal error: calling method before _details is initialized!");return this._details}get clientId(){return this.details.clientId}get mode(){return this.details.mode}get claims(){return this.details.claims}get existing(){return this.details.existing}get maxMessageSize(){return this.details.serviceConfiguration.maxMessageSize}get version(){return this.details.version}get serviceConfiguration(){return this.details.serviceConfiguration}checkNotClosed(){N(!this.disposed,524)}get initialMessages(){return this.checkNotClosed(),N(this.earlyOpHandlerAttached,142),N(this.listeners("op").length!==0,143),this.removeEarlyOpHandler(),this.queuedMessages.length>0&&(this.details.initialMessages.push(...this.queuedMessages),this.details.initialMessages.sort((e,n)=>e.sequenceNumber-n.sequenceNumber),this.queuedMessages.length=0),this.details.initialMessages}get initialSignals(){return this.checkNotClosed(),N(this.listeners("signal").length!==0,144),this.removeEarlySignalHandler(),this.queuedSignals.length>0&&(this.details.initialSignals.push(...this.queuedSignals),this.queuedSignals.length=0),this.details.initialSignals}get initialClients(){return this.checkNotClosed(),this.details.initialClients}emitMessages(e,n){this.disposed||this.socket.emit(e,this.clientId,n)}submitCore(e,n){this.emitMessages(e,[n])}submit(e){this.checkNotClosed(),this.submitCore("submitOp",e)}submitSignal(e){this.checkNotClosed(),this.submitCore("submitSignal",[e])}dispose(){this.disposeCore(!1,Md("Client closing delta connection",{canRetry:!0},{driverVersion:yD}))}disposeCore(e,n){this._disposed||(this._disposed=!0,this.removeTrackedListeners(),this.disconnect(e,n))}disconnect(e,n){this.socket.disconnect()}async initialize(e,n){this.socket.on("op",this.earlyOpHandler),this.socket.on("signal",this.earlySignalHandler),this.earlyOpHandlerAttached=!0;let r=0;const i=()=>this.socket.io.reconnection(),s=()=>i()?this.socket.io.reconnectionAttempts():0,a=()=>s()+1;this._details=await new Promise((o,l)=>{const c=(u,d)=>{this.disposeCore(u,d),l(d)};this.addConnectionListener("connect_error",u=>{var d;r++;let h=!1;try{const p=u==null?void 0:u.description;p&&typeof p=="object"&&(u.type==="TransportError"&&(h=!0),p.target=void 0)}catch{}h&&this.enableLongPollingDowngrades&&((d=this.socket.io.opts.transports)===null||d===void 0?void 0:d[0])!=="polling"&&(this.socket.io.opts.transports=["polling","websocket"],i()||(this.socket.io.reconnection(!0),this.socket.io.reconnectionAttempts(1))),!(i()&&r<a())&&c(!0,this.createErrorObject("connect_error",u))}),this.addConnectionListener("connect_timeout",()=>{c(!0,this.createErrorObject("connect_timeout"))}),this.addConnectionListener("connect_document_success",u=>{if(e.nonce!==void 0&&u.nonce!==void 0&&u.nonce!==e.nonce)return;const d=e.mode,h=u.mode;if(u.claims.scopes.includes(Vo.DocWrite)){if(h!==d){c(!1,this.createErrorObject("connect_document_success","Connected in a different mode than was requested",!1));return}}else if(h==="write"){c(!1,this.createErrorObject("connect_document_success","Connected in write mode without write permissions",!1));return}this.checkpointSequenceNumber=u.checkpointSequenceNumber,this.removeConnectionListeners(),o(u)}),this.addTrackedListener("disconnect",u=>{const d=this.createErrorObject("disconnect",u);this.emit("disconnect",d),c(!0,d)}),this.addTrackedListener("error",u=>{const d=this.createErrorObject("error",u,u!=="Invalid namespace");this.emit("error",d),c(!0,d)}),this.addConnectionListener("connect_document_error",u=>{e.nonce!==void 0&&u.nonce!==void 0&&u.nonce!==e.nonce||c(!1,this.createErrorObject("connect_document_error",u))}),this.socket.emit("connect_document",e),this.socketConnectionTimeout=setTimeout(()=>{c(!1,this.createErrorObject("orderingServiceHandshakeTimeout"))},n+2e3)}),N(!this.disposed,582)}removeEarlyOpHandler(){this.socket.removeListener("op",this.earlyOpHandler),this.earlyOpHandlerAttached=!1}removeEarlySignalHandler(){this.socket.removeListener("signal",this.earlySignalHandler)}addConnectionListener(e,n){N(!Do.eventsAlwaysForwarded.includes(e),583),N(!Do.eventsToForward.includes(e),584),this.socket.on(e,n),N(!this.connectionListeners.has(e),525),this.connectionListeners.set(e,n)}addTrackedListener(e,n){this.socket.on(e,n),N(!this.trackedListeners.has(e),526),this.trackedListeners.set(e,n)}removeTrackedListeners(){for(const[e,n]of this.trackedListeners.entries())this.socket.off(e,n);this.removeConnectionListeners(),this.removeEarlyOpHandler(),this.removeEarlySignalHandler(),this.trackedListeners.clear()}removeConnectionListeners(){this.socketConnectionTimeout!==void 0&&clearTimeout(this.socketConnectionTimeout);for(const[e,n]of this.connectionListeners.entries())this.socket.off(e,n);this.connectionListeners.clear()}createErrorObject(e,n,r=!0){let i;return(n==null?void 0:n.type)==="TransportError"?i=`${(n==null?void 0:n.message)!==void 0?`${n.message}: `:""}${JSON.stringify(n,d5e())}`:i=V_e(n).message,Md(`socket.io (${e}): ${i}`,{canRetry:r},{driverVersion:yD})}}Do.eventsToForward=["nack","op","signal","pong"];Do.eventsAlwaysForwarded=["disconnect","error"];/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 *
 * THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY
 */const c1="1.3.6";/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var b2;(function(t){t.fileNotFoundOrAccessDeniedError="fileNotFoundOrAccessDeniedError"})(b2||(b2={}));function Aj(t,e,n){const r={statusCode:e,driverVersion:c1};switch(e){case void 0:return new t2(t,t.startsWith("NetworkError"),r);case 401:case 403:return new z5e(t,void 0,void 0,r);case 404:const i=b2.fileNotFoundOrAccessDeniedError;return new t1(t,i,r);case 429:return Md(t,{canRetry:!0,retryAfterMs:n},r);case 500:case 502:return new t2(t,!0,r);default:return Md(t,{canRetry:n!==void 0,retryAfterMs:n},r)}}function bD(t,e,n){throw Aj(t,e,n)}function AMe(t,e){const n=`R11s socket error (${e}): ${t.message}`;return Aj(n,t.code,t.retryAfterMs)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const OMe=["^0.4.0","^0.3.0","^0.2.0","^0.1.0"];class Pk extends Do{static async create(e,n,r,i,s,a,o,l=2e4){const c=i(a,{query:{documentId:n,tenantId:e},reconnection:!1,transports:["websocket"],timeout:l}),u={client:s,id:n,mode:s.mode,tenantId:e,token:r,versions:OMe,relayUserAgent:[s.details.environment,` driverVersion:${c1}`].join(";")},d=!0,h=new Pk(c,n,o,d);return await h.initialize(u,l),h}createErrorObject(e,n,r=!0){return r&&Number.isInteger(n==null?void 0:n.code)&&typeof(n==null?void 0:n.message)=="string"?AMe(n,e):super.createErrorObject(e,n,r)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class DMe{get repositoryUrl(){throw new Error("Invalid operation")}async getSnapshotTree(e){return e?Promise.reject(new Error("Invalid operation")):null}async getVersions(e,n){return[]}async uploadSummaryWithContext(e,n){return Promise.reject(new Error("Invalid operation"))}async downloadSummary(e){return Promise.reject(new Error("Invalid operation"))}async createBlob(e){return Promise.reject(new Error("Null blob storage can not create blob"))}async readBlob(e){return Promise.reject(new Error("Null blob storage can not read blob"))}}var gv={},IMe={get exports(){return gv},set exports(t){gv=t}};(function(t,e){var n=typeof self<"u"?self:hn,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(a){var o={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function l(A){return A&&DataView.prototype.isPrototypeOf(A)}if(o.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(A){return A&&c.indexOf(Object.prototype.toString.call(A))>-1};function d(A){if(typeof A!="string"&&(A=String(A)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(A))throw new TypeError("Invalid character in header field name");return A.toLowerCase()}function h(A){return typeof A!="string"&&(A=String(A)),A}function p(A){var O={next:function(){var L=A.shift();return{done:L===void 0,value:L}}};return o.iterable&&(O[Symbol.iterator]=function(){return O}),O}function f(A){this.map={},A instanceof f?A.forEach(function(O,L){this.append(L,O)},this):Array.isArray(A)?A.forEach(function(O){this.append(O[0],O[1])},this):A&&Object.getOwnPropertyNames(A).forEach(function(O){this.append(O,A[O])},this)}f.prototype.append=function(A,O){A=d(A),O=h(O);var L=this.map[A];this.map[A]=L?L+", "+O:O},f.prototype.delete=function(A){delete this.map[d(A)]},f.prototype.get=function(A){return A=d(A),this.has(A)?this.map[A]:null},f.prototype.has=function(A){return this.map.hasOwnProperty(d(A))},f.prototype.set=function(A,O){this.map[d(A)]=h(O)},f.prototype.forEach=function(A,O){for(var L in this.map)this.map.hasOwnProperty(L)&&A.call(O,this.map[L],L,this)},f.prototype.keys=function(){var A=[];return this.forEach(function(O,L){A.push(L)}),p(A)},f.prototype.values=function(){var A=[];return this.forEach(function(O){A.push(O)}),p(A)},f.prototype.entries=function(){var A=[];return this.forEach(function(O,L){A.push([L,O])}),p(A)},o.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);function m(A){if(A.bodyUsed)return Promise.reject(new TypeError("Already read"));A.bodyUsed=!0}function g(A){return new Promise(function(O,L){A.onload=function(){O(A.result)},A.onerror=function(){L(A.error)}})}function v(A){var O=new FileReader,L=g(O);return O.readAsArrayBuffer(A),L}function y(A){var O=new FileReader,L=g(O);return O.readAsText(A),L}function b(A){for(var O=new Uint8Array(A),L=new Array(O.length),F=0;F<O.length;F++)L[F]=String.fromCharCode(O[F]);return L.join("")}function C(A){if(A.slice)return A.slice(0);var O=new Uint8Array(A.byteLength);return O.set(new Uint8Array(A)),O.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(A){this._bodyInit=A,A?typeof A=="string"?this._bodyText=A:o.blob&&Blob.prototype.isPrototypeOf(A)?this._bodyBlob=A:o.formData&&FormData.prototype.isPrototypeOf(A)?this._bodyFormData=A:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)?this._bodyText=A.toString():o.arrayBuffer&&o.blob&&l(A)?(this._bodyArrayBuffer=C(A.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(A)||u(A))?this._bodyArrayBuffer=C(A):this._bodyText=A=Object.prototype.toString.call(A):this._bodyText="",this.headers.get("content-type")||(typeof A=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var A=m(this);if(A)return A;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var A=m(this);if(A)return A;if(this._bodyBlob)return y(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(b(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function E(A){var O=A.toUpperCase();return w.indexOf(O)>-1?O:A}function k(A,O){O=O||{};var L=O.body;if(A instanceof k){if(A.bodyUsed)throw new TypeError("Already read");this.url=A.url,this.credentials=A.credentials,O.headers||(this.headers=new f(A.headers)),this.method=A.method,this.mode=A.mode,this.signal=A.signal,!L&&A._bodyInit!=null&&(L=A._bodyInit,A.bodyUsed=!0)}else this.url=String(A);if(this.credentials=O.credentials||this.credentials||"same-origin",(O.headers||!this.headers)&&(this.headers=new f(O.headers)),this.method=E(O.method||this.method||"GET"),this.mode=O.mode||this.mode||null,this.signal=O.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(L)}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})};function T(A){var O=new FormData;return A.trim().split("&").forEach(function(L){if(L){var F=L.split("="),B=F.shift().replace(/\+/g," "),j=F.join("=").replace(/\+/g," ");O.append(decodeURIComponent(B),decodeURIComponent(j))}}),O}function _(A){var O=new f,L=A.replace(/\r?\n[\t ]+/g," ");return L.split(/\r?\n/).forEach(function(F){var B=F.split(":"),j=B.shift().trim();if(j){var q=B.join(":").trim();O.append(j,q)}}),O}R.call(k.prototype);function D(A,O){O||(O={}),this.type="default",this.status=O.status===void 0?200:O.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in O?O.statusText:"OK",this.headers=new f(O.headers),this.url=O.url||"",this._initBody(A)}R.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},D.error=function(){var A=new D(null,{status:0,statusText:""});return A.type="error",A};var I=[301,302,303,307,308];D.redirect=function(A,O){if(I.indexOf(O)===-1)throw new RangeError("Invalid status code");return new D(null,{status:O,headers:{location:A}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(O,L){this.message=O,this.name=L;var F=Error(O);this.stack=F.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function M(A,O){return new Promise(function(L,F){var B=new k(A,O);if(B.signal&&B.signal.aborted)return F(new a.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function q(){j.abort()}j.onload=function(){var V={status:j.status,statusText:j.statusText,headers:_(j.getAllResponseHeaders()||"")};V.url="responseURL"in j?j.responseURL:V.headers.get("X-Request-URL");var U="response"in j?j.response:j.responseText;L(new D(U,V))},j.onerror=function(){F(new TypeError("Network request failed"))},j.ontimeout=function(){F(new TypeError("Network request failed"))},j.onabort=function(){F(new a.DOMException("Aborted","AbortError"))},j.open(B.method,B.url,!0),B.credentials==="include"?j.withCredentials=!0:B.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&o.blob&&(j.responseType="blob"),B.headers.forEach(function(V,U){j.setRequestHeader(U,V)}),B.signal&&(B.signal.addEventListener("abort",q),j.onreadystatechange=function(){j.readyState===4&&B.signal.removeEventListener("abort",q)}),j.send(typeof B._bodyInit>"u"?null:B._bodyInit)})}return M.polyfill=!0,s.fetch||(s.fetch=M,s.Headers=f,s.Request=k,s.Response=D),a.Headers=f,a.Request=k,a.Response=D,a.fetch=M,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(IMe,gv);const MMe=kv(gv),NMe=t=>{var e,n;const r=t.baseURL!==void 0?`${t.baseURL}${(e=t.url)!==null&&e!==void 0?e:""}`:(n=t.url)!==null&&n!==void 0?n:"",i={method:t.method,headers:t.headers,body:t.data};return[r,i]};class Oj extends hj{constructor(e,n,r,i,s,a={}){super(s,a),this.rateLimiter=n,this.getAuthorizationHeader=r,this.useRestLess=i,this.restLess=new NIe}async load(){this.authorizationHeader=await this.getAuthorizationHeader()}async request(e,n,r=!0){var i;const s=Object.assign(Object.assign({},e),{headers:this.generateHeaders(e.headers)}),a=this.useRestLess?this.restLess.translate(s):s,o=NMe(a),l=await this.rateLimiter.schedule(async()=>MMe(...o).catch(async d=>{const h=["TypeError","FetchError"].includes(d==null?void 0:d.name);bD(h?`NetworkError: ${d.message}`:Nd(d))})),c=!((i=l.headers.get("content-type"))===null||i===void 0)&&i.includes("application/json")?await l.json():await l.text();if(l.ok||l.status===n)return c;if(l.status===401&&r)return this.authorizationHeader=await this.getAuthorizationHeader(!0),this.request(s,n,!1);if(l.status===429&&(c==null?void 0:c.retryAfter)>0)return new Promise((d,h)=>setTimeout(()=>{this.request(s,n).then(d).catch(h)},c.retryAfter*1e3));const u=c!==void 0?typeof c=="string"?c:Nd(c):l.statusText;bD(`R11s fetch error: ${u}`,l.status,c==null?void 0:c.retryAfter)}generateHeaders(e){const n=(e==null?void 0:e["x-correlation-id"])||Cn();return Object.assign(Object.assign({},e),{"x-correlation-id":n,"x-driver-version":c1,Authorization:this.authorizationHeader})}}class _k extends Oj{constructor(e,n,r,i,s,a={}){super(e,n,r,i,s,a)}static async load(e,n,r,i,s,a,o){const l={token:`${J9(e)}`},c=async d=>{const p={password:(await r.fetchStorageToken(e,n,d)).jwt,user:e};return IIe(p)},u=new _k(i,s,c,a,o,l);try{await u.load()}catch(d){i.sendErrorEvent({eventName:"R11sRestWrapperLoadFailure"},d),await u.load()}return u}}class Rp extends Oj{constructor(e,n,r,i,s,a={}){super(e,n,r,i,s,a)}static async load(e,n,r,i,s,a,o){const l=async u=>`Basic ${(await r.fetchOrdererToken(e,n,u)).jwt}`,c=new Rp(i,s,l,a,o);try{await c.load()}catch(u){i.sendErrorEvent({eventName:"R11sRestWrapperLoadFailure"},u),await c.load()}return c}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const FMe=5*6e4;class $Me{constructor(e,n,r,i,s,a,o,l,c,u,d,h){this._resolvedUrl=e,this.ordererUrl=n,this.deltaStorageUrl=r,this.storageUrl=i,this.logger=s,this.tokenProvider=a,this.tenantId=o,this.documentId=l,this.driverPolicies=c,this.blobCache=u,this.snapshotTreeCache=d,this.discoverFluidResolvedUrl=h,this.lastDiscoveredAt=Date.now()}get resolvedUrl(){return this._resolvedUrl}dispose(){}async connectToStorage(){if(this.documentStorageService!==void 0)return this.documentStorageService;if(this.storageUrl===void 0)return new DMe;const e=async s=>{const a=this.shouldUpdateDiscoveredSessionInfo();if(a&&await this.refreshDiscovery(),!this.storageManager||!this.noCacheStorageManager||a){const o=new hv(this.driverPolicies.maxConcurrentStorageRequests),l=await _k.load(this.tenantId,this.documentId,this.tokenProvider,this.logger,o,this.driverPolicies.enableRestLess,this.storageUrl),c=new oD(this.storageUrl,!0,!1,l);this.storageManager=new FO(c);const u=new oD(this.storageUrl,!0,!0,l);this.noCacheStorageManager=new FO(u)}return s?this.noCacheStorageManager:this.storageManager},n=await e(),r=await e(!0),i={caching:this.driverPolicies.enablePrefetch?Dd.Prefetch:Dd.NoCaching,minBlobSize:this.driverPolicies.aggregateBlobsSmallerThanBytes};return this.documentStorageService=new kk(this.documentId,n,this.logger,i,this.driverPolicies,this.blobCache,this.snapshotTreeCache,r,e),this.documentStorageService}async connectToDeltaStorage(){await this.connectToStorage(),N(!!this.documentStorageService,177);const e=async()=>{const i=this.shouldUpdateDiscoveredSessionInfo();if(i&&await this.refreshDiscovery(),!this.ordererRestWrapper||i){const s=new hv(this.driverPolicies.maxConcurrentOrdererRequests);this.ordererRestWrapper=await Rp.load(this.tenantId,this.documentId,this.tokenProvider,this.logger,s,this.driverPolicies.enableRestLess)}return this.ordererRestWrapper},n=await e(),r=new FAe(this.deltaStorageUrl,n,this.logger,e,()=>this.deltaStorageUrl);return new NAe(this.tenantId,this.documentId,r,this.documentStorageService)}async connectToDeltaStream(e){const n=async r=>{this.shouldUpdateDiscoveredSessionInfo()&&await this.refreshDiscovery();const i=await this.tokenProvider.fetchOrdererToken(this.tenantId,this.documentId,r);return Pk.create(this.tenantId,this.documentId,i.jwt,Xg,e,this.ordererUrl,this.logger)};try{return await n()}catch(r){if((r==null?void 0:r.statusCode)===401)return n(!0);throw r}}async refreshDiscovery(){return this.discoverP||(this.discoverP=gt.timedExecAsync(this.logger,{eventName:"refreshSessionDiscovery"},async()=>this.refreshDiscoveryCore())),this.discoverP}async refreshDiscoveryCore(){const e=await this.discoverFluidResolvedUrl();this._resolvedUrl=e,this.storageUrl=e.endpoints.storageUrl,this.ordererUrl=e.endpoints.ordererUrl,this.deltaStorageUrl=e.endpoints.deltaStorageUrl}shouldUpdateDiscoveredSessionInfo(){if(!this.driverPolicies.enableDiscovery)return!1;const n=Date.now()-this.lastDiscoveredAt>FMe;return n&&(this.lastDiscoveredAt=Date.now(),this.discoverP=void 0,this.refreshDiscovery().catch(()=>{this.lastDiscoveredAt=0})),n}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function Dj(t){const e=Object.keys(t.tree);for(const n of e){const r=t.tree[n];switch(r.type){case Ne.Tree:{t.tree[n]=Dj(r);break}case Ne.Blob:{r.content=typeof r.content=="string"?r.content:Hc(r.content,"utf8");break}case Ne.Handle:throw new Error("No handle should be present for first summary!!");default:throw new Error(`Unknown tree type ${r.type}`)}}return t}var LMe=function(e,n){if(n=n.split(":")[0],e=+e,!e)return!1;switch(n){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0},Ak={},BMe=Object.prototype.hasOwnProperty,jMe;function SD(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch{return null}}function xD(t){try{return encodeURIComponent(t)}catch{return null}}function qMe(t){for(var e=/([^=?#&]+)=?([^&]*)/g,n={},r;r=e.exec(t);){var i=SD(r[1]),s=SD(r[2]);i===null||s===null||i in n||(n[i]=s)}return n}function zMe(t,e){e=e||"";var n=[],r,i;typeof e!="string"&&(e="?");for(i in t)if(BMe.call(t,i)){if(r=t[i],!r&&(r===null||r===jMe||isNaN(r))&&(r=""),i=xD(i),r=xD(r),i===null||r===null)continue;n.push(i+"="+r)}return n.length?e+n.join("&"):""}Ak.stringify=zMe;Ak.parse=qMe;var Ij=LMe,u1=Ak,HMe=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,Mj=/[\n\r\t]/g,UMe=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Nj=/:\d+$/,VMe=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,WMe=/^[a-zA-Z]:/;function Ok(t){return(t||"").toString().replace(HMe,"")}var S2=[["#","hash"],["?","query"],function(e,n){return pa(n.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],wD={hash:1,query:1};function Fj(t){var e;typeof window<"u"?e=window:typeof hn<"u"?e=hn:typeof self<"u"?e=self:e={};var n=e.location||{};t=t||n;var r={},i=typeof t,s;if(t.protocol==="blob:")r=new Ra(unescape(t.pathname),{});else if(i==="string"){r=new Ra(t,{});for(s in wD)delete r[s]}else if(i==="object"){for(s in t)s in wD||(r[s]=t[s]);r.slashes===void 0&&(r.slashes=UMe.test(t.href))}return r}function pa(t){return t==="file:"||t==="ftp:"||t==="http:"||t==="https:"||t==="ws:"||t==="wss:"}function $j(t,e){t=Ok(t),t=t.replace(Mj,""),e=e||{};var n=VMe.exec(t),r=n[1]?n[1].toLowerCase():"",i=!!n[2],s=!!n[3],a=0,o;return i?s?(o=n[2]+n[3]+n[4],a=n[2].length+n[3].length):(o=n[2]+n[4],a=n[2].length):s?(o=n[3]+n[4],a=n[3].length):o=n[4],r==="file:"?a>=2&&(o=o.slice(2)):pa(r)?o=n[4]:r?i&&(o=o.slice(2)):a>=2&&pa(e.protocol)&&(o=n[4]),{protocol:r,slashes:i||pa(r),slashesCount:a,rest:o}}function GMe(t,e){if(t==="")return e;for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=n.length,i=n[r-1],s=!1,a=0;r--;)n[r]==="."?n.splice(r,1):n[r]===".."?(n.splice(r,1),a++):a&&(r===0&&(s=!0),n.splice(r,1),a--);return s&&n.unshift(""),(i==="."||i==="..")&&n.push(""),n.join("/")}function Ra(t,e,n){if(t=Ok(t),t=t.replace(Mj,""),!(this instanceof Ra))return new Ra(t,e,n);var r,i,s,a,o,l,c=S2.slice(),u=typeof e,d=this,h=0;for(u!=="object"&&u!=="string"&&(n=e,e=null),n&&typeof n!="function"&&(n=u1.parse),e=Fj(e),i=$j(t||"",e),r=!i.protocol&&!i.slashes,d.slashes=i.slashes||r&&e.slashes,d.protocol=i.protocol||e.protocol||"",t=i.rest,(i.protocol==="file:"&&(i.slashesCount!==2||WMe.test(t))||!i.slashes&&(i.protocol||i.slashesCount<2||!pa(d.protocol)))&&(c[3]=[/(.*)/,"pathname"]);h<c.length;h++){if(a=c[h],typeof a=="function"){t=a(t,d);continue}s=a[0],l=a[1],s!==s?d[l]=t:typeof s=="string"?(o=s==="@"?t.lastIndexOf(s):t.indexOf(s),~o&&(typeof a[2]=="number"?(d[l]=t.slice(0,o),t=t.slice(o+a[2])):(d[l]=t.slice(o),t=t.slice(0,o)))):(o=s.exec(t))&&(d[l]=o[1],t=t.slice(0,o.index)),d[l]=d[l]||r&&a[3]&&e[l]||"",a[4]&&(d[l]=d[l].toLowerCase())}n&&(d.query=n(d.query)),r&&e.slashes&&d.pathname.charAt(0)!=="/"&&(d.pathname!==""||e.pathname!=="")&&(d.pathname=GMe(d.pathname,e.pathname)),d.pathname.charAt(0)!=="/"&&pa(d.protocol)&&(d.pathname="/"+d.pathname),Ij(d.port,d.protocol)||(d.host=d.hostname,d.port=""),d.username=d.password="",d.auth&&(o=d.auth.indexOf(":"),~o?(d.username=d.auth.slice(0,o),d.username=encodeURIComponent(decodeURIComponent(d.username)),d.password=d.auth.slice(o+1),d.password=encodeURIComponent(decodeURIComponent(d.password))):d.username=encodeURIComponent(decodeURIComponent(d.auth)),d.auth=d.password?d.username+":"+d.password:d.username),d.origin=d.protocol!=="file:"&&pa(d.protocol)&&d.host?d.protocol+"//"+d.host:"null",d.href=d.toString()}function KMe(t,e,n){var r=this;switch(t){case"query":typeof e=="string"&&e.length&&(e=(n||u1.parse)(e)),r[t]=e;break;case"port":r[t]=e,Ij(e,r.protocol)?e&&(r.host=r.hostname+":"+e):(r.host=r.hostname,r[t]="");break;case"hostname":r[t]=e,r.port&&(e+=":"+r.port),r.host=e;break;case"host":r[t]=e,Nj.test(e)?(e=e.split(":"),r.port=e.pop(),r.hostname=e.join(":")):(r.hostname=e,r.port="");break;case"protocol":r.protocol=e.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(e){var i=t==="pathname"?"/":"#";r[t]=e.charAt(0)!==i?i+e:e}else r[t]=e;break;case"username":case"password":r[t]=encodeURIComponent(e);break;case"auth":var s=e.indexOf(":");~s?(r.username=e.slice(0,s),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=e.slice(s+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(e))}for(var a=0;a<S2.length;a++){var o=S2[a];o[4]&&(r[o[1]]=r[o[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin=r.protocol!=="file:"&&pa(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r}function YMe(t){(!t||typeof t!="function")&&(t=u1.stringify);var e,n=this,r=n.host,i=n.protocol;i&&i.charAt(i.length-1)!==":"&&(i+=":");var s=i+(n.protocol&&n.slashes||pa(n.protocol)?"//":"");return n.username?(s+=n.username,n.password&&(s+=":"+n.password),s+="@"):n.password?(s+=":"+n.password,s+="@"):n.protocol!=="file:"&&pa(n.protocol)&&!r&&n.pathname!=="/"&&(s+="@"),(r[r.length-1]===":"||Nj.test(n.hostname)&&!n.port)&&(r+=":"),s+=r+n.pathname,e=typeof n.query=="object"?t(n.query):n.query,e&&(s+=e.charAt(0)!=="?"?"?"+e:e),n.hash&&(s+=n.hash),s}Ra.prototype={set:KMe,toString:YMe};Ra.extractProtocol=$j;Ra.location=Fj;Ra.trimLeft=Ok;Ra.qs=u1;var yu=Ra;/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const Qg=t=>new yu(t,!0),CD=(t,e)=>t.split("/").slice(0,-1).concat([e]).join("/"),ED=(t,e)=>{if(e){const n=new yu(e.ordererUrl),r=new yu(t.endpoints.deltaStorageUrl);r.set("host",n.host);const i=new yu(e.historianUrl),s=new yu(t.endpoints.storageUrl);s.set("host",i.host);const a=Qg(t.url);return{endpoints:{deltaStorageUrl:r.toString(),ordererUrl:e.ordererUrl,storageUrl:s.toString()},id:t.id,tokens:t.tokens,type:t.type,url:new yu(`fluid://${n.host}${a.pathname}`).toString()}}else return t};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const JMe={enablePrefetch:!0,maxConcurrentStorageRequests:100,maxConcurrentOrdererRequests:100,aggregateBlobsSmallerThanBytes:void 0,enableDiscovery:!1,enableWholeSummaryUpload:!1,enableRestLess:!0};class XMe{constructor(e,n={}){this.tokenProvider=e,this.protocolName="fluid:",this.blobCache=new Fd,this.snapshotTreeCache=new Fd,this.driverPolicies=Object.assign(Object.assign({},JMe),n)}async createContainer(e,n,r,i){if(Ea(n),e===void 0)throw new Error("Empty file summary creation isn't supported in this driver.");N(!!n.endpoints.ordererUrl,178);let s=Qg(n.url);if(!s.pathname)throw new Error("Parsed url should contain tenant and doc Id!!");const[,a]=s.pathname.split("/"),o=e.tree[".protocol"],l=e.tree[".app"];if(!(o&&l))throw new Error("Protocol and App Summary required in the full summary");const c=W5e(o),u=G5e(o),d=ot.create(r,"RouterliciousDriver"),h=new hv(this.driverPolicies.maxConcurrentOrdererRequests),f=await(await Rp.load(a,void 0,this.tokenProvider,d,h,this.driverPolicies.enableRestLess,n.endpoints.ordererUrl)).post(`/documents/${a}`,{summary:Dj(l),sequenceNumber:c.sequenceNumber,values:u,enableDiscovery:this.driverPolicies.enableDiscovery,generateToken:this.tokenProvider.documentPostCreateCallback!==void 0});let m,g,v;if(typeof f=="string"?m=f:(m=f.id,g=f.token,v=this.driverPolicies.enableDiscovery?f.session:void 0),s=Qg(n.url),g&&this.tokenProvider.documentPostCreateCallback!==void 0)try{await this.tokenProvider.documentPostCreateCallback(m,g)}catch(C){throw new QMe(C)}s.set("pathname",CD(s.pathname,m));const y=n.endpoints.deltaStorageUrl;if(!y)throw new Error(`All endpoints urls must be provided. [deltaStorageUrl:${y}]`);const b=new URL(y);return b.pathname=CD(b.pathname,m),this.createDocumentService(Object.assign(Object.assign({},n),{url:s.toString(),id:m,endpoints:Object.assign(Object.assign({},n.endpoints),{deltaStorageUrl:b.toString()})}),r,i,v)}async createDocumentService(e,n,r,i){Ea(e);const s=Qg(e.url),[,a,o]=s.pathname.split("/");if(!o||!a)throw new Error(`Couldn't parse documentId and/or tenantId. [documentId:${o}][tenantId:${a}]`);const l=ot.create(n,"RouterliciousDriver",{all:{driverVersion:c1}}),c=async()=>{if(!this.driverPolicies.enableDiscovery)return e;const f=new hv(this.driverPolicies.maxConcurrentOrdererRequests),g=await(await Rp.load(a,o,this.tokenProvider,l,f,this.driverPolicies.enableRestLess,e.endpoints.ordererUrl)).get(`/documents/${a}/session/${o}`);return ED(e,g)},u=i!==void 0?ED(e,i):await c(),d=u.endpoints.storageUrl,h=u.endpoints.ordererUrl,p=u.endpoints.deltaStorageUrl;if(!h||!p)throw new Error(`All endpoints urls must be provided. [ordererUrl:${h}][deltaStorageUrl:${p}]`);return new $Me(u,h,p,d,l,this.tokenProvider,a,o,this.driverPolicies,this.blobCache,this.snapshotTreeCache,c)}}class QMe extends Error{constructor(e){super(e.message),this.innerError=e,this.name="DocumentPostCreateError"}get stack(){return this.innerError.stack}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const ZMe=7070,e6e="http://localhost";class t6e{constructor(e=ZMe,n=e6e){this.tinyliciousEndpoint=`${n}:${e}`,this.fluidProtocolEndpoint=this.tinyliciousEndpoint.replace(/(^\w+:|^)\/\//,"fluid://")}async resolve(e){var n;if(e.headers&&e.headers[Id.createNew]===!0){const d=(n=e.url)!==null&&n!==void 0?n:"new";return{endpoints:{deltaStorageUrl:`${this.tinyliciousEndpoint}/deltas/tinylicious/${d}`,ordererUrl:this.tinyliciousEndpoint,storageUrl:`${this.tinyliciousEndpoint}/repos/tinylicious`},id:e.url,tokens:{},type:"fluid",url:`${this.fluidProtocolEndpoint}/tinylicious/${d}`}}const r=e.url.replace(`${this.tinyliciousEndpoint}/`,""),i=r.split("/")[0],s=encodeURIComponent(i),a=r.slice(i.length),o=`${this.fluidProtocolEndpoint}/tinylicious/${s}${a}`,l=`${this.tinyliciousEndpoint}/deltas/tinylicious/${s}`,c=`${this.tinyliciousEndpoint}/repos/tinylicious`;return{endpoints:{deltaStorageUrl:l,ordererUrl:this.tinyliciousEndpoint,storageUrl:c},id:i,tokens:{},type:"fluid",url:o}}async getAbsoluteUrl(e,n){return`${decodeURIComponent(e.url.replace(`${this.fluidProtocolEndpoint}/tinylicious/`,""))}/${n}`}}const n6e=t=>({url:t??"",headers:{[Id.createNew]:!0}});/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class r6e{async fetchOrdererToken(e,n){return{fromCache:!0,jwt:this.getSignedToken(e,n)}}async fetchStorageToken(e,n){return{fromCache:!0,jwt:this.getSignedToken(e,n)}}getSignedToken(e,n,r=60*60,i="1.0"){const s=Math.round(new Date().getTime()/1e3),a={id:Cn(),name:PDe()},o={documentId:n??"",scopes:[Vo.DocRead,Vo.DocWrite,Vo.SummaryWrite],tenantId:e,user:a,iat:s,exp:s+r,ver:i},l={utf8:"12345"};return TDe.jws.JWS.sign(null,JSON.stringify({alg:"HS256",typ:"JWT"}),o,l)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function fm(t,e){if(t==="")return e===void 0?"":e.absolutePath;{let n=t.startsWith("/")?t.slice(1):t;return n=n.endsWith("/")?n.slice(0,-1):n,e===void 0?`/${n}`:`${e.absolutePath==="/"?"":e.absolutePath}/${n}`}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function vv(t){if(t!==null&&typeof t=="object"&&t.errorFromRequestFluidObject===!0){const r=t;return{mimeType:"text/plain",status:r.code,value:r.message,get stack(){return r.stack}}}const n=Qb();return{mimeType:"text/plain",status:500,value:`${t}`,get stack(){var r;return(r=t==null?void 0:t.stack)!==null&&r!==void 0?r:n.stack}}}function d1(t,e){const n=t.value,r=Qb();return{errorFromRequestFluidObject:!0,message:n,name:"Error",code:t.status,get stack(){var s;return(s=t.stack)!==null&&s!==void 0?s:r.stack}}}async function kp(t,e){const n=typeof e=="string"?{url:e}:e,r=await t.request(n);if(r.status!==200||r.mimeType!=="fluid/object")throw d1(r);return N(r.value,410),r.value}const Ts=t=>Lj(404,"not found",t);function Lj(t,e,n){var r;N(t!==200,411);const i=(r=n.url)===null||r===void 0?void 0:r.split("?")[0],s=Qb();return{mimeType:"text/plain",status:t,value:i===void 0?e:`${e}: ${i}`,get stack(){return s.stack}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class i6e{constructor(e,n){this.storage=e,this.path=n,N(!n.endsWith("/"),412)}async readBlob(e){return this.storage.readBlob(`${this.path}/${e}`)}async contains(e){return this.storage.contains(`${this.path}/${e}`)}async list(e){return this.storage.list(`${this.path}/${e}`)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function s6e(t){let e=t;return e.startsWith("/")&&(e=e.substr(1)),e.endsWith("/")&&(e=e.substr(0,e.length-1)),e.length>0?e.split("/"):[]}class ma{constructor(e){this.request=e;const n=this.request.url.indexOf("?");n>=0?this.query=this.request.url.substring(n):this.query=""}static getPathParts(e){const n=e.indexOf("?");return e.substring(0,n<0?e.length:n).split("/").reduce((r,i)=>(i!==void 0&&i.length>0&&r.push(decodeURIComponent(i)),r),[])}static create(e){return e instanceof ma?e:new ma(e)}get url(){return this.request.url}get headers(){return this.request.headers}get pathParts(){return this.requestPathParts===void 0&&(this.requestPathParts=ma.getPathParts(this.url)),this.requestPathParts}isLeaf(e){return this.query===""&&this.pathParts.length===e}createSubRequest(e){const n=this.pathParts.length;if(e<0||e>n)throw new Error("incorrect sub-request");if(e===n&&this.url.includes("?"))return{url:`/${this.query}`,headers:this.headers};const r=`/${this.pathParts.slice(e).join("/")}`;return{url:this.query===""?r:`${r}/${this.query}`,headers:this.headers}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class a6e{get IRuntimeFactory(){return this}async instantiateRuntime(e,n){const r=n===void 0?e.existing===!0:n,i=await this.preInitialize(e,r);return r?await this.instantiateFromExisting(i):await this.instantiateFirstTime(i),await this.hasInitialized(i),i}async instantiateFirstTime(e){}async instantiateFromExisting(e){}async hasInitialized(e){}}var Je={},h1={};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */Object.defineProperty(h1,"__esModule",{value:!0});h1.IFluidDataStoreFactory=void 0;h1.IFluidDataStoreFactory="IFluidDataStoreFactory";var f1={};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */Object.defineProperty(f1,"__esModule",{value:!0});f1.IFluidDataStoreRegistry=void 0;f1.IFluidDataStoreRegistry="IFluidDataStoreRegistry";var Bj={};(function(t){/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.VisibilityState=t.FlushMode=void 0,function(e){e[e.Immediate=0]="Immediate",e[e.TurnBased=1]="TurnBased"}(t.FlushMode||(t.FlushMode={})),t.VisibilityState={NotVisible:"NotVisible",LocallyVisible:"LocallyVisible",GloballyVisible:"GloballyVisible"}})(Bj);var p1={};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */Object.defineProperty(p1,"__esModule",{value:!0});p1.gcBlobKey=void 0;p1.gcBlobKey="gc";var jj={};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */Object.defineProperty(jj,"__esModule",{value:!0});var qj={};(function(t){/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.totalBlobSizePropertyName=t.blobCountPropertyName=t.channelsTreeName=t.CreateSummarizerNodeSource=void 0,function(e){e[e.FromSummary=0]="FromSummary",e[e.FromAttach=1]="FromAttach",e[e.Local=2]="Local"}(t.CreateSummarizerNodeSource||(t.CreateSummarizerNodeSource={})),t.channelsTreeName=".channels",t.blobCountPropertyName="BlobCount",t.totalBlobSizePropertyName="TotalBlobSize"})(qj);(function(t){/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var e=hn&&hn.__createBinding||(Object.create?function(r,i,s,a){a===void 0&&(a=s),Object.defineProperty(r,a,{enumerable:!0,get:function(){return i[s]}})}:function(r,i,s,a){a===void 0&&(a=s),r[a]=i[s]}),n=hn&&hn.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(h1,t),n(f1,t),n(Bj,t),n(p1,t),n(jj,t),n(qj,t)})(Je);/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function ol(...t){const e={treeNodeCount:0,blobNodeCount:0,handleNodeCount:0,totalBlobSize:0,unreferencedBlobSize:0};for(const n of t)e.treeNodeCount+=n.treeNodeCount,e.blobNodeCount+=n.blobNodeCount,e.handleNodeCount+=n.handleNodeCount,e.totalBlobSize+=n.totalBlobSize,e.unreferencedBlobSize+=n.unreferencedBlobSize;return e}function o6e(t){let e=t.length;for(let n=t.length-1;n>=0;n--){const r=t.charCodeAt(n);r>127&&r<=2047?e++:r>2047&&r<=65535&&(e+=2),r>=56320&&r<=57343&&n--}return e}function zj(t){return typeof t=="string"?o6e(t):t.byteLength}function Hj(t,e){switch(t.type){case Ne.Tree:{e.treeNodeCount++;for(const n of Object.values(t.tree))Hj(n,e);return}case Ne.Handle:{e.handleNodeCount++;return}case Ne.Blob:{e.blobNodeCount++,e.totalBlobSize+=zj(t.content);return}default:return}}function Uj(t){const e=ol();return Hj(t,e),e}function ia(t,e,n){const r={type:Ne.Blob,content:n};t.summary.tree[e]=r,t.stats.blobNodeCount++,t.stats.totalBlobSize+=zj(n)}function l6e(t,e,n){t.summary.tree[e]=n.summary,t.stats=ol(t.stats,n.stats)}function c6e(t,e,n){t.summary.tree[e]=n.summary,t.stats=ol(t.stats,n.stats)}class mi{constructor(){this.attachmentCounter=0,this.summaryTree={},this.summaryStats=ol(),this.summaryStats.treeNodeCount++}get summary(){return{type:Ne.Tree,tree:Object.assign({},this.summaryTree)}}get stats(){return Object.assign({},this.summaryStats)}addBlob(e,n){ia({summary:{type:Ne.Tree,tree:this.summaryTree},stats:this.summaryStats},e,n)}addHandle(e,n,r){this.summaryTree[e]={type:Ne.Handle,handleType:n,handle:r},this.summaryStats.handleNodeCount++}addWithStats(e,n){this.summaryTree[e]=n.summary,this.summaryStats=ol(this.summaryStats,n.stats)}addAttachment(e){this.summaryTree[this.attachmentCounter++]={id:e,type:Ne.Attachment}}getSummaryTree(){return{summary:this.summary,stats:this.stats}}}function u6e(t,e=!1){const n=new mi;for(const i of t.entries)switch(i.type){case Pr.Blob:{const s=i.value;let a;s.encoding==="base64"?a=qr.from(s.contents,"base64"):a=s.contents,n.addBlob(i.path,a);break}case Pr.Tree:{const s=Dk(i.value,e);n.addWithStats(i.path,s);break}case Pr.Attachment:{const s=i.value.id;n.addAttachment(s);break}default:throw new Error("Unexpected TreeEntry type")}const r=n.getSummaryTree();return r.summary.unreferenced=t.unreferenced,r}function Dk(t,e=!1){if(t.id&&!e){const n=ol();return n.handleNodeCount++,{summary:{handle:t.id,handleType:Ne.Tree,type:Ne.Handle},stats:n}}else return u6e(t,e)}function Ik(t){const e=new mi;for(const[r,i]of Object.entries(t.blobs)){let s;if(t.blobsContents!==void 0){const a=t.blobsContents[i];a!==void 0&&(s=al(a,"utf-8"))}else t.blobs[i]!==void 0&&(s=N_e(t.blobs[i]));s!==void 0&&e.addBlob(r,s)}for(const[r,i]of Object.entries(t.trees)){const s=Ik(i);e.addWithStats(r,s)}const n=e.getSummaryTree();return n.summary.unreferenced=t.unreferenced,n}function Mk(t){const e=[];for(const[n,r]of Object.entries(t.tree))switch(r.type){case Ne.Blob:{let i,s="utf-8";typeof r.content=="string"?i=r.content:(i=Hc(r.content,"base64"),s="base64"),e.push(new xB(n,i,s));break}case Ne.Tree:{e.push(new b5e(n,Mk(r)));break}case Ne.Attachment:{e.push(new S5e(n,r.id));break}case Ne.Handle:throw new Error("Should not have Handle type in summary tree");default:pi(r,"Unexpected summary tree type")}return{entries:e,unreferenced:t.unreferenced}}class d6e{constructor(){this.telemetry=new Map}set(e,n,r){this.telemetry.set(`${e}${n}`,r)}get(e,n){return this.telemetry.get(`${e}${n}`)}serialize(){const e={};return this.telemetry.forEach((n,r)=>{e[r]=n}),JSON.stringify(e)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const _f="_baseSummary",Vj="_outstandingOps",TD=100;class Tr{constructor(e){this.path=e}static create(e){return new Tr(encodeURIComponent(e))}static createAndConcat(e){var n;let r=Tr.create((n=e[0])!==null&&n!==void 0?n:"");for(let i=1;i<e.length;i++)r=r.concat(Tr.create(e[i]));return r}toString(){return this.path}concat(e){return new Tr(`${this.path}/${e.path}`)}}class Ko{constructor(e){this.summary=e}static createForRoot(e){return new Ko({referenceSequenceNumber:e,basePath:void 0,localPath:Tr.create("")})}get referenceSequenceNumber(){return this.summary.referenceSequenceNumber}get basePath(){return this.summary.basePath}get localPath(){return this.summary.localPath}get additionalPath(){return this.summary.additionalPath}set additionalPath(e){this.summary.additionalPath=e}get fullPath(){var e,n;return(n=(e=this.basePath)===null||e===void 0?void 0:e.concat(this.localPath))!==null&&n!==void 0?n:this.localPath}get fullPathForChildren(){return this.additionalPath!==void 0?this.fullPath.concat(this.additionalPath):this.fullPath}createForChild(e){return new Ko({referenceSequenceNumber:this.referenceSequenceNumber,basePath:this.fullPathForChildren,localPath:Tr.create(e)})}}function RD(t,e){let n=t;const r=[],i=[];for(let s=0;;s++){s>TD&&e.sendTelemetryEvent({eventName:"DecodeSummaryMaxDepth",maxDecodeDepth:TD});const a=n.blobs[Vj],o=n.trees[_f];if(a===void 0&&o===void 0)return{baseSummary:n,pathParts:r,async getOutstandingOps(l){let c=[];for(const u of i){const d=await l(u);if(c.length>0&&d.length>0){const h=c[c.length-1].sequenceNumber,p=d[0].sequenceNumber;if(p<=h)for(e.sendTelemetryEvent({eventName:"DuplicateOutstandingOps",message:`newEarliestSeq <= latestSeq in decodeSummary: ${p} <= ${h}`});d.length>0&&d[0].sequenceNumber<=h;)d.shift()}c=c.concat(d)}return c}};N(!!a,431),N(o!==void 0,432),n=o,r.push(_f),i.unshift(a)}}function h6e(t,e){let n=Tr.create(_f);const r=new mi;if(r.addBlob(Vj,JSON.stringify(e)),t.fromSummary){const s=t.summaryNode;s.additionalPath!==void 0&&(n=n.concat(s.additionalPath)),r.addHandle(_f,Ne.Tree,s.fullPath.path)}else r.addWithStats(_f,t.initialSummary);const i=r.getSummaryTree();return Object.assign(Object.assign({},i),{additionalPath:n})}function Tx(t){const e=t.trees[Je.channelsTreeName];return e!==void 0?{childrenTree:e,childrenPathPart:Je.channelsTreeName}:{childrenTree:t,childrenPathPart:void 0}}function f6e(t){const e=t.tree[Je.channelsTreeName];return e!==void 0?{childrenTree:e,childrenPathPart:Je.channelsTreeName}:{childrenTree:t,childrenPathPart:void 0}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class Nk{constructor(e,n,r,i,s,a,o){var l;this.defaultLogger=e,this.summarizeInternalFn=n,this._changeSequenceNumber=i,this._latestSummary=s,this.initialSummary=a,this.wipSummaryLogger=o,this.children=new Map,this.pendingSummaries=new Map,this.outstandingOps=[],this.wipSkipRecursion=!1,this.canReuseHandle=(l=r.canReuseHandle)!==null&&l!==void 0?l:!0,this.throwOnError=!0,this.trackingSequenceNumber=this._changeSequenceNumber}get referenceSequenceNumber(){var e,n;return(n=(e=this._latestSummary)===null||e===void 0?void 0:e.referenceSequenceNumber)!==null&&n!==void 0?n:0}startSummary(e,n){N(this.wipSummaryLogger===void 0,415),N(this.wipReferenceSequenceNumber===void 0,416),this.wipSummaryLogger=n;for(const r of this.children.values())r.startSummary(e,this.wipSummaryLogger);this.wipReferenceSequenceNumber=e}async summarize(e,n=!0,r){if(N(this.isTrackingInProgress(),417),N(this.wipSummaryLogger!==void 0,418),this.canReuseHandle&&!e&&!this.hasChanged()){const i=this._latestSummary;if(i!==void 0){this.wipLocalPaths={localPath:i.localPath,additionalPath:i.additionalPath},this.wipSkipRecursion=!0;const s=ol();return s.handleNodeCount++,{summary:{type:Ne.Handle,handle:i.fullPath.path,handleType:Ne.Tree},stats:s}}}try{const i=await this.summarizeInternalFn(e,!0,r);return this.wipLocalPaths={localPath:Tr.create(i.id)},i.pathPartsForChildren!==void 0&&(this.wipLocalPaths.additionalPath=Tr.createAndConcat(i.pathPartsForChildren)),{summary:i.summary,stats:i.stats}}catch(i){if(this.throwOnError||this.trackingSequenceNumber<this._changeSequenceNumber)throw i;const s=this._latestSummary,a=this.initialSummary;let o,l;if(s!==void 0)o={fromSummary:!0,summaryNode:s},l=s.localPath;else if((a==null?void 0:a.summary)!==void 0)o={fromSummary:!1,initialSummary:a.summary},l=Tr.create(a.id);else throw i;this.wipSummaryLogger.sendErrorEvent({eventName:"SummarizingWithBasePlusOps"},i);const c=h6e(o,this.outstandingOps);return this.wipLocalPaths={localPath:l,additionalPath:c.additionalPath},this.wipSkipRecursion=!0,{summary:c.summary,stats:c.stats}}}completeSummary(e){this.completeSummaryCore(e,void 0,!1)}completeSummaryCore(e,n,r){N(this.wipSummaryLogger!==void 0,419),N(this.wipReferenceSequenceNumber!==void 0,420);let i=this.wipLocalPaths;if(r){const o=this._latestSummary;if(o!==void 0)i={localPath:o.localPath,additionalPath:o.additionalPath};else{this.clearSummary();return}}N(!!i,421);const s=new Ko(Object.assign(Object.assign({},i),{referenceSequenceNumber:this.wipReferenceSequenceNumber,basePath:n})),a=s.fullPathForChildren;for(const o of this.children.values())o.completeSummaryCore(e,a,this.wipSkipRecursion||r);this.pendingSummaries.set(e,s),this.clearSummary()}clearSummary(){this.wipReferenceSequenceNumber=void 0,this.wipLocalPaths=void 0,this.wipSkipRecursion=!1,this.wipSummaryLogger=void 0;for(const e of this.children.values())e.clearSummary()}async refreshLatestSummary(e,n,r,i,s){if(e!==void 0){const o=this.pendingSummaries.get(e);if(o!==void 0)return this.refreshLatestSummaryFromPending(e,o.referenceSequenceNumber),{latestSummaryUpdated:!0,wasSummaryTracked:!0}}if(this.referenceSequenceNumber>=n)return{latestSummaryUpdated:!1};const a=await r();return await this.refreshLatestSummaryFromSnapshot(n,a,void 0,Tr.create(""),s,i),{latestSummaryUpdated:!0,wasSummaryTracked:!1,snapshot:a}}refreshLatestSummaryFromPending(e,n){const r=this.pendingSummaries.get(e);if(r===void 0){N(this._latestSummary===void 0,422);return}else N(n===r.referenceSequenceNumber,423),this.pendingSummaries.delete(e);this.refreshLatestSummaryCore(n),this._latestSummary=r;for(const i of this.children.values())i.refreshLatestSummaryFromPending(e,n)}async refreshLatestSummaryFromSnapshot(e,n,r,i,s,a){if(this.referenceSequenceNumber>=e)return;this.refreshLatestSummaryCore(e);const{baseSummary:o,pathParts:l}=RD(n,s);this._latestSummary=new Ko({referenceSequenceNumber:e,basePath:r,localPath:i});const{childrenTree:c,childrenPathPart:u}=Tx(o);u!==void 0&&l.push(u),l.length>0&&(this._latestSummary.additionalPath=Tr.createAndConcat(l));const d=this._latestSummary.fullPathForChildren;await Promise.all(Array.from(this.children).filter(([h])=>c.trees[h]!==void 0).map(async([h,p])=>p.refreshLatestSummaryFromSnapshot(e,c.trees[h],d,Tr.create(h),s,a)))}refreshLatestSummaryCore(e){for(const[n,r]of this.pendingSummaries)r.referenceSequenceNumber<e&&this.pendingSummaries.delete(n);for(;this.outstandingOps.length>0&&this.outstandingOps[0].sequenceNumber<=e;)this.outstandingOps.shift()}loadBaseSummaryWithoutDifferential(e){const{childrenPathPart:n}=Tx(e);n!==void 0&&this._latestSummary!==void 0&&(this._latestSummary.additionalPath=Tr.create(n))}async loadBaseSummary(e,n){const r=RD(e,this.defaultLogger),i=await r.getOutstandingOps(n),{childrenPathPart:s}=Tx(r.baseSummary);if(s!==void 0&&r.pathParts.push(s),r.pathParts.length>0&&this._latestSummary!==void 0&&(this._latestSummary.additionalPath=Tr.createAndConcat(r.pathParts)),i.length>0){const a=i[i.length-1].sequenceNumber;N(a<=this.trackingSequenceNumber,425)}return{baseSummary:r.baseSummary,outstandingOps:i}}recordChange(e){const n=this.outstandingOps[this.outstandingOps.length-1];n!==void 0&&N(n.sequenceNumber<e.sequenceNumber,426),this.invalidate(e.sequenceNumber),this.trackingSequenceNumber=e.sequenceNumber,this.outstandingOps.push(e)}invalidate(e){e>this._changeSequenceNumber&&(this._changeSequenceNumber=e)}hasChanged(){return this._changeSequenceNumber>this.referenceSequenceNumber}get latestSummary(){return this._latestSummary}createChild(e,n,r,i={}){N(!this.children.has(n),427);const s=this.getCreateDetailsForChild(n,r),a=new Nk(this.defaultLogger,e,i,s.changeSequenceNumber,s.latestSummary,s.initialSummary,this.wipSummaryLogger);return this.maybeUpdateChildState(a),this.children.set(n,a),a}getChild(e){return this.children.get(e)}getCreateDetailsForChild(e,n){var r;let i,s,a;const o=this._latestSummary;switch(n.type){case Je.CreateSummarizerNodeSource.FromAttach:{if(o!==void 0&&n.sequenceNumber<=o.referenceSequenceNumber)s=o.createForChild(e);else{const l=Dk(n.snapshot);i={sequenceNumber:n.sequenceNumber,id:e,summary:l}}a=n.sequenceNumber;break}case Je.CreateSummarizerNodeSource.FromSummary:this.initialSummary===void 0&&N(!!o,428);case Je.CreateSummarizerNodeSource.Local:{const l=this.initialSummary;if(l!==void 0){let c;if(l.summary!==void 0){const{childrenTree:d}=f6e(l.summary.summary);N(d.type===Ne.Tree,470),c=d.tree[e]}n.type===Je.CreateSummarizerNodeSource.FromSummary&&N(!!c,429);let u;c!==void 0&&(N(c.type===Ne.Tree,430),u={summary:c,stats:Uj(c)}),i={sequenceNumber:l.sequenceNumber,id:e,summary:u}}s=o==null?void 0:o.createForChild(e),a=(r=o==null?void 0:o.referenceSequenceNumber)!==null&&r!==void 0?r:-1;break}default:{const l=n.type;pi(n,`Unexpected CreateSummarizerNodeSource: ${l}`)}}return{initialSummary:i,latestSummary:s,changeSequenceNumber:a}}maybeUpdateChildState(e){if(this.isTrackingInProgress()&&(e.wipReferenceSequenceNumber=this.wipReferenceSequenceNumber),e._latestSummary!==void 0)for(const[n,r]of this.pendingSummaries.entries()){const i=new Ko({referenceSequenceNumber:r.referenceSequenceNumber,basePath:e._latestSummary.basePath,localPath:e._latestSummary.localPath});e.addPendingSummary(n,i)}}addPendingSummary(e,n){this.pendingSummaries.set(e,n)}isTrackingInProgress(){return this.wipReferenceSequenceNumber!==void 0}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function Rx(t,e){const n=new Set,r=[...e];for(const a of r){if(n.has(a))continue;n.add(a);const o=t[a];o!==void 0&&r.push(...o)}const i=[],s=[];for(const a of Object.keys(t))n.has(a)?i.push(a):s.push(a);return{referencedNodeIds:i,deletedNodeIds:s}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function p6e(t){return t.replace(/^\/+|\/+$/g,"")}function m6e(t){return t.replace(/^\/+/g,"")}function g6e(t){return t.replace(/\/+$/g,"")}function Af(t){const e={};for(const[n,r]of Object.entries(t.gcNodes))e[n]=Array.from(r);return{gcNodes:e}}function Wj(t){const e=new Map;if(t.gcData===void 0)return e;const n=t.gcData.gcNodes;delete n["/"];for(const[i,s]of Object.entries(n)){N(i.startsWith("/"),686);const a=i.split("/")[1];let o=i.slice(a.length+1);o===""&&(o="/");let l=e.get(a);l===void 0&&(l={gcData:{gcNodes:{}},usedRoutes:[]}),N(l.gcData!==void 0,687),l.gcData.gcNodes[o]=[...new Set(s)],e.set(a,l)}if(t.usedRoutes===void 0)return e;const r=t.usedRoutes.filter(i=>i!==""&&i!=="/");for(const i of r){N(i.startsWith("/"),688);const s=i.split("/")[1],a=i.slice(s.length+1),o=e.get(s);N((o==null?void 0:o.usedRoutes)!==void 0,689),o.usedRoutes.push(a),e.set(s,o)}return e}function Gj(t){const e=t.filter(r=>r!==""&&r!=="/"),n=new Map;for(const r of e){N(r.startsWith("/"),408);const i=r.split("/")[1],s=r.slice(i.length+1),a=n.get(i);a!==void 0?a.push(s):n.set(i,[s])}return n}function v6e(t,e){const n=Object.entries(t);for(const[r,i]of n){const s=new Set(i);s.delete(e),t[r]=[...s]}}function y6e(t,e){var n;const r={};for(const[i,s]of Object.entries(t.gcNodes))r[i]={outboundRoutes:Array.from(s.outboundRoutes),unreferencedTimestampMs:s.unreferencedTimestampMs};for(const[i,s]of Object.entries(e.gcNodes)){let a=r[i];a===void 0?a={outboundRoutes:Array.from(s.outboundRoutes),unreferencedTimestampMs:s.unreferencedTimestampMs}:(s.unreferencedTimestampMs!==void 0&&a.unreferencedTimestampMs!==void 0&&N(s.unreferencedTimestampMs===a.unreferencedTimestampMs,690),a={outboundRoutes:[...new Set([...s.outboundRoutes,...a.outboundRoutes])],unreferencedTimestampMs:(n=s.unreferencedTimestampMs)!==null&&n!==void 0?n:a.unreferencedTimestampMs}),r[i]=a}return{gcNodes:r}}function b6e(t,e){const n=Af(t);for(const[r,i]of Object.entries(e.gcNodes))if(n.gcNodes[r]===void 0)n.gcNodes[r]=Array.from(i);else{const s=[...i,...n.gcNodes[r]];n.gcNodes[r]=[...new Set(s)]}return n}class Fk{constructor(){this.gcNodesSet={}}get gcNodes(){const e={};for(const[n,r]of Object.entries(this.gcNodesSet))e[n]=[...r];return e}addNode(e,n){this.gcNodesSet[e]=new Set(n)}prefixAndAddNodes(e,n){for(const[r,i]of Object.entries(n)){let s=m6e(r);s=`/${e}/${s}`,s=g6e(s),this.gcNodesSet[s]=new Set(i)}}addNodes(e){for(const[n,r]of Object.entries(e))this.gcNodesSet[n]=new Set(r)}addRouteToAllNodes(e){for(const n of Object.values(this.gcNodesSet))n.add(e)}getGCData(){return{gcNodes:this.gcNodes}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class S6e extends Ko{constructor(e,n){super(n),this.serializedUsedRoutes=e}}class $k extends Nk{constructor(e,n,r,i,s,a,o,l,c){super(e,async(u,d,h)=>n(u,!0,h),r,i,s,a,o),this.summarizeFn=n,this.getGCDataFn=l,this.baseGCDetailsLoaded=!1,this.usedRoutes=[""],this.gcDisabled=r.gcDisabled===!0,this.baseGCDetailsP=new Qa(async()=>{var u;return(u=await(c==null?void 0:c()))!==null&&u!==void 0?u:{usedRoutes:[]}})}getGCSummaryDetails(){return this.getBaseGCDetails()}getBaseGCDetails(){return{gcData:this.gcData,usedRoutes:this.usedRoutes,unrefTimestamp:this.unreferencedTimestampMs}}async loadBaseGCDetails(){var e;const n=await this.baseGCDetailsP;this.baseGCDetailsLoaded||(this.baseGCDetailsLoaded=!0,n.gcData!==void 0&&(this.gcData=Af(n.gcData)),this.referenceUsedRoutes=(e=n.usedRoutes)===null||e===void 0?void 0:e.sort(),this.unreferencedTimestampMs=n.unrefTimestamp)}async summarize(e,n=!0,r){return!this.gcDisabled&&this.isTrackingInProgress()&&N(this.wipSerializedUsedRoutes!==void 0,433),n?super.summarize(e,!0,r):this.summarizeFn(e,n,r)}async getGCData(e=!1){if(N(!this.gcDisabled,434),N(this.getGCDataFn!==void 0,435),await this.loadBaseGCDetails(),!e&&!this.hasDataChanged()&&this.gcData!==void 0)return Af(this.gcData);const n=await this.getGCDataFn(e);return this.gcData=Af(n),n}startSummary(e,n){this.gcDisabled||N(this.wipSerializedUsedRoutes===void 0,436),super.startSummary(e,n)}completeSummaryCore(e,n,r){let i;if(this.gcDisabled||(i=this.wipSerializedUsedRoutes,N(i!==void 0,437)),super.completeSummaryCore(e,n,r),!this.gcDisabled){const s=this.pendingSummaries.get(e);if(s!==void 0){const a=new S6e(i,s);this.pendingSummaries.set(e,a)}}}clearSummary(){this.wipSerializedUsedRoutes=void 0,super.clearSummary()}refreshLatestSummaryFromPending(e,n){if(!this.gcDisabled){const r=this.pendingSummaries.get(e);r!==void 0&&(this.referenceUsedRoutes=JSON.parse(r.serializedUsedRoutes))}return super.refreshLatestSummaryFromPending(e,n)}async refreshLatestSummaryFromSnapshot(e,n,r,i,s,a){if(!this.gcDisabled){const o=n.blobs[Je.gcBlobKey];if(o!==void 0){const l=await a(o);if(this.referenceSequenceNumber>=e)return;this.referenceUsedRoutes=l.usedRoutes}}return super.refreshLatestSummaryFromSnapshot(e,n,r,i,s,a)}createChild(e,n,r,i={},s,a){var o;N(!this.children.has(n),438);const l=this.getCreateDetailsForChild(n,r),c=new $k(this.defaultLogger,e,Object.assign(Object.assign({},i),{gcDisabled:(o=i.gcDisabled)!==null&&o!==void 0?o:this.gcDisabled}),l.changeSequenceNumber,l.latestSummary,l.initialSummary,this.wipSummaryLogger,s,a);return this.maybeUpdateChildState(c),this.children.set(n,c),c}deleteChild(e){this.children.delete(e)}getChild(e){return this.children.get(e)}isReferenced(){return this.usedRoutes.includes("")||this.usedRoutes.includes("/")}updateUsedRoutes(e,n){if(this.usedRoutes=e.sort(),!this.gcDisabled&&this.isTrackingInProgress()&&(this.wipSerializedUsedRoutes=JSON.stringify(this.usedRoutes)),this.isReferenced()){this.unreferencedTimestampMs=void 0;return}this.unreferencedTimestampMs===void 0&&(this.unreferencedTimestampMs=n)}hasChanged(){return this.hasDataChanged()||this.hasUsedStateChanged()}hasDataChanged(){return super.hasChanged()}hasUsedStateChanged(){return this.gcDisabled?!1:this.referenceUsedRoutes===void 0||JSON.stringify(this.usedRoutes)!==JSON.stringify(this.referenceUsedRoutes)}}const x6e=(t,e,n,r,i={},s,a)=>new $k(t,e,i,n,r===void 0?void 0:Ko.createForRoot(r),void 0,void 0,s,a);/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */async function w6e(t,e){const n=t.trees[".protocol"].blobs.attributes;return(await e(n)).sequenceNumber}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class kD extends An{constructor(e,n){super(),this.container=e,this.rootDataObject=n,this.connectedHandler=()=>this.emit("connected"),this.disconnectedHandler=()=>this.emit("disconnected"),this.disposedHandler=r=>this.emit("disposed",r),this.savedHandler=()=>this.emit("saved"),this.dirtyHandler=()=>this.emit("dirty"),e.on("connected",this.connectedHandler),e.on("closed",this.disposedHandler),e.on("disconnected",this.disconnectedHandler),e.on("saved",this.savedHandler),e.on("dirty",this.dirtyHandler)}get isDirty(){return this.container.isDirty}get attachState(){return this.container.attachState}get disposed(){return this.container.closed}get connectionState(){return this.container.connectionState}get initialObjects(){return this.rootDataObject.initialObjects}async attach(){throw new Error("Cannot attach container. Container is not in detached state")}async connect(){var e,n;(n=(e=this.container).connect)===null||n===void 0||n.call(e)}async disconnect(){var e,n;(n=(e=this.container).disconnect)===null||n===void 0||n.call(e)}async create(e){return this.rootDataObject.create(e)}dispose(){this.container.close(),this.container.off("connected",this.connectedHandler),this.container.off("closed",this.disposedHandler),this.container.off("disconnected",this.disconnectedHandler),this.container.off("saved",this.savedHandler),this.container.off("dirty",this.dirtyHandler)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class C6e{constructor(e,n,r){this.path=e,this.runtime=n,this.routeContext=r,this.absolutePath=fm(e,this.routeContext)}get IFluidHandleContext(){return this}attachGraph(){throw new Error("can't attach container runtime form within container!")}get isAttached(){return this.runtime.attachState!==ze.Detached}async resolveHandle(e){return this.runtime.resolveHandle(e)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class Lk{constructor(e){this.map=new Map;for(const n of e){if(this.map.has(n[0]))throw new Tt("Duplicate entry names exist");this.map.set(n[0],n[1])}}get IFluidDataStoreRegistry(){return this}async get(e){if(this.map.has(e))return this.map.get(e)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const ti="summarizer";class Zu extends An{constructor(e,n,r,i,s){super(),this.logger=e,this.summaryCollection=n,this.clientElection=r,this.maxOpsSinceLastSummary=i,this.electionEnabled=s,this.lastReportedSeq=0,this.summaryCollection.on("default",({sequenceNumber:a})=>{var o,l,c;const u=this.electedClientId;if(u===void 0){this.clientElection.eligibleCount>0&&this.clientElection.resetElectedClient(a);return}let d=this.clientElection.electionSequenceNumber;if(a-((o=this.lastSummaryAckSeqForClient)!==null&&o!==void 0?o:d)>this.maxOpsSinceLastSummary){const p=a-this.lastReportedSeq;if(p>this.maxOpsSinceLastSummary&&(this.logger.sendErrorEvent({eventName:"ElectedClientNotSummarizing",electedClientId:u,lastSummaryAckSeqForClient:this.lastSummaryAckSeqForClient,electionSequenceNumber:d,nextElectedClientId:(l=this.clientElection.peekNextElectedClient())===null||l===void 0?void 0:l.clientId,electionEnabled:this.electionEnabled}),this.lastReportedSeq=a),this.electionEnabled){const f=this.electedParentId;this.clientElection.incrementElectedClient(a),d=this.clientElection.electionSequenceNumber,a>((c=this.lastSummaryAckSeqForClient)!==null&&c!==void 0?c:d)&&p>this.maxOpsSinceLastSummary&&this.logger.sendErrorEvent({eventName:"UnexpectedElectionSequenceNumber",lastSummaryAckSeqForClient:this.lastSummaryAckSeqForClient,electionSequenceNumber:d,sequenceNumber:a,previousClientId:u,previousParentId:f,electedParentId:this.electedParentId,electedClientId:this.electedClientId,opsSinceLastReport:p,maxOpsSinceLastSummary:i})}}}),this.summaryCollection.on(et.SummaryAck,a=>{this.lastSummaryAckSeqForClient=a.sequenceNumber}),this.clientElection.on("election",(a,o)=>{this.lastSummaryAckSeqForClient=void 0,a===void 0&&this.clientElection.eligibleCount>0&&this.clientElection.resetElectedClient(o),this.emit("electedSummarizerChanged")})}get electedClientId(){var e;return(e=this.clientElection.electedClient)===null||e===void 0?void 0:e.clientId}get electedParentId(){var e;return(e=this.clientElection.electedParent)===null||e===void 0?void 0:e.clientId}serialize(){var e;const{electedClientId:n,electedParentId:r,electionSequenceNumber:i}=this.clientElection.serialize();return{electedClientId:n,electedParentId:r,electionSequenceNumber:(e=this.lastSummaryAckSeqForClient)!==null&&e!==void 0?e:i}}static isClientEligible(e){const n=e.client.details;return n===void 0?!0:Zu.clientDetailsPermitElection(n)}}Zu.clientDetailsPermitElection=t=>t.capabilities.interactive||t.type===ti;/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class E6e{constructor(e,n,r,i,s){this.objectId=e,this._connected=n,this.submit=r,this.dirty=i,this.addedGCOutboundReference=s}get handler(){return N(!!this._handler,375),this._handler}get connected(){return this._connected}attach(e){N(this._handler===void 0,376),this._handler=e}setConnectionState(e){this._connected=e,this.handler.setConnectionState(e)}process(e,n,r){try{this.handler.process(e,n,r)}catch(i){throw Ni.wrapIfUnrecognized(i,"channelDeltaConnectionFailedToProcessMessage",e)}}reSubmit(e,n){this.handler.reSubmit(e,n)}rollback(e,n){if(this.handler.rollback===void 0)throw new Error("Handler doesn't support rollback");this.handler.rollback(e,n)}applyStashedOp(e){return this.handler.applyStashedOp(e)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class yv{constructor(e,n,r,i){this.tree=e,this.storage=n,this.logger=r,this.extraBlobs=i,this.flattenedTree={},e!==void 0&&yv.flattenTree("",e,this.flattenedTree)}static flattenTree(e,n,r){for(const i in n.trees)yv.flattenTree(`${e}${i}/`,n.trees[i],r);for(const i in n.blobs)r[`${e}${i}`]=n.blobs[i]}async contains(e){return this.flattenedTree[e]!==void 0}async readBlob(e){const n=await this.getIdForPath(e),r=this.extraBlobs!==void 0?this.extraBlobs.get(n):void 0;if(r!==void 0)return r;const i=this.storage.readBlob(n);return i.catch(s=>this.logger.sendErrorEvent({eventName:"ChannelStorageBlobError"},s)),i}async list(e){var n;let r=this.tree;const i=s6e(e);for(;r!==void 0&&i.length>0;){const s=i.shift();r=r.trees[s]}if(r===void 0||i.length!==0)throw new Error("path does not exist");return Object.keys((n=r==null?void 0:r.blobs)!==null&&n!==void 0?n:{})}async getIdForPath(e){return this.flattenedTree[e]}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const bv=".attributes";function Bk(t,e,n,r,i,s,a,o,l){const c=new E6e(t,e,(d,h)=>n(d,h),r,i),u=new yv(o,s,a,l);return{deltaConnection:c,objectStorage:u}}function Kj(t,e=!1,n=!1,r){const i=t.getAttachSummary(e,n,r);return ia(i,bv,JSON.stringify(t.attributes)),i}async function Yj(t,e=!1,n=!1,r){const i=await t.summarize(e,n,r);return ia(i,bv,JSON.stringify(t.attributes)),i}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class jk{constructor(e,n,r,i){this.id=e,this.registry=n,this.runtime=r,this.servicesGetter=i,this.globallyVisible=!1,this.pending=[],N(!this.id.includes("/"),783)}async getChannel(){return N(this.channel!==void 0,519),this.channel}get isLoaded(){return this.channel!==void 0}setConnectionState(e,n){this.globallyVisible&&this.isLoaded&&this.servicesGetter().value.deltaConnection.setConnectionState(e)}processOp(e,n,r){N(this.globallyVisible,723),this.isLoaded?this.servicesGetter().value.deltaConnection.process(e,n,r):(N(n===!1,393),this.pending.push(e))}reSubmit(e,n){N(this.isLoaded,394),N(this.globallyVisible,724),this.servicesGetter().value.deltaConnection.reSubmit(e,n)}rollback(e,n){N(this.isLoaded,750),N(this.globallyVisible,751),this.servicesGetter().value.deltaConnection.rollback(e,n)}applyStashedOp(){throw new Error("no stashed ops on local channel")}async summarize(e=!1,n=!1,r){return N(this.isLoaded&&this.channel!==void 0,396),Yj(this.channel,e,n,r)}getAttachSummary(e){return N(this.isLoaded&&this.channel!==void 0,397),Kj(this.channel,!0,!1,e)}makeVisible(){if(this.globallyVisible)throw new Error("Channel is already globally visible");this.isLoaded&&(N(!!this.channel,402),this.channel.connect(this.servicesGetter().value)),this.globallyVisible=!0}async getGCData(e=!1){return N(this.isLoaded&&this.channel!==void 0,403),this.channel.getGCData(e)}updateUsedRoutes(e,n){}}class T6e extends jk{constructor(e,n,r,i,s,a,o,l,c,u){super(e,n,r,()=>this.services),this.snapshotTree=u;const d=new Map,h=cv(this.snapshotTree);this.isSnapshotInOldFormatAndCollectBlobs(h,d)&&this.sanitizeSnapshot(h),this.services=new lh(()=>Bk(this.id,i.connected,o,this.dirtyFn,c,s,a,h,d)),this.dirtyFn=()=>{l(e)}}async getChannel(){return this.channel===void 0&&(this.channel=await this.loadChannel().catch(e=>{throw Ni.wrapIfUnrecognized(e,"rehydratedLocalChannelContextFailedToLoadChannel",void 0)})),this.channel}async loadChannel(){N(!this.isLoaded,398),N(await this.services.value.objectStorage.contains(".attributes"),400);const e=await zn(this.services.value.objectStorage,".attributes");if(N(this.factory===void 0,520),this.factory=this.registry.get(e.type),this.factory===void 0)throw new Error(`Channel Factory ${e.type} not registered`);const n=await this.factory.load(this.runtime,this.id,this.services.value,e);this.channel=n;for(const r of this.pending)this.services.value.deltaConnection.process(r,!1,void 0);return this.channel}isSnapshotInOldFormatAndCollectBlobs(e,n){let r=!1;const i=e.blobsContents;Object.entries(i).forEach(([s,a])=>{n.set(s,a),e.blobs[s]!==void 0&&(r=!0)});for(const s of Object.values(e.trees))r=r||this.isSnapshotInOldFormatAndCollectBlobs(s,n);return r}sanitizeSnapshot(e){const n=new Map(Object.entries(e.blobs));for(const[r,i]of n.entries())n.get(i)===void 0&&delete e.blobs[r];for(const r of Object.values(e.trees))this.sanitizeSnapshot(r)}}class R6e extends jk{constructor(e,n,r,i,s,a,o,l,c,u){if(super(e,n,i,()=>this.services),N(r!==void 0,521),this.factory=n.get(r),this.factory===void 0)throw new Error(`Channel Factory ${r} not registered`);this.channel=this.factory.create(i,e),this.services=new lh(()=>Bk(this.id,s.connected,l,this.dirtyFn,u,a,o)),this.dirtyFn=()=>{c(e)}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class Pp{constructor(e,n,r,i,s,a,o,l,c,u,d,h,p){this.runtime=e,this.dataStoreContext=n,this.id=o,this.registry=c,this.attachMessageType=p,this.isLoaded=!1,this.pending=[],N(!this.id.includes("/"),784),this.subLogger=ot.create(this.runtime.logger,"RemoteChannelContext"),this.services=Bk(this.id,this.dataStoreContext.connected,i,()=>s(this.id),a,r,this.subLogger,l,u);const f=async(m,g,v)=>this.summarizeInternal(m,g,v);this.summarizerNode=d(f,async m=>this.getGCDataInternal(m),async()=>h()),this.thresholdOpsCounter=new bB(Pp.pendingOpsCountThreshold,this.subLogger)}getChannel(){return this.channelP===void 0&&(this.channelP=this.loadChannel()),this.channelP}setConnectionState(e,n){this.isLoaded&&this.services.deltaConnection.setConnectionState(e)}applyStashedOp(e){return N(this.isLoaded,404),this.services.deltaConnection.applyStashedOp(e)}processOp(e,n,r){this.summarizerNode.invalidate(e.sequenceNumber),this.isLoaded?this.services.deltaConnection.process(e,n,r):(N(!n,405),N(this.pending!==void 0,574),this.pending.push(e),this.thresholdOpsCounter.sendIfMultiple("StorePendingOps",this.pending.length))}reSubmit(e,n){N(this.isLoaded,406),this.services.deltaConnection.reSubmit(e,n)}rollback(e,n){N(this.isLoaded,752),this.services.deltaConnection.rollback(e,n)}async summarize(e=!1,n=!0,r){return this.summarizerNode.summarize(e,n,r)}async summarizeInternal(e,n,r){const i=await this.getChannel(),s=await Yj(i,e,n,r);return Object.assign(Object.assign({},s),{id:this.id})}async loadChannel(){N(!this.isLoaded,407);let e;await this.services.objectStorage.contains(bv)&&(e=await zn(this.services.objectStorage,bv));let n;if(e===void 0){if(this.attachMessageType===void 0)throw new da("channelTypeNotAvailable",{channelId:{value:this.id,tag:Vt.PackageData},dataStoreId:{value:this.dataStoreContext.id,tag:Vt.PackageData},dataStorePackagePath:this.dataStoreContext.packagePath.join("/")});if(n=this.registry.get(this.attachMessageType),n===void 0)throw new da("channelFactoryNotRegisteredForAttachMessageType",{channelId:{value:this.id,tag:Vt.PackageData},dataStoreId:{value:this.dataStoreContext.id,tag:Vt.PackageData},dataStorePackagePath:this.dataStoreContext.packagePath.join("/"),channelFactoryType:this.attachMessageType});e=n.attributes}else if(n=this.registry.get(e.type),n===void 0)throw new da("channelFactoryNotRegisteredForGivenType",{channelId:{value:this.id,tag:Vt.PackageData},dataStoreId:{value:this.dataStoreContext.id,tag:Vt.PackageData},dataStorePackagePath:this.dataStoreContext.packagePath.join("/"),channelFactoryType:e.type});e.snapshotFormatVersion!==void 0&&e.snapshotFormatVersion!==n.attributes.snapshotFormatVersion&&this.subLogger.sendTelemetryEvent({eventName:"ChannelAttributesVersionMismatch",channelType:{value:e.type,tag:Vt.PackageData},channelSnapshotVersion:{value:`${e.snapshotFormatVersion}@${e.packageVersion}`,tag:Vt.PackageData},channelCodeVersion:{value:`${n.attributes.snapshotFormatVersion}@${n.attributes.packageVersion}`,tag:Vt.PackageData}});const r=await n.load(this.runtime,this.id,this.services,e);N(this.pending!==void 0,575);for(const i of this.pending)this.services.deltaConnection.process(i,!1,void 0);return this.thresholdOpsCounter.send("ProcessPendingOps",this.pending.length),this.channel=r,this.pending=void 0,this.isLoaded=!0,this.services.deltaConnection.setConnectionState(this.dataStoreContext.connected),this.channel}async getGCData(e=!1){return this.summarizerNode.getGCData(e)}async getGCDataInternal(e=!1){return(await this.getChannel()).getGCData(e)}updateUsedRoutes(e,n){this.summarizerNode.updateUsedRoutes([""])}}Pp.pendingOpsCountThreshold=1e3;/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var Ba;(function(t){t.Attach="attach",t.ChannelOp="op"})(Ba||(Ba={}));class pm extends An{constructor(e,n,r){super(),this.dataStoreContext=e,this.sharedObjectRegistry=n,this._disposed=!1,this.contexts=new Map,this.contextsDeferred=new Map,this.pendingAttach=new Map,this.deferredAttached=new sn,this.localChannelContextQueue=new Map,this.notBoundedChannelContextSet=new Set,this.pendingHandlesToMakeVisible=new Set,N(!e.id.includes("/"),782),this.logger=ot.create(e.logger,"FluidDataStoreRuntime",{all:{dataStoreId:Cn()}}),this.id=e.id,this.options=e.options,this.deltaManager=e.deltaManager,this.quorum=e.getQuorum(),this.audience=e.getAudience();const i=e.baseSnapshot;this.channelsBaseGCDetails=new Qa(async()=>{var s,a,o;const l=await((o=(a=(s=this.dataStoreContext).getBaseGCDetails)===null||a===void 0?void 0:a.call(s))!==null&&o!==void 0?o:this.dataStoreContext.getInitialGCSummaryDetails());return Wj(l)}),(i==null?void 0:i.trees)!==void 0&&Object.keys(i.trees).forEach(s=>{if(s==="_search")return;let a;e.isLocalDataStore?(a=new T6e(s,this.sharedObjectRegistry,this,this.dataStoreContext,this.dataStoreContext.storage,this.logger,(l,c)=>this.submitChannelOp(s,l,c),l=>this.setChannelDirty(l),(l,c)=>this.addedGCOutboundReference(l,c),i.trees[s]),e.attachState!==ze.Detached?a.makeVisible():this.localChannelContextQueue.set(s,a)):a=new Pp(this,e,e.storage,(l,c)=>this.submitChannelOp(s,l,c),l=>this.setChannelDirty(l),(l,c)=>this.addedGCOutboundReference(l,c),s,i.trees[s],this.sharedObjectRegistry,void 0,this.dataStoreContext.getCreateChildSummarizerNodeFn(s,{type:Je.CreateSummarizerNodeSource.FromSummary}),async()=>this.getChannelBaseGCDetails(s));const o=new sn;o.resolve(a),this.contexts.set(s,a),this.contextsDeferred.set(s,o)}),this.attachListener(),this.bindState=r?Pi.Bound:Pi.NotBound,this._attachState=e.attachState,r?this.visibilityState=e.attachState===ze.Detached?Je.VisibilityState.LocallyVisible:Je.VisibilityState.GloballyVisible:this.visibilityState=Je.VisibilityState.NotVisible,r&&this.deferredAttached.resolve()}static load(e,n,r){return new pm(e,n,r)}get IFluidRouter(){return this}get connected(){return this.dataStoreContext.connected}get clientId(){return this.dataStoreContext.clientId}get clientDetails(){return this.dataStoreContext.clientDetails}get isAttached(){return this.attachState!==ze.Detached}get attachState(){return this._attachState}get absolutePath(){return fm(this.id,this.routeContext)}get routeContext(){return this.dataStoreContext.IFluidHandleContext}get IFluidHandleContext(){return this}get rootRoutingContext(){return this}get channelsRoutingContext(){return this}get objectsRoutingContext(){return this}get disposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this.emit("dispose"),this.removeAllListeners())}async resolveHandle(e){return this.request(e)}async request(e){try{const n=ma.create(e),r=n.pathParts[0];if(r==="_channels"||r==="_custom")return this.request(n.createSubRequest(1));if(this.contextsDeferred.has(r)&&n.isLeaf(1))try{return{mimeType:"fluid/object",status:200,value:await(await this.contextsDeferred.get(r).promise).getChannel()}}catch(i){return this.logger.sendErrorEvent({eventName:"GetChannelFailedInRequest"},i),Lj(500,`Failed to get Channel: ${i}`,e)}return Ts(e)}catch(n){return vv(n)}}async getChannel(e){return this.verifyNotClosed(),this.contextsDeferred.has(e)||this.contextsDeferred.set(e,new sn),await(await this.contextsDeferred.get(e).promise).getChannel()}createChannel(e=Cn(),n){if(e.includes("/"))throw new Tt(`Id cannot contain slashes: ${e}`);this.verifyNotClosed(),N(!this.contexts.has(e),377),this.notBoundedChannelContextSet.add(e);const r=new R6e(e,this.sharedObjectRegistry,n,this,this.dataStoreContext,this.dataStoreContext.storage,this.logger,(i,s)=>this.submitChannelOp(e,i,s),i=>this.setChannelDirty(i),(i,s)=>this.addedGCOutboundReference(i,s));if(this.contexts.set(e,r),this.contextsDeferred.has(e))this.contextsDeferred.get(e).resolve(r);else{const i=new sn;i.resolve(r),this.contextsDeferred.set(e,i)}return N(!!r.channel,378),r.channel}bindChannel(e){if(N(this.notBoundedChannelContextSet.has(e.id),379),this.notBoundedChannelContextSet.delete(e.id),this.isAttached){this.attachChannel(e);return}this.pendingHandlesToMakeVisible.has(e.handle)||(this.bind(e.handle),this.localChannelContextQueue.has(e.id)||this.localChannelContextQueue.set(e.id,this.contexts.get(e.id)))}makeVisibleAndAttachGraph(){this.visibilityState===Je.VisibilityState.NotVisible&&(this.visibilityState=Je.VisibilityState.LocallyVisible,this.pendingHandlesToMakeVisible.forEach(e=>{e.attachGraph()}),this.pendingHandlesToMakeVisible.clear(),this.bindToContext())}attachGraph(){this.makeVisibleAndAttachGraph()}bindToContext(){this.bindState===Pi.NotBound&&(this.bindState=Pi.Binding,this.dataStoreContext.bindToContext(),this.bindState=Pi.Bound)}bind(e){if(this.visibilityState!==Je.VisibilityState.NotVisible){e.attachGraph();return}this.pendingHandlesToMakeVisible.add(e)}setConnectionState(e,n){this.verifyNotClosed();for(const[,r]of this.contexts)r.setConnectionState(e,n);nk(this.logger,this,e,n)}getQuorum(){return this.quorum}getAudience(){return this.audience}async uploadBlob(e){return this.verifyNotClosed(),this.dataStoreContext.uploadBlob(e)}process(e,n,r){this.verifyNotClosed();try{switch(e.type){case Ba.Attach:{const i=e.contents,s=i.id;if(n)N(this.pendingAttach.has(s),380),this.pendingAttach.delete(s);else{N(!this.contexts.has(s),381);const a=new Map,o=CB(i.snapshot.entries,a),l=new Pp(this,this.dataStoreContext,this.dataStoreContext.storage,(c,u)=>this.submitChannelOp(s,c,u),c=>this.setChannelDirty(c),(c,u)=>this.addedGCOutboundReference(c,u),s,o,this.sharedObjectRegistry,a,this.dataStoreContext.getCreateChildSummarizerNodeFn(s,{type:Je.CreateSummarizerNodeSource.FromAttach,sequenceNumber:e.sequenceNumber,snapshot:i.snapshot}),async()=>this.getChannelBaseGCDetails(s),i.type);if(this.contexts.set(s,l),this.contextsDeferred.has(s))this.contextsDeferred.get(s).resolve(l);else{const c=new sn;c.resolve(l),this.contextsDeferred.set(s,c)}}break}case Ba.ChannelOp:this.processChannelOp(e,n,r);break;default:}this.emit("op",e)}catch(i){throw Ni.wrapIfUnrecognized(i,"fluidDataStoreRuntimeFailedToProcessMessage",e)}}processSignal(e,n){this.emit("signal",e,n)}isChannelAttached(e){return!this.notBoundedChannelContextSet.has(e)&&!this.localChannelContextQueue.has(e)&&!this.pendingAttach.has(e)}getOutboundRoutes(){const e=[];for(const[n]of this.contexts)e.push(`${this.absolutePath}/${n}`);return e}updateGCNodes(e){e.addRouteToAllNodes(this.absolutePath),e.addNode("/",this.getOutboundRoutes())}async getGCData(e=!1){const n=new Fk;return await Promise.all(Array.from(this.contexts).filter(([r,i])=>this.isChannelAttached(r)).map(async([r,i])=>{const s=await i.getGCData(e);n.prefixAndAddNodes(r,s.gcNodes)})),this.updateGCNodes(n),n.getGCData()}updateUsedRoutes(e,n){var r;const i=Gj(e);for(const[s]of i)N(this.contexts.has(s),382);for(const[s,a]of this.contexts)a.updateUsedRoutes((r=i.get(s))!==null&&r!==void 0?r:[],n)}addedGCOutboundReference(e,n){var r,i;(i=(r=this.dataStoreContext).addedGCOutboundReference)===null||i===void 0||i.call(r,e,n)}async getChannelBaseGCDetails(e){var n;let r=(await this.channelsBaseGCDetails).get(e);return r===void 0?r={}:((n=r.gcData)===null||n===void 0?void 0:n.gcNodes)!==void 0&&v6e(r.gcData.gcNodes,this.absolutePath),(r.usedRoutes===void 0||r.usedRoutes.length===0)&&(r.usedRoutes=[""]),r}async summarize(e=!1,n=!0,r){const i=new mi;return await Promise.all(Array.from(this.contexts).filter(([s,a])=>{const o=this.isChannelAttached(s);return N(o,383),o}).map(async([s,a])=>{const o=await a.summarize(e,n,r);i.addWithStats(s,o)})),i.getSummaryTree()}getAttachSummary(e){this.attachGraph();const n=new mi;for(const[r,i]of this.contexts){if(!(i instanceof jk))throw new rt("Should only be called with local channel handles");if(!this.notBoundedChannelContextSet.has(r)){let s;if(i.isLoaded){const a=i.getAttachSummary(e);N(a.summary.type===Ne.Tree,384),s={stats:a.stats,summary:a.summary}}else N(!!this.dataStoreContext.baseSnapshot,385),s=Ik(this.dataStoreContext.baseSnapshot.trees[r]);n.addWithStats(r,s)}}return n.getSummaryTree()}submitMessage(e,n,r){this.submit(e,n,r)}submitSignal(e,n){return this.verifyNotClosed(),this.dataStoreContext.submitSignal(e,n)}async waitAttached(){return this.deferredAttached.promise}attachChannel(e){if(this.verifyNotClosed(),e.handle.isAttached)return;e.handle.attachGraph(),N(this.isAttached,386),N(this.visibilityState===Je.VisibilityState.GloballyVisible,720);const n=Kj(e,!0,!1),r=Mk(n.summary),i={id:e.id,snapshot:r,type:e.attributes.type};this.pendingAttach.set(e.id,i),this.submit(Ba.Attach,i),this.contexts.get(e.id).makeVisible()}submitChannelOp(e,n,r){const i={address:e,contents:n};this.submit(Ba.ChannelOp,i,r)}submit(e,n,r=void 0){this.verifyNotClosed(),this.dataStoreContext.submitMessage(e,n,r)}reSubmit(e,n,r){switch(this.verifyNotClosed(),e){case Ba.ChannelOp:{const i=n,s=this.contexts.get(i.address);N(!!s,387),s.reSubmit(i.contents,r);break}case Ba.Attach:this.submit(e,n,r);break;default:pi()}}rollback(e,n,r){switch(this.verifyNotClosed(),e){case Ba.ChannelOp:{const i=n,s=this.contexts.get(i.address);N(!!s,749),s.rollback(i.contents,r);break}default:throw new rt(`Can't rollback ${e} message`)}}async applyStashedOp(e){const n=e,r=this.contexts.get(n.address);return N(!!r,388),await r.getChannel(),r.applyStashedOp(n.contents)}setChannelDirty(e){this.verifyNotClosed(),this.dataStoreContext.setChannelDirty(e)}processChannelOp(e,n,r){this.verifyNotClosed();const i=e.contents,s=Object.assign(Object.assign({},e),{contents:i.contents}),a=this.contexts.get(i.address);return N(!!a,389),a.processOp(s,n,r),a}attachListener(){this.setMaxListeners(Number.MAX_SAFE_INTEGER),this.dataStoreContext.once("attaching",()=>{this.attachGraph(),this._attachState=ze.Attaching,N(this.visibilityState===Je.VisibilityState.LocallyVisible,721),this.visibilityState=Je.VisibilityState.GloballyVisible,this.localChannelContextQueue.forEach(e=>{e.makeVisible()}),this.localChannelContextQueue.clear(),this.deferredAttached.resolve(),this.emit("attaching")}),this.dataStoreContext.once("attached",()=>{N(this.visibilityState===Je.VisibilityState.GloballyVisible,722),this._attachState=ze.Attached,this.emit("attached")})}verifyNotClosed(){if(this._disposed)throw new rt("Runtime is closed")}}const k6e=(t,e=pm)=>class extends e{async request(r){const i=await super.request(r);return i.status===404?t(r,this):i}};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class ed{constructor(e,n,r){this.value=e,this.path=n,this.routeContext=r,this.pendingHandlesToMakeVisible=new Set,this.locallyVisible=!1,this.absolutePath=fm(n,this.routeContext)}get IFluidHandle(){return this}get isAttached(){return this.routeContext.isAttached}get visible(){return this.isAttached||this.locallyVisible}async get(){return this.value}attachGraph(){this.visible||(this.locallyVisible=!0,this.pendingHandlesToMakeVisible.forEach(e=>{e.attachGraph()}),this.pendingHandlesToMakeVisible.clear(),this.routeContext.attachGraph())}bind(e){if(this.visible){e.attachGraph();return}this.pendingHandlesToMakeVisible.add(e)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class P6e extends ed{async get(){throw Error("Do not try to get a summarizer object from the handle. Reference it directly.")}attach(){}bind(e){}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class _6e{constructor(e,n){this.lastOpSequenceNumber=e,this._lastAttempt=n,this._lastSuccessfulSummary=Object.assign({},n)}get lastAttempt(){return this._lastAttempt}get lastSuccessfulSummary(){return this._lastSuccessfulSummary}updateWithLastSummaryAckInfo(e){this._lastAttempt=e,this._lastSuccessfulSummary=Object.assign({},e)}recordAttempt(e){this._lastAttempt={refSequenceNumber:e??this.lastOpSequenceNumber,summaryTime:Date.now()}}markLastAttemptAsSuccessful(){this._lastSuccessfulSummary=Object.assign({},this.lastAttempt)}}class A6e{constructor(e,n,r,i){this.heuristicData=e,this.configuration=n,this.trySummarize=r,this.logger=i,this.idleTimer=new Ec(this.configuration.idleTime,()=>this.trySummarize("idle")),this.minOpsForLastSummaryAttempt=this.configuration.minOpsForLastSummaryAttempt}get opsSinceLastAck(){return this.heuristicData.lastOpSequenceNumber-this.heuristicData.lastSuccessfulSummary.refSequenceNumber}run(){const e=Date.now()-this.heuristicData.lastSuccessfulSummary.summaryTime,n=this.opsSinceLastAck;e>this.configuration.maxTime?(this.idleTimer.clear(),this.trySummarize("maxTime")):n>this.configuration.maxOps?(this.idleTimer.clear(),this.trySummarize("maxOps")):this.idleTimer.restart()}shouldRunLastSummary(){const e=this.opsSinceLastAck,n=this.minOpsForLastSummaryAttempt;return this.logger.sendTelemetryEvent({eventName:"ShouldRunLastSummary",opsSinceLastAck:e,minOpsForLastSummaryAttempt:n}),e>=n}dispose(){this.idleTimer.clear()}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */async function x2(t,e,n){const r=[t.then(i=>({result:"done",value:i})),e.then(({timerResult:i})=>({result:i}))];return n!==void 0&&r.push(n.waitCancelled.then(()=>({result:"cancelled"}))),Promise.race(r)}const PD=2e4,O6e=5,_D={submitSummaryFailure:"Error while generating, uploading, or submitting summary",summaryOpWaitTimeout:"Timeout while waiting for summarize op broadcast",summaryAckWaitTimeout:"Timeout while waiting for summaryAck/summaryNack op",summaryNack:"Server rejected summary via summaryNack op",disconnect:"Summary cancelled due to summarizer or main client disconnect"};class Of{constructor(){this.summarySubmitted=new sn,this.summaryOpBroadcasted=new sn,this.receivedSummaryAckOrNack=new sn}fail(e,n,r,i){N(!this.receivedSummaryAckOrNack.isCompleted,606);const s={success:!1,message:e,data:void 0,error:n,retryAfterSeconds:i};this.summarySubmitted.resolve(s),this.summaryOpBroadcasted.resolve(s),this.receivedSummaryAckOrNack.resolve(Object.assign(Object.assign({},s),{data:r}))}build(){return{summarySubmitted:this.summarySubmitted.promise,summaryOpBroadcasted:this.summaryOpBroadcasted.promise,receivedSummaryAckOrNack:this.receivedSummaryAckOrNack.promise}}}class D6e{constructor(e,n,r,i,s,a,o){this.pendingAckTimer=e,this.heuristicData=n,this.submitSummaryCallback=r,this.raiseSummarizingError=i,this.successfulSummaryCallback=s,this.summaryWatcher=a,this.logger=o,this.summarizeTimer=new Ec(PD,()=>this.summarizeTimerHandler(PD,1))}summarize(e,n,r,i=new Of){return this.summarizeCore(e,n,i,r).catch(s=>{const a="UnexpectedSummarizeError";this.logger.sendErrorEvent(Object.assign({eventName:a},e),s),i.fail(a,s)}),i.build()}async summarizeCore(e,n,r,i){const{refreshLatestAck:s,fullTree:a}=n,o=ot.create(this.logger,void 0,{all:e}),l=Date.now()-this.heuristicData.lastAttempt.summaryTime,c=Date.now()-this.heuristicData.lastSuccessfulSummary.summaryTime;let u={fullTree:a,timeSinceLastAttempt:l,timeSinceLastSummary:c};const d=gt.start(o,Object.assign({eventName:"Summarize",refreshLatestAck:s},u)),h=m=>`${m}: ${_D[m]}`,p=(m,g,v,y)=>{this.raiseSummarizingError(_D[m]);const b=gO(g),C=i.cancelled||(g==null?void 0:g.errorType)===us.offlineError?"generic":"error";d.cancel(Object.assign(Object.assign({},v),{reason:m,category:C,retryAfterSeconds:b}),g),r.fail(h(m),g,y,b)};this.summarizeTimer.start();let f;try{f=await this.submitSummaryCallback({fullTree:a,refreshLatestAck:s,summaryLogger:o,cancellationToken:i});const m=f.referenceSequenceNumber,g=m-this.heuristicData.lastSuccessfulSummary.refSequenceNumber;if(u=Object.assign(Object.assign({},u),{referenceSequenceNumber:m,minimumSequenceNumber:f.minimumSequenceNumber,opsSinceLastAttempt:m-this.heuristicData.lastAttempt.refSequenceNumber,opsSinceLastSummary:g}),f.stage!=="base"&&(u=Object.assign(Object.assign(Object.assign({},u),f.summaryStats),{generateDuration:f.generateDuration}),f.stage!=="generate"&&(u=Object.assign(Object.assign({},u),{handle:f.handle,uploadDuration:f.uploadDuration}),f.stage!=="upload"&&(u=Object.assign(Object.assign({},u),{clientSequenceNumber:f.clientSequenceNumber})))),f.stage!=="submit")return p("submitSummaryFailure",f.error,u);if(!a&&!f.forcedFullTree){const{summarizedDataStoreCount:v,gcStateUpdatedDataStoreCount:y=0}=f.summaryStats;v>y+g&&o.sendErrorEvent({eventName:"IncrementalSummaryViolation",summarizedDataStoreCount:v,gcStateUpdatedDataStoreCount:y,opsSinceLastSummary:g})}d.reportEvent("generate",Object.assign({},u)),r.summarySubmitted.resolve({success:!0,data:f})}catch(m){return p("submitSummaryFailure",m)}finally{this.heuristicData.recordAttempt(f==null?void 0:f.referenceSequenceNumber),this.summarizeTimer.clear()}try{const m=this.pendingAckTimer.start(),g=this.summaryWatcher.watchSummary(f.clientSequenceNumber),v=await x2(g.waitBroadcast(),m,i);if(v.result==="cancelled")return p("disconnect");if(v.result!=="done")return p("summaryOpWaitTimeout");const y=v.value,b=Date.now()-this.heuristicData.lastAttempt.summaryTime;r.summaryOpBroadcasted.resolve({success:!0,data:{summarizeOp:y,broadcastDuration:b}}),this.heuristicData.lastAttempt.summarySequenceNumber=y.sequenceNumber,o.sendTelemetryEvent({eventName:"Summarize_Op",duration:b,referenceSequenceNumber:y.referenceSequenceNumber,summarySequenceNumber:y.sequenceNumber,handle:y.contents.handle});const C=await x2(g.waitAckNack(),m,i);if(C.result==="cancelled")return p("disconnect");if(C.result!=="done")return p("summaryAckWaitTimeout");const R=C.value;this.pendingAckTimer.clear();const w=Date.now()-this.heuristicData.lastAttempt.summaryTime;if(u=Object.assign({ackWaitDuration:w,ackNackSequenceNumber:R.sequenceNumber,summarySequenceNumber:R.contents.summaryProposal.summarySequenceNumber},u),R.type===et.SummaryAck)this.heuristicData.markLastAttemptAsSuccessful(),this.successfulSummaryCallback(),d.end(Object.assign(Object.assign({},u),{handle:R.contents.handle})),r.receivedSummaryAckOrNack.resolve({success:!0,data:{summaryAckOp:R,ackNackDuration:w}});else{N(R.type===et.SummaryNack,628);const E=R.contents,k=E==null?void 0:E.message,T=E==null?void 0:E.retryAfter,_=new rt(`Received summaryNack: ${k}`,{retryAfterSeconds:T});return N(gO(_)===T,607),p("summaryNack",_,Object.assign(Object.assign({},u),{nackRetryAfter:T}),{summaryNackOp:R,ackNackDuration:w})}}finally{this.pendingAckTimer.clear()}}summarizeTimerHandler(e,n){if(this.logger.sendPerformanceEvent({eventName:"SummarizeTimeout",timeoutTime:e,timeoutCount:n}),n<O6e){const r=e*2;this.summarizeTimer.start(r,()=>this.summarizeTimerHandler(r,n+1))}}dispose(){this.summarizeTimer.clear()}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var kx=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const I6e=10*60*1e3;class qk{constructor(e,n,r,i,s,a,o,l,c){this.summaryWatcher=n,this.configuration=r,this.submitSummaryCallback=i,this.heuristicData=s,this.raiseSummarizingError=a,this.summaryCollection=o,this.cancellationToken=l,this.stopSummarizerCallback=c,this.stopping=!1,this._disposed=!1,this.tryWhileSummarizing=!1,this.summarizeCount=0,this.totalSuccessfulAttempts=0,this.tryGetCorrelatedLogger=h=>this.heuristicData.lastAttempt.refSequenceNumber===h?this.logger:void 0;const u={summarizeCount:()=>this.summarizeCount,summarizerSuccessfulAttempts:()=>this.totalSuccessfulAttempts};this.logger=ot.create(e,"Running",{all:u}),r.state!=="disableHeuristics"&&(N(this.configuration.state==="enabled",746),this.heuristicRunner=new A6e(s,this.configuration,h=>this.trySummarize(h),this.logger)),N(this.configuration.state!=="disabled",747);const d=Math.min(this.configuration.maxAckWaitTime,I6e);this.pendingAckTimer=new J_e(d,()=>{this.raiseSummarizingError("Pending summary ack not received in time"),this.logger.sendErrorEvent({eventName:"SummaryAckWaitTimeout",maxAckWaitTime:d,referenceSequenceNumber:this.heuristicData.lastAttempt.refSequenceNumber,summarySequenceNumber:this.heuristicData.lastAttempt.summarySequenceNumber,timePending:Date.now()-this.heuristicData.lastAttempt.summaryTime})}),o.setPendingAckTimerTimeoutCallback(d,()=>{this.pendingAckTimer.hasTimer&&(this.logger.sendTelemetryEvent({eventName:"MissingSummaryAckFoundByOps",referenceSequenceNumber:this.heuristicData.lastAttempt.refSequenceNumber,summarySequenceNumber:this.heuristicData.lastAttempt.summarySequenceNumber}),this.pendingAckTimer.clear())}),this.generator=new D6e(this.pendingAckTimer,this.heuristicData,this.submitSummaryCallback,this.raiseSummarizingError,()=>{this.totalSuccessfulAttempts++},this.summaryWatcher,this.logger)}static async start(e,n,r,i,s,a,o,l,c){var u;const d=new qk(e,n,r,i,s,a,o,l,c);return await d.waitStart(),(u=d.heuristicRunner)===null||u===void 0||u.run(),d}get disposed(){return this._disposed}dispose(){var e;this.summaryWatcher.dispose(),(e=this.heuristicRunner)===null||e===void 0||e.dispose(),this.heuristicRunner=void 0,this.generator.dispose(),this.pendingAckTimer.clear(),this.disposeEnqueuedSummary(),this._disposed=!0,this.stopping=!0}handleSystemOp(e){switch(e.type){case et.ClientLeave:case et.ClientJoin:case et.Propose:{this.handleOp(void 0,e);return}default:return}}handleOp(e,{sequenceNumber:n,type:r,clientId:i,contents:s}){var a;e===void 0&&(this.heuristicData.lastOpSequenceNumber=n,this.tryRunEnqueuedSummary()||(a=this.heuristicRunner)===null||a===void 0||a.run())}async waitStop(e){var n;this.stopping||(this.stopping=!0,this.disposeEnqueuedSummary(),e&&(!((n=this.heuristicRunner)===null||n===void 0)&&n.shouldRunLastSummary())&&this.summarizingLock===void 0&&this.trySummarizeOnce({reason:"lastSummary"},{}),await this.summarizingLock)}async waitStart(){const e=await x2(this.summaryWatcher.waitFlushed(),this.pendingAckTimer.start());this.pendingAckTimer.clear(),this.summaryCollection.unsetPendingAckTimerTimeoutCallback(),e.result==="done"&&e.value!==void 0&&this.heuristicData.updateWithLastSummaryAckInfo({refSequenceNumber:e.value.summaryOp.referenceSequenceNumber,summaryTime:Date.now(),summarySequenceNumber:e.value.summaryOp.sequenceNumber})}async lockedRefreshSummaryAckAction(e){N(this.refreshSummaryAckLock===void 0,"Refresh Summary Ack - Caller is responsible for checking lock");const n=new sn;return this.refreshSummaryAckLock=n.promise,e().finally(()=>{n.resolve(),this.refreshSummaryAckLock=void 0})}async lockedSummaryAction(e){N(this.summarizingLock===void 0,603);const n=new sn;return this.summarizingLock=n.promise,this.summarizeCount++,await this.refreshSummaryAckLock,e().finally(()=>{var r;n.resolve(),this.summarizingLock=void 0;const i=this.tryWhileSummarizing;this.tryWhileSummarizing=!1,!this.stopping&&!this.tryRunEnqueuedSummary()&&i&&((r=this.heuristicRunner)===null||r===void 0||r.run())})}trySummarizeOnce(e,n,r=this.cancellationToken,i=new Of){return this.lockedSummaryAction(async()=>this.generator.summarize(e,n,r,i).receivedSummaryAckOrNack).catch(s=>{}),i.build()}trySummarize(e,n=this.cancellationToken){if(this.summarizingLock!==void 0){this.tryWhileSummarizing=!0;return}this.lockedSummaryAction(async()=>{const r=[{refreshLatestAck:!1,fullTree:!1},{refreshLatestAck:!0,fullTree:!1},{refreshLatestAck:!0,fullTree:!1,delaySeconds:120},{refreshLatestAck:!0,fullTree:!0,delaySeconds:600}];let i,s=0,a=0,o;for(let l=0;l<r.length;){if(this.cancellationToken.cancelled||++s>1&&e==="lastSummary")return;a++;const c=r[l],{delaySeconds:u=0}=c,d=kx(c,["delaySeconds"]),h=i??u,p=Object.assign({reason:e,summaryAttempts:s,summaryAttemptsPerPhase:a,summaryAttemptPhase:l+1},d);h>0&&(this.logger.sendPerformanceEvent(Object.assign({eventName:"SummarizeAttemptDelay",duration:h,summaryNackDelay:i!==void 0},p)),await sB(h*1e3)),await this.refreshSummaryAckLock;const m=await this.generator.summarize(p,d,n).receivedSummaryAckOrNack;if(m.success)return;i=m.retryAfterSeconds,(i===void 0||a>1)&&(l++,a=0),o=m}this.logger.sendErrorEvent({eventName:"FailToSummarize",reason:e,message:o==null?void 0:o.message},o==null?void 0:o.error),this.stopSummarizerCallback("failToSummarize")}).catch(r=>{this.logger.sendErrorEvent({eventName:"UnexpectedSummarizeError"},r)})}summarizeOnDemand(e=new Of,n){var{reason:r}=n,i=kx(n,["reason"]);if(this.stopping)return e.fail("RunningSummarizer stopped or disposed",void 0),e.build();if(this.summarizingLock!==void 0)throw new Tt("Attempted to run an already-running summarizer on demand");return this.trySummarizeOnce({reason:`onDemand/${r}`},i,this.cancellationToken,e)}enqueueSummarize(e){var{reason:n,afterSequenceNumber:r=0,override:i=!1}=e,s=kx(e,["reason","afterSequenceNumber","override"]);const a=`enqueue;${n}`;let o=!1;if(this.enqueuedSummary!==void 0){if(!i)return{alreadyEnqueued:!0};this.enqueuedSummary.resultsBuilder.fail("Aborted; overridden by another enqueue summarize attempt",void 0),this.enqueuedSummary=void 0,o=!0}this.enqueuedSummary={reason:a,afterSequenceNumber:r,options:s,resultsBuilder:new Of};const l=this.enqueuedSummary.resultsBuilder.build();return this.tryRunEnqueuedSummary(),o?Object.assign(Object.assign({},l),{alreadyEnqueued:!0,overridden:!0}):l}tryRunEnqueuedSummary(){if(this.stopping)return this.disposeEnqueuedSummary(),!1;if(this.enqueuedSummary===void 0||this.heuristicData.lastOpSequenceNumber<this.enqueuedSummary.afterSequenceNumber||this.summarizingLock!==void 0)return!1;const{reason:e,resultsBuilder:n,options:r}=this.enqueuedSummary;return this.enqueuedSummary=void 0,this.trySummarizeOnce({reason:`enqueuedSummary/${e}`},r,this.cancellationToken,n),!0}disposeEnqueuedSummary(){this.enqueuedSummary!==void 0&&(this.enqueuedSummary.resultsBuilder.fail("RunningSummarizer stopped or disposed",void 0),this.enqueuedSummary=void 0)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const M6e="summarizingError";class _p extends rt{constructor(e,n=!1){super(e),this.logged=n,this.errorType=M6e,this.canRetry=!0}static wrap(e,n=!1,r){return pB(e,s=>new _p(s,n),r)}}const N6e=(t,e)=>new _p(t,e);class zk extends Cc.EventEmitter{constructor(e,n,r,i,s,a,o){super(),this.runtime=n,this.configurationGetter=r,this.internalsProvider=i,this.summaryCollection=a,this.runCoordinatorCreateFn=o,this._disposed=!1,this.starting=!1,this.stopDeferred=new sn,this.summarizeOnDemand=(...l)=>{var c;try{if(this._disposed||!((c=this.runningSummarizer)===null||c===void 0)&&c.disposed)throw new Tt("Summarizer is already disposed.");if(this.runtime.summarizerClientId!==void 0&&this.runtime.summarizerClientId!==this.runtime.clientId)throw new Tt("On-demand summary attempted while an elected summarizer is present");const u=new Of;return this.runningSummarizer?this.runningSummarizer.summarizeOnDemand(u,...l):(this.runCoordinatorCreateFn(this.runtime).then(h=>{this.start(this.runtime.clientId,h).then(async f=>{f.summarizeOnDemand(u,...l);const m=await Promise.race([this.stopDeferred.promise,h.waitCancelled]);await f.waitStop(!1),h.stop(m),this.close()}).catch(f=>{u.fail("Failed to start summarizer",f)})}).catch(h=>{u.fail("Failed to create cancellation token",h)}),u.build())}catch(u){throw _p.wrap(u,!1,this.logger)}},this.enqueueSummarize=(...l)=>{if(this._disposed||this.runningSummarizer===void 0||this.runningSummarizer.disposed)throw new Tt("Summarizer is not running or already disposed.");return this.runningSummarizer.enqueueSummarize(...l)},this.logger=ot.create(this.runtime.logger,"Summarizer"),this.innerHandle=new P6e(this,e,s)}get IFluidLoadable(){return this}get ISummarizer(){return this}get handle(){return this.innerHandle}static async create(e,n){const r={headers:{[ln.cache]:!1,[ln.clientDetails]:{capabilities:{interactive:!1},type:ti},[Id.summarizingClient]:!0,[ln.reconnect]:!1},url:n},i=await e.resolve(r),s=await kp(i,{url:"_summarizer"});if(s.ISummarizer===void 0)throw new Tt("Fluid object does not implement ISummarizer");return s.ISummarizer}async run(e){try{return await this.runCore(e)}catch(n){throw this.stop("summarizerException"),_p.wrap(n,!1,this.logger)}finally{this.close()}}stop(e){this.stopDeferred.resolve(e)}close(){this.dispose(),this.runtime.closeFn()}async runCore(e){const n=await this.runCoordinatorCreateFn(this.runtime),r=Promise.race([n.waitCancelled,this.stopDeferred.promise]);if(r.then(a=>{this.logger.sendTelemetryEvent({eventName:"StoppingSummarizer",onBehalfOf:e,reason:a})}),n.cancelled)return n.waitCancelled;const i=await this.start(e,n),s=await r;return await i.waitStop(!n.cancelled&&zk.stopReasonCanRunLastSummary(s)),n.stop(s),s}static stopReasonCanRunLastSummary(e){return e==="parentNotConnected"}async start(e,n){if(this.runningSummarizer){if(this.runningSummarizer.disposed)throw new Tt("Starting a disposed summarizer");return this.runningSummarizer}if(this.starting)throw new Tt("Attempting to start a summarizer that is already starting");this.starting=!0,this.logger.sendTelemetryEvent({eventName:"RunningSummarizer",onBehalfOf:e,initSummarySeqNumber:this.runtime.deltaManager.initialSequenceNumber,config:JSON.stringify(this.configurationGetter())});const r=this.runtime.clientId;if(r===void 0)throw new Tt("clientId should be defined if connected.");const i=await qk.start(this.logger,this.summaryCollection.createWatcher(r),this.configurationGetter(),async(...s)=>this.internalsProvider.submitSummary(...s),new _6e(this.runtime.deltaManager.lastSequenceNumber,{refSequenceNumber:this.runtime.deltaManager.initialSequenceNumber,summaryTime:Date.now()}),s=>{this._disposed||this.logger.sendErrorEvent({eventName:"summarizingError"},N6e(s,!0))},this.summaryCollection,n,s=>n.stop(s));return this.runningSummarizer=i,this.starting=!1,this.handleSummaryAcks().catch(s=>{this.logger.sendErrorEvent({eventName:"HandleSummaryAckFatalError"},s)}),this.systemOpListener=s=>i.handleSystemOp(s),this.runtime.deltaManager.inbound.on("op",this.systemOpListener),this.opListener=(s,a)=>i.handleOp(s,a),this.runtime.on("batchEnd",this.opListener),i}dispose(){this.stop("summarizerClientDisconnected"),this._disposed=!0,this.runningSummarizer&&(this.runningSummarizer.dispose(),this.runningSummarizer=void 0),this.systemOpListener&&this.runtime.deltaManager.inbound.off("op",this.systemOpListener),this.opListener&&this.runtime.removeListener("batchEnd",this.opListener)}async handleSummaryAcks(){var e,n,r,i,s;let a=this.runtime.deltaManager.initialSequenceNumber,o;for(;this.runningSummarizer;){const l=(e=this.runningSummarizer.tryGetCorrelatedLogger(a))!==null&&e!==void 0?e:this.logger;try{o=void 0,o=await this.summaryCollection.waitSummaryAck(a),a=o.summaryOp.referenceSequenceNumber;const c=o.summaryOp.contents.handle,u=o.summaryAck.contents.handle;await this.runningSummarizer.lockedRefreshSummaryAckAction(async()=>this.internalsProvider.refreshLatestSummaryAck(c,u,a,l).catch(async d=>{if(hB(d)&&d.errorType===us.fileNotFoundOrAccessDeniedError)l.sendTelemetryEvent({eventName:"HandleSummaryAckErrorIgnored",referenceSequenceNumber:a,proposalHandle:c,ackHandle:u},d);else throw d}))}catch(c){l.sendErrorEvent({eventName:"HandleSummaryAckError",referenceSequenceNumber:a,handle:(r=(n=o==null?void 0:o.summaryOp)===null||n===void 0?void 0:n.contents)===null||r===void 0?void 0:r.handle,ackHandle:(s=(i=o==null?void 0:o.summaryAck)===null||i===void 0?void 0:i.contents)===null||s===void 0?void 0:s.handle},c)}a++}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const F6e=5e3,$6e=4e3;var Yn;(function(t){t[t.Off=0]="Off",t[t.Starting=1]="Starting",t[t.Running=2]="Running",t[t.Stopping=3]="Stopping"})(Yn||(Yn={}));class m1{constructor(e,n,r,i,s,a,{initialDelayMs:o=F6e,opsToBypassInitialDelay:l=$6e}={},c){this.clientElection=e,this.connectedState=n,this.summaryCollection=r,this.requestSummarizerFn=s,this.startThrottler=a,this.disableHeuristics=c,this.state=Yn.Off,this._disposed=!1,this.handleConnected=u=>{this.latestClientId=u,this.refreshSummarizer()},this.handleDisconnected=()=>{this.refreshSummarizer()},this.refreshSummarizer=()=>{const u=this.getShouldSummarizeState();switch(this.state){case Yn.Off:{u.shouldSummarize&&this.startSummarization();return}case Yn.Starting:return;case Yn.Running:{u.shouldSummarize===!1&&this.stop(u.stopReason);return}case Yn.Stopping:return;default:return}},this.summarizeOnDemand=(...u)=>{if(this.summarizer===void 0)throw Error("No running summarizer client");return this.summarizer.summarizeOnDemand(...u)},this.enqueueSummarize=(...u)=>{if(this.summarizer===void 0)throw Error("No running summarizer client");return this.summarizer.enqueueSummarize(...u)},this.logger=ot.create(i,"SummaryManager",{all:{clientId:()=>this.latestClientId}}),this.connectedState.on("connected",this.handleConnected),this.connectedState.on("disconnected",this.handleDisconnected),this.latestClientId=this.connectedState.clientId,this.opsToBypassInitialDelay=l,this.initialDelayMs=o}get disposed(){return this._disposed}get currentState(){return this.state}start(){this.clientElection.on("electedSummarizerChanged",this.refreshSummarizer),this.refreshSummarizer()}getShouldSummarizeState(){if(this.connectedState.clientId!==this.clientElection.electedParentId||this.state!==Yn.Running&&this.connectedState.clientId!==this.clientElection.electedClientId)return{shouldSummarize:!1,stopReason:"parentShouldNotSummarize"};if(this.connectedState.connected)if(this.disposed)N(!1,608);else return{shouldSummarize:!0};else return{shouldSummarize:!1,stopReason:"parentNotConnected"}}startSummarization(){N(this.state===Yn.Off,609),this.state=Yn.Starting,N(this.summarizer===void 0,610),this.delayBeforeCreatingSummarizer().then(async e=>{if(e&&this.getShouldSummarizeState().shouldSummarize===!1)return"early exit";N(this.state===Yn.Starting,611),this.state=Yn.Running;const n=await this.requestSummarizerFn();this.summarizer=n;const r=this.getShouldSummarizeState();if(r.shouldSummarize===!1)return this.state=Yn.Starting,n.stop(r.stopReason),"early exit after starting summarizer";const i=this.latestClientId;return gt.timedExecAsync(this.logger,{eventName:"RunningSummarizer",attempt:this.startThrottler.numAttempts},async()=>n.run(i,this.disableHeuristics))}).then(e=>{this.logger.sendTelemetryEvent({eventName:"EndingSummarizer",reason:e})}).catch(e=>{if(this.logger.sendTelemetryEvent({eventName:"EndingSummarizer",reason:"exception"},e),this.getShouldSummarizeState().shouldSummarize||this.summarizer!==void 0){const n=(e==null?void 0:e.errorType)===us.offlineError?"generic":"error";this.logger.sendTelemetryEvent({eventName:"SummarizerException",category:n},e)}}).finally(()=>{var e;N(this.state!==Yn.Off,612),this.state=Yn.Off,(e=this.summarizer)===null||e===void 0||e.close(),this.summarizer=void 0,this.getShouldSummarizeState().shouldSummarize&&this.startSummarization()})}stop(e){var n;m1.isStartingOrRunning(this.state)&&(this.state=Yn.Stopping,(n=this.summarizer)===null||n===void 0||n.stop(e))}async delayBeforeCreatingSummarizer(){let e=this.startThrottler.getDelay();this.logger.sendTelemetryEvent({eventName:"CreatingSummarizer",throttlerDelay:e,initialDelay:this.initialDelayMs,startThrottlerMaxDelayMs:this.startThrottler.maxDelayMs,opsSinceLastAck:this.summaryCollection.opsSinceLastAck,opsToBypassInitialDelay:this.opsToBypassInitialDelay});let n=!1;if(this.summaryCollection.opsSinceLastAck<this.opsToBypassInitialDelay&&(n=!0,e=Math.max(e,this.initialDelayMs)),e>0){let r,i;const s=()=>{this.summaryCollection.opsSinceLastAck>=this.opsToBypassInitialDelay&&(clearTimeout(r),i())},a=new Promise(l=>{r=setTimeout(()=>l(),e)}),o=new Promise(l=>{i=l});this.summaryCollection.addOpListener(s),await Promise.race([a,o]),this.summaryCollection.removeOpListener(s)}return n}dispose(){this.clientElection.off("electedSummarizerChanged",this.refreshSummarizer),this.connectedState.off("connected",this.handleConnected),this.connectedState.off("disconnected",this.handleDisconnected),this._disposed=!0}}m1.isStartingOrRunning=t=>t===Yn.Starting||t===Yn.Running;/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class Ap{constructor(e,n){this.logger=n,this.processingTimeIncrement=10,this.currentAllowedProcessingTimeForTurn=Ap.processingTime,this.schedulingCount=0,this.deltaManager=e,this.deltaManager.inbound.on("idle",()=>{this.inboundQueueIdle()})}batchBegin(e){this.processingStartTime||(this.processingStartTime=st.now()),this.schedulingLog===void 0&&this.schedulingCount%500===0&&(this.schedulingLog={opsRemainingToProcess:0,numberOfTurns:1,totalProcessingTime:0,numberOfBatchesProcessed:0,firstSequenceNumber:e.sequenceNumber,lastSequenceNumber:e.sequenceNumber,startTime:st.now()})}batchEnd(e){if(this.schedulingLog&&(this.schedulingLog.numberOfBatchesProcessed++,this.schedulingLog.lastSequenceNumber=e.sequenceNumber,this.schedulingLog.opsRemainingToProcess=this.deltaManager.inbound.length),this.shouldRunScheduler()){const n=st.now(),r=n-this.processingStartTime;r>this.currentAllowedProcessingTimeForTurn&&(this.deltaManager.inbound.pause(),this.currentAllowedProcessingTimeForTurn+=this.processingTimeIncrement,this.schedulingLog&&(this.schedulingLog.numberOfTurns++,this.schedulingLog.totalProcessingTime+=r),setTimeout(()=>{this.schedulingLog&&this.logger.sendTelemetryEvent({eventName:"InboundOpsPartialProcessingTime",duration:dn.formatTick(r),opsProcessed:this.schedulingLog.lastSequenceNumber-this.schedulingLog.firstSequenceNumber+1,opsRemainingToProcess:this.deltaManager.inbound.length,processingTime:dn.formatTick(this.schedulingLog.totalProcessingTime),numberOfTurns:this.schedulingLog.numberOfTurns,batchesProcessed:this.schedulingLog.numberOfBatchesProcessed,timeToResume:dn.formatTick(st.now()-n)}),this.deltaManager.inbound.resume()}),this.processingStartTime=void 0)}}inboundQueueIdle(){if(this.schedulingLog){const e=st.now();this.schedulingLog.totalProcessingTime+=e-this.processingStartTime,this.logger.sendTelemetryEvent({eventName:"InboundOpsProcessingTime",opsRemainingToProcess:this.schedulingLog.opsRemainingToProcess,numberOfTurns:this.schedulingLog.numberOfTurns,processingTime:dn.formatTick(this.schedulingLog.totalProcessingTime),opsProcessed:this.schedulingLog.lastSequenceNumber-this.schedulingLog.firstSequenceNumber+1,batchesProcessed:this.schedulingLog.numberOfBatchesProcessed,duration:dn.formatTick(e-this.schedulingLog.startTime),schedulingCount:this.schedulingCount}),this.schedulingLog=void 0}this.schedulingCount++,this.processingStartTime=void 0,this.currentAllowedProcessingTimeForTurn=Ap.processingTime}shouldRunScheduler(){return this.deltaManager.inbound.length>0}}Ap.processingTime=50;/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const Jj=5e3;class L6e{constructor(e,n,r){this.clientId=e,this.deltaManager=n,this.pongCount=0,this.msnTrackingTimestamp=0,this.opProcessingTimes={},this.opPerfData={},this.firstConnection=!0,this.bootTime=st.now(),this.connectionStartTime=0,this.gap=0,this.logger=ot.create(r,"OpPerf"),this.deltaManager.on("pong",i=>this.recordPingTime(i)),this.deltaManager.on("submitOp",i=>this.beforeOpSubmit(i)),this.deltaManager.on("op",i=>this.afterProcessingOp(i)),this.deltaManager.on("connect",(i,s)=>{this.clientId=i.clientId,s!==void 0&&(this.connectionOpSeqNumber=this.deltaManager.lastKnownSeqNumber,this.gap=s,this.connectionStartTime=st.now(),this.gap<=0&&this.reportGettingUpToDate())}),this.deltaManager.on("disconnect",()=>{this.sequenceNumberForMsnTracking=void 0,this.clientSequenceNumberForLatencyStatistics=void 0,this.opProcessingTimes={},this.opPerfData={},this.connectionOpSeqNumber=void 0,this.firstConnection=!1,this.pongCount=0}),this.deltaManager.outbound.on("push",i=>{for(const s of i)s.type===et.Operation&&this.clientSequenceNumberForLatencyStatistics===s.clientSequenceNumber&&(N(this.opProcessingTimes.outboundPushEventTime===void 0,712),N(this.opPerfData.durationNetwork===void 0,713),this.opProcessingTimes.outboundPushEventTime=Date.now(),N(this.opPerfData.durationOutboundBatching===void 0,714),N(this.opProcessingTimes.submitOpEventTime!==void 0,715),this.opPerfData.durationOutboundBatching=this.opProcessingTimes.outboundPushEventTime-this.opProcessingTimes.submitOpEventTime)}),this.deltaManager.inbound.on("push",i=>{this.clientId===i.clientId&&i.type===et.Operation&&this.clientSequenceNumberForLatencyStatistics===i.clientSequenceNumber&&this.opProcessingTimes.outboundPushEventTime!==void 0&&(this.opProcessingTimes.inboundPushEventTime=Date.now(),this.opPerfData.durationNetwork=this.opProcessingTimes.inboundPushEventTime-this.opProcessingTimes.outboundPushEventTime,this.opProcessingTimes.outboundPushEventTime=void 0,this.opPerfData.lengthInboundQueue=this.deltaManager.inbound.length)}),this.deltaManager.inbound.on("idle",(i,s)=>{typeof i=="number"&&i>=100&&this.logger.sendPerformanceEvent({eventName:"GetDeltas_OpProcessing",count:i,duration:s})})}reportGettingUpToDate(){this.connectionOpSeqNumber=void 0,this.logger.sendPerformanceEvent({eventName:"ConnectionSpeed",duration:st.now()-this.connectionStartTime,ops:this.gap,timeToConnect:this.firstConnection?dn.formatTick(this.connectionStartTime-this.bootTime):void 0,firstConnection:this.firstConnection})}recordPingTime(e){this.pingLatency=e,this.pongCount%100===0&&this.deltaManager.active&&this.logger.sendPerformanceEvent({eventName:"DeltaLatency",duration:e}),this.pongCount++}beforeOpSubmit(e){this.clientSequenceNumberForLatencyStatistics===void 0&&e.clientSequenceNumber%500===1&&(N(this.opProcessingTimes.outboundPushEventTime===void 0,716),N(this.opPerfData.durationNetwork===void 0,717),this.opProcessingTimes.submitOpEventTime=Date.now(),this.clientSequenceNumberForLatencyStatistics=e.clientSequenceNumber)}afterProcessingOp(e){const n=e.sequenceNumber;if(n===this.connectionOpSeqNumber&&this.reportGettingUpToDate(),this.sequenceNumberForMsnTracking===void 0&&n%1e3===0&&(this.sequenceNumberForMsnTracking=n,this.msnTrackingTimestamp=e.timestamp),this.sequenceNumberForMsnTracking!==void 0&&e.minimumSequenceNumber>=this.sequenceNumberForMsnTracking&&(N(this.msnTrackingTimestamp!==void 0,718),this.logger.sendPerformanceEvent({eventName:"MsnStatistics",sequenceNumber:n,msnDistance:n-this.sequenceNumberForMsnTracking,duration:e.timestamp-this.msnTrackingTimestamp}),this.sequenceNumberForMsnTracking=void 0),this.clientId===e.clientId&&this.clientSequenceNumberForLatencyStatistics===e.clientSequenceNumber){N(this.opProcessingTimes.submitOpEventTime!==void 0,288);const r=Date.now();this.opProcessingTimes.inboundPushEventTime!==void 0&&(this.opPerfData.durationInboundToProcessing=r-this.opProcessingTimes.inboundPushEventTime);const i=r-this.opProcessingTimes.submitOpEventTime,s=i>Jj?"error":"performance";this.logger.sendPerformanceEvent(Object.assign({eventName:"OpRoundtripTime",sequenceNumber:n,referenceSequenceNumber:e.referenceSequenceNumber,duration:i,category:s,pingLatency:this.pingLatency,msnDistance:this.deltaManager.lastSequenceNumber-this.deltaManager.minimumSequenceNumber},this.opPerfData)),this.clientSequenceNumberForLatencyStatistics=void 0,this.opPerfData={}}}}function B6e(t,e,n){new L6e(t,e,n)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class j6e{constructor(e,n,r){var i;this.stateHandler=e,this.pendingStates=new s2,this.disposeOnce=new lh(()=>{this.initialStates.clear(),this.pendingStates.clear()}),this._pendingMessagesCount=0,this.isProcessingBatch=!1,this.dispose=()=>this.disposeOnce.value,this.initialStates=new s2((i=r==null?void 0:r.pendingStates)!==null&&i!==void 0?i:[]),this.flushModeForNextMessage=n,this.onFlushModeUpdated(n)}get pendingMessagesCount(){return this._pendingMessagesCount}hasPendingMessages(){return this._pendingMessagesCount!==0||!this.initialStates.isEmpty()}getLocalState(){if(N(this.initialStates.isEmpty(),745),this.hasPendingMessages())return{pendingStates:this.pendingStates.toArray().map(e=>e.type==="message"?Object.assign(Object.assign({},e),{localOpMetadata:void 0}):e)}}get disposed(){return this.disposeOnce.evaluated}onSubmitMessage(e,n,r,i,s,a){const o={type:"message",messageType:e,clientSequenceNumber:n,referenceSequenceNumber:r,content:i,localOpMetadata:s,opMetadata:a};this.pendingStates.push(o),this._pendingMessagesCount++}onFlushModeUpdated(e){this.pendingStates.push({type:"flushMode",flushMode:e})}onFlush(){if(this.stateHandler.flushMode()===Je.FlushMode.Immediate)return;const e=this.pendingStates.peekBack();(e==null?void 0:e.type)==="message"&&this.pendingStates.push({type:"flush"})}async applyStashedOpsAt(e){for(;!this.initialStates.isEmpty();){const n=this.initialStates.peekFront();if(n.type==="message"){if(e!==void 0){if(n.referenceSequenceNumber>e)break;if(n.referenceSequenceNumber<e)throw new Error("loaded from snapshot too recent to apply stashed ops")}const r=await this.stateHandler.applyStashedOp(n.messageType,n.content);n.localOpMetadata=r}this.pendingStates.push(this.initialStates.shift())}}processPendingLocalMessage(e){this.maybeProcessBatchBegin(e);const n=this.peekNextPendingState();if(N(n.type==="message",361),this.pendingStates.shift(),n.clientSequenceNumber!==e.clientSequenceNumber){const r=Ni.create("pending local message clientSequenceNumber mismatch","unexpectedAckReceived",e,{expectedClientSequenceNumber:n.clientSequenceNumber});this.stateHandler.close(r);return}return this._pendingMessagesCount--,this.maybeProcessBatchEnd(e),n.localOpMetadata}maybeProcessBatchBegin(e){let n,r=!1,i=this.peekNextPendingState();for(;i.type!=="message";)i.type==="flushMode"&&(n=i.flushMode),i.type==="flush"&&(r=!0),this.pendingStates.shift(),i=this.peekNextPendingState();n!==void 0&&(this.flushModeForNextMessage=n),n!==Je.FlushMode.Immediate&&(n===Je.FlushMode.TurnBased||r)&&(N(!this.isProcessingBatch&&this.pendingBatchBeginMessage===void 0,363),this.pendingBatchBeginMessage=e,this.isProcessingBatch=!0)}maybeProcessBatchEnd(e){var n,r;if(!this.isProcessingBatch)return;const i=this.peekNextPendingState();if(i.type==="message")return;N(i.type!=="flushMode",701),N(this.pendingBatchBeginMessage!==void 0,365);const s=(n=this.pendingBatchBeginMessage.metadata)===null||n===void 0?void 0:n.batch;if(this.pendingBatchBeginMessage===e)N(s===void 0,366);else{const a=(r=e.metadata)===null||r===void 0?void 0:r.batch;N(s===!0,367),N(a===!1,368)}this.pendingBatchBeginMessage=void 0,this.isProcessingBatch=!1}checkpoint(){const e=this.pendingStates.peekBack();return{rollback:()=>{try{for(;this.pendingStates.peekBack()!==e;)this.rollbackNextPendingState()}catch(n){const r=Zb(n,i=>Ni.create(`RollbackError: ${i}`,"checkpointRollback",void 0));throw this.stateHandler.close(r),r}}}}peekNextPendingState(){const e=this.pendingStates.peekFront();return N(!!e,369),e}rollbackNextPendingState(){if(this.pendingStates.length===0)return;this._pendingMessagesCount--;const n=this.pendingStates.pop();switch(n.type){case"message":this.stateHandler.rollback(n.messageType,n.content,n.localOpMetadata);break;default:throw new Error(`Can't rollback state ${n.type}`)}}replayPendingStates(){N(this.stateHandler.connected(),370),N(this.clientId!==this.stateHandler.clientId(),371),this.clientId=this.stateHandler.clientId(),N(this.initialStates.isEmpty(),372);let e=this.pendingStates.length;if(e===0)return;this._pendingMessagesCount=0;const n=this.stateHandler.flushMode();for(this.stateHandler.setFlushMode(this.flushModeForNextMessage);e>0;){const r=this.pendingStates.shift();switch(r.type){case"message":this.stateHandler.reSubmit(r.messageType,r.content,r.localOpMetadata,r.opMetadata);break;case"flushMode":this.stateHandler.setFlushMode(r.flushMode);break;case"flush":this.stateHandler.flush();break}e--}this.stateHandler.setFlushMode(n)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 *
 * THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY
 */const Zg="1.3.6";/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class AD{constructor(e,n,r){this.path=e,this.routeContext=n,this.get=r,this.attached=!1,this.absolutePath=fm(e,this.routeContext)}get IFluidHandle(){return this}get isAttached(){return this.attached}attachGraph(){this.attached=!0}bind(e){throw new Error("Cannot bind to blob handle")}}class _i{constructor(e,n,r,i,s,a,o){this.routeContext=e,this.getStorage=r,this.attachBlobCallback=i,this.gcNodeUpdated=s,this.runtime=a,this.logger=o,this.blobIds=new Set,this.pendingBlobIds=new Map,this.detachedBlobIds=new Set,this.runtime.once("dispose",()=>{for(const l of this.pendingBlobIds.values())l.reject(new Error("runtime disposed while blobAttach op in flight"))}),this.load(n)}hasBlob(e){return this.blobIds.has(e)||this.detachedBlobIds.has(e)}getBlobGCNodePath(e){return`/${_i.basePath}/${e}`}async getBlob(e){var n,r;const i=(r=(n=this.redirectTable)===null||n===void 0?void 0:n.get(e))!==null&&r!==void 0?r:e;return N(this.hasBlob(i),287),this.gcNodeUpdated(this.getBlobGCNodePath(e)),new AD(`${_i.basePath}/${i}`,this.routeContext,async()=>gt.timedExecAsync(this.logger,{eventName:"AttachmentReadBlob",id:i},async()=>this.getStorage().readBlob(i),{end:!0,cancel:"error"}))}async createBlob(e){var n,r;this.runtime.attachState===ze.Attaching&&(this.logger.sendTelemetryEvent({eventName:"CreateBlobWhileAttaching"}),await new Promise(a=>this.runtime.once("attached",a))),!this.runtime.connected&&this.runtime.attachState===ze.Attached&&await new Promise(a=>this.runtime.once("connected",a));const i=await gt.timedExecAsync(this.logger,{eventName:"createBlob"},async()=>this.getStorage().createBlob(e),{end:!0,cancel:"error"}),s=new AD(`${_i.basePath}/${i.id}`,this.routeContext,async()=>this.getBlob(i.id).then(async a=>a.get()));return this.runtime.attachState===ze.Detached?(this.detachedBlobIds.add(i.id),s):(this.pendingBlobIds.has(i.id)?await((n=this.pendingBlobIds.get(i.id))===null||n===void 0?void 0:n.promise):this.blobIds.has(i.id)||(this.pendingBlobIds.set(i.id,new sn),this.attachBlobCallback(i.id),await((r=this.pendingBlobIds.get(i.id))===null||r===void 0?void 0:r.promise)),s)}processBlobAttachOp(e,n){if(n){const r=this.pendingBlobIds.get(e);N(r!==void 0,504),r.resolve(),this.pendingBlobIds.delete(e)}this.blobIds.add(e)}static async load(e,n){if(!e)return{};let r;const i=e.blobs[this.redirectTableBlobName];return i&&(r=await n(i)),{ids:Object.entries(e.blobs).filter(([a,o])=>a!==this.redirectTableBlobName).map(([a,o])=>o),redirectTable:r}}load(e){var n,r,i;if(e.ids){const s=this.runtime.attachState===ze.Detached;e.ids.map(a=>s?this.detachedBlobIds.add(a):this.blobIds.add(a))}e.redirectTable&&(this.redirectTable=new Map(e.redirectTable)),this.logger.sendTelemetryEvent({eventName:"AttachmentBlobsLoaded",count:(r=(n=e.ids)===null||n===void 0?void 0:n.length)!==null&&r!==void 0?r:0,redirectTable:(i=e.redirectTable)===null||i===void 0?void 0:i.length})}getGCData(e=!1){const n={gcNodes:{}};if(this.blobIds.forEach(r=>{n.gcNodes[this.getBlobGCNodePath(r)]=[]}),this.redirectTable!==void 0)for(const[r,i]of this.redirectTable)n.gcNodes[this.getBlobGCNodePath(r)]=[this.getBlobGCNodePath(i)];return n}deleteUnusedRoutes(e){var n;for(const r of e){const i=r.split("/");N(i.length===3&&i[1]===_i.basePath,725);const s=i[2];if(!((n=this.redirectTable)===null||n===void 0)&&n.has(s)){this.redirectTable.delete(s);continue}this.blobIds.delete(s)}}summarize(e){const r=!!this.redirectTable||this.runtime.attachState!==ze.Detached?this.blobIds:this.detachedBlobIds,i=new mi;return r.forEach(s=>{i.addAttachment(s)}),this.redirectTable&&this.redirectTable.size>0&&i.addBlob(_i.redirectTableBlobName,JSON.stringify(Array.from(this.redirectTable.entries()))),i.getSummaryTree()}setRedirectTable(e){N(this.runtime.attachState===ze.Detached,594),N(!this.redirectTable,595);for(const[n,r]of e)N(this.detachedBlobIds.delete(n),596),this.blobIds.add(r);N(this.detachedBlobIds.size===0,597),this.redirectTable=e}}_i.basePath="_blobs";_i.redirectTableBlobName=".redirectTable";/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class q6e{constructor(e){this.notBoundContexts=new Set,this._contexts=new Map,this.deferredContexts=new Map,this.disposeOnce=new lh(()=>{for(const[n,r]of this.deferredContexts)r.promise.then(i=>{i.dispose()}).catch(i=>{this._logger.sendErrorEvent({eventName:"FluidDataStoreContextDisposeError",fluidDataStoreId:n},i)})}),this.dispose=()=>this.disposeOnce.value,this._logger=ot.create(e)}[Symbol.iterator](){return this._contexts.entries()}get size(){return this._contexts.size}get disposed(){return this.disposeOnce.evaluated}notBoundLength(){return this.notBoundContexts.size}isNotBound(e){return this.notBoundContexts.has(e)}has(e){return this._contexts.has(e)}get(e){return this._contexts.get(e)}delete(e){return this.deferredContexts.delete(e),this.notBoundContexts.delete(e),this._contexts.delete(e)}getUnbound(e){if(!(this._contexts.get(e)===void 0||!this.notBoundContexts.has(e)))return this._contexts.get(e)}addUnbound(e){const n=e.id;N(!this._contexts.has(n),344),this._contexts.set(n,e),this.notBoundContexts.add(n),this.ensureDeferred(n)}async getBoundOrRemoted(e,n){const r=this.ensureDeferred(e);if(!(!n&&!r.isCompleted))return r.promise}ensureDeferred(e){const n=this.deferredContexts.get(e);if(n)return n;const r=new sn;return this.deferredContexts.set(e,r),r}bind(e){const n=this.notBoundContexts.delete(e);N(n,345),this.resolveDeferred(e)}resolveDeferred(e){const n=this._contexts.get(e);N(!!n,346),N(!this.notBoundContexts.has(e),347);const r=this.deferredContexts.get(e);N(!!r,348),r.resolve(n)}addBoundOrRemoted(e){const n=e.id;N(!this._contexts.has(n),349),this._contexts.set(n,e),this.ensureDeferred(n),this.resolveDeferred(n)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var z6e=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const H6e=1,Io="gc",Xj="__gc",U6e="Fluid.GarbageCollection.RunGC",V6e="Fluid.GarbageCollection.RunSweep",W6e="Fluid.GarbageCollection.GCTestMode",G6e="Fluid.GarbageCollection.WriteDataAtRoot",K6e="Fluid.GarbageCollection.RunSessionExpiry",Y6e="Fluid.GarbageCollection.DisableSessionExpiry",J6e="Fluid.GarbageCollection.TrackGCState",X6e="Fluid.GarbageCollection.DisableSweepLog",Hk=1*24*60*60*1e3,Q6e=7*Hk,Z6e=30*Hk,Lr={DataStore:"DataStore",SubDataStore:"SubDataStore",Blob:"Blob",Other:"Other"},Ei={Active:"Active",Inactive:"Inactive",SweepReady:"SweepReady"};class OD{constructor(e,n,r,i){this.unreferencedTimestampMs=e,this.inactiveTimeoutMs=n,this.sweepTimeoutMs=r,this._state=Ei.Active,i!==void 0&&this.updateTracking(i)}get state(){return this._state}updateTracking(e){const n=e-this.unreferencedTimestampMs;if(this.sweepTimeoutMs!==void 0&&n>=this.sweepTimeoutMs){this._state=Ei.SweepReady,this.clearTimers();return}if(n>=this.inactiveTimeoutMs){this._state=Ei.Inactive,this.clearTimers(),this.sweepTimeoutMs!==void 0&&Sv(this.sweepTimeoutMs-n,()=>{this._state=Ei.SweepReady},i=>{this.sweepTimer=i});return}const r=this.inactiveTimeoutMs-n;if(this.inactiveTimer===void 0){const i=()=>{this._state=Ei.Inactive,this.sweepTimeoutMs!==void 0&&Sv(this.sweepTimeoutMs-this.inactiveTimeoutMs,()=>{this._state=Ei.SweepReady},s=>{this.sweepTimer=s})};this.inactiveTimer=new Ec(r,()=>i())}this.inactiveTimer.restart(r)}clearTimers(){var e;(e=this.inactiveTimer)===null||e===void 0||e.clear(),this.sweepTimer!==void 0&&clearTimeout(this.sweepTimer)}stopTracking(){this.clearTimers(),this._state=Ei.Active}}class Uk{constructor(e){var n,r,i,s,a,o,l;this._writeDataAtRoot=!0,this.initialStateNeedsReset=!1,this.currentGCVersion=H6e,this.newReferencesSinceLastRun=new Map,this.unreferencedNodesState=new Map,this.loggedUnreferencedEvents=new Set,this.pendingEventsQueue=[],this.completedRuns=0,this.runtime=e.runtime,this.isSummarizerClient=e.isSummarizerClient,this.gcOptions=e.gcOptions,this.getNodePackagePath=e.getNodePackagePath,this.getLastSummaryTimestampMs=e.getLastSummaryTimestampMs;const c=e.baseSnapshot,u=e.metadata,d=e.readAndParseBlob;this.mc=ch(ot.create(e.baseLogger,"GarbageCollector",{all:{completedGCRuns:()=>this.completedRuns}}));let h;if(e.existing)h=FD(u),this.gcEnabled=h>0,this.sweepEnabled=(n=u==null?void 0:u.sweepEnabled)!==null&&n!==void 0?n:!1,this.sessionExpiryTimeoutMs=u==null?void 0:u.sessionExpiryTimeoutMs;else{if(this.gcOptions.sweepAllowed&&this.gcOptions.gcAllowed===!1)throw new Tt("GC sweep phase cannot be enabled without enabling GC mark phase");this.gcEnabled=this.gcOptions.gcAllowed!==!1,this.sweepEnabled=this.gcOptions.sweepAllowed===!0,this.mc.config.getBoolean(K6e)&&this.gcEnabled&&(this.sessionExpiryTimeoutMs=Z6e)}if(this.sessionExpiryTimeoutMs!==void 0&&this.mc.config.getBoolean(Y6e)!==!0){const m=this.mc.config.getNumber("Fluid.GarbageCollection.TestOverride.SessionExpiryMs"),g=m??this.sessionExpiryTimeoutMs;Sv(g,()=>{this.runtime.closeFn(new g5e("Client session expired.",g))},v=>{this.sessionExpiryTimer=v}),e.snapshotCacheExpiryMs!==void 0&&(this.sweepTimeoutMs=this.sessionExpiryTimeoutMs+e.snapshotCacheExpiryMs+Hk)}if(this.latestSummaryGCVersion=h??this.currentGCVersion,this.shouldRunGC=(r=this.mc.config.getBoolean(U6e))!==null&&r!==void 0?r:this.gcEnabled&&!this.gcOptions.disableGC,this.shouldRunSweep=this.shouldRunGC&&this.sweepTimeoutMs!==void 0&&((i=this.mc.config.getBoolean(V6e))!==null&&i!==void 0?i:this.sweepEnabled),this.trackGCState=this.mc.config.getBoolean(J6e)===!0,this.inactiveTimeoutMs=(a=(s=this.mc.config.getNumber("Fluid.GarbageCollection.TestOverride.InactiveTimeoutMs"))!==null&&s!==void 0?s:this.gcOptions.inactiveTimeoutMs)!==null&&a!==void 0?a:Q6e,this.sweepTimeoutMs!==void 0&&this.inactiveTimeoutMs>this.sweepTimeoutMs)throw new Tt("inactive timeout should not be greated than the sweep timeout");if(this.testMode=(o=this.mc.config.getBoolean(W6e))!==null&&o!==void 0?o:this.gcOptions.runGCInTestMode===!0,this._writeDataAtRoot=(l=this.mc.config.getBoolean(G6e))!==null&&l!==void 0?l:!0,this._writeDataAtRoot){const m=(c==null?void 0:c.trees[Io])!==void 0;this.initialStateNeedsReset=m!==this.shouldRunGC}const p=new Qa(async()=>{var m;if(c===void 0)return;const g=c.trees[Io];if(g!==void 0){this._writeDataAtRoot=!0;const b=await DD(g,d);return this.trackGCState&&(this.latestSerializedSummaryState=JSON.stringify(Px(b))),b}const v={gcNodes:{"/":{outboundRoutes:[]}}},y=n7(c,u);N(y!==void 0,680);for(const[b,C]of Object.entries(y.trees)){const R=C.blobs[Je.gcBlobKey];if(R===void 0)continue;const w=await d(R);if(((m=w.gcData)===null||m===void 0?void 0:m.gcNodes)===void 0)continue;const E=`/${b}`;(await d(C.blobs[Pc])).isRootDataStore&&v.gcNodes["/"].outboundRoutes.push(E);for(const[T,_]of Object.entries(w.gcData.gcNodes)){const D=T==="/"?E:`${E}${T}`;v.gcNodes[D]={outboundRoutes:Array.from(_)}}N(v.gcNodes[E]!==void 0,681),v.gcNodes[E].unreferencedTimestampMs=w.unrefTimestamp}return Object.keys(v.gcNodes).length===1?void 0:v});this.initializeBaseStateP=new Qa(async()=>{const m=this.runtime.getCurrentReferenceTimestampMs(),g=await p;if(g===void 0)return;const v={};for(const[y,b]of Object.entries(g.gcNodes))b.unreferencedTimestampMs!==void 0&&this.unreferencedNodesState.set(y,new OD(b.unreferencedTimestampMs,this.inactiveTimeoutMs,this.sweepTimeoutMs,m)),v[y]=Array.from(b.outboundRoutes);this.previousGCDataFromLastRun={gcNodes:v}}),this.baseGCDetailsP=new Qa(async()=>{const m=await p;if(m===void 0)return new Map;const g={};for(const[b,C]of Object.entries(m.gcNodes))g[b]=Array.from(C.outboundRoutes);const v=Rx(g,["/"]).referencedNodeIds,y=Wj({gcData:{gcNodes:g},usedRoutes:v});for(const[b,C]of Object.entries(m.gcNodes))if(C.unreferencedTimestampMs!==void 0){const R=y.get(b.slice(1));R!==void 0&&(R.unrefTimestamp=C.unreferencedTimestampMs)}return y});const f=JSON.stringify(Object.assign({gcEnabled:this.gcEnabled,sweepEnabled:this.sweepEnabled,runGC:this.shouldRunGC,runSweep:this.shouldRunSweep,writeAtRoot:this._writeDataAtRoot,testMode:this.testMode,sessionExpiry:this.sessionExpiryTimeoutMs,inactiveTimeout:this.inactiveTimeoutMs,existing:e.existing,trackGCState:this.trackGCState},this.gcOptions));this.isSummarizerClient&&this.mc.logger.sendTelemetryEvent({eventName:"GarbageCollectorLoaded",gcConfigs:f}),this.shouldRunGC&&this.initializeBaseStateP.catch(m=>{const g=Ni.wrapIfUnrecognized(m,"FailedToInitializeGC");throw g.addTelemetryProperties({gcConfigs:f}),g})}static create(e){return new Uk(e)}get summaryStateNeedsReset(){return this.initialStateNeedsReset||this.shouldRunGC&&this.latestSummaryGCVersion!==this.currentGCVersion}get writeDataAtRoot(){return this._writeDataAtRoot}async collectGarbage(e){const{fullGC:n=this.gcOptions.runFullGC===!0||this.summaryStateNeedsReset}=e,r=e.logger?ot.create(e.logger,void 0,{all:{completedGCRuns:()=>this.completedRuns}}):this.mc.logger;return gt.timedExecAsync(r,{eventName:"GarbageCollection"},async i=>{await this.runPreGCSteps();const s=await this.runtime.getGCData(n),a=Rx(s.gcNodes,["/"]),o=await this.runPostGCSteps(s,a,r);return i.end(Object.assign({},o)),this.completedRuns++,o},{end:!0,cancel:"error"})}async runPreGCSteps(){await this.initializeBaseStateP,await this.runtime.updateStateBeforeGC()}async runPostGCSteps(e,n,r){const i=this.generateStats(n);this.updateStateSinceLastRun(e,r);const s=this.runtime.getCurrentReferenceTimestampMs();return this.updateCurrentState(e,n,s),this.runtime.updateUsedRoutes(n.referencedNodeIds,s),this.logSweepEvents(r,s),this.testMode&&this.runtime.deleteUnusedRoutes(n.deletedNodeIds),await this.logUnreferencedEvents(r),i}summarize(e,n,r){var i;if(!this.shouldRunGC||this.previousGCDataFromLastRun===void 0)return;const s={gcNodes:{}};for(const[l,c]of Object.entries(this.previousGCDataFromLastRun.gcNodes))s.gcNodes[l]={outboundRoutes:c,unreferencedTimestampMs:(i=this.unreferencedNodesState.get(l))===null||i===void 0?void 0:i.unreferencedTimestampMs};const a=JSON.stringify(Px(s));if(this.trackGCState&&(this.pendingSerializedSummaryState=a,this.latestSerializedSummaryState!==void 0&&this.latestSerializedSummaryState===a&&!e&&n)){const l=ol();return l.handleNodeCount++,{summary:{type:Ne.Handle,handle:`/${Io}`,handleType:Ne.Tree},stats:l}}const o=new mi;return o.addBlob(`${Xj}_root`,a),o.getSummaryTree()}getMetadata(){return{gcFeature:this.gcEnabled?this.currentGCVersion:0,sessionExpiryTimeoutMs:this.sessionExpiryTimeoutMs,sweepEnabled:this.sweepEnabled}}async getBaseGCDetails(){return this.baseGCDetailsP}async latestSummaryStateRefreshed(e,n){if(!this.shouldRunGC||!e.latestSummaryUpdated)return;if(e.wasSummaryTracked){this.latestSummaryGCVersion=this.currentGCVersion,this.initialStateNeedsReset=!1,this.trackGCState&&(this.latestSerializedSummaryState=this.pendingSerializedSummaryState,this.pendingSerializedSummaryState=void 0);return}const r=e.snapshot,i=r.blobs[w2];if(i){const a=await n(i);this.latestSummaryGCVersion=FD(a)}const s=r.trees[Io];if(s!==void 0&&this.trackGCState){const a=await DD(s,n);this.latestSerializedSummaryState=JSON.stringify(Px(a))}else this.latestSerializedSummaryState=void 0;this.pendingSerializedSummaryState=void 0}nodeUpdated(e,n,r,i,s){if(!this.shouldRunGC)return;const a=this.unreferencedNodesState.get(e);a&&a.state!==Ei.Active&&this.inactiveNodeUsed(n,e,a,void 0,i,r,s)}addedOutboundReference(e,n){var r;if(!this.shouldRunGC)return;const i=(r=this.newReferencesSinceLastRun.get(e))!==null&&r!==void 0?r:[];i.push(n),this.newReferencesSinceLastRun.set(e,i);const s=this.unreferencedNodesState.get(n);s&&s.state!==Ei.Active&&this.inactiveNodeUsed("Revived",n,s,e)}dispose(){this.sessionExpiryTimer!==void 0&&(clearTimeout(this.sessionExpiryTimer),this.sessionExpiryTimer=void 0)}updateCurrentState(e,n,r){this.previousGCDataFromLastRun=Af(e),this.newReferencesSinceLastRun.clear();for(const i of n.referencedNodeIds){const s=this.unreferencedNodesState.get(i);s!==void 0&&(s.stopTracking(),this.unreferencedNodesState.delete(i))}if(r!==void 0)for(const i of n.deletedNodeIds){const s=this.unreferencedNodesState.get(i);s===void 0?this.unreferencedNodesState.set(i,new OD(r,this.inactiveTimeoutMs,this.sweepTimeoutMs,r)):s.updateTracking(r)}}updateStateSinceLastRun(e,n){if(this.previousGCDataFromLastRun===void 0)return;const r=this.findMissingExplicitReferences(e,this.previousGCDataFromLastRun,this.newReferencesSinceLastRun);if(this.writeDataAtRoot&&r.length>0&&r.forEach(a=>{const o={eventName:"gcUnknownOutboundReferences",gcNodeId:a[0],gcRoutes:JSON.stringify(a[1])};n.sendPerformanceEvent(o)}),this.newReferencesSinceLastRun.size===0)return;const i=b6e(this.previousGCDataFromLastRun,e);this.newReferencesSinceLastRun.forEach((a,o)=>{i.gcNodes[o]===void 0?i.gcNodes[o]=a:i.gcNodes[o].push(...a)});const s=Rx(i.gcNodes,["/"]);for(const a of s.referencedNodeIds){const o=this.unreferencedNodesState.get(a);o!==void 0&&(o.stopTracking(),this.unreferencedNodesState.delete(a))}}findMissingExplicitReferences(e,n,r){N(n!==void 0,695);const i=Object.entries(e.gcNodes),s=[];return i.forEach(([a,o])=>{var l,c;const u=(l=n.gcNodes[a])!==null&&l!==void 0?l:[],d=(c=r.get(a))!==null&&c!==void 0?c:[],h=[];o.forEach(p=>{const f=this.runtime.getNodeType(p)===Lr.Blob||this.runtime.getNodeType(p)===Lr.DataStore,m=!a.startsWith(p);f&&m&&!u.includes(p)&&!d.includes(p)&&h.push(p)}),h.length>0&&s.push([a,h])}),s}generateStats(e){const n={nodeCount:0,dataStoreCount:0,attachmentBlobCount:0,unrefNodeCount:0,unrefDataStoreCount:0,unrefAttachmentBlobCount:0,updatedNodeCount:0,updatedDataStoreCount:0,updatedAttachmentBlobCount:0},r=(i,s)=>{n.nodeCount++;const a=this.previousGCDataFromLastRun===void 0||this.unreferencedNodesState.has(i)===s;a&&n.updatedNodeCount++,s||n.unrefNodeCount++,this.runtime.getNodeType(i)===Lr.DataStore&&(n.dataStoreCount++,a&&n.updatedDataStoreCount++,s||n.unrefDataStoreCount++),this.runtime.getNodeType(i)===Lr.Blob&&(n.attachmentBlobCount++,a&&n.updatedAttachmentBlobCount++,s||n.unrefAttachmentBlobCount++)};for(const i of e.referencedNodeIds)r(i,!0);for(const i of e.deletedNodeIds)r(i,!1);return n}logSweepEvents(e,n){this.mc.config.getBoolean(X6e)===!0||n===void 0||this.sweepTimeoutMs===void 0||this.unreferencedNodesState.forEach((r,i)=>{if(r.state!==Ei.SweepReady)return;const s=this.runtime.getNodeType(i);if(s!==Lr.DataStore&&s!==Lr.Blob)return;const a=`Deleted-${i}`;this.loggedUnreferencedEvents.has(a)||(this.loggedUnreferencedEvents.add(a),e.sendTelemetryEvent({eventName:"GCObjectDeleted",id:i,type:s,age:n-r.unreferencedTimestampMs,timeout:this.sweepTimeoutMs,completedGCRuns:this.completedRuns,lastSummaryTime:this.getLastSummaryTimestampMs()}))})}inactiveNodeUsed(e,n,r,i,s,a=this.runtime.getCurrentReferenceTimestampMs(),o){if(a===void 0||r.state===Ei.Active||!this.isSummarizerClient&&e!=="Loaded")return;const l=this.runtime.getNodeType(n);if(l!==Lr.DataStore&&l!==Lr.Blob)return;const c=r.state,u=`${c}-${n}-${e}`;if(this.loggedUnreferencedEvents.has(u))return;this.loggedUnreferencedEvents.add(u);const d={id:n,type:l,unrefTime:r.unreferencedTimestampMs,age:a-r.unreferencedTimestampMs,timeout:r.state===Ei.Inactive?this.inactiveTimeoutMs:this.sweepTimeoutMs,completedGCRuns:this.completedRuns,lastSummaryTime:this.getLastSummaryTimestampMs(),externalRequest:o==null?void 0:o[Yo.externalRequest],viaHandle:o==null?void 0:o[Yo.viaHandle],fromId:i};this.isSummarizerClient?this.pendingEventsQueue.push(Object.assign(Object.assign({},d),{usageType:e,state:c})):this.mc.logger.sendErrorEvent(Object.assign(Object.assign({},d),{eventName:`${c}Object_${e}`,pkg:s?{value:s.join("/"),tag:Vt.CodeArtifact}:void 0}))}async logUnreferencedEvents(e){for(const n of this.pendingEventsQueue){const{usageType:r,state:i}=n,s=z6e(n,["usageType","state"]),a=this.unreferencedNodesState.get(n.id),o=a===void 0||a.state===Ei.Active;if(r==="Revived"===o){const l=await this.getNodePackagePath(n.id),c=n.fromId?await this.getNodePackagePath(n.fromId):void 0;e.sendErrorEvent(Object.assign(Object.assign({},s),{eventName:`${i}Object_${r}`,pkg:l?{value:l.join("/"),tag:Vt.CodeArtifact}:void 0,fromPkg:c?{value:c.join("/"),tag:Vt.CodeArtifact}:void 0}))}}this.pendingEventsQueue=[]}}async function DD(t,e){let n={gcNodes:{}};for(const r of Object.keys(t.blobs)){if(!r.startsWith(Xj))continue;const i=t.blobs[r];if(i===void 0)continue;const s=await e(i);N(s!==void 0,685),n=y6e(n,s)}return n}function Px(t){const e=Object.entries(t.gcNodes);e.sort(([r],[i])=>r.localeCompare(i));const n={gcNodes:{}};for(const[r,i]of e)i.outboundRoutes.sort(),n.gcNodes[r]=i;return n}function Sv(t,e,n){let i;if(t>2147483647){const s=t-2147483647;i=setTimeout(()=>Sv(s,e,n),2147483647)}else i=setTimeout(()=>e(),t);n(i)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function Qj(t){return t.summaryFormatVersion?t.summaryFormatVersion:t.snapshotFormatVersion==="0.1"?1:0}function Zj(t){return!!t.summaryFormatVersion&&!t.disableIsolatedChannels}const eNe=t=>t===void 0?void 0:{clientId:t.clientId,clientSequenceNumber:t.clientSequenceNumber,minimumSequenceNumber:t.minimumSequenceNumber,referenceSequenceNumber:t.referenceSequenceNumber,sequenceNumber:t.sequenceNumber,timestamp:t.timestamp,type:t.type},ID=".aliases",w2=".metadata",MD=".chunks",ND=".electedSummarizer",C2=".blobs";function tNe(t){return!!t&&!t.disableIsolatedChannels}function FD(t){var e;return t&&(e=t.gcFeature)!==null&&e!==void 0?e:0}const nNe=".protocol",rNe=[nNe,".logTail",".serviceProtocol",C2,Io],Pc=".component";function xv(t){t.summary={type:Ne.Tree,tree:{[Je.channelsTreeName]:t.summary}},t.stats.treeNodeCount++}async function iNe(t,e){const n=await zn(t,e.blobs[Pc]),r=Qj(n);return N(r>0,469),n}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function Vk(t,e,n){const r=JSON.stringify(t);return n?{pkg:r,snapshotFormatVersion:"0.1",isRootDataStore:e}:{pkg:r,summaryFormatVersion:2,isRootDataStore:e}}function sNe(t,e,n){const r=Vk(t,e,n);return new xB(Pc,JSON.stringify(r))}class mm extends An{constructor(e,n,r,i,s){super(),this.existing=n,this.bindState=r,this.isLocalDataStore=i,this.makeLocallyVisibleFn=s,this._disposed=!1,this.detachedRuntimeCreation=!1,this.loaded=!1,this.pending=[],this._isInMemoryRoot=!1,this._containerRuntime=e.runtime,this.id=e.id,this.storage=e.storage,this.scope=e.scope,this.writeGCDataAtRoot=e.writeGCDataAtRoot,this.disableIsolatedChannels=e.disableIsolatedChannels,this.pkg=e.pkg,N(!this.id.includes("/"),314),this._attachState=this.containerRuntime.attachState!==ze.Detached&&this.existing?this.containerRuntime.attachState:ze.Detached,this.bindToContext=()=>{N(this.bindState===Pi.NotBound,315),this.bindState=Pi.Binding,N(this.channel!==void 0,316),this.makeLocallyVisible(),this.bindState=Pi.Bound};const a=async(o,l,c)=>this.summarizeInternal(o,l,c);this.summarizerNode=e.createSummarizerNodeFn(a,async o=>this.getGCDataInternal(o),async()=>this.getBaseGCDetails()),this.subLogger=ot.create(this.logger,"FluidDataStoreContext"),this.thresholdOpsCounter=new bB(mm.pendingOpsCountThreshold,this.subLogger)}get packagePath(){return N(this.pkg!==void 0,313),this.pkg}get options(){return this._containerRuntime.options}get clientId(){return this._containerRuntime.clientId}get clientDetails(){return this._containerRuntime.clientDetails}get logger(){return this._containerRuntime.logger}get deltaManager(){return this._containerRuntime.deltaManager}get connected(){return this._containerRuntime.connected}get IFluidHandleContext(){return this._containerRuntime.IFluidHandleContext}get containerRuntime(){return this._containerRuntime}get isLoaded(){return this.loaded}get baseSnapshot(){return this._baseSnapshot}get disposed(){return this._disposed}get attachState(){return this._attachState}get IFluidDataStoreRegistry(){return this.registry}async isRoot(){return this.isInMemoryRoot()||(await this.getInitialSnapshotDetails()).isRootDataStore}isInMemoryRoot(){return this._isInMemoryRoot}dispose(){this._disposed||(this._disposed=!0,this.channelDeferred&&this.channelDeferred.promise.then(e=>{e.dispose()}).catch(e=>{}))}rejectDeferredRealize(e,n){throw new rt(e,{packageName:{value:n,tag:Vt.PackageData}})}async realize(){return N(!this.detachedRuntimeCreation,317),this.channelDeferred||(this.channelDeferred=new sn,this.realizeCore(this.existing).catch(e=>{var n;const r=Ni.wrapIfUnrecognized(e,"realizeFluidDataStoreContext");r.addTelemetryProperties({fluidDataStoreId:{value:this.id,tag:"PackageData"}}),(n=this.channelDeferred)===null||n===void 0||n.reject(r),this.logger.sendErrorEvent({eventName:"RealizeError"},r)})),this.channelDeferred.promise}async factoryFromPackagePath(e){N(this.pkg===e,318),e===void 0&&this.rejectDeferredRealize("packages is undefined");let n,r=this._containerRuntime.IFluidDataStoreRegistry,i;for(const a of e)r||this.rejectDeferredRealize("No registry for package",i),i=a,n=await r.get(a),n||this.rejectDeferredRealize("Registry does not contain entry for the package",a),r=n.IFluidDataStoreRegistry;const s=n==null?void 0:n.IFluidDataStoreFactory;return s===void 0&&this.rejectDeferredRealize("Can't find factory for package",i),{factory:s,registry:r}}async realizeCore(e){const n=await this.getInitialSnapshotDetails();this._baseSnapshot=n.snapshot;const r=n.pkg,{factory:i,registry:s}=await this.factoryFromPackagePath(r);N(this.registry===void 0,319),this.registry=s;const a=await i.instantiateDataStore(this,e);N(a!==void 0,320),this.bindRuntime(a)}setConnectionState(e,n){this.verifyNotClosed(),this.loaded&&(N(this.connected===e,321),this.channel.setConnectionState(e,n))}process(e,n,r){var i;this.verifyNotClosed();const s=e.contents,a=Object.assign(Object.assign({},e),{type:s.type,contents:s.content});if(this.summarizerNode.recordChange(a),this.loaded)return(i=this.channel)===null||i===void 0?void 0:i.process(a,n,r);N(!n,322),N(this.pending!==void 0,573),this.pending.push(a),this.thresholdOpsCounter.sendIfMultiple("StorePendingOps",this.pending.length)}processSignal(e,n){var r;this.verifyNotClosed(),this.loaded&&((r=this.channel)===null||r===void 0||r.processSignal(e,n))}getQuorum(){return this._containerRuntime.getQuorum()}getAudience(){return this._containerRuntime.getAudience()}async summarize(e=!1,n=!0,r){return this.summarizerNode.summarize(e,n,r)}async summarizeInternal(e,n,r){await this.realize();const i=await this.channel.summarize(e,n,r);let s;this.disableIsolatedChannels||(xv(i),s=[Je.channelsTreeName]);const{pkg:a}=await this.getInitialSnapshotDetails(),o=await this.isRoot(),l=Vk(a,o,this.disableIsolatedChannels);return ia(i,Pc,JSON.stringify(l)),this.writeGCDataAtRoot||ia(i,Je.gcBlobKey,JSON.stringify(this.summarizerNode.getGCSummaryDetails())),this.summarizerNode.isReferenced()||(i.summary.unreferenced=!0,i.stats.unreferencedBlobSize=i.stats.totalBlobSize),Object.assign(Object.assign({},i),{id:this.id,pathPartsForChildren:s})}async getGCData(e=!1){return this.summarizerNode.getGCData(e)}async getGCDataInternal(e=!1){return await this.realize(),N(this.channel!==void 0,323),this.channel.getGCData(e)}updateUsedRoutes(e,n){this.summarizerNode.updateUsedRoutes(e,n),this.lastUsedState={usedRoutes:e,gcTimestamp:n},this.loaded&&this.updateChannelUsedRoutes()}addedGCOutboundReference(e,n){this._containerRuntime.addedGCOutboundReference(e,n)}updateChannelUsedRoutes(){if(N(this.loaded,324),N(this.channel!==void 0,325),this.lastUsedState===void 0)return;const e=this.lastUsedState.usedRoutes.filter(n=>n!=="/"&&n!=="");this.channel.updateUsedRoutes(e,this.lastUsedState.gcTimestamp)}async request(e){return(await this.realize()).request(e)}submitMessage(e,n,r){this.verifyNotClosed(),N(!!this.channel,326);const i={content:n,type:e};this._containerRuntime.submitDataStoreOp(this.id,i,r)}setChannelDirty(e){this.verifyNotClosed();const n=this.deltaManager.lastSequenceNumber;this.summarizerNode.invalidate(n);const r=this.summarizerNode.getChild(e);r&&r.invalidate(n)}submitSignal(e,n){return this.verifyNotClosed(),N(!!this.channel,327),this._containerRuntime.submitDataStoreSignal(this.id,e,n)}makeLocallyVisible(){N(this.channel!==void 0,719),this.makeLocallyVisibleFn()}bindRuntime(e){var n;if(this.channel)throw new Error("Runtime already bound");try{N(!this.detachedRuntimeCreation,328),N(this.channelDeferred!==void 0,329),N(this.pkg!==void 0,330);const r=this.pending;for(const i of r)e.process(i,!1,void 0);this.thresholdOpsCounter.send("ProcessPendingOps",r.length),this.pending=void 0,this.loaded=!0,this.channel=e,Object.freeze(this.pkg),this.updateChannelUsedRoutes(),this.channelDeferred.resolve(this.channel)}catch(r){(n=this.channelDeferred)===null||n===void 0||n.reject(r),this.logger.sendErrorEvent({eventName:"BindRuntimeError",fluidDataStoreId:{value:this.id,tag:"PackageData"}},r)}}async getAbsoluteUrl(e){if(this.attachState===ze.Attached)return this._containerRuntime.getAbsoluteUrl(e)}setInMemoryRoot(){this._isInMemoryRoot=!0}reSubmit(e,n){N(!!this.channel,331);const r=e;this.channel.reSubmit(r.type,r.content,n)}rollback(e,n){if(!this.channel)throw new Error("Channel must exist when rolling back ops");if(!this.channel.rollback)throw new Error("Channel doesn't support rollback");const r=e;this.channel.rollback(r.type,r.content,n)}async applyStashedOp(e){this.channel||await this.realize(),N(!!this.channel,332);const n=e;return this.channel.applyStashedOp(n.content)}verifyNotClosed(){if(this._disposed)throw new Error("Context is closed")}getCreateChildSummarizerNodeFn(e,n){return(r,i,s)=>this.summarizerNode.createChild(r,e,n,{throwOnFailure:!0},i,s)}async uploadBlob(e){return this.containerRuntime.uploadBlob(e)}}mm.pendingOpsCountThreshold=1e3;class $D extends mm{constructor(e){super(e,!0,Pi.Bound,!1,()=>{throw new Error("Already attached")}),this.initialSnapshotDetailsP=new Qa(async()=>{var n,r;let i,s=!0;if(typeof this.initSnapshotValue=="string"){const o=(await this.storage.getVersions(this.initSnapshotValue,1))[0];i=(n=await this.storage.getSnapshotTree(o))!==null&&n!==void 0?n:void 0}else i=this.initSnapshotValue;const a=async o=>zn(this.storage,o);if(i){const o=await this.summarizerNode.loadBaseSummary(i,a);i=o.baseSummary,this.pending=o.outstandingOps.concat(this.pending)}if(i&&i.blobs[Pc]!==void 0){const o=await a(i.blobs[Pc]);let l;Qj(o)<1?o.pkg.startsWith('["')&&o.pkg.endsWith('"]')?l=JSON.parse(o.pkg):l=[o.pkg]:l=JSON.parse(o.pkg),this.pkg=l,s=(r=o.isRootDataStore)!==null&&r!==void 0?r:!0,Zj(o)&&(i=i.trees[Je.channelsTreeName],N(i!==void 0,510))}return{pkg:this.pkg,isRootDataStore:s,snapshot:i}}),this.initSnapshotValue=e.snapshotTree,this.baseGCDetailsP=new Qa(async()=>{var n;return(n=await e.getBaseGCDetails())!==null&&n!==void 0?n:{}})}async getInitialSnapshotDetails(){return this.initialSnapshotDetailsP}async getInitialGCSummaryDetails(){return this.getBaseGCDetails()}async getBaseGCDetails(){return this.baseGCDetailsP}generateAttachMessage(){throw new Error("Cannot attach remote store")}}class e7 extends mm{constructor(e){super(e,e.snapshotTree!==void 0,e.snapshotTree?Pi.Bound:Pi.NotBound,!0,e.makeLocallyVisibleFn),this.snapshotTree=e.snapshotTree,e.isRootDataStore===!0&&this.setInMemoryRoot(),this.createProps=e.createProps,this.attachListeners()}attachListeners(){this.once("attaching",()=>{N(this.attachState===ze.Detached,333),this._attachState=ze.Attaching}),this.once("attached",()=>{N(this.attachState===ze.Attaching,334),this._attachState=ze.Attached})}generateAttachMessage(){N(this.channel!==void 0,335),N(this.pkg!==void 0,336);const e=this.channel.getAttachSummary();this.disableIsolatedChannels||xv(e);const n=Vk(this.pkg,this.isInMemoryRoot(),this.disableIsolatedChannels);ia(e,Pc,JSON.stringify(n));const r=Mk(e.summary);return{id:this.id,snapshot:r,type:this.pkg[this.pkg.length-1]}}async getInitialSnapshotDetails(){var e;let n=this.snapshotTree,r,i=!1;return n!==void 0&&(r=await iNe(this.storage,n),Zj(r)&&(n=n.trees[Je.channelsTreeName],N(n!==void 0,511)),this.pkg===void 0&&(this.pkg=JSON.parse(r.pkg),(!((e=r.isRootDataStore)!==null&&e!==void 0)||e)&&(i=!0,this.setInMemoryRoot()))),N(this.pkg!==void 0,338),{pkg:this.pkg,isRootDataStore:i,snapshot:n}}async getInitialGCSummaryDetails(){return{}}async getBaseGCDetails(){return{}}}class LD extends e7{constructor(e){super(e)}}class aNe extends e7{constructor(e){super(e),this.detachedRuntimeCreation=!0}async attachRuntime(e,n){N(this.detachedRuntimeCreation,340),N(this.channelDeferred===void 0,341);const r=e.IFluidDataStoreFactory,i=await this.factoryFromPackagePath(this.pkg);N(i.factory===r,342),N(this.registry===void 0,343),this.registry=i.registry,this.detachedRuntimeCreation=!1,this.channelDeferred=new sn,super.bindRuntime(n),await this.isRoot()&&(n.makeVisibleAndAttachGraph!==void 0?n.makeVisibleAndAttachGraph():n.bindToContext())}async getInitialSnapshotDetails(){if(this.detachedRuntimeCreation)throw new Error("Detached Fluid Data Store context can't be realized! Please attach runtime first!");return super.getInitialSnapshotDetails()}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const t7=t=>typeof(t==null?void 0:t.internalId)=="string"&&typeof(t==null?void 0:t.alias)=="string",_x=(t,e,n,r,i)=>new oNe(t,e,n,r,i);var Vs;(function(t){t.Aliased="Aliased",t.Aliasing="Aliasing",t.None="None"})(Vs||(Vs={}));class oNe{constructor(e,n,r,i,s){this.fluidDataStoreChannel=e,this.internalId=n,this.runtime=r,this.datastores=i,this.logger=s,this.aliasState=Vs.None}async trySetAlias(e){if(e.includes("/"))throw new Tt(`The alias cannot contain slashes: '${e}'`);switch(this.aliasState){case Vs.Aliasing:return N(this.aliasResult!==void 0,790),await this.aliasResult,this.alias===e?"Success":"AlreadyAliased";case Vs.Aliased:return this.alias===e?"Success":"AlreadyAliased";case Vs.None:break;default:pi(this.aliasState)}return this.aliasState=Vs.Aliasing,this.aliasResult=this.trySetAliasInternal(e),this.aliasResult}async trySetAliasInternal(e){const n={internalId:this.internalId,alias:e};if(this.fluidDataStoreChannel.makeVisibleAndAttachGraph!==void 0?this.fluidDataStoreChannel.makeVisibleAndAttachGraph():this.fluidDataStoreChannel.bindToContext(),this.runtime.attachState===ze.Detached){const i=this.datastores.processAliasMessageCore(n);return this.aliasState=Vs.Aliased,i?"Success":"Conflict"}return await this.ackBasedPromise(i=>{this.runtime.submitDataStoreAliasOp(n,i)}).then(i=>(this.aliasState=Vs.Aliased,i&&(this.alias=e),i)).catch(i=>(this.logger.sendErrorEvent({eventName:"AliasingException",alias:{value:e,tag:Vt.UserData},internalId:{value:this.internalId,tag:Vt.PackageData}},i),this.aliasState=Vs.None,!1))?"Success":"Conflict"}async request(e){return this.fluidDataStoreChannel.request(e)}get IFluidRouter(){return this.fluidDataStoreChannel}async ackBasedPromise(e){let n;return new Promise((r,i)=>{if(n=()=>i(new Error("ContainerRuntime disposed while this ack-based Promise was pending")),this.runtime.disposed){n();return}this.runtime.on("dispose",n),e(r,i)}).finally(()=>{this.runtime.off("dispose",n)})}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class lNe{constructor(e,n,r,i,s,a,o,l,c,u,d=new q6e(a)){this.baseSnapshot=e,this.runtime=n,this.submitAttachFn=r,this.getCreateChildSummarizerNodeFn=i,this.deleteChildSummarizerNodeFn=s,this.gcNodeUpdated=l,this.aliasMap=c,this.writeGCDataAtRoot=u,this.contexts=d,this.pendingAttach=new Map,this.attachOpFiredForDataStore=new Set,this.disposeOnce=new lh(()=>this.contexts.dispose()),this.dataStoresSinceLastGC=[],this.dispose=()=>this.disposeOnce.value,this.logger=ot.create(a),this.containerRuntimeHandle=new ed(this.runtime,"/",this.runtime.IFluidHandleContext);const h=new Qa(async()=>o()),p=async g=>(await h).get(g),f=new Map;if(e)for(const[g,v]of Object.entries(e.trees))f.set(g,v);let m=0;for(const[g,v]of f){let y;if(v.unreferenced&&m++,this.runtime.attachState!==ze.Detached)y=new $D({id:g,snapshotTree:v,getBaseGCDetails:async()=>p(g),runtime:this.runtime,storage:this.runtime.storage,scope:this.runtime.scope,createSummarizerNodeFn:this.getCreateChildSummarizerNodeFn(g,{type:Je.CreateSummarizerNodeSource.FromSummary}),writeGCDataAtRoot:this.writeGCDataAtRoot,disableIsolatedChannels:this.runtime.disableIsolatedChannels});else{if(typeof v!="object")throw new rt("Snapshot should be there to load from!!");const b=v;y=new LD({id:g,pkg:void 0,runtime:this.runtime,storage:this.runtime.storage,scope:this.runtime.scope,createSummarizerNodeFn:this.getCreateChildSummarizerNodeFn(g,{type:Je.CreateSummarizerNodeSource.FromSummary}),makeLocallyVisibleFn:()=>this.makeDataStoreLocallyVisible(g),snapshotTree:b,isRootDataStore:void 0,writeGCDataAtRoot:this.writeGCDataAtRoot,disableIsolatedChannels:this.runtime.disableIsolatedChannels})}this.contexts.addBoundOrRemoted(y)}this.containerLoadStats={containerLoadDataStoreCount:f.size,referencedDataStoreCount:f.size-m}}aliases(){return this.aliasMap}processAttachMessage(e,n){var r,i;const s=e.contents;if(this.dataStoresSinceLastGC.push(s.id),n){N(this.pendingAttach.has(s.id),350),(r=this.contexts.get(s.id))===null||r===void 0||r.emit("attached"),this.pendingAttach.delete(s.id);return}if(this.alreadyProcessed(s.id))throw new da("Duplicate DataStore created with existing id",Object.assign(Object.assign({},Rc(e)),{dataStoreId:{value:s.id,tag:Vt.PackageData}}));const a=new Map;let o;s.snapshot&&(o=CB(s.snapshot.entries,a));const l=[s.type],c=new $D({id:s.id,snapshotTree:o,getBaseGCDetails:async()=>({}),runtime:this.runtime,storage:new v5e(this.runtime.storage,a),scope:this.runtime.scope,createSummarizerNodeFn:this.getCreateChildSummarizerNodeFn(s.id,{type:Je.CreateSummarizerNodeSource.FromAttach,sequenceNumber:e.sequenceNumber,snapshot:(i=s.snapshot)!==null&&i!==void 0?i:{entries:[sNe(l,!0,this.runtime.disableIsolatedChannels)]}}),writeGCDataAtRoot:this.writeGCDataAtRoot,disableIsolatedChannels:this.runtime.disableIsolatedChannels,pkg:l});this.contexts.addBoundOrRemoted(c)}processAliasMessage(e,n,r){const i=e.contents;if(!t7(i))throw new da("malformedDataStoreAliasMessage",Object.assign({},Rc(e)));const s=n,a=this.processAliasMessageCore(i);r&&s(a)}processAliasMessageCore(e){if(this.alreadyProcessed(e.alias))return!1;const n=this.contexts.get(e.internalId);if(n===void 0)return this.logger.sendErrorEvent({eventName:"AliasFluidDataStoreNotFound",fluidDataStoreId:e.internalId}),!1;const r=new ed(n,e.internalId,this.runtime.IFluidHandleContext);return this.runtime.addedGCOutboundReference(this.containerRuntimeHandle,r),this.aliasMap.set(e.alias,n.id),n.setInMemoryRoot(),!0}alreadyProcessed(e){return this.aliasMap.get(e)!==void 0||this.contexts.get(e)!==void 0}makeDataStoreLocallyVisible(e){const n=this.contexts.getUnbound(e);if(N(!!n,351),this.runtime.attachState!==ze.Detached){n.emit("attaching");const r=n.generateAttachMessage();this.pendingAttach.set(e,r),this.submitAttachFn(r),this.attachOpFiredForDataStore.add(e)}this.contexts.bind(e)}createDetachedDataStoreCore(e,n,r=Cn()){N(!r.includes("/"),780);const i=new aNe({id:r,pkg:e,runtime:this.runtime,storage:this.runtime.storage,scope:this.runtime.scope,createSummarizerNodeFn:this.getCreateChildSummarizerNodeFn(r,{type:Je.CreateSummarizerNodeSource.Local}),makeLocallyVisibleFn:()=>this.makeDataStoreLocallyVisible(r),snapshotTree:void 0,isRootDataStore:n,writeGCDataAtRoot:this.writeGCDataAtRoot,disableIsolatedChannels:this.runtime.disableIsolatedChannels});return this.contexts.addUnbound(i),i}_createFluidDataStoreContext(e,n,r,i){N(!n.includes("/"),781);const s=new LD({id:n,pkg:e,runtime:this.runtime,storage:this.runtime.storage,scope:this.runtime.scope,createSummarizerNodeFn:this.getCreateChildSummarizerNodeFn(n,{type:Je.CreateSummarizerNodeSource.Local}),makeLocallyVisibleFn:()=>this.makeDataStoreLocallyVisible(n),snapshotTree:void 0,isRootDataStore:r,writeGCDataAtRoot:this.writeGCDataAtRoot,disableIsolatedChannels:this.runtime.disableIsolatedChannels,createProps:i});return this.contexts.addUnbound(s),s}get disposed(){return this.disposeOnce.evaluated}resubmitDataStoreOp(e,n){const r=e,i=this.contexts.get(r.address);N(!!i,352),i.reSubmit(r.contents,n)}rollbackDataStoreOp(e,n){const r=e,i=this.contexts.get(r.address);N(!!i,744),i.rollback(r.contents,n)}async applyStashedOp(e){const n=e,r=this.contexts.get(n.address);return N(!!r,353),r.applyStashedOp(n.contents)}async applyStashedAttachOp(e){this.pendingAttach.set(e.id,e),this.processAttachMessage({contents:e},!1)}processFluidDataStoreOp(e,n,r){const i=e.contents,s=Object.assign(Object.assign({},e),{contents:i.contents}),a=this.contexts.get(i.address);N(!!a,354),a.process(s,n,r),this.gcNodeUpdated(`/${i.address}`,e.timestamp,a.isLoaded?a.packagePath:void 0)}async getDataStore(e,n){const r=await this.contexts.getBoundOrRemoted(e,n);if(r===void 0)throw d1(Ts({url:e}));return r}processSignal(e,n,r){const i=this.contexts.get(e);if(!i){N(!r,355),this.logger.sendTelemetryEvent({eventName:"SignalFluidDataStoreNotFound",fluidDataStoreId:{value:e,tag:Vt.PackageData}});return}i.processSignal(n,r)}setConnectionState(e,n){for(const[r,i]of this.contexts)try{i.setConnectionState(e,n)}catch(s){this.logger.sendErrorEvent({eventName:"SetConnectionStateError",clientId:n,fluidDataStore:r},s)}}setAttachState(e){let n;e===ze.Attaching?n="attaching":n="attached";for(const[,r]of this.contexts)this.contexts.isNotBound(r.id)||r.emit(n)}get size(){return this.contexts.size}async summarize(e,n,r){const i=new mi;return await Promise.all(Array.from(this.contexts).filter(([s,a])=>(N(a.attachState!==ze.Attaching,357),a.attachState===ze.Attached)).map(async([s,a])=>{const o=await a.summarize(e,n,r);i.addWithStats(s,o)})),i.getSummaryTree()}createSummary(e){const n=new mi;let r;do{const i=n.summary.tree;r=this.contexts.notBoundLength(),Array.from(this.contexts).filter(([s,a])=>!(this.contexts.isNotBound(s)||i[s]||this.attachOpFiredForDataStore.has(s))).map(([s,a])=>{let o;if(a.isLoaded){const l=a.generateAttachMessage().snapshot;o=Dk(l,!0)}else N(!!this.baseSnapshot,358),o=Ik(this.baseSnapshot.trees[s]);n.addWithStats(s,o)})}while(r!==this.contexts.notBoundLength());return n.getSummaryTree()}async updateStateBeforeGC(){for(const e of this.dataStoresSinceLastGC){const n=this.contexts.get(e);if(N(n!==void 0,694),await n.isRoot()){const r=new ed(n,e,this.runtime.IFluidHandleContext);this.runtime.addedGCOutboundReference(this.containerRuntimeHandle,r)}}this.dataStoresSinceLastGC=[]}async getGCData(e=!1){const n=new Fk;return await Promise.all(Array.from(this.contexts).filter(([r,i])=>i.attachState===ze.Attached).map(async([r,i])=>{const s=await i.getGCData(e);n.prefixAndAddNodes(r,s.gcNodes)})),n.addNode("/",await this.getOutboundRoutes()),n.getGCData()}updateUsedRoutes(e,n){var r;const i=Gj(e);for(const[s]of i)N(this.contexts.has(s),359);for(const[s,a]of this.contexts)a.updateUsedRoutes((r=i.get(s))!==null&&r!==void 0?r:[],n)}deleteUnusedRoutes(e){for(const n of e){const r=n.split("/");if(r.length>2)continue;const i=r[1];N(this.contexts.has(i),727),this.contexts.delete(i),this.deleteChildSummarizerNodeFn(i)}}async getOutboundRoutes(){const e=[];for(const[n,r]of this.contexts)await r.isRoot()&&e.push(`/${n}`);return e}async getDataStorePackagePath(e){var n;const r=this.contexts.get(e.split("/")[1]);return(n=await(r==null?void 0:r.getInitialSnapshotDetails()))===null||n===void 0?void 0:n.pkg}getGCNodeType(e){const n=e.split("/");if(this.contexts.has(n[1]))return n.length===2?Lr.DataStore:Lr.SubDataStore}}function n7(t,e){if(t)if(tNe(e)){const n=t.trees[Je.channelsTreeName];return N(!!n,360),n}else{const n={};for(const[r,i]of Object.entries(t.trees))rNe.includes(r)||(n[r]=i);return Object.assign(Object.assign({},t),{trees:n})}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var ja;(function(t){t[t.Local=0]="Local",t[t.Broadcast=1]="Broadcast",t[t.Acked=2]="Acked",t[t.Nacked=-1]="Nacked"})(ja||(ja={}));class Op{constructor(e,n){this.clientId=e,this.clientSequenceNumber=n,this.state=ja.Local,this.defSummaryOp=new sn,this.defSummaryAck=new sn}static createLocal(e,n){return new Op(e,n)}static createFromOp(e){const n=new Op(e.clientId,e.clientSequenceNumber);return n.broadcast(e),n}get summaryOp(){return this._summaryOp}get summaryAckNack(){return this._summaryAckNack}hasBeenAcked(){return this.state===ja.Acked}broadcast(e){return N(this.state===ja.Local,373),this._summaryOp=e,this.defSummaryOp.resolve(),this.state=ja.Broadcast,!0}ackNack(e){return N(this.state===ja.Broadcast,374),this._summaryAckNack=e,this.defSummaryAck.resolve(),this.state=e.type===et.SummaryAck?ja.Acked:ja.Nacked,!0}async waitBroadcast(){return await this.defSummaryOp.promise,this._summaryOp}async waitAckNack(){return await this.defSummaryAck.promise,this._summaryAckNack}}class cNe{constructor(e,n){this.clientId=e,this.summaryCollection=n,this.localSummaries=new Map,this._disposed=!1}get disposed(){return this._disposed}watchSummary(e){let n=this.localSummaries.get(e);return n||(n=Op.createLocal(this.clientId,e),this.localSummaries.set(n.clientSequenceNumber,n)),n}waitFlushed(){return this.summaryCollection.waitFlushed()}tryGetSummary(e){return this.localSummaries.get(e)}setSummary(e){this.localSummaries.set(e.clientSequenceNumber,e)}dispose(){this.summaryCollection.removeWatcher(this.clientId),this._disposed=!0}}class uNe extends An{constructor(e,n){super(),this.deltaManager=e,this.logger=n,this.summaryWatchers=new Map,this.pendingSummaries=new Map,this.refreshWaitNextAck=new sn,this.deltaManager.on("op",r=>this.handleOp(r))}get latestAck(){return this.lastAck}emit(e,...n){return super.emit(e,...n)}get opsSinceLastAck(){var e,n;return this.deltaManager.lastSequenceNumber-((n=(e=this.lastAck)===null||e===void 0?void 0:e.summaryAck.sequenceNumber)!==null&&n!==void 0?n:this.deltaManager.initialSequenceNumber)}addOpListener(e){this.deltaManager.on("op",e)}removeOpListener(e){this.deltaManager.off("op",e)}createWatcher(e){const n=new cNe(e,this);return this.summaryWatchers.set(e,n),n}removeWatcher(e){this.summaryWatchers.delete(e)}setPendingAckTimerTimeoutCallback(e,n){this.maxAckWaitTime=e,this.pendingAckTimerTimeoutCallback=n}unsetPendingAckTimerTimeoutCallback(){this.maxAckWaitTime=void 0,this.pendingAckTimerTimeoutCallback=void 0}async waitFlushed(){for(;this.pendingSummaries.size>0;){const e=Array.from(this.pendingSummaries,([,n])=>n.waitAckNack());await Promise.all(e)}return this.lastAck}async waitSummaryAck(e){for(;!this.lastAck||this.lastAck.summaryOp.referenceSequenceNumber<e;)await this.refreshWaitNextAck.promise;return this.lastAck}handleOp(e){var n;switch(e.type){case et.Summarize:{this.handleSummaryOp(e);return}case et.SummaryAck:{this.handleSummaryAck(e);return}case et.SummaryNack:{this.handleSummaryNack(e);return}default:{const r=e.timestamp;this.lastSummaryTimestamp!==void 0&&this.maxAckWaitTime!==void 0&&r-this.lastSummaryTimestamp>=this.maxAckWaitTime&&((n=this.pendingAckTimerTimeoutCallback)===null||n===void 0||n.call(this)),this.emit("default",e);return}}}handleSummaryOp(e){let n;const r=this.summaryWatchers.get(e.clientId);r&&(n=r.tryGetSummary(e.clientSequenceNumber),n&&n.broadcast(e)),n||(n=Op.createFromOp(e),r&&r.setSummary(n)),this.pendingSummaries.set(e.sequenceNumber,n),this.lastSummaryTimestamp=e.timestamp,this.emit(et.Summarize,e)}handleSummaryAck(e){const n=e.contents.summaryProposal.summarySequenceNumber,r=this.pendingSummaries.get(n);if(!r||r.summaryOp===void 0){n>=this.deltaManager.initialSequenceNumber&&this.logger.sendErrorEvent({eventName:"SummaryAckWithoutOp",sequenceNumber:e.sequenceNumber,summarySequenceNumber:n,initialSequenceNumber:this.deltaManager.initialSequenceNumber});return}r.ackNack(e),this.pendingSummaries.delete(n),(!this.lastAck||n>this.lastAck.summaryAck.contents.summaryProposal.summarySequenceNumber)&&(this.lastAck={summaryOp:r.summaryOp,summaryAck:e},this.refreshWaitNextAck.resolve(),this.refreshWaitNextAck=new sn,this.emit(et.SummaryAck,e))}handleSummaryNack(e){const n=e.contents.summaryProposal.summarySequenceNumber,r=this.pendingSummaries.get(n);r&&(r.ackNack(e),this.pendingSummaries.delete(n),this.emit(et.SummaryNack,e))}}class dNe extends An{constructor(e,n,r){super(),this.clientMap=new Map,this.rootNode={sequenceNumber:-1,olderClient:void 0,youngerClient:void 0},this._youngestClient=this.rootNode,this.logger=ot.create(e,"OrderedClientCollection");const i=r.getMembers();for(const[s,a]of i)this.addClient(s,a);r.on("addMember",(s,a)=>{const o=this.addClient(s,a);this.emit("addClient",o,n.lastSequenceNumber)}),r.on("removeMember",s=>{const a=n.lastSequenceNumber,o=this.removeClient(s);o===void 0?this.logger.sendErrorEvent({eventName:"ClientNotFound",clientId:s,sequenceNumber:a}):this.emit("removeClient",o,a)})}get count(){return this.clientMap.size}get oldestClient(){return this.rootNode.youngerClient}addClient(e,n){N(n.sequenceNumber>-1,502);let r=this._youngestClient;for(;r.sequenceNumber>n.sequenceNumber;)N(r.olderClient!==void 0,503),r=r.olderClient;const i={clientId:e,sequenceNumber:n.sequenceNumber,client:Object.assign({},n.client),olderClient:r,youngerClient:r.youngerClient};return i.olderClient.youngerClient=i,i.youngerClient===void 0?this._youngestClient=i:i.youngerClient.olderClient=i,this.clientMap.set(e,i),i}removeClient(e){const n=this.clientMap.get(e);if(n!==void 0)return n.olderClient.youngerClient=n.youngerClient,n.youngerClient===void 0?this._youngestClient=n.olderClient:n.youngerClient.olderClient=n.olderClient,this.clientMap.delete(e),n}getAllClients(){const e=[];let n=this.rootNode;for(;n.youngerClient!==void 0;)e.push(n.youngerClient),n=n.youngerClient;return e}}class hNe extends An{constructor(e,n,r,i){super(),this.orderedClientCollection=n,this.isEligibleFn=i,this._eligibleCount=0;let s,a;for(const o of n.getAllClients())this.addClient(o,0),typeof r!="number"&&(o.clientId===r.electedClientId&&(s=o,r.electedParentId===void 0&&o.client.details.type!==ti&&(a=o)),o.clientId===r.electedParentId&&(a=o));n.on("addClient",(o,l)=>this.addClient(o,l)),n.on("removeClient",(o,l)=>this.removeClient(o,l)),typeof r=="number"?this._electionSequenceNumber=r:((s==null?void 0:s.clientId)!==r.electedClientId?e.sendErrorEvent({eventName:"InitialElectedClientNotFound",electionSequenceNumber:r.electionSequenceNumber,expectedClientId:r.electedClientId,electedClientId:s==null?void 0:s.clientId,clientCount:n.count}):s!==void 0&&!i(s)&&(s=a=this.findFirstEligibleParent(a),e.sendErrorEvent({eventName:"InitialElectedClientIneligible",electionSequenceNumber:r.electionSequenceNumber,expectedClientId:r.electedClientId,electedClientId:s==null?void 0:s.clientId})),this._electedParent=a,this._electedClient=s,this._electionSequenceNumber=r.electionSequenceNumber)}get eligibleCount(){return this._eligibleCount}get electionSequenceNumber(){return this._electionSequenceNumber}get electedClient(){return this._electedClient}get electedParent(){return this._electedParent}tryElectingClient(e,n){let r=!1;const i=(e==null?void 0:e.client.details.type)===ti,s=this._electedClient;this._electedClient!==e&&(this._electionSequenceNumber=n,this._electedClient=e,r=!0),this._electedParent!==e&&!i&&(this._electedParent=e,r=!0),r&&this.emit("election",e,n,s)}tryElectingParent(e,n){this._electedParent!==e&&(this._electedParent=e,this.emit("election",this._electedClient,n,this._electedClient))}findFirstEligibleParent(e){let n=e;for(;n!==void 0&&(!this.isEligibleFn(n)||n.client.details.type===ti);)n=n.youngerClient;return n}addClient(e,n){var r;if(this.isEligibleFn(e)){this._eligibleCount++;const i=e.client.details.type===ti,s=((r=this._electedClient)===null||r===void 0?void 0:r.client.details.type)===ti;this._electedClient===void 0||!s&&i?this.tryElectingClient(e,n):this._electedParent===void 0&&!i&&this.tryElectingParent(e,n)}}removeClient(e,n){var r,i,s,a,o;if(this.isEligibleFn(e)){if(this._eligibleCount--,this._electedClient===e)if(this._electedParent!==e){if(this._electedClient.client.details.type!==ti)throw new Tt("Elected client should be a summarizer client 1");this.tryElectingClient(this._electedParent,n)}else{const l=(i=this.findFirstEligibleParent((r=this._electedParent)===null||r===void 0?void 0:r.youngerClient))!==null&&i!==void 0?i:this.findFirstEligibleParent(this.orderedClientCollection.oldestClient);this.tryElectingClient(l,n)}else if(this._electedParent===e){if(((s=this._electedClient)===null||s===void 0?void 0:s.client.details.type)!==ti)throw new Tt("Elected client should be a summarizer client 2");const l=(o=this.findFirstEligibleParent((a=this._electedParent)===null||a===void 0?void 0:a.youngerClient))!==null&&o!==void 0?o:this.findFirstEligibleParent(this.orderedClientCollection.oldestClient);this.tryElectingParent(l,n)}}}getAllEligibleClients(){return this.orderedClientCollection.getAllClients().filter(this.isEligibleFn)}incrementElectedClient(e){var n,r;const i=(r=this.findFirstEligibleParent((n=this._electedParent)===null||n===void 0?void 0:n.youngerClient))!==null&&r!==void 0?r:this.findFirstEligibleParent(this.orderedClientCollection.oldestClient);this._electedClient===void 0||this._electedClient===this._electedParent?this.tryElectingClient(i,e):this.tryElectingParent(i,e)}resetElectedClient(e){const n=this.findFirstEligibleParent(this.orderedClientCollection.oldestClient);this._electedClient===void 0||this._electedClient===this._electedParent?this.tryElectingClient(n,e):this.tryElectingParent(n,e)}peekNextElectedClient(){var e,n;return(n=this.findFirstEligibleParent((e=this._electedParent)===null||e===void 0?void 0:e.youngerClient))!==null&&n!==void 0?n:this.findFirstEligibleParent(this.orderedClientCollection.oldestClient)}serialize(){var e,n;return{electionSequenceNumber:this.electionSequenceNumber,electedClientId:(e=this.electedClient)===null||e===void 0?void 0:e.clientId,electedParentId:(n=this.electedParent)===null||n===void 0?void 0:n.clientId}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class fNe{constructor(e,n,r){this.delayWindowMs=e,this.maxDelayMs=n,this.delayFn=r,this.startTimes=[]}get numAttempts(){return this.startTimes.length}getAttempts(){return[...this.startTimes]}get latestAttemptTime(){return this.startTimes.length>0?this.startTimes[this.startTimes.length-1]:void 0}getDelay(){const e=Date.now(),n=this.latestAttemptTime;if(n!==void 0){const i=n-e;i>0&&(this.startTimes=this.startTimes.map(s=>s-i))}this.startTimes=this.startTimes.filter(i=>e-i<this.delayWindowMs);const r=Math.min(this.delayFn(this.startTimes.length),this.maxDelayMs);return this.startTimes.push(e),this.startTimes=this.startTimes.map(i=>i+r),r===this.maxDelayMs&&this.startTimes.shift(),r}}const pNe=({multiplier:t=2,coefficient:e=1,offset:n=0,initialDelay:r=void 0}={})=>i=>Math.max(0,i<=0&&r!==void 0?r:e*Math.pow(t,i)+n);/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */new Promise(()=>{});class Wk{constructor(e){this.runtime=e,this._cancelled=!1,this.stopDeferred=new sn}get cancelled(){return this._cancelled||N(this.runtime.deltaManager.active,605),this._cancelled}get waitCancelled(){return this.stopDeferred.promise}static async create(e){const n=new Wk(e);return await n.waitStart(),n}async waitStart(){if(this.runtime.disposed){this.stop("summarizerClientDisconnected");return}if(this.runtime.once("dispose",()=>this.stop("summarizerClientDisconnected")),!this.runtime.connected){const e=new Promise(n=>this.runtime.once("connected",n));await Promise.race([e,this.waitCancelled])}this.runtime.once("disconnected",()=>this.stop("summarizerClientDisconnected"))}stop(e){this._cancelled||(this._cancelled=!0,this.stopDeferred.resolve(e))}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class mNe{constructor(e,n,r,i,s=()=>st.now()){this.batchEventEmitter=e,this.trackedBatchCount=0,this.logger=ot.create(n,"Batching"),this.batchEventEmitter.on("batchBegin",a=>{this.startBatchSequenceNumber=a.sequenceNumber,this.batchProcessingStartTimeStamp=s(),this.trackedBatchCount++}),this.batchEventEmitter.on("batchEnd",(a,o)=>{N(this.startBatchSequenceNumber!==void 0&&this.batchProcessingStartTimeStamp!==void 0,698);const l=o.sequenceNumber-this.startBatchSequenceNumber+1;l>=r&&this.logger.sendErrorEvent({eventName:"LengthTooBig",length:l,threshold:r,batchEndSequenceNumber:o.sequenceNumber,duration:s()-this.batchProcessingStartTimeStamp,batchError:a!==void 0}),this.trackedBatchCount%i===0&&this.logger.sendPerformanceEvent({eventName:"Length",length:l,samplingRate:i,batchEndSequenceNumber:o.sequenceNumber,duration:s()-this.batchProcessingStartTimeStamp}),this.startBatchSequenceNumber=void 0,this.batchProcessingStartTimeStamp=void 0})}}const gNe=(t,e,n=1e3,r=1e3)=>new mNe(t,e,n,r);/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class Ax{constructor(e,n){this.storageGetter=e,this.blobs=n}static async serializeTree(e,n){const r={};return await this.serializeTreeCore(e,r,n),r}static async serializeTreeCore(e,n,r){const i=[];for(const s of Object.values(e.trees))i.push(this.serializeTreeCore(s,n,r));for(const s of Object.values(e.blobs)){const a=await r.readBlob(s);n[s]=al(a,"utf8")}return Promise.all(i)}static serializeTreeWithBlobContents(e){const n={};return this.serializeTreeWithBlobContentsCore(e,n),n}static serializeTreeWithBlobContentsCore(e,n){for(const r of Object.values(e.trees))this.serializeTreeWithBlobContentsCore(r,n);for(const r of Object.values(e.blobs)){const i=e.blobsContents[r];N(!!i,748),n[r]=al(i,"utf8")}}get storage(){return this._storage?this._storage:(this._storage=this.storageGetter(),this._storage)}get repositoryUrl(){return this.storage.repositoryUrl}async readBlob(e){return this.blobs[e]!==void 0?oh(this.blobs[e],"utf8"):this.storage.readBlob(e)}async getSnapshotTree(e){return this.storage.getSnapshotTree(e)}async getVersions(e,n){return this.storage.getVersions(e,n)}async createBlob(e){return this.storage.createBlob(e)}async uploadSummaryWithContext(e,n){return this.storage.uploadSummaryWithContext(e,n)}async downloadSummary(e){return this.storage.downloadSummary(e)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class Df{constructor(e,n){this.messageSize=new Map,this._nonSystemOpCount=0,this._opsSizeAccumulator=0,!n&&(e.inbound.on("push",r=>{var i;const s=typeof r.contents=="string"?r.contents:(i=JSON.stringify(r.contents))!==null&&i!==void 0?i:"",a=Df.messageHasData(r)?r.data:"";this.messageSize[Df.messageId(r)]=s.length+a.length}),e.on("op",r=>{var i;this._nonSystemOpCount+=wp(r)?1:0;const s=Df.messageId(r);this._opsSizeAccumulator+=(i=this.messageSize[s])!==null&&i!==void 0?i:0,this.messageSize.delete(s)}))}get nonSystemOpCount(){return this._nonSystemOpCount}get opsSizeAccumulator(){return this._opsSizeAccumulator}static messageId(e){return e.sequenceNumber}static messageHasData(e){return e.data!==void 0}reset(){this._nonSystemOpCount=0,this._opsSizeAccumulator=0}}var Dt;(function(t){t.FluidDataStoreOp="component",t.Attach="attach",t.ChunkedOp="chunkedOp",t.BlobAttach="blobAttach",t.Rejoin="rejoin",t.Alias="alias"})(Dt||(Dt={}));const vNe={state:"enabled",idleTime:5e3*3,maxTime:5e3*12,maxOps:100,minOpsForLastSummaryAttempt:10,maxAckWaitTime:6*10*1e3,maxOpsSinceLastSummary:7e3,initialSummarizerDelayMs:5e3,summarizerClientElection:!1};var Yo;(function(t){t.wait="wait",t.externalRequest="externalRequest",t.viaHandle="viaHandle"})(Yo||(Yo={}));const yNe="Fluid.ContainerRuntime.UseDataStoreAliasing",bNe="Fluid.ContainerRuntime.MaxConsecutiveReconnects",SNe="Fluid.ContainerRuntime.MaxOpSizeInBytes",xNe=768e3,wNe="Fluid.ContainerRuntime.DisableOpTracking",CNe=Je.FlushMode.TurnBased;var BD;(function(t){t.FluidDataStoreOp="component",t.Attach="attach",t.ChunkedOp="chunkedOp",t.BlobAttach="blobAttach",t.Rejoin="rejoin",t.Alias="alias",t.Operation="op"})(BD||(BD={}));function ENe(t){if(t.type===et.Operation){if(t.contents.address!==void 0&&t.contents.type===void 0)t.type=Dt.FluidDataStoreOp;else{const e=t.contents;N(e.type!==void 0,289),t.type=e.type,t.contents=e.contents}N(Cp(t),290)}return t}class TNe{constructor(e,n){this.deltaManager=e,this.logger=n,this.localPaused=!1,this.timePaused=0,this.batchCount=0,this.deltaManager.on("prepareSend",i=>{if(i.length===0)return;const s=i[0].metadata;if(!(s!=null&&s.batch))return;if(i.length===1){delete s.batch;return}const a=i[i.length-1];a.metadata=Object.assign(Object.assign({},a.metadata),{batch:!1})}),this.deltaManager.inbound.on("push",i=>{this.trackPending(i)}),N(!this.localPaused,659);const r=this.deltaManager.inbound.toArray();for(const i of r)this.trackPending(i);this.deltaManager.on("op",i=>this.afterOpProcessing(i.sequenceNumber))}afterOpProcessing(e){if(N(!this.localPaused,660),this.deltaManager.inbound.length===0){N(this.pauseSequenceNumber===void 0,661);return}this.pauseSequenceNumber!==void 0&&(N(e<this.pauseSequenceNumber,662),e+1===this.pauseSequenceNumber&&this.pauseQueue())}pauseQueue(){N(!this.localPaused,663),this.localPaused=!0,this.timePaused=st.now(),this.deltaManager.inbound.pause()}resumeQueue(e,n){const r=n.sequenceNumber,i=this.localPaused?st.now()-this.timePaused:void 0;this.batchCount++,this.batchCount%1e3===1&&this.logger.sendTelemetryEvent({eventName:"BatchStats",sequenceNumber:r,length:r-e+1,msnDistance:r-n.minimumSequenceNumber,duration:i,batchCount:this.batchCount,interrupted:this.localPaused}),this.localPaused&&(this.localPaused=!1,i!==void 0&&i>Jj&&this.logger.sendErrorEvent({eventName:"MaxBatchWaitTimeExceeded",duration:i,sequenceNumber:r,length:r-e}),this.deltaManager.inbound.resume())}trackPending(e){N(this.deltaManager.inbound.length!==0,664),N(this.currentBatchClientId===void 0==(this.pauseSequenceNumber===void 0),665);const n=e.metadata,r=n==null?void 0:n.batch;if(!Cp(e)){N(this.currentBatchClientId===void 0,666),N(r===void 0,667),N(!this.localPaused,668);return}if(this.currentBatchClientId===void 0&&r===void 0){N(!this.localPaused,669);return}if((this.currentBatchClientId!==void 0||r===!1)&&this.currentBatchClientId!==e.clientId)throw new da("OpBatchIncomplete",Object.assign({runtimeVersion:Zg,batchClientId:this.currentBatchClientId},Rc(e)));r?(N(this.currentBatchClientId===void 0,670),N(!this.localPaused,671),this.pauseSequenceNumber=e.sequenceNumber,this.currentBatchClientId=e.clientId,this.deltaManager.inbound.length===1&&this.pauseQueue()):r===!1?(N(this.pauseSequenceNumber!==void 0,672),this.resumeQueue(this.pauseSequenceNumber,e),this.pauseSequenceNumber=void 0,this.currentBatchClientId=void 0):N(this.currentBatchClientId!==void 0,673)}}class RNe{constructor(e,n,r){this.deltaManager=e,this.emitter=n,this.logger=r,this.hitError=!1,this.deltaScheduler=new Ap(this.deltaManager,ot.create(this.logger,"DeltaScheduler")),new TNe(e,r)}beforeOpProcessing(e){var n;this.batchClientId!==e.clientId&&(N(this.batchClientId===void 0,674),this.emitter.emit("batchBegin",e),this.deltaScheduler.batchBegin(e),((n=e==null?void 0:e.metadata)===null||n===void 0?void 0:n.batch)?this.batchClientId=e.clientId:this.batchClientId=void 0)}afterOpProcessing(e,n){var r;if(N(!this.hitError,675),e){this.hitError=!0,this.batchClientId=void 0,this.emitter.emit("batchEnd",e,n),this.deltaScheduler.batchEnd(n);return}const i=(r=n==null?void 0:n.metadata)===null||r===void 0?void 0:r.batch;if(this.batchClientId===void 0||i===!1){this.batchClientId=void 0,this.emitter.emit("batchEnd",void 0,n),this.deltaScheduler.batchEnd(n);return}}}const jD="_scheduler";function kNe(){try{if(typeof navigator=="object"&&navigator!==null)return{deviceMemory:navigator.deviceMemory,hardwareConcurrency:navigator.hardwareConcurrency}}catch{}return{}}class Gk extends An{constructor(e,n,r,i,s,a,o,l,c,u,d,h,p,f){var m,g,v,y,b,C,R,w,E;f===void 0&&(f=Object.assign(Object.assign({},vNe),(m=o.summaryOptions)===null||m===void 0?void 0:m.summaryConfigOverrides)),super(),this.context=e,this.registry=n,this.runtimeOptions=o,this.containerScope=l,this.logger=c,this._storage=h,this.requestHandler=p,this.summaryConfiguration=f,this.defaultMaxConsecutiveReconnects=15,this._orderSequentiallyCalls=0,this.needsFlush=!1,this.flushTrigger=!1,this.savedOps=[],this.consecutiveReconnects=0,this._disposed=!1,this.emitDirtyDocumentEvent=!0,this.defaultTelemetrySignalSampleCount=100,this._perfSignalData={signalsLost:0,signalSequenceNumber:0,signalTimestamp:0,trackingSignalSequenceNumber:void 0},this.summarizeOnDemand=(...I)=>{if(this.clientDetails.type===ti)return this.summarizer.summarizeOnDemand(...I);if(this.summaryManager!==void 0)return this.summaryManager.summarizeOnDemand(...I);throw new Tt(`Can't summarize, disableSummaries: ${this.summariesDisabled}`)},this.enqueueSummarize=(...I)=>{if(this.clientDetails.type===ti)return this.summarizer.enqueueSummarize(...I);if(this.summaryManager!==void 0)return this.summaryManager.enqueueSummarize(...I);throw new Tt(`Can't summarize, disableSummaries: ${this.summariesDisabled}`)},this.messageAtLastSummary=r==null?void 0:r.message,this.disableIsolatedChannels=(g=this.runtimeOptions.summaryOptions.disableIsolatedChannels)!==null&&g!==void 0?g:!1,this._connected=this.context.connected,this.chunkMap=new Map(s),this.handleContext=new C6e("",this),this.mc=ch(ot.create(this.logger,"ContainerRuntime")),this.summariesDisabled=this.isSummariesDisabled(),this.heuristicsDisabled=this.isHeuristicsDisabled(),this.summarizerClientElectionEnabled=this.isSummarizerClientElectionEnabled(),this.maxOpsSinceLastSummary=this.getMaxOpsSinceLastSummary(),this.initialSummarizerDelayMs=this.getInitialSummarizerDelayMs(),this._aliasingEnabled=((v=this.mc.config.getBoolean(yNe))!==null&&v!==void 0?v:!1)||((y=o.useDataStoreAliasing)!==null&&y!==void 0?y:!1),this._maxOpSizeInBytes=(b=this.mc.config.getNumber(SNe))!==null&&b!==void 0?b:xNe,this.maxConsecutiveReconnects=(C=this.mc.config.getNumber(bNe))!==null&&C!==void 0?C:this.defaultMaxConsecutiveReconnects,this._flushMode=o.flushMode;const k=e.pendingLocalState,T=(R=k==null?void 0:k.baseSnapshot)!==null&&R!==void 0?R:e.baseSnapshot;this.garbageCollector=Uk.create({runtime:this,gcOptions:this.runtimeOptions.gcOptions,baseSnapshot:T,baseLogger:this.mc.logger,existing:u,metadata:r,isSummarizerClient:this.context.clientDetails.type===ti,getNodePackagePath:async I=>this.getGCNodePackagePath(I),getLastSummaryTimestampMs:()=>{var I;return(I=this.messageAtLastSummary)===null||I===void 0?void 0:I.timestamp},readAndParseBlob:async I=>zn(this.storage,I)});const _=this.deltaManager.initialSequenceNumber;if(this.summarizerNode=x6e(ot.create(this.logger,"SummarizerNode"),async(I,M,A)=>this.summarizeInternal(I,M,A),_,T?_:void 0,{canReuseHandle:!1,throwOnFailure:!0,gcDisabled:!this.garbageCollector.shouldRunGC}),T&&this.summarizerNode.loadBaseSummaryWithoutDifferential(T),this.dataStores=new lNe(n7(T,r),this,I=>this.submit(Dt.Attach,I),(I,M)=>(A,O,L)=>this.summarizerNode.createChild(A,I,M,void 0,O,L),I=>this.summarizerNode.deleteChild(I),this.mc.logger,async()=>this.garbageCollector.getBaseGCDetails(),(I,M,A)=>this.garbageCollector.nodeUpdated(I,"Changed",M,A),new Map(a),this.garbageCollector.writeDataAtRoot),this.blobManager=new _i(this.handleContext,d,()=>this.storage,I=>this.submit(Dt.BlobAttach,void 0,void 0,{blobId:I}),I=>this.garbageCollector.nodeUpdated(I,"Loaded"),this,this.logger),this.scheduleManager=new RNe(e.deltaManager,this,ot.create(this.logger,"ScheduleManager")),this.deltaSender=this.deltaManager,this.pendingStateManager=new j6e({applyStashedOp:this.applyStashedOp.bind(this),clientId:()=>this.clientId,close:this.closeFn,connected:()=>this.connected,flush:this.flush.bind(this),flushMode:()=>this.flushMode,reSubmit:this.reSubmit.bind(this),rollback:this.rollback.bind(this),setFlushMode:I=>this.setFlushMode(I)},this._flushMode,k==null?void 0:k.pending),this.context.quorum.on("removeMember",I=>{this.clearPartialChunks(I)}),this.summaryCollection=new uNe(this.deltaManager,this.logger),this.dirtyContainer=this.context.attachState!==ze.Attached||this.pendingStateManager.hasPendingMessages(),this.context.updateDirtyContainerState(this.dirtyContainer),this.summariesDisabled)this.mc.logger.sendTelemetryEvent({eventName:"SummariesDisabled"});else{const I=ot.create(this.logger,"OrderedClientElection"),M=new dNe(I,this.context.deltaManager,this.context.quorum),A=new hNe(I,M,i??this.context.deltaManager.lastSequenceNumber,Zu.isClientEligible);if(this.summarizerClientElection=new Zu(I,this.summaryCollection,A,this.maxOpsSinceLastSummary,this.summarizerClientElectionEnabled),this.context.clientDetails.type===ti)this._summarizer=new zk("/_summarizer",this,()=>this.summaryConfiguration,this,this.handleContext,this.summaryCollection,async O=>Wk.create(O));else if(Zu.clientDetailsPermitElection(this.context.clientDetails)){const O=()=>{this.summaryCollection.opsSinceLastAck>this.maxOpsSinceLastSummary&&(this.logger.sendErrorEvent({eventName:"SummaryStatus:Behind"}),this.summaryCollection.once(et.SummaryAck,()=>{this.logger.sendTelemetryEvent({eventName:"SummaryStatus:CaughtUp"}),this.summaryCollection.on("default",O)}),this.summaryCollection.off("default",O))};this.summaryCollection.on("default",O),this.summaryManager=new m1(this.summarizerClientElection,this,this.summaryCollection,this.logger,this.formRequestSummarizerFn(this.context.loader),new fNe(60*1e3,30*1e3,pNe({coefficient:20,initialDelay:0})),{initialDelayMs:this.initialSummarizerDelayMs},this.heuristicsDisabled),this.summaryManager.start()}}this.deltaManager.on("readonly",I=>{N(I===this.deltaManager.readOnlyInfo.readonly,292),N(!I||!this.connected,293),this.replayPendingStates()}),c.sendTelemetryEvent(Object.assign({eventName:"DeviceSpec"},kNe()));let D;u?(this.createContainerMetadata={createContainerRuntimeVersion:r==null?void 0:r.createContainerRuntimeVersion,createContainerTimestamp:r==null?void 0:r.createContainerTimestamp},D=(E=(w=r==null?void 0:r.summaryNumber)!==null&&w!==void 0?w:r==null?void 0:r.summaryCount)!==null&&E!==void 0?E:0):(this.createContainerMetadata={createContainerRuntimeVersion:Zg,createContainerTimestamp:Date.now()},D=0),this.nextSummaryNumber=D+1,this.logger.sendTelemetryEvent(Object.assign(Object.assign(Object.assign({eventName:"ContainerLoadStats"},this.createContainerMetadata),this.dataStores.containerLoadStats),{summaryNumber:D,summaryFormatVersion:r==null?void 0:r.summaryFormatVersion,disableIsolatedChannels:r==null?void 0:r.disableIsolatedChannels,gcVersion:r==null?void 0:r.gcFeature})),B6e(this.context.clientId,this.deltaManager,this.logger),gNe(this,this.logger),this.opTracker=new Df(this.deltaManager,this.mc.config.getBoolean(wNe)===!0)}get IContainerRuntime(){return this}get IFluidRouter(){return this}static async load(e,n,r,i={},s=e.scope,a){var o,l,c;const u=e,d=(o=u.taggedLogger)!==null&&o!==void 0?o:new h5e(u.logger),h=ot.create(d,void 0,{all:{runtimeVersion:Zg}}),{summaryOptions:p={},gcOptions:f={},loadSequenceNumberVerification:m="close",useDataStoreAliasing:g=!1,flushMode:v=CNe,enableOfflineLoad:y=!1}=i,b=e.pendingLocalState,C=(l=b==null?void 0:b.baseSnapshot)!==null&&l!==void 0?l:e.baseSnapshot,R=b?new Ax(()=>e.storage,b.snapshotBlobs):e.storage,w=new Lk(n),E=async L=>{const F=C==null?void 0:C.blobs[L];if(C&&F)return N(R!==void 0,501),zn(R,F)},[k,T,_,D]=await Promise.all([E(MD),E(w2),E(ND),E(ID)]),I=a===!0||e.existing===!0,M=await _i.load(C==null?void 0:C.trees[C2],async L=>(N(R!==void 0,598),zn(R,L))),A=(c=T==null?void 0:T.message)===null||c===void 0?void 0:c.sequenceNumber;if(!b&&A!==void 0){const L=e.deltaManager.initialSequenceNumber;if(m!=="bypass"&&A!==L){const F=new da("Summary metadata mismatch",{runtimeVersion:Zg,runtimeSequenceNumber:A,protocolSequenceNumber:L});m==="log"?h.sendErrorEvent({eventName:"SequenceNumberMismatch"},F):e.closeFn(F)}}const O=new Gk(e,w,T,_,k??[],D??[],{summaryOptions:p,gcOptions:f,loadSequenceNumberVerification:m,useDataStoreAliasing:g,flushMode:v,enableOfflineLoad:y},s,h,I,M,R,r);return b&&(await O.processSavedOps(b),b.savedOps=[]),await O.getSnapshotBlobs(),O}get options(){return this.context.options}get clientId(){return this.context.clientId}get clientDetails(){return this.context.clientDetails}get deltaManager(){return this.context.deltaManager}get storage(){return this._storage}get reSubmitFn(){return this.reSubmit}get closeFn(){return this.context.closeFn}get flushMode(){return this._flushMode}get scope(){return this.containerScope}get IFluidDataStoreRegistry(){return this.registry}get attachState(){return this.context.attachState}get IFluidHandleContext(){return this.handleContext}get connected(){return this._connected}get summarizerClientId(){var e;return(e=this.summarizerClientElection)===null||e===void 0?void 0:e.electedClientId}get disposed(){return this._disposed}get summarizer(){return N(this._summarizer!==void 0,599),this._summarizer}isSummariesDisabled(){return this.runtimeOptions.summaryOptions.disableSummaries===!0?!0:this.summaryConfiguration.state==="disabled"}isHeuristicsDisabled(){var e;return((e=this.runtimeOptions.summaryOptions.summarizerOptions)===null||e===void 0?void 0:e.disableHeuristics)===!0?!0:this.summaryConfiguration.state==="disableHeuristics"}isSummarizerClientElectionEnabled(){var e;return this.mc.config.getBoolean("Fluid.ContainerRuntime.summarizerClientElection")?(e=this.mc.config.getBoolean("Fluid.ContainerRuntime.summarizerClientElection"))!==null&&e!==void 0?e:!0:this.runtimeOptions.summaryOptions.summarizerClientElection===!0?!0:this.summaryConfiguration.state!=="disabled"?this.summaryConfiguration.summarizerClientElection===!0:!1}getMaxOpsSinceLastSummary(){return this.runtimeOptions.summaryOptions.maxOpsSinceLastSummary!==void 0?this.runtimeOptions.summaryOptions.maxOpsSinceLastSummary:this.summaryConfiguration.state!=="disabled"?this.summaryConfiguration.maxOpsSinceLastSummary:0}getInitialSummarizerDelayMs(){return this.runtimeOptions.summaryOptions.initialSummarizerDelayMs!==void 0?this.runtimeOptions.summaryOptions.initialSummarizerDelayMs:this.summaryConfiguration.state!=="disabled"?this.summaryConfiguration.initialSummarizerDelayMs:0}dispose(e){var n;this._disposed||(this._disposed=!0,this.logger.sendTelemetryEvent({eventName:"ContainerRuntimeDisposed",isDirty:this.isDirty,lastSequenceNumber:this.deltaManager.lastSequenceNumber,attachState:this.attachState},e),this.summaryManager!==void 0&&this.summaryManager.dispose(),this.garbageCollector.dispose(),(n=this._summarizer)===null||n===void 0||n.dispose(),this.dataStores.dispose(),this.pendingStateManager.dispose(),this.emit("dispose"),this.removeAllListeners())}get IFluidTokenProvider(){var e;if(!((e=this.options)===null||e===void 0)&&e.intelligence)return{intelligence:this.options.intelligence}}async request(e){try{const n=ma.create(e);return n.pathParts[0]==="_summarizer"&&n.pathParts.length===1?this._summarizer!==void 0?{status:200,mimeType:"fluid/object",value:this.summarizer}:Ts(e):this.requestHandler!==void 0?this.requestHandler(n,this):Ts(e)}catch(n){return vv(n)}}async resolveHandle(e){try{const n=ma.create(e),r=n.pathParts[0];if(r==="_channels")return this.resolveHandle(n.createSubRequest(1));if(r===_i.basePath&&n.isLeaf(2)){const i=await this.blobManager.getBlob(n.pathParts[1]);return i?{status:200,mimeType:"fluid/object",value:i.get()}:Ts(e)}else if(n.pathParts.length>0){const i=await this.getDataStoreFromRequest(r,e),s=n.createSubRequest(1);return N(s.url.startsWith("/"),294),i.IFluidRouter.request(s)}return Ts(e)}catch(n){return vv(n)}}internalId(e){var n;return(n=this.dataStores.aliases().get(e))!==null&&n!==void 0?n:e}async getDataStoreFromRequest(e,n){var r,i,s;const a=typeof((r=n.headers)===null||r===void 0?void 0:r[Yo.wait])=="boolean"?(i=n.headers)===null||i===void 0?void 0:i[Yo.wait]:!0,o=this.internalId(e),l=await this.dataStores.getDataStore(o,a);if(!((s=n.headers)===null||s===void 0)&&s[Yo.externalRequest]&&this.garbageCollector.shouldRunGC){const d=(await l.getBaseGCDetails()).usedRoutes;if(!(d===void 0||d.includes("")||d.includes("/")))throw d1(Ts(n))}const c=await l.realize(),u=p6e(n.url.split("?")[0]);return this.garbageCollector.nodeUpdated(`/${u}`,"Loaded",void 0,l.packagePath,n==null?void 0:n.headers),c}addMetadataToSummary(e){var n;const r=Object.assign(Object.assign(Object.assign(Object.assign({},this.createContainerMetadata),{summaryCount:this.nextSummaryNumber,summaryNumber:this.nextSummaryNumber++,summaryFormatVersion:1,disableIsolatedChannels:this.disableIsolatedChannels||void 0}),this.garbageCollector.getMetadata()),{message:(n=eNe(this.deltaManager.lastMessage))!==null&&n!==void 0?n:this.messageAtLastSummary});ia(e,w2,JSON.stringify(r))}addContainerStateToSummary(e,n,r,i){var s;if(this.addMetadataToSummary(e),this.chunkMap.size>0){const l=JSON.stringify([...this.chunkMap]);ia(e,MD,l)}const a=this.dataStores.aliases();if(a.size>0&&ia(e,ID,JSON.stringify([...a])),this.summarizerClientElection){const l=JSON.stringify((s=this.summarizerClientElection)===null||s===void 0?void 0:s.serialize());ia(e,ND,l)}const o=this.blobManager.summarize();if(Object.keys(o.summary.tree).length>0&&l6e(e,C2,o),this.garbageCollector.writeDataAtRoot){const l=this.garbageCollector.summarize(n,r,i);l!==void 0&&c6e(e,Io,l)}}shouldContinueReconnecting(){return this.maxConsecutiveReconnects<=0?!0:this.pendingStateManager.hasPendingMessages()?(this.consecutiveReconnects===Math.floor(this.maxConsecutiveReconnects/2)&&this.mc.logger.sendTelemetryEvent({eventName:"ReconnectsWithNoProgress",attempts:this.consecutiveReconnects,pendingMessages:this.pendingStateManager.pendingMessagesCount}),this.consecutiveReconnects<this.maxConsecutiveReconnects):(this.resetReconnectCount(),!0)}resetReconnectCount(){this.consecutiveReconnects=0}replayPendingStates(){if(!this.canSendOps())return;const e=this.dirtyContainer;this.dirtyContainer=!1,N(this.emitDirtyDocumentEvent,295),this.emitDirtyDocumentEvent=!1;let n;try{this.pendingStateManager.replayPendingStates()}finally{n=this.dirtyContainer,this.dirtyContainer=e,this.emitDirtyDocumentEvent=!0}this.updateDocumentDirtyState(n)}async applyStashedOp(e,n){switch(e){case Dt.FluidDataStoreOp:return this.dataStores.applyStashedOp(n);case Dt.Attach:return this.dataStores.applyStashedAttachOp(n);case Dt.Alias:case Dt.BlobAttach:return;case Dt.ChunkedOp:throw new Error("chunkedOp not expected here");case Dt.Rejoin:throw new Error("rejoin not expected here");default:pi(e,`Unknown ContainerMessageType: ${e}`)}}setConnectionState(e,n){this.verifyNotClosed();const r=this._connected!==e,i=r&&e;if(this._connected=e,e||(this._perfSignalData.signalsLost=0,this._perfSignalData.signalTimestamp=0,this._perfSignalData.trackingSignalSequenceNumber=void 0),i&&(this.consecutiveReconnects++,!this.shouldContinueReconnecting())){this.closeFn(Ni.create("Runtime detected too many reconnects with no progress syncing local ops","setConnectionState",void 0,{dataLoss:1,attempts:this.consecutiveReconnects,pendingMessages:this.pendingStateManager.pendingMessagesCount}));return}r&&this.replayPendingStates(),this.dataStores.setConnectionState(e,n),nk(this.mc.logger,this,e,n)}process(e,n){var r,i;if(this.verifyNotClosed(),!Cp(e))return;((r=this.mc.config.getBoolean("enableOfflineLoad"))!==null&&r!==void 0?r:this.runtimeOptions.enableOfflineLoad)&&this.savedOps.push(e);let s=Object.assign({},e);this.scheduleManager.beforeOpProcessing(s);try{s=ENe(s),s=this.processRemoteChunkedMessage(s);let a;switch(n&&s.type!==Dt.ChunkedOp&&(a=this.pendingStateManager.processPendingLocalMessage(s)),this.pendingStateManager.hasPendingMessages()||this.updateDocumentDirtyState(!1),s.type){case Dt.Attach:this.dataStores.processAttachMessage(s,n);break;case Dt.Alias:this.processAliasMessage(s,a,n);break;case Dt.FluidDataStoreOp:this.dataStores.processFluidDataStoreOp(s,n,a);break;case Dt.BlobAttach:N((i=s==null?void 0:s.metadata)===null||i===void 0?void 0:i.blobId,298),this.blobManager.processBlobAttachOp(s.metadata.blobId,n);break;default:}this.emit("op",s),this.scheduleManager.afterOpProcessing(void 0,s),n&&this.resetReconnectCount()}catch(a){throw this.scheduleManager.afterOpProcessing(a,s),a}}processAliasMessage(e,n,r){this.dataStores.processAliasMessage(e,n,r)}sendSignalTelemetryEvent(e){const n=Date.now()-this._perfSignalData.signalTimestamp;this.logger.sendPerformanceEvent({eventName:"SignalLatency",duration:n,signalsLost:this._perfSignalData.signalsLost}),this._perfSignalData.signalsLost=0,this._perfSignalData.signalTimestamp=0}processSignal(e,n){const r=e.content,i={clientId:e.clientId,content:r.contents.content,type:r.contents.type};if(e.clientId===this.clientId&&this.connected&&(this._perfSignalData.trackingSignalSequenceNumber!==void 0&&r.clientSignalSequenceNumber>this._perfSignalData.trackingSignalSequenceNumber?(this._perfSignalData.signalsLost++,this._perfSignalData.trackingSignalSequenceNumber=void 0,this.logger.sendErrorEvent({eventName:"SignalLost",type:r.contents.type,signalsLost:this._perfSignalData.signalsLost,trackingSequenceNumber:this._perfSignalData.trackingSignalSequenceNumber,clientSignalSequenceNumber:r.clientSignalSequenceNumber})):r.clientSignalSequenceNumber===this._perfSignalData.trackingSignalSequenceNumber&&(this.sendSignalTelemetryEvent(r.clientSignalSequenceNumber),this._perfSignalData.trackingSignalSequenceNumber=void 0)),r.address===void 0){this.emit("signal",i,n);return}this.dataStores.processSignal(r.address,i,n)}async getRootDataStore(e,n=!0){const r=this.internalId(e),i=await this.dataStores.getDataStore(r,n);return N(await i.isRoot(),299),i.realize()}setFlushMode(e){e!==this._flushMode&&(this.mc.logger.sendTelemetryEvent({eventName:"FlushMode Updated",old:this._flushMode,new:e}),e===Je.FlushMode.Immediate&&this.flush(),this._flushMode=e,this.pendingStateManager.onFlushModeUpdated(e))}flush(){if(N(this._orderSequentiallyCalls===0,588),!!this.deltaSender&&(this.pendingStateManager.onFlush(),!!this.needsFlush&&(this.needsFlush=!1,!!this.canSendOps())))return this.deltaSender.flush()}orderSequentially(e){if(this.flushMode===Je.FlushMode.TurnBased){this.trackOrderSequentiallyCalls(e);return}const n=this.flushMode;this.setFlushMode(Je.FlushMode.TurnBased);try{this.trackOrderSequentiallyCalls(e),this.flush()}finally{this.setFlushMode(n)}}trackOrderSequentiallyCalls(e){let n;this.mc.config.getBoolean("Fluid.ContainerRuntime.EnableRollback")&&(n=this.pendingStateManager.checkpoint());try{this._orderSequentiallyCalls++,e()}catch(r){throw n?n.rollback():this.closeFn(new Ya("orderSequentially callback exception",r)),r}finally{this._orderSequentiallyCalls--}}async createDataStore(e){const n=Cn();return _x(await this._createDataStore(e,!1,n),n,this,this.dataStores,this.mc.logger)}async createRootDataStoreLegacy(e,n){const r=await this._createDataStore(e,!0,n);return r.makeVisibleAndAttachGraph!==void 0?r.makeVisibleAndAttachGraph():r.bindToContext(),r}async createRootDataStore(e,n){if(n.includes("/"))throw new Tt(`Id cannot contain slashes: '${n}'`);return this._aliasingEnabled===!0?this.createAndAliasDataStore(e,n):this.createRootDataStoreLegacy(e,n)}async createAndAliasDataStore(e,n,r){const i=Cn(),s=await this._createDataStore(e,!1,i,r),a=_x(s,i,this,this.dataStores,this.mc.logger),o=await a.trySetAlias(n);if(o!=="Success")throw new Ya("dataStoreAliasFailure",void 0,{alias:{value:n,tag:Vt.UserData},internalId:{value:i,tag:Vt.PackageData},aliasResult:o});return a}createDetachedRootDataStore(e,n){if(n.includes("/"))throw new Tt(`Id cannot contain slashes: '${n}'`);return this.dataStores.createDetachedDataStoreCore(e,!0,n)}createDetachedDataStore(e){return this.dataStores.createDetachedDataStoreCore(e,!1)}async _createDataStoreWithPropsLegacy(e,n,r=Cn(),i=!1){const s=await this.dataStores._createFluidDataStoreContext(Array.isArray(e)?e:[e],r,i,n).realize();return i&&(s.makeVisibleAndAttachGraph!==void 0?s.makeVisibleAndAttachGraph():s.bindToContext(),this.logger.sendTelemetryEvent({eventName:"Root datastore with props",hasProps:n!==void 0})),_x(s,r,this,this.dataStores,this.mc.logger)}async _createDataStoreWithProps(e,n,r=Cn(),i=!1){return this._aliasingEnabled===!0&&i?this.createAndAliasDataStore(e,r,n):this._createDataStoreWithPropsLegacy(e,n,r,i)}async _createDataStore(e,n,r=Cn(),i){return this.dataStores._createFluidDataStoreContext(Array.isArray(e)?e:[e],r,n,i).realize()}canSendOps(){return this.connected&&!this.deltaManager.readOnlyInfo.readonly}getQuorum(){return this.context.quorum}getAudience(){return this.context.audience}get isDirty(){return this.dirtyContainer}isContainerMessageDirtyable(e,n){if(e===Dt.Attach){if(n.id===jD)return!1}else if(e===Dt.FluidDataStoreOp&&n.address===jD)return!1;return!0}createNewSignalEnvelope(e,n,r){const i=++this._perfSignalData.signalSequenceNumber,s={address:e,clientSignalSequenceNumber:i,contents:{type:n,content:r}};return i%this.defaultTelemetrySignalSampleCount===1&&this._perfSignalData.trackingSignalSequenceNumber===void 0&&(this._perfSignalData.signalTimestamp=Date.now(),this._perfSignalData.trackingSignalSequenceNumber=i),s}submitSignal(e,n){this.verifyNotClosed();const r=this.createNewSignalEnvelope(void 0,e,n);return this.context.submitSignalFn(r)}submitDataStoreSignal(e,n,r){const i=this.createNewSignalEnvelope(e,n,r);return this.context.submitSignalFn(i)}setAttachState(e){e===ze.Attaching?N(this.attachState===ze.Attaching,301):(N(this.attachState===ze.Attached,302),this.emit("attached")),e===ze.Attached&&!this.pendingStateManager.hasPendingMessages()&&this.updateDocumentDirtyState(!1),this.dataStores.setAttachState(e)}createSummary(e,n){e&&this.blobManager.setRedirectTable(e);const r=this.dataStores.createSummary(n);return this.disableIsolatedChannels||xv(r),this.addContainerStateToSummary(r,!0,!1,n),r.summary}async getAbsoluteUrl(e){if(this.context.getAbsoluteUrl===void 0)throw new Error("Driver does not implement getAbsoluteUrl");if(this.attachState===ze.Attached)return this.context.getAbsoluteUrl(e)}async summarizeInternal(e,n,r){const i=await this.dataStores.summarize(e,n,r);let s;return this.disableIsolatedChannels||(xv(i),s=[Je.channelsTreeName]),this.addContainerStateToSummary(i,e,n,r),Object.assign(Object.assign({},i),{id:"",pathPartsForChildren:s})}async summarize(e){this.verifyNotClosed();const{fullTree:n=!1,trackState:r=!0,summaryLogger:i=this.mc.logger,runGC:s=this.garbageCollector.shouldRunGC,runSweep:a,fullGC:o}=e;let l;s&&(l=await this.collectGarbage({logger:i,runSweep:a,fullGC:o}));const c=new d6e,{stats:u,summary:d}=await this.summarizerNode.summarize(n,r,c);return this.logger.sendTelemetryEvent({eventName:"SummarizeTelemetry",details:c.serialize()}),N(d.type===Ne.Tree,303),{stats:u,summary:d,gcStats:l}}async updateStateBeforeGC(){return this.dataStores.updateStateBeforeGC()}async getGCData(e){const n=new Fk,r=await this.dataStores.getGCData(e);n.addNodes(r.gcNodes);const i=this.blobManager.getGCData(e);return n.addNodes(i.gcNodes),n.getGCData()}updateUsedRoutes(e,n){this.summarizerNode.updateUsedRoutes([""]);const r=[];for(const i of e)i.split("/")[1]!==_i.basePath&&r.push(i);return this.dataStores.updateUsedRoutes(r,n)}deleteUnusedRoutes(e){const n=[],r=[];for(const i of e)this.isBlobPath(i)?n.push(i):r.push(i);this.blobManager.deleteUnusedRoutes(n),this.dataStores.deleteUnusedRoutes(r)}getCurrentReferenceTimestampMs(){var e,n,r;return(n=(e=this.deltaManager.lastMessage)===null||e===void 0?void 0:e.timestamp)!==null&&n!==void 0?n:(r=this.messageAtLastSummary)===null||r===void 0?void 0:r.timestamp}getNodeType(e){var n;return this.isBlobPath(e)?Lr.Blob:(n=this.dataStores.getGCNodeType(e))!==null&&n!==void 0?n:Lr.Other}async getGCNodePackagePath(e){switch(this.getNodeType(e)){case Lr.Blob:return["_blobs"];case Lr.DataStore:case Lr.SubDataStore:return this.dataStores.getDataStorePackagePath(e);default:N(!1,734)}}isBlobPath(e){const n=e.split("/");return!(n.length<2||n[1]!==_i.basePath)}async collectGarbage(e){return this.garbageCollector.collectGarbage(e)}addedGCOutboundReference(e,n){this.garbageCollector.addedOutboundReference(e.absolutePath,n.absolutePath)}async submitSummary(e){var n,r,i;const{fullTree:s,refreshLatestAck:a,summaryLogger:o}=e,l=this.nextSummaryNumber,c=ot.create(o,void 0,{all:{summaryNumber:l}});let u;if(a){const d=await this.refreshLatestSummaryAckFromServer(ot.create(c,void 0,{all:{safeSummary:!0}})),h=d.latestSnapshotRefSeq;u=d.latestSnapshotVersionId,h>this.deltaManager.lastSequenceNumber&&await gt.timedExecAsync(c,{eventName:"WaitingForSeq",lastSequenceNumber:this.deltaManager.lastSequenceNumber,targetSequenceNumber:h,lastKnownSeqNumber:this.deltaManager.lastKnownSeqNumber},async()=>PNe(this.deltaManager,h),{start:!0,end:!0,cancel:"error"})}try{await this.deltaManager.inbound.pause();const d=this.deltaManager.lastSequenceNumber,h=this.deltaManager.minimumSequenceNumber,p=`Summary @${d}:${this.deltaManager.minimumSequenceNumber}`;d!==((n=this.deltaManager.lastMessage)===null||n===void 0?void 0:n.sequenceNumber)&&c.sendErrorEvent({eventName:"LastSequenceMismatch",error:p}),this.summarizerNode.startSummary(d,c);const f=()=>e.cancellationToken.cancelled?{continue:!1,error:"disconnected"}:(N(this.connected,600),this.deltaManager.lastSequenceNumber!==d?{continue:!1,error:`lastSequenceNumber changed before uploading to storage. ${this.deltaManager.lastSequenceNumber} !== ${d}`}:{continue:!0});let m=f();if(!m.continue)return{stage:"base",referenceSequenceNumber:d,minimumSequenceNumber:h,error:m.error};const g=Ys.start();let v;const y=this.garbageCollector.summaryStateNeedsReset;try{v=await this.summarize({fullTree:s||y,trackState:!0,summaryLogger:c,runGC:this.garbageCollector.shouldRunGC})}catch(B){return{stage:"base",referenceSequenceNumber:d,minimumSequenceNumber:h,error:B}}const{summary:b,stats:C}=v;this.messageAtLastSummary=this.deltaManager.lastMessage;const R=this.disableIsolatedChannels?b:b.tree[Je.channelsTreeName];N(R.type===Ne.Tree,508);const w=Object.values(R.tree).filter(B=>B.type===Ne.Handle).length,E=b.tree[Io]?Uj(b.tree[Io]):void 0,k=Object.assign({dataStoreCount:this.dataStores.size,summarizedDataStoreCount:this.dataStores.size-w,gcStateUpdatedDataStoreCount:(r=v.gcStats)===null||r===void 0?void 0:r.updatedDataStoreCount,gcBlobNodeCount:E==null?void 0:E.blobNodeCount,gcTotalBlobsSize:E==null?void 0:E.totalBlobSize,opsSizesSinceLastSummary:this.opTracker.opsSizeAccumulator,nonSystemOpsSinceLastSummary:this.opTracker.nonSystemOpCount,summaryNumber:l},C),T={referenceSequenceNumber:d,minimumSequenceNumber:h,summaryTree:b,summaryStats:k,generateDuration:g.trace().duration,forcedFullTree:y};if(m=f(),!m.continue)return Object.assign(Object.assign({stage:"generate"},T),{error:m.error});const _=this.summaryCollection.latestAck;let D;(_==null?void 0:_.summaryAck.contents.handle)!==u&&u!==void 0?D={proposalHandle:void 0,ackHandle:u,referenceSequenceNumber:d}:_===void 0?D={proposalHandle:void 0,ackHandle:(i=this.context.getLoadedFromVersion())===null||i===void 0?void 0:i.id,referenceSequenceNumber:d}:D={proposalHandle:_.summaryOp.contents.handle,ackHandle:_.summaryAck.contents.handle,referenceSequenceNumber:d};let I;try{I=await this.storage.uploadSummaryWithContext(v.summary,D)}catch(B){return Object.assign(Object.assign({stage:"generate"},T),{error:B})}const M=D.ackHandle,A={handle:I,head:M,message:p,parents:M?[M]:[]},O=Object.assign(Object.assign({},T),{handle:I,uploadDuration:g.trace().duration});if(m=f(),!m.continue)return Object.assign(Object.assign({stage:"upload"},O),{error:m.error});let L;try{L=this.submitSystemMessage(et.Summarize,A)}catch(B){return Object.assign(Object.assign({stage:"upload"},O),{error:B})}const F=Object.assign(Object.assign({stage:"submit"},O),{clientSequenceNumber:L,submitOpDuration:g.trace().duration});return this.summarizerNode.completeSummary(I),this.opTracker.reset(),F}finally{this.summarizerNode.clearSummary(),this.deltaManager.inbound.resume()}}processRemoteChunkedMessage(e){if(e.type!==Dt.ChunkedOp)return e;const n=e.clientId,r=e.contents;if(this.addChunk(n,r),r.chunkId===r.totalChunks){const i=Object.assign({},e),s=this.chunkMap.get(n).join("");return i.contents=JSON.parse(s),i.type=r.originalType,this.clearPartialChunks(n),i}return e}addChunk(e,n){let r=this.chunkMap.get(e);r===void 0&&(r=[],this.chunkMap.set(e,r)),N(n.chunkId===r.length+1,305),r.push(n.contents)}clearPartialChunks(e){this.chunkMap.has(e)&&this.chunkMap.delete(e)}updateDocumentDirtyState(e){this.dirtyContainer!==e&&(this.dirtyContainer=e,this.emitDirtyDocumentEvent&&(this.emit(e?"dirty":"saved"),this.context.updateDirtyContainerState(e)))}submitDataStoreOp(e,n,r=void 0){const i={address:e,contents:n};this.submit(Dt.FluidDataStoreOp,i,r)}submitDataStoreAliasOp(e,n){if(!t7(e))throw new Tt("malformedDataStoreAliasMessage");this.submit(Dt.Alias,e,n)}async uploadBlob(e){return this.verifyNotClosed(),this.blobManager.createBlob(e)}submit(e,n,r=void 0,i=void 0){this.verifyNotClosed(),N(this.attachState!==ze.Detached,306);let s=-1,a=i;if(this.canSendOps()){const o=JSON.stringify(n),l=this.context.deltaManager.maxMessageSize;this.flushMode===Je.FlushMode.TurnBased&&!this.needsFlush&&(a=Object.assign(Object.assign({},i),{batch:!0}),this.needsFlush=!0,this.flushTrigger||Promise.resolve().then(()=>{this.flushTrigger=!1,this.flush()})),s=this.submitMaybeChunkedMessages(e,n,o,l,this._flushMode===Je.FlushMode.TurnBased,a)}this.pendingStateManager.onSubmitMessage(e,s,this.deltaManager.lastSequenceNumber,n,r,a),this.isContainerMessageDirtyable(e,n)&&this.updateDocumentDirtyState(!0)}submitMaybeChunkedMessages(e,n,r,i,s,a=void 0){return this._maxOpSizeInBytes>=0?!r||r.length<=this._maxOpSizeInBytes?this.submitRuntimeMessage(e,n,s,a):(this.closeFn(new Ya("OpTooLarge",void 0,{length:{value:r.length,tag:Vt.PackageData},limit:{value:this._maxOpSizeInBytes,tag:Vt.PackageData}})),-1):!r||r.length<=i?this.submitRuntimeMessage(e,n,s,a):this.submitChunkedMessage(e,r,i)}submitChunkedMessage(e,n,r){const i=n.length,s=Math.floor((i-1)/r)+1;let a=0,o=0;for(let l=1;l<=s;l=l+1){const c={chunkId:l,contents:n.substr(a,r),originalType:e,totalChunks:s};a+=r,o=this.submitRuntimeMessage(Dt.ChunkedOp,c,!1)}return o}submitSystemMessage(e,n){this.verifyNotClosed(),N(this.connected,307);const r=this.flushMode===Je.FlushMode.TurnBased&&this.needsFlush;return r&&this.mc.logger.sendErrorEvent({eventName:"submitSystemMessageError",type:e}),this.context.submitFn(e,n,r)}submitRuntimeMessage(e,n,r,i){this.verifyNotClosed(),N(this.connected,601);const s={type:e,contents:n};return this.context.submitFn(et.Operation,s,r,i)}verifyNotClosed(){if(this._disposed)throw new Error("Runtime is closed")}reSubmit(e,n,r,i){switch(e){case Dt.FluidDataStoreOp:this.dataStores.resubmitDataStoreOp(n,r);break;case Dt.Attach:case Dt.Alias:this.submit(e,n,r);break;case Dt.ChunkedOp:throw new Error("chunkedOp not expected here");case Dt.BlobAttach:this.submit(e,n,r,i);break;case Dt.Rejoin:this.submit(e,n);break;default:pi(e,`Unknown ContainerMessageType: ${e}`)}}rollback(e,n,r){switch(e){case Dt.FluidDataStoreOp:this.dataStores.rollbackDataStoreOp(n,r);break;default:throw new Error(`Can't rollback ${e}`)}}async refreshLatestSummaryAck(e,n,r,i){const s=async l=>zn(this.storage,l),{snapshotTree:a}=await this.fetchSnapshotFromStorage(n,i,{eventName:"RefreshLatestSummaryGetSnapshot",ackHandle:n,summaryRefSeq:r,fetchLatest:!1}),o=await this.summarizerNode.refreshLatestSummary(e,r,async()=>a,s,i);await this.garbageCollector.latestSummaryStateRefreshed(o,s)}async refreshLatestSummaryAckFromServer(e){const{snapshotTree:n,versionId:r}=await this.fetchSnapshotFromStorage(null,e,{eventName:"RefreshLatestSummaryGetSnapshot",fetchLatest:!0}),i=async o=>zn(this.storage,o),s=await w6e(n,i),a=await this.summarizerNode.refreshLatestSummary(void 0,s,async()=>n,i,e);return await this.garbageCollector.latestSummaryStateRefreshed(a,i),{latestSnapshotRefSeq:s,latestSnapshotVersionId:r}}async fetchSnapshotFromStorage(e,n,r){return gt.timedExecAsync(n,r,async i=>{const s={},a=Ys.start(),o=await this.storage.getVersions(e,1);N(!!o&&!!o[0],311),s.getVersionDuration=a.trace().duration;const l=await this.storage.getSnapshotTree(o[0]);return N(!!l,312),s.getSnapshotDuration=a.trace().duration,i.end(s),{snapshotTree:l,versionId:o[0].id}})}notifyAttaching(e){var n;((n=this.mc.config.getBoolean("enableOfflineLoad"))!==null&&n!==void 0?n:this.runtimeOptions.enableOfflineLoad)&&(this.baseSnapshotBlobs=Ax.serializeTreeWithBlobContents(e))}async getSnapshotBlobs(){var e;!((e=this.mc.config.getBoolean("enableOfflineLoad"))!==null&&e!==void 0?e:this.runtimeOptions.enableOfflineLoad)||this.attachState!==ze.Attached||this.context.pendingLocalState||(N(!!this.context.baseSnapshot,741),this.baseSnapshotBlobs=await Ax.serializeTree(this.context.baseSnapshot,this.storage))}getPendingLocalState(){var e;if(!((e=this.mc.config.getBoolean("enableOfflineLoad"))!==null&&e!==void 0?e:this.runtimeOptions.enableOfflineLoad))throw new Tt("can't get state when offline load disabled");const n=this.context.pendingLocalState;return n?{pending:this.pendingStateManager.getLocalState(),snapshotBlobs:n.snapshotBlobs,baseSnapshot:n.baseSnapshot,savedOps:this.savedOps}:(N(!!this.context.baseSnapshot,742),N(!!this.baseSnapshotBlobs,743),{pending:this.pendingStateManager.getLocalState(),snapshotBlobs:this.baseSnapshotBlobs,baseSnapshot:this.context.baseSnapshot,savedOps:this.savedOps})}formRequestSummarizerFn(e){return async()=>{const n={headers:{[ln.cache]:!1,[ln.clientDetails]:{capabilities:{interactive:!1},type:ti},[Id.summarizingClient]:!0,[ln.reconnect]:!1},url:"/_summarizer"},i=(await kp(e,n)).ISummarizer;if(!i)throw new Tt("Fluid object does not implement ISummarizer");return i}}async processSavedOps(e){for(const n of e.savedOps)this.process(n,!1),await this.pendingStateManager.applyStashedOpsAt(n.sequenceNumber);await this.pendingStateManager.applyStashedOpsAt()}}const PNe=async(t,e)=>new Promise((n,r)=>{t.on("closed",r);const i=s=>{s.sequenceNumber>=e&&(n(),t.off("op",i))};t.on("op",i)});/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class _Ne{constructor(e,n){this.absolutePath=e,this.routeContext=n,this.isAttached=!0,N(e.startsWith("/"),413)}get IFluidRouter(){return this}get IFluidHandleContext(){return this}get IFluidHandle(){return this}async get(){if(this.objectP===void 0){const e={url:this.absolutePath,headers:{[Yo.viaHandle]:!0}};this.objectP=this.routeContext.resolveHandle(e).then(n=>{if(n.mimeType==="fluid/object")return n.value;throw d1(n)})}return this.objectP}attachGraph(){}bind(e){e.attachGraph()}async request(e){try{const r=(await this.get()).IFluidRouter;return r!==void 0?r.request(e):Ts(e)}catch(n){return vv(n)}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const ANe=t=>(t==null?void 0:t.type)==="__fluid_handle__";class r7{constructor(e,n){for(this.context=e,this.handleParsedCb=n,this.encodeValue=(r,i)=>{const s=r==null?void 0:r.IFluidHandle;return s!==void 0?this.serializeHandle(s,i):r},this.decodeValue=r=>{if(ANe(r)){const i=r.url.startsWith("/")?r.url:fm(r.url,this.context),s=new _Ne(i,this.root);return this.handleParsedCb(s),s}else return r},this.root=this.context;this.root.routeContext!==void 0;)this.root=this.root.routeContext}get IFluidSerializer(){return this}encode(e,n){return e&&typeof e=="object"?this.recursivelyReplace(e,this.encodeValue,n):e}decode(e){return e&&typeof e=="object"?this.recursivelyReplace(e,this.decodeValue):e}stringify(e,n){return JSON.stringify(e,(r,i)=>this.encodeValue(i,n))}parse(e){return JSON.parse(e,(n,r)=>this.decodeValue(r))}recursivelyReplace(e,n,r){const i=n(e,r);if(i!==e)return i;let s;for(const a of Object.keys(e)){const o=e[a];if(o&&typeof o=="object"){const l=this.recursivelyReplace(o,n,r);l!==o&&(s=s??(Array.isArray(e)?[...e]:Object.assign({},e)),s[a]=l)}}return s??e}serializeHandle(e,n){return n.bind(e),{type:"__fluid_handle__",url:e.absolutePath}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class ONe extends ed{get isAttached(){return this.value.isAttached()}constructor(e,n,r){super(e,n,r)}attachGraph(){this.value.bindToContext(),super.attachGraph()}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class DNe extends r7{constructor(){super(...arguments),this.serializedRoutes=new Set}getSerializedRoutes(){return Array.from(this.serializedRoutes)}serializeHandle(e,n){return this.serializedRoutes.add(e.absolutePath),super.serializeHandle(e,n)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class INe extends tk{constructor(e,n,r){super((i,s)=>this.eventListenerErrorHandler(i,s)),this.id=e,this.runtime=n,this.attributes=r,this._connected=!1,this._isBoundToContext=!1,N(!e.includes("/"),772),this.handle=new ONe(this,e,n.IFluidHandleContext),this.logger=ot.create(n.logger,void 0,{all:{sharedObjectId:Cn(),ddsType:{value:this.attributes.type,tag:Vt.CodeArtifact}}}),this.mc=ch(this.logger),[this.opProcessingHelper,this.callbacksHelper]=this.setUpSampledTelemetryHelpers(),this.attachListeners()}get IFluidLoadable(){return this}get connected(){return this._connected}setUpSampledTelemetryHelpers(){var e,n;N(this.mc!==void 0&&this.logger!==void 0,"this.mc and/or this.logger has not been set");const r=new cO({eventName:"ddsOpProcessing",category:"performance"},this.logger,(e=this.mc.config.getNumber("Fluid.SharedObject.OpProcessingTelemetrySampling"))!==null&&e!==void 0?e:100,!0,new Map([["local",{localOp:!0}],["remote",{localOp:!1}]])),i=new cO({eventName:"ddsEventCallbacks",category:"performance"},this.logger,(n=this.mc.config.getNumber("Fluid.SharedObject.DdsCallbacksTelemetrySampling"))!==null&&n!==void 0?n:100,!0);return this.runtime.once("dispose",()=>{this.callbacksHelper.dispose(),this.opProcessingHelper.dispose()}),[r,i]}closeWithError(e){this.closeError===void 0&&(this.closeError=e)}verifyNotClosed(){if(this.closeError!==void 0)throw this.closeError}eventListenerErrorHandler(e,n){const r=Ni.wrapIfUnrecognized(n,"SharedObjectEventListenerException");throw r.addTelemetryProperties({emittedEventName:String(e)}),this.closeWithError(r),r}attachListeners(){this.isAttached()||this.runtime.once("attaching",()=>{this.didAttach()})}async load(e){this.runtime.attachState!==ze.Detached&&(this.services=e),await this.loadCore(e.objectStorage),this.runtime.attachState!==ze.Detached&&this.attachDeltaHandler()}initializeLocal(){this.initializeLocalCore()}bindToContext(){this._isBoundToContext||(this._isBoundToContext=!0,this.runtime.bindChannel(this))}connect(e){this.services=e,this.attachDeltaHandler()}isAttached(){return this.services!==void 0&&this.runtime.attachState!==ze.Detached}handleDecoded(e){var n,r,i;this.isAttached()&&((i=(n=this.services)===null||n===void 0?void 0:(r=n.deltaConnection).addedGCOutboundReference)===null||i===void 0||i.call(r,this.handle,e))}initializeLocalCore(){}didAttach(){}submitLocalMessage(e,n=void 0){this.verifyNotClosed(),this.isAttached()&&this.services.deltaConnection.submit(e,n)}dirty(){this.isAttached()&&this.services.deltaConnection.dirty()}onConnect(){}reSubmitCore(e,n){this.submitLocalMessage(e,n)}async newAckBasedPromise(e){let n;return new Promise((r,i)=>{if(n=()=>i(new Error("FluidDataStoreRuntime disposed while this ack-based Promise was pending")),this.runtime.disposed){n();return}this.runtime.on("dispose",n),e(r,i)}).finally(()=>{this.runtime.off("dispose",n)})}attachDeltaHandler(){N(this.services!==void 0,122),this._isBoundToContext=!0,this.didAttach(),this.services.deltaConnection.attach({process:(e,n,r)=>{this.process(e,n,r)},setConnectionState:e=>{this.setConnectionState(e)},reSubmit:(e,n)=>{this.reSubmit(e,n)},applyStashedOp:e=>this.applyStashedOp(e),rollback:(e,n)=>{this.rollback(e,n)}}),this.setConnectionState(this.services.deltaConnection.connected)}setConnectionState(e){this._connected!==e&&(this._connected=e,e?this.onConnect():this.onDisconnect())}process(e,n,r){this.verifyNotClosed(),this.emitInternal("pre-op",e,n,this),this.opProcessingHelper.measure(()=>{this.processCore(e,n,r)},n?"local":"remote"),this.emitInternal("op",e,n,this)}reSubmit(e,n){this.reSubmitCore(e,n)}rollback(e,n){throw new Error("rollback not supported")}emit(e,...n){return this.callbacksHelper.measure(()=>super.emit(e,...n))}emitInternal(e,...n){return super.emit(e,...n)}}class Kk extends INe{constructor(e,n,r,i){super(e,n,r),this.telemetryContextPrefix=i,this._isGCing=!1,this._serializer=new r7(this.runtime.channelsRoutingContext,s=>this.handleDecoded(s))}get serializer(){return N(!this._isGCing,117),this._serializer}getAttachSummary(e=!1,n=!1,r){const i=this.summarizeCore(this.serializer,r);return this.incrementTelemetryMetric(Je.blobCountPropertyName,i.stats.blobNodeCount,r),this.incrementTelemetryMetric(Je.totalBlobSizePropertyName,i.stats.totalBlobSize,r),i}async summarize(e=!1,n=!1,r){const i=this.summarizeCore(this.serializer,r);return this.incrementTelemetryMetric(Je.blobCountPropertyName,i.stats.blobNodeCount,r),this.incrementTelemetryMetric(Je.totalBlobSizePropertyName,i.stats.totalBlobSize,r),i}getGCData(e=!1){N(!this._isGCing,120),this._isGCing=!0;let n;try{const r=new DNe(this.runtime.channelsRoutingContext,i=>this.handleDecoded(i));this.processGCDataCore(r),n={gcNodes:{"/":r.getSerializedRoutes()}},N(this._isGCing,121)}finally{this._isGCing=!1}return n}processGCDataCore(e){this.summarizeCore(e)}incrementTelemetryMetric(e,n,r){var i;const s=(i=r==null?void 0:r.get(this.telemetryContextPrefix,e))!==null&&i!==void 0?i:0;r==null||r.set(this.telemetryContextPrefix,e,s+n)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function i7(t,e,n){return t!==void 0?e.stringify(t,n):t}function s7(t,e,n){return e.encode(t,n)}function wv(t,e){return t!==void 0?e.parse(JSON.stringify(t)):t}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var nn;(function(t){t[t.Shared=0]="Shared",t[t.Plain=1]="Plain"})(nn||(nn={}));/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function E2(t,e,n){const r=t.makeSerialized(e,n);return{type:r.type,value:r.value&&JSON.parse(r.value)}}class qD{constructor(e){this.value=e}get type(){return nn[nn.Plain]}makeSerialized(e,n){const r=i7(this.value,e,n);return{type:this.type,value:r}}}class a7{constructor(e){this.serializer=e}fromSerializable(e){if(e.type===nn[nn.Shared]){e.type=nn[nn.Plain];const r={type:"__fluid_handle__",url:e.value};e.value=r}const n=wv(e.value,this.serializer);return new qD(n)}fromInMemory(e){return new qD(e)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function Ox(t){return t!==void 0&&typeof t.pendingMessageId=="number"&&(t.type==="add"||t.type==="edit")}function zD(t){return t!==void 0&&t.type==="clear"&&typeof t.pendingMessageId=="number"}function MNe(t){return t!==void 0&&typeof t.pendingMessageId=="number"&&(t.type==="add"||t.type==="edit"||t.type==="clear")}class NNe{constructor(e,n,r,i,s){this.serializer=e,this.handle=n,this.submitMessage=r,this.isAttached=i,this.eventEmitter=s,this.messageHandlers=new Map,this.data=new Map,this.pendingKeys=new Map,this.pendingMessageId=-1,this.pendingClearMessageIds=[],this.localValueMaker=new a7(e),this.messageHandlers=this.getMessageHandlers()}get size(){return this.data.size}keys(){return this.data.keys()}entries(){const e=this.data.entries();return{next(){const r=e.next();return r.done?{value:void 0,done:!0}:{value:[r.value[0],r.value[1].value],done:!1}},[Symbol.iterator](){return this}}}values(){const e=this.data.values();return{next(){const r=e.next();return r.done?{value:void 0,done:!0}:{value:r.value.value,done:!1}},[Symbol.iterator](){return this}}}[Symbol.iterator](){return this.entries()}forEach(e){this.data.forEach((n,r,i)=>{e(n.value,r,i)})}get(e){const n=this.data.get(e);return n===void 0?void 0:n.value}has(e){return this.data.has(e)}set(e,n){if(e==null)throw new Error("Undefined and null keys are not supported");const r=this.localValueMaker.fromInMemory(n),i=E2(r,this.serializer,this.handle),s=this.setCore(e,r,!0);if(!this.isAttached())return;const a={key:e,type:"set",value:i};this.submitMapKeyMessage(a,s)}delete(e){const n=this.deleteCore(e,!0);if(!this.isAttached())return n!==void 0;const r={key:e,type:"delete"};return this.submitMapKeyMessage(r,n),n!==void 0}clear(){const e=this.isAttached()?new Map(this.data):void 0;if(this.clearCore(!0),!this.isAttached())return;const n={type:"clear"};this.submitMapClearMessage(n,e)}getSerializedStorage(e){const n={};return this.data.forEach((r,i)=>{n[i]=r.makeSerialized(e,this.handle)}),n}getSerializableStorage(e){const n={};return this.data.forEach((r,i)=>{n[i]=E2(r,e,this.handle)}),n}serialize(e){return JSON.stringify(this.getSerializableStorage(e))}populateFromSerializable(e){for(const[n,r]of Object.entries(e)){const i={key:n,value:this.makeLocal(n,r)};this.data.set(i.key,i.value)}}populate(e){this.populateFromSerializable(JSON.parse(e))}trySubmitMessage(e,n){const r=this.messageHandlers.get(e.type);return r===void 0?!1:(r.submit(e,n),!0)}tryGetStashedOpLocalMetadata(e){const n=this.messageHandlers.get(e.type);if(n===void 0)throw new Error("no apply stashed op handler");return n.getStashedOpLocalMetadata(e)}tryProcessMessage(e,n,r){const i=this.messageHandlers.get(e.type);return i===void 0?!1:(i.process(e,n,r),!0)}rollback(e,n){if(!MNe(n))throw new Error("Invalid localOpMetadata");if(e.type==="clear"&&n.type==="clear"){if(n.previousMap===void 0)throw new Error("Cannot rollback without previous map");n.previousMap.forEach((i,s)=>{this.setCore(s,i,!0)});const r=this.pendingClearMessageIds.pop();if(r===void 0||r!==n.pendingMessageId)throw new Error("Rollback op does match last clear")}else if(e.type==="delete"||e.type==="set"){if(n.type==="add")this.deleteCore(e.key,!0);else if(n.type==="edit"&&n.previousValue!==void 0)this.setCore(e.key,n.previousValue,!0);else throw new Error("Cannot rollback without previous value");const r=this.pendingKeys.get(e.key),i=r==null?void 0:r.pop();if(!r||i!==n.pendingMessageId)throw new Error("Rollback op does not match last pending");r.length===0&&this.pendingKeys.delete(e.key)}else throw new Error("Unsupported op for rollback")}setCore(e,n,r){const i=this.data.get(e),s=i==null?void 0:i.value;return this.data.set(e,n),this.eventEmitter.emit("valueChanged",{key:e,previousValue:s},r,this.eventEmitter),i}clearCore(e){this.data.clear(),this.eventEmitter.emit("clear",e,this.eventEmitter)}deleteCore(e,n){const r=this.data.get(e),i=r==null?void 0:r.value;return this.data.delete(e)&&this.eventEmitter.emit("valueChanged",{key:e,previousValue:i},n,this.eventEmitter),r}clearExceptPendingKeys(){const e=new Map;this.pendingKeys.forEach((n,r)=>{e.set(r,this.data.get(r))}),this.clearCore(!1),e.forEach((n,r)=>{this.setCore(r,n,!0)})}makeLocal(e,n){if(n.type===nn[nn.Plain]||n.type===nn[nn.Shared])return this.localValueMaker.fromSerializable(n);throw new Error("Unknown local value type")}needProcessKeyOperation(e,n,r){if(this.pendingClearMessageIds.length>0)return n&&N(r!==void 0&&Ox(r)&&r.pendingMessageId<this.pendingClearMessageIds[0],19),!1;if(this.pendingKeys.get(e.key)!==void 0){if(n){N(r!==void 0&&Ox(r),20);const s=this.pendingKeys.get(e.key);N(s!==void 0&&s[0]===r.pendingMessageId,762),s.shift(),s.length===0&&this.pendingKeys.delete(e.key)}return!1}return!n}getMessageHandlers(){const e=new Map;return e.set("clear",{process:(n,r,i)=>{if(r){N(zD(i),21);const s=this.pendingClearMessageIds.shift();N(s===i.pendingMessageId,763);return}if(this.pendingKeys.size!==0){this.clearExceptPendingKeys();return}this.clearCore(r)},submit:(n,r)=>{N(zD(r),764);const i=this.pendingClearMessageIds.shift();N(i===r.pendingMessageId,765),this.submitMapClearMessage(n,r.previousMap)},getStashedOpLocalMetadata:n=>({type:"clear",pendingMessageId:this.getMapClearMessageId()})}),e.set("delete",{process:(n,r,i)=>{this.needProcessKeyOperation(n,r,i)&&this.deleteCore(n.key,r)},submit:(n,r)=>{this.resubmitMapKeyMessage(n,r)},getStashedOpLocalMetadata:n=>({type:"edit",pendingMessageId:this.getMapKeyMessageId(n)})}),e.set("set",{process:(n,r,i)=>{if(!this.needProcessKeyOperation(n,r,i))return;const s=this.makeLocal(n.key,n.value);this.setCore(n.key,s,r)},submit:(n,r)=>{this.resubmitMapKeyMessage(n,r)},getStashedOpLocalMetadata:n=>({type:"edit",pendingMessageId:this.getMapKeyMessageId(n)})}),e}getMapClearMessageId(){const e=++this.pendingMessageId;return this.pendingClearMessageIds.push(e),e}submitMapClearMessage(e,n){const r={type:"clear",pendingMessageId:this.getMapClearMessageId(),previousMap:n};this.submitMessage(e,r)}getMapKeyMessageId(e){const n=++this.pendingMessageId,r=this.pendingKeys.get(e.key);return r!==void 0?r.push(n):this.pendingKeys.set(e.key,[n]),n}submitMapKeyMessage(e,n){const r=this.getMapKeyMessageId(e),i=n?{type:"edit",pendingMessageId:r,previousValue:n}:{type:"add",pendingMessageId:r};this.submitMessage(e,i)}resubmitMapKeyMessage(e,n){N(Ox(n),766);const r=this.pendingKeys.get(e.key);N(r!==void 0&&r[0]===n.pendingMessageId,767),r.shift(),r.length===0&&this.pendingKeys.delete(e.key);const i=this.getMapKeyMessageId(e),s=n.type==="edit"?{type:"edit",pendingMessageId:i,previousValue:n.previousValue}:{type:"add",pendingMessageId:i};this.submitMessage(e,s)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 *
 * THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY
 */const o7="1.3.6";/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var HD;const UD="header";class Os{get type(){return Os.Type}get attributes(){return Os.Attributes}async load(e,n,r,i){const s=new T2(n,e,i);return await s.load(r),s}create(e,n){const r=new T2(n,e,Os.Attributes);return r.initializeLocal(),r}}Os.Type="https://graph.microsoft.com/types/map";Os.Attributes={type:Os.Type,snapshotFormatVersion:"0.2",packageVersion:o7};class T2 extends Kk{constructor(e,n,r){super(e,n,r,"fluid_map_"),this[HD]="SharedMap",this.kernel=new NNe(this.serializer,this.handle,(i,s)=>this.submitLocalMessage(i,s),()=>this.isAttached(),this)}static create(e,n){return e.createChannel(n,Os.Type)}static getFactory(){return new Os}keys(){return this.kernel.keys()}entries(){return this.kernel.entries()}values(){return this.kernel.values()}[(HD=Symbol.toStringTag,Symbol.iterator)](){return this.kernel.entries()}get size(){return this.kernel.size}forEach(e){this.kernel.forEach(e)}get(e){return this.kernel.get(e)}has(e){return this.kernel.has(e)}set(e,n){return this.kernel.set(e,n),this}delete(e){return this.kernel.delete(e)}clear(){this.kernel.clear()}summarizeCore(e,n){let r=0,i=0,s={};const a=[],o=new mi,l=this.kernel.getSerializedStorage(e),c=8*1024,u=16*1024;for(const h of Object.keys(l)){const p=l[h];if(p.value&&p.value.length>=c){const f=`blob${i}`;i++,a.push(f);const m={[h]:{type:p.type,value:JSON.parse(p.value)}};o.addBlob(f,JSON.stringify(m))}else{if(r+=p.type.length+21,p.value&&(r+=p.value.length),r>u){const f=`blob${i}`;i++,a.push(f),o.addBlob(f,JSON.stringify(s)),s={},r=0}s[h]={type:p.type,value:p.value===void 0?void 0:JSON.parse(p.value)}}}const d={blobs:a,content:s};return o.addBlob(UD,JSON.stringify(d)),o.getSummaryTree()}async loadCore(e){const n=await zn(e,UD),r=n;Array.isArray(r.blobs)?(this.kernel.populateFromSerializable(r.content),await Promise.all(r.blobs.map(async i=>{const s=await zn(e,i);this.kernel.populateFromSerializable(s)}))):this.kernel.populateFromSerializable(n)}onDisconnect(){}reSubmitCore(e,n){this.kernel.trySubmitMessage(e,n)}applyStashedOp(e){return this.kernel.tryProcessMessage(e,!1,void 0),this.kernel.tryGetStashedOpLocalMetadata(e)}processCore(e,n,r){e.type===et.Operation&&this.kernel.tryProcessMessage(e.contents,n,r)}rollback(e,n){this.kernel.rollback(e,n)}}function zs(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function VD(t,e){for(var n="",r=0,i=-1,s=0,a,o=0;o<=t.length;++o){if(o<t.length)a=t.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length===2||n.length===1){n="",r=0,i=o,s=0;continue}}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s!==-1?++s:s=-1}return n}function FNe(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+t+r:r}var td={resolve:function(){for(var e="",n=!1,r,i=arguments.length-1;i>=-1&&!n;i--){var s;i>=0?s=arguments[i]:(r===void 0&&(r=process.cwd()),s=r),zs(s),s.length!==0&&(e=s+"/"+e,n=s.charCodeAt(0)===47)}return e=VD(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(zs(e),e.length===0)return".";var n=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=VD(e,!n),e.length===0&&!n&&(e="."),e.length>0&&r&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return zs(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];zs(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":td.normalize(e)},relative:function(e,n){if(zs(e),zs(n),e===n||(e=td.resolve(e),n=td.resolve(n),e===n))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var i=e.length,s=i-r,a=1;a<n.length&&n.charCodeAt(a)===47;++a);for(var o=n.length,l=o-a,c=s<l?s:l,u=-1,d=0;d<=c;++d){if(d===c){if(l>c){if(n.charCodeAt(a+d)===47)return n.slice(a+d+1);if(d===0)return n.slice(a+d)}else s>c&&(e.charCodeAt(r+d)===47?u=d:d===0&&(u=0));break}var h=e.charCodeAt(r+d),p=n.charCodeAt(a+d);if(h!==p)break;h===47&&(u=d)}var f="";for(d=r+u+1;d<=i;++d)(d===i||e.charCodeAt(d)===47)&&(f.length===0?f+="..":f+="/..");return f.length>0?f+n.slice(a+u):(a+=u,n.charCodeAt(a)===47&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(zs(e),e.length===0)return".";for(var n=e.charCodeAt(0),r=n===47,i=-1,s=!0,a=e.length-1;a>=1;--a)if(n=e.charCodeAt(a),n===47){if(!s){i=a;break}}else s=!1;return i===-1?r?"/":".":r&&i===1?"//":e.slice(0,i)},basename:function(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');zs(e);var r=0,i=-1,s=!0,a;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var o=n.length-1,l=-1;for(a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(c===47){if(!s){r=a+1;break}}else l===-1&&(s=!1,l=a+1),o>=0&&(c===n.charCodeAt(o)?--o===-1&&(i=a):(o=-1,i=l))}return r===i?i=l:i===-1&&(i=e.length),e.slice(r,i)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!s){r=a+1;break}}else i===-1&&(s=!1,i=a+1);return i===-1?"":e.slice(r,i)}},extname:function(e){zs(e);for(var n=-1,r=0,i=-1,s=!0,a=0,o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(l===47){if(!s){r=o+1;break}continue}i===-1&&(s=!1,i=o+1),l===46?n===-1?n=o:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||i===-1||a===0||a===1&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return FNe("/",e)},parse:function(e){zs(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var r=e.charCodeAt(0),i=r===47,s;i?(n.root="/",s=1):s=0;for(var a=-1,o=0,l=-1,c=!0,u=e.length-1,d=0;u>=s;--u){if(r=e.charCodeAt(u),r===47){if(!c){o=u+1;break}continue}l===-1&&(c=!1,l=u+1),r===46?a===-1?a=u:d!==1&&(d=1):a!==-1&&(d=-1)}return a===-1||l===-1||d===0||d===1&&a===l-1&&a===o+1?l!==-1&&(o===0&&i?n.base=n.name=e.slice(1,l):n.base=n.name=e.slice(o,l)):(o===0&&i?(n.name=e.slice(1,a),n.base=e.slice(1,l)):(n.name=e.slice(o,a),n.base=e.slice(o,l)),n.ext=e.slice(a,l)),o>0?n.dir=e.slice(0,o-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};td.posix=td;var $Ne=td;/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var WD,GD;const Qr=$Ne.posix,KD="header";class ga{get type(){return ga.Type}get attributes(){return ga.Attributes}async load(e,n,r,i){const s=new Cv(n,e,i);return await s.load(r),s}create(e,n){const r=new Cv(n,e,ga.Attributes);return r.initializeLocal(),r}}ga.Type="https://graph.microsoft.com/types/directory";ga.Attributes={type:ga.Type,snapshotFormatVersion:"0.1",packageVersion:o7};class Cv extends Kk{constructor(e,n,r){super(e,n,r,"fluid_directory_"),this[WD]="SharedDirectory",this.root=new Ev(this,this.runtime,this.serializer,Qr.sep),this.messageHandlers=new Map,this.localValueMaker=new a7(this.serializer),this.setMessageHandlers(),this.root.on("containedValueChanged",(i,s)=>{this.emit("containedValueChanged",i,s,this)}),this.root.on("subDirectoryCreated",(i,s)=>{this.emit("subDirectoryCreated",i,s,this)}),this.root.on("subDirectoryDeleted",(i,s)=>{this.emit("subDirectoryDeleted",i,s,this)})}static create(e,n){return e.createChannel(n,ga.Type)}static getFactory(){return new ga}get absolutePath(){return this.root.absolutePath}get(e){return this.root.get(e)}set(e,n){return this.root.set(e,n),this}dispose(e){this.root.dispose(e)}get disposed(){return this.root.disposed}delete(e){return this.root.delete(e)}clear(){this.root.clear()}has(e){return this.root.has(e)}get size(){return this.root.size}forEach(e){this.root.forEach(e)}[(WD=Symbol.toStringTag,Symbol.iterator)](){return this.root[Symbol.iterator]()}entries(){return this.root.entries()}countSubDirectory(){return this.root.countSubDirectory()}keys(){return this.root.keys()}values(){return this.root.values()}createSubDirectory(e){return this.root.createSubDirectory(e)}getSubDirectory(e){return this.root.getSubDirectory(e)}hasSubDirectory(e){return this.root.hasSubDirectory(e)}deleteSubDirectory(e){return this.root.deleteSubDirectory(e)}subdirectories(){return this.root.subdirectories()}getWorkingDirectory(e){const n=this.makeAbsolute(e);if(n===Qr.sep)return this.root;let r=this.root;const i=n.substr(1).split(Qr.sep);for(const s of i)if(r=r.getSubDirectory(s),!r)return;return r}summarizeCore(e,n){return this.serializeDirectory(this.root,e)}submitDirectoryMessage(e,n){this.submitLocalMessage(e,n)}onDisconnect(){}reSubmitCore(e,n){const r=e,i=this.messageHandlers.get(r.type);N(i!==void 0,13),i.submit(r,n)}async loadCore(e){const n=await zn(e,KD),r=n;Array.isArray(r.blobs)?(this.populate(r.content),await Promise.all(r.blobs.map(async i=>{const s=await zn(e,i);this.populate(s)}))):this.populate(n)}populate(e){const n=[];for(n.push([this.root,e]);n.length>0;){const[r,i]=n.pop();if(i.subdirectories)for(const[s,a]of Object.entries(i.subdirectories)){let o=r.getSubDirectory(s);o||(o=new Ev(this,this.runtime,this.serializer,Qr.join(r.absolutePath,s)),r.populateSubDirectory(s,o)),n.push([o,a])}if(i.storage)for(const[s,a]of Object.entries(i.storage)){const o=this.makeLocal(s,r.absolutePath,a);r.populateStorage(s,o)}}}processCore(e,n,r){if(e.type===et.Operation){const i=e.contents,s=this.messageHandlers.get(i.type);N(s!==void 0,14),s.process(i,n,r)}}rollback(e,n){const r=e,i=this.getWorkingDirectory(r.path);i&&i.rollback(r,n)}makeAbsolute(e){return Qr.resolve(Qr.sep,e)}makeLocal(e,n,r){return N(r.type===nn[nn.Plain]||r.type===nn[nn.Shared],484),this.localValueMaker.fromSerializable(r)}setMessageHandlers(){this.messageHandlers.set("clear",{process:(e,n,r)=>{const i=this.getWorkingDirectory(e.path);i&&i.processClearMessage(e,n,r)},submit:(e,n)=>{const r=this.getWorkingDirectory(e.path);r&&r.resubmitClearMessage(e,n)}}),this.messageHandlers.set("delete",{process:(e,n,r)=>{const i=this.getWorkingDirectory(e.path);i&&i.processDeleteMessage(e,n,r)},submit:(e,n)=>{const r=this.getWorkingDirectory(e.path);r&&r.resubmitKeyMessage(e,n)}}),this.messageHandlers.set("set",{process:(e,n,r)=>{const i=this.getWorkingDirectory(e.path);if(i){const s=n?void 0:this.makeLocal(e.key,e.path,e.value);i.processSetMessage(e,s,n,r)}},submit:(e,n)=>{const r=this.getWorkingDirectory(e.path);r&&r.resubmitKeyMessage(e,n)}}),this.messageHandlers.set("createSubDirectory",{process:(e,n,r)=>{const i=this.getWorkingDirectory(e.path);i&&i.processCreateSubDirectoryMessage(e,n,r)},submit:(e,n)=>{const r=this.getWorkingDirectory(e.path);r&&r.resubmitSubDirectoryMessage(e,n)}}),this.messageHandlers.set("deleteSubDirectory",{process:(e,n,r)=>{const i=this.getWorkingDirectory(e.path);i&&i.processDeleteSubDirectoryMessage(e,n,r)},submit:(e,n)=>{const r=this.getWorkingDirectory(e.path);r&&r.resubmitSubDirectoryMessage(e,n)}})}applyStashedOp(){throw new Error("not implemented")}serializeDirectory(e,n,r){const s=new mi;let a=0;const o=[],l=[],c={};for(l.push([e,c]);l.length>0;){const[d,h]=l.pop();for(const[p,f]of d.getSerializedStorage(n)){h.storage||(h.storage={});const m={type:f.type,value:f.value&&JSON.parse(f.value)};if(f.value&&f.value.length>=8192){const g={};let v=g;if(d.absolutePath!==Qr.sep)for(const b of d.absolutePath.substr(1).split(Qr.sep)){const C={};v.subdirectories={[b]:C},v=C}v.storage={[p]:m};const y=`blob${a}`;a++,o.push(y),s.addBlob(y,JSON.stringify(g))}else h.storage[p]=m}for(const[p,f]of d.subdirectories()){h.subdirectories||(h.subdirectories={});const m={};h.subdirectories[p]=m,l.push([f,m])}}const u={blobs:o,content:c};return s.addBlob(KD,JSON.stringify(u)),s.getSummaryTree()}}function Dx(t){return t!==void 0&&typeof t.pendingMessageId=="number"&&t.type==="edit"}function YD(t){return t!==void 0&&t.type==="clear"&&typeof t.pendingMessageId=="number"&&typeof t.previousStorage=="object"}function JD(t){return t!==void 0&&typeof t.pendingMessageId=="number"&&(t.type==="createSubDir"&&typeof t.previouslyExisted=="boolean"||t.type==="deleteSubDir")}function LNe(t){return t!==void 0&&typeof t.pendingMessageId=="number"&&(t.type==="edit"||t.type==="deleteSubDir"||t.type==="clear"&&typeof t.previousStorage=="object"||t.type==="createSubDir"&&typeof t.previouslyExisted=="boolean")}class Ev extends An{constructor(e,n,r,i){super(),this.directory=e,this.runtime=n,this.serializer=r,this.absolutePath=i,this._deleted=!1,this[GD]="SubDirectory",this._storage=new Map,this._subdirectories=new Map,this.pendingKeys=new Map,this.pendingSubDirectories=new Map,this.pendingMessageId=-1,this.pendingClearMessageIds=[]}dispose(e){this._deleted=!0,this.emit("disposed",this)}undispose(){this._deleted=!1}get disposed(){return this._deleted}throwIfDisposed(){if(this._deleted)throw new Tt("Cannot access Disposed subDirectory")}has(e){return this.throwIfDisposed(),this._storage.has(e)}get(e){var n;return this.throwIfDisposed(),(n=this._storage.get(e))===null||n===void 0?void 0:n.value}set(e,n){if(this.throwIfDisposed(),e==null)throw new Error("Undefined and null keys are not supported");const r=this.directory.localValueMaker.fromInMemory(n),i=E2(r,this.serializer,this.directory.handle),s=this.setCore(e,r,!0);if(!this.directory.isAttached())return this;const a={key:e,path:this.absolutePath,type:"set",value:i};return this.submitKeyMessage(a,s),this}countSubDirectory(){return this._subdirectories.size}createSubDirectory(e){if(this.throwIfDisposed(),e==null)throw new Error("SubDirectory name may not be undefined or null");if(e.includes(Qr.sep))throw new Error(`SubDirectory name may not contain ${Qr.sep}`);const n=this.createSubDirectoryCore(e,!0),r=this._subdirectories.get(e);if(!this.directory.isAttached())return r;const i={path:this.absolutePath,subdirName:e,type:"createSubDirectory"};return this.submitCreateSubDirectoryMessage(i,!n),r}getSubDirectory(e){return this.throwIfDisposed(),this._subdirectories.get(e)}hasSubDirectory(e){return this.throwIfDisposed(),this._subdirectories.has(e)}deleteSubDirectory(e){this.throwIfDisposed();const n=this.deleteSubDirectoryCore(e,!0);if(!this.directory.isAttached())return n!==void 0;const r={path:this.absolutePath,subdirName:e,type:"deleteSubDirectory"};return this.submitDeleteSubDirectoryMessage(r,n),n!==void 0}subdirectories(){return this.throwIfDisposed(),this._subdirectories.entries()}getWorkingDirectory(e){return this.throwIfDisposed(),this.directory.getWorkingDirectory(this.makeAbsolute(e))}delete(e){this.throwIfDisposed();const n=this.deleteCore(e,!0);if(!this.directory.isAttached())return n!==void 0;const r={key:e,path:this.absolutePath,type:"delete"};return this.submitKeyMessage(r,n),n!==void 0}clear(){if(this.throwIfDisposed(),!this.directory.isAttached()){this.clearCore(!0);return}const e=new Map(this._storage);this.clearCore(!0);const n={path:this.absolutePath,type:"clear"};this.submitClearMessage(n,e)}forEach(e){this.throwIfDisposed(),this._storage.forEach((n,r,i)=>{e(n.value,r,i)})}get size(){return this.throwIfDisposed(),this._storage.size}entries(){this.throwIfDisposed();const e=this._storage.entries();return{next(){const r=e.next();return r.done?{value:void 0,done:!0}:{value:[r.value[0],r.value[1].value],done:!1}},[Symbol.iterator](){return this}}}keys(){return this.throwIfDisposed(),this._storage.keys()}values(){this.throwIfDisposed();const e=this._storage.values();return{next(){const r=e.next();return r.done?{value:void 0,done:!0}:{value:r.value.value,done:!1}},[Symbol.iterator](){return this}}}[(GD=Symbol.toStringTag,Symbol.iterator)](){return this.throwIfDisposed(),this.entries()}processClearMessage(e,n,r){if(this.throwIfDisposed(),n){N(YD(r),15);const i=this.pendingClearMessageIds.shift();N(i===r.pendingMessageId,810);return}this.clearExceptPendingKeys()}processDeleteMessage(e,n,r){this.throwIfDisposed(),this.needProcessStorageOperation(e,n,r)&&this.deleteCore(e.key,n)}processSetMessage(e,n,r,i){this.throwIfDisposed(),this.needProcessStorageOperation(e,r,i)&&this.setCore(e.key,n,r)}processCreateSubDirectoryMessage(e,n,r){this.throwIfDisposed(),this.needProcessSubDirectoryOperation(e,n,r)&&this.createSubDirectoryCore(e.subdirName,n)}processDeleteSubDirectoryMessage(e,n,r){this.throwIfDisposed(),this.needProcessSubDirectoryOperation(e,n,r)&&this.deleteSubDirectoryCore(e.subdirName,n)}submitClearMessage(e,n){this.throwIfDisposed();const r=++this.pendingMessageId;this.pendingClearMessageIds.push(r);const i={type:"clear",pendingMessageId:r,previousStorage:n};this.directory.submitDirectoryMessage(e,i)}resubmitClearMessage(e,n){N(YD(n),811);const r=this.pendingClearMessageIds.shift();N(r===n.pendingMessageId,812),this.submitClearMessage(e,n.previousStorage)}getKeyMessageId(e){const n=++this.pendingMessageId,r=this.pendingKeys.get(e.key);return r!==void 0?r.push(n):this.pendingKeys.set(e.key,[n]),n}submitKeyMessage(e,n){this.throwIfDisposed();const i={type:"edit",pendingMessageId:this.getKeyMessageId(e),previousValue:n};this.directory.submitDirectoryMessage(e,i)}resubmitKeyMessage(e,n){N(Dx(n),813);const r=this.pendingKeys.get(e.key);N(r!==void 0&&r[0]===n.pendingMessageId,814),r.shift(),r.length===0&&this.pendingKeys.delete(e.key),this.submitKeyMessage(e,n.previousValue)}getSubDirMessageId(e){const n=++this.pendingMessageId,r=this.pendingSubDirectories.get(e.subdirName);return r!==void 0?r.push(n):this.pendingSubDirectories.set(e.subdirName,[n]),n}submitCreateSubDirectoryMessage(e,n){this.throwIfDisposed();const i={type:"createSubDir",pendingMessageId:this.getSubDirMessageId(e),previouslyExisted:n};this.directory.submitDirectoryMessage(e,i)}submitDeleteSubDirectoryMessage(e,n){this.throwIfDisposed();const i={type:"deleteSubDir",pendingMessageId:this.getSubDirMessageId(e),subDirectory:n};this.directory.submitDirectoryMessage(e,i)}resubmitSubDirectoryMessage(e,n){N(JD(n),815);const r=this.pendingSubDirectories.get(e.subdirName);N(r!==void 0&&r[0]===n.pendingMessageId,816),r.shift(),r.length===0&&this.pendingSubDirectories.delete(e.subdirName),n.type==="createSubDir"?this.submitCreateSubDirectoryMessage(e,n.previouslyExisted):this.submitDeleteSubDirectoryMessage(e,n.subDirectory)}*getSerializedStorage(e){this.throwIfDisposed();for(const[n,r]of this._storage){const i=r.makeSerialized(e,this.directory.handle);yield[n,i]}}populateStorage(e,n){this.throwIfDisposed(),this._storage.set(e,n)}populateSubDirectory(e,n){this.throwIfDisposed(),this._subdirectories.set(e,n)}getLocalValue(e){return this.throwIfDisposed(),this._storage.get(e)}rollbackPendingMessageId(e,n,r){const i=e.get(n),s=i==null?void 0:i.pop();if(!i||s!==r)throw new Error("Rollback op does not match last pending");i.length===0&&e.delete(n)}rollback(e,n){if(!LNe(n))throw new Error("Invalid localOpMetadata");if(e.type==="clear"&&n.type==="clear"){n.previousStorage.forEach((i,s)=>{this.setCore(s,i,!0)});const r=this.pendingClearMessageIds.pop();if(r===void 0||r!==n.pendingMessageId)throw new Error("Rollback op does match last clear")}else if((e.type==="delete"||e.type==="set")&&n.type==="edit")n.previousValue===void 0?this.deleteCore(e.key,!0):this.setCore(e.key,n.previousValue,!0),this.rollbackPendingMessageId(this.pendingKeys,e.key,n.pendingMessageId);else if(e.type==="createSubDirectory"&&n.type==="createSubDir")n.previouslyExisted||this.deleteSubDirectoryCore(e.subdirName,!0),this.rollbackPendingMessageId(this.pendingSubDirectories,e.subdirName,n.pendingMessageId);else if(e.type==="deleteSubDirectory"&&n.type==="deleteSubDir")n.subDirectory!==void 0&&(this.undeleteSubDirectoryTree(n.subDirectory),this._subdirectories.set(e.subdirName,n.subDirectory),this.emit("subDirectoryCreated",e.subdirName,!0,this)),this.rollbackPendingMessageId(this.pendingSubDirectories,e.subdirName,n.pendingMessageId);else throw new Error("Unsupported op for rollback")}makeAbsolute(e){return Qr.resolve(this.absolutePath,e)}needProcessStorageOperation(e,n,r){if(this.pendingClearMessageIds.length>0)return n&&N(r!==void 0&&Dx(r)&&r.pendingMessageId<this.pendingClearMessageIds[0],16),!1;if(this.pendingKeys.get(e.key)!==void 0){if(n){N(r!==void 0&&Dx(r),17);const s=this.pendingKeys.get(e.key);N(s!==void 0&&s[0]===r.pendingMessageId,817),s.shift(),s.length===0&&this.pendingKeys.delete(e.key)}return!1}return!n}needProcessSubDirectoryOperation(e,n,r){if(this.pendingSubDirectories.get(e.subdirName)!==void 0){if(n){N(JD(r),18);const s=this.pendingSubDirectories.get(e.subdirName);N(s!==void 0&&s[0]===r.pendingMessageId,818),s.shift(),s.length===0&&this.pendingSubDirectories.delete(e.subdirName)}return!1}return!n}clearExceptPendingKeys(){const e=new Map;this.pendingKeys.forEach((n,r,i)=>{e.set(r,this._storage.get(r))}),this.clearCore(!1),e.forEach((n,r,i)=>{this.setCore(r,n,!0)})}clearCore(e){this._storage.clear(),this.directory.emit("clear",e,this.directory)}deleteCore(e,n){const r=this._storage.get(e),i=r==null?void 0:r.value;if(this._storage.delete(e)){const a={key:e,path:this.absolutePath,previousValue:i};this.directory.emit("valueChanged",a,n,this.directory);const o={key:e,previousValue:i};this.emit("containedValueChanged",o,n,this)}return r}setCore(e,n,r){const i=this._storage.get(e),s=i==null?void 0:i.value;this._storage.set(e,n);const a={key:e,path:this.absolutePath,previousValue:s};this.directory.emit("valueChanged",a,r,this.directory);const o={key:e,previousValue:s};return this.emit("containedValueChanged",o,r,this),i}createSubDirectoryCore(e,n){if(!this._subdirectories.has(e)){const r=Qr.join(this.absolutePath,e),i=new Ev(this.directory,this.runtime,this.serializer,r);return this.registerEventsOnSubDirectory(i,e),this._subdirectories.set(e,i),this.emit("subDirectoryCreated",e,n,this),!0}return!1}registerEventsOnSubDirectory(e,n){e.on("subDirectoryCreated",(r,i)=>{this.emit("subDirectoryCreated",Qr.join(n,r),i,this)}),e.on("subDirectoryDeleted",(r,i)=>{this.emit("subDirectoryDeleted",Qr.join(n,r),i,this)})}deleteSubDirectoryCore(e,n){const r=this._subdirectories.get(e);return r!==void 0&&(this._subdirectories.delete(e),this.disposeSubDirectoryTree(r),this.emit("subDirectoryDeleted",e,n,this)),r}disposeSubDirectoryTree(e){if(!e)return;const n=e.subdirectories();for(const[r,i]of n)this.disposeSubDirectoryTree(i);typeof e.dispose=="function"&&e.dispose()}undeleteSubDirectoryTree(e){for(const[n,r]of this._subdirectories.entries())this.undeleteSubDirectoryTree(r);e.undispose()}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const XD="IFluidDependencySynthesizer";/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class g1{constructor(...e){this.providers=new Map,this.parents=e.filter(n=>n!==void 0)}get IFluidDependencySynthesizer(){return this}register(e,n){if(this.providers.has(e))throw new Error(`Attempting to register a provider of type ${e} that already exists`);this.providers.set(e,n)}unregister(e){this.providers.has(e)&&this.providers.delete(e)}synthesize(e,n){const r={};return this.generateRequired(r,n),this.generateOptional(r,e),Object.defineProperty(r,XD,{get:()=>this}),r}has(e,n){return this.providers.has(e)?!0:n!==!0?this.parents.some(r=>r.has(e)):!1}getProvider(e){if(this.has(e)){if(this.providers.has(e))return this.providers.get(e);for(const n of this.parents){if(n instanceof g1)return n.getProvider(e);{const r=n;if((r==null?void 0:r.getProvider)!==void 0)return r.getProvider(e)}}}}generateRequired(e,n){if(n!==void 0)for(const r of Object.keys(n)){const i=this.resolveProvider(r);if(i===void 0)throw new Error(`Object attempted to be created without registered required provider ${r}`);Object.defineProperty(e,r,i)}}generateOptional(e,n){var r;if(n!==void 0)for(const i of Object.keys(n)){const s=(r=this.resolveProvider(i))!==null&&r!==void 0?r:{get:async()=>{}};Object.defineProperty(e,i,s)}}resolveProvider(e){const n=this.providers.get(e);if(n===void 0){for(const r of this.parents){const i={[e]:e},s=r.synthesize(i,{}),a=Object.getOwnPropertyDescriptor(s,e);if(a!==void 0)return a}return}return typeof n=="function"?{get(){if(n&&typeof n=="function")return Promise.resolve(this[XD]).then(async r=>n(r)).then(r=>r==null?void 0:r[e])}}:{get(){if(n)return Promise.resolve(n).then(r=>{if(r)return r[e]})}}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class BNe{constructor(e,n){this.absolutePath=e,this.runtime=n,this.isAttached=!0}get IFluidHandle(){return this}attachGraph(){N(!1,202)}async get(){const e=await this.runtime.IFluidHandleContext.resolveHandle({url:this.absolutePath});if(e.status===200&&e.mimeType==="fluid/object")return e.value;throw new Error(`Failed to resolve container path ${this.absolutePath}`)}bind(e){throw new Error("Cannot bind to LegacyUriHandle")}}function jNe(t,e){return new BNe(t,e)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class qNe{constructor(){this.handlers=[]}pushHandler(...e){e!==void 0&&this.handlers.push(...e)}async handleRequest(e,n){const r=ma.create(e);for(const i of this.handlers){const s=await i(r,n);if(s!==void 0)return s}return Ts(e)}}function zNe(...t){const e=new qNe;return e.pushHandler(...t),async(n,r)=>e.handleRequest(n,r)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const HNe="_services";/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const UNe=t=>async(e,n)=>{const r=ma.create(e);if(r.pathParts.length===0)return n.IFluidHandleContext.resolveHandle({url:`/${t}${r.query}`,headers:e.headers})};function VNe(t,e){return e.url===""||e.url==="/"||e.url.startsWith("/?")?{mimeType:"fluid/object",status:200,value:t}:Ts(e)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class l7 extends Ti{constructor(e){super(),this._disposed=!1,this.runtime=e.runtime,this.context=e.context,this.providers=e.providers,this.initProps=e.initProps,N(this.runtime._dataObject===void 0,189),this.runtime._dataObject=this,this.innerHandle=new ed(this,"",this.runtime.objectsRoutingContext),this.runtime.once("dispose",()=>{this._disposed=!0,this.dispose()})}get disposed(){return this._disposed}get id(){return this.runtime.id}get IFluidRouter(){return this}get IFluidLoadable(){return this}get IFluidHandle(){return this.innerHandle}get handle(){return this.innerHandle}static async getDataObject(e){const n=e._dataObject;return N(n!==void 0,188),await n.finishInitialization(!0),n}async request(e){return VNe(this,e)}async finishInitialization(e){return this.initializeP!==void 0?this.initializeP:(this.initializeP=this.initializeInternal(e),this.initializeP)}async initializeInternal(e){var n;await this.preInitialize(),e?(N(this.initProps===void 0,190),await this.initializingFromExisting()):await this.initializingFirstTime((n=this.context.createProps)!==null&&n!==void 0?n:this.initProps),await this.hasInitialized()}async getFluidObjectFromDirectory(e,n,r){const i=r?r(e,n):n.get(e),s=i==null?void 0:i.IFluidHandle;if(s)return s.get()}async getService(e){return jNe(`/${HNe}/${e}`,this.context.containerRuntime).get()}async preInitialize(){}async initializingFirstTime(e){}async initializingFromExisting(){}async hasInitialized(){}dispose(){super.dispose()}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class WNe extends l7{constructor(){super(...arguments),this.rootDirectoryId="root"}async request(e){const n=ma.create(e);if(n.pathParts[0]==="bigBlobs"){const i=this.root.get(n.pathParts.join("/"));return i===void 0?Ts(n):{mimeType:"fluid/object",status:200,value:i}}else return super.request(n)}get root(){if(!this.internalRoot)throw new Error(this.getUninitializedErrorString("root"));return this.internalRoot}async initializeInternal(e){e?(this.internalRoot=await this.runtime.getChannel(this.rootDirectoryId),this.internalRoot.attributes.type===Os.Type&&this.runtime.logger.send({category:"generic",eventName:"MapDataObject",message:"Legacy document, SharedMap is masquerading as SharedDirectory in DataObject"})):(this.internalRoot=Cv.create(this.runtime,this.rootDirectoryId),this.internalRoot.bindToContext()),await super.initializeInternal(e)}getUninitializedErrorString(e){return`${e} must be initialized before being accessed.`}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */async function QD(t,e,n,r,i,s,a){let o=i;o=k6e(async(p,f)=>(await l7.getDataObject(f)).request(p),o);const l=new o(e,n,s),c=e.scope,d=new g1(c.IFluidDependencySynthesizer).synthesize(r,{}),h=new t({runtime:l,context:e,providers:d,initProps:a});return s||await h.finishInitialization(s),{instance:h,runtime:l}}class GNe{constructor(e,n,r,i,s,a=pm){if(this.type=e,this.ctor=n,this.optionalProviders=i,this.runtimeClass=a,this.type==="")throw new Error("undefined type member");s!==void 0&&(this.registry=new Lk(s)),this.sharedObjectRegistry=new Map(r.map(o=>[o.type,o]))}get IFluidDataStoreFactory(){return this}get IFluidDataStoreRegistry(){return this.registry}get registryEntry(){return[this.type,Promise.resolve(this)]}async instantiateDataStore(e,n){const{runtime:r}=await QD(this.ctor,e,this.sharedObjectRegistry,this.optionalProviders,this.runtimeClass,n);return r}async createChildInstance(e,n){return this.createNonRootInstanceCore(e.containerRuntime,[...e.packagePath,this.type],n)}async createPeerInstance(e,n){return this.createNonRootInstanceCore(e.containerRuntime,e.packagePath,n)}async createInstance(e,n){return this.createNonRootInstanceCore(e,[this.type],n)}async createRootInstance(e,n,r){const i=n.createDetachedRootDataStore([this.type],e);return this.createInstanceCore(i,r)}async createNonRootInstanceCore(e,n,r){const i=e.createDetachedDataStore(n);return this.createInstanceCore(i,r)}async createInstanceCore(e,n){const{instance:r,runtime:i}=await QD(this.ctor,e,this.sharedObjectRegistry,this.optionalProviders,this.runtimeClass,!1,n);return await e.attachRuntime(this,i),r}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class KNe extends GNe{constructor(e,n,r=[],i,s,a=pm){const o=[...r];r.find(l=>l.type===ga.Type)||o.push(Cv.getFactory()),r.find(l=>l.type===Os.Type)||o.push(T2.getFactory()),super(e,n,o,i,s,a)}}var c7={},v1={};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */Object.defineProperty(v1,"__esModule",{value:!0});v1.IContainerRuntime=void 0;v1.IContainerRuntime="IContainerRuntime";(function(t){/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var e=hn&&hn.__createBinding||(Object.create?function(r,i,s,a){a===void 0&&(a=s),Object.defineProperty(r,a,{enumerable:!0,get:function(){return i[s]}})}:function(r,i,s,a){a===void 0&&(a=s),r[a]=i[s]}),n=hn&&hn.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(v1,t)})(c7);/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class YNe extends a6e{constructor(e,n,r=[],i){super(),this.registryEntries=e,this.dependencyContainer=n,this.requestHandlers=r,this.runtimeOptions=i,this.registry=new Lk(e)}get IFluidDataStoreRegistry(){return this.registry}async instantiateFirstTime(e){await this.containerInitializingFirstTime(e),await this.containerHasInitialized(e)}async instantiateFromExisting(e){await this.containerHasInitialized(e)}async preInitialize(e,n){const r=e.scope,i=new g1(this.dependencyContainer,r.IFluidDependencySynthesizer);r.IFluidDependencySynthesizer=i;const s=await Gk.load(e,this.registryEntries,zNe(...this.requestHandlers),this.runtimeOptions,r,n);return i.register(c7.IContainerRuntime,s),s}async containerInitializingFirstTime(e){}async containerHasInitialized(e){}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const u7=t=>(t==null?void 0:t.factory)!==void 0,d7=t=>(t==null?void 0:t.getFactory)!==void 0,JNe=t=>{var e;const n=new Set,r=new Set,i=a=>{if(d7(a))r.add(a.getFactory());else if(u7(a))n.add([a.factory.type,Promise.resolve(a.factory)]);else throw new Error("Entry is neither a DataObject or a SharedObject")};if(new Set([...Object.values(t.initialObjects),...(e=t.dynamicObjectTypes)!==null&&e!==void 0?e:[]]).forEach(i),n.size===0&&r.size===0)throw new Error("Container cannot be initialized without any DataTypes");return[Array.from(n),Array.from(r)]};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class XNe extends WNe{constructor(){super(...arguments),this.initialObjectsDirKey="initial-objects-key",this._initialObjects={}}get initialObjectsDir(){const e=this.root.getSubDirectory(this.initialObjectsDirKey);if(e===void 0)throw new Error("InitialObjects sub-directory was not initialized");return e}async initializingFirstTime(e){this.root.createSubDirectory(this.initialObjectsDirKey);const n=[];Object.entries(e.initialObjects).forEach(([r,i])=>{const s=async()=>{const a=await this.create(i);this.initialObjectsDir.set(r,a.handle)};n.push(s())}),await Promise.all(n)}async hasInitialized(){const e=[];for(const[n,r]of Array.from(this.initialObjectsDir.entries())){const i=async()=>{const s=await r.get();Object.assign(this._initialObjects,{[n]:s})};e.push(i())}await Promise.all(e)}get initialObjects(){if(Object.keys(this._initialObjects).length===0)throw new Error("Initial Objects were not correctly initialized");return this._initialObjects}async create(e){if(u7(e))return this.createDataObject(e);if(d7(e))return this.createSharedObject(e);throw new Error("Could not create new Fluid object because an unknown object was passed")}async createDataObject(e){const n=e.factory,r=[...this.context.packagePath,n.type],i=await this.context.containerRuntime.createDataStore(r);return kp(i,"/")}createSharedObject(e){const n=e.getFactory();return this.runtime.createChannel(void 0,n.type)}}const ZD="rootDOId";class QNe extends YNe{constructor(e){const[n,r]=JNe(e),i=new KNe("rootDO",XNe,r,{},n);super([i.registryEntry],void 0,[UNe(ZD)],{flushMode:Je.FlushMode.Immediate}),this.rootDataObjectFactory=i,this.initialObjects=e.initialObjects}async containerInitializingFirstTime(e){await this.rootDataObjectFactory.createRootInstance(ZD,e,{initialObjects:this.initialObjects})}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class ZNe extends An{constructor(e){super(),this.container=e,this.lastMembers=new Map,this.audience=e.audience,this.getMembers(),this.audience.on("addMember",(n,r)=>{if(this.shouldIncludeAsMember(r)){const i=this.getMember(n);this.emit("memberAdded",n,i),this.emit("membersChanged")}}),this.audience.on("removeMember",n=>{this.lastMembers.has(n)&&(this.emit("memberRemoved",n,this.lastMembers.get(n)),this.emit("membersChanged"))}),this.container.on("connected",()=>this.emit("membersChanged"))}getMembers(){const e=new Map,n=new Map;return this.audience.getMembers().forEach((r,i)=>{if(this.shouldIncludeAsMember(r)){const s=r.user.id;let a=e.get(s);a===void 0&&(a=this.createServiceMember(r),e.set(s,a)),a.connections.push({id:i,mode:r.mode}),n.set(i,a)}}),this.lastMembers=n,e}getMyself(){const e=this.container.clientId;if(e!==void 0)return this.getMember(e)}getMember(e){const n=this.audience.getMember(e);if(n===void 0)return;const i=this.getMembers().get(n==null?void 0:n.user.id);if(i===void 0)throw Error(`Attempted to fetch client ${e} that is not part of the current member list`);return i}shouldIncludeAsMember(e){return e.details.capabilities.interactive}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class e8e extends ZNe{createServiceMember(e){const n=e.user;return N(n!==void 0&&typeof n.name=="string",787),{userId:n.id,userName:n.name,connections:[]}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class t8e{constructor(e){var n,r,i,s;this.props=e;const a=new r6e;this.urlResolver=new t6e((r=(n=this.props)===null||n===void 0?void 0:n.connection)===null||r===void 0?void 0:r.port,(s=(i=this.props)===null||i===void 0?void 0:i.connection)===null||s===void 0?void 0:s.domain),this.documentServiceFactory=new XMe(a)}async createContainer(e){const r=await this.createLoader(e).createDetachedContainer({package:"no-dynamic-package",config:{}}),i=await kp(r,"/"),s=new class extends kD{async attach(){if(this.attachState!==ze.Detached)throw new Error("Cannot attach container. Container is not in detached state");const o=n6e();await r.attach(o);const l=r.resolvedUrl;return Ea(l),l.id}}(r,i),a=this.getContainerServices(r);return{container:s,services:a}}async getContainer(e,n){const i=await this.createLoader(n).resolve({url:e}),s=await kp(i,"/"),a=new kD(i,s),o=this.getContainerServices(i);return{container:a,services:o}}getContainerServices(e){return{audience:new e8e(e)}}createLoader(e){var n;const r=new QNe(e),s={load:async()=>({module:{fluidExport:r},details:{package:"no-dynamic-package",config:{}}})};return new gAe({urlResolver:this.urlResolver,documentServiceFactory:this.documentServiceFactory,codeLoader:s,logger:(n=this.props)===null||n===void 0?void 0:n.logger})}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class Yk{constructor(){this.items=[]}push(e){this.items.push(e)}empty(){return this.items.length===0}top(){return this.items[this.items.length-1]}pop(){return this.items.pop()}}function h7(t){if(t!==void 0){{if(t.isHead)return;t.next.prev=t.prev,t.prev.next=t.next}return t}}function eI(t){return new f7(!1,t)}function Fu(){return new f7(!0,void 0)}class f7{constructor(e,n){this.isHead=e,this.data=n,this.prev=this,this.next=this}clear(){this.isHead&&(this.prev=this,this.next=this)}add(e){const n=eI(e);return this.prev.next=n,n.next=this,n.prev=this.prev,this.prev=n,n}dequeue(){if(!this.empty())return h7(this.next).data}enqueue(e){return this.add(e)}walk(e){for(let n=this.next;!n.isHead;n=n.next)e(n.data,n)}some(e,n){const r=[],i=n?this.prev:this.next;for(let s=i;!s.isHead;s=n?s.prev:s.next){const a=s.data;e(a,s)&&(n?r.unshift(a):r.push(a))}return r}count(){let e,n;for(e=this.next,n=0;!e.isHead;n++)e=e.next;return n}first(){if(!this.empty())return this.next.data}last(){if(!this.empty())return this.prev.data}empty(){return this.next===this}push(e){this.unshift(e)}unshift(e){const n=eI(e);n.data=e,n.isHead=!1,n.next=this.next,n.prev=this,this.next=n,n.next.prev=n}[Symbol.iterator](){let e=this;return{next(){for(;e&&e.next.isHead===!1;)if(e=e.next,e.data!==void 0)return{value:e.data,done:!1};return{value:void 0,done:!0}},[Symbol.iterator](){return this}}}}class tI{constructor(e,n){this.comp=n,this.L=[n.min];for(let r=0,i=e.length;r<i;r++)this.add(e[r])}count(){return this.L.length-1}peek(){return this.L[1]}get(){const e=this.L[1];return this.L[1]=this.L[this.count()],this.L.pop(),this.fixDown(1),e}add(e){this.L.push(e),this.fixup(this.count())}fixup(e){let n=e;for(;n>1&&this.comp.compare(this.L[n>>1],this.L[n])>0;){const r=this.L[n>>1];this.L[n>>1]=this.L[n],this.L[n]=r,n=n>>1}}fixDown(e){let n=e;for(;n<<1<=this.count();){let r=n<<1;if(r<this.count()&&this.comp.compare(this.L[r],this.L[r+1])>0&&r++,this.comp.compare(this.L[n],this.L[r])<=0)break;const i=this.L[n];this.L[n]=this.L[r],this.L[r]=i,n=r}}}const Or={RED:0,BLACK:1};class Dp{constructor(e,n){this.compareKeys=e,this.aug=n}makeNode(e,n,r,i){return{key:e,data:n,color:r,size:i}}isRed(e){return!!e&&e.color===Or.RED}nodeSize(e){return e?e.size:0}size(){return this.nodeSize(this.root)}isEmpty(){return!this.root}get(e){if(e!==void 0)return this.nodeGet(this.root,e)}nodeGet(e,n){let r=e;for(;r;){const i=this.compareKeys(n,r.key);if(i<0)r=r.left;else if(i>0)r=r.right;else return r}}contains(e){return this.get(e)}gather(e,n){const r=[];return e!==void 0&&this.nodeGather(this.root,r,e,n),r}nodeGather(e,n,r,i){e&&(i.continueSubtree(e.left,r)&&this.nodeGather(e.left,n,r,i),i.matchNode(e,r)&&n.push(e),i.continueSubtree(e.right,r)&&this.nodeGather(e.right,n,r,i))}walkExactMatchesForward(e,n,r,i){this.nodeWalkExactMatchesForward(this.root,e,n,r,i)}nodeWalkExactMatchesForward(e,n,r,i,s){if(!e)return;const a=n(e);i(a)&&this.nodeWalkExactMatchesForward(e.left,n,r,i,s),a===0&&r(e),s(a)&&this.nodeWalkExactMatchesForward(e.right,n,r,i,s)}walkExactMatchesBackward(e,n,r,i){this.nodeWalkExactMatchesBackward(this.root,e,n,r,i)}nodeWalkExactMatchesBackward(e,n,r,i,s){if(!e)return;const a=n(e);s(a)&&this.nodeWalkExactMatchesBackward(e.right,n,r,i,s),a===0&&r(e),i(a)&&this.nodeWalkExactMatchesBackward(e.left,n,r,i,s)}put(e,n,r){e!==void 0&&(n===void 0?this.remove(e):(this.root=this.nodePut(this.root,e,n,r),this.root.color=Or.BLACK))}nodePut(e,n,r,i){let s=e;if(s){const a=this.compareKeys(n,s.key);if(a<0)s.left=this.nodePut(s.left,n,r,i);else if(a>0)s.right=this.nodePut(s.right,n,r,i);else if(i){const o=i(n,s.key,r,s.data);o.key&&(s.key=o.key),o.data?s.data=o.data:s.data=r}else s.data=r;return this.isRed(s.right)&&!this.isRed(s.left)&&(s=this.rotateLeft(s)),this.isRed(s.left)&&this.isRed(s.left.left)&&(s=this.rotateRight(s)),this.isRed(s.left)&&this.isRed(s.right)&&this.flipColors(s),s.size=this.nodeSize(s.left)+this.nodeSize(s.right)+1,this.aug&&this.updateLocal(s),s}else return this.makeNode(n,r,Or.RED,1)}updateLocal(e){this.aug&&(this.isRed(e.left)&&this.aug.update(e.left),this.isRed(e.right)&&this.aug.update(e.right),this.aug.update(e))}nodeRemoveMin(e){let n=e;if(n.left)return!this.isRed(n.left)&&!this.isRed(n.left.left)&&(n=this.moveRedLeft(n)),n.left=this.nodeRemoveMin(n.left),this.balance(n)}remove(e){if(e!==void 0){if(!this.contains(e))return;this.removeExisting(e)}}removeExisting(e){!this.isRed(this.root.left)&&!this.isRed(this.root.right)&&(this.root.color=Or.RED),this.root=this.nodeRemove(this.root,e)}nodeRemove(e,n){let r=e;if(this.compareKeys(n,r.key)<0)!this.isRed(r.left)&&!this.isRed(r.left.left)&&(r=this.moveRedLeft(r)),r.left=this.nodeRemove(r.left,n);else{if(this.isRed(r.left)&&(r=this.rotateRight(r)),this.compareKeys(n,r.key)===0&&!r.right)return;if(!this.isRed(r.right)&&!this.isRed(r.right.left)&&(r=this.moveRedRight(r)),this.compareKeys(n,r.key)===0){const i=this.nodeMin(r.right);r.key=i.key,r.data=i.data,r.right=this.nodeRemoveMin(r.right)}else r.right=this.nodeRemove(r.right,n)}return this.balance(r)}floor(e){if(!this.isEmpty())return this.nodeFloor(this.root,e)}nodeFloor(e,n){if(e){const r=this.compareKeys(n,e.key);if(r===0)return e;if(r<0)return this.nodeFloor(e.left,n);{const i=this.nodeFloor(e.right,n);return i||e}}}ceil(e){if(!this.isEmpty())return this.nodeCeil(this.root,e)}nodeCeil(e,n){if(e){const r=this.compareKeys(n,e.key);if(r===0)return e;if(r>0)return this.nodeCeil(e.right,n);{const i=this.nodeCeil(e.left,n);return i||e}}}min(){if(this.root)return this.nodeMin(this.root)}nodeMin(e){return e.left?this.nodeMin(e.left):e}max(){if(this.root)return this.nodeMax(this.root)}nodeMax(e){return e.right?this.nodeMax(e.right):e}rotateRight(e){const n=e.left;return e.left=n.right,n.right=e,n.color=n.right.color,n.right.color=Or.RED,n.size=e.size,e.size=this.nodeSize(e.left)+this.nodeSize(e.right)+1,this.aug&&(this.updateLocal(e),this.updateLocal(n)),n}rotateLeft(e){const n=e.right;return e.right=n.left,n.left=e,n.color=n.left.color,n.left.color=Or.RED,n.size=e.size,e.size=this.nodeSize(e.left)+this.nodeSize(e.right)+1,this.aug&&(this.updateLocal(e),this.updateLocal(n)),n}oppositeColor(e){return e===Or.BLACK?Or.RED:Or.BLACK}flipColors(e){e.color=this.oppositeColor(e.color),e.left.color=this.oppositeColor(e.left.color),e.right.color=this.oppositeColor(e.right.color)}moveRedLeft(e){let n=e;return this.flipColors(n),this.isRed(n.right.left)&&(n.right=this.rotateRight(n.right),n=this.rotateLeft(n),this.flipColors(n)),n}moveRedRight(e){let n=e;return this.flipColors(n),this.isRed(n.left.left)&&(n=this.rotateRight(n),this.flipColors(n)),n}balance(e){let n=e;return this.isRed(n.right)&&(n=this.rotateLeft(n)),this.isRed(n.left)&&this.isRed(n.left.left)&&(n=this.rotateRight(n)),this.isRed(n.left)&&this.isRed(n.right)&&this.flipColors(n),n.size=this.nodeSize(n.left)+this.nodeSize(n.right)+1,this.aug&&this.aug.update(n),n}mapRange(e,n,r,i){this.nodeMap(this.root,e,r,i)}map(e,n){this.nodeMap(this.root,e,n)}keys(){const e=[],n={showStructure:!0,infix:r=>(e.push(r.key),!0)};return this.walk(n),e}walk(e){this.nodeWalk(this.root,e)}walkBackward(e){this.nodeWalkBackward(this.root,e)}nodeWalk(e,n){let r=!0;return e&&(n.pre&&(n.showStructure||e.color===Or.BLACK)&&(r=n.pre(e)),e.left&&(r=this.nodeWalk(e.left,n)),r&&n.infix&&(n.showStructure||e.color===Or.BLACK)&&(r=n.infix(e)),r&&(r=this.nodeWalk(e.right,n)),r&&n.post&&(n.showStructure||e.color===Or.BLACK)&&(r=n.post(e))),r}nodeWalkBackward(e,n){let r=!0;return e&&(n.pre&&(n.showStructure||e.color===Or.BLACK)&&(r=n.pre(e)),e.right&&(r=this.nodeWalkBackward(e.right,n)),r&&n.infix&&(n.showStructure||e.color===Or.BLACK)&&(r=n.infix(e)),r&&(r=this.nodeWalkBackward(e.left,n)),r&&n.post&&(n.showStructure||e.color===Or.BLACK)&&(r=n.post(e))),r}nodeMap(e,n,r,i,s){let a=i,o=s;if(!e)return!0;a===void 0&&(a=this.nodeMin(e).key),o===void 0&&(o=this.nodeMax(e).key);const l=this.compareKeys(a,e.key),c=this.compareKeys(o,e.key);let u=!0;return l<0&&(u=this.nodeMap(e.left,n,r,a,o)),u&&l<=0&&c>=0&&(u=n(e,r)),u&&c>0&&(u=this.nodeMap(e.right,n,r,a,o)),u}}const n8e=(t,e)=>t.compare(e);class r8e{constructor(){this.intervals=new Dp(n8e,this)}remove(e){this.intervals.remove(e)}removeExisting(e){this.intervals.removeExisting(e)}put(e,n){let r;n&&(r=(i,s)=>({key:n(i,s)})),this.intervals.put(e,{minmax:e.clone()},r)}map(e){const n={infix:r=>(e(r.key),!0),showStructure:!0};this.intervals.walk(n)}mapUntil(e){const n={infix:r=>e(r.key),showStructure:!0};this.intervals.walk(n)}mapBackward(e){const n={infix:r=>(e(r.key),!0),showStructure:!0};this.intervals.walkBackward(n)}match(e){return this.intervals.gather(e,this)}matchNode(e,n){return!!e&&e.key.overlaps(n)}continueSubtree(e,n){return!!e&&e.data.minmax.overlaps(n)}update(e){e.left&&e.right?e.data.minmax=e.key.union(e.left.data.minmax.union(e.right.data.minmax)):e.left?e.data.minmax=e.key.union(e.left.data.minmax):e.right?e.data.minmax=e.key.union(e.right.data.minmax):e.data.minmax=e.key.clone()}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const Br=0,Ze=-1,wl=-2,Ol=-1,Ul=-2;/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var Ve;(function(t){t[t.Simple=0]="Simple",t[t.Tile=1]="Tile",t[t.NestBegin=2]="NestBegin",t[t.NestEnd=4]="NestEnd",t[t.RangeBegin=16]="RangeBegin",t[t.RangeEnd=32]="RangeEnd",t[t.SlideOnRemove=64]="SlideOnRemove",t[t.StayOnRemove=128]="StayOnRemove",t[t.Transient=256]="Transient"})(Ve||(Ve={}));const nt={INSERT:0,REMOVE:1,ANNOTATE:2,GROUP:3};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function p7(t,e,n,r){let i=e;switch(i===void 0&&(i=t.defaultValue),t.name){case"incr":i+=n,t.minValue&&i<t.minValue&&(i=t.minValue);break;case"consensus":if(i===void 0)i={value:n,seq:r};else{const s=i;s.seq===-1&&(s.seq=r)}break}return i}function gm(t,e){if(t)if(e){for(const n in t){if(e[n]===void 0)return!1;if(typeof e[n]=="object"){if(!gm(t[n],e[n]))return!1}else if(e[n]!==t[n])return!1}for(const n in e)if(t[n]===void 0)return!1}else return!1;else if(e)return!1;return!0}function m7(t,e,n,r){if(e!==void 0)for(const i in e){const s=e[i];s===null?delete t[i]:n&&n.name!=="rewrite"?t[i]=p7(n,t[i],s,r):t[i]=s}return t}function i8e(t){if(t===void 0)return;const e=di();for(const n in t){const r=t[n];r!==null&&(e[n]=r)}return e}function g7(t,e,n,r){let i=t;return(!i||n&&n.name==="rewrite")&&(i=di()),m7(i,e,n,r),i}function s8e(t,e){if(e!==void 0)for(const n in e)t[n]===void 0&&(t[n]=e[n]);return t}function di(){return Object.create(null)}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const a8e="referenceTileLabels",y1="referenceRangeLabels";function fn(t,e){return((typeof t=="number"?t:t.refType)&e)!==0}const _c=t=>fn(t,Ve.Tile)&&t.properties?t.properties[a8e]:void 0,Ac=t=>fn(t,Ve.NestBegin|Ve.NestEnd)&&t.properties?t.properties[y1]:void 0;function b1(t,e){const n=_c(t);if(n){for(const r of n)if(e===r)return!0}return!1}function Jk(t,e){const n=Ac(t);if(n){for(const r of n)if(e===r)return!0}return!1}function Dl(t){return _c(t)!==void 0}function Il(t){return Ac(t)!==void 0}function o8e(t,e){return Xk(t,e)<0?t:e}function l8e(t,e){return Xk(t,e)>0?t:e}function Xk(t,e){const n=t.getSegment(),r=e.getSegment();return n===r?t.getOffset()-e.getOffset():n===void 0||r!==void 0&&n.ordinal<r.ordinal?-1:1}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function c8e(t){let e=0;if(fn(t,Ve.Transient)&&++e,fn(t,Ve.SlideOnRemove)&&++e,fn(t,Ve.StayOnRemove)&&++e,e>1)throw new Tt("Reference types can only be one of Transient, SlideOnRemove, and StayOnRemove")}class Gc{constructor(e,n,r=0,i=Ve.Simple,s){this.client=e,this.offset=r,this.refType=i,c8e(i),this.segment=n,this.properties=s}min(e){return o8e(this,e)}max(e){return l8e(this,e)}compare(e){return Xk(this,e)}toPosition(){return this.getClient().localReferencePositionToPosition(this)}hasTileLabels(){return Dl(this)}hasRangeLabels(){return Il(this)}hasTileLabel(e){return b1(this,e)}hasRangeLabel(e){return Jk(this,e)}getTileLabels(){return _c(this)}getRangeLabels(){return Ac(this)}isLeaf(){return!1}addProperties(e,n){this.properties=g7(this.properties,e,n)}getClient(){return this.client}getSegment(){return this.segment}getOffset(){return this.offset}getProperties(){return this.properties}}Gc.DetachedPosition=-1;function cg(t){N(t instanceof Gc,736)}class ec{constructor(e,n=new Array(e.cachedLength)){this.segment=e,this.hierRefCount=0,this.refCount=0,this.refsByOffset=n}static append(e,n){n.localRefs&&!n.localRefs.empty?(e.localRefs||(e.localRefs=new ec(e)),N(e.localRefs.refsByOffset.length===e.cachedLength,702),e.localRefs.append(n.localRefs)):e.localRefs&&(e.localRefs.refsByOffset.length+=n.cachedLength)}[Symbol.iterator](){const e=[];for(const r of this.refsByOffset)r&&(r.before&&e.push(r.before[Symbol.iterator]()),r.at&&e.push(r.at[Symbol.iterator]()),r.after&&e.push(r.after[Symbol.iterator]()));return{next(){for(;e.length>0;){const r=e[0].next();if(r.done===!0)e.shift();else return r}return{value:void 0,done:!0}},[Symbol.iterator](){return this}}}clear(){this.refCount=0,this.hierRefCount=0;const e=n=>{if(n)for(const r of n)r.segment===this.segment&&(r.segment=void 0)};for(let n=0;n<this.refsByOffset.length;n++){const r=this.refsByOffset[n];r&&(e(r.before),e(r.at),e(r.before),this.refsByOffset[n]=void 0)}}get empty(){return this.refCount===0}createLocalRef(e,n,r,i){const s=new Gc(i,this.segment,e,n,r);return fn(s,Ve.Transient)||this.addLocalRef(s),s}addLocalRef(e){var n,r;N(!fn(e,Ve.Transient),735),cg(e);const i=this.refsByOffset[e.offset]=(n=this.refsByOffset[e.offset])!==null&&n!==void 0?n:{at:Fu()};(i.at=(r=i.at)!==null&&r!==void 0?r:Fu()).enqueue(e),(Il(e)||Dl(e))&&this.hierRefCount++,this.refCount++}removeLocalRef(e){cg(e);const n=i=>{if(i){let s=i;do if(s=s.next,s.data===e)return h7(s),(Il(e)||Dl(e))&&this.hierRefCount--,this.refCount--,e;while(!s.isHead)}},r=this.refsByOffset[e.offset];if(r!==void 0){let i=n(r.before);if(i||(i=n(r.at),i)||(i=n(r.after),i))return i}}append(e){if(!(!e||e.empty)){this.hierRefCount+=e.hierRefCount,this.refCount+=e.refCount,e.hierRefCount=0;for(const n of e)n.segment=this.segment,n.offset+=this.refsByOffset.length;this.refsByOffset.push(...e.refsByOffset)}}split(e,n){if(this.empty)this.refsByOffset.length=e;else{const r=new ec(n,this.refsByOffset.splice(e,this.refsByOffset.length-e));n.localRefs=r;for(const i of r)i.segment=n,i.offset-=e,(Il(i)||Dl(i))&&(this.hierRefCount--,r.hierRefCount++),this.refCount--,r.refCount++}}addBeforeTombstones(...e){var n,r,i,s,a;const o=(r=(n=this.refsByOffset[0])===null||n===void 0?void 0:n.before)!==null&&r!==void 0?r:Fu();for(const l of e)for(const c of l)cg(c),fn(c,Ve.SlideOnRemove)?(o.push(c),c.segment=this.segment,c.offset=0,(Il(c)||Dl(c))&&this.hierRefCount++,this.refCount++):c.segment=void 0;if(!o.empty()&&((i=this.refsByOffset[0])===null||i===void 0?void 0:i.before)===void 0){const l=this.refsByOffset[0]=(s=this.refsByOffset[0])!==null&&s!==void 0?s:{before:o};l.before=(a=l.before)!==null&&a!==void 0?a:o}}addAfterTombstones(...e){var n,r,i,s,a;const o=this.refsByOffset.length-1,l=(r=(n=this.refsByOffset[o])===null||n===void 0?void 0:n.after)!==null&&r!==void 0?r:Fu();for(const c of e)for(const u of c)cg(u),fn(u,Ve.SlideOnRemove)?(l.push(u),u.segment=this.segment,u.offset=this.segment.cachedLength-1,(Il(u)||Dl(u))&&this.hierRefCount++,this.refCount++):u.segment=void 0;if(!l.empty()&&((i=this.refsByOffset[o])===null||i===void 0?void 0:i.after)===void 0){const c=this.refsByOffset[o]=(s=this.refsByOffset[o])!==null&&s!==void 0?s:{after:l};c.after=(a=c.after)!==null&&a!==void 0?a:l}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const ug={APPEND:-1,SPLIT:-2,UNLINK:-3,ACKNOWLEDGED:-4};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class u8e{constructor(){this.ordinalSortedItems=[]}get size(){return this.ordinalSortedItems.length}get items(){return this.ordinalSortedItems}addOrUpdate(e,n){const r=this.findOrdinalPosition(this.getOrdinal(e));r.exists?n&&n(this.ordinalSortedItems[r.index],e):this.ordinalSortedItems.splice(r.index,0,e)}remove(e){const n=this.findOrdinalPosition(this.getOrdinal(e));return n.exists?(this.ordinalSortedItems.splice(n.index,1),!0):!1}has(e){return this.findOrdinalPosition(this.getOrdinal(e)).exists}getOrdinal(e){const n=e;return n!=null&&n.segment?n.segment.ordinal:e.ordinal}findOrdinalPosition(e,n,r){if(this.ordinalSortedItems.length===0)return{exists:!1,index:0};if(n===void 0||r===void 0)return this.findOrdinalPosition(e,0,this.ordinalSortedItems.length-1);const i=n+Math.floor((r-n)/2);return this.getOrdinal(this.ordinalSortedItems[i])>e?n===i?{exists:!1,index:i}:this.findOrdinalPosition(e,n,i-1):this.getOrdinal(this.ordinalSortedItems[i])<e?i===r?{exists:!1,index:i+1}:this.findOrdinalPosition(e,i+1,r):{exists:!0,index:i}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class d8e{constructor(e){this.segment=e,this.trackingGroups=new Set}link(e){e&&(this.trackingGroups.has(e)||this.trackingGroups.add(e),e.has(this.segment)||e.link(this.segment))}unlink(e){e.has(this.segment)&&e.unlink(this.segment),this.trackingGroups.delete(e)}copyTo(e){this.trackingGroups.forEach(n=>e.trackingCollection.link(n))}get empty(){return this.trackingGroups.size===0}matches(e){if(!e||this.trackingGroups.size!==e.trackingGroups.size)return!1;for(const n of this.trackingGroups.values())if(!e.trackingGroups.has(n))return!1;return!0}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function hu(t,e){let n=-1,r=0,i=t.length-1;for(;r<=i;){const s=r+Math.floor((i-r)/2);t[s].seq<=e?((n<0||t[n].seq<t[s].seq)&&(n=s),r=s+1):i=s-1}return n}class Rn{constructor(e){this.minSeq=e,this.minLength=0,this.segmentCount=0,this.partialLengths=[],this.clientSeqNumbers=[]}static combine(e,n,r,i=!1){return Rn.combineBranch(e,n,r,i)}static combineBranch(e,n,r,i=!1){let s=new Rn(r.minSeq);Rn.fromLeaves(s,n,r);let a;function o(h){if(!h)return;const p=new Dp(sI);return h.map(f=>(p.put(f.data.clientId,Object.assign({},f.data)),!0)),p}function l(h,p){const f=h.overlapRemoveClients;f?p.overlapRemoveClients&&p.overlapRemoveClients.map(m=>{const g=f.get(m.key);return g?g.data.seglen+=m.data.seglen:f.put(m.data.clientId,Object.assign({},m.data)),!0}):h.overlapRemoveClients=o(p.overlapRemoveClients)}function c(h){const p=h.seq;let f=0;if(a)if(a.seq===h.seq){a.seglen+=h.seglen,a.len+=h.seglen,l(a,h);return}else f=a.len,s.addClientSeqNumberFromPartial(a);a={clientId:h.clientId,len:f+h.seglen,overlapRemoveClients:o(h.overlapRemoveClients),seglen:h.seglen,seq:p},s.partialLengths.push(a)}const u=[];for(let h=0;h<n.childCount;h++){const p=n.children[h];if(!p.isLeaf()){const f=p;i&&(f.partialLengths=Rn.combine(e,f,r,!0)),u.push(f.partialLengths)}}let d=u.length;if(d!==0){s.partialLengths.length>0&&(u.push(s),d++,s=new Rn(r.minSeq));const h=new Array(d),p=new Array(d);for(let g=0;g<d;g++)h[g]=0,p[g]=u[g].partialLengths.length,s.minLength+=u[g].minLength,s.segmentCount+=u[g].segmentCount;let f=0,m;for(;f>=0;){f=-1;for(let g=0;g<d;g++)if(h[g]<p[g]){const v=u[g].partialLengths[h[g]];(f<0||v.seq<m.seq)&&(f=g,m=v)}f>=0&&(c(m),h[f]++)}a&&s.addClientSeqNumberFromPartial(a)}return Rn.options.zamboni&&s.zamboni(r),Rn.options.verify&&s.verify(),s}static fromLeaves(e,n,r){e.minLength=0,e.segmentCount=n.childCount;function i(l,c){return l!==void 0&&l!==Ze&&l<=c}for(let l=0;l<n.childCount;l++){const c=n.children[l];if(c.isLeaf()){const u=c;i(u.seq,r.minSeq)?e.minLength+=u.cachedLength:u.seq!==Ze&&Rn.insertSegment(e,u);const d=Jo(u);i(d==null?void 0:d.removedSeq,r.minSeq)?e.minLength-=u.cachedLength:d!==void 0&&d.removedSeq!==Ze&&Rn.insertSegment(e,u,d)}}const s=e.partialLengths,a=s.length;let o=0;for(let l=0;l<a;l++)s[l].len=o+s[l].seglen,o=s[l].len,e.addClientSeqNumberFromPartial(s[l]);Rn.options.verify&&e.verify()}static getOverlapClients(e,n){const r=new Dp(sI);for(const i of e)r.put(i,{clientId:i,seglen:n});return r}static accumulateRemoveClientOverlap(e,n,r){if(e.overlapRemoveClients)for(const i of n){const s=e.overlapRemoveClients.get(i);s?s.data.seglen+=r:e.overlapRemoveClients.put(i,{clientId:i,seglen:r})}else e.overlapRemoveClients=Rn.getOverlapClients(n,r)}static insertSegment(e,n,r){let i=n.seq,s=n.cachedLength,a=n.clientId,o;r&&(i=r.removedSeq,s=-s,a=r.removedClientIds[0],o=r.removedClientIds.length>1?r.removedClientIds.slice(1):void 0);const l=e.partialLengths,c=l.length;let u=0;for(;u<c&&!(l[u].seq>=i);u++);if(u<c&&l[u].seq===i)l[u].seglen+=s,o&&Rn.accumulateRemoveClientOverlap(l[u],o,s);else{let d;if(o){const h=Rn.getOverlapClients(o,s);d={seq:i,clientId:a,len:0,seglen:s,overlapRemoveClients:h}}else d={seq:i,clientId:a,len:0,seglen:s};if(u<c){for(let h=c;h>u;h--)l[h]=l[h-1];l[u]=d}else l.push(d)}}static addSeq(e,n,r,i){let s,a,o=hu(e,n);if(o>=0){const l=e[o];l.seq===n?(s=l,o=hu(e,n-1),o>=0&&(a=e[o])):a=l}s===void 0?(s={clientId:i,seglen:r,seq:n},e.push(s)):s.seglen=r,a!==void 0?s.len=s.seglen+a.len:s.len=s.seglen}update(e,n,r,i,s){let a=0,o=0;for(let l=0;l<n.childCount;l++){const c=n.children[l];if(c.isLeaf()){const u=c,d=Jo(u);u.seq===r?(d==null?void 0:d.removedSeq)!==r&&(a+=u.cachedLength):(d==null?void 0:d.removedSeq)===r&&(a-=u.cachedLength),o++}else{const d=c.partialLengths,h=d.partialLengths,p=hu(h,r);if(p>=0){const f=h[p];f.seq===r&&(a+=f.seglen)}o+=d.segmentCount}}this.segmentCount=o,Rn.addSeq(this.partialLengths,r,a,i),this.clientSeqNumbers[i]===void 0&&(this.clientSeqNumbers[i]=[]),Rn.addSeq(this.clientSeqNumbers[i],r,a),Rn.options.zamboni&&this.zamboni(s),Rn.options.verify&&this.verify()}getPartialLength(e,n){let r=this.minLength;const i=hu(this.partialLengths,e),s=this.cliLatest(n),a=this.clientSeqNumbers[n];if(i>=0){if(r+=this.partialLengths[i].len,s>=0){const o=a[s];if(o.seq>e){r+=o.len;const l=this.cliLatestLEQ(n,e);l>=0&&(r-=a[l].len)}}}else if(s>=0){const o=a[s];r+=o.len}return r}toString(e,n=0){let r="";for(const i of this.partialLengths)r+=`(${i.seq},${i.len}) `;for(const i in this.clientSeqNumbers)if(this.clientSeqNumbers[i].length>0){r+="Client ",e?r+=`${e(+i)}`:r+=`${i}`,r+="[";for(const s of this.clientSeqNumbers[i])r+=`(${s.seq},${s.len})`;r+="]"}return r=`min(seq ${this.minSeq}): ${this.minLength}; sc: ${this.segmentCount};${r}`,r}zamboni(e){function n(r){const i=hu(r,e.minSeq);let s=0;if(i>=0){s=r[i].len;const a=r.length;if(i<=a-1){const o=a-i-1;for(let l=0;l<o;l++)r[l]=r[l+i+1],r[l].len-=s;r.length=o}}return s}this.minLength+=n(this.partialLengths);for(const r in this.clientSeqNumbers){const i=this.clientSeqNumbers[r];i&&n(i)}}addClientSeqNumber(e,n,r){this.clientSeqNumbers[e]===void 0&&(this.clientSeqNumbers[e]=[]);const i=this.clientSeqNumbers[e];let s=r;i.length>0&&(s+=i[i.length-1].len),i.push({seq:n,len:s,seglen:r})}addClientSeqNumberFromPartial(e){this.addClientSeqNumber(e.clientId,e.seq,e.seglen),e.overlapRemoveClients&&e.overlapRemoveClients.map(n=>(this.addClientSeqNumber(n.data.clientId,e.seq,n.data.seglen),!0))}cliLatestLEQ(e,n){const r=this.clientSeqNumbers[e];return r?hu(r,n):-1}cliLatest(e){const n=this.clientSeqNumbers[e];return n&&n.length>0?n.length-1:-1}verifyPartialLengths(e,n){if(e.length===0)return 0;let r=0,i=0,s=0;for(const a of e)s++,N(this.minSeq<=a.seq,84),N(r<a.seq,85),r=a.seq,i+=a.seglen,i!==a.len&&N(!1,86),n||this.minLength+a.len<0&&N(!1,87),a.overlapRemoveClients&&(N(!n,88),s+=a.overlapRemoveClients.size());return s}verify(){if(this.clientSeqNumbers){let e=0;for(const r of this.clientSeqNumbers)r&&(e+=this.verifyPartialLengths(r,!0));N(!!this.partialLengths,89);const n=this.verifyPartialLengths(this.partialLengths,!1);N(n===e,90)}else N(!this.partialLengths,91)}}Rn.options={verify:!1,zamboni:!0};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class h8e{constructor(e){this.segment=e,this.segmentGroups=Fu()}get size(){return this.segmentGroups.count()}get empty(){return this.segmentGroups.empty()}enqueue(e){this.segmentGroups.enqueue(e),e.segments.push(this.segment)}dequeue(){return this.segmentGroups.dequeue()}clear(){this.segmentGroups.clear()}copyTo(e){this.segmentGroups.walk(n=>e.segmentGroups.enqueue(n))}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class Tv{constructor(){this.pendingRewriteCount=0}ackPendingProperties(e){var n,r;e.combiningOp&&e.combiningOp.name==="rewrite"&&this.pendingRewriteCount--;for(const i of Object.keys(e.props))((n=this.pendingKeyUpdateCount)===null||n===void 0?void 0:n[i])!==void 0&&(N(this.pendingKeyUpdateCount[i]>0,92),this.pendingKeyUpdateCount[i]--,((r=this.pendingKeyUpdateCount)===null||r===void 0?void 0:r[i])===0&&delete this.pendingKeyUpdateCount[i])}addProperties(e,n,r,i,s=!1){var a;if(this.pendingKeyUpdateCount||(this.pendingKeyUpdateCount=di()),this.pendingRewriteCount>0&&i!==Ze&&s)return;const o=r&&r.name==="rewrite",l=o?void 0:r||void 0,c=d=>{var h;return!!(i===Ze||((h=this.pendingKeyUpdateCount)===null||h===void 0?void 0:h[d])===void 0||l)},u={};if(o){s&&i===Ze&&this.pendingRewriteCount++;for(const d of Object.keys(e))!n[d]&&c(d)&&(u[d]=e[d],delete e[d])}for(const d of Object.keys(n)){if(s){if(i===Ze)((a=this.pendingKeyUpdateCount)===null||a===void 0?void 0:a[d])===void 0&&(this.pendingKeyUpdateCount[d]=0),this.pendingKeyUpdateCount[d]++;else if(!c(d))continue}const h=e[d];u[d]=h===void 0?null:h;let p;l?p=p7(l,h,p,i):p=n[d],p===null?delete e[d]:e[d]=p}return u}copyTo(e,n,r){if(e){if(n||(n=di()),!r)throw new Error("Must provide new PropertyManager");for(const i of Object.keys(e))n[i]=e[i];r.pendingRewriteCount=this.pendingRewriteCount,r.pendingKeyUpdateCount=di();for(const i of Object.keys(this.pendingKeyUpdateCount))r.pendingKeyUpdateCount[i]=this.pendingKeyUpdateCount[i]}return n}hasPendingProperties(){return this.pendingRewriteCount>0||Object.keys(this.pendingKeyUpdateCount).length>0}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function Jo(t){if((t==null?void 0:t.removedClientIds)!==void 0&&(t==null?void 0:t.removedSeq)!==void 0)return t;N((t==null?void 0:t.removedClientIds)===void 0&&(t==null?void 0:t.removedSeq)===void 0,703)}function f8e(t){return Jo(t)!==void 0}function Ix(t){const e=Jo(t);return e!==void 0&&e.removedSeq!==Ze}class v7{constructor(){this.index=0,this.ordinal="",this.cachedLength=0}isLeaf(){return!1}}function nI(t,e){const n=_c(t);if(n)for(const r of n)e[r]=t}function rI(t,e){const n=_c(t);if(n)for(const r of n)e[r]===void 0&&(e[r]=t)}function y7(t,e){for(const n in e){const r=e[n];if(!r.empty()){let i=t[n];i===void 0&&(i=new Yk,t[n]=i);for(const s of r.items)Qk(i,s)}}}function Qk(t,e){if(fn(e,Ve.NestBegin))return t.push(e),!0;{const n=t.top();return n&&fn(n,Ve.NestBegin)?t.pop():t.push(e),!1}}function p8e(t,e,n,r,i){var s;function a(o,l){let c=i[o];c===void 0&&(c=new Yk,i[o]=c),Qk(c,l)}if(e.isLeaf()){const o=e;if(((s=t.localNetLength(o))!==null&&s!==void 0?s:0)>0)if(gr.is(o)){const l=o.getId();if(l&&t.mapIdToSegment(l,o),fn(o,Ve.Tile)&&(nI(o,n),rI(o,r)),o.refType&(Ve.NestBegin|Ve.NestEnd)){const c=Ac(o);if(c)for(const u of c)a(u,o)}}else{const l=e;if(l.localRefs&&l.localRefs.hierRefCount!==void 0&&l.localRefs.hierRefCount>0){for(const c of l.localRefs)if(fn(c,Ve.Tile)&&(nI(c,n),rI(c,r)),c.refType&(Ve.NestBegin|Ve.NestEnd))for(const u of Ac(c))a(u,c)}}}else{const o=e;y7(i,o.rangeStacks),m7(n,o.rightmostTiles),s8e(r,o.leftmostTiles)}}const wi=8;class m8e extends v7{constructor(e){super(),this.childCount=e,this.children=new Array(wi)}hierBlock(){}setOrdinal(e,n){let r=this.childCount;r===8&&(r=7),N(r>=1&&r<=7,64);let i;const s=1<<wi-(r+1);if(n===0)i=s-1;else{const a=this.children[n-1].ordinal;i=a.charCodeAt(a.length-1)+s}e.ordinal=this.ordinal+String.fromCharCode(i),N(e.ordinal.length===this.ordinal.length+1,65),n>0&&N(e.ordinal>this.children[n-1].ordinal,66)}assignChild(e,n,r=!0){e.parent=this,e.index=n,r&&this.setOrdinal(e,n),this.children[n]=e}}class g8e extends m8e{constructor(e){super(e),this.rightmostTiles=di(),this.leftmostTiles=di(),this.rangeStacks=di()}addNodeReferences(e,n){p8e(e,n,this.rightmostTiles,this.leftmostTiles,this.rangeStacks)}hierBlock(){return this}hierToString(e){let n="";for(const r in this.rangeStacks){const i=this.rangeStacks[r];n+=w8e(e),n+=`${r}: `;for(const s of i.items)n+=`${s.toString()} `;n+=`
`}return n}}function v8e(t,e){return e.isLeaf()?t.localNetLength(e):e.cachedLength}class b7 extends v7{constructor(){super(...arguments),this.clientId=Ol,this.seq=Br,this.segmentGroups=new h8e(this),this.trackingCollection=new d8e(this)}addProperties(e,n,r,i){return this.propertyManager||(this.propertyManager=new Tv),this.properties||(this.properties=di()),this.propertyManager.addProperties(this.properties,e,n,r,i&&i.collaborating)}hasProperty(e){return!!this.properties&&this.properties[e]!==void 0}isLeaf(){return!0}cloneInto(e){var n;e.clientId=this.clientId,e.properties=i8e(this.properties),e.removedClientIds=(n=this.removedClientIds)===null||n===void 0?void 0:n.slice(),e.removedSeq=this.removedSeq,e.seq=this.seq}canAppend(e){return!1}addSerializedProps(e){this.properties&&(e.props=this.properties)}ack(e,n,r){const i=this.segmentGroups.dequeue();switch(N(i===e,67),n.op.type){case nt.ANNOTATE:return N(!!this.propertyManager,68),this.propertyManager.ackPendingProperties(n.op),!0;case nt.INSERT:return N(this.seq===Ze,69),this.seq=n.sequencedMessage.sequenceNumber,this.localSeq=void 0,!0;case nt.REMOVE:const s=Jo(this);return N(s!==void 0,70),this.localRemovedSeq=void 0,s.removedSeq===Ze?(s.removedSeq=n.sequencedMessage.sequenceNumber,!0):!1;default:throw new Error(`${n.op.type} is in unrecognized operation type`)}}splitAt(e){var n;if(e>0){const r=this.createSplitSegmentAt(e);return r&&(this.copyPropertiesTo(r),r.parent=this.parent,r.ordinal=this.ordinal+String.fromCharCode(0),r.removedClientIds=(n=this.removedClientIds)===null||n===void 0?void 0:n.slice(),r.removedSeq=this.removedSeq,r.localRemovedSeq=this.localRemovedSeq,r.seq=this.seq,r.localSeq=this.localSeq,r.clientId=this.clientId,this.segmentGroups.copyTo(r),this.trackingCollection.copyTo(r),this.localRefs&&this.localRefs.split(e,r)),r}}copyPropertiesTo(e){this.propertyManager&&this.properties&&(e.propertyManager=new Tv,e.properties=this.propertyManager.copyTo(this.properties,e.properties,e.propertyManager))}}const iI="markerId",y8e="markerSimpleType";class gr extends b7{constructor(e){super(),this.refType=e,this.type=gr.type,this.cachedLength=1}static is(e){return e.type===gr.type}static make(e,n){const r=new gr(e);return n&&r.addProperties(n),r}toJSONObject(){const e={marker:{refType:this.refType}};return super.addSerializedProps(e),e}static fromJSONObject(e){if(e&&typeof e=="object"&&"marker"in e)return gr.make(e.marker.refType,e.props)}clone(){const e=gr.make(this.refType,this.properties);return this.cloneInto(e),e}getSegment(){return this}getOffset(){return 0}hasSimpleType(e){return!!this.properties&&this.properties[y8e]===e}getProperties(){return this.properties}getId(){if(this.properties&&this.properties[iI])return this.properties[iI]}hasTileLabels(){return Dl(this)}hasRangeLabels(){return Il(this)}hasTileLabel(e){return b1(this,e)}hasRangeLabel(e){return Jk(this,e)}getTileLabels(){return _c(this)}getRangeLabels(){return Ac(this)}toString(){let e="";fn(this,Ve.Tile)&&(e+="Tile"),fn(this,Ve.NestBegin)&&(e.length>0&&(e+="; "),e+="RangeBegin"),fn(this,Ve.NestEnd)&&(e.length>0&&(e+="; "),e+="RangeEnd");let n="";const r=this.getId();r&&(e+=` (${r}) `);const i=_c(this);if(i){n+="tile -- ";for(let o=0,l=i.length;o<l;o++){const c=i[o];o>0&&(n+="; "),n+=c}}const s=Ac(this);if(s){let o="begin";fn(this,Ve.NestEnd)&&(o="end"),i&&(n+=" "),n+=`range ${o} -- `;const l=s;for(let c=0,u=l.length;c<u;c++){const d=l[c];c>0&&(n+="; "),n+=d}}let a="";return this.properties&&(a+=JSON.stringify(this.properties,(o,l)=>{const c=!!l&&l.IFluidHandle;return c?`#Handle(${c.routeContext.path}/${c.path})`:l})),`M ${e}: ${n} ${a}`}createSplitSegmentAt(e){}canAppend(e){return!1}append(){throw new Error("Can not append to marker")}}gr.type="Marker";var nd;(function(t){t[t.Go=0]="Go",t[t.Stop=1]="Stop",t[t.Yield=2]="Yield"})(nd||(nd={}));class b8e{constructor(e,n,r,i,s,a,o,l,c=0){this.block=e,this.actions=n,this.pos=r,this.refSeq=i,this.clientId=s,this.context=a,this.start=o,this.end=l,this.childIndex=c,this.op=nd.Go}}class S8e{constructor(){this.clientId=Ol,this.collaborating=!1,this.minSeq=0,this.currentSeq=0,this.localSeq=0}loadFrom(e){this.clientId=e.clientId,this.collaborating=e.collaborating,this.minSeq=e.minSeq,this.currentSeq=e.currentSeq}}const sI=(t,e)=>t-e,x8e=(t,e)=>t.localeCompare(e),dg=[""," ","  "];function w8e(t){if(dg[t]===void 0){dg[t]="";for(let e=0;e<t;e++)dg[t]+=" "}return dg[t]}const C8e={min:{maxSeq:-2},compare:(t,e)=>t.maxSeq-e.maxSeq};function S7(t,e){for(const n of e.rangeLabels)if(Jk(t,n)){let r=e.stacks[n];r===void 0&&(r=new Yk,e.stacks[n]=r),Qk(r,t)}}function E8e(t,e,n,r,i,s,a){return gr.is(t)&&t.refType&(Ve.NestBegin|Ve.NestEnd)&&S7(t,a),!1}function T8e(t,e,n,r,i,s,a){var o;if(t.isLeaf()){const l=t;((o=a.mergeTree.localNetLength(l))!==null&&o!==void 0?o:0)>0&&gr.is(l)&&l.refType&(Ve.NestBegin|Ve.NestEnd)&&S7(l,a)}else{const l=t;y7(a.stacks,l.rangeStacks)}return!0}function aI(t,e,n,r,i,s,a){return gr.is(t)&&b1(t,a.tileLabel)&&(a.tile=t),!1}function oI(t,e,n,r,i,s,a){if(t.isLeaf()){const o=t;a.mergeTree.localNetLength(o)>0&&gr.is(o)&&b1(o,a.tileLabel)&&(a.tile=o)}else{const o=t;let l;a.posPrecedesTile?l=o.rightmostTiles[a.tileLabel]:l=o.leftmostTiles[a.tileLabel],l!==void 0&&(a.tile=l)}return!0}const R8e={min:{minRequired:Number.MIN_VALUE,onMinGE:()=>{N(!1,72)}},compare:(t,e)=>t.minRequired-e.minRequired};class Dn{constructor(e){this.options=e,this.blockUpdateActions=Dn.initBlockUpdateActions,this.collabWindow=new S8e,this.idToSegment=new Map,this.splitLeafSegment=(n,r)=>{if(!(r>0&&n))return{};const i=n.splitAt(r);return this.mergeTreeMaintenanceCallback&&this.mergeTreeMaintenanceCallback({operation:ug.SPLIT,deltaSegments:[{segment:n},{segment:i}]},void 0),{next:i}},this.root=this.makeBlock(0)}makeBlock(e){const n=new g8e(e);return n.ordinal="",n}clone(){const e=new Dn(this.options);e.root=e.blockClone(this.root)}blockClone(e,n){const r=this.makeBlock(e.childCount);for(let i=0;i<e.childCount;i++){const s=e.children[i];if(s.isLeaf()){const a=this.segmentClone(s);r.assignChild(a,i),n&&n.push(a)}else r.assignChild(this.blockClone(s,n),i)}return this.nodeUpdateLengthNewStructure(r),this.nodeUpdateOrdinals(r),r}segmentClone(e){return e.clone()}localNetLength(e){return Jo(e)!==void 0?0:e.cachedLength}mapIdToSegment(e,n){this.idToSegment.set(e,n)}addNode(e,n){const r=e.childCount++;return e.assignChild(n,r,!1),r}reloadFromSegments(e){N(!this.collabWindow.collaborating,73);const n=wi-1,r=i=>{const s=Math.ceil(i.length/n),a=new Array(s);for(let o=0,l=0;l<s;l++){const c=a[l]=this.makeBlock(0);for(let u=0;u<n&&o<i.length;u++,o++)this.addNode(c,i[o]);this.blockUpdate(c)}return a.length===1?a[0]:r(a)};e.length>0?(this.root=r(e),this.nodeUpdateOrdinals(this.root)):this.root=this.makeBlock(0)}startCollaboration(e,n,r){this.collabWindow.clientId=e,this.collabWindow.minSeq=n,this.collabWindow.collaborating=!0,this.collabWindow.currentSeq=r,this.segmentsToScour=new tI([],C8e),this.pendingSegments=Fu(),this.nodeUpdateLengthNewStructure(this.root,!0)}addToLRUSet(e,n){e.parent.needsScour!==!0&&n>this.collabWindow.currentSeq&&(e.parent.needsScour=!0,this.segmentsToScour.add({segment:e,maxSeq:n}))}underflow(e){return e.childCount<wi/2}scourNode(e,n){let r;for(let i=0;i<e.childCount;i++){const s=e.children[i];if(s.isLeaf()){const a=s;a.segmentGroups.empty?a.removedSeq!==void 0?(a.removedSeq>this.collabWindow.minSeq?n.push(a):a.trackingCollection.empty?(this.mergeTreeMaintenanceCallback&&this.mergeTreeMaintenanceCallback({operation:ug.UNLINK,deltaSegments:[{segment:a}]},void 0),a.parent=void 0):n.push(a),r=void 0):a.seq<=this.collabWindow.minSeq?r&&r.canAppend(a)&&gm(r.properties,a.properties)&&r.trackingCollection.matches(a.trackingCollection)&&this.localNetLength(a)>0?(r.append(a),this.mergeTreeMaintenanceCallback&&this.mergeTreeMaintenanceCallback({operation:ug.APPEND,deltaSegments:[{segment:r},{segment:a}]},void 0),a.parent=void 0,a.trackingCollection.trackingGroups.forEach(l=>l.unlink(a))):(n.push(a),this.localNetLength(a)>0?r=a:r=void 0):(n.push(a),r=void 0):(n.push(a),r=void 0)}else n.push(s),r=void 0}}packParent(e){const n=e.children;let r,i;const s=[];for(r=0;r<e.childCount;r++)i=n[r],this.scourNode(i,s),i.parent=void 0;const a=s.length,o=wi/2;let l=Math.min(wi-1,Math.floor(a/o));l<1&&(l=1);const c=Math.floor(a/l);let u=a%l;const d=new Array(wi);let h=0;for(let p=0;p<l;p++){let f=c;u>0&&(f++,u--);const m=this.makeBlock(f);for(let g=0;g<f;g++){const v=s[h++];m.assignChild(v,g,!1)}m.parent=e,d[p]=m,this.nodeUpdateLengthNewStructure(m)}e.children=d;for(let p=0;p<l;p++)e.assignChild(d[p],p,!1);e.childCount=l,this.underflow(e)&&e.parent?this.packParent(e.parent):(this.nodeUpdateOrdinals(e),this.blockUpdatePathLengths(e,Ze,-1,!0))}zamboniSegments(e=Dn.zamboniSegmentsMaxCount){if(this.collabWindow.collaborating)for(let n=0;n<e;n++){let r=this.segmentsToScour.peek();if(!r||r.maxSeq>this.collabWindow.minSeq)break;if(r=this.segmentsToScour.get(),r.segment.parent&&r.segment.parent.needsScour!==!1){const i=r.segment.parent,s=[];this.scourNode(i,s),i.needsScour=!1;const a=s.length;if(a<i.childCount){i.childCount=a,i.children=s;for(let o=0;o<a;o++)i.assignChild(s[o],o,!1);this.underflow(i)&&i.parent?this.packParent(i.parent):(this.nodeUpdateOrdinals(i),this.blockUpdatePathLengths(i,Ze,-1,!0))}}}}getCollabWindow(){return this.collabWindow}getStats(){const e=r=>{const i={maxHeight:0,nodeCount:0,leafCount:0,removedLeafCount:0,liveCount:0,histo:[]};for(let s=0;s<wi;s++)i.histo[s]=0;for(let s=0;s<r.childCount;s++){const a=r.children[s];let o=1;if(a.isLeaf())i.leafCount++,a.removedSeq!==void 0&&i.removedLeafCount++;else{const l=e(a);o=1+l.maxHeight,i.nodeCount+=l.nodeCount,i.leafCount+=l.leafCount,i.removedLeafCount+=l.removedLeafCount,i.liveCount+=l.liveCount;for(let c=0;c<wi;c++)i.histo[c]+=l.histo[c]}o>i.maxHeight&&(i.maxHeight=o)}return i.histo[r.childCount]++,i.nodeCount++,i.liveCount+=r.childCount,i};return e(this.root)}getLength(e,n){return this.blockLength(this.root,e,n)}get length(){return this.root.cachedLength}getPosition(e,n,r){var i;let s=0,a=e.parent,o;for(;a;){const l=a.children;for(let c=0;c<a.childCount;c++){const u=l[c];if(o&&u===o||u===e)break;s+=(i=this.nodeLength(u,n,r))!==null&&i!==void 0?i:0}o=a,a=a.parent}return s}getContainingSegment(e,n,r){let i,s;const a=(o,l,c,u,d)=>(i=o,s=d,!1);return this.searchBlock(this.root,e,0,n,r,{leaf:a},void 0),{segment:i,offset:s}}_getSlideToSegment(e){if(!e.segment||!Ix(e.segment))return e;let n;const r=i=>i.seq!==Ze&&!Ix(i)?(n=i,!1):!0;return this.rightExcursion(e.segment,r),n?{segment:n,offset:0}:(this.leftExcursion(e.segment,r),n=n,n?{segment:n,offset:n.cachedLength-1}:{segment:void 0,offset:0})}slideReferences(e,n){var r,i,s,a,o;N(Ix(e),753),N(!!e.localRefs,754);const l=this._getSlideToSegment({segment:e,offset:0}),c=l.segment;c&&!c.localRefs&&(c.localRefs=new ec(c));for(const u of n){(i=(r=u.callbacks)===null||r===void 0?void 0:r.beforeSlide)===null||i===void 0||i.call(r);const d=e.localRefs.removeLocalRef(u);N(u===d,755),c?(u.segment=c,u.offset=(s=l.offset)!==null&&s!==void 0?s:0,N(!!c.localRefs,756),c.localRefs.addLocalRef(u)):(u.segment=void 0,u.offset=0),(o=(a=u.callbacks)===null||a===void 0?void 0:a.afterSlide)===null||o===void 0||o.call(a)}c&&this.blockUpdatePathLengths(c.parent,wl,Ol)}updateSegmentRefsAfterMarkRemoved(e,n){if(!e.localRefs||e.localRefs.empty)return;const r=[],i=[];for(const s of e.localRefs)fn(s,Ve.StayOnRemove)?i.push(s):fn(s,Ve.SlideOnRemove)&&(n?i.push(s):r.push(s));n||this.slideReferences(e,r),e.localRefs.clear();for(const s of i)s.segment=e,e.localRefs.addLocalRef(s)}blockLength(e,n,r){return this.collabWindow.collaborating&&r!==this.collabWindow.clientId?e.partialLengths.getPartialLength(n,r):e.cachedLength}nodeLength(e,n,r){if(!this.collabWindow.collaborating||this.collabWindow.clientId===r)return e.isLeaf()?this.localNetLength(e):e.cachedLength;if(e.isLeaf()){const i=e,s=Jo(i);return s!==void 0&&s.removedSeq!==Ze&&s.removedSeq<=n?void 0:i.clientId===r||i.seq!==Ze&&i.seq<=n?s!==void 0&&s.removedClientIds.includes(r)?0:i.cachedLength:s!==void 0&&s.removedSeq!==Ze?void 0:0}else return e.partialLengths.getPartialLength(n,r)}addMinSeqListener(e,n){this.minSeqListeners||(this.minSeqListeners=new tI([],R8e)),this.minSeqListeners.add({minRequired:e,onMinGE:n})}notifyMinSeqListeners(){if(this.minSeqListeners)for(;this.minSeqListeners.count()>0&&this.minSeqListeners.peek().minRequired<=this.collabWindow.minSeq;)this.minSeqListeners.get().onMinGE(this.collabWindow.minSeq)}setMinSeq(e){N(e<=this.collabWindow.currentSeq,78),N(this.collabWindow.minSeq<=e,79),e>this.collabWindow.minSeq&&(this.collabWindow.minSeq=e,Dn.options.zamboniSegments&&this.zamboniSegments(),this.notifyMinSeqListeners())}referencePositionToLocalPosition(e,n=this.collabWindow.currentSeq,r=this.collabWindow.clientId){const i=e.getSegment();return i&&i.parent?(i.removedSeq?0:e.getOffset())+this.getPosition(i,n,r):Gc.DetachedPosition}getStackContext(e,n,r){const i={mergeTree:this,stacks:di(),rangeLabels:r};return this.search(e,Br,n,{leaf:E8e,shift:T8e},i),i.stacks}findTile(e,n,r,i=!0){const s={mergeTree:this,posPrecedesTile:i,tileLabel:r};if(i?this.search(e,Br,n,{leaf:aI,shift:oI},s):this.backwardSearch(e,Br,n,{leaf:aI,shift:oI},s),s.tile){let a;if(s.tile.isLeaf()){const o=s.tile;a=this.getPosition(o,Br,n)}else a=s.tile.toPosition();return{tile:s.tile,pos:a}}}search(e,n,r,i,s){return this.searchBlock(this.root,e,0,n,r,i,s)}searchBlock(e,n,r,i,s,a,o){var l;let c=n,u=r;const d=e.children;a&&a.pre&&a.pre(e,u,i,s,void 0,void 0,o);const h=a&&a.contains;for(let p=0;p<e.childCount;p++){const f=d[p],m=(l=this.nodeLength(f,i,s))!==null&&l!==void 0?l:0;if(!h&&c<m||h&&h(f,c,i,s,void 0,void 0,o))return f.isLeaf()?(a&&a.leaf&&a.leaf(f,u,i,s,c,-1,o),f):this.searchBlock(f,c,u,i,s,a,o);a&&a.shift&&a.shift(f,u,i,s,c,void 0,o),c-=m,u+=m}a&&a.post&&a.post(e,u,i,s,void 0,void 0,o)}backwardSearch(e,n,r,i,s){const a=this.getLength(n,r);if(!(e>a))return this.backwardSearchBlock(this.root,e,a,n,r,i,s)}backwardSearchBlock(e,n,r,i,s,a,o){var l;let c=r;const u=e.children;a&&a.pre&&a.pre(e,c,i,s,void 0,void 0,o);const d=a&&a.contains;for(let h=e.childCount-1;h>=0;h--){const p=u[h],f=(l=this.nodeLength(p,i,s))!==null&&l!==void 0?l:0,m=c-f;if(!d&&n>=m||d&&d(p,n,i,s,void 0,void 0,o))return p.isLeaf()?(a&&a.leaf&&a.leaf(p,m,i,s,n,-1,o),p):this.backwardSearchBlock(p,n,c,i,s,a,o);a&&a.shift&&a.shift(p,m,i,s,n,void 0,o),c=m}a&&a.post&&a.post(e,c,i,s,void 0,void 0,o)}updateRoot(e){if(e!==void 0){const n=this.makeBlock(2);n.assignChild(this.root,0,!1),n.assignChild(e,1,!1),this.root=n,this.nodeUpdateOrdinals(this.root),this.nodeUpdateLengthNewStructure(this.root)}}ackPendingSegment(e){const n=e.sequencedMessage.sequenceNumber,r=this.pendingSegments.dequeue(),i=[];let s=!1;if(r!==void 0){const a=[];r.segments.map(l=>{const c=!l.ack(r,e,this);s=c||s,!c&&e.op.type===nt.REMOVE&&this.updateSegmentRefsAfterMarkRemoved(l,!1),Dn.options.zamboniSegments&&this.addToLRUSet(l,n),i.includes(l.parent)||i.push(l.parent),a.push({segment:l})}),this.mergeTreeMaintenanceCallback&&this.mergeTreeMaintenanceCallback({deltaSegments:a,operation:ug.ACKNOWLEDGED},e);const o=this.collabWindow.clientId;for(const l of i)this.blockUpdatePathLengths(l,n,o,s)}Dn.options.zamboniSegments&&this.zamboniSegments()}addToPendingList(e,n,r){let i=n;return i===void 0&&(i={segments:[],localSeq:r},this.pendingSegments.enqueue(i)),e.segmentGroups.enqueue(i),i}getMarkerFromId(e){return this.idToSegment.get(e)}posFromRelativePos(e,n=this.collabWindow.currentSeq,r=this.collabWindow.clientId){let i=-1,s;return e.id&&(s=this.getMarkerFromId(e.id)),s&&(i=this.getPosition(s,n,r),e.before?e.offset!==void 0&&(i-=e.offset):(i+=s.cachedLength,e.offset!==void 0&&(i+=e.offset))),i}insertSegments(e,n,r,i,s,a){this.ensureIntervalBoundary(e,r,i);const o=s===Ze?++this.collabWindow.localSeq:void 0;this.blockInsert(e,r,i,s,o,n),this.mergeTreeDeltaCallback&&a!==void 0&&this.mergeTreeDeltaCallback(a,{operation:nt.INSERT,deltaSegments:n.map(l=>({segment:l}))}),this.collabWindow.collaborating&&Dn.options.zamboniSegments&&s!==Ze&&this.zamboniSegments()}insertAtReferencePosition(e,n,r){if(n.cachedLength===0)return;if(n.parent||n.removedSeq||n.seq!==Br)throw new Error("Cannot insert segment that has already been inserted.");const i=u=>{let d=u.parent,h=d;for(;d!==void 0;){if(d.childCount>=wi){const p=this.split(d);d===this.root?(this.updateRoot(p),h=void 0):(this.insertChildNode(d.parent,p,d.index+1),h=p.parent,this.blockUpdateLength(d.parent,Ze,s))}else this.blockUpdateLength(d,Ze,s);d=d.parent}h&&this.nodeUpdateOrdinals(h)},s=this.collabWindow.clientId,a=e.getSegment(),o=e.getOffset(),l=this.nodeLength(a,this.collabWindow.currentSeq,s);let c=a;if(o!==0&&l!==void 0&&l!==0){const u=this.splitLeafSegment(a,o);N(!!u.next,80),this.insertChildNode(a.parent,u.next,a.index+1),i(u.next),c=u.next}if(this.leftExcursion(c,u=>{if(!u.isLeaf())return!0;const d=this.nodeLength(u,this.collabWindow.currentSeq,s);return d===void 0?!0:d===0?(this.breakTie(0,u,Ze)&&(c=u),!0):!1}),this.collabWindow.collaborating?(n.localSeq=++this.collabWindow.localSeq,n.seq=Ze):n.seq=Br,n.clientId=s,gr.is(n)){const u=n.getId();u&&this.mapIdToSegment(u,n)}this.insertChildNode(c.parent,n,c.index),i(n),this.mergeTreeDeltaCallback&&this.mergeTreeDeltaCallback(r,{deltaSegments:[{segment:n}],operation:nt.INSERT}),this.collabWindow.collaborating&&this.addToPendingList(n,void 0,n.localSeq)}resolveRemoteClientPosition(e,n,r){if(n<this.collabWindow.minSeq)return;const i=this.getContainingSegment(e,n,r),s=this.getCollabWindow();if(i&&i.segment)return this.getPosition(i.segment,s.currentSeq,s.clientId)+i.offset;if(e===this.getLength(n,r))return this.getLength(s.currentSeq,s.clientId)}insertChildNode(e,n,r){N(e.childCount<wi,81);for(let i=e.childCount;i>r;i--)e.children[i]=e.children[i-1],e.children[i].index=i;e.childCount++,e.assignChild(n,r,!1)}blockInsert(e,n,r,i,s,a){let o=!1;const l=f=>(f.seq===Ze&&(o=!0),!1),c=f=>(o=!1,this.rightExcursion(f,l),o);let u;const d=f=>{this.collabWindow.collaborating&&(f.seq===Ze&&r===this.collabWindow.clientId?u=this.addToPendingList(f,u,s):f.seq>this.collabWindow.minSeq&&Dn.options.zamboniSegments&&this.addToLRUSet(f,f.seq))},h=(f,m,g)=>{const v={};return f?(v.replaceCurrent=g.candidateSegment,v.next=f):v.next=g.candidateSegment,v};let p=e;for(const f of a)if(o=!1,f.cachedLength>0){if(f.seq=i,f.localSeq=s,f.clientId=r,gr.is(f)){const g=f.getId();g&&this.mapIdToSegment(g,f)}const m=this.insertingWalk(this.root,p,n,r,i,{leaf:h,candidateSegment:f,continuePredicate:c});if(f.parent===void 0)throw new Error(`MergeTree insert failed: ${JSON.stringify({currentSeq:this.collabWindow.currentSeq,minSeq:this.collabWindow.minSeq,segSeq:f.seq})}`);this.updateRoot(m),d(f),p+=f.cachedLength}}ensureIntervalBoundary(e,n,r){const i=this.insertingWalk(this.root,e,n,r,wl,{leaf:this.splitLeafSegment});this.updateRoot(i)}breakTie(e,n,r){var i;if(n.isLeaf()){if(e===0){const s=r===Ze?Number.MAX_SAFE_INTEGER:r,a=n.seq===Ze?Number.MAX_SAFE_INTEGER-1:(i=n.seq)!==null&&i!==void 0?i:0;return s>a}return!1}else return!0}leftExcursion(e,n){let r=!0,i=e,s=i.parent;for(;s;){const a=s.children;let o,l,c=!1;for(o=s.childCount-1;o>=0;o--)if(l=a[o],c){if(l.isLeaf())r=n(l,0,Br,this.collabWindow.clientId,0,0,void 0);else{const u=l;r=this.nodeMapReverse(u,n,0,Br,this.collabWindow.clientId)}if(!r)return}else c=i===l;i=s,s=s.parent}}rightExcursion(e,n){let r=!0,i=e,s=i.parent;for(;s;){const a=s.children;let o,l,c=!1;for(o=0;o<s.childCount;o++)if(l=a[o],c){if(l.isLeaf())r=n(l);else{const u=l;r=this.walkAllSegments(u,n)}if(!r)return}else c=i===l;i=s,s=s.parent}}insertingWalk(e,n,r,i,s,a){let o=n;const l=e.children;let c,u,d,h;for(c=0;c<e.childCount;c++){u=l[c];const p=this.nodeLength(u,r,i);if(p!==void 0)if(o<p||o===p&&this.breakTie(o,u,s)){if(u.isLeaf()){const f=u,m=a.leaf(f,o,a);if(m.replaceCurrent&&(e.assignChild(m.replaceCurrent,c,!1),m.replaceCurrent.ordinal=u.ordinal),m.next)d=m.next,c++;else{a.structureChange&&this.nodeUpdateLengthNewStructure(e);return}}else{const f=u,m=this.insertingWalk(f,o,r,i,s,a);if(m===void 0){a.structureChange?this.nodeUpdateLengthNewStructure(e):this.blockUpdateLength(e,s,i);return}else if(m===Dn.theUnfinishedNode){o-=p;continue}else d=m,h=m,c++}break}else o-=p}if(!d&&o===0){if(s!==Ze&&a.continuePredicate&&a.continuePredicate(e))return Dn.theUnfinishedNode;d=a.leaf(void 0,o,a).next}if(d){for(let p=e.childCount;p>c;p--)e.children[p]=e.children[p-1],e.children[p].index=p;if(e.assignChild(d,c,!1),e.childCount++,e.setOrdinal(d,c),e.childCount<wi){h&&this.nodeUpdateOrdinals(h),a.structureChange?this.nodeUpdateLengthNewStructure(e):this.blockUpdateLength(e,s,i);return}else return this.split(e)}else return}split(e){const n=wi/2,r=this.makeBlock(n);e.childCount=n,this.nodeUpdateOrdinals(e);for(let i=0;i<n;i++)r.assignChild(e.children[n+i],i,!1),e.children[n+i]=void 0;return this.nodeUpdateLengthNewStructure(e),this.nodeUpdateLengthNewStructure(r),r}nodeUpdateOrdinals(e){for(let n=0;n<e.childCount;n++){const r=e.children[n];e.setOrdinal(r,n),r.isLeaf()||this.nodeUpdateOrdinals(r)}}annotateRange(e,n,r,i,s,a,o,l){this.ensureIntervalBoundary(e,s,a),this.ensureIntervalBoundary(n,s,a);const c=[],u=o===Ze?++this.collabWindow.localSeq:void 0;let d;const h=p=>{const f=p.addProperties(r,i,o,this.collabWindow);return c.push({segment:p,propertyDeltas:f}),this.collabWindow.collaborating&&(o===Ze?d=this.addToPendingList(p,d,u):Dn.options.zamboniSegments&&this.addToLRUSet(p,o)),!0};this.mapRange({leaf:h},s,a,void 0,e,n),this.mergeTreeDeltaCallback&&c.length>0&&this.mergeTreeDeltaCallback(l,{operation:nt.ANNOTATE,deltaSegments:c}),this.collabWindow.collaborating&&o!==Ze&&Dn.options.zamboniSegments&&this.zamboniSegments()}markRangeRemoved(e,n,r,i,s,a=!1,o){let l=a;this.ensureIntervalBoundary(e,r,i),this.ensureIntervalBoundary(n,r,i);let c;const u=[],d=[],h=s===Ze?++this.collabWindow.localSeq:void 0,p=(g,v,y,b)=>{const C=Jo(g);return C!==void 0?(l=!0,C.removedSeq===Ze?(C.removedClientIds.unshift(i),C.removedSeq=s,g.localRemovedSeq=void 0):C.removedClientIds.push(i)):(g.removedClientIds=[i],g.removedSeq=s,g.localRemovedSeq=h,u.push({segment:g})),g.localRefs&&!g.localRefs.empty&&d.push(g),this.collabWindow.collaborating&&(g.removedSeq===Ze&&i===this.collabWindow.clientId?c=this.addToPendingList(g,c,h):Dn.options.zamboniSegments&&this.addToLRUSet(g,s)),!0},f=(g,v,y,b)=>(l?this.nodeUpdateLengthNewStructure(g):this.blockUpdateLength(g,s,i),!0);this.mapRange({leaf:p,post:f},r,i,void 0,e,n);const m=this.collabWindow.collaborating&&i===this.collabWindow.clientId;for(const g of d)this.updateSegmentRefsAfterMarkRemoved(g,m);this.mergeTreeDeltaCallback&&u.length>0&&this.mergeTreeDeltaCallback(o,{operation:nt.REMOVE,deltaSegments:u}),this.collabWindow.collaborating&&s!==Ze&&Dn.options.zamboniSegments&&this.zamboniSegments()}nodeUpdateLengthNewStructure(e,n=!1){this.blockUpdate(e),this.collabWindow.collaborating&&(e.partialLengths=Rn.combine(this,e,this.collabWindow,n))}removeLocalReferencePosition(e){var n;const r=e.getSegment();if(r){const i=(n=r==null?void 0:r.localRefs)===null||n===void 0?void 0:n.removeLocalRef(e);return i!==void 0&&this.blockUpdatePathLengths(r.parent,wl,Ol),i}}createLocalReferencePosition(e,n,r,i,s){var a;if(f8e(e)&&!fn(r,Ve.SlideOnRemove|Ve.Transient))throw new Tt("Can only create SlideOnRemove or Transient local reference position on a removed segment");const o=(a=e.localRefs)!==null&&a!==void 0?a:new ec(e);e.localRefs=o;const l=o.createLocalRef(n,r,i,s);return this.blockUpdatePathLengths(e.parent,wl,Ol),l}removeLocalReference(e,n){e.localRefs&&e.localRefs.removeLocalRef(n)&&this.blockUpdatePathLengths(e.parent,wl,Ol)}addLocalReference(e){const n=e.segment;let r=n.localRefs;r||(r=new ec(n),n.localRefs=r),r.addLocalRef(e),this.blockUpdatePathLengths(n.parent,wl,Ol)}blockUpdate(e){var n;let r=0;const i=e.hierBlock();i&&(i.rightmostTiles=di(),i.leftmostTiles=di(),i.rangeStacks={});for(let s=0;s<e.childCount;s++){const a=e.children[s];r+=(n=v8e(this,a))!==null&&n!==void 0?n:0,i&&i.addNodeReferences(this,a),this.blockUpdateActions&&this.blockUpdateActions.child(e,s)}e.cachedLength=r}blockUpdatePathLengths(e,n,r,i=!1){let s=e;for(;s!==void 0;)i?this.nodeUpdateLengthNewStructure(s):this.blockUpdateLength(s,n,r),s=s.parent}blockUpdateLength(e,n,r){this.blockUpdate(e),this.collabWindow.collaborating&&n!==Ze&&n!==wl&&(e.partialLengths!==void 0&&Dn.options.incrementalUpdate&&r!==Ul?e.partialLengths.update(this,e,n,r,this.collabWindow):e.partialLengths=Rn.combine(this,e,this.collabWindow))}map(e,n,r,i){this.nodeMap(this.root,e,0,n,r,i)}mapRange(e,n,r,i,s,a,o=!1){o&&(s&&this.ensureIntervalBoundary(s,n,r),a&&this.ensureIntervalBoundary(a,n,r)),this.nodeMap(this.root,e,0,n,r,i,s,a)}incrementalBlockMap(e){for(var n;!e.empty();){const r=e.top();if(r.op!==nd.Go)return;if(r.childIndex===0&&(r.start===void 0&&(r.start=0),r.end===void 0&&(r.end=this.blockLength(r.block,r.refSeq,r.clientId)),r.actions.pre&&r.actions.pre(r)),r.op===nd.Go&&r.childIndex<r.block.childCount){const i=r.block.children[r.childIndex],s=(n=this.nodeLength(i,r.refSeq,r.clientId))!==null&&n!==void 0?n:0;if(s>0&&r.start<s&&r.end>0)if(i.isLeaf())r.actions.leaf(i,r);else{const a=new b8e(i,r.actions,r.pos,r.refSeq,r.clientId,r.context,r.start,r.end,0);e.push(a)}r.pos+=s,r.start-=s,r.end-=s,r.childIndex++}else r.childIndex===r.block.childCount&&(r.op===nd.Go&&r.actions.post&&r.actions.post(r),e.pop())}}nodeMap(e,n,r,i,s,a,o,l){var c;let u=o,d=l,h=r;u===void 0&&(u=0),d===void 0&&(d=this.blockLength(e,i,s));let p=!0;if(n.pre&&(p=n.pre(e,h,i,s,u,d,a),!p))return!0;const f=e.children;for(let m=0;m<e.childCount;m++){const g=f[m],v=(c=this.nodeLength(g,i,s))!==null&&c!==void 0?c:0;if(p&&d>0&&v>0&&u<v&&(g.isLeaf()?n.leaf&&(p=n.leaf(g,h,i,s,u,d,a)):p&&(p=this.nodeMap(g,n,h,i,s,a,u,d))),!p)break;n.shift&&n.shift(g,h,i,s,u,d,a),h+=v,u-=v,d-=v}return p&&n.post&&(p=n.post(e,h,i,s,u,d,a)),p}walkAllSegments(e,n,r){let i=!0;const s=e.children;for(let a=0;i&&a<e.childCount;a++){const o=s[a];i=o.isLeaf()?n(o,r):this.walkAllSegments(o,n,r)}return i}nodeMapReverse(e,n,r,i,s){let a=!0;const o=e.children;for(let l=e.childCount-1;l>=0;l--){const c=o[l];if(a&&(c.isLeaf()?a=n(c,r,i,s,0,0,void 0):a&&(a=this.nodeMapReverse(c,n,r,i,s))),!a)break}return a}}Dn.zamboniSegmentsMaxCount=2;Dn.options={incrementalUpdate:!0,insertAfterRemovedSegs:!0,zamboniSegments:!0};Dn.theUnfinishedNode={childCount:-1};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function k8e(t,e,n){const r=t.getId();if(r)return{combiningOp:n,props:e,relativePos1:{id:r,before:!0},relativePos2:{id:r},type:nt.ANNOTATE}}function R2(t,e,n,r){return{combiningOp:r,pos1:t,pos2:e,props:n,type:nt.ANNOTATE}}function k2(t,e){return{pos1:t,pos2:e,type:nt.REMOVE}}function Mx(t,e){return x7(t,e.toJSONObject())}function x7(t,e){return{pos1:t,seg:e,type:nt.INSERT}}function P2(...t){return{ops:t,type:nt.GROUP}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function P8e(t){return!!t&&typeof t=="object"&&"json"in t}function lI(t,e,n,r,i,s){let a;switch(e.version!==void 0&&n.send({eventName:"MergeTreeChunk:serializeAsMinSupportedVersion",category:"generic",fromChunkVersion:e.version,toChunkVersion:void 0}),e.version){case void 0:a=e,a.headerMetadata=C7(t,a);break;case"1":const o=e,l=t===wn.header?o.headerMetadata:void 0;a={version:void 0,chunkStartSegmentIndex:o.startIndex,chunkLengthChars:o.length,chunkSegmentCount:o.segmentCount,segmentTexts:o.segments,totalLengthChars:l==null?void 0:l.totalLength,totalSegmentCount:l==null?void 0:l.totalSegmentCount,chunkSequenceNumber:l==null?void 0:l.sequenceNumber,chunkMinSequenceNumber:l==null?void 0:l.minSequenceNumber,headerMetadata:l};break;default:throw new Error(`Unsupported chunk path: ${t} version: ${e.version}`)}return i.stringify(a,s)}function cI(t,e,n,r,i,s){const a=w7(t,e);return i.stringify(a,s)}function w7(t,e,n,r){switch(e.version){case void 0:{const i=e;return{version:"1",length:i.chunkLengthChars,segmentCount:i.chunkSegmentCount,headerMetadata:C7(t,i),segments:i.segmentTexts,startIndex:i.chunkStartSegmentIndex}}case"1":return e;default:throw new Error(`Unsupported chunk path: ${t} version: ${e.version}`)}}function C7(t,e,n){if(t===wn.header){if(e.headerMetadata!==void 0)return e.headerMetadata;const r=[{id:wn.header}];return e.chunkLengthChars<e.totalLengthChars&&r.push({id:wn.body}),{orderedChunkMetadata:r,minSequenceNumber:e.chunkMinSequenceNumber,sequenceNumber:e.chunkSequenceNumber,totalLength:e.totalLengthChars,totalSegmentCount:e.totalSegmentCount}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class wn{constructor(e,n,r,i){var s,a;this.mergeTree=e,this.filename=r,this.onCompletion=i,this.logger=ot.create(n,"Snapshot"),this.chunkSize=(a=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.mergeTreeSnapshotChunkSize)!==null&&a!==void 0?a:wn.sizeOfFirstChunk}getSeqLengthSegs(e,n,r,i=0){const s=[];let a=0,o=0;for(;a<r&&i+o<e.length;){const l=e[i+o];s.push(l),a+=n[i+o],o++}return{version:void 0,chunkStartSegmentIndex:i,chunkSegmentCount:o,chunkLengthChars:a,totalLengthChars:this.header.segmentsTotalLength,totalSegmentCount:e.length,chunkSequenceNumber:this.header.seq,segmentTexts:s}}emit(e,n,r){var i,s;const a=this.getSeqLengthSegs(this.segments,this.segmentLengths,this.chunkSize);let o=a.chunkLengthChars,l=a.chunkSegmentCount;const c=new mi;if(c.addBlob(wn.header,lI(wn.header,a,this.logger,this.mergeTree.options,n,r)),a.chunkSegmentCount<a.totalSegmentCount){const u=this.getSeqLengthSegs(this.segments,this.segmentLengths,this.header.segmentsTotalLength,a.chunkSegmentCount);o+=u.chunkLengthChars,l+=u.chunkSegmentCount,c.addBlob(wn.body,lI(wn.body,u,this.logger,this.mergeTree.options,n,r))}return N(o===this.header.segmentsTotalLength,93),N(l===a.totalSegmentCount,94),e!==void 0&&e.length>0&&c.addBlob((s=(i=this.mergeTree.options)===null||i===void 0?void 0:i.catchUpBlobName)!==null&&s!==void 0?s:wn.catchupOps,n?n.stringify(e,r):JSON.stringify(e)),c.getSummaryTree()}extractSync(){const e=this.mergeTree.getCollabWindow();this.seq=e.minSeq,this.header={segmentsTotalLength:this.mergeTree.getLength(this.mergeTree.collabWindow.minSeq,Ul),seq:this.mergeTree.collabWindow.minSeq};const n=[];let r;const i=(a,o,l,c,u,d)=>(a.seq!==Ze&&a.seq<=this.seq&&(a.removedSeq===void 0||a.removedSeq===Ze||a.removedSeq>this.seq)&&(r!=null&&r.canAppend(a)&&gm(r.properties,a.properties)?(r=r.clone(),r.append(a.clone())):(r&&n.push(r),r=a)),!0);this.mergeTree.map({leaf:i},this.seq,Ul,void 0),r&&n.push(r),this.segments=[],this.segmentLengths=[];let s=0;return n.map(a=>{s+=a.cachedLength,this.segments.push(a.toJSONObject()),this.segmentLengths.push(a.cachedLength)}),this.header.segmentsTotalLength!==s&&(this.logger.sendErrorEvent({eventName:"SegmentsTotalLengthMismatch",totalLength:s,segmentsTotalLength:this.header.segmentsTotalLength}),this.header.segmentsTotalLength=s),this.segments}}wn.header="header";wn.body="body";wn.catchupOps="catchupOps";wn.sizeOfFirstChunk=1e4;/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class Oc{constructor(e,n,r,i,s){var a,o;this.mergeTree=e,this.getLongClientId=r,this.filename=i,this.onCompletion=s,this.logger=ot.create(n,"Snapshot"),this.chunkSize=(o=(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.mergeTreeSnapshotChunkSize)!==null&&o!==void 0?o:Oc.chunkSize;const{currentSeq:l,minSeq:c}=e.getCollabWindow();this.header={minSequenceNumber:c,sequenceNumber:l,orderedChunkMetadata:[],totalLength:0,totalSegmentCount:0},this.segments=[],this.segmentLengths=[]}getSeqLengthSegs(e,n,r,i=0){const s=[];let a=0,o=0;for(;a<r&&i+o<e.length;){const l=e[i+o];s.push(l),a+=n[i+o],o++}return{version:"1",segmentCount:o,length:a,segments:s,startIndex:i,headerMetadata:void 0}}emit(e,n){const r=[];this.header.totalSegmentCount=0,this.header.totalLength=0;do{const o=this.getSeqLengthSegs(this.segments,this.segmentLengths,this.chunkSize,this.header.totalSegmentCount);r.push(o),this.header.totalSegmentCount+=o.segmentCount,this.header.totalLength+=o.length}while(this.header.totalSegmentCount<this.segments.length);const i=r.shift();i.headerMetadata=this.header,i.headerMetadata.orderedChunkMetadata=[{id:wn.header}];const s=[];r.forEach((o,l)=>{const c=`${wn.body}_${l}`;this.header.orderedChunkMetadata.push({id:c}),s.push([c,cI(c,o,this.logger,this.mergeTree.options,e,n)])});const a=new mi;return a.addBlob(wn.header,cI(wn.header,i,this.logger,this.mergeTree.options,e,n)),s.forEach(o=>{a.addBlob(o[0],o[1])}),a.getSummaryTree()}extractSync(){const e=this.mergeTree,n=this.header.minSequenceNumber,r=(o,l)=>{this.segments.push(o),this.segmentLengths.push(l)},i=o=>{o&&r(o.toJSONObject(),o.cachedLength)};let s;const a=o=>{var l;if(o.seq===Ze||o.removedSeq<=n)return!0;if(o.seq<=n&&(o.removedSeq===void 0||o.removedSeq===Ze))s?s.canAppend(o)&&gm(s.properties,o.properties)?(s=s.clone(),s.append(o.clone())):(i(s),s=o):s=o;else{i(s),s=void 0;const c={json:o.toJSONObject()};o.seq>n&&(c.seq=o.seq,c.client=this.getLongClientId(o.clientId)),o.removedSeq!==void 0&&(N(o.removedSeq!==Ze&&o.removedSeq>n,101),c.removedSeq=o.removedSeq,c.removedClient=o.removedClientIds!==void 0?this.getLongClientId(o.removedClientIds[0]):void 0,c.removedClientIds=(l=o.removedClientIds)===null||l===void 0?void 0:l.map(u=>this.getLongClientId(u))),N(c.seq!==void 0&&c.client!==void 0||c.removedSeq!==void 0&&c.removedClient!==void 0,102),r(c,o.cachedLength)}return!0};return e.walkAllSegments(e.root,a,this),i(s),this.segments}static async loadChunk(e,n,r,i,s){const a=await e.readBlob(n),o=al(a,"utf8");return Oc.processChunk(n,o,r,i,s)}static processChunk(e,n,r,i,s){const a=s?s.parse(n):JSON.parse(n);return w7(e,a)}}Oc.chunkSize=1e4;/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class _8e{constructor(e,n,r,i,s){this.runtime=e,this.client=n,this.mergeTree=r,this.serializer=s,this.specToSegment=a=>{var o;let l;return P8e(a)?(l=this.client.specToSegment(a.json),l.clientId=a.client!==void 0?this.client.getOrAddShortClientId(a.client):Ul,l.seq=a.seq!==void 0?a.seq:Br,a.removedSeq!==void 0&&(l.removedSeq=a.removedSeq),a.removedClient!==void 0&&(l.removedClientIds=[this.client.getOrAddShortClientId(a.removedClient)]),a.removedClientIds!==void 0&&(l.removedClientIds=(o=a.removedClientIds)===null||o===void 0?void 0:o.map(c=>this.client.getOrAddShortClientId(c)))):(l=this.client.specToSegment(a),l.seq=Br,l.clientId=Ul),l},this.logger=ot.create(i,"SnapshotLoader")}async initialize(e){const n=e.readBlob(wn.header).then(i=>(N(!!i,95),this.loadHeader(al(i,"utf8")))),r=this.loadBodyAndCatchupOps(n,e);return r.catch(i=>this.logger.sendErrorEvent({eventName:"CatchupOpsLoadFailure"},i)),await n,{catchupOpsP:r}}async loadBodyAndCatchupOps(e,n){const r=n.list(""),i=await e;await this.loadBody(i,n);const s=await r;if(s.length===i.headerMetadata.orderedChunkMetadata.length+1)return i.headerMetadata.orderedChunkMetadata.forEach(a=>s.splice(s.indexOf(a.id),1)),N(s.length===1,96),this.loadCatchupOps(n.readBlob(s[0]));if(s.length!==i.headerMetadata.orderedChunkMetadata.length)throw new Error("Unexpected blobs in snapshot");return[]}loadHeader(e){var n;const r=Oc.processChunk(wn.header,e,this.logger,this.mergeTree.options,this.serializer),i=r.segments.map(this.specToSegment);if(this.mergeTree.reloadFromSegments(i),r.headerMetadata===void 0)throw new Error("header metadata not available");return this.runtime.attachState!==ze.Detached&&this.client.startOrUpdateCollaboration((n=this.runtime.clientId)!==null&&n!==void 0?n:"snapshot",r.headerMetadata.minSequenceNumber!==void 0?r.headerMetadata.minSequenceNumber:r.headerMetadata.sequenceNumber,r.headerMetadata.sequenceNumber),r}async loadBody(e,n){if(N(e.length<=e.headerMetadata.totalLength,97),N(e.segmentCount<=e.headerMetadata.totalSegmentCount,98),e.segmentCount===e.headerMetadata.totalSegmentCount)return;const r=[];let i=e.length;for(let c=1;c<e.headerMetadata.orderedChunkMetadata.length;c++){const u=await Oc.loadChunk(n,e.headerMetadata.orderedChunkMetadata[c].id,this.logger,this.mergeTree.options,this.serializer);i+=u.length,r.push(...u.segments.map(this.specToSegment))}N(i===e.headerMetadata.totalLength,99),N(e.segmentCount+r.length===e.headerMetadata.totalSegmentCount,100);const s=this.mergeTree,a=(c,u,d)=>{s.insertSegments(s.root.cachedLength,c,Br,u,d,void 0)},o=[],l=()=>{o.length>0&&a(o,Ul,Br)};for(const c of r){const u=c.clientId,d=c.seq;u===Ul&&d===Br?o.push(c):(l(),a([c],u,d))}l()}async loadCatchupOps(e){return JSON.parse(al(await e,"utf8"))}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const uI=256;class Jn extends b7{constructor(e){super(),this.text=e,this.type=Jn.type,this.cachedLength=e.length}static is(e){return e.type===Jn.type}static make(e,n){const r=new Jn(e);return n&&r.addProperties(n),r}static fromJSONObject(e){if(typeof e=="string")return new Jn(e);if(e&&typeof e=="object"&&"text"in e){const n=e;return Jn.make(n.text,n.props)}}toJSONObject(){return this.properties?{text:this.text,props:this.properties}:this.text}clone(e=0,n){const r=this.text.substring(e,n),i=Jn.make(r,this.properties);return this.cloneInto(i),i}canAppend(e){return!this.text.endsWith(`
`)&&Jn.is(e)&&(this.cachedLength<=uI||e.cachedLength<=uI)}toString(){return this.text}append(e){if(Jn.is(e))ec.append(this,e),this.text+=e.text,this.cachedLength=this.text.length;else throw new Error("can only append text segment")}removeRange(e,n){let r="";const i=this.text.length;return e>0&&(r+=this.text.substring(0,e)),n<i&&(r+=this.text.substring(n)),this.text=r,this.cachedLength=r.length,r.length===0}createSplitSegmentAt(e){if(e>0){const n=this.text.substring(e);return this.text=this.text.substring(0,e),this.cachedLength=this.text.length,new Jn(n)}}}Jn.type="TextSegment";function dI(t){return t.parallelArrays===!0}class A8e{constructor(e){this.mergeTree=e,this.gatherText=(n,r,i,s,a,o,l)=>{var c,u;let d=a;if(Jn.is(n)){let h="",p="";if(dI(l)){const f=[],m=[];!((c=n.properties)===null||c===void 0)&&c["font-weight"]&&f.push("b"),!((u=n.properties)===null||u===void 0)&&u["text-decoration"]&&f.push("u");const g=[];if(f.length>0){for(const v of f)l.tagsInProgress.includes(v)||(h+=`<${v}>`,m.push(v));for(const v of l.tagsInProgress)f.includes(v)||(p+=`</${v}>`,g.push(v));for(const v of m.reverse())l.tagsInProgress.push(v)}else for(const v of l.tagsInProgress)p+=`</${v}>`,g.push(v);for(const v of g){const y=l.tagsInProgress.indexOf(v);y>=0&&l.tagsInProgress.splice(y,1)}}l.textSegment.text+=p,l.textSegment.text+=h,d<=0&&o>=n.text.length?l.textSegment.text+=n.text:(d<0&&(d=0),o>=n.text.length?l.textSegment.text+=n.text.substring(d):l.textSegment.text+=n.text.substring(d,o))}else if(l.placeholder&&l.placeholder.length>0)if(l.placeholder==="*"){const h=n;l.textSegment.text+=`
${h.toString()}`}else for(let h=0;h<n.cachedLength;h++)l.textSegment.text+=l.placeholder;else if(dI(l)){const h=n;h.hasTileLabel(l.parallelMarkerLabel)&&(l.parallelMarkers.push(h),l.parallelText.push(l.textSegment.text),l.textSegment.text="")}return!0}}getTextAndMarkers(e,n,r,i,s){const a=this.getValidRange(i,s,e,n),o={parallelArrays:!0,parallelMarkerLabel:r,parallelMarkers:[],parallelText:[],tagsInProgress:[],textSegment:new Jn("")};return this.mergeTree.mapRange({leaf:this.gatherText},e,n,o,a.start,a.end),{parallelText:o.parallelText,parallelMarkers:o.parallelMarkers}}getText(e,n,r="",i,s){const a=this.getValidRange(i,s,e,n),o={textSegment:new Jn(""),placeholder:r};return this.mergeTree.mapRange({leaf:this.gatherText},e,n,o,a.start,a.end),o.textSegment.text}getValidRange(e,n,r,i){return{end:n??this.mergeTree.getLength(r,i),start:e??0}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function hg(t){return t.trace().duration*1e3}class Zk{constructor(e,n,r){this.specToSegment=e,this.logger=n,this.measureOps=!1,this.accumTime=0,this.localTime=0,this.localOps=0,this.accumWindowTime=0,this.accumWindow=0,this.accumOps=0,this.maxWindowTime=0,this.clientNameToIds=new Dp(x8e),this.shortClientIdMap=[],this.pendingConsensus=new Map,this.mergeTree=new Dn(r)}get mergeTreeDeltaCallback(){return this.mergeTree.mergeTreeDeltaCallback}set mergeTreeDeltaCallback(e){this.mergeTree.mergeTreeDeltaCallback=e}get mergeTreeMaintenanceCallback(){return this.mergeTree.mergeTreeMaintenanceCallback}set mergeTreeMaintenanceCallback(e){this.mergeTree.mergeTreeMaintenanceCallback=e}peekPendingSegmentGroups(e=1){var n,r;if(e===1)return(n=this.mergeTree.pendingSegments)===null||n===void 0?void 0:n.last();let i=0;return(r=this.mergeTree.pendingSegments)===null||r===void 0?void 0:r.some(()=>i<e?(i++,!0):!1,!0)}annotateMarkerNotifyConsensus(e,n,r){const i={name:"consensus"},s=this.annotateMarker(e,n,i);if(s){const a={callback:r,marker:e};return this.pendingConsensus.set(e.getId(),a),s}else return}annotateMarker(e,n,r){const i=k8e(e,n,r);if(this.applyAnnotateRangeOp({op:i}))return i}annotateRangeLocal(e,n,r,i){const s=R2(e,n,r,i);if(this.applyAnnotateRangeOp({op:s}))return s}removeRangeLocal(e,n){const r=k2(e,n);if(this.applyRemoveRangeOp({op:r}))return r}insertSegmentLocal(e,n){if(n.cachedLength<=0)return;const r=Mx(e,n);if(this.applyInsertOp({op:r}))return r}insertAtReferencePositionLocal(e,n){const r=this.mergeTree.referencePositionToLocalPosition(e,this.getCurrentSeq(),this.getClientId());if(r===Gc.DetachedPosition)return;const i=Mx(r,n),s={op:i};let a;return this.measureOps&&(a=Ys.start()),this.mergeTree.insertAtReferencePosition(e,n,s),this.completeAndLogOp(s,this.getClientSequenceArgs(s),{start:i.pos1},a),i}walkSegments(e,n,r,i,s=!1){this.mergeTree.mapRange({leaf:e},this.getCurrentSeq(),this.getClientId(),i,n,r,s)}serializeGCData(e,n){this.mergeTree.walkAllSegments(this.mergeTree.root,r=>(r.removedSeq===void 0&&n.stringify(r.clone().toJSONObject(),e),!0))}getCollabWindow(){return this.mergeTree.getCollabWindow()}getPosition(e){return(e==null?void 0:e.parent)===void 0?-1:this.mergeTree.getPosition(e,this.getCurrentSeq(),this.getClientId())}addLocalReference(e){return this.mergeTree.addLocalReference(e)}removeLocalReference(e){return this.removeLocalReferencePosition(e)}createLocalReferencePosition(e,n,r,i){return this.mergeTree.createLocalReferencePosition(e,n,r,i,this)}removeLocalReferencePosition(e){return this.mergeTree.removeLocalReferencePosition(e)}localReferencePositionToPosition(e){return this.mergeTree.referencePositionToLocalPosition(e)}posFromRelativePos(e){return this.mergeTree.posFromRelativePos(e)}getMarkerFromId(e){return this.mergeTree.getMarkerFromId(e)}applyRemoveRangeOp(e){N(e.op.type===nt.REMOVE,45);const n=e.op,r=this.getClientSequenceArgs(e),i=this.getValidOpRange(n,r);if(!i)return!1;let s;return this.measureOps&&(s=Ys.start()),this.mergeTree.markRangeRemoved(i.start,i.end,r.referenceSequenceNumber,r.clientId,r.sequenceNumber,!1,e),this.completeAndLogOp(e,r,i,s),!0}applyAnnotateRangeOp(e){N(e.op.type===nt.ANNOTATE,46);const n=e.op,r=this.getClientSequenceArgs(e),i=this.getValidOpRange(n,r);if(!i)return!1;let s;return this.measureOps&&(s=Ys.start()),this.mergeTree.annotateRange(i.start,i.end,n.props,n.combiningOp,r.referenceSequenceNumber,r.clientId,r.sequenceNumber,e),this.completeAndLogOp(e,r,i,s),!0}applyInsertOp(e){N(e.op.type===nt.INSERT,47);const n=e.op,r=this.getClientSequenceArgs(e),i=this.getValidOpRange(n,r);if(!i)return!1;let s;if(n.seg&&(s=[this.specToSegment(n.seg)]),!s||s.length===0)return!1;let a;return this.measureOps&&(a=Ys.start()),this.mergeTree.insertSegments(i.start,s,r.referenceSequenceNumber,r.clientId,r.sequenceNumber,e),this.completeAndLogOp(e,r,i,a),!0}completeAndLogOp(e,n,r,i){e.sequencedMessage?(N(this.mergeTree.getCollabWindow().currentSeq<n.sequenceNumber,48),N(this.mergeTree.getCollabWindow().minSeq<=e.sequencedMessage.minimumSequenceNumber,49),i&&(this.accumTime+=hg(i),this.accumOps++,this.accumWindow+=this.getCurrentSeq()-this.getCollabWindow().minSeq)):i&&(this.localTime+=hg(i),this.localOps++)}getValidOpRange(e,n){let r=e.pos1;r===void 0&&e.relativePos1&&(r=this.mergeTree.posFromRelativePos(e.relativePos1,n.referenceSequenceNumber,n.clientId));let i=e.pos2;if(i===void 0&&e.relativePos2&&(i=this.mergeTree.posFromRelativePos(e.relativePos2,n.referenceSequenceNumber,n.clientId)),n.clientId===this.getClientId()){const s=this.getLength(),a=[];if((r===void 0||r<0||r>s||r===s&&e.type!==nt.INSERT)&&a.push("start"),(e.type!==nt.INSERT||i!==void 0)&&(i===void 0||i<=r)&&a.push("end"),a.length>0)throw new rt("RangeOutOfBounds",{usageError:!0,end:i,invalidPositions:a.toString(),length:s,opPos1:e.pos1,opPos1Relative:e.relativePos1!==void 0,opPos2:e.pos2,opPos2Relative:e.relativePos2!==void 0,opType:e.type,start:r})}return{start:r,end:i}}getClientSequenceArgsForMessage(e){if(e)return{clientId:this.getOrAddShortClientId(e.clientId),referenceSequenceNumber:e.referenceSequenceNumber,sequenceNumber:e.sequenceNumber};{const n=this.getCollabWindow();return{clientId:n.clientId,referenceSequenceNumber:n.currentSeq,sequenceNumber:this.getLocalSequenceNumber()}}}getClientSequenceArgs(e){return this.getClientSequenceArgsForMessage(e.sequencedMessage)}ackPendingSegment(e){const n=r=>{let i;this.measureOps&&(i=Ys.start()),this.mergeTree.ackPendingSegment(r),r.op.type===nt.ANNOTATE&&r.op.combiningOp&&r.op.combiningOp.name==="consensus"&&this.updateConsensusProperty(r.op,r.sequencedMessage),i&&(this.accumTime+=hg(i),this.accumOps++,this.accumWindow+=this.getCurrentSeq()-this.getCollabWindow().minSeq)};if(e.op.type===nt.GROUP)for(const r of e.op.ops)n({groupOp:e.op,op:r,sequencedMessage:e.sequencedMessage});else n(e)}cloneFromSegments(){const e=new Zk(this.specToSegment,this.logger,this.mergeTree.options),n=[],r=this.mergeTree.blockClone(this.mergeTree.root,n);return e.mergeTree.root=r,e}getOrAddShortClientId(e){return this.clientNameToIds.get(e)||this.addLongClientId(e),this.getShortClientId(e)}getShortClientId(e){return this.clientNameToIds.get(e).data}getLongClientId(e){return e>=0?this.shortClientIdMap[e]:"original"}addLongClientId(e){this.clientNameToIds.put(e,this.shortClientIdMap.length),this.shortClientIdMap.push(e)}findReconnectionPosition(e,n){N(n<=this.mergeTree.collabWindow.localSeq,50);let r=0;return this.mergeTree.walkAllSegments(this.mergeTree.root,i=>i===e?!1:((i.localSeq===void 0||i.localSeq<=n)&&(i.removedSeq===void 0||i.localRemovedSeq>n)&&(r+=i.cachedLength),!0)),r}rebasePosition(e,n,r){N(r<=this.mergeTree.collabWindow.localSeq,768);let i,s=0,a=e;const o=u=>u.seq!==void 0&&u.seq!==Ze&&u.seq<=n||u.localSeq!==void 0&&u.localSeq<=r,l=({removedSeq:u,localRemovedSeq:d})=>u!==void 0&&u!==Ze&&u<=n||d!==void 0&&d<=r;this.mergeTree.walkAllSegments(this.mergeTree.root,u=>(N(u.seq!==void 0||u.localSeq!==void 0,769),i=u,o(u)&&!l(u)&&(s+=u.cachedLength,a>=u.cachedLength&&(a-=u.cachedLength)),s<=e)),N(i!==void 0,770);const c=this.getCollabWindow().currentSeq;return(i.removedSeq!==void 0&&i.removedSeq!==Ze&&i.removedSeq<=c||i.localRemovedSeq!==void 0&&i.localRemovedSeq<=r)&&(a=0),N(0<=a&&a<i.cachedLength,771),this.findReconnectionPosition(i,r)+a}resetPendingDeltaToOps(e,n){var r,i;N(!!n,51);const s=(r=this.mergeTree.pendingSegments)===null||r===void 0?void 0:r.dequeue();N(n===s,52);const a=[];for(const o of n.segments.sort((l,c)=>l.ordinal<c.ordinal?-1:1)){const l=o.segmentGroups.dequeue();N(n===l,53);const c=this.findReconnectionPosition(o,n.localSeq);let u;switch(e.type){case nt.ANNOTATE:N(((i=o.propertyManager)===null||i===void 0?void 0:i.hasPendingProperties())===!0,54),(o.removedSeq===void 0||o.localRemovedSeq!==void 0)&&(u=R2(c,c+o.cachedLength,e.props,e.combiningOp));break;case nt.INSERT:N(o.seq===Ze,55);let d=o;typeof e.seg=="object"&&e.seg.props!==void 0&&(d=o.clone(),d.properties=e.seg.props),u=Mx(c,d);break;case nt.REMOVE:o.localRemovedSeq!==void 0&&(u=k2(c,c+o.cachedLength));break;default:throw new Error("Invalid op type")}if(u){const d={segments:[],localSeq:n.localSeq};o.segmentGroups.enqueue(d),this.mergeTree.pendingSegments.enqueue(d),a.push(u)}}return a}applyRemoteOp(e){const n=e.op,r=e.sequencedMessage;switch(this.getOrAddShortClientId(r.clientId),n.type){case nt.INSERT:this.applyInsertOp(e);break;case nt.REMOVE:this.applyRemoveRangeOp(e);break;case nt.ANNOTATE:this.applyAnnotateRangeOp(e);break;case nt.GROUP:{for(const i of n.ops)this.applyRemoteOp({op:i,groupOp:n,sequencedMessage:r});break}}}applyStashedOp(e){let n;switch(e.type){case nt.INSERT:this.applyInsertOp({op:e}),n=this.peekPendingSegmentGroups();break;case nt.REMOVE:this.applyRemoveRangeOp({op:e}),n=this.peekPendingSegmentGroups();break;case nt.ANNOTATE:this.applyAnnotateRangeOp({op:e}),n=this.peekPendingSegmentGroups();break;case nt.GROUP:return e.ops.map(r=>this.applyStashedOp(r));default:pi(e,"unrecognized op type")}return N(!!n,731),n}applyMsg(e,n=!1){var r;if(this.getOrAddShortClientId(e.clientId),e.type===et.Operation){const i={op:e.contents,sequencedMessage:e};((r=i.sequencedMessage)===null||r===void 0?void 0:r.clientId)===this.longClientId||n?this.ackPendingSegment(i):this.applyRemoteOp(i)}this.updateSeqNumbers(e.minimumSequenceNumber,e.sequenceNumber)}updateSeqNumbers(e,n){const r=this.mergeTree.getCollabWindow();N(r.currentSeq<=n,56),r.currentSeq=n,N(e<=n,57),this.updateMinSeq(e)}resolveRemoteClientPosition(e,n,r){const i=this.getOrAddShortClientId(r);return this.mergeTree.resolveRemoteClientPosition(e,n,i)}regeneratePendingOp(e,n){const r=[];if(e.type===nt.GROUP)if(Array.isArray(n)){N(e.ops.length===n.length,58);for(let i=0;i<e.ops.length;i++)r.push(...this.resetPendingDeltaToOps(e.ops[i],n[i]))}else N(e.ops.length===1,59),r.push(...this.resetPendingDeltaToOps(e.ops[0],n));else N(e.type!==nt.GROUP,60),N(!Array.isArray(n),61),r.push(...this.resetPendingDeltaToOps(e,n));return r.length===1?r[0]:P2(...r)}createTextHelper(){return new A8e(this.mergeTree)}summarize(e,n,r,i){var s;const a=e.deltaManager,o=a.minimumSequenceNumber;if(this.updateSeqNumbers(o,a.lastSequenceNumber),N(this.getCollabWindow().minSeq===o,62),((s=this.mergeTree.options)===null||s===void 0?void 0:s.newMergeTreeSnapshotFormat)===!0){N(i===void 0||i.length===0,63);const l=new Oc(this.mergeTree,this.logger,c=>this.getLongClientId(c));return l.extractSync(),l.emit(r,n)}else{const l=new wn(this.mergeTree,this.logger);return l.extractSync(),l.emit(i,r,n)}}async load(e,n,r){return new _8e(e,this,this.mergeTree,this.logger,r).initialize(n)}getStackContext(e,n){return this.mergeTree.getStackContext(e,this.getCollabWindow().clientId,n)}getLocalSequenceNumber(){return this.getCollabWindow().collaborating?Ze:Br}localTransaction(e){for(const n of e.ops){const r={op:n,groupOp:e};switch(n.type){case nt.INSERT:this.applyInsertOp(r);break;case nt.ANNOTATE:this.applyAnnotateRangeOp(r);break;case nt.REMOVE:this.applyRemoveRangeOp(r);break}}}updateConsensusProperty(e,n){const r=e.relativePos1.id,i=this.pendingConsensus.get(r);i&&i.marker.addProperties(e.props,e.combiningOp,n.sequenceNumber),this.mergeTree.addMinSeqListener(n.sequenceNumber,()=>i.callback(i.marker))}updateMinSeq(e){let n;if(this.measureOps&&(n=Ys.start()),this.mergeTree.setMinSeq(e),n){const r=hg(n);this.accumWindowTime+=r,r>this.maxWindowTime&&(this.maxWindowTime=r)}}getContainingSegment(e,n){const r=this.getClientSequenceArgsForMessage(n);return this.mergeTree.getContainingSegment(e,r.referenceSequenceNumber,r.clientId)}getSlideToSegment(e){return this.mergeTree._getSlideToSegment(e)}getPropertiesAtPosition(e){let n;const i=this.getContainingSegment(e).segment;return i&&(n=i.properties),n}getRangeExtentsOfPosition(e){let n,r;const s=this.getContainingSegment(e).segment;return s&&(n=this.getPosition(s),r=n+s.cachedLength),{posStart:n,posAfterEnd:r}}getCurrentSeq(){return this.getCollabWindow().currentSeq}getClientId(){return this.getCollabWindow().clientId}getLength(){return this.mergeTree.length}startOrUpdateCollaboration(e,n=0,r=0){if(e!==void 0)if(this.longClientId===void 0)this.longClientId=e,this.addLongClientId(this.longClientId),this.mergeTree.startCollaboration(this.getShortClientId(this.longClientId),n,r);else{const i=this.longClientId,s=this.clientNameToIds.get(i).data;this.longClientId=e,this.clientNameToIds.put(e,s),this.shortClientIdMap[s]=e}}findTile(e,n,r=!0){const i=this.getClientId();return this.mergeTree.findTile(e,i,n,r)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */var O8e=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const jr="intervalId";var ea;(function(t){t[t.Simple=0]="Simple",t[t.Nest=1]="Nest",t[t.SlideOnRemove=2]="SlideOnRemove",t[t.Transient=4]="Transient"})(ea||(ea={}));function D8e(t,e){return{start:t[0],end:t[1],sequenceNumber:t[2],intervalType:t[3],properties:Object.assign(Object.assign({},t[4]),{[y1]:e})}}function I8e(t){const{start:e,end:n,sequenceNumber:r,intervalType:i,properties:s}=t;return[e,n,r,i,Object.assign(Object.assign({},s),{[y1]:void 0})]}class Xo{constructor(e,n,r,i){this.start=e,this.end=n,this.intervalType=r,this.propertyManager=new Tv,this.properties={},i&&this.addProperties(i)}addPositionChangeListeners(e,n){var r,i,s,a;if(this.callbacks===void 0){this.callbacks={beforePositionChange:e,afterPositionChange:n};const o=(r=(s=this.start).callbacks)!==null&&r!==void 0?r:s.callbacks={},l=(i=(a=this.end).callbacks)!==null&&i!==void 0?i:a.callbacks={};o.beforeSlide=l.beforeSlide=e,o.afterSlide=l.afterSlide=n}}removePositionChangeListeners(){this.callbacks&&(this.callbacks=void 0,this.start.callbacks=void 0,this.end.callbacks=void 0)}serialize(e){const n=this.start.toPosition(),i={end:this.end.toPosition(),intervalType:this.intervalType,sequenceNumber:e.getCurrentSeq(),start:n};return this.properties&&(i.properties=this.properties),i}clone(){return new Xo(this.start,this.end,this.intervalType,this.properties)}compare(e){const n=this.compareStart(e);if(n===0){const r=this.compareEnd(e);if(r===0){const i=this.getIntervalId();if(i){const s=e.getIntervalId();return s?i>s?1:i<s?-1:0:0}return 0}else return r}else return n}compareStart(e){return this.start.compare(e.start)}compareEnd(e){return this.end.compare(e.end)}overlaps(e){return this.start.compare(e.end)<=0&&this.end.compare(e.start)>=0}getIntervalId(){var e;const n=(e=this.properties)===null||e===void 0?void 0:e[jr];if(n!==void 0)return`${n}`}union(e){return new Xo(this.start.min(e.start),this.end.max(e.end),this.intervalType)}addProperties(e,n=!1,r,i){return this.initializeProperties(),this.propertyManager.addProperties(this.properties,e,i,r,n)}overlapsPos(e,n){const r=this.start.toPosition();return this.start.toPosition()>e&&r<n}modify(e,n,r,i){const s=c=>{let u=c;return i===void 0&&(u&=~Ve.SlideOnRemove,u|=Ve.StayOnRemove),u};let a=this.start;n!==void 0&&(a=Rv(this.start.getClient(),n,s(this.start.refType),i),a.addProperties(this.start.properties));let o=this.end;r!==void 0&&(o=Rv(this.end.getClient(),r,s(this.end.refType),i),o.addProperties(this.end.properties)),a.pairedRef=o,o.pairedRef=a;const l=new Xo(a,o,this.intervalType);return this.properties&&(l.initializeProperties(),this.propertyManager.copyTo(this.properties,l.properties,l.propertyManager)),l}initializeProperties(){this.propertyManager||(this.propertyManager=new Tv),this.properties||(this.properties=di())}}function _2(t,e,n,r){if(e.segment)return t.createLocalReferencePosition(e.segment,e.offset,n,void 0);if(!r&&!fn(n,Ve.Transient))throw new Tt("Non-transient references need segment");return new Gc(t,void 0,0,n)}function Rv(t,e,n,r){let i;return r?(N((n&Ve.SlideOnRemove)!==0,757),i=t.getContainingSegment(e,r),i=t.getSlideToSegment(i)):(N((n&Ve.SlideOnRemove)===0,758),i=t.getContainingSegment(e)),_2(t,i,n,r)}function M8e(t,e,n,r,i,s){let a=Ve.RangeBegin,o=Ve.RangeEnd;i===ea.Transient?(a=Ve.Transient,o=Ve.Transient):(i===ea.Nest&&(a=Ve.NestBegin,o=Ve.NestEnd),s?(a|=Ve.SlideOnRemove,o|=Ve.SlideOnRemove):(a|=Ve.StayOnRemove,o|=Ve.StayOnRemove));const l=Rv(r,e,a,s),c=Rv(r,n,o,s);l.pairedRef=c,c.pairedRef=l;const u={[y1]:[t]};return l.addProperties(u),c.addProperties(u),new Xo(l,c,i,u)}class S1{constructor(e,n,r,i){this.client=e,this.label=n,this.helpers=r,this.onPositionChange=i,this.intervalTree=new r8e,this.intervalIdMap=new Map,this.endIntervalTree=new Dp(r.compareEnds)}addConflictResolver(e){this.conflictResolver=e,this.endConflictResolver=(n,r)=>{const i=e(n,r);return{data:i,key:i}}}map(e){this.intervalTree.map(e)}createLegacyId(e,n){return`${S1.legacyIdPrefix}${e}-${n}`}ensureSerializedId(e){var n;let r=(n=e.properties)===null||n===void 0?void 0:n[jr];if(r===void 0){r=this.createLegacyId(e.start,e.end);const i={[jr]:r};e.properties=g7(e.properties,i)}return Object.defineProperty(e.properties,jr,{configurable:!1,enumerable:!0,writable:!1}),r}mapUntil(e){this.intervalTree.mapUntil(e)}gatherIterationResults(e,n,r,i){if(!this.intervalTree.intervals.isEmpty())if(r===void 0&&i===void 0)n?this.intervalTree.map(s=>{e.push(s)}):this.intervalTree.mapBackward(s=>{e.push(s)});else{const s=this.helpers.create("transient",r,i,this.client,ea.Transient);if(r===void 0)n?this.intervalTree.map(a=>{s.compareEnd(a)===0&&e.push(a)}):this.intervalTree.mapBackward(a=>{s.compareEnd(a)===0&&e.push(a)});else{const a=i===void 0?u=>s.compareStart(u.key):u=>s.compare(u.key),o=u=>u<=0,l=u=>u>=0,c=u=>{e.push(u.key)};n?this.intervalTree.intervals.walkExactMatchesForward(a,c,o,l):this.intervalTree.intervals.walkExactMatchesBackward(a,c,o,l)}}}findOverlappingIntervals(e,n){if(n<e||this.intervalTree.intervals.isEmpty())return[];const r=this.helpers.create("transient",e,n,this.client,ea.Transient);return this.intervalTree.match(r).map(s=>s.key)}previousInterval(e){const n=this.helpers.create("transient",e,e,this.client,ea.Transient),r=this.endIntervalTree.floor(n);if(r)return r.data}nextInterval(e){const n=this.helpers.create("transient",e,e,this.client,ea.Transient),r=this.endIntervalTree.ceil(n);if(r)return r.data}removeInterval(e,n){const r=this.helpers.create("transient",e,n,this.client,ea.Transient);return this.intervalTree.remove(r),this.endIntervalTree.remove(r),r}removeIntervalFromIndex(e){this.intervalTree.removeExisting(e),this.endIntervalTree.remove(e);const n=e.getIntervalId();N(n!==void 0,785),this.intervalIdMap.delete(n)}removeExistingInterval(e){this.removeIntervalFromIndex(e),this.removeIntervalListeners(e)}createInterval(e,n,r,i){return this.helpers.create(this.label,e,n,this.client,r,i)}addInterval(e,n,r,i,s){const a=this.createInterval(e,n,r,s);return a&&(a.properties||(a.properties=di()),i&&a.addProperties(i),a.properties[jr]===void 0&&(a.properties[jr]=Cn()),this.add(a)),a}addIntervalToIndex(e){const n=e.getIntervalId();N(n!==void 0,704),Object.defineProperty(e.properties,jr,{configurable:!1,enumerable:!0,writable:!1}),this.intervalTree.put(e,this.conflictResolver),this.endIntervalTree.put(e,e,this.endConflictResolver),this.intervalIdMap.set(n,e)}add(e){this.addIntervalToIndex(e),this.addIntervalListeners(e)}getIntervalById(e){return this.intervalIdMap.get(e)}changeInterval(e,n,r,i){const s=e.modify(this.label,n,r,i);return s&&(this.removeExistingInterval(e),this.add(s)),s}serialize(){const e=this.client,n=this.intervalTree.intervals.keys();return{label:this.label,intervals:n.map(r=>I8e(r.serialize(e))),version:2}}addIntervalListeners(e){e instanceof Xo&&e.addPositionChangeListeners(()=>this.removeIntervalFromIndex(e),()=>{var n;this.addIntervalToIndex(e),(n=this.onPositionChange)===null||n===void 0||n.call(this,e)})}removeIntervalListeners(e){e instanceof Xo&&e.removePositionChangeListeners()}}S1.legacyIdPrefix="legacy";const N8e=(t,e)=>t.end.compare(e.end);class F8e{load(e,n=[]){const r={compareEnds:N8e,create:M8e};return new L8e(r,!0,e,n)}store(e){return e.serializeInternal()}}class Qo{get name(){return Qo.Name}get factory(){return Qo._factory}get ops(){return Qo._ops}}Qo.Name="sharedStringIntervalCollection";Qo._factory=new F8e;Qo._ops=$8e();function $8e(){const t=(e,n,r)=>{const{localSeq:i}=r,s=e.rebaseLocalInterval(n.opName,n.value,i);return{rebasedOp:Object.assign(Object.assign({},n),{value:s}),rebasedLocalOpMetadata:r}};return new Map([["add",{process:(e,n,r,i)=>{e.ackAdd(n,r,i)},rebase:t}],["delete",{process:(e,n,r,i)=>{e.ackDelete(n,r,i)},rebase:(e,n,r)=>({rebasedOp:n,rebasedLocalOpMetadata:r})}],["change",{process:(e,n,r,i)=>{e.ackChange(n,r,i)},rebase:t}]])}class Vh{constructor(e,n=!0,r,i){this.results=[],this.index=0,e.gatherIterationResults(this.results,n,r,i)}next(){let e,n=!0;return this.index<this.results.length&&(e=this.results[this.index++],n=!1),{value:e,done:n}}}class L8e extends An{constructor(e,n,r,i){super(),this.helpers=e,this.requiresClient=n,this.emitter=r,this.pendingChangesStart=new Map,this.pendingChangesEnd=new Map,Array.isArray(i)?this.savedSerializedIntervals=i:this.savedSerializedIntervals=i.intervals.map(s=>D8e(s,i.label))}get attached(){return!!this.localCollection}attachGraph(e,n){if(this.attached)throw new rt("Only supports one Sequence attach");if(e===void 0&&this.requiresClient)throw new rt("Client required for this collection");if(this.client=e,this.localCollection=new S1(e,n,this.helpers,r=>this.emit("changeInterval",r,!0,void 0)),this.savedSerializedIntervals)for(const r of this.savedSerializedIntervals)this.localCollection.ensureSerializedId(r),this.localCollection.addInterval(r.start,r.end,r.intervalType,r.properties);this.savedSerializedIntervals=void 0}getNextLocalSeq(){return++this.client.getCollabWindow().localSeq}getIntervalById(e){if(!this.attached)throw new rt("attach must be called before accessing intervals");return this.localCollection.getIntervalById(e)}add(e,n,r,i){var s,a;if(!this.attached)throw new rt("attach must be called prior to adding intervals");if(r&ea.Transient)throw new rt("Can not add transient intervals");const o=this.localCollection.addInterval(e,n,r,i);if(o){const l={end:n,intervalType:r,properties:o.properties,sequenceNumber:(a=(s=this.client)===null||s===void 0?void 0:s.getCurrentSeq())!==null&&a!==void 0?a:0,start:e};this.emitter.emit("add",void 0,l,{localSeq:this.getNextLocalSeq()})}return this.emit("addInterval",o,!0,void 0),o}deleteExistingInterval(e,n,r){this.localCollection.removeExistingInterval(e),e&&(n?this.emitter.emit("delete",void 0,e.serialize(this.client),{localSeq:this.getNextLocalSeq()}):this.onDeserialize&&this.onDeserialize(e)),this.emit("deleteInterval",e,n,r)}removeIntervalById(e){const n=this.localCollection.getIntervalById(e);return n&&this.deleteExistingInterval(n,!0,void 0),n}changeProperties(e,n){if(!this.attached)throw new rt("Attach must be called before accessing intervals");if(typeof e!="string")throw new rt("Change API requires an ID that is a string");if(!n)throw new rt("changeProperties should be called with a property set");const r=this.getIntervalById(e);if(r){const i=r.addProperties(n,!0,Ze),s=r.serialize(this.client);s.start=void 0,s.end=void 0,s.properties=n,s.properties[jr]=r.getIntervalId(),this.emitter.emit("change",void 0,s,{localSeq:this.getNextLocalSeq()}),this.emit("propertyChanged",r,i)}this.emit("changeInterval",r,!0,void 0)}change(e,n,r){if(!this.attached)throw new rt("Attach must be called before accessing intervals");if(typeof e!="string")throw new rt("Change API requires an ID that is a string");const i=this.getIntervalById(e);if(i){const s=this.localCollection.changeInterval(i,n,r),a=i.serialize(this.client);return a.start=n,a.end=r,a.properties={[jr]:i.getIntervalId()},this.emitter.emit("change",void 0,a,{localSeq:this.getNextLocalSeq()}),this.addPendingChange(e,a),this.emit("changeInterval",s,!0,void 0),s}}addPendingChange(e,n){n.start!==void 0&&this.addPendingChangeHelper(e,this.pendingChangesStart,n),n.end!==void 0&&this.addPendingChangeHelper(e,this.pendingChangesEnd,n)}addPendingChangeHelper(e,n,r){let i=n.get(e);i||(i=[],n.set(e,i)),i.push(r)}removePendingChange(e){var n;const r=(n=e.properties)===null||n===void 0?void 0:n[jr];e.start!==void 0&&this.removePendingChangeHelper(r,this.pendingChangesStart,e),e.end!==void 0&&this.removePendingChangeHelper(r,this.pendingChangesEnd,e)}removePendingChangeHelper(e,n,r){const i=n.get(e);if(i){const s=i.shift();if(i.length===0&&n.delete(e),(s==null?void 0:s.start)!==r.start||(s==null?void 0:s.end)!==r.end)throw new rt("Mismatch in pending changes")}}hasPendingChangeStart(e){const n=this.pendingChangesStart.get(e);return n&&n.length!==0}hasPendingChangeEnd(e){const n=this.pendingChangesEnd.get(e);return n&&n.length!==0}changeInterval(e,n,r){return this.ackChange(e,n,r)}ackChange(e,n,r){var i,s,a,o;if(!this.attached)throw new rt("Attach must be called before accessing intervals");let l;if(n){this.removePendingChange(e);const c=(i=e.properties)===null||i===void 0?void 0:i[jr];l=this.getIntervalById(c),l&&((s=l.propertyManager)===null||s===void 0||s.ackPendingProperties({type:nt.ANNOTATE,props:(a=e.properties)!==null&&a!==void 0?a:{}}),this.ackInterval(l,r))}else{const c=e.properties,u=jr,d=c[u],h=O8e(c,[u+""]);if(l=this.getIntervalById(d),l){let p,f;this.hasPendingChangeStart(d)||(p=e.start),this.hasPendingChangeEnd(d)||(f=e.end),(p!==void 0||f!==void 0)&&(l=(o=this.localCollection.changeInterval(l,p,f,r))!==null&&o!==void 0?o:l);const m=l.addProperties(h,!0,r.sequenceNumber);this.onDeserialize&&this.onDeserialize(l),this.emit("propertyChanged",l,m)}}l&&this.emit("changeInterval",l,n,r)}addConflictResolver(e){if(!this.attached)throw new rt("attachSequence must be called");this.localCollection.addConflictResolver(e)}attachDeserializer(e){e&&(this.onDeserialize=e,this.localCollection.map(n=>{e(n)}))}rebaseLocalInterval(e,n,r){var i,s;if(!this.attached)throw new rt("attachSequence must be called");const{start:a,end:o,intervalType:l,properties:c,sequenceNumber:u}=n,d=a===void 0?void 0:this.client.rebasePosition(a,u,r),h=o===void 0?void 0:this.client.rebasePosition(o,u,r),p=c==null?void 0:c[jr],f={start:d,end:h,intervalType:l,sequenceNumber:(s=(i=this.client)===null||i===void 0?void 0:i.getCurrentSeq())!==null&&s!==void 0?s:0,properties:c};return e==="change"&&(this.hasPendingChangeStart(p)||this.hasPendingChangeEnd(p))&&(this.removePendingChange(n),this.addPendingChange(p,f)),f}getSlideToSegment(e){const n={segment:e.segment,offset:e.offset},r=this.client.getSlideToSegment(n);return n.segment===r.segment&&n.offset===r.offset?void 0:r}setSlideOnRemove(e){let n=e.refType;n=n&~Ve.StayOnRemove,n=n|Ve.SlideOnRemove,e.refType=n}ackInterval(e,n){if(!(e instanceof Xo)||!fn(e.start,Ve.StayOnRemove)&&!fn(e.end,Ve.StayOnRemove))return;const r=this.getSlideToSegment(e.start),i=this.getSlideToSegment(e.end),s=e.properties[jr],a=this.hasPendingChangeStart(s),o=this.hasPendingChangeEnd(s);a||this.setSlideOnRemove(e.start),o||this.setSlideOnRemove(e.end);const l=r!==void 0&&!a,c=i!==void 0&&!o;if(l||c){if(this.localCollection.removeExistingInterval(e),l){const u=e.start.properties;this.client.removeLocalReferencePosition(e.start),e.start=_2(this.client,r,e.start.refType,n),u&&e.start.addProperties(u)}if(c){const u=e.end.properties;this.client.removeLocalReferencePosition(e.end),e.end=_2(this.client,i,e.end.refType,n),u&&e.end.addProperties(u)}this.localCollection.add(e)}}addInternal(e,n,r){return this.ackAdd(e,n,r)}ackAdd(e,n,r){var i;if(n){const a=(i=e.properties)===null||i===void 0?void 0:i[jr],o=this.getIntervalById(a);o&&this.ackInterval(o,r);return}if(!this.attached)throw new rt("attachSequence must be called");this.localCollection.ensureSerializedId(e);const s=this.localCollection.addInterval(e.start,e.end,e.intervalType,e.properties,r);return s&&this.onDeserialize&&this.onDeserialize(s),this.emit("addInterval",s,n,r),s}deleteInterval(e,n,r){return this.ackDelete(e,n,r)}ackDelete(e,n,r){if(n)return;if(!this.attached)throw new rt("attach must be called prior to deleting intervals");const i=this.localCollection.ensureSerializedId(e),s=this.localCollection.getIntervalById(i);s&&this.deleteExistingInterval(s,n,r)}serializeInternal(){if(!this.attached)throw new rt("attachSequence must be called");return this.localCollection.serialize()}[Symbol.iterator](){return new Vh(this)}CreateForwardIteratorWithStartPosition(e){return new Vh(this,!0,e)}CreateBackwardIteratorWithStartPosition(e){return new Vh(this,!1,e)}CreateForwardIteratorWithEndPosition(e){return new Vh(this,!0,void 0,e)}CreateBackwardIteratorWithEndPosition(e){return new Vh(this,!1,void 0,e)}gatherIterationResults(e,n,r,i){this.attached&&this.localCollection.gatherIterationResults(e,n,r,i)}findOverlappingIntervals(e,n){if(!this.attached)throw new rt("attachSequence must be called");return this.localCollection.findOverlappingIntervals(e,n)}map(e){if(!this.attached)throw new rt("attachSequence must be called");this.localCollection.map(e)}previousInterval(e){if(!this.attached)throw new rt("attachSequence must be called");return this.localCollection.previousInterval(e)}nextInterval(e){if(!this.attached)throw new rt("attachSequence must be called");return this.localCollection.nextInterval(e)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */function B8e(t,e,n){const r=t.makeSerialized(e,n);return{type:r.type,value:r.value&&JSON.parse(r.value)}}class hI{constructor(e,n){this.value=e,this.valueType=n}get type(){return this.valueType.name}makeSerialized(e,n){const r=this.valueType.factory.store(this.value),i=i7(r,e,n);return{type:this.type,value:i}}getOpHandler(e){const n=this.valueType.ops.get(e);if(!n)throw new Error("Unknown type message");return n}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class j8e{constructor(e,n,r,i,s=new An){this.serializer=e,this.handle=n,this.submitMessage=r,this.type=i,this.eventEmitter=s,this.messageHandlers=new Map,this.data=new Map,this.messageHandlers=this.getMessageHandlers()}get size(){return this.data.size}keys(){return this.data.keys()}entries(){const e=this.data.entries();return{next(){const r=e.next();return r.done?{value:void 0,done:!0}:{value:[r.value[0],r.value[1].value],done:!1}},[Symbol.iterator](){return this}}}values(){const e=this.data.values();return{next(){const r=e.next();return r.done?{value:void 0,done:!0}:{value:r.value.value,done:!1}},[Symbol.iterator](){return this}}}[Symbol.iterator](){return this.entries()}forEach(e){this.data.forEach((n,r,i)=>{e(n.value,r,i)})}get(e){var n;return((n=this.data.get(e))!==null&&n!==void 0?n:this.createCore(e,!0)).value}has(e){return this.data.has(e)}getSerializedStorage(e){const n={};return this.data.forEach((r,i)=>{n[i]=r.makeSerialized(e,this.handle)}),n}getSerializableStorage(e){const n={};return this.data.forEach((r,i)=>{n[i]=B8e(r,e,this.handle)}),n}serialize(e){return JSON.stringify(this.getSerializableStorage(e))}populateFromSerializable(e){for(const[n,r]of Object.entries(e)){if(r.type===nn[nn.Plain]||r.type===nn[nn.Shared])continue;const s={key:n.startsWith("intervalCollections/")?n.substring(20):n,value:this.makeLocal(n,r)};this.data.set(s.key,s.value)}}populate(e){this.populateFromSerializable(JSON.parse(e))}tryResubmitMessage(e,n){const r=e.type,i=this.messageHandlers.get(r);return i!==void 0?(i.resubmit(e,n),!0):!1}tryGetStashedOpLocalMetadata(e){const n=e.type;if(this.messageHandlers.has(n))return this.messageHandlers.get(n).getStashedOpLocalMetadata(e);throw new Error("no apply stashed op handler")}tryProcessMessage(e,n,r,i){const s=this.messageHandlers.get(e.type);return s!==void 0?(s.process(e,n,r,i),!0):!1}createCore(e,n){const r=new hI(this.type.factory.load(this.makeMapValueOpEmitter(e),void 0),this.type),i=this.data.get(e);this.data.set(e,r);const s={key:e,previousValue:i};return this.eventEmitter.emit("create",s,n,this.eventEmitter),r}makeLocal(e,n){N(n.type!==nn[nn.Plain]&&n.type!==nn[nn.Shared],737),n.value=wv(n.value,this.serializer);const r=this.type.factory.load(this.makeMapValueOpEmitter(e),n.value);return new hI(r,this.type)}getMessageHandlers(){const e=new Map;return e.set("act",{process:(n,r,i,s)=>{var a;const o=(a=this.data.get(n.key))!==null&&a!==void 0?a:this.createCore(n.key,r),l=o.getOpHandler(n.value.opName),c=o.value,u=wv(n.value.value,this.serializer);l.process(c,u,r,i,s);const d={key:n.key,previousValue:c};this.eventEmitter.emit("valueChanged",d,r,i,this.eventEmitter)},submit:(n,r)=>{this.submitMessage(n,r)},resubmit:(n,r)=>{const i=this.data.get(n.key),s=i.getOpHandler(n.value.opName),{rebasedOp:a,rebasedLocalOpMetadata:o}=s.rebase(i.value,n.value,r);this.submitMessage(Object.assign(Object.assign({},n),{value:a}),o)},getStashedOpLocalMetadata:n=>{N(!1,22)}}),e}makeMapValueOpEmitter(e){return{emit:(r,i,s,a)=>{const o=s7(s,this.serializer,this.handle),l={key:e,type:"act",value:{opName:r,value:o}};this.submitMessage(l,a);const c={key:e,previousValue:i};this.eventEmitter.emit("valueChanged",c,!0,null,this.eventEmitter)}}}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class E7{constructor(e,n){this.deltaArgs=e,this.mergeTreeClient=n,N(e.deltaSegments.length>0,728),this.isEmpty=!1,this.deltaOperation=e.operation,this.sortedRanges=new Nx(()=>{const r=new u8e;return this.deltaArgs.deltaSegments.forEach(i=>{const s={operation:this.deltaArgs.operation,position:this.mergeTreeClient.getPosition(i.segment),propertyDeltas:i.propertyDeltas,segment:i.segment};r.addOrUpdate(s)}),r}),this.pFirst=new Nx(()=>this.sortedRanges.value.items[0]),this.pLast=new Nx(()=>this.sortedRanges.value.items[this.sortedRanges.value.size-1])}get ranges(){return this.sortedRanges.value.items}get clientId(){return this.mergeTreeClient.longClientId}get first(){return this.pFirst.value}get last(){return this.pLast.value}}class q8e extends E7{constructor(e,n,r){super(n,r),this.opArgs=e,this.isLocal=e.sequencedMessage===void 0}}class z8e extends E7{constructor(e,n,r){super(n,r),this.opArgs=e}}class Nx{constructor(e){this.valueGenerator=e,this.pEvaluated=!1}get evaluated(){return this.pEvaluated}get value(){return this.pEvaluated||(this.pEvaluated=!0,this.pValue=this.valueGenerator()),this.pValue}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */const Fx="header",fI="content";class eP extends Kk{constructor(e,n,r,i){super(n,e,r,"fluid_sequence_"),this.dataStoreRuntime=e,this.id=n,this.segmentFromSpec=i,this.loadedDeferred=new sn,this.loadedDeferredOutgoingOps=[],this.deferIncomingOps=!0,this.loadedDeferredIncomingOps=[],this.messagesSinceMSNChange=[],this.loadedDeferred.promise.catch(s=>{this.logger.sendErrorEvent({eventName:"SequenceLoadFailed"},s)}),this.client=new Zk(i,ot.create(this.logger,"SharedSegmentSequence.MergeTreeClient"),e.options),super.on("newListener",s=>{switch(s){case"sequenceDelta":this.client.mergeTreeDeltaCallback||(this.client.mergeTreeDeltaCallback=(a,o)=>{this.emit("sequenceDelta",new q8e(a,o,this.client),this)});break;case"maintenance":this.client.mergeTreeMaintenanceCallback||(this.client.mergeTreeMaintenanceCallback=(a,o)=>{this.emit("maintenance",new z8e(o,a,this.client),this)});break}}),super.on("removeListener",s=>{switch(s){case"sequenceDelta":super.listenerCount(s)===0&&(this.client.mergeTreeDeltaCallback=void 0);break;case"maintenance":super.listenerCount(s)===0&&(this.client.mergeTreeMaintenanceCallback=void 0);break}}),this.intervalCollections=new j8e(this.serializer,this.handle,(s,a)=>this.submitLocalMessage(s,a),new Qo)}get loaded(){return this.loadedDeferred.promise}static createOpsFromDelta(e){var n,r;const i=[];for(const s of e.ranges)switch(e.deltaOperation){case nt.ANNOTATE:{const a=i[i.length-1],o={};for(const l of Object.keys(s.propertyDeltas))o[l]=(r=(n=s.segment.properties)===null||n===void 0?void 0:n[l])!==null&&r!==void 0?r:null;a&&a.pos2===s.position&&gm(a.props,o)?a.pos2+=s.segment.cachedLength:i.push(R2(s.position,s.position+s.segment.cachedLength,o,void 0));break}case nt.INSERT:i.push(x7(s.position,s.segment.clone().toJSONObject()));break;case nt.REMOVE:{const a=i[i.length-1];(a==null?void 0:a.pos1)===s.position?a.pos2+=s.segment.cachedLength:i.push(k2(s.position,s.position+s.segment.cachedLength));break}}return i}removeRange(e,n){const r=this.client.removeRangeLocal(e,n);return r&&this.submitSequenceMessage(r),r}groupOperation(e){this.client.localTransaction(e),this.submitSequenceMessage(e)}getContainingSegment(e){return this.client.getContainingSegment(e)}getLength(){return this.client.getLength()}getPosition(e){return this.client.getPosition(e)}annotateRange(e,n,r,i){const s=this.client.annotateRangeLocal(e,n,r,i);s&&this.submitSequenceMessage(s)}getPropertiesAtPosition(e){return this.client.getPropertiesAtPosition(e)}getRangeExtentsOfPosition(e){return this.client.getRangeExtentsOfPosition(e)}createPositionReference(e,n,r){const i=new Gc(this.client,e,n,r);return r!==Ve.Transient&&this.addLocalReference(i),i}createLocalReferencePosition(e,n,r,i){return this.client.createLocalReferencePosition(e,n,r,i)}localRefToPos(e){return this.client.localReferencePositionToPosition(e)}localReferencePositionToPosition(e){return this.client.localReferencePositionToPosition(e)}resolveRemoteClientPosition(e,n,r){return this.client.resolveRemoteClientPosition(e,n,r)}submitSequenceMessage(e){if(!this.isAttached())return;const n=s7(e,this.serializer,this.handle),r=this.client.peekPendingSegmentGroups(e.type===nt.GROUP?e.ops.length:1);this.loadedDeferred.isCompleted?this.submitLocalMessage(n,r):this.loadedDeferredOutgoingOps.push([n,r])}addLocalReference(e){return this.client.addLocalReference(e)}removeLocalReference(e){return this.client.removeLocalReferencePosition(e)}removeLocalReferencePosition(e){return this.client.removeLocalReferencePosition(e)}posFromRelativePos(e){return this.client.posFromRelativePos(e)}walkSegments(e,n,r,i,s=!1){return this.client.walkSegments(e,n,r,i,s)}getStackContext(e,n){return this.client.getStackContext(e,n)}getCurrentSeq(){return this.client.getCurrentSeq()}insertAtReferencePosition(e,n){const r=this.client.insertAtReferencePositionLocal(e,n);r&&this.submitSequenceMessage(r)}async waitIntervalCollection(e){return this.intervalCollections.get(e)}getIntervalCollection(e){return this.intervalCollections.get(e)}getIntervalCollectionLabels(){return this.intervalCollections.keys()}summarizeCore(e,n){const r=new mi;return this.intervalCollections.size>0&&r.addBlob(Fx,this.intervalCollections.serialize(e)),r.addWithStats(fI,this.summarizeMergeTree(e)),r.getSummaryTree()}processGCDataCore(e){this.intervalCollections.size>0&&this.intervalCollections.serialize(e),this.client.serializeGCData(this.handle,e)}replaceRange(e,n,r){const i=Math.max(e,n),s=this.client.insertSegmentLocal(i,r);if(s)if(e<n){const a=this.client.removeRangeLocal(e,n);this.submitSequenceMessage(P2(s,a))}else this.submitSequenceMessage(s)}onConnect(){this.client.startOrUpdateCollaboration(this.runtime.clientId)}onDisconnect(){}reSubmitCore(e,n){this.intervalCollections.tryResubmitMessage(e,n)||this.submitSequenceMessage(this.client.regeneratePendingOp(e,n))}async loadCore(e){var n;if(await e.contains(Fx)){const r=await e.readBlob(Fx),i=al(r,"utf8");this.intervalCollections.populate(i)}try{const{catchupOpsP:r}=await this.client.load(this.runtime,new i6e(e,fI),this.serializer),i=r.then(s=>{s.forEach(a=>{const o=this.client.getCollabWindow();if(a.minimumSequenceNumber<o.minSeq||a.referenceSequenceNumber<o.minSeq||a.sequenceNumber<=o.minSeq||a.sequenceNumber<=o.currentSeq)throw new Error(`Invalid catchup operations in snapshot: ${JSON.stringify({op:{seq:a.sequenceNumber,minSeq:a.minimumSequenceNumber,refSeq:a.referenceSequenceNumber},collabWindow:{seq:o.currentSeq,minSeq:o.minSeq}})}`);this.processMergeTreeMsg(a)}),this.loadFinished()}).catch(s=>{this.loadFinished(s)});((n=this.dataStoreRuntime.options)===null||n===void 0?void 0:n.sequenceInitializeFromHeaderOnly)!==!0&&await i}catch(r){this.loadFinished(r)}}processCore(e,n,r){this.deferIncomingOps?(N(!n,114),this.loadedDeferredIncomingOps.push(e)):(N(e.type===et.Operation,115),this.intervalCollections.tryProcessMessage(e.contents,n,e,r)||this.processMergeTreeMsg(e,n))}didAttach(){var e;this.isAttached()&&this.client.startOrUpdateCollaboration((e=this.runtime.clientId)!==null&&e!==void 0?e:"attached")}initializeLocalCore(){super.initializeLocalCore(),this.loadFinished()}applyStashedOp(e){return this.client.applyStashedOp(e)}summarizeMergeTree(e){N(this.loadedDeferred.isCompleted,116);const n=this.runtime.deltaManager.minimumSequenceNumber;return this.processMinSequenceNumberChanged(n),this.messagesSinceMSNChange.forEach(r=>{r.minimumSequenceNumber=n}),this.client.summarize(this.runtime,this.handle,e,this.messagesSinceMSNChange)}processMergeTreeMsg(e,n){var r,i;const s=wv(e,this.serializer),a=[];function o(u){a.push(...eP.createOpsFromDelta(u))}const l=s.referenceSequenceNumber!==s.sequenceNumber-1;let c=s;((r=this.runtime.options)===null||r===void 0?void 0:r.newMergeTreeSnapshotFormat)!==!0&&l&&this.on("sequenceDelta",o),this.client.applyMsg(s,n),((i=this.runtime.options)===null||i===void 0?void 0:i.newMergeTreeSnapshotFormat)!==!0&&(l&&(this.removeListener("sequenceDelta",o),c=Object.assign(Object.assign({},s),{referenceSequenceNumber:c.sequenceNumber-1,contents:a.length!==1?P2(...a):a[0]})),this.messagesSinceMSNChange.push(c),this.messagesSinceMSNChange.length>20&&this.messagesSinceMSNChange[20].sequenceNumber<s.minimumSequenceNumber&&this.processMinSequenceNumberChanged(s.minimumSequenceNumber))}processMinSequenceNumberChanged(e){let n=0;for(;n<this.messagesSinceMSNChange.length&&!(this.messagesSinceMSNChange[n].sequenceNumber>e);n++);n!==0&&(this.messagesSinceMSNChange=this.messagesSinceMSNChange.slice(n))}loadFinished(e){if(!this.loadedDeferred.isCompleted){if(this.initializeIntervalCollections(),e)throw this.loadedDeferred.reject(e),e;this.deferIncomingOps=!1;for(const n of this.loadedDeferredIncomingOps)this.processCore(n,!1,void 0);this.loadedDeferredIncomingOps.length=0,this.loadedDeferred.resolve();for(const[n,r]of this.loadedDeferredOutgoingOps)this.reSubmitCore(n,r);this.loadedDeferredOutgoingOps.length=0}}initializeIntervalCollections(){this.intervalCollections.eventEmitter.on("create",({key:e,previousValue:n},r)=>{const i=this.intervalCollections.get(e);i.attached||i.attachGraph(this.client,e),N(n===void 0,705),this.emit("createIntervalCollection",e,r,this)});for(const e of this.intervalCollections.keys())this.intervalCollections.get(e).attachGraph(this.client,e)}}/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 *
 * THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY
 */const H8e="1.3.6";/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class eo{static segmentFromSpec(e){const n=Jn.fromJSONObject(e);if(n)return n;const r=gr.fromJSONObject(e);if(r)return r}get type(){return eo.Type}get attributes(){return eo.Attributes}async load(e,n,r,i){const s=new A2(e,n,i);return await s.load(r),s}create(e,n){const r=new A2(e,n,this.attributes);return r.initializeLocal(),r}}eo.Type="https://graph.microsoft.com/types/mergeTree";eo.Attributes={type:eo.Type,snapshotFormatVersion:"0.1",packageVersion:H8e};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class A2 extends eP{constructor(e,n,r){super(e,n,r,eo.segmentFromSpec),this.id=n,this.mergeTreeTextHelper=this.client.createTextHelper()}static create(e,n){return e.createChannel(n,eo.Type)}static getFactory(){return new eo}get ISharedString(){return this}insertMarkerRelative(e,n,r){const i=new gr(n);r&&i.addProperties(r);const s=this.posFromRelativePos(e),a=this.client.insertSegmentLocal(s,i);a&&this.submitSequenceMessage(a)}insertMarker(e,n,r){const i=new gr(n);r&&i.addProperties(r);const s=this.client.insertSegmentLocal(e,i);return s&&this.submitSequenceMessage(s),s}insertTextRelative(e,n,r){const i=new Jn(n);r&&i.addProperties(r);const s=this.posFromRelativePos(e),a=this.client.insertSegmentLocal(s,i);a&&this.submitSequenceMessage(a)}insertText(e,n,r){const i=new Jn(n);r&&i.addProperties(r);const s=this.client.insertSegmentLocal(e,i);s&&this.submitSequenceMessage(s)}replaceText(e,n,r,i){this.replaceRange(e,n,Jn.make(r,i))}removeText(e,n){return this.removeRange(e,n)}annotateMarkerNotifyConsensus(e,n,r){const i=this.client.annotateMarkerNotifyConsensus(e,n,r);i&&this.submitSequenceMessage(i)}annotateMarker(e,n,r){const i=this.client.annotateMarker(e,n,r);i&&this.submitSequenceMessage(i)}findTile(e,n,r=!0){return this.client.findTile(e,n,r)}getTextAndMarkers(e){const n=this.client.getCollabWindow();return this.mergeTreeTextHelper.getTextAndMarkers(n.currentSeq,n.clientId,e)}getText(e,n){const r=this.client.getCollabWindow();return this.mergeTreeTextHelper.getText(r.currentSeq,r.clientId,"",e,n)}getTextWithPlaceholders(){const e=this.client.getCollabWindow();return this.mergeTreeTextHelper.getText(e.currentSeq,e.clientId," ")}getTextRangeWithPlaceholders(e,n){const r=this.client.getCollabWindow();return this.mergeTreeTextHelper.getText(r.currentSeq,r.clientId," ",e,n)}getTextRangeWithMarkers(e,n){const r=this.client.getCollabWindow();return this.mergeTreeTextHelper.getText(r.currentSeq,r.clientId,"*",e,n)}getMarkerFromId(e){return this.client.getMarkerFromId(e)}}const U8e=t=>{const e=t.sharedStringHelper,n=P.useRef(null),r=P.useRef(0),i=P.useRef(0),[s,a]=P.useState(e.getText()),o=u=>{if(!n.current)throw new Error("Handling change without current textarea ref?");const d=n.current,h=d.value,p=d.selectionStart,f=s,m=r.current,g=i.current;if(c(),a(h),p-m>0){const y=h.substring(m,p);g-m>0?e.replaceText(y,m,g):e.insertText(y,m)}else{const y=f.length-h.length;e.removeText(p,p+y)}},l=(u,d)=>{if(!n.current)throw new Error("Trying to set selection without current textarea ref?");const h=n.current;h.selectionStart=u,h.selectionEnd=d},c=()=>{if(!n.current)throw new Error("Trying to remember selection without current textarea ref?");const u=n.current,d=u.selectionStart,h=u.selectionEnd;r.current=d,i.current=h};return P.useEffect(()=>{const u=d=>{const h=e.getText();if(a(h),!d.isLocal){const p=d.transformPosition(r.current),f=d.transformPosition(i.current);l(p,f),c()}};return e.on("textChanged",u),()=>{e.off("textChanged",u)}},[e]),S.jsx(EN,{ref:n,onBeforeInput:c,onKeyDown:c,onClick:c,onContextMenu:c,onChange:o,value:s})};/*!
 * Copyright (c) Microsoft Corporation and contributors. All rights reserved.
 * Licensed under the MIT License.
 */class V8e extends An{constructor(e){super(),this.sequenceDeltaHandler=n=>{this._latestText=this._sharedString.getText();const r=n.isLocal,i=n.opArgs.op;let s;if(i.type===nt.INSERT)s=a=>{if(i.pos1===void 0)throw new Error("pos1 undefined");if(i.seg===void 0)throw new Error("seg undefined");const o=i.pos1,l=i.seg.length;let c;return a<=o?c=a:c=a+l,c};else if(i.type===nt.REMOVE)s=a=>{if(i.pos1===void 0)throw new Error("pos1 undefined");if(i.pos2===void 0)throw new Error("pos2 undefined");const o=i.pos1,l=i.pos2,c=l-o;let u;return a<=o?u=a:a>l-1?u=a-c:u=o,u};else throw new Error("Don't know how to handle op types beyond insert and remove");this.emit("textChanged",{isLocal:r,transformPosition:s})},this._sharedString=e,this._latestText=this._sharedString.getText(),this._sharedString.on("sequenceDelta",this.sequenceDeltaHandler)}getText(){return this._latestText}insertText(e,n){this._sharedString.insertText(n,e)}removeText(e,n){this._sharedString.removeText(e,n)}replaceText(e,n,r){this._sharedString.replaceText(n,r,e)}}const W8e=P.memo(t=>{const e=G8e(t.container,t.patient_id);return e?S.jsx("div",{className:"app",children:S.jsx(U8e,{sharedStringHelper:new V8e(e)})}):S.jsx("div",{})});function G8e(t,e){const[n,r]=P.useState(),{createContainer:i}=P.useContext(Vn),s=async()=>{const a=new t8e,o={initialObjects:{sharedString:A2}};let l,c=t;if(t===""){({container:l}=await a.createContainer(o));const u=await l.attach();return await i(e,u),c=u,l.initialObjects.sharedString}return{container:l}=await a.getContainer(c,o),l.connectionState!==At.Connected&&await new Promise(u=>{l.once("connected",()=>{u()})}),l.initialObjects.sharedString};return P.useEffect(()=>{s().then(a=>r(a))},[]),n}const K8e="_patientDetails_nq6sy_1",Y8e={patientDetails:K8e};function J8e(t){return S.jsx("div",{className:Y8e.patientDetails,children:S.jsxs(pl,{children:[S.jsx(qn,{children:S.jsx(Qn,{primary:t.patient.fname+" "+t.patient.lname})}),S.jsx(bd,{}),S.jsx(qn,{children:S.jsx(Qn,{primary:t.patient.identifier})}),S.jsx(bd,{}),S.jsx(qn,{children:S.jsx(Qn,{primary:t.patient.location})})]})})}const X8e="_patientProgress_1uuk6_1",Q8e={patientProgress:X8e},Z8e="";function eFe({patient:t,readOnly:e}){const[n,r]=P.useState(""),[i,s]=P.useState(""),[a,o]=P.useState(""),[l,c]=P.useState(!1);P.useEffect(()=>{async function p(){t.progress&&(r(t.progress.problems),s(t.progress.history),o(t.progress.plan),c(!0))}p()},[]),P.useEffect(()=>{async function p(){if(!e&&l){const f={...t,progress:{problems:n,history:i,plan:a}};try{if(!(await fetch(`${Z8e}/api/patient/${f._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).ok)throw new Error("Error updating patient progress")}catch(m){console.error("Error updating patient progress:",m)}}}p()},[e]);const u=p=>{r(p.target.value)},d=p=>{s(p.target.value)},h=p=>{o(p.target.value)};return t.progress?S.jsxs(at,{item:!0,container:!0,spacing:0,className:Q8e.patientProgress,children:[S.jsx(at,{item:!0,xs:12,children:S.jsx(_n,{id:"outlined-basic",label:"Problems",variant:"outlined",margin:"dense",value:n,onChange:u,disabled:!e})}),S.jsx(at,{item:!0,xs:12,children:S.jsx(_n,{id:"outlined-basic",label:"History",variant:"outlined",margin:"dense",value:i,onChange:d,disabled:!e})}),S.jsx(at,{item:!0,xs:12,children:S.jsx(_n,{id:"outlined-basic",label:"Plan",variant:"outlined",margin:"dense",value:a,onChange:h,disabled:!e})})]}):"Loading"}var tP={},tFe=nr;Object.defineProperty(tP,"__esModule",{value:!0});var nP=tP.default=void 0,nFe=tFe(gi()),rFe=S,iFe=(0,nFe.default)((0,rFe.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"CircleOutlined");nP=tP.default=iFe;var rP={},sFe=nr;Object.defineProperty(rP,"__esModule",{value:!0});var iP=rP.default=void 0,aFe=sFe(gi()),oFe=S,lFe=(0,aFe.default)((0,oFe.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.17-5.24-1.1-1.1c.71-1.33.53-3.01-.59-4.13C13.79 8.84 12.9 8.5 12 8.5c-.03 0-.06.01-.09.01L13 9.6l-1.06 1.06-2.83-2.83L11.94 5 13 6.06l-.96.96c1.27.01 2.53.48 3.5 1.44 1.7 1.71 1.91 4.36.63 6.3zm-1.28 1.41L12.06 19 11 17.94l.95-.95c-1.26-.01-2.52-.5-3.48-1.46-1.71-1.71-1.92-4.35-.64-6.29l1.1 1.1c-.71 1.33-.53 3.01.59 4.13.7.7 1.63 1.04 2.56 1.01L11 14.4l1.06-1.06 2.83 2.83z"}),"ChangeCircleOutlined");iP=rP.default=lFe;var sP={},cFe=nr;Object.defineProperty(sP,"__esModule",{value:!0});var aP=sP.default=void 0,uFe=cFe(gi()),dFe=S,hFe=(0,uFe.default)((0,dFe.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"}),"CheckCircleOutlineOutlined");aP=sP.default=hFe;const fg="",fFe={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,pt:2,px:4,pb:3};function pFe(t){const[e,n]=P.useState(()=>t.task.status===2),[r,i]=P.useState(()=>t.task.status===1),[s,a]=P.useState(t.task.result),[o,l]=P.useState(!1),c=async()=>{!e&&!r?(i(!0),await xn.put(`${fg}/api/task/updatetask/${t.task._id}`,{status:1,finished_at:null})):!e&&r?(n(!0),i(!1),l(!0),await xn.put(`${fg}/api/task/updatetask/${t.task._id}`,{status:2,finished_at:Date.now()})):(n(!1),i(!1),await xn.put(`${fg}/api/task/updatetask/${t.task._id}`,{status:0,finished_at:null}))},u=async()=>{await xn.put(`${fg}/api/task/updatetask/${t.task._id}`,{status:2,result:s}),l(!1)},d=h=>{a(h.target.value)};return S.jsx(at,{item:!0,lg:6,sm:3,children:S.jsxs(dT,{children:[S.jsx(Ou,{control:S.jsx(M0,{onClick:c,indeterminate:r,checked:e,icon:S.jsx(nP,{}),indeterminateIcon:S.jsx(iP,{}),checkedIcon:S.jsx(aP,{})}),label:t.task.name}),r&&t.task.clinician&&S.jsx(AT,{id:t.task.clinician.avatar}),e&&t.task.result!==""&&S.jsx(_n,{label:"Result",variant:"outlined",value:s,onChange:d,disabled:t.task.status>=2}),S.jsx(Ro,{open:o,onClose:u,children:S.jsxs(ct,{sx:{...fFe,width:200},children:[S.jsx(_n,{label:"Enter result",variant:"outlined",value:s,onChange:d}),S.jsx(ht,{variant:"contained",color:"primary",onClick:u,children:"Save"})]})})]})})}const mFe="_patientTasks_54ksz_1",gFe={patientTasks:mFe},vFe="";function yFe(t){const[e,n]=P.useState([]);return P.useEffect(()=>{async function r(){const{data:i}=await xn.get(`${vFe}/api/task/patienttasks/${t.patient._id}`);n(i)}r()},[t.trigger]),S.jsx(at,{item:!0,container:!0,spacing:2,className:gFe.patientTasks,children:e.map(r=>S.jsx(pFe,{task:r},r._id))})}const pg={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",bolghadow:24,pt:2,px:4,pb:3};function bFe(t){const{createTask:e,loggedInUser:n}=P.useContext(Vn),[r,i]=P.useState(!1),[s,a]=P.useState(!1),[o,l]=P.useState(0),c=Mc(),u=()=>{i(!0)},d=()=>{i(!1)},h=()=>{a(!s)};function p(g){const[v,y]=P.useState(!1),b=()=>{y(!0)},C=()=>{y(!1)},R=async()=>{const k={name:"XR",type:"Radiology",patient:g.patient._id,clinician:n._id,priority:1,status:0,result:""};await g.createTask(k),l(T=>T+1)},w=async()=>{const k={name:"USS",type:"Radiology",patient:g.patient._id,clinician:n._id,priority:2,status:0,result:""};await g.createTask(k),l(T=>T+1)},E=async()=>{const k={name:"CT",type:"Radiology",patient:g.patient._id,clinician:n._id,priority:3,status:0,result:""};await g.createTask(k),l(T=>T+1)};return S.jsxs(S.Fragment,{children:[S.jsx(ht,{onClick:b,children:"Radiology"}),S.jsx(Ro,{open:v,onClose:C,"aria-labelledby":"child-modal-title","aria-describedby":"child-modal-description",children:S.jsxs(ct,{sx:{...pg,width:200},children:[S.jsx("h2",{id:"child-modal-title",children:"Radiology"}),S.jsx("p",{id:"child-modal-description",children:"Select radiologic test"}),S.jsx(ht,{onClick:R,children:"XR"}),S.jsx(ht,{onClick:w,children:"USS"}),S.jsx(ht,{onClick:E,children:"CT"}),S.jsx(ht,{onClick:C,children:"Close"})]})})]})}function f(g){const[v,y]=P.useState(!1),b=()=>{y(!0)},C=()=>{y(!1)},R=async()=>{const k={name:"FBC",type:"Blood-test",patient:g.patient._id,clinician:n._id,priority:1,status:0,result:""};await g.createTask(k),l(T=>T+1)},w=async()=>{const k={name:"UE",type:"Blood-test",patient:g.patient._id,clinician:n._id,priority:1,status:0,result:""};await g.createTask(k),l(T=>T+1)},E=async()=>{const k={name:"COAG",type:"Blood-test",patient:g.patient._id,clinician:n._id,priority:1,status:0,result:""};await g.createTask(k),l(T=>T+1)};return S.jsxs(S.Fragment,{children:[S.jsx(ht,{onClick:b,children:"Blood Test"}),S.jsx(Ro,{open:v,onClose:C,"aria-labelledby":"child-modal-title","aria-describedby":"child-modal-description",children:S.jsxs(ct,{sx:{...pg,width:200},children:[S.jsx("h2",{id:"child-modal-title",children:"Blood Test"}),S.jsx("p",{id:"child-modal-description",children:"Select blood test"}),S.jsx(ht,{onClick:R,children:"FBC"}),S.jsx(ht,{onClick:w,children:"UE"}),S.jsx(ht,{onClick:E,children:"COAG"}),S.jsx(ht,{onClick:C,children:"Close"})]})})]})}function m(g){const[v,y]=P.useState(!1),b=()=>{y(!0)},C=()=>{y(!1)},R=async()=>{const w={name:"Review",type:"Review",patient:g.patient._id,clinician:n._id,priority:0,status:0,result:""};await g.createTask(w),l(E=>E+1)};return S.jsxs(S.Fragment,{children:[S.jsx(ht,{onClick:b,children:"Review"}),S.jsx(Ro,{open:v,onClose:C,"aria-labelledby":"child-modal-title","aria-describedby":"child-modal-description",children:S.jsxs(ct,{sx:{...pg,width:200},children:[S.jsx("h2",{id:"child-modal-title",children:"Review"}),S.jsx("p",{id:"child-modal-description",children:"Review patient"}),S.jsx(ht,{onClick:R,children:"Create"}),S.jsx(ht,{onClick:C,children:"Close"})]})})]})}return S.jsx(hs,{elevation:3,style:{padding:8,margin:5},children:S.jsx(ct,{sx:{flexGrow:1,maxHeight:{xs:900,sm:600,lg:300}},children:S.jsxs(at,{item:!0,container:!0,spacing:2,children:[S.jsx(at,{item:!0,lg:1,sm:3,xs:6,order:{xs:1,sm:1,lg:1},children:S.jsx(ht,{onClick:()=>c(`/patientdetails/${t.patient._id}`),children:S.jsx(J8e,{patient:t.patient})})}),S.jsx(at,{item:!0,lg:4,sm:5,xs:6,order:{xs:2,sm:2,lg:2},children:S.jsx(ct,{component:"div",sx:{overflowY:"scroll",maxHeight:200},children:S.jsx(eFe,{patient:t.patient,readOnly:s})})}),S.jsx(at,{item:!0,lg:4,sm:12,xs:6,order:{xs:5,sm:6,lg:3},children:S.jsx(ct,{component:"div",sx:{overflowY:"scroll",maxHeight:200},children:S.jsx(yFe,{patient:t.patient,trigger:o})})}),S.jsx(at,{item:!0,lg:3,sm:4,xs:6,order:{xs:6,sm:3,lg:4},children:S.jsx(ct,{component:"div",sx:{overflowY:"scroll",maxHeight:200},children:S.jsx(W8e,{container:t.patient.container,patient_id:t.patient._id})})}),S.jsx(at,{item:!0,lg:1,sm:3,xs:6,order:{xs:3,sm:4,lg:5}}),S.jsx(at,{item:!0,lg:4,sm:5,xs:6,order:{xs:4,sm:5,lg:6},children:S.jsx(ht,{variant:"contained",role:"Edit",onClick:h,children:s?"Add":"Edit"})}),S.jsxs(at,{item:!0,lg:4,sm:12,xs:6,order:{xs:7,sm:7,lg:7},children:[S.jsx(ht,{variant:"contained",role:"Add",onClick:u,children:"Add"}),S.jsx(Ro,{open:r,onClose:d,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:S.jsxs(ct,{sx:{...pg,width:400},children:[S.jsx("h2",{id:"parent-modal-title",children:"Type of Task to Add"}),S.jsx("p",{id:"parent-modal-description",children:"Select from options below"}),S.jsx(f,{patient:t.patient,createTask:e}),S.jsx(p,{patient:t.patient,createTask:e}),S.jsx(m,{patient:t.patient,createTask:e})]})})]}),S.jsx(at,{item:!0,lg:3,sm:6,xs:6,order:{xs:8,sm:8,lg:8}})]})})})}function SFe(){const{team:t}=P.useContext(Vn),[e,n]=P.useState(t.patients);P.useEffect(()=>{n(t.patients)},[t]);const r=()=>{const[i,s]=P.useState(""),[a,o]=P.useState(""),[l,c]=P.useState(""),u=d=>{if(d.target.name==="name"){s(d.target.value);const h=e.slice().sort((p,f)=>d.target.value==="a-z"?p.fname.localeCompare(f.fname):d.target.value==="z-a"?f.fname.localeCompare(p.fname):0);n(h)}else if(d.target.name==="identifier"){o(d.target.value);const h=e.slice().sort((p,f)=>d.target.value==="a-z"?p.identifier.localeCompare(f.identifier):d.target.value==="z-a"?f.identifier.localeCompare(p.identifier):0);n(h)}else if(d.target.name==="location"){c(d.target.value);const h=e.slice().sort((p,f)=>d.target.value==="a-z"?p.location.localeCompare(f.location):d.target.value==="z-a"?f.location.localeCompare(p.location):0);n(h)}};return S.jsxs("div",{children:[S.jsxs(Va,{sx:{m:1,minWidth:150},children:[S.jsx(Yl,{id:"name-label",children:"Name"}),S.jsxs(Ho,{labelId:"name-label",id:"name-select",name:"name",value:i,label:"Name",onChange:u,children:[S.jsx(Pn,{value:"a-z",children:"A-Z"}),S.jsx(Pn,{value:"z-a",children:"Z-A"})]})]}),S.jsxs(Va,{sx:{m:1,minWidth:150},children:[S.jsx(Yl,{id:"identifier-label",children:"Identifier"}),S.jsxs(Ho,{labelId:"identifier-label",id:"identifier-select",name:"identifier",value:a,label:"identifier",onChange:u,children:[S.jsx(Pn,{value:"a-z",children:"A-Z"}),S.jsx(Pn,{value:"z-a",children:"Z-A"})]})]}),S.jsxs(Va,{sx:{m:1,minWidth:150},children:[S.jsx(Yl,{id:"location-label",children:"Location"}),S.jsxs(Ho,{labelId:"location-label",id:"location-select",name:"location",value:l,label:"Location",onChange:u,children:[S.jsx(Pn,{value:"a-z",children:"A-Z"}),S.jsx(Pn,{value:"z-a",children:"Z-A"})]})]})]})};return e?S.jsxs(ct,{children:[S.jsx(r,{}),e.map(i=>S.jsx(bFe,{patient:i},i._id))]}):S.jsx(Yp,{})}var oP={},xFe=nr;Object.defineProperty(oP,"__esModule",{value:!0});var T7=oP.default=void 0,wFe=xFe(gi()),CFe=S,EFe=(0,wFe.default)((0,CFe.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");T7=oP.default=EFe;var lP={},TFe=nr;Object.defineProperty(lP,"__esModule",{value:!0});var R7=lP.default=void 0,RFe=TFe(gi()),kFe=S,PFe=(0,RFe.default)((0,kFe.jsx)("path",{d:"m19.77 5.03 1.4 1.4L8.43 19.17l-5.6-5.6 1.4-1.4 4.2 4.2L19.77 5.03m0-2.83L8.43 13.54l-4.2-4.2L0 13.57 8.43 22 24 6.43 19.77 2.2z"}),"DoneOutline");R7=lP.default=PFe;var cP={},_Fe=nr;Object.defineProperty(cP,"__esModule",{value:!0});var uP=cP.default=void 0,AFe=_Fe(gi()),OFe=S,DFe=(0,AFe.default)((0,OFe.jsx)("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done");uP=cP.default=DFe;const pI="";function IFe(){const t="asc",e="type",[r,i]=P.useState(t),[s,a]=P.useState(e),[o,l]=P.useState([]),[c,u]=P.useState(0),[d,h]=P.useState(!1),[p,f]=P.useState(null),[m,g]=P.useState(5),[v,y]=P.useState(0),{deleteTask:b,claimTask:C,completeTask:R,loggedInUser:w}=P.useContext(Vn),[E,k]=P.useState(!1),[T,_]=P.useState([]);P.useEffect(()=>{async function W(){const J=[],{data:K}=await xn.get(`${pI}/api/team/${w.team}/patient_list`);for(const Q of K){const{data:re}=await xn.get(`${pI}/api/task/incompletetasks/${Q._id}`);for(const G of re){let ie;G.clinician?ie=G.clinician.fname+" "+G.clinician.lname:ie="";const te={_id:G._id,name:G.name,type:G.type,patient:G.patient.fname+" "+G.patient.lname,clinician:ie,priority:G.priority,time:G.created_at};J.push(te)}}_(J)}W()},[E]);function D(W,J,K){return J[K]<W[K]?-1:J[K]>W[K]?1:0}function I(W,J){return W==="desc"?(K,Q)=>D(K,Q,J):(K,Q)=>-D(K,Q,J)}function M(W,J){const K=W.map((Q,re)=>[Q,re]);return K.sort((Q,re)=>{const G=J(Q[0],re[0]);return G!==0?G:Q[1]-re[1]}),K.map(Q=>Q[0])}const A=[{id:"name",numeric:!1,disablePadding:!0,label:"Tasks"},{id:"type",numeric:!1,disablePadding:!1,label:"Type"},{id:"patient",numeric:!1,disablePadding:!1,label:"Patient"},{id:"clinician",numeric:!1,disablePadding:!1,label:"Clinician"},{id:"priority",numeric:!0,disablePadding:!1,label:"Priority"},{id:"time",numeric:!0,disablePadding:!1,label:"Time"}];function O(W){const{order:J,orderBy:K,numSelected:Q,rowCount:re,onRequestSort:G}=W,ie=te=>Z=>{G(Z,te)};return S.jsx(QN,{children:S.jsxs(Wa,{children:[S.jsx(It,{padding:"checkbox"}),A.map(te=>S.jsx(It,{align:te.id=="name"?"left":"right",padding:te.disablePadding?"none":"normal",sortDirection:K===te.id?J:!1,children:S.jsxs(qie,{active:K===te.id,direction:K===te.id?J:"asc",onClick:ie(te.id),children:[te.label,K===te.id?S.jsx(ct,{component:"span",sx:UU,children:J==="desc"?"sorted descending":"sorted ascending"}):null]})},te.id))]})})}O.propTypes={numSelected:z.number.isRequired,onRequestSort:z.func.isRequired,order:z.oneOf(["asc","desc"]).isRequired,orderBy:z.string.isRequired,rowCount:z.number.isRequired};function L(W){const{numSelected:J,tasksSelected:K}=W;return S.jsxs(yT,{sx:{pl:{sm:2},pr:{xs:1,sm:1},...J>0&&{bgcolor:Q=>xt(Q.palette.primary.main,Q.palette.action.activatedOpacity)}},children:[J>0?S.jsxs(yt,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[J," selected"]}):S.jsx(yt,{sx:{flex:"1 1 100%"},variant:"h6",id:"tableTitle",component:"div",children:"Patient Tasks"}),J>0?S.jsxs(ct,{sx:{display:"flex",flexDirection:"row"},children:[S.jsx(lS,{title:"Claim",children:S.jsx(ii,{onClick:()=>{C(K),l([]),k(Q=>!Q)},children:S.jsx(R7,{})})}),S.jsx(lS,{title:"Done",children:S.jsx(ii,{onClick:()=>{R(K),l([]),k(Q=>!Q)},children:S.jsx(uP,{})})}),S.jsx(lS,{title:"Delete",children:S.jsx(ii,{onClick:()=>{b(K),l([]),k(Q=>!Q)},children:S.jsx(T7,{})})})]}):S.jsx(ct,{})]})}L.propTypes={numSelected:z.number.isRequired},P.useEffect(()=>{let W,J;p!=null?(W=r,J=s):(W=t,J=e);let K=M(T,I(W,J));p!=null?K=K.slice(c*m,c*m+m):K=K.slice(0*5,0*5+5),f(K)},[T]);const F=P.useCallback((W,J)=>{const Q=s===J&&r==="asc"?"desc":"asc";i(Q),a(J);const G=M(T,I(Q,J)).slice(c*m,c*m+m);f(G)},[r,s,c,m,T]),B=(W,J)=>{const K=o.indexOf(J);let Q=[];K===-1?Q=Q.concat(o,J):K===0?Q=Q.concat(o.slice(1)):K===o.length-1?Q=Q.concat(o.slice(0,-1)):K>0&&(Q=Q.concat(o.slice(0,K),o.slice(K+1))),l(Q)},j=P.useCallback((W,J)=>{u(J);const Q=M(T,I(r,s)).slice(J*m,J*m+m);f(Q);const re=J>0?Math.max(0,(1+J)*m-T.length):0,G=(d?33:53)*re;y(G)},[r,s,d,m,T]),q=P.useCallback(W=>{const J=parseInt(W.target.value,10);g(J),u(0);const Q=M(T,I(r,s)).slice(0*J,0*J+J);f(Q),y(0)},[r,s,T]),V=W=>{h(W.target.checked)},U=W=>o.indexOf(W)!==-1;function ne(W){const J=new Date(W),K=J.getTimezoneOffset()/60,Q=12,re=(J.getHours()+K+Q).toString().padStart(2,"0"),G=J.getMinutes().toString().padStart(2,"0"),ie=J.getDate().toString().padStart(2,"0"),te=(J.getMonth()+1).toString().padStart(2,"0");return`${ie}-${te} ${re}:${G}`}return S.jsxs(ct,{sx:{width:"100%"},children:[S.jsxs(hs,{sx:{width:"100%",mb:2},children:[S.jsx(L,{numSelected:o.length,tasksSelected:o}),S.jsx(vT,{children:S.jsxs(mT,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:d?"small":"medium",children:[S.jsx(O,{numSelected:o.length,order:r,orderBy:s,onRequestSort:F,rowCount:T.length}),S.jsxs(gT,{children:[p?p.map((W,J)=>{const K=U(W._id),Q=`enhanced-table-checkbox-${J}`;return S.jsxs(Wa,{hover:!0,onClick:re=>B(re,W._id),role:"checkbox","aria-checked":K,tabIndex:-1,selected:K,sx:{cursor:"pointer"},children:[S.jsx(It,{padding:"checkbox",children:S.jsx(M0,{color:"primary",checked:K,inputProps:{"aria-labelledby":Q}})}),S.jsx(It,{component:"th",id:Q,scope:"row",padding:"none",children:W.name}),S.jsx(It,{align:"right",children:W.type}),S.jsx(It,{align:"right",children:W.patient}),S.jsx(It,{align:"right",children:W.clinician}),S.jsx(It,{align:"right",children:W.priority}),S.jsx(It,{align:"right",children:ne(W.time)})]},W._id)}):null,v>0&&S.jsx(Wa,{style:{height:v},children:S.jsx(It,{colSpan:6})})]})]})}),S.jsx(Rie,{rowsPerPageOptions:[5,10,25],component:"div",count:T.length,rowsPerPage:m,page:c,onPageChange:j,onRowsPerPageChange:q})]}),S.jsx(Ou,{control:S.jsx(JN,{checked:d,onChange:V}),label:"Dense padding"})]})}function e0(t){const{children:e,value:n,index:r,...i}=t;return S.jsx("div",{role:"tabpanel",hidden:n!==r,id:`simple-tabpanel-${r}`,"aria-labelledby":`simple-tab-${r}`,...i,children:n===r&&S.jsx(ct,{sx:{p:3},children:e})})}e0.propTypes={children:z.node,index:z.number.isRequired,value:z.number.isRequired};function $x(t){return{id:`simple-tab-${t}`,"aria-controls":`simple-tabpanel-${t}`}}function MFe(){const[t,e]=P.useState(0),n=(r,i)=>{e(i)};return S.jsxs(ct,{sx:{width:"100%"},children:[S.jsx(ct,{sx:{borderBottom:1,borderColor:"divider"},children:S.jsxs(dse,{value:t,onChange:n,"aria-label":"basic tabs example",children:[S.jsx(uS,{label:"OVERVIEW",...$x(0)}),S.jsx(uS,{label:"OUTSTANDING TASKS",...$x(1)}),S.jsx(uS,{label:"ADD PATIENT",...$x(2)})]})}),S.jsx(e0,{value:t,index:0,children:S.jsx(SFe,{})}),S.jsx(e0,{value:t,index:1,children:S.jsx(IFe,{})}),S.jsx(e0,{value:t,index:2,children:S.jsx(f_e,{})})]})}const NFe="_container_1aj3b_1",FFe="_cardContainer_1aj3b_7",$Fe="_cardContent_1aj3b_19",LFe="_cardContentRead_1aj3b_33",BFe="_link_1aj3b_47",Wh={container:NFe,cardContainer:FFe,cardContent:$Fe,cardContentRead:LFe,link:BFe};function jFe(){const{notification:t,deleteNotification:e,readNotification:n,notificationsLoading:r}=P.useContext(Vn),[i,s]=P.useState([]);P.useEffect(()=>{s(t)},[t]);const a=l=>{if(l.target.value==10)s(t);else if(l.target.value==20){const c=[...t].sort((u,d)=>u.created_at<d.created_at?1:-1);s(c)}else if(l.target.value==60){const c=[...t].sort((u,d)=>u.created_at>d.created_at?1:-1);s(c)}else if(l.target.value==30){const c=[...t].sort((u,d)=>u.patient.lname>d.patient.lname?1:-1);s(c)}else if(l.target.value==40){const c=[...t].sort((u,d)=>u.type>d.type?1:-1);s(c)}else if(l.target.value==50){const c=[...t].sort((u,d)=>u.isRead>d.isRead?1:-1);s(c)}};function o(l){const c=new Date(l),u=c.getTimezoneOffset()/60,d=12,h=(c.getHours()+u+d).toString().padStart(2,"0"),p=c.getMinutes().toString().padStart(2,"0"),f=c.getDate().toString().padStart(2,"0"),m=(c.getMonth()+1).toString().padStart(2,"0");return`${f}-${m} ${h}:${p}`}return r?S.jsx(Yp,{}):S.jsx(uT,{className:Wh.container,children:S.jsxs(ct,{className:Wh.cardContainer,children:[S.jsxs(Va,{variant:"standard",sx:{minWidth:120,maxWidth:200,mt:1,ml:"auto"},children:[S.jsx(Yl,{id:"notification-lable",children:"Sort By"}),S.jsxs(Ho,{labelId:"notification-lable",defaultValue:10,lable:"Sort by",onChange:a,children:[S.jsx(Pn,{value:10,children:"None"}),S.jsx(Pn,{value:20,children:"Time (Latest to Old)"}),S.jsx(Pn,{value:60,children:"Time (Old to Latest)"}),S.jsx(Pn,{value:30,children:"Patient Name (A-Z)"}),S.jsx(Pn,{value:40,children:"Type (Admin Comes First)"}),S.jsx(Pn,{value:50,children:"Unread"})]})]}),i.map((l,c)=>S.jsxs(Nc,{variant:"outlined",sx:{margin:"20px",":hover":{boxShadow:12},borderRadius:4},children:[S.jsxs(Fc,{className:l.isRead?Wh.cardContentRead:Wh.cardContent,id:`${l.id}`,children:[l.isRead?S.jsxs(yt,{sx:{textAlign:"left",fontSize:22,paddingBottom:"5px",color:"white",fontWeight:"bold"},children:[l.type," Message"]}):S.jsxs(yt,{sx:{textAlign:"left",fontSize:22,paddingBottom:"5px",color:"white",fontWeight:"bold"},children:["New ",l.type," Message"]}),S.jsxs(yt,{sx:{textAlign:"left",fontSize:18,paddingBottom:"10px",color:"white"},children:["Time: ",o(l.created_at)]}),S.jsxs(yt,{sx:{textAlign:"left",bgcolor:l.isRead?"grey":"#9ED0F9",padding:"30px",fontSize:20},children:[l.entity," ",l.patient.fname," ",l.patient.lname]})]}),S.jsxs(cQ,{sx:{mt:1,ml:1,paddingBottom:3},children:[S.jsx(A6,{to:`/patientdetails/${l.patient._id}`,className:Wh.link,children:S.jsx(ht,{size:"small",variant:"outlined",onClick:()=>n(l._id),children:"View"})}),S.jsx(ht,{size:"small",variant:"outlined",onClick:()=>e(l._id),role:"Notification",children:"Delete"})]})]},c))]})})}var dP={},qFe=nr;Object.defineProperty(dP,"__esModule",{value:!0});var k7=dP.default=void 0,zFe=qFe(gi()),HFe=S,UFe=(0,zFe.default)((0,HFe.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");k7=dP.default=UFe;const VFe="_appBarContainer_2nowv_1",WFe="_toolbar_2nowv_1",GFe="_isActive_2nowv_9",KFe="_inActive_2nowv_19",Ip={appBarContainer:VFe,toolbar:WFe,isActive:GFe,inActive:KFe};function YFe(){return S.jsx(yt,{variant:"h4",sx:{flexGrow:1,textAlign:"left"},children:"Patient List Manager"})}var hP={},JFe=nr;Object.defineProperty(hP,"__esModule",{value:!0});var P7=hP.default=void 0,XFe=JFe(gi()),QFe=S,ZFe=(0,XFe.default)((0,QFe.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"}),"Mail");P7=hP.default=ZFe;function e$e(){const{unreadNotification:t,loggedIn:e}=P.useContext(Vn),[n,r]=P.useState(null),i=o=>{r(o.currentTarget)},s=()=>{r(null)};function a(o){return o===0?"no notification":o>99?"more than 99 notification":`${o} notification`}return S.jsxs(S.Fragment,{children:[e?S.jsx(ii,{"aria-label":a(t.length),size:"large",color:"inherit",onClick:i,children:S.jsx(jX,{badgeContent:e?t.length:0,color:"secondary",children:S.jsx(P7,{})})}):null,S.jsx(hT,{sx:{mt:"45px"},anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!n,onClose:s,children:t.map((o,l)=>S.jsxs(Pn,{onClick:s,sx:{m:2,p:2,flexDirection:"column",alignItems:"flex-start",borderColor:"#9ED0F9",borderWidth:"2px",borderStyle:"solid",borderRadius:"5px"},children:[S.jsxs(yt,{children:[o.entity," ",o.patient.fname]}),S.jsxs(ct,{children:[S.jsx(O6,{to:"/notification",className:Ip.link,children:S.jsx(ht,{size:"medium",children:"CHECK IT OUT"})}),S.jsx(ht,{size:"medium",children:"DISMISS"})]})]},l))})]})}var fP={},t$e=nr;Object.defineProperty(fP,"__esModule",{value:!0});var _7=fP.default=void 0,n$e=t$e(gi()),r$e=S,i$e=(0,n$e.default)((0,r$e.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");_7=fP.default=i$e;var pP={},s$e=nr;Object.defineProperty(pP,"__esModule",{value:!0});var A7=pP.default=void 0,a$e=s$e(gi()),o$e=S,l$e=(0,a$e.default)((0,o$e.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");A7=pP.default=l$e;const c$e=de("div")(({theme:t})=>({display:"flex",alignItems:"center",padding:t.spacing(0,1),...t.mixins.toolbar,justifyContent:"flex-end"}));function u$e(){const t=Ar(),{drawerOpen:e,handleDrawerClose:n}=P.useContext(Vn),r=[{link:"patientlist",text:"Patient List"},{link:"myteam",text:"My Team"},{link:"myprofile",text:"My Profile"},{link:"notification",text:"Notifications"}];return S.jsxs($Z,{sx:{width:240,flexShrink:0,"& .MuiDrawer-paper":{width:240,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:e,children:[S.jsx(c$e,{children:S.jsx(ii,{onClick:n,children:t.direction==="ltr"?S.jsx(_7,{}):S.jsx(A7,{})})}),S.jsx(pl,{children:r.map(i=>S.jsx(qn,{sx:{mt:2},children:S.jsx(O6,{to:`${i.link}`,className:({isActive:s})=>s?Ip.isActive:Ip.inActive,children:S.jsx(hte,{sx:{borderColor:"#2196F3",borderWidth:"2px",borderStyle:"solid",borderRadius:5},children:S.jsx(Qn,{sx:{color:"#2196F3",p:"10px",width:100},children:i.text})})})},i.text))})]})}var mP={},d$e=nr;Object.defineProperty(mP,"__esModule",{value:!0});var O7=mP.default=void 0,h$e=d$e(gi()),f$e=S,p$e=(0,h$e.default)((0,f$e.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20z"}),"AccountCircle");O7=mP.default=p$e;function m$e({handleLogout:t}){const[e,n]=En.useState(null),r=!!e,i=a=>{n(a.currentTarget)},s=()=>{n(null)};return S.jsxs("div",{children:[S.jsx(ii,{size:"large","aria-label":"user",color:"inherit",onClick:i,children:S.jsx(O7,{})}),S.jsx(hT,{anchorEl:e,open:r,onClose:s,onClick:s,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:S.jsx(Pn,{onClick:t,children:"Logout"})})]})}function g$e(){return S.jsx(yt,{variant:"button",onClick:()=>{window.location.href="/login"},style:{cursor:"pointer"},children:"Login"})}function v$e(){const{handleDrawerOpen:t,loggedIn:e,setLoggedIn:n,setLoggedInUser:r}=P.useContext(Vn),i=Mc(),s=async()=>{try{const a=await Hae(n,r,i)}catch(a){console.log(a)}};if(e)return S.jsxs(ct,{className:Ip.appBarContainer,children:[S.jsx(JJ,{position:"static",children:S.jsxs(yT,{className:Ip.toolbar,children:[S.jsx(ii,{size:"large",edge:"start",color:"primary","aria-label":"menu",onClick:t,sx:{mr:2},children:S.jsx(k7,{sx:{color:"#9ED0F9"}})}),S.jsx(YFe,{}),S.jsx(e$e,{}),e?S.jsx(m$e,{handleLogout:s}):S.jsx(g$e,{})]})}),e?S.jsx(u$e,{}):null]})}function y$e(){return S.jsxs("div",{className:"container",children:[S.jsx("nav",{children:S.jsx(v$e,{})}),S.jsx(rU,{})]})}const b$e=t=>{const e=new Date(t.birth_date),r=new Date-e;return Math.floor(r/(1e3*60*60*24*365))},Gh="";function S$e(t){const e=Mc(),{patientId:n}=Wv(),{patientData:r}=t,[i,s]=P.useState(""),[a,o]=P.useState(!1),[l,c]=P.useState(""),[u,d]=P.useState(""),[h,p]=P.useState(""),[f,m]=P.useState(!1),{refreshTeam:g,refreshNotifications:v,refreshUnreadNotifications:y}=P.useContext(Vn),b=async(T,_,D)=>{try{const I=await fetch(`${D}/api/team/transferTeam`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:T,supervisorId:_})});if(v(),y(),!I.ok)throw new Error("Error updating patient data")}catch(I){console.error("Error updating patient data:",I)}};P.useEffect(()=>{(async()=>{r.data&&(s(r.data),R(),k())})()},[r]),P.useEffect(()=>{a||(d(""),R())},[a]);const C=b$e(i),R=async()=>{const _=await(await fetch(`${Gh}/api/team/retrieveTeamByPatientId/${n}`)).json();c(_)},w=async T=>{await b(n,T,Gh),o(!1)},E=async T=>{try{if(!(await fetch(`${Gh}/api/patient/${n}`,{method:"DELETE"})).ok)throw new Error("Error delete patient")}catch(_){console.error("Error delete patient:",_)}m(!1),g(),v(),y(),e("/patientlist")},k=async()=>{const _=await(await fetch(`${Gh}/api/user/retrieveAllSupervisors`)).json();p(_)};return P.useEffect(()=>{(async()=>{try{const I=(await(await fetch(`${Gh}/api/user/retrieveAllSupervisors`)).json()).filter(M=>(M.fname+" "+M.lname).toLowerCase().includes(u.toLowerCase()));p(I)}catch(_){console.error(_)}})()},[u]),S.jsxs(Nc,{children:[S.jsxs(Fc,{children:[S.jsx(yt,{gutterBottom:!0,variant:"h5",component:"div",children:"Basic Information"}),S.jsxs(pl,{children:[S.jsx(qn,{divider:!0,children:S.jsx(Qn,{primary:`Patient ID: ${i.identifier}`})}),S.jsx(qn,{divider:!0,children:S.jsx(Qn,{primary:`Patient Name: ${i.fname} ${i.lname}`})}),S.jsx(qn,{divider:!0,children:S.jsx(Qn,{primary:`Age: ${C}`})}),S.jsx(qn,{divider:!0,children:S.jsx(Qn,{primary:`Gender: ${i.gender}`})}),S.jsx(qn,{divider:!0,children:S.jsx(Qn,{primary:`Location: ${i.location}`})}),S.jsx(qn,{divider:!0,button:!0,onClick:()=>o(!0),children:S.jsx(Qn,{primary:`Team: ${l.name}`})}),S.jsx(qn,{children:S.jsx(ht,{onClick:()=>m(!0),variant:"contained",color:"error",style:{margin:"auto"},children:"remove patient"})})]})]}),S.jsxs(Kw,{open:a,onClose:()=>o(!1),sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:"500px"}}},children:[S.jsx(Xw,{children:"Select supervisor"}),S.jsxs(Jw,{children:[S.jsx(_n,{label:"Search",variant:"outlined",value:u,onChange:T=>d(T.target.value),fullWidth:!0,margin:"normal"}),h.length>0?S.jsx(yf,{children:h.map(T=>S.jsx(qn,{children:S.jsx(ht,{onClick:()=>w(T._id),onClose:()=>o(!1),children:S.jsx(Qn,{primary:T.fname+" "+T.lname})})},T._id))}):S.jsx(yf,{children:"No supervisor found."})]}),S.jsx(Yw,{children:S.jsx(ht,{onClick:()=>o(!1),children:"Close"})})]}),S.jsxs(Kw,{open:f,onClose:()=>m(!1),sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:"500px"}}},children:[S.jsx(Xw,{children:"Remove Current Patient"}),S.jsx(Jw,{children:S.jsx(yt,{variant:"body1",children:"Are you sure you want to remove this patient?"})}),S.jsxs(Yw,{children:[S.jsx(ht,{onClick:E,variant:"contained",color:"error",children:"Yes"}),S.jsx(ht,{onClick:()=>m(!1),variant:"contained",color:"primary",children:"No"})]})]})]})}const x$e={0:S.jsx(nP,{}),1:S.jsx(iP,{}),2:S.jsx(aP,{})},w$e="";function C$e(){const{patientId:t}=Wv(),e=x8(`${w$e}/api/task/patienttasks/${t}`,[]),[n,r]=P.useState(null),[i,s]=P.useState(!1),a=l=>{r(l),s(!0)},o=()=>{s(!1)};return S.jsx(Nc,{children:S.jsxs(Fc,{children:[S.jsx(yt,{gutterBottom:!0,variant:"h5",component:"div",children:"Tasks"}),S.jsx(pl,{component:"nav","aria-label":"mailbox folders",sx:{overflowY:"scroll",component:"div",maxHeight:500},children:e.data.map((l,c)=>S.jsxs(En.Fragment,{children:[S.jsxs(qn,{button:!0,onClick:()=>a(l),children:[S.jsx(Qn,{primary:l.name}),x$e[l.status]]}),S.jsx(bd,{})]},c))}),S.jsxs(Kw,{open:i,onClose:o,sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:"500px"}}},children:[S.jsx(Xw,{children:n&&n.name}),S.jsx(Jw,{children:n&&n.status===0?S.jsx(yf,{children:"Task not started"}):n&&n.status===1?S.jsx(yf,{children:"Task in progress"}):S.jsx(yf,{children:n&&n.result})}),S.jsx(Yw,{children:S.jsx(ht,{onClick:o,children:"Close"})})]})]})})}var gP={},E$e=nr;Object.defineProperty(gP,"__esModule",{value:!0});var D7=gP.default=void 0,T$e=E$e(gi()),R$e=S,k$e=(0,T$e.default)((0,R$e.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");D7=gP.default=k$e;const mg=({value:t,onChange:e,onSubmit:n})=>{const[r,i]=P.useState(!1),[s,a]=P.useState(t);P.useEffect(()=>{a(t)},[r]);const o=()=>{i(!0)},l=u=>{a(u.target.value),e&&e(u.target.value)},c=()=>{i(!1),e&&e(s),n&&n(s)};return r?S.jsxs(S.Fragment,{children:[S.jsx(_n,{value:s,onChange:l,fullWidth:!0}),S.jsx(ht,{onClick:c,variant:"contained",children:S.jsx(uP,{})})]}):S.jsxs("div",{children:[S.jsx("div",{style:{display:"flex",justifyContent:"flex-start"},children:t}),S.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:S.jsx(ii,{onClick:o,children:S.jsx(D7,{})})})]})};function P$e(t){const{patientId:e}=Wv(),{patientData:n,API_BASE_URL:r}=t,[i,s]=P.useState(""),[a,o]=P.useState(""),[l,c]=P.useState(""),[u,d]=P.useState(""),{refreshTeam:h}=P.useContext(Vn),p=async(b,C,R)=>{try{if(!(await fetch(`${C}/api/patient/${b}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)})).ok)throw new Error("Error updating patient data");h()}catch(w){console.error("Error updating patient data:",w)}},f=async b=>{s(b),await p(e,r,y)},m=async b=>{o(b),await p(e,r,y)},g=async b=>{c(b),await p(e,r,y)},v=async b=>{d(b),await p(e,r,y)};P.useEffect(()=>{(async()=>{if(n.data&&n.data.progress){const C=n.data;s(C.description),c(C.progress.plan),d(C.progress.history),o(C.progress.problems)}})()},[n]);const y={description:i,progress:{problems:a,history:u,plan:l}};return S.jsx(Nc,{children:S.jsxs(Fc,{children:[S.jsx(yt,{gutterBottom:!0,variant:"h5",component:"div",children:"Extra Information"}),S.jsx(vT,{children:S.jsx(mT,{children:S.jsxs(gT,{children:[S.jsxs(Wa,{children:[S.jsx(It,{children:"Description:"}),S.jsx(It,{children:S.jsx(mg,{value:i,onChange:s,onSubmit:f})})]}),S.jsxs(Wa,{children:[S.jsx(It,{children:"Problems:"}),S.jsx(It,{children:S.jsx(mg,{value:a,onChange:o,onSubmit:m})})]}),S.jsxs(Wa,{children:[S.jsx(It,{children:"History:"}),S.jsx(It,{children:S.jsx(mg,{value:u,onChange:d,onSubmit:v})})]}),S.jsxs(Wa,{children:[S.jsx(It,{children:"Plan:"}),S.jsx(It,{children:S.jsx(mg,{value:l,onChange:c,onSubmit:g})})]})]})})})]})})}const Lx="";de(hs)(({theme:t})=>({backgroundColor:t.palette.mode==="dark"?"#1A2027":"#fff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary}));function _$e(){const{patientId:t}=Wv(),e=x8(`${Lx}/api/patient/${t}`,[]);return S.jsx(ct,{sx:{flexGrow:1,mt:3},children:S.jsxs(at,{container:!0,spacing:8,children:[S.jsxs(at,{container:!0,item:!0,spacing:3,xs:12,md:12,children:[S.jsx(at,{item:!0,xs:12,md:6,children:S.jsx("div",{children:S.jsx(S$e,{patientData:e,API_BASE_URL:Lx})})}),S.jsx(at,{item:!0,xs:12,md:6,children:S.jsx("div",{children:S.jsx(C$e,{patientData:e})})})]}),S.jsx(at,{item:!0,xs:12,md:12,children:S.jsx("div",{children:S.jsx(P$e,{patientData:e,API_BASE_URL:Lx})})})]})})}function A$e(){const{pathname:t}=Hd();return S.jsxs("div",{children:[S.jsx("img",{src:ZN,alt:"left",style:{maxWidth:"100%",height:"auto",margin:"auto"}}),S.jsxs("p",{children:["Sorry, we couldn't find what you're looking for! Is the path ",S.jsx("code",{children:t})," correct?"]})]})}function O$e(){return S.jsx(sU,{children:S.jsxs(Hs,{path:"/",element:S.jsx(y$e,{}),children:[S.jsx(Hs,{index:!0,element:S.jsx(nU,{to:"login",replace:!0})}),S.jsx(Hs,{path:"login",element:S.jsx(Gae,{})}),S.jsx(Hs,{path:"notification",element:S.jsx(jFe,{})}),S.jsx(Hs,{path:"myteam",element:S.jsx(e4e,{})}),S.jsx(Hs,{path:"myprofile",element:S.jsx(iPe,{})}),S.jsx(Hs,{path:"patientlist",element:S.jsx(MFe,{})}),S.jsx(Hs,{path:"patientdetails/:patientId",element:S.jsx(_$e,{})}),"//if nothing matches, show error page",S.jsx(Hs,{path:"*",element:S.jsx(A$e,{})})]})})}Bx.createRoot(document.getElementById("root")).render(S.jsx(En.StrictMode,{children:S.jsx(Uae,{children:S.jsx(uU,{children:S.jsx(O$e,{})})})}));export{JR as b};
